function $_(i,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in i)){const f=Object.getOwnPropertyDescriptor(a,c);f&&Object.defineProperty(i,c,f.get?f:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function t(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=t(c);fetch(c.href,f)}})();var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var U0={exports:{}},su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2;function J_(){if(N2)return su;N2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,c,f){var y=null;if(f!==void 0&&(y=""+f),c.key!==void 0&&(y=""+c.key),"key"in c){f={};for(var b in c)b!=="key"&&(f[b]=c[b])}else f=c;return c=f.ref,{$$typeof:i,type:a,key:y,ref:c!==void 0?c:null,props:f}}return su.Fragment=e,su.jsx=t,su.jsxs=t,su}var R2;function eb(){return R2||(R2=1,U0.exports=J_()),U0.exports}var A=eb(),V0={exports:{}},Dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function tb(){if(D2)return Dt;D2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.iterator;function k(te){return te===null||typeof te!="object"?null:(te=R&&te[R]||te["@@iterator"],typeof te=="function"?te:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,ee={};function K(te,Re,Be){this.props=te,this.context=Re,this.refs=ee,this.updater=Be||U}K.prototype.isReactComponent={},K.prototype.setState=function(te,Re){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,Re,"setState")},K.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function de(){}de.prototype=K.prototype;function fe(te,Re,Be){this.props=te,this.context=Re,this.refs=ee,this.updater=Be||U}var ie=fe.prototype=new de;ie.constructor=fe,q(ie,K.prototype),ie.isPureReactComponent=!0;var ve=Array.isArray,je={H:null,A:null,T:null,S:null},Pe=Object.prototype.hasOwnProperty;function H(te,Re,Be,Ge,qe,mt){return Be=mt.ref,{$$typeof:i,type:te,key:Re,ref:Be!==void 0?Be:null,props:mt}}function F(te,Re){return H(te.type,Re,void 0,void 0,void 0,te.props)}function P(te){return typeof te=="object"&&te!==null&&te.$$typeof===i}function z(te){var Re={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Be){return Re[Be]})}var Q=/\/+/g;function J(te,Re){return typeof te=="object"&&te!==null&&te.key!=null?z(""+te.key):Re.toString(36)}function X(){}function Ve(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(X,X):(te.status="pending",te.then(function(Re){te.status==="pending"&&(te.status="fulfilled",te.value=Re)},function(Re){te.status==="pending"&&(te.status="rejected",te.reason=Re)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function ae(te,Re,Be,Ge,qe){var mt=typeof te;(mt==="undefined"||mt==="boolean")&&(te=null);var Me=!1;if(te===null)Me=!0;else switch(mt){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(te.$$typeof){case i:case e:Me=!0;break;case S:return Me=te._init,ae(Me(te._payload),Re,Be,Ge,qe)}}if(Me)return qe=qe(te),Me=Ge===""?"."+J(te,0):Ge,ve(qe)?(Be="",Me!=null&&(Be=Me.replace(Q,"$&/")+"/"),ae(qe,Re,Be,"",function(Gt){return Gt})):qe!=null&&(P(qe)&&(qe=F(qe,Be+(qe.key==null||te&&te.key===qe.key?"":(""+qe.key).replace(Q,"$&/")+"/")+Me)),Re.push(qe)),1;Me=0;var rn=Ge===""?".":Ge+":";if(ve(te))for(var at=0;at<te.length;at++)Ge=te[at],mt=rn+J(Ge,at),Me+=ae(Ge,Re,Be,mt,qe);else if(at=k(te),typeof at=="function")for(te=at.call(te),at=0;!(Ge=te.next()).done;)Ge=Ge.value,mt=rn+J(Ge,at++),Me+=ae(Ge,Re,Be,mt,qe);else if(mt==="object"){if(typeof te.then=="function")return ae(Ve(te),Re,Be,Ge,qe);throw Re=String(te),Error("Objects are not valid as a React child (found: "+(Re==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":Re)+"). If you meant to render a collection of children, use an array instead.")}return Me}function Se(te,Re,Be){if(te==null)return te;var Ge=[],qe=0;return ae(te,Ge,"","",function(mt){return Re.call(Be,mt,qe++)}),Ge}function Ae(te){if(te._status===-1){var Re=te._result;Re=Re(),Re.then(function(Be){(te._status===0||te._status===-1)&&(te._status=1,te._result=Be)},function(Be){(te._status===0||te._status===-1)&&(te._status=2,te._result=Be)}),te._status===-1&&(te._status=0,te._result=Re)}if(te._status===1)return te._result.default;throw te._result}var Xe=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(Re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)};function it(){}return Dt.Children={map:Se,forEach:function(te,Re,Be){Se(te,function(){Re.apply(this,arguments)},Be)},count:function(te){var Re=0;return Se(te,function(){Re++}),Re},toArray:function(te){return Se(te,function(Re){return Re})||[]},only:function(te){if(!P(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Dt.Component=K,Dt.Fragment=t,Dt.Profiler=c,Dt.PureComponent=fe,Dt.StrictMode=a,Dt.Suspense=v,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=je,Dt.act=function(){throw Error("act(...) is not supported in production builds of React.")},Dt.cache=function(te){return function(){return te.apply(null,arguments)}},Dt.cloneElement=function(te,Re,Be){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var Ge=q({},te.props),qe=te.key,mt=void 0;if(Re!=null)for(Me in Re.ref!==void 0&&(mt=void 0),Re.key!==void 0&&(qe=""+Re.key),Re)!Pe.call(Re,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&Re.ref===void 0||(Ge[Me]=Re[Me]);var Me=arguments.length-2;if(Me===1)Ge.children=Be;else if(1<Me){for(var rn=Array(Me),at=0;at<Me;at++)rn[at]=arguments[at+2];Ge.children=rn}return H(te.type,qe,void 0,void 0,mt,Ge)},Dt.createContext=function(te){return te={$$typeof:y,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:f,_context:te},te},Dt.createElement=function(te,Re,Be){var Ge,qe={},mt=null;if(Re!=null)for(Ge in Re.key!==void 0&&(mt=""+Re.key),Re)Pe.call(Re,Ge)&&Ge!=="key"&&Ge!=="__self"&&Ge!=="__source"&&(qe[Ge]=Re[Ge]);var Me=arguments.length-2;if(Me===1)qe.children=Be;else if(1<Me){for(var rn=Array(Me),at=0;at<Me;at++)rn[at]=arguments[at+2];qe.children=rn}if(te&&te.defaultProps)for(Ge in Me=te.defaultProps,Me)qe[Ge]===void 0&&(qe[Ge]=Me[Ge]);return H(te,mt,void 0,void 0,null,qe)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(te){return{$$typeof:b,render:te}},Dt.isValidElement=P,Dt.lazy=function(te){return{$$typeof:S,_payload:{_status:-1,_result:te},_init:Ae}},Dt.memo=function(te,Re){return{$$typeof:w,type:te,compare:Re===void 0?null:Re}},Dt.startTransition=function(te){var Re=je.T,Be={};je.T=Be;try{var Ge=te(),qe=je.S;qe!==null&&qe(Be,Ge),typeof Ge=="object"&&Ge!==null&&typeof Ge.then=="function"&&Ge.then(it,Xe)}catch(mt){Xe(mt)}finally{je.T=Re}},Dt.unstable_useCacheRefresh=function(){return je.H.useCacheRefresh()},Dt.use=function(te){return je.H.use(te)},Dt.useActionState=function(te,Re,Be){return je.H.useActionState(te,Re,Be)},Dt.useCallback=function(te,Re){return je.H.useCallback(te,Re)},Dt.useContext=function(te){return je.H.useContext(te)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(te,Re){return je.H.useDeferredValue(te,Re)},Dt.useEffect=function(te,Re){return je.H.useEffect(te,Re)},Dt.useId=function(){return je.H.useId()},Dt.useImperativeHandle=function(te,Re,Be){return je.H.useImperativeHandle(te,Re,Be)},Dt.useInsertionEffect=function(te,Re){return je.H.useInsertionEffect(te,Re)},Dt.useLayoutEffect=function(te,Re){return je.H.useLayoutEffect(te,Re)},Dt.useMemo=function(te,Re){return je.H.useMemo(te,Re)},Dt.useOptimistic=function(te,Re){return je.H.useOptimistic(te,Re)},Dt.useReducer=function(te,Re,Be){return je.H.useReducer(te,Re,Be)},Dt.useRef=function(te){return je.H.useRef(te)},Dt.useState=function(te){return je.H.useState(te)},Dt.useSyncExternalStore=function(te,Re,Be){return je.H.useSyncExternalStore(te,Re,Be)},Dt.useTransition=function(){return je.H.useTransition()},Dt.version="19.0.0",Dt}var M2;function B1(){return M2||(M2=1,V0.exports=tb()),V0.exports}var $=B1();const vr=P1($);var F0={exports:{}},au={},z0={exports:{}},H0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2;function nb(){return O2||(O2=1,function(i){function e(Se,Ae){var Xe=Se.length;Se.push(Ae);e:for(;0<Xe;){var it=Xe-1>>>1,te=Se[it];if(0<c(te,Ae))Se[it]=Ae,Se[Xe]=te,Xe=it;else break e}}function t(Se){return Se.length===0?null:Se[0]}function a(Se){if(Se.length===0)return null;var Ae=Se[0],Xe=Se.pop();if(Xe!==Ae){Se[0]=Xe;e:for(var it=0,te=Se.length,Re=te>>>1;it<Re;){var Be=2*(it+1)-1,Ge=Se[Be],qe=Be+1,mt=Se[qe];if(0>c(Ge,Xe))qe<te&&0>c(mt,Ge)?(Se[it]=mt,Se[qe]=Xe,it=qe):(Se[it]=Ge,Se[Be]=Xe,it=Be);else if(qe<te&&0>c(mt,Xe))Se[it]=mt,Se[qe]=Xe,it=qe;else break e}}return Ae}function c(Se,Ae){var Xe=Se.sortIndex-Ae.sortIndex;return Xe!==0?Xe:Se.id-Ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;i.unstable_now=function(){return f.now()}}else{var y=Date,b=y.now();i.unstable_now=function(){return y.now()-b}}var v=[],w=[],S=1,R=null,k=3,U=!1,q=!1,ee=!1,K=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function ie(Se){for(var Ae=t(w);Ae!==null;){if(Ae.callback===null)a(w);else if(Ae.startTime<=Se)a(w),Ae.sortIndex=Ae.expirationTime,e(v,Ae);else break;Ae=t(w)}}function ve(Se){if(ee=!1,ie(Se),!q)if(t(v)!==null)q=!0,Ve();else{var Ae=t(w);Ae!==null&&ae(ve,Ae.startTime-Se)}}var je=!1,Pe=-1,H=5,F=-1;function P(){return!(i.unstable_now()-F<H)}function z(){if(je){var Se=i.unstable_now();F=Se;var Ae=!0;try{e:{q=!1,ee&&(ee=!1,de(Pe),Pe=-1),U=!0;var Xe=k;try{t:{for(ie(Se),R=t(v);R!==null&&!(R.expirationTime>Se&&P());){var it=R.callback;if(typeof it=="function"){R.callback=null,k=R.priorityLevel;var te=it(R.expirationTime<=Se);if(Se=i.unstable_now(),typeof te=="function"){R.callback=te,ie(Se),Ae=!0;break t}R===t(v)&&a(v),ie(Se)}else a(v);R=t(v)}if(R!==null)Ae=!0;else{var Re=t(w);Re!==null&&ae(ve,Re.startTime-Se),Ae=!1}}break e}finally{R=null,k=Xe,U=!1}Ae=void 0}}finally{Ae?Q():je=!1}}}var Q;if(typeof fe=="function")Q=function(){fe(z)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,X=J.port2;J.port1.onmessage=z,Q=function(){X.postMessage(null)}}else Q=function(){K(z,0)};function Ve(){je||(je=!0,Q())}function ae(Se,Ae){Pe=K(function(){Se(i.unstable_now())},Ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Se){Se.callback=null},i.unstable_continueExecution=function(){q||U||(q=!0,Ve())},i.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<Se?Math.floor(1e3/Se):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_getFirstCallbackNode=function(){return t(v)},i.unstable_next=function(Se){switch(k){case 1:case 2:case 3:var Ae=3;break;default:Ae=k}var Xe=k;k=Ae;try{return Se()}finally{k=Xe}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Se,Ae){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var Xe=k;k=Se;try{return Ae()}finally{k=Xe}},i.unstable_scheduleCallback=function(Se,Ae,Xe){var it=i.unstable_now();switch(typeof Xe=="object"&&Xe!==null?(Xe=Xe.delay,Xe=typeof Xe=="number"&&0<Xe?it+Xe:it):Xe=it,Se){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Xe+te,Se={id:S++,callback:Ae,priorityLevel:Se,startTime:Xe,expirationTime:te,sortIndex:-1},Xe>it?(Se.sortIndex=Xe,e(w,Se),t(v)===null&&Se===t(w)&&(ee?(de(Pe),Pe=-1):ee=!0,ae(ve,Xe-it))):(Se.sortIndex=te,e(v,Se),q||U||(q=!0,Ve())),Se},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(Se){var Ae=k;return function(){var Xe=k;k=Ae;try{return Se.apply(this,arguments)}finally{k=Xe}}}}(H0)),H0}var L2;function rb(){return L2||(L2=1,z0.exports=nb()),z0.exports}var G0={exports:{}},oi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2;function ib(){if(k2)return oi;k2=1;var i=B1();function e(v){var w="https://react.dev/errors/"+v;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)w+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(v,w,S){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:R==null?null:""+R,children:v,containerInfo:w,implementation:S}}var y=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(v,w){if(v==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return oi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,oi.createPortal=function(v,w){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(e(299));return f(v,w,null,S)},oi.flushSync=function(v){var w=y.T,S=a.p;try{if(y.T=null,a.p=2,v)return v()}finally{y.T=w,a.p=S,a.d.f()}},oi.preconnect=function(v,w){typeof v=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,a.d.C(v,w))},oi.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},oi.preinit=function(v,w){if(typeof v=="string"&&w&&typeof w.as=="string"){var S=w.as,R=b(S,w.crossOrigin),k=typeof w.integrity=="string"?w.integrity:void 0,U=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;S==="style"?a.d.S(v,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:R,integrity:k,fetchPriority:U}):S==="script"&&a.d.X(v,{crossOrigin:R,integrity:k,fetchPriority:U,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},oi.preinitModule=function(v,w){if(typeof v=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var S=b(w.as,w.crossOrigin);a.d.M(v,{crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&a.d.M(v)},oi.preload=function(v,w){if(typeof v=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var S=w.as,R=b(S,w.crossOrigin);a.d.L(v,S,{crossOrigin:R,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},oi.preloadModule=function(v,w){if(typeof v=="string")if(w){var S=b(w.as,w.crossOrigin);a.d.m(v,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else a.d.m(v)},oi.requestFormReset=function(v){a.d.r(v)},oi.unstable_batchedUpdates=function(v,w){return v(w)},oi.useFormState=function(v,w,S){return y.H.useFormState(v,w,S)},oi.useFormStatus=function(){return y.H.useHostTransitionStatus()},oi.version="19.0.0",oi}var P2;function sb(){if(P2)return G0.exports;P2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),G0.exports=ib(),G0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B2;function ab(){if(B2)return au;B2=1;var i=rb(),e=B1(),t=sb();function a(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var f=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),U=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),ve=Symbol.for("react.memo_cache_sentinel"),je=Symbol.iterator;function Pe(n){return n===null||typeof n!="object"?null:(n=je&&n[je]||n["@@iterator"],typeof n=="function"?n:null)}var H=Symbol.for("react.client.reference");function F(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===H?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case v:return"Fragment";case b:return"Portal";case S:return"Profiler";case w:return"StrictMode";case ee:return"Suspense";case K:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case U:return(n.displayName||"Context")+".Provider";case k:return(n._context.displayName||"Context")+".Consumer";case q:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return s=n.displayName||null,s!==null?s:F(n.type)||"Memo";case fe:s=n._payload,n=n._init;try{return F(n(s))}catch{}}return null}var P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=Object.assign,Q,J;function X(n){if(Q===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);Q=s&&s[1]||"",J=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Q+n+J}var Ve=!1;function ae(n,s){if(!n||Ve)return"";Ve=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Le=function(){throw Error()};if(Object.defineProperty(Le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Le,[])}catch(_e){var pe=_e}Reflect.construct(n,[],Le)}else{try{Le.call()}catch(_e){pe=_e}n.call(Le.prototype)}}else{try{throw Error()}catch(_e){pe=_e}(Le=n())&&typeof Le.catch=="function"&&Le.catch(function(){})}}catch(_e){if(_e&&pe&&typeof _e.stack=="string")return[_e.stack,pe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=g.DetermineComponentFrameRoot(),M=C[0],j=C[1];if(M&&j){var W=M.split(`
`),oe=j.split(`
`);for(E=g=0;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;for(;E<oe.length&&!oe[E].includes("DetermineComponentFrameRoot");)E++;if(g===W.length||E===oe.length)for(g=W.length-1,E=oe.length-1;1<=g&&0<=E&&W[g]!==oe[E];)E--;for(;1<=g&&0<=E;g--,E--)if(W[g]!==oe[E]){if(g!==1||E!==1)do if(g--,E--,0>E||W[g]!==oe[E]){var be=`
`+W[g].replace(" at new "," at ");return n.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",n.displayName)),be}while(1<=g&&0<=E);break}}}finally{Ve=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?X(u):""}function Se(n){switch(n.tag){case 26:case 27:case 5:return X(n.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return n=ae(n.type,!1),n;case 11:return n=ae(n.type.render,!1),n;case 1:return n=ae(n.type,!0),n;default:return""}}function Ae(n){try{var s="";do s+=Se(n),n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Xe(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function it(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function te(n){if(Xe(n)!==n)throw Error(a(188))}function Re(n){var s=n.alternate;if(!s){if(s=Xe(n),s===null)throw Error(a(188));return s!==n?null:n}for(var u=n,g=s;;){var E=u.return;if(E===null)break;var C=E.alternate;if(C===null){if(g=E.return,g!==null){u=g;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===u)return te(E),n;if(C===g)return te(E),s;C=C.sibling}throw Error(a(188))}if(u.return!==g.return)u=E,g=C;else{for(var M=!1,j=E.child;j;){if(j===u){M=!0,u=E,g=C;break}if(j===g){M=!0,g=E,u=C;break}j=j.sibling}if(!M){for(j=C.child;j;){if(j===u){M=!0,u=C,g=E;break}if(j===g){M=!0,g=C,u=E;break}j=j.sibling}if(!M)throw Error(a(189))}}if(u.alternate!==g)throw Error(a(190))}if(u.tag!==3)throw Error(a(188));return u.stateNode.current===u?n:s}function Be(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=Be(n),s!==null)return s;n=n.sibling}return null}var Ge=Array.isArray,qe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},Me=[],rn=-1;function at(n){return{current:n}}function Gt(n){0>rn||(n.current=Me[rn],Me[rn]=null,rn--)}function Rt(n,s){rn++,Me[rn]=n.current,n.current=s}var kt=at(null),$n=at(null),pt=at(null),ze=at(null);function $e(n,s){switch(Rt(pt,s),Rt($n,n),Rt(kt,null),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?i2(s):0;break;default:if(n=n===8?s.parentNode:s,s=n.tagName,n=n.namespaceURI)n=i2(n),s=s2(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Gt(kt),Rt(kt,s)}function ht(){Gt(kt),Gt($n),Gt(pt)}function Ce(n){n.memoizedState!==null&&Rt(ze,n);var s=kt.current,u=s2(s,n.type);s!==u&&(Rt($n,n),Rt(kt,u))}function De(n){$n.current===n&&(Gt(kt),Gt($n)),ze.current===n&&(Gt(ze),eu._currentValue=mt)}var Ye=Object.prototype.hasOwnProperty,Je=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Jn=i.unstable_shouldYield,Ln=i.unstable_requestPaint,ot=i.unstable_now,qn=i.unstable_getCurrentPriorityLevel,Pt=i.unstable_ImmediatePriority,sn=i.unstable_UserBlockingPriority,gn=i.unstable_NormalPriority,Yn=i.unstable_LowPriority,Pi=i.unstable_IdlePriority,Bi=i.log,ji=i.unstable_setDisableYieldValue,hn=null,ke=null;function Cn(n){if(ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(hn,n,void 0,(n.current.flags&128)===128)}catch{}}function Nt(n){if(typeof Bi=="function"&&ji(n),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(hn,n)}catch{}}var Ot=Math.clz32?Math.clz32:Vr,lr=Math.log,yi=Math.LN2;function Vr(n){return n>>>=0,n===0?32:31-(lr(n)/yi|0)|0}var Tt=128,Xn=4194304;function ti(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Fr(n,s){var u=n.pendingLanes;if(u===0)return 0;var g=0,E=n.suspendedLanes,C=n.pingedLanes,M=n.warmLanes;n=n.finishedLanes!==0;var j=u&134217727;return j!==0?(u=j&~E,u!==0?g=ti(u):(C&=j,C!==0?g=ti(C):n||(M=j&~M,M!==0&&(g=ti(M))))):(j=u&~E,j!==0?g=ti(j):C!==0?g=ti(C):n||(M=u&~M,M!==0&&(g=ti(M)))),g===0?0:s!==0&&s!==g&&!(s&E)&&(E=g&-g,M=s&-s,E>=M||E===32&&(M&4194176)!==0)?s:g}function er(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function ts(n,s){switch(n){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vn(){var n=Tt;return Tt<<=1,!(Tt&4194176)&&(Tt=128),n}function zr(){var n=Xn;return Xn<<=1,!(Xn&62914560)&&(Xn=4194304),n}function Ui(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function en(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Pa(n,s,u,g,E,C){var M=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var j=n.entanglements,W=n.expirationTimes,oe=n.hiddenUpdates;for(u=M&~u;0<u;){var be=31-Ot(u),Le=1<<be;j[be]=0,W[be]=-1;var pe=oe[be];if(pe!==null)for(oe[be]=null,be=0;be<pe.length;be++){var _e=pe[be];_e!==null&&(_e.lane&=-536870913)}u&=~Le}g!==0&&Rr(n,g,0),C!==0&&E===0&&n.tag!==0&&(n.suspendedLanes|=C&~(M&~s))}function Rr(n,s,u){n.pendingLanes|=s,n.suspendedLanes&=~s;var g=31-Ot(s);n.entangledLanes|=s,n.entanglements[g]=n.entanglements[g]|1073741824|u&4194218}function wi(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var g=31-Ot(u),E=1<<g;E&s|n[g]&s&&(n[g]|=s),u&=~E}}function cr(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function Ei(){var n=qe.p;return n!==0?n:(n=window.event,n===void 0?32:b2(n.type))}function Qn(n,s){var u=qe.p;try{return qe.p=n,s()}finally{qe.p=u}}var Ze=Math.random().toString(36).slice(2),En="__reactFiber$"+Ze,kn="__reactProps$"+Ze,Nn="__reactContainer$"+Ze,ni="__reactEvents$"+Ze,Vi="__reactListeners$"+Ze,Hr="__reactHandles$"+Ze,Dr="__reactResources$"+Ze,vi="__reactMarker$"+Ze;function ks(n){delete n[En],delete n[kn],delete n[ni],delete n[Vi],delete n[Hr]}function mn(n){var s=n[En];if(s)return s;for(var u=n.parentNode;u;){if(s=u[Nn]||u[En]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=l2(n);n!==null;){if(u=n[En])return u;n=l2(n)}return s}n=u,u=n.parentNode}return null}function vn(n){if(n=n[En]||n[Nn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Z(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(a(33))}function Ee(n){var s=n[Dr];return s||(s=n[Dr]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function We(n){n[vi]=!0}var _t=new Set,me={};function Et(n,s){Vt(n,s),Vt(n+"Capture",s)}function Vt(n,s){for(me[n]=s,n=0;n<s.length;n++)_t.add(s[n])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qt={},Ft={};function Lt(n){return Ye.call(Ft,n)?!0:Ye.call(qt,n)?!1:yc.test(n)?Ft[n]=!0:(qt[n]=!0,!1)}function ns(n,s,u){if(Lt(s))if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+u)}}function rs(n,s,u){if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+u)}}function ri(n,s,u,g){if(g===null)n.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(s,u,""+g)}}function Zt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Fi(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wc(n){var s=Fi(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),g=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var E=u.get,C=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return E.call(this)},set:function(M){g=""+M,C.call(this,M)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function pn(n){n._valueTracker||(n._valueTracker=wc(n))}function _i(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),g="";return n&&(g=Fi(n)?n.checked?"true":"false":n.value),n=g,n!==u?(s.setValue(n),!0):!1}function Ba(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ii=/[\n"\\]/g;function wt(n){return n.replace(ii,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Pn(n,s,u,g,E,C,M,j){n.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.type=M:n.removeAttribute("type"),s!=null?M==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Zt(s)):n.value!==""+Zt(s)&&(n.value=""+Zt(s)):M!=="submit"&&M!=="reset"||n.removeAttribute("value"),s!=null?G(n,M,Zt(s)):u!=null?G(n,M,Zt(u)):g!=null&&n.removeAttribute("value"),E==null&&C!=null&&(n.defaultChecked=!!C),E!=null&&(n.checked=E&&typeof E!="function"&&typeof E!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.name=""+Zt(j):n.removeAttribute("name")}function ue(n,s,u,g,E,C,M,j){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(n.type=C),s!=null||u!=null){if(!(C!=="submit"&&C!=="reset"||s!=null))return;u=u!=null?""+Zt(u):"",s=s!=null?""+Zt(s):u,j||s===n.value||(n.value=s),n.defaultValue=s}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,n.checked=j?n.checked:!!g,n.defaultChecked=!!g,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(n.name=M)}function G(n,s,u){s==="number"&&Ba(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function Qe(n,s,u,g){if(n=n.options,s){s={};for(var E=0;E<u.length;E++)s["$"+u[E]]=!0;for(u=0;u<n.length;u++)E=s.hasOwnProperty("$"+n[u].value),n[u].selected!==E&&(n[u].selected=E),E&&g&&(n[u].defaultSelected=!0)}else{for(u=""+Zt(u),s=null,E=0;E<n.length;E++){if(n[E].value===u){n[E].selected=!0,g&&(n[E].defaultSelected=!0);return}s!==null||n[E].disabled||(s=n[E])}s!==null&&(s.selected=!0)}}function Rn(n,s,u){if(s!=null&&(s=""+Zt(s),s!==n.value&&(n.value=s),u==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=u!=null?""+Zt(u):""}function ur(n,s,u,g){if(s==null){if(g!=null){if(u!=null)throw Error(a(92));if(Ge(g)){if(1<g.length)throw Error(a(93));g=g[0]}u=g}u==null&&(u=""),s=u}u=Zt(s),n.defaultValue=u,g=n.textContent,g===u&&g!==""&&g!==null&&(n.value=g)}function bi(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var Ro=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mr(n,s,u){var g=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":g?n.setProperty(s,u):typeof u!="number"||u===0||Ro.has(s)?s==="float"?n.cssFloat=u:n[s]=(""+u).trim():n[s]=u+"px"}function lt(n,s,u){if(s!=null&&typeof s!="object")throw Error(a(62));if(n=n.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?n.setProperty(g,""):g==="float"?n.cssFloat="":n[g]="");for(var E in s)g=s[E],s.hasOwnProperty(E)&&u[E]!==g&&Mr(n,E,g)}else for(var C in s)s.hasOwnProperty(C)&&Mr(n,C,s[C])}function xn(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ec=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ai(n){return Ec.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Gr=null;function Ps(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _s=null,_n=null;function fi(n){var s=vn(n);if(s&&(n=s.stateNode)){var u=n[kn]||null;e:switch(n=s.stateNode,s.type){case"input":if(Pn(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+wt(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var g=u[s];if(g!==n&&g.form===n.form){var E=g[kn]||null;if(!E)throw Error(a(90));Pn(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(s=0;s<u.length;s++)g=u[s],g.form===n.form&&_i(g)}break e;case"textarea":Rn(n,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&Qe(n,!!u.multiple,s,!1)}}}var Ci=!1;function ft(n,s,u){if(Ci)return n(s,u);Ci=!0;try{var g=n(s);return g}finally{if(Ci=!1,(_s!==null||_n!==null)&&(vh(),_s&&(s=_s,n=_n,_n=_s=null,fi(s),n)))for(s=0;s<n.length;s++)fi(n[s])}}function ta(n,s){var u=n.stateNode;if(u===null)return null;var g=u[kn]||null;if(g===null)return null;u=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(a(231,s,typeof u));return u}var gt=!1;if(mr)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){gt=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{gt=!1}var is=null,ss=null,as=null;function zi(){if(as)return as;var n,s=ss,u=s.length,g,E="value"in is?is.value:is.textContent,C=E.length;for(n=0;n<u&&s[n]===E[n];n++);var M=u-n;for(g=1;g<=M&&s[u-g]===E[C-g];g++);return as=E.slice(n,1<g?1-g:void 0)}function os(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function si(){return!0}function bs(){return!1}function Fn(n){function s(u,g,E,C,M){this._reactName=u,this._targetInst=E,this.type=g,this.nativeEvent=C,this.target=M,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(u=n[j],this[j]=u?u(C):C[j]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?si:bs,this.isPropagationStopped=bs,this}return z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),s}var an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ls=Fn(an),Hi=z({},an,{view:0,detail:0}),br=Fn(Hi),na,ra,Gi,ia=z({},Hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gi&&(Gi&&n.type==="mousemove"?(na=n.screenX-Gi.screenX,ra=n.screenY-Gi.screenY):ra=na=0,Gi=n),na)},movementY:function(n){return"movementY"in n?n.movementY:ra}}),Ti=Fn(ia),fl=z({},ia,{dataTransfer:0}),on=Fn(fl),Bs=z({},Hi,{relatedTarget:0}),As=Fn(Bs),Si=z({},an,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=Fn(Si),xe=z({},an,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bt=Fn(xe),hr=z({},an,{data:0}),js=Fn(hr),Us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Do(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=gl[n])?!!s[n]:!1}function Cs(){return Do}var zn=z({},Hi,{key:function(n){if(n.key){var s=Us[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=os(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?dl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cs,charCode:function(n){return n.type==="keypress"?os(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?os(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Vs=Fn(zn),Tn=z({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fs=Fn(Tn),qr=z({},Hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cs}),ln=Fn(qr),ct=z({},an,{propertyName:0,elapsedTime:0,pseudoElement:0}),ml=Fn(ct),fn=z({},ia,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ii=Fn(fn),tr=z({},an,{newState:0,oldState:0}),pl=Fn(tr),di=[9,13,27,32],Ni=mr&&"CompositionEvent"in window,x=null;mr&&"documentMode"in document&&(x=document.documentMode);var I=mr&&"TextEvent"in window&&!x,D=mr&&(!Ni||x&&8<x&&11>=x),V=" ",ce=!1;function ye(n,s){switch(n){case"keyup":return di.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ke(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yt=!1;function jn(n,s){switch(n){case"compositionend":return Ke(s);case"keypress":return s.which!==32?null:(ce=!0,V);case"textInput":return n=s.data,n===V&&ce?null:n;default:return null}}function Xt(n,s){if(Yt)return n==="compositionend"||!Ni&&ye(n,s)?(n=zi(),as=ss=is=null,Yt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return D&&s.locale!=="ko"?null:s.data;default:return null}}var Sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Sn[n.type]:s==="textarea"}function nr(n,s,u,g){_s?_n?_n.push(g):_n=[g]:_s=g,s=Th(s,"onChange"),0<s.length&&(u=new ls("onChange","change",null,u,g),n.push({event:u,listeners:s}))}var pr=null,fr=null;function Mo(n){Jp(n,0)}function Ua(n){var s=Z(n);if(_i(s))return n}function Hu(n,s){if(n==="change")return s}var vc=!1;if(mr){var Ri;if(mr){var _c="oninput"in document;if(!_c){var xl=document.createElement("div");xl.setAttribute("oninput","return;"),_c=typeof xl.oninput=="function"}Ri=_c}else Ri=!1;vc=Ri&&(!document.documentMode||9<document.documentMode)}function Va(){pr&&(pr.detachEvent("onpropertychange",Qt),fr=pr=null)}function Qt(n){if(n.propertyName==="value"&&Ua(fr)){var s=[];nr(s,fr,n,Ps(n)),ft(Mo,s)}}function yl(n,s,u){n==="focusin"?(Va(),pr=s,fr=u,pr.attachEvent("onpropertychange",Qt)):n==="focusout"&&Va()}function O(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ua(fr)}function r(n,s){if(n==="click")return Ua(s)}function o(n,s){if(n==="input"||n==="change")return Ua(s)}function l(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var h=typeof Object.is=="function"?Object.is:l;function d(n,s){if(h(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),g=Object.keys(s);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var E=u[g];if(!Ye.call(s,E)||!h(n[E],s[E]))return!1}return!0}function m(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function p(n,s){var u=m(n);n=0;for(var g;u;){if(u.nodeType===3){if(g=n+u.textContent.length,n<=s&&g>=s)return{node:u,offset:s-n};n=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=m(u)}}function _(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function T(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Ba(n.document);s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=Ba(n.document)}return s}function N(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function L(n,s){var u=T(s);s=n.focusedElem;var g=n.selectionRange;if(u!==s&&s&&s.ownerDocument&&_(s.ownerDocument.documentElement,s)){if(g!==null&&N(s)){if(n=g.start,u=g.end,u===void 0&&(u=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(u,s.value.length);else if(u=(n=s.ownerDocument||document)&&n.defaultView||window,u.getSelection){u=u.getSelection();var E=s.textContent.length,C=Math.min(g.start,E);g=g.end===void 0?C:Math.min(g.end,E),!u.extend&&C>g&&(E=g,g=C,C=E),E=p(s,C);var M=p(s,g);E&&M&&(u.rangeCount!==1||u.anchorNode!==E.node||u.anchorOffset!==E.offset||u.focusNode!==M.node||u.focusOffset!==M.offset)&&(n=n.createRange(),n.setStart(E.node,E.offset),u.removeAllRanges(),C>g?(u.addRange(n),u.extend(M.node,M.offset)):(n.setEnd(M.node,M.offset),u.addRange(n)))}}for(n=[],u=s;u=u.parentNode;)u.nodeType===1&&n.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)u=n[s],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var B=mr&&"documentMode"in document&&11>=document.documentMode,Y=null,ne=null,re=null,he=!1;function we(n,s,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;he||Y==null||Y!==Ba(g)||(g=Y,"selectionStart"in g&&N(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),re&&d(re,g)||(re=g,g=Th(ne,"onSelect"),0<g.length&&(s=new ls("onSelect","select",null,s,u),n.push({event:s,listeners:g}),s.target=Y)))}function Ue(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var Fe={animationend:Ue("Animation","AnimationEnd"),animationiteration:Ue("Animation","AnimationIteration"),animationstart:Ue("Animation","AnimationStart"),transitionrun:Ue("Transition","TransitionRun"),transitionstart:Ue("Transition","TransitionStart"),transitioncancel:Ue("Transition","TransitionCancel"),transitionend:Ue("Transition","TransitionEnd")},Oe={},Bt={};mr&&(Bt=document.createElement("div").style,"AnimationEvent"in window||(delete Fe.animationend.animation,delete Fe.animationiteration.animation,delete Fe.animationstart.animation),"TransitionEvent"in window||delete Fe.transitionend.transition);function xt(n){if(Oe[n])return Oe[n];if(!Fe[n])return n;var s=Fe[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in Bt)return Oe[n]=s[u];return n}var Yr=xt("animationend"),Di=xt("animationiteration"),Xr=xt("animationstart"),yn=xt("transitionrun"),Ar=xt("transitionstart"),gi=xt("transitioncancel"),sa=xt("transitionend"),aa=new Map,Gu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function qi(n,s){aa.set(n,s),Et(s,[n])}var cs=[],wl=0,nd=0;function qu(){for(var n=wl,s=nd=wl=0;s<n;){var u=cs[s];cs[s++]=null;var g=cs[s];cs[s++]=null;var E=cs[s];cs[s++]=null;var C=cs[s];if(cs[s++]=null,g!==null&&E!==null){var M=g.pending;M===null?E.next=E:(E.next=M.next,M.next=E),g.pending=E}C!==0&&qg(u,E,C)}}function Yu(n,s,u,g){cs[wl++]=n,cs[wl++]=s,cs[wl++]=u,cs[wl++]=g,nd|=g,n.lanes|=g,n=n.alternate,n!==null&&(n.lanes|=g)}function rd(n,s,u,g){return Yu(n,s,u,g),Xu(n)}function Fa(n,s){return Yu(n,null,null,s),Xu(n)}function qg(n,s,u){n.lanes|=u;var g=n.alternate;g!==null&&(g.lanes|=u);for(var E=!1,C=n.return;C!==null;)C.childLanes|=u,g=C.alternate,g!==null&&(g.childLanes|=u),C.tag===22&&(n=C.stateNode,n===null||n._visibility&1||(E=!0)),n=C,C=C.return;E&&s!==null&&n.tag===3&&(C=n.stateNode,E=31-Ot(u),C=C.hiddenUpdates,n=C[E],n===null?C[E]=[s]:n.push(s),s.lane=u|536870912)}function Xu(n){if(50<Xc)throw Xc=0,c0=null,Error(a(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var El={},Yg=new WeakMap;function us(n,s){if(typeof n=="object"&&n!==null){var u=Yg.get(n);return u!==void 0?u:(s={value:n,source:s,stack:Ae(s)},Yg.set(n,s),s)}return{value:n,source:s,stack:Ae(s)}}var vl=[],_l=0,Qu=null,Wu=0,hs=[],fs=0,Oo=null,oa=1,la="";function Lo(n,s){vl[_l++]=Wu,vl[_l++]=Qu,Qu=n,Wu=s}function Xg(n,s,u){hs[fs++]=oa,hs[fs++]=la,hs[fs++]=Oo,Oo=n;var g=oa;n=la;var E=32-Ot(g)-1;g&=~(1<<E),u+=1;var C=32-Ot(s)+E;if(30<C){var M=E-E%5;C=(g&(1<<M)-1).toString(32),g>>=M,E-=M,oa=1<<32-Ot(s)+E|u<<E|g,la=C+n}else oa=1<<C|u<<E|g,la=n}function id(n){n.return!==null&&(Lo(n,1),Xg(n,1,0))}function sd(n){for(;n===Qu;)Qu=vl[--_l],vl[_l]=null,Wu=vl[--_l],vl[_l]=null;for(;n===Oo;)Oo=hs[--fs],hs[fs]=null,la=hs[--fs],hs[fs]=null,oa=hs[--fs],hs[fs]=null}var mi=null,Qr=null,cn=!1,Ts=null,zs=!1,ad=Error(a(519));function ko(n){var s=Error(a(418,""));throw Cc(us(s,n)),ad}function Qg(n){var s=n.stateNode,u=n.type,g=n.memoizedProps;switch(s[En]=n,s[kn]=g,u){case"dialog":$t("cancel",s),$t("close",s);break;case"iframe":case"object":case"embed":$t("load",s);break;case"video":case"audio":for(u=0;u<Wc.length;u++)$t(Wc[u],s);break;case"source":$t("error",s);break;case"img":case"image":case"link":$t("error",s),$t("load",s);break;case"details":$t("toggle",s);break;case"input":$t("invalid",s),ue(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),pn(s);break;case"select":$t("invalid",s);break;case"textarea":$t("invalid",s),ur(s,g.value,g.defaultValue,g.children),pn(s)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||g.suppressHydrationWarning===!0||r2(s.textContent,u)?(g.popover!=null&&($t("beforetoggle",s),$t("toggle",s)),g.onScroll!=null&&$t("scroll",s),g.onScrollEnd!=null&&$t("scrollend",s),g.onClick!=null&&(s.onclick=Sh),s=!0):s=!1,s||ko(n)}function Wg(n){for(mi=n.return;mi;)switch(mi.tag){case 3:case 27:zs=!0;return;case 5:case 13:zs=!1;return;default:mi=mi.return}}function bc(n){if(n!==mi)return!1;if(!cn)return Wg(n),cn=!0,!1;var s=!1,u;if((u=n.tag!==3&&n.tag!==27)&&((u=n.tag===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||T0(n.type,n.memoizedProps)),u=!u),u&&(s=!0),s&&Qr&&ko(n),Wg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(u=n.data,u==="/$"){if(s===0){Qr=Is(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++;n=n.nextSibling}Qr=null}}else Qr=mi?Is(n.stateNode.nextSibling):null;return!0}function Ac(){Qr=mi=null,cn=!1}function Cc(n){Ts===null?Ts=[n]:Ts.push(n)}var Tc=Error(a(460)),Kg=Error(a(474)),od={then:function(){}};function Zg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ku(){}function $g(n,s,u){switch(u=n[u],u===void 0?n.push(s):u!==s&&(s.then(Ku,Ku),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Tc?Error(a(483)):n;default:if(typeof s.status=="string")s.then(Ku,Ku);else{if(n=Dn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=s,n.status="pending",n.then(function(g){if(s.status==="pending"){var E=s;E.status="fulfilled",E.value=g}},function(g){if(s.status==="pending"){var E=s;E.status="rejected",E.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Tc?Error(a(483)):n}throw Sc=s,Tc}}var Sc=null;function Jg(){if(Sc===null)throw Error(a(459));var n=Sc;return Sc=null,n}var bl=null,Ic=0;function Zu(n){var s=Ic;return Ic+=1,bl===null&&(bl=[]),$g(bl,n,s)}function Nc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function $u(n,s){throw s.$$typeof===f?Error(a(525)):(n=Object.prototype.toString.call(s),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function em(n){var s=n._init;return s(n._payload)}function tm(n){function s(le,se){if(n){var ge=le.deletions;ge===null?(le.deletions=[se],le.flags|=16):ge.push(se)}}function u(le,se){if(!n)return null;for(;se!==null;)s(le,se),se=se.sibling;return null}function g(le){for(var se=new Map;le!==null;)le.key!==null?se.set(le.key,le):se.set(le.index,le),le=le.sibling;return se}function E(le,se){return le=Ja(le,se),le.index=0,le.sibling=null,le}function C(le,se,ge){return le.index=ge,n?(ge=le.alternate,ge!==null?(ge=ge.index,ge<se?(le.flags|=33554434,se):ge):(le.flags|=33554434,se)):(le.flags|=1048576,se)}function M(le){return n&&le.alternate===null&&(le.flags|=33554434),le}function j(le,se,ge,Te){return se===null||se.tag!==6?(se=t0(ge,le.mode,Te),se.return=le,se):(se=E(se,ge),se.return=le,se)}function W(le,se,ge,Te){var rt=ge.type;return rt===v?be(le,se,ge.props.children,Te,ge.key):se!==null&&(se.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===fe&&em(rt)===se.type)?(se=E(se,ge.props),Nc(se,ge),se.return=le,se):(se=ph(ge.type,ge.key,ge.props,null,le.mode,Te),Nc(se,ge),se.return=le,se)}function oe(le,se,ge,Te){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=n0(ge,le.mode,Te),se.return=le,se):(se=E(se,ge.children||[]),se.return=le,se)}function be(le,se,ge,Te,rt){return se===null||se.tag!==7?(se=qo(ge,le.mode,Te,rt),se.return=le,se):(se=E(se,ge),se.return=le,se)}function Le(le,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=t0(""+se,le.mode,ge),se.return=le,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case y:return ge=ph(se.type,se.key,se.props,null,le.mode,ge),Nc(ge,se),ge.return=le,ge;case b:return se=n0(se,le.mode,ge),se.return=le,se;case fe:var Te=se._init;return se=Te(se._payload),Le(le,se,ge)}if(Ge(se)||Pe(se))return se=qo(se,le.mode,ge,null),se.return=le,se;if(typeof se.then=="function")return Le(le,Zu(se),ge);if(se.$$typeof===U)return Le(le,dh(le,se),ge);$u(le,se)}return null}function pe(le,se,ge,Te){var rt=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return rt!==null?null:j(le,se,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:return ge.key===rt?W(le,se,ge,Te):null;case b:return ge.key===rt?oe(le,se,ge,Te):null;case fe:return rt=ge._init,ge=rt(ge._payload),pe(le,se,ge,Te)}if(Ge(ge)||Pe(ge))return rt!==null?null:be(le,se,ge,Te,null);if(typeof ge.then=="function")return pe(le,se,Zu(ge),Te);if(ge.$$typeof===U)return pe(le,se,dh(le,ge),Te);$u(le,ge)}return null}function _e(le,se,ge,Te,rt){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return le=le.get(ge)||null,j(se,le,""+Te,rt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case y:return le=le.get(Te.key===null?ge:Te.key)||null,W(se,le,Te,rt);case b:return le=le.get(Te.key===null?ge:Te.key)||null,oe(se,le,Te,rt);case fe:var Ut=Te._init;return Te=Ut(Te._payload),_e(le,se,ge,Te,rt)}if(Ge(Te)||Pe(Te))return le=le.get(ge)||null,be(se,le,Te,rt,null);if(typeof Te.then=="function")return _e(le,se,ge,Zu(Te),rt);if(Te.$$typeof===U)return _e(le,se,ge,dh(se,Te),rt);$u(se,Te)}return null}function st(le,se,ge,Te){for(var rt=null,Ut=null,ut=se,yt=se=0,kr=null;ut!==null&&yt<ge.length;yt++){ut.index>yt?(kr=ut,ut=null):kr=ut.sibling;var un=pe(le,ut,ge[yt],Te);if(un===null){ut===null&&(ut=kr);break}n&&ut&&un.alternate===null&&s(le,ut),se=C(un,se,yt),Ut===null?rt=un:Ut.sibling=un,Ut=un,ut=kr}if(yt===ge.length)return u(le,ut),cn&&Lo(le,yt),rt;if(ut===null){for(;yt<ge.length;yt++)ut=Le(le,ge[yt],Te),ut!==null&&(se=C(ut,se,yt),Ut===null?rt=ut:Ut.sibling=ut,Ut=ut);return cn&&Lo(le,yt),rt}for(ut=g(ut);yt<ge.length;yt++)kr=_e(ut,le,yt,ge[yt],Te),kr!==null&&(n&&kr.alternate!==null&&ut.delete(kr.key===null?yt:kr.key),se=C(kr,se,yt),Ut===null?rt=kr:Ut.sibling=kr,Ut=kr);return n&&ut.forEach(function(ao){return s(le,ao)}),cn&&Lo(le,yt),rt}function St(le,se,ge,Te){if(ge==null)throw Error(a(151));for(var rt=null,Ut=null,ut=se,yt=se=0,kr=null,un=ge.next();ut!==null&&!un.done;yt++,un=ge.next()){ut.index>yt?(kr=ut,ut=null):kr=ut.sibling;var ao=pe(le,ut,un.value,Te);if(ao===null){ut===null&&(ut=kr);break}n&&ut&&ao.alternate===null&&s(le,ut),se=C(ao,se,yt),Ut===null?rt=ao:Ut.sibling=ao,Ut=ao,ut=kr}if(un.done)return u(le,ut),cn&&Lo(le,yt),rt;if(ut===null){for(;!un.done;yt++,un=ge.next())un=Le(le,un.value,Te),un!==null&&(se=C(un,se,yt),Ut===null?rt=un:Ut.sibling=un,Ut=un);return cn&&Lo(le,yt),rt}for(ut=g(ut);!un.done;yt++,un=ge.next())un=_e(ut,le,yt,un.value,Te),un!==null&&(n&&un.alternate!==null&&ut.delete(un.key===null?yt:un.key),se=C(un,se,yt),Ut===null?rt=un:Ut.sibling=un,Ut=un);return n&&ut.forEach(function(Z_){return s(le,Z_)}),cn&&Lo(le,yt),rt}function sr(le,se,ge,Te){if(typeof ge=="object"&&ge!==null&&ge.type===v&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:e:{for(var rt=ge.key;se!==null;){if(se.key===rt){if(rt=ge.type,rt===v){if(se.tag===7){u(le,se.sibling),Te=E(se,ge.props.children),Te.return=le,le=Te;break e}}else if(se.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===fe&&em(rt)===se.type){u(le,se.sibling),Te=E(se,ge.props),Nc(Te,ge),Te.return=le,le=Te;break e}u(le,se);break}else s(le,se);se=se.sibling}ge.type===v?(Te=qo(ge.props.children,le.mode,Te,ge.key),Te.return=le,le=Te):(Te=ph(ge.type,ge.key,ge.props,null,le.mode,Te),Nc(Te,ge),Te.return=le,le=Te)}return M(le);case b:e:{for(rt=ge.key;se!==null;){if(se.key===rt)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){u(le,se.sibling),Te=E(se,ge.children||[]),Te.return=le,le=Te;break e}else{u(le,se);break}else s(le,se);se=se.sibling}Te=n0(ge,le.mode,Te),Te.return=le,le=Te}return M(le);case fe:return rt=ge._init,ge=rt(ge._payload),sr(le,se,ge,Te)}if(Ge(ge))return st(le,se,ge,Te);if(Pe(ge)){if(rt=Pe(ge),typeof rt!="function")throw Error(a(150));return ge=rt.call(ge),St(le,se,ge,Te)}if(typeof ge.then=="function")return sr(le,se,Zu(ge),Te);if(ge.$$typeof===U)return sr(le,se,dh(le,ge),Te);$u(le,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(u(le,se.sibling),Te=E(se,ge),Te.return=le,le=Te):(u(le,se),Te=t0(ge,le.mode,Te),Te.return=le,le=Te),M(le)):u(le,se)}return function(le,se,ge,Te){try{Ic=0;var rt=sr(le,se,ge,Te);return bl=null,rt}catch(ut){if(ut===Tc)throw ut;var Ut=ps(29,ut,null,le.mode);return Ut.lanes=Te,Ut.return=le,Ut}finally{}}}var Po=tm(!0),nm=tm(!1),Al=at(null),Ju=at(0);function rm(n,s){n=wa,Rt(Ju,n),Rt(Al,s),wa=n|s.baseLanes}function ld(){Rt(Ju,wa),Rt(Al,Al.current)}function cd(){wa=Ju.current,Gt(Al),Gt(Ju)}var ds=at(null),Hs=null;function za(n){var s=n.alternate;Rt(Cr,Cr.current&1),Rt(ds,n),Hs===null&&(s===null||Al.current!==null||s.memoizedState!==null)&&(Hs=n)}function im(n){if(n.tag===22){if(Rt(Cr,Cr.current),Rt(ds,n),Hs===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Hs=n)}}else Ha()}function Ha(){Rt(Cr,Cr.current),Rt(ds,ds.current)}function ca(n){Gt(ds),Hs===n&&(Hs=null),Gt(Cr)}var Cr=at(0);function eh(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var jv=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(u,g){n.push(g)}};this.abort=function(){s.aborted=!0,n.forEach(function(u){return u()})}},Uv=i.unstable_scheduleCallback,Vv=i.unstable_NormalPriority,Tr={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ud(){return{controller:new jv,data:new Map,refCount:0}}function Rc(n){n.refCount--,n.refCount===0&&Uv(Vv,function(){n.controller.abort()})}var Dc=null,hd=0,Cl=0,Tl=null;function Fv(n,s){if(Dc===null){var u=Dc=[];hd=0,Cl=x0(),Tl={status:"pending",value:void 0,then:function(g){u.push(g)}}}return hd++,s.then(sm,sm),s}function sm(){if(--hd===0&&Dc!==null){Tl!==null&&(Tl.status="fulfilled");var n=Dc;Dc=null,Cl=0,Tl=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function zv(n,s){var u=[],g={status:"pending",value:null,reason:null,then:function(E){u.push(E)}};return n.then(function(){g.status="fulfilled",g.value=s;for(var E=0;E<u.length;E++)(0,u[E])(s)},function(E){for(g.status="rejected",g.reason=E,E=0;E<u.length;E++)(0,u[E])(void 0)}),g}var am=P.S;P.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Fv(n,s),am!==null&&am(n,s)};var Bo=at(null);function fd(){var n=Bo.current;return n!==null?n:Dn.pooledCache}function th(n,s){s===null?Rt(Bo,Bo.current):Rt(Bo,s.pool)}function om(){var n=fd();return n===null?null:{parent:Tr._currentValue,pool:n}}var Ga=0,jt=null,bn=null,xr=null,nh=!1,Sl=!1,jo=!1,rh=0,Mc=0,Il=null,Hv=0;function dr(){throw Error(a(321))}function dd(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!h(n[u],s[u]))return!1;return!0}function gd(n,s,u,g,E,C){return Ga=C,jt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=n===null||n.memoizedState===null?Uo:qa,jo=!1,C=u(g,E),jo=!1,Sl&&(C=cm(s,u,g,E)),lm(n),C}function lm(n){P.H=Gs;var s=bn!==null&&bn.next!==null;if(Ga=0,xr=bn=jt=null,nh=!1,Mc=0,Il=null,s)throw Error(a(300));n===null||Or||(n=n.dependencies,n!==null&&fh(n)&&(Or=!0))}function cm(n,s,u,g){jt=n;var E=0;do{if(Sl&&(Il=null),Mc=0,Sl=!1,25<=E)throw Error(a(301));if(E+=1,xr=bn=null,n.updateQueue!=null){var C=n.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}P.H=Vo,C=s(u,g)}while(Sl);return C}function Gv(){var n=P.H,s=n.useState()[0];return s=typeof s.then=="function"?Oc(s):s,n=n.useState()[0],(bn!==null?bn.memoizedState:null)!==n&&(jt.flags|=1024),s}function md(){var n=rh!==0;return rh=0,n}function pd(n,s,u){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~u}function xd(n){if(nh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}nh=!1}Ga=0,xr=bn=jt=null,Sl=!1,Mc=rh=0,Il=null}function Mi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?jt.memoizedState=xr=n:xr=xr.next=n,xr}function yr(){if(bn===null){var n=jt.alternate;n=n!==null?n.memoizedState:null}else n=bn.next;var s=xr===null?jt.memoizedState:xr.next;if(s!==null)xr=s,bn=n;else{if(n===null)throw jt.alternate===null?Error(a(467)):Error(a(310));bn=n,n={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},xr===null?jt.memoizedState=xr=n:xr=xr.next=n}return xr}var ih;ih=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Oc(n){var s=Mc;return Mc+=1,Il===null&&(Il=[]),n=$g(Il,n,s),s=jt,(xr===null?s.memoizedState:xr.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?Uo:qa),n}function sh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Oc(n);if(n.$$typeof===U)return ai(n)}throw Error(a(438,String(n)))}function yd(n){var s=null,u=jt.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var g=jt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(E){return E.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=ih(),jt.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(n),g=0;g<n;g++)u[g]=ve;return s.index++,u}function ua(n,s){return typeof s=="function"?s(n):s}function ah(n){var s=yr();return wd(s,bn,n)}function wd(n,s,u){var g=n.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=u;var E=n.baseQueue,C=g.pending;if(C!==null){if(E!==null){var M=E.next;E.next=C.next,C.next=M}s.baseQueue=E=C,g.pending=null}if(C=n.baseState,E===null)n.memoizedState=C;else{s=E.next;var j=M=null,W=null,oe=s,be=!1;do{var Le=oe.lane&-536870913;if(Le!==oe.lane?(tn&Le)===Le:(Ga&Le)===Le){var pe=oe.revertLane;if(pe===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),Le===Cl&&(be=!0);else if((Ga&pe)===pe){oe=oe.next,pe===Cl&&(be=!0);continue}else Le={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},W===null?(j=W=Le,M=C):W=W.next=Le,jt.lanes|=pe,eo|=pe;Le=oe.action,jo&&u(C,Le),C=oe.hasEagerState?oe.eagerState:u(C,Le)}else pe={lane:Le,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},W===null?(j=W=pe,M=C):W=W.next=pe,jt.lanes|=Le,eo|=Le;oe=oe.next}while(oe!==null&&oe!==s);if(W===null?M=C:W.next=j,!h(C,n.memoizedState)&&(Or=!0,be&&(u=Tl,u!==null)))throw u;n.memoizedState=C,n.baseState=M,n.baseQueue=W,g.lastRenderedState=C}return E===null&&(g.lanes=0),[n.memoizedState,g.dispatch]}function Ed(n){var s=yr(),u=s.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=n;var g=u.dispatch,E=u.pending,C=s.memoizedState;if(E!==null){u.pending=null;var M=E=E.next;do C=n(C,M.action),M=M.next;while(M!==E);h(C,s.memoizedState)||(Or=!0),s.memoizedState=C,s.baseQueue===null&&(s.baseState=C),u.lastRenderedState=C}return[C,g]}function um(n,s,u){var g=jt,E=yr(),C=cn;if(C){if(u===void 0)throw Error(a(407));u=u()}else u=s();var M=!h((bn||E).memoizedState,u);if(M&&(E.memoizedState=u,Or=!0),E=E.queue,bd(dm.bind(null,g,E,n),[n]),E.getSnapshot!==s||M||xr!==null&&xr.memoizedState.tag&1){if(g.flags|=2048,Nl(9,fm.bind(null,g,E,u,s),{destroy:void 0},null),Dn===null)throw Error(a(349));C||Ga&60||hm(g,s,u)}return u}function hm(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=jt.updateQueue,s===null?(s=ih(),jt.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function fm(n,s,u,g){s.value=u,s.getSnapshot=g,gm(s)&&mm(n)}function dm(n,s,u){return u(function(){gm(s)&&mm(n)})}function gm(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!h(n,u)}catch{return!0}}function mm(n){var s=Fa(n,2);s!==null&&pi(s,n,2)}function vd(n){var s=Mi();if(typeof n=="function"){var u=n;if(n=u(),jo){Nt(!0);try{u()}finally{Nt(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:n},s}function pm(n,s,u,g){return n.baseState=u,wd(n,bn,typeof g=="function"?g:ua)}function qv(n,s,u,g,E){if(ch(n))throw Error(a(485));if(n=s.action,n!==null){var C={payload:E,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){C.listeners.push(M)}};P.T!==null?u(!0):C.isTransition=!1,g(C),u=s.pending,u===null?(C.next=s.pending=C,xm(s,C)):(C.next=u.next,s.pending=u.next=C)}}function xm(n,s){var u=s.action,g=s.payload,E=n.state;if(s.isTransition){var C=P.T,M={};P.T=M;try{var j=u(E,g),W=P.S;W!==null&&W(M,j),ym(n,s,j)}catch(oe){_d(n,s,oe)}finally{P.T=C}}else try{C=u(E,g),ym(n,s,C)}catch(oe){_d(n,s,oe)}}function ym(n,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){wm(n,s,g)},function(g){return _d(n,s,g)}):wm(n,s,u)}function wm(n,s,u){s.status="fulfilled",s.value=u,Em(s),n.state=u,s=n.pending,s!==null&&(u=s.next,u===s?n.pending=null:(u=u.next,s.next=u,xm(n,u)))}function _d(n,s,u){var g=n.pending;if(n.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=u,Em(s),s=s.next;while(s!==g)}n.action=null}function Em(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function vm(n,s){return s}function _m(n,s){if(cn){var u=Dn.formState;if(u!==null){e:{var g=jt;if(cn){if(Qr){t:{for(var E=Qr,C=zs;E.nodeType!==8;){if(!C){E=null;break t}if(E=Is(E.nextSibling),E===null){E=null;break t}}C=E.data,E=C==="F!"||C==="F"?E:null}if(E){Qr=Is(E.nextSibling),g=E.data==="F!";break e}}ko(g)}g=!1}g&&(s=u[0])}}return u=Mi(),u.memoizedState=u.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vm,lastRenderedState:s},u.queue=g,u=Vm.bind(null,jt,g),g.dispatch=u,g=vd(!1),C=Id.bind(null,jt,!1,g.queue),g=Mi(),E={state:s,dispatch:null,action:n,pending:null},g.queue=E,u=qv.bind(null,jt,E,C,u),E.dispatch=u,g.memoizedState=n,[s,u,!1]}function bm(n){var s=yr();return Am(s,bn,n)}function Am(n,s,u){s=wd(n,s,vm)[0],n=ah(ua)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Oc(s):s;var g=yr(),E=g.queue,C=E.dispatch;return u!==g.memoizedState&&(jt.flags|=2048,Nl(9,Yv.bind(null,E,u),{destroy:void 0},null)),[s,C,n]}function Yv(n,s){n.action=s}function Cm(n){var s=yr(),u=bn;if(u!==null)return Am(s,u,n);yr(),s=s.memoizedState,u=yr();var g=u.queue.dispatch;return u.memoizedState=n,[s,g,!1]}function Nl(n,s,u,g){return n={tag:n,create:s,inst:u,deps:g,next:null},s=jt.updateQueue,s===null&&(s=ih(),jt.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=n.next=n:(g=u.next,u.next=n,n.next=g,s.lastEffect=n),n}function Tm(){return yr().memoizedState}function oh(n,s,u,g){var E=Mi();jt.flags|=n,E.memoizedState=Nl(1|s,u,{destroy:void 0},g===void 0?null:g)}function lh(n,s,u,g){var E=yr();g=g===void 0?null:g;var C=E.memoizedState.inst;bn!==null&&g!==null&&dd(g,bn.memoizedState.deps)?E.memoizedState=Nl(s,u,C,g):(jt.flags|=n,E.memoizedState=Nl(1|s,u,C,g))}function Sm(n,s){oh(8390656,8,n,s)}function bd(n,s){lh(2048,8,n,s)}function Im(n,s){return lh(4,2,n,s)}function Nm(n,s){return lh(4,4,n,s)}function Rm(n,s){if(typeof s=="function"){n=n();var u=s(n);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Dm(n,s,u){u=u!=null?u.concat([n]):null,lh(4,4,Rm.bind(null,s,n),u)}function Ad(){}function Mm(n,s){var u=yr();s=s===void 0?null:s;var g=u.memoizedState;return s!==null&&dd(s,g[1])?g[0]:(u.memoizedState=[n,s],n)}function Om(n,s){var u=yr();s=s===void 0?null:s;var g=u.memoizedState;if(s!==null&&dd(s,g[1]))return g[0];if(g=n(),jo){Nt(!0);try{n()}finally{Nt(!1)}}return u.memoizedState=[g,s],g}function Cd(n,s,u){return u===void 0||Ga&1073741824?n.memoizedState=s:(n.memoizedState=u,n=kp(),jt.lanes|=n,eo|=n,u)}function Lm(n,s,u,g){return h(u,s)?u:Al.current!==null?(n=Cd(n,u,g),h(n,s)||(Or=!0),n):Ga&42?(n=kp(),jt.lanes|=n,eo|=n,s):(Or=!0,n.memoizedState=u)}function km(n,s,u,g,E){var C=qe.p;qe.p=C!==0&&8>C?C:8;var M=P.T,j={};P.T=j,Id(n,!1,s,u);try{var W=E(),oe=P.S;if(oe!==null&&oe(j,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var be=zv(W,g);Lc(n,s,be,Wi(n))}else Lc(n,s,g,Wi(n))}catch(Le){Lc(n,s,{then:function(){},status:"rejected",reason:Le},Wi())}finally{qe.p=C,P.T=M}}function Xv(){}function Td(n,s,u,g){if(n.tag!==5)throw Error(a(476));var E=Pm(n).queue;km(n,E,s,mt,u===null?Xv:function(){return Bm(n),u(g)})}function Pm(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:mt},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:u},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Bm(n){var s=Pm(n).next.queue;Lc(n,s,{},Wi())}function Sd(){return ai(eu)}function jm(){return yr().memoizedState}function Um(){return yr().memoizedState}function Qv(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var u=Wi();n=Qa(u);var g=Wa(s,n,u);g!==null&&(pi(g,s,u),Bc(g,s,u)),s={cache:ud()},n.payload=s;return}s=s.return}}function Wv(n,s,u){var g=Wi();u={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},ch(n)?Fm(s,u):(u=rd(n,s,u,g),u!==null&&(pi(u,n,g),zm(u,s,g)))}function Vm(n,s,u){var g=Wi();Lc(n,s,u,g)}function Lc(n,s,u,g){var E={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(ch(n))Fm(s,E);else{var C=n.alternate;if(n.lanes===0&&(C===null||C.lanes===0)&&(C=s.lastRenderedReducer,C!==null))try{var M=s.lastRenderedState,j=C(M,u);if(E.hasEagerState=!0,E.eagerState=j,h(j,M))return Yu(n,s,E,0),Dn===null&&qu(),!1}catch{}finally{}if(u=rd(n,s,E,g),u!==null)return pi(u,n,g),zm(u,s,g),!0}return!1}function Id(n,s,u,g){if(g={lane:2,revertLane:x0(),action:g,hasEagerState:!1,eagerState:null,next:null},ch(n)){if(s)throw Error(a(479))}else s=rd(n,u,g,2),s!==null&&pi(s,n,2)}function ch(n){var s=n.alternate;return n===jt||s!==null&&s===jt}function Fm(n,s){Sl=nh=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function zm(n,s,u){if(u&4194176){var g=s.lanes;g&=n.pendingLanes,u|=g,s.lanes=u,wi(n,u)}}var Gs={readContext:ai,use:sh,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useLayoutEffect:dr,useInsertionEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useSyncExternalStore:dr,useId:dr};Gs.useCacheRefresh=dr,Gs.useMemoCache=dr,Gs.useHostTransitionStatus=dr,Gs.useFormState=dr,Gs.useActionState=dr,Gs.useOptimistic=dr;var Uo={readContext:ai,use:sh,useCallback:function(n,s){return Mi().memoizedState=[n,s===void 0?null:s],n},useContext:ai,useEffect:Sm,useImperativeHandle:function(n,s,u){u=u!=null?u.concat([n]):null,oh(4194308,4,Rm.bind(null,s,n),u)},useLayoutEffect:function(n,s){return oh(4194308,4,n,s)},useInsertionEffect:function(n,s){oh(4,2,n,s)},useMemo:function(n,s){var u=Mi();s=s===void 0?null:s;var g=n();if(jo){Nt(!0);try{n()}finally{Nt(!1)}}return u.memoizedState=[g,s],g},useReducer:function(n,s,u){var g=Mi();if(u!==void 0){var E=u(s);if(jo){Nt(!0);try{u(s)}finally{Nt(!1)}}}else E=s;return g.memoizedState=g.baseState=E,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:E},g.queue=n,n=n.dispatch=Wv.bind(null,jt,n),[g.memoizedState,n]},useRef:function(n){var s=Mi();return n={current:n},s.memoizedState=n},useState:function(n){n=vd(n);var s=n.queue,u=Vm.bind(null,jt,s);return s.dispatch=u,[n.memoizedState,u]},useDebugValue:Ad,useDeferredValue:function(n,s){var u=Mi();return Cd(u,n,s)},useTransition:function(){var n=vd(!1);return n=km.bind(null,jt,n.queue,!0,!1),Mi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,u){var g=jt,E=Mi();if(cn){if(u===void 0)throw Error(a(407));u=u()}else{if(u=s(),Dn===null)throw Error(a(349));tn&60||hm(g,s,u)}E.memoizedState=u;var C={value:u,getSnapshot:s};return E.queue=C,Sm(dm.bind(null,g,C,n),[n]),g.flags|=2048,Nl(9,fm.bind(null,g,C,u,s),{destroy:void 0},null),u},useId:function(){var n=Mi(),s=Dn.identifierPrefix;if(cn){var u=la,g=oa;u=(g&~(1<<32-Ot(g)-1)).toString(32)+u,s=":"+s+"R"+u,u=rh++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=Hv++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},useCacheRefresh:function(){return Mi().memoizedState=Qv.bind(null,jt)}};Uo.useMemoCache=yd,Uo.useHostTransitionStatus=Sd,Uo.useFormState=_m,Uo.useActionState=_m,Uo.useOptimistic=function(n){var s=Mi();s.memoizedState=s.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Id.bind(null,jt,!0,u),u.dispatch=s,[n,s]};var qa={readContext:ai,use:sh,useCallback:Mm,useContext:ai,useEffect:bd,useImperativeHandle:Dm,useInsertionEffect:Im,useLayoutEffect:Nm,useMemo:Om,useReducer:ah,useRef:Tm,useState:function(){return ah(ua)},useDebugValue:Ad,useDeferredValue:function(n,s){var u=yr();return Lm(u,bn.memoizedState,n,s)},useTransition:function(){var n=ah(ua)[0],s=yr().memoizedState;return[typeof n=="boolean"?n:Oc(n),s]},useSyncExternalStore:um,useId:jm};qa.useCacheRefresh=Um,qa.useMemoCache=yd,qa.useHostTransitionStatus=Sd,qa.useFormState=bm,qa.useActionState=bm,qa.useOptimistic=function(n,s){var u=yr();return pm(u,bn,n,s)};var Vo={readContext:ai,use:sh,useCallback:Mm,useContext:ai,useEffect:bd,useImperativeHandle:Dm,useInsertionEffect:Im,useLayoutEffect:Nm,useMemo:Om,useReducer:Ed,useRef:Tm,useState:function(){return Ed(ua)},useDebugValue:Ad,useDeferredValue:function(n,s){var u=yr();return bn===null?Cd(u,n,s):Lm(u,bn.memoizedState,n,s)},useTransition:function(){var n=Ed(ua)[0],s=yr().memoizedState;return[typeof n=="boolean"?n:Oc(n),s]},useSyncExternalStore:um,useId:jm};Vo.useCacheRefresh=Um,Vo.useMemoCache=yd,Vo.useHostTransitionStatus=Sd,Vo.useFormState=Cm,Vo.useActionState=Cm,Vo.useOptimistic=function(n,s){var u=yr();return bn!==null?pm(u,bn,n,s):(u.baseState=n,[n,u.queue.dispatch])};function Nd(n,s,u,g){s=n.memoizedState,u=u(g,s),u=u==null?s:z({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Rd={isMounted:function(n){return(n=n._reactInternals)?Xe(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var g=Wi(),E=Qa(g);E.payload=s,u!=null&&(E.callback=u),s=Wa(n,E,g),s!==null&&(pi(s,n,g),Bc(s,n,g))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var g=Wi(),E=Qa(g);E.tag=1,E.payload=s,u!=null&&(E.callback=u),s=Wa(n,E,g),s!==null&&(pi(s,n,g),Bc(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=Wi(),g=Qa(u);g.tag=2,s!=null&&(g.callback=s),s=Wa(n,g,u),s!==null&&(pi(s,n,u),Bc(s,n,u))}};function Hm(n,s,u,g,E,C,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,C,M):s.prototype&&s.prototype.isPureReactComponent?!d(u,g)||!d(E,C):!0}function Gm(n,s,u,g){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,g),s.state!==n&&Rd.enqueueReplaceState(s,s.state,null)}function Fo(n,s){var u=s;if("ref"in s){u={};for(var g in s)g!=="ref"&&(u[g]=s[g])}if(n=n.defaultProps){u===s&&(u=z({},u));for(var E in n)u[E]===void 0&&(u[E]=n[E])}return u}var uh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function qm(n){uh(n)}function Ym(n){console.error(n)}function Xm(n){uh(n)}function hh(n,s){try{var u=n.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function Qm(n,s,u){try{var g=n.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Dd(n,s,u){return u=Qa(u),u.tag=3,u.payload={element:null},u.callback=function(){hh(n,s)},u}function Wm(n){return n=Qa(n),n.tag=3,n}function Km(n,s,u,g){var E=u.type.getDerivedStateFromError;if(typeof E=="function"){var C=g.value;n.payload=function(){return E(C)},n.callback=function(){Qm(s,u,g)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(n.callback=function(){Qm(s,u,g),typeof E!="function"&&(to===null?to=new Set([this]):to.add(this));var j=g.stack;this.componentDidCatch(g.value,{componentStack:j!==null?j:""})})}function Kv(n,s,u,g,E){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=u.alternate,s!==null&&Pc(s,u,E,!0),u=ds.current,u!==null){switch(u.tag){case 13:return Hs===null?f0():u.alternate===null&&ir===0&&(ir=3),u.flags&=-257,u.flags|=65536,u.lanes=E,g===od?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([g]):s.add(g),g0(n,g,E)),!1;case 22:return u.flags|=65536,g===od?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([g]):u.add(g)),g0(n,g,E)),!1}throw Error(a(435,u.tag))}return g0(n,g,E),f0(),!1}if(cn)return s=ds.current,s!==null?(!(s.flags&65536)&&(s.flags|=256),s.flags|=65536,s.lanes=E,g!==ad&&(n=Error(a(422),{cause:g}),Cc(us(n,u)))):(g!==ad&&(s=Error(a(423),{cause:g}),Cc(us(s,u))),n=n.current.alternate,n.flags|=65536,E&=-E,n.lanes|=E,g=us(g,u),E=Dd(n.stateNode,g,E),Yd(n,E),ir!==4&&(ir=2)),!1;var C=Error(a(520),{cause:g});if(C=us(C,u),qc===null?qc=[C]:qc.push(C),ir!==4&&(ir=2),s===null)return!0;g=us(g,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,n=E&-E,u.lanes|=n,n=Dd(u.stateNode,g,n),Yd(u,n),!1;case 1:if(s=u.type,C=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(to===null||!to.has(C))))return u.flags|=65536,E&=-E,u.lanes|=E,E=Wm(E),Km(E,n,u,g),Yd(u,E),!1}u=u.return}while(u!==null);return!1}var Zm=Error(a(461)),Or=!1;function Wr(n,s,u,g){s.child=n===null?nm(s,null,u,g):Po(s,n.child,u,g)}function $m(n,s,u,g,E){u=u.render;var C=s.ref;if("ref"in g){var M={};for(var j in g)j!=="ref"&&(M[j]=g[j])}else M=g;return Ho(s),g=gd(n,s,u,M,C,E),j=md(),n!==null&&!Or?(pd(n,s,E),ha(n,s,E)):(cn&&j&&id(s),s.flags|=1,Wr(n,s,g,E),s.child)}function Jm(n,s,u,g,E){if(n===null){var C=u.type;return typeof C=="function"&&!e0(C)&&C.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=C,ep(n,s,C,g,E)):(n=ph(u.type,null,g,s,s.mode,E),n.ref=s.ref,n.return=s,s.child=n)}if(C=n.child,!Vd(n,E)){var M=C.memoizedProps;if(u=u.compare,u=u!==null?u:d,u(M,g)&&n.ref===s.ref)return ha(n,s,E)}return s.flags|=1,n=Ja(C,g),n.ref=s.ref,n.return=s,s.child=n}function ep(n,s,u,g,E){if(n!==null){var C=n.memoizedProps;if(d(C,g)&&n.ref===s.ref)if(Or=!1,s.pendingProps=g=C,Vd(n,E))n.flags&131072&&(Or=!0);else return s.lanes=n.lanes,ha(n,s,E)}return Md(n,s,u,g,E)}function tp(n,s,u){var g=s.pendingProps,E=g.children,C=(s.stateNode._pendingVisibility&2)!==0,M=n!==null?n.memoizedState:null;if(kc(n,s),g.mode==="hidden"||C){if(s.flags&128){if(g=M!==null?M.baseLanes|u:u,n!==null){for(E=s.child=n.child,C=0;E!==null;)C=C|E.lanes|E.childLanes,E=E.sibling;s.childLanes=C&~g}else s.childLanes=0,s.child=null;return np(n,s,g,u)}if(u&536870912)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&th(s,M!==null?M.cachePool:null),M!==null?rm(s,M):ld(),im(s);else return s.lanes=s.childLanes=536870912,np(n,s,M!==null?M.baseLanes|u:u,u)}else M!==null?(th(s,M.cachePool),rm(s,M),Ha(),s.memoizedState=null):(n!==null&&th(s,null),ld(),Ha());return Wr(n,s,E,u),s.child}function np(n,s,u,g){var E=fd();return E=E===null?null:{parent:Tr._currentValue,pool:E},s.memoizedState={baseLanes:u,cachePool:E},n!==null&&th(s,null),ld(),im(s),n!==null&&Pc(n,s,g,!0),null}function kc(n,s){var u=s.ref;if(u===null)n!==null&&n.ref!==null&&(s.flags|=2097664);else{if(typeof u!="function"&&typeof u!="object")throw Error(a(284));(n===null||n.ref!==u)&&(s.flags|=2097664)}}function Md(n,s,u,g,E){return Ho(s),u=gd(n,s,u,g,void 0,E),g=md(),n!==null&&!Or?(pd(n,s,E),ha(n,s,E)):(cn&&g&&id(s),s.flags|=1,Wr(n,s,u,E),s.child)}function rp(n,s,u,g,E,C){return Ho(s),s.updateQueue=null,u=cm(s,g,u,E),lm(n),g=md(),n!==null&&!Or?(pd(n,s,C),ha(n,s,C)):(cn&&g&&id(s),s.flags|=1,Wr(n,s,u,C),s.child)}function ip(n,s,u,g,E){if(Ho(s),s.stateNode===null){var C=El,M=u.contextType;typeof M=="object"&&M!==null&&(C=ai(M)),C=new u(g,C),s.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Rd,s.stateNode=C,C._reactInternals=s,C=s.stateNode,C.props=g,C.state=s.memoizedState,C.refs={},Gd(s),M=u.contextType,C.context=typeof M=="object"&&M!==null?ai(M):El,C.state=s.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(Nd(s,u,M,g),C.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(M=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),M!==C.state&&Rd.enqueueReplaceState(C,C.state,null),Uc(s,g,C,E),jc(),C.state=s.memoizedState),typeof C.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(n===null){C=s.stateNode;var j=s.memoizedProps,W=Fo(u,j);C.props=W;var oe=C.context,be=u.contextType;M=El,typeof be=="object"&&be!==null&&(M=ai(be));var Le=u.getDerivedStateFromProps;be=typeof Le=="function"||typeof C.getSnapshotBeforeUpdate=="function",j=s.pendingProps!==j,be||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(j||oe!==M)&&Gm(s,C,g,M),Xa=!1;var pe=s.memoizedState;C.state=pe,Uc(s,g,C,E),jc(),oe=s.memoizedState,j||pe!==oe||Xa?(typeof Le=="function"&&(Nd(s,u,Le,g),oe=s.memoizedState),(W=Xa||Hm(s,u,W,g,pe,oe,M))?(be||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(s.flags|=4194308)):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=oe),C.props=g,C.state=oe,C.context=M,g=W):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{C=s.stateNode,qd(n,s),M=s.memoizedProps,be=Fo(u,M),C.props=be,Le=s.pendingProps,pe=C.context,oe=u.contextType,W=El,typeof oe=="object"&&oe!==null&&(W=ai(oe)),j=u.getDerivedStateFromProps,(oe=typeof j=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==Le||pe!==W)&&Gm(s,C,g,W),Xa=!1,pe=s.memoizedState,C.state=pe,Uc(s,g,C,E),jc();var _e=s.memoizedState;M!==Le||pe!==_e||Xa||n!==null&&n.dependencies!==null&&fh(n.dependencies)?(typeof j=="function"&&(Nd(s,u,j,g),_e=s.memoizedState),(be=Xa||Hm(s,u,be,g,pe,_e,W)||n!==null&&n.dependencies!==null&&fh(n.dependencies))?(oe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,_e,W),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,_e,W)),typeof C.componentDidUpdate=="function"&&(s.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=_e),C.props=g,C.state=_e,C.context=W,g=be):(typeof C.componentDidUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=1024),g=!1)}return C=g,kc(n,s),g=(s.flags&128)!==0,C||g?(C=s.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:C.render(),s.flags|=1,n!==null&&g?(s.child=Po(s,n.child,null,E),s.child=Po(s,null,u,E)):Wr(n,s,u,E),s.memoizedState=C.state,n=s.child):n=ha(n,s,E),n}function sp(n,s,u,g){return Ac(),s.flags|=256,Wr(n,s,u,g),s.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Ld(n){return{baseLanes:n,cachePool:om()}}function kd(n,s,u){return n=n!==null?n.childLanes&~u:0,s&&(n|=xs),n}function ap(n,s,u){var g=s.pendingProps,E=!1,C=(s.flags&128)!==0,M;if((M=C)||(M=n!==null&&n.memoizedState===null?!1:(Cr.current&2)!==0),M&&(E=!0,s.flags&=-129),M=(s.flags&32)!==0,s.flags&=-33,n===null){if(cn){if(E?za(s):Ha(),cn){var j=Qr,W;if(W=j){e:{for(W=j,j=zs;W.nodeType!==8;){if(!j){j=null;break e}if(W=Is(W.nextSibling),W===null){j=null;break e}}j=W}j!==null?(s.memoizedState={dehydrated:j,treeContext:Oo!==null?{id:oa,overflow:la}:null,retryLane:536870912},W=ps(18,null,null,0),W.stateNode=j,W.return=s,s.child=W,mi=s,Qr=null,W=!0):W=!1}W||ko(s)}if(j=s.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return j.data==="$!"?s.lanes=16:s.lanes=536870912,null;ca(s)}return j=g.children,g=g.fallback,E?(Ha(),E=s.mode,j=Bd({mode:"hidden",children:j},E),g=qo(g,E,u,null),j.return=s,g.return=s,j.sibling=g,s.child=j,E=s.child,E.memoizedState=Ld(u),E.childLanes=kd(n,M,u),s.memoizedState=Od,g):(za(s),Pd(s,j))}if(W=n.memoizedState,W!==null&&(j=W.dehydrated,j!==null)){if(C)s.flags&256?(za(s),s.flags&=-257,s=jd(n,s,u)):s.memoizedState!==null?(Ha(),s.child=n.child,s.flags|=128,s=null):(Ha(),E=g.fallback,j=s.mode,g=Bd({mode:"visible",children:g.children},j),E=qo(E,j,u,null),E.flags|=2,g.return=s,E.return=s,g.sibling=E,s.child=g,Po(s,n.child,null,u),g=s.child,g.memoizedState=Ld(u),g.childLanes=kd(n,M,u),s.memoizedState=Od,s=E);else if(za(s),j.data==="$!"){if(M=j.nextSibling&&j.nextSibling.dataset,M)var oe=M.dgst;M=oe,g=Error(a(419)),g.stack="",g.digest=M,Cc({value:g,source:null,stack:null}),s=jd(n,s,u)}else if(Or||Pc(n,s,u,!1),M=(u&n.childLanes)!==0,Or||M){if(M=Dn,M!==null){if(g=u&-u,g&42)g=1;else switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=64;break;case 268435456:g=134217728;break;default:g=0}if(g=g&(M.suspendedLanes|u)?0:g,g!==0&&g!==W.retryLane)throw W.retryLane=g,Fa(n,g),pi(M,n,g),Zm}j.data==="$?"||f0(),s=jd(n,s,u)}else j.data==="$?"?(s.flags|=128,s.child=n.child,s=h_.bind(null,n),j._reactRetry=s,s=null):(n=W.treeContext,Qr=Is(j.nextSibling),mi=s,cn=!0,Ts=null,zs=!1,n!==null&&(hs[fs++]=oa,hs[fs++]=la,hs[fs++]=Oo,oa=n.id,la=n.overflow,Oo=s),s=Pd(s,g.children),s.flags|=4096);return s}return E?(Ha(),E=g.fallback,j=s.mode,W=n.child,oe=W.sibling,g=Ja(W,{mode:"hidden",children:g.children}),g.subtreeFlags=W.subtreeFlags&31457280,oe!==null?E=Ja(oe,E):(E=qo(E,j,u,null),E.flags|=2),E.return=s,g.return=s,g.sibling=E,s.child=g,g=E,E=s.child,j=n.child.memoizedState,j===null?j=Ld(u):(W=j.cachePool,W!==null?(oe=Tr._currentValue,W=W.parent!==oe?{parent:oe,pool:oe}:W):W=om(),j={baseLanes:j.baseLanes|u,cachePool:W}),E.memoizedState=j,E.childLanes=kd(n,M,u),s.memoizedState=Od,g):(za(s),u=n.child,n=u.sibling,u=Ja(u,{mode:"visible",children:g.children}),u.return=s,u.sibling=null,n!==null&&(M=s.deletions,M===null?(s.deletions=[n],s.flags|=16):M.push(n)),s.child=u,s.memoizedState=null,u)}function Pd(n,s){return s=Bd({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Bd(n,s){return Mp(n,s,0,null)}function jd(n,s,u){return Po(s,n.child,null,u),n=Pd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function op(n,s,u){n.lanes|=s;var g=n.alternate;g!==null&&(g.lanes|=s),zd(n.return,s,u)}function Ud(n,s,u,g,E){var C=n.memoizedState;C===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:E}:(C.isBackwards=s,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=u,C.tailMode=E)}function lp(n,s,u){var g=s.pendingProps,E=g.revealOrder,C=g.tail;if(Wr(n,s,g.children,u),g=Cr.current,g&2)g=g&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&op(n,u,s);else if(n.tag===19)op(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}switch(Rt(Cr,g),E){case"forwards":for(u=s.child,E=null;u!==null;)n=u.alternate,n!==null&&eh(n)===null&&(E=u),u=u.sibling;u=E,u===null?(E=s.child,s.child=null):(E=u.sibling,u.sibling=null),Ud(s,!1,E,u,C);break;case"backwards":for(u=null,E=s.child,s.child=null;E!==null;){if(n=E.alternate,n!==null&&eh(n)===null){s.child=E;break}n=E.sibling,E.sibling=u,u=E,E=n}Ud(s,!0,u,null,C);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ha(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),eo|=s.lanes,!(u&s.childLanes))if(n!==null){if(Pc(n,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(a(153));if(s.child!==null){for(n=s.child,u=Ja(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=Ja(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function Vd(n,s){return n.lanes&s?!0:(n=n.dependencies,!!(n!==null&&fh(n)))}function Zv(n,s,u){switch(s.tag){case 3:$e(s,s.stateNode.containerInfo),Ya(s,Tr,n.memoizedState.cache),Ac();break;case 27:case 5:Ce(s);break;case 4:$e(s,s.stateNode.containerInfo);break;case 10:Ya(s,s.type,s.memoizedProps.value);break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(za(s),s.flags|=128,null):u&s.child.childLanes?ap(n,s,u):(za(s),n=ha(n,s,u),n!==null?n.sibling:null);za(s);break;case 19:var E=(n.flags&128)!==0;if(g=(u&s.childLanes)!==0,g||(Pc(n,s,u,!1),g=(u&s.childLanes)!==0),E){if(g)return lp(n,s,u);s.flags|=128}if(E=s.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Rt(Cr,Cr.current),g)break;return null;case 22:case 23:return s.lanes=0,tp(n,s,u);case 24:Ya(s,Tr,n.memoizedState.cache)}return ha(n,s,u)}function cp(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps)Or=!0;else{if(!Vd(n,u)&&!(s.flags&128))return Or=!1,Zv(n,s,u);Or=!!(n.flags&131072)}else Or=!1,cn&&s.flags&1048576&&Xg(s,Wu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var g=s.elementType,E=g._init;if(g=E(g._payload),s.type=g,typeof g=="function")e0(g)?(n=Fo(g,n),s.tag=1,s=ip(null,s,g,n,u)):(s.tag=0,s=Md(null,s,g,n,u));else{if(g!=null){if(E=g.$$typeof,E===q){s.tag=11,s=$m(null,s,g,n,u);break e}else if(E===de){s.tag=14,s=Jm(null,s,g,n,u);break e}}throw s=F(g)||g,Error(a(306,s,""))}}return s;case 0:return Md(n,s,s.type,s.pendingProps,u);case 1:return g=s.type,E=Fo(g,s.pendingProps),ip(n,s,g,E,u);case 3:e:{if($e(s,s.stateNode.containerInfo),n===null)throw Error(a(387));var C=s.pendingProps;E=s.memoizedState,g=E.element,qd(n,s),Uc(s,C,null,u);var M=s.memoizedState;if(C=M.cache,Ya(s,Tr,C),C!==E.cache&&Hd(s,[Tr],u,!0),jc(),C=M.element,E.isDehydrated)if(E={element:C,isDehydrated:!1,cache:M.cache},s.updateQueue.baseState=E,s.memoizedState=E,s.flags&256){s=sp(n,s,C,u);break e}else if(C!==g){g=us(Error(a(424)),s),Cc(g),s=sp(n,s,C,u);break e}else for(Qr=Is(s.stateNode.containerInfo.firstChild),mi=s,cn=!0,Ts=null,zs=!0,u=nm(s,null,C,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ac(),C===g){s=ha(n,s,u);break e}Wr(n,s,C,u)}s=s.child}return s;case 26:return kc(n,s),n===null?(u=f2(s.type,null,s.pendingProps,null))?s.memoizedState=u:cn||(u=s.type,n=s.pendingProps,g=Ih(pt.current).createElement(u),g[En]=s,g[kn]=n,Kr(g,u,n),We(g),s.stateNode=g):s.memoizedState=f2(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ce(s),n===null&&cn&&(g=s.stateNode=c2(s.type,s.pendingProps,pt.current),mi=s,zs=!0,Qr=Is(g.firstChild)),g=s.pendingProps.children,n!==null||cn?Wr(n,s,g,u):s.child=Po(s,null,g,u),kc(n,s),s.child;case 5:return n===null&&cn&&((E=g=Qr)&&(g=S_(g,s.type,s.pendingProps,zs),g!==null?(s.stateNode=g,mi=s,Qr=Is(g.firstChild),zs=!1,E=!0):E=!1),E||ko(s)),Ce(s),E=s.type,C=s.pendingProps,M=n!==null?n.memoizedProps:null,g=C.children,T0(E,C)?g=null:M!==null&&T0(E,M)&&(s.flags|=32),s.memoizedState!==null&&(E=gd(n,s,Gv,null,null,u),eu._currentValue=E),kc(n,s),Wr(n,s,g,u),s.child;case 6:return n===null&&cn&&((n=u=Qr)&&(u=I_(u,s.pendingProps,zs),u!==null?(s.stateNode=u,mi=s,Qr=null,n=!0):n=!1),n||ko(s)),null;case 13:return ap(n,s,u);case 4:return $e(s,s.stateNode.containerInfo),g=s.pendingProps,n===null?s.child=Po(s,null,g,u):Wr(n,s,g,u),s.child;case 11:return $m(n,s,s.type,s.pendingProps,u);case 7:return Wr(n,s,s.pendingProps,u),s.child;case 8:return Wr(n,s,s.pendingProps.children,u),s.child;case 12:return Wr(n,s,s.pendingProps.children,u),s.child;case 10:return g=s.pendingProps,Ya(s,s.type,g.value),Wr(n,s,g.children,u),s.child;case 9:return E=s.type._context,g=s.pendingProps.children,Ho(s),E=ai(E),g=g(E),s.flags|=1,Wr(n,s,g,u),s.child;case 14:return Jm(n,s,s.type,s.pendingProps,u);case 15:return ep(n,s,s.type,s.pendingProps,u);case 19:return lp(n,s,u);case 22:return tp(n,s,u);case 24:return Ho(s),g=ai(Tr),n===null?(E=fd(),E===null&&(E=Dn,C=ud(),E.pooledCache=C,C.refCount++,C!==null&&(E.pooledCacheLanes|=u),E=C),s.memoizedState={parent:g,cache:E},Gd(s),Ya(s,Tr,E)):(n.lanes&u&&(qd(n,s),Uc(s,null,null,u),jc()),E=n.memoizedState,C=s.memoizedState,E.parent!==g?(E={parent:g,cache:g},s.memoizedState=E,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=E),Ya(s,Tr,g)):(g=C.cache,Ya(s,Tr,g),g!==E.cache&&Hd(s,[Tr],u,!0))),Wr(n,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}var Fd=at(null),zo=null,fa=null;function Ya(n,s,u){Rt(Fd,s._currentValue),s._currentValue=u}function da(n){n._currentValue=Fd.current,Gt(Fd)}function zd(n,s,u){for(;n!==null;){var g=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),n===u)break;n=n.return}}function Hd(n,s,u,g){var E=n.child;for(E!==null&&(E.return=n);E!==null;){var C=E.dependencies;if(C!==null){var M=E.child;C=C.firstContext;e:for(;C!==null;){var j=C;C=E;for(var W=0;W<s.length;W++)if(j.context===s[W]){C.lanes|=u,j=C.alternate,j!==null&&(j.lanes|=u),zd(C.return,u,n),g||(M=null);break e}C=j.next}}else if(E.tag===18){if(M=E.return,M===null)throw Error(a(341));M.lanes|=u,C=M.alternate,C!==null&&(C.lanes|=u),zd(M,u,n),M=null}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===n){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}}function Pc(n,s,u,g){n=null;for(var E=s,C=!1;E!==null;){if(!C){if(E.flags&524288)C=!0;else if(E.flags&262144)break}if(E.tag===10){var M=E.alternate;if(M===null)throw Error(a(387));if(M=M.memoizedProps,M!==null){var j=E.type;h(E.pendingProps.value,M.value)||(n!==null?n.push(j):n=[j])}}else if(E===ze.current){if(M=E.alternate,M===null)throw Error(a(387));M.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(n!==null?n.push(eu):n=[eu])}E=E.return}n!==null&&Hd(s,n,u,g),s.flags|=262144}function fh(n){for(n=n.firstContext;n!==null;){if(!h(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ho(n){zo=n,fa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ai(n){return up(zo,n)}function dh(n,s){return zo===null&&Ho(n),up(n,s)}function up(n,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},fa===null){if(n===null)throw Error(a(308));fa=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else fa=fa.next=s;return u}var Xa=!1;function Gd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Qa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Wa(n,s,u){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,Kn&2){var E=g.pending;return E===null?s.next=s:(s.next=E.next,E.next=s),g.pending=s,s=Xu(n),qg(n,null,u),s}return Yu(n,g,s,u),Xu(n)}function Bc(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194176)!==0)){var g=s.lanes;g&=n.pendingLanes,u|=g,s.lanes=u,wi(n,u)}}function Yd(n,s){var u=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var E=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};C===null?E=C=M:C=C.next=M,u=u.next}while(u!==null);C===null?E=C=s:C=C.next=s}else E=C=s;u={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:g.shared,callbacks:g.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}var Xd=!1;function jc(){if(Xd){var n=Tl;if(n!==null)throw n}}function Uc(n,s,u,g){Xd=!1;var E=n.updateQueue;Xa=!1;var C=E.firstBaseUpdate,M=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var W=j,oe=W.next;W.next=null,M===null?C=oe:M.next=oe,M=W;var be=n.alternate;be!==null&&(be=be.updateQueue,j=be.lastBaseUpdate,j!==M&&(j===null?be.firstBaseUpdate=oe:j.next=oe,be.lastBaseUpdate=W))}if(C!==null){var Le=E.baseState;M=0,be=oe=W=null,j=C;do{var pe=j.lane&-536870913,_e=pe!==j.lane;if(_e?(tn&pe)===pe:(g&pe)===pe){pe!==0&&pe===Cl&&(Xd=!0),be!==null&&(be=be.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var st=n,St=j;pe=s;var sr=u;switch(St.tag){case 1:if(st=St.payload,typeof st=="function"){Le=st.call(sr,Le,pe);break e}Le=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=St.payload,pe=typeof st=="function"?st.call(sr,Le,pe):st,pe==null)break e;Le=z({},Le,pe);break e;case 2:Xa=!0}}pe=j.callback,pe!==null&&(n.flags|=64,_e&&(n.flags|=8192),_e=E.callbacks,_e===null?E.callbacks=[pe]:_e.push(pe))}else _e={lane:pe,tag:j.tag,payload:j.payload,callback:j.callback,next:null},be===null?(oe=be=_e,W=Le):be=be.next=_e,M|=pe;if(j=j.next,j===null){if(j=E.shared.pending,j===null)break;_e=j,j=_e.next,_e.next=null,E.lastBaseUpdate=_e,E.shared.pending=null}}while(!0);be===null&&(W=Le),E.baseState=W,E.firstBaseUpdate=oe,E.lastBaseUpdate=be,C===null&&(E.shared.lanes=0),eo|=M,n.lanes=M,n.memoizedState=Le}}function hp(n,s){if(typeof n!="function")throw Error(a(191,n));n.call(s)}function fp(n,s){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)hp(u[n],s)}function Vc(n,s){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var E=g.next;u=E;do{if((u.tag&n)===n){g=void 0;var C=u.create,M=u.inst;g=C(),M.destroy=g}u=u.next}while(u!==E)}}catch(j){In(s,s.return,j)}}function Ka(n,s,u){try{var g=s.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var C=E.next;g=C;do{if((g.tag&n)===n){var M=g.inst,j=M.destroy;if(j!==void 0){M.destroy=void 0,E=s;var W=u;try{j()}catch(oe){In(E,W,oe)}}}g=g.next}while(g!==C)}}catch(oe){In(s,s.return,oe)}}function dp(n){var s=n.updateQueue;if(s!==null){var u=n.stateNode;try{fp(s,u)}catch(g){In(n,n.return,g)}}}function gp(n,s,u){u.props=Fo(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(g){In(n,s,g)}}function Go(n,s){try{var u=n.ref;if(u!==null){var g=n.stateNode;switch(n.tag){case 26:case 27:case 5:var E=g;break;default:E=g}typeof u=="function"?n.refCleanup=u(E):u.current=E}}catch(C){In(n,s,C)}}function Yi(n,s){var u=n.ref,g=n.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(E){In(n,s,E)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(E){In(n,s,E)}else u.current=null}function mp(n){var s=n.type,u=n.memoizedProps,g=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(E){In(n,n.return,E)}}function pp(n,s,u){try{var g=n.stateNode;__(g,n.type,u,s),g[kn]=s}catch(E){In(n,n.return,E)}}function xp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Qd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wd(n,s,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Sh));else if(g!==4&&g!==27&&(n=n.child,n!==null))for(Wd(n,s,u),n=n.sibling;n!==null;)Wd(n,s,u),n=n.sibling}function gh(n,s,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(g!==4&&g!==27&&(n=n.child,n!==null))for(gh(n,s,u),n=n.sibling;n!==null;)gh(n,s,u),n=n.sibling}var ga=!1,rr=!1,Kd=!1,yp=typeof WeakSet=="function"?WeakSet:Set,Lr=null,wp=!1;function $v(n,s){if(n=n.containerInfo,A0=Lh,n=T(n),N(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var E=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break e}var M=0,j=-1,W=-1,oe=0,be=0,Le=n,pe=null;t:for(;;){for(var _e;Le!==u||E!==0&&Le.nodeType!==3||(j=M+E),Le!==C||g!==0&&Le.nodeType!==3||(W=M+g),Le.nodeType===3&&(M+=Le.nodeValue.length),(_e=Le.firstChild)!==null;)pe=Le,Le=_e;for(;;){if(Le===n)break t;if(pe===u&&++oe===E&&(j=M),pe===C&&++be===g&&(W=M),(_e=Le.nextSibling)!==null)break;Le=pe,pe=Le.parentNode}Le=_e}u=j===-1||W===-1?null:{start:j,end:W}}else u=null}u=u||{start:0,end:0}}else u=null;for(C0={focusedElem:n,selectionRange:u},Lh=!1,Lr=s;Lr!==null;)if(s=Lr,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Lr=n;else for(;Lr!==null;){switch(s=Lr,C=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&C!==null){n=void 0,u=s,E=C.memoizedProps,C=C.memoizedState,g=u.stateNode;try{var st=Fo(u.type,E,u.elementType===u.type);n=g.getSnapshotBeforeUpdate(st,C),g.__reactInternalSnapshotBeforeUpdate=n}catch(St){In(u,u.return,St)}}break;case 3:if(n&1024){if(n=s.stateNode.containerInfo,u=n.nodeType,u===9)N0(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":N0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(a(163))}if(n=s.sibling,n!==null){n.return=s.return,Lr=n;break}Lr=s.return}return st=wp,wp=!1,st}function Ep(n,s,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:pa(n,u),g&4&&Vc(5,u);break;case 1:if(pa(n,u),g&4)if(n=u.stateNode,s===null)try{n.componentDidMount()}catch(j){In(u,u.return,j)}else{var E=Fo(u.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(E,s,n.__reactInternalSnapshotBeforeUpdate)}catch(j){In(u,u.return,j)}}g&64&&dp(u),g&512&&Go(u,u.return);break;case 3:if(pa(n,u),g&64&&(g=u.updateQueue,g!==null)){if(n=null,u.child!==null)switch(u.child.tag){case 27:case 5:n=u.child.stateNode;break;case 1:n=u.child.stateNode}try{fp(g,n)}catch(j){In(u,u.return,j)}}break;case 26:pa(n,u),g&512&&Go(u,u.return);break;case 27:case 5:pa(n,u),s===null&&g&4&&mp(u),g&512&&Go(u,u.return);break;case 12:pa(n,u);break;case 13:pa(n,u),g&4&&bp(n,u);break;case 22:if(E=u.memoizedState!==null||ga,!E){s=s!==null&&s.memoizedState!==null||rr;var C=ga,M=rr;ga=E,(rr=s)&&!M?Za(n,u,(u.subtreeFlags&8772)!==0):pa(n,u),ga=C,rr=M}g&512&&(u.memoizedProps.mode==="manual"?Go(u,u.return):Yi(u,u.return));break;default:pa(n,u)}}function vp(n){var s=n.alternate;s!==null&&(n.alternate=null,vp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ks(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var wr=null,Xi=!1;function ma(n,s,u){for(u=u.child;u!==null;)_p(n,s,u),u=u.sibling}function _p(n,s,u){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(hn,u)}catch{}switch(u.tag){case 26:rr||Yi(u,s),ma(n,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:rr||Yi(u,s);var g=wr,E=Xi;for(wr=u.stateNode,ma(n,s,u),u=u.stateNode,s=u.attributes;s.length;)u.removeAttributeNode(s[0]);ks(u),wr=g,Xi=E;break;case 5:rr||Yi(u,s);case 6:E=wr;var C=Xi;if(wr=null,ma(n,s,u),wr=E,Xi=C,wr!==null)if(Xi)try{n=wr,g=u.stateNode,n.nodeType===8?n.parentNode.removeChild(g):n.removeChild(g)}catch(M){In(u,s,M)}else try{wr.removeChild(u.stateNode)}catch(M){In(u,s,M)}break;case 18:wr!==null&&(Xi?(s=wr,u=u.stateNode,s.nodeType===8?I0(s.parentNode,u):s.nodeType===1&&I0(s,u),iu(s)):I0(wr,u.stateNode));break;case 4:g=wr,E=Xi,wr=u.stateNode.containerInfo,Xi=!0,ma(n,s,u),wr=g,Xi=E;break;case 0:case 11:case 14:case 15:rr||Ka(2,u,s),rr||Ka(4,u,s),ma(n,s,u);break;case 1:rr||(Yi(u,s),g=u.stateNode,typeof g.componentWillUnmount=="function"&&gp(u,s,g)),ma(n,s,u);break;case 21:ma(n,s,u);break;case 22:rr||Yi(u,s),rr=(g=rr)||u.memoizedState!==null,ma(n,s,u),rr=g;break;default:ma(n,s,u)}}function bp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{iu(n)}catch(u){In(s,s.return,u)}}function Jv(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new yp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new yp),s;default:throw Error(a(435,n.tag))}}function Zd(n,s){var u=Jv(n);s.forEach(function(g){var E=f_.bind(null,n,g);u.has(g)||(u.add(g),g.then(E,E))})}function gs(n,s){var u=s.deletions;if(u!==null)for(var g=0;g<u.length;g++){var E=u[g],C=n,M=s,j=M;e:for(;j!==null;){switch(j.tag){case 27:case 5:wr=j.stateNode,Xi=!1;break e;case 3:wr=j.stateNode.containerInfo,Xi=!0;break e;case 4:wr=j.stateNode.containerInfo,Xi=!0;break e}j=j.return}if(wr===null)throw Error(a(160));_p(C,M,E),wr=null,Xi=!1,C=E.alternate,C!==null&&(C.return=null),E.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Ap(s,n),s=s.sibling}var Ss=null;function Ap(n,s){var u=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gs(s,n),ms(n),g&4&&(Ka(3,n,n.return),Vc(3,n),Ka(5,n,n.return));break;case 1:gs(s,n),ms(n),g&512&&(rr||u===null||Yi(u,u.return)),g&64&&ga&&(n=n.updateQueue,n!==null&&(g=n.callbacks,g!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var E=Ss;if(gs(s,n),ms(n),g&512&&(rr||u===null||Yi(u,u.return)),g&4){var C=u!==null?u.memoizedState:null;if(g=n.memoizedState,u===null)if(g===null)if(n.stateNode===null){e:{g=n.type,u=n.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":C=E.getElementsByTagName("title")[0],(!C||C[vi]||C[En]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=E.createElement(g),E.head.insertBefore(C,E.querySelector("head > title"))),Kr(C,g,u),C[En]=n,We(C),g=C;break e;case"link":var M=m2("link","href",E).get(g+(u.href||""));if(M){for(var j=0;j<M.length;j++)if(C=M[j],C.getAttribute("href")===(u.href==null?null:u.href)&&C.getAttribute("rel")===(u.rel==null?null:u.rel)&&C.getAttribute("title")===(u.title==null?null:u.title)&&C.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(j,1);break t}}C=E.createElement(g),Kr(C,g,u),E.head.appendChild(C);break;case"meta":if(M=m2("meta","content",E).get(g+(u.content||""))){for(j=0;j<M.length;j++)if(C=M[j],C.getAttribute("content")===(u.content==null?null:""+u.content)&&C.getAttribute("name")===(u.name==null?null:u.name)&&C.getAttribute("property")===(u.property==null?null:u.property)&&C.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&C.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(j,1);break t}}C=E.createElement(g),Kr(C,g,u),E.head.appendChild(C);break;default:throw Error(a(468,g))}C[En]=n,We(C),g=C}n.stateNode=g}else p2(E,n.type,n.stateNode);else n.stateNode=g2(E,g,n.memoizedProps);else C!==g?(C===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):C.count--,g===null?p2(E,n.type,n.stateNode):g2(E,g,n.memoizedProps)):g===null&&n.stateNode!==null&&pp(n,n.memoizedProps,u.memoizedProps)}break;case 27:if(g&4&&n.alternate===null){E=n.stateNode,C=n.memoizedProps;try{for(var W=E.firstChild;W;){var oe=W.nextSibling,be=W.nodeName;W[vi]||be==="HEAD"||be==="BODY"||be==="SCRIPT"||be==="STYLE"||be==="LINK"&&W.rel.toLowerCase()==="stylesheet"||E.removeChild(W),W=oe}for(var Le=n.type,pe=E.attributes;pe.length;)E.removeAttributeNode(pe[0]);Kr(E,Le,C),E[En]=n,E[kn]=C}catch(st){In(n,n.return,st)}}case 5:if(gs(s,n),ms(n),g&512&&(rr||u===null||Yi(u,u.return)),n.flags&32){E=n.stateNode;try{bi(E,"")}catch(st){In(n,n.return,st)}}g&4&&n.stateNode!=null&&(E=n.memoizedProps,pp(n,E,u!==null?u.memoizedProps:E)),g&1024&&(Kd=!0);break;case 6:if(gs(s,n),ms(n),g&4){if(n.stateNode===null)throw Error(a(162));g=n.memoizedProps,u=n.stateNode;try{u.nodeValue=g}catch(st){In(n,n.return,st)}}break;case 3:if(Dh=null,E=Ss,Ss=Nh(s.containerInfo),gs(s,n),Ss=E,ms(n),g&4&&u!==null&&u.memoizedState.isDehydrated)try{iu(s.containerInfo)}catch(st){In(n,n.return,st)}Kd&&(Kd=!1,Cp(n));break;case 4:g=Ss,Ss=Nh(n.stateNode.containerInfo),gs(s,n),ms(n),Ss=g;break;case 12:gs(s,n),ms(n);break;case 13:gs(s,n),ms(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(a0=ot()),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Zd(n,g)));break;case 22:if(g&512&&(rr||u===null||Yi(u,u.return)),W=n.memoizedState!==null,oe=u!==null&&u.memoizedState!==null,be=ga,Le=rr,ga=be||W,rr=Le||oe,gs(s,n),rr=Le,ga=be,ms(n),s=n.stateNode,s._current=n,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,g&8192&&(s._visibility=W?s._visibility&-2:s._visibility|1,W&&(s=ga||rr,u===null||oe||s||Rl(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(u=null,s=n;;){if(s.tag===5||s.tag===26||s.tag===27){if(u===null){oe=u=s;try{if(E=oe.stateNode,W)C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{M=oe.stateNode,j=oe.memoizedProps.style;var _e=j!=null&&j.hasOwnProperty("display")?j.display:null;M.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(st){In(oe,oe.return,st)}}}else if(s.tag===6){if(u===null){oe=s;try{oe.stateNode.nodeValue=W?"":oe.memoizedProps}catch(st){In(oe,oe.return,st)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=n.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Zd(n,u))));break;case 19:gs(s,n),ms(n),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Zd(n,g)));break;case 21:break;default:gs(s,n),ms(n)}}function ms(n){var s=n.flags;if(s&2){try{if(n.tag!==27){e:{for(var u=n.return;u!==null;){if(xp(u)){var g=u;break e}u=u.return}throw Error(a(160))}switch(g.tag){case 27:var E=g.stateNode,C=Qd(n);gh(n,C,E);break;case 5:var M=g.stateNode;g.flags&32&&(bi(M,""),g.flags&=-33);var j=Qd(n);gh(n,j,M);break;case 3:case 4:var W=g.stateNode.containerInfo,oe=Qd(n);Wd(n,oe,W);break;default:throw Error(a(161))}}}catch(be){In(n,n.return,be)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Cp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Cp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function pa(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ep(n,s.alternate,s),s=s.sibling}function Rl(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ka(4,s,s.return),Rl(s);break;case 1:Yi(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&gp(s,s.return,u),Rl(s);break;case 26:case 27:case 5:Yi(s,s.return),Rl(s);break;case 22:Yi(s,s.return),s.memoizedState===null&&Rl(s);break;default:Rl(s)}n=n.sibling}}function Za(n,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,E=n,C=s,M=C.flags;switch(C.tag){case 0:case 11:case 15:Za(E,C,u),Vc(4,C);break;case 1:if(Za(E,C,u),g=C,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(oe){In(g,g.return,oe)}if(g=C,E=g.updateQueue,E!==null){var j=g.stateNode;try{var W=E.shared.hiddenCallbacks;if(W!==null)for(E.shared.hiddenCallbacks=null,E=0;E<W.length;E++)hp(W[E],j)}catch(oe){In(g,g.return,oe)}}u&&M&64&&dp(C),Go(C,C.return);break;case 26:case 27:case 5:Za(E,C,u),u&&g===null&&M&4&&mp(C),Go(C,C.return);break;case 12:Za(E,C,u);break;case 13:Za(E,C,u),u&&M&4&&bp(E,C);break;case 22:C.memoizedState===null&&Za(E,C,u),Go(C,C.return);break;default:Za(E,C,u)}s=s.sibling}}function $d(n,s){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&Rc(u))}function Jd(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Rc(n))}function $a(n,s,u,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Tp(n,s,u,g),s=s.sibling}function Tp(n,s,u,g){var E=s.flags;switch(s.tag){case 0:case 11:case 15:$a(n,s,u,g),E&2048&&Vc(9,s);break;case 3:$a(n,s,u,g),E&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Rc(n)));break;case 12:if(E&2048){$a(n,s,u,g),n=s.stateNode;try{var C=s.memoizedProps,M=C.id,j=C.onPostCommit;typeof j=="function"&&j(M,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(W){In(s,s.return,W)}}else $a(n,s,u,g);break;case 23:break;case 22:C=s.stateNode,s.memoizedState!==null?C._visibility&4?$a(n,s,u,g):Fc(n,s):C._visibility&4?$a(n,s,u,g):(C._visibility|=4,Dl(n,s,u,g,(s.subtreeFlags&10256)!==0)),E&2048&&$d(s.alternate,s);break;case 24:$a(n,s,u,g),E&2048&&Jd(s.alternate,s);break;default:$a(n,s,u,g)}}function Dl(n,s,u,g,E){for(E=E&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var C=n,M=s,j=u,W=g,oe=M.flags;switch(M.tag){case 0:case 11:case 15:Dl(C,M,j,W,E),Vc(8,M);break;case 23:break;case 22:var be=M.stateNode;M.memoizedState!==null?be._visibility&4?Dl(C,M,j,W,E):Fc(C,M):(be._visibility|=4,Dl(C,M,j,W,E)),E&&oe&2048&&$d(M.alternate,M);break;case 24:Dl(C,M,j,W,E),E&&oe&2048&&Jd(M.alternate,M);break;default:Dl(C,M,j,W,E)}s=s.sibling}}function Fc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=n,g=s,E=g.flags;switch(g.tag){case 22:Fc(u,g),E&2048&&$d(g.alternate,g);break;case 24:Fc(u,g),E&2048&&Jd(g.alternate,g);break;default:Fc(u,g)}s=s.sibling}}var zc=8192;function Ml(n){if(n.subtreeFlags&zc)for(n=n.child;n!==null;)Sp(n),n=n.sibling}function Sp(n){switch(n.tag){case 26:Ml(n),n.flags&zc&&n.memoizedState!==null&&F_(Ss,n.memoizedState,n.memoizedProps);break;case 5:Ml(n);break;case 3:case 4:var s=Ss;Ss=Nh(n.stateNode.containerInfo),Ml(n),Ss=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=zc,zc=16777216,Ml(n),zc=s):Ml(n));break;default:Ml(n)}}function Ip(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Hc(n){var s=n.deletions;if(n.flags&16){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Lr=g,Rp(g,n)}Ip(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Np(n),n=n.sibling}function Np(n){switch(n.tag){case 0:case 11:case 15:Hc(n),n.flags&2048&&Ka(9,n,n.return);break;case 3:Hc(n);break;case 12:Hc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&4&&(n.return===null||n.return.tag!==13)?(s._visibility&=-5,mh(n)):Hc(n);break;default:Hc(n)}}function mh(n){var s=n.deletions;if(n.flags&16){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Lr=g,Rp(g,n)}Ip(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ka(8,s,s.return),mh(s);break;case 22:u=s.stateNode,u._visibility&4&&(u._visibility&=-5,mh(s));break;default:mh(s)}n=n.sibling}}function Rp(n,s){for(;Lr!==null;){var u=Lr;switch(u.tag){case 0:case 11:case 15:Ka(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Rc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Lr=g;else e:for(u=n;Lr!==null;){g=Lr;var E=g.sibling,C=g.return;if(vp(g),g===u){Lr=null;break e}if(E!==null){E.return=C,Lr=E;break e}Lr=C}}}function e_(n,s,u,g){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(n,s,u,g){return new e_(n,s,u,g)}function e0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ja(n,s){var u=n.alternate;return u===null?(u=ps(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&31457280,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function Dp(n,s){n.flags&=31457282;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,s=u.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ph(n,s,u,g,E,C){var M=0;if(g=n,typeof n=="function")e0(n)&&(M=1);else if(typeof n=="string")M=U_(n,u,kt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case v:return qo(u.children,E,C,s);case w:M=8,E|=24;break;case S:return n=ps(12,u,s,E|2),n.elementType=S,n.lanes=C,n;case ee:return n=ps(13,u,s,E),n.elementType=ee,n.lanes=C,n;case K:return n=ps(19,u,s,E),n.elementType=K,n.lanes=C,n;case ie:return Mp(u,E,C,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:case U:M=10;break e;case k:M=9;break e;case q:M=11;break e;case de:M=14;break e;case fe:M=16,g=null;break e}M=29,u=Error(a(130,n===null?"null":typeof n,"")),g=null}return s=ps(M,u,s,E),s.elementType=n,s.type=g,s.lanes=C,s}function qo(n,s,u,g){return n=ps(7,n,g,s),n.lanes=u,n}function Mp(n,s,u,g){n=ps(22,n,g,s),n.elementType=ie,n.lanes=u;var E={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var C=E._current;if(C===null)throw Error(a(456));if(!(E._pendingVisibility&2)){var M=Fa(C,2);M!==null&&(E._pendingVisibility|=2,pi(M,C,2))}},attach:function(){var C=E._current;if(C===null)throw Error(a(456));if(E._pendingVisibility&2){var M=Fa(C,2);M!==null&&(E._pendingVisibility&=-3,pi(M,C,2))}}};return n.stateNode=E,n}function t0(n,s,u){return n=ps(6,n,null,s),n.lanes=u,n}function n0(n,s,u){return s=ps(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function xa(n){n.flags|=4}function Op(n,s){if(s.type!=="stylesheet"||s.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!x2(s)){if(s=ds.current,s!==null&&((tn&4194176)===tn?Hs!==null:(tn&62914560)!==tn&&!(tn&536870912)||s!==Hs))throw Sc=od,Kg;n.flags|=8192}}function xh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?zr():536870912,n.lanes|=s,Ll|=s)}function Gc(n,s){if(!cn)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function Wn(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,g=0;if(s)for(var E=n.child;E!==null;)u|=E.lanes|E.childLanes,g|=E.subtreeFlags&31457280,g|=E.flags&31457280,E.return=n,E=E.sibling;else for(E=n.child;E!==null;)u|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=n,E=E.sibling;return n.subtreeFlags|=g,n.childLanes=u,s}function t_(n,s,u){var g=s.pendingProps;switch(sd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wn(s),null;case 1:return Wn(s),null;case 3:return u=s.stateNode,g=null,n!==null&&(g=n.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),da(Tr),ht(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(bc(s)?xa(s):n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ts!==null&&(u0(Ts),Ts=null))),Wn(s),null;case 26:return u=s.memoizedState,n===null?(xa(s),u!==null?(Wn(s),Op(s,u)):(Wn(s),s.flags&=-16777217)):u?u!==n.memoizedState?(xa(s),Wn(s),Op(s,u)):(Wn(s),s.flags&=-16777217):(n.memoizedProps!==g&&xa(s),Wn(s),s.flags&=-16777217),null;case 27:De(s),u=pt.current;var E=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==g&&xa(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Wn(s),null}n=kt.current,bc(s)?Qg(s):(n=c2(E,g,u),s.stateNode=n,xa(s))}return Wn(s),null;case 5:if(De(s),u=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==g&&xa(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Wn(s),null}if(n=kt.current,bc(s))Qg(s);else{switch(E=Ih(pt.current),n){case 1:n=E.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:n=E.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":n=E.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":n=E.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof g.is=="string"?E.createElement("select",{is:g.is}):E.createElement("select"),g.multiple?n.multiple=!0:g.size&&(n.size=g.size);break;default:n=typeof g.is=="string"?E.createElement(u,{is:g.is}):E.createElement(u)}}n[En]=s,n[kn]=g;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)n.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=n;e:switch(Kr(n,u,g),u){case"button":case"input":case"select":case"textarea":n=!!g.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&xa(s)}}return Wn(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==g&&xa(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(n=pt.current,bc(s)){if(n=s.stateNode,u=s.memoizedProps,g=null,E=mi,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}n[En]=s,n=!!(n.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||r2(n.nodeValue,u)),n||ko(s)}else n=Ih(n).createTextNode(g),n[En]=s,s.stateNode=n}return Wn(s),null;case 13:if(g=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(E=bc(s),g!==null&&g.dehydrated!==null){if(n===null){if(!E)throw Error(a(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[En]=s}else Ac(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Wn(s),E=!1}else Ts!==null&&(u0(Ts),Ts=null),E=!0;if(!E)return s.flags&256?(ca(s),s):(ca(s),null)}if(ca(s),s.flags&128)return s.lanes=u,s;if(u=g!==null,n=n!==null&&n.memoizedState!==null,u){g=s.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool);var C=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==E&&(g.flags|=2048)}return u!==n&&u&&(s.child.flags|=8192),xh(s,s.updateQueue),Wn(s),null;case 4:return ht(),n===null&&v0(s.stateNode.containerInfo),Wn(s),null;case 10:return da(s.type),Wn(s),null;case 19:if(Gt(Cr),E=s.memoizedState,E===null)return Wn(s),null;if(g=(s.flags&128)!==0,C=E.rendering,C===null)if(g)Gc(E,!1);else{if(ir!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(C=eh(n),C!==null){for(s.flags|=128,Gc(E,!1),n=C.updateQueue,s.updateQueue=n,xh(s,n),s.subtreeFlags=0,n=u,u=s.child;u!==null;)Dp(u,n),u=u.sibling;return Rt(Cr,Cr.current&1|2),s.child}n=n.sibling}E.tail!==null&&ot()>yh&&(s.flags|=128,g=!0,Gc(E,!1),s.lanes=4194304)}else{if(!g)if(n=eh(C),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,xh(s,n),Gc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!C.alternate&&!cn)return Wn(s),null}else 2*ot()-E.renderingStartTime>yh&&u!==536870912&&(s.flags|=128,g=!0,Gc(E,!1),s.lanes=4194304);E.isBackwards?(C.sibling=s.child,s.child=C):(n=E.last,n!==null?n.sibling=C:s.child=C,E.last=C)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=ot(),s.sibling=null,n=Cr.current,Rt(Cr,g?n&1|2:n&1),s):(Wn(s),null);case 22:case 23:return ca(s),cd(),g=s.memoizedState!==null,n!==null?n.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?u&536870912&&!(s.flags&128)&&(Wn(s),s.subtreeFlags&6&&(s.flags|=8192)):Wn(s),u=s.updateQueue,u!==null&&xh(s,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==u&&(s.flags|=2048),n!==null&&Gt(Bo),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),da(Tr),Wn(s),null;case 25:return null}throw Error(a(156,s.tag))}function n_(n,s){switch(sd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return da(Tr),ht(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return De(s),null;case 13:if(ca(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Ac()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Gt(Cr),null;case 4:return ht(),null;case 10:return da(s.type),null;case 22:case 23:return ca(s),cd(),n!==null&&Gt(Bo),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return da(Tr),null;case 25:return null;default:return null}}function Lp(n,s){switch(sd(s),s.tag){case 3:da(Tr),ht();break;case 26:case 27:case 5:De(s);break;case 4:ht();break;case 13:ca(s);break;case 19:Gt(Cr);break;case 10:da(s.type);break;case 22:case 23:ca(s),cd(),n!==null&&Gt(Bo);break;case 24:da(Tr)}}var r_={getCacheForType:function(n){var s=ai(Tr),u=s.data.get(n);return u===void 0&&(u=n(),s.data.set(n,u)),u}},i_=typeof WeakMap=="function"?WeakMap:Map,Kn=0,Dn=null,zt=null,tn=0,Mn=0,Qi=null,ya=!1,Ol=!1,r0=!1,wa=0,ir=0,eo=0,Yo=0,i0=0,xs=0,Ll=0,qc=null,qs=null,s0=!1,a0=0,yh=1/0,wh=null,to=null,Eh=!1,Xo=null,Yc=0,o0=0,l0=null,Xc=0,c0=null;function Wi(){if(Kn&2&&tn!==0)return tn&-tn;if(P.T!==null){var n=Cl;return n!==0?n:x0()}return Ei()}function kp(){xs===0&&(xs=!(tn&536870912)||cn?Vn():536870912);var n=ds.current;return n!==null&&(n.flags|=32),xs}function pi(n,s,u){(n===Dn&&Mn===2||n.cancelPendingCommit!==null)&&(kl(n,0),Ea(n,tn,xs,!1)),en(n,u),(!(Kn&2)||n!==Dn)&&(n===Dn&&(!(Kn&2)&&(Yo|=u),ir===4&&Ea(n,tn,xs,!1)),Ys(n))}function Pp(n,s,u){if(Kn&6)throw Error(a(327));var g=!u&&(s&60)===0&&(s&n.expiredLanes)===0||er(n,s),E=g?o_(n,s):d0(n,s,!0),C=g;do{if(E===0){Ol&&!g&&Ea(n,s,0,!1);break}else if(E===6)Ea(n,s,0,!ya);else{if(u=n.current.alternate,C&&!s_(u)){E=d0(n,s,!1),C=!1;continue}if(E===2){if(C=s,n.errorRecoveryDisabledLanes&C)var M=0;else M=n.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){s=M;e:{var j=n;E=qc;var W=j.current.memoizedState.isDehydrated;if(W&&(kl(j,M).flags|=256),M=d0(j,M,!1),M!==2){if(r0&&!W){j.errorRecoveryDisabledLanes|=C,Yo|=C,E=4;break e}C=qs,qs=E,C!==null&&u0(C)}E=M}if(C=!1,E!==2)continue}}if(E===1){kl(n,0),Ea(n,s,0,!0);break}e:{switch(g=n,E){case 0:case 1:throw Error(a(345));case 4:if((s&4194176)===s){Ea(g,s,xs,!ya);break e}break;case 2:qs=null;break;case 3:case 5:break;default:throw Error(a(329))}if(g.finishedWork=u,g.finishedLanes=s,(s&62914560)===s&&(C=a0+300-ot(),10<C)){if(Ea(g,s,xs,!ya),Fr(g,0)!==0)break e;g.timeoutHandle=a2(Bp.bind(null,g,u,qs,wh,s0,s,xs,Yo,Ll,ya,2,-0,0),C);break e}Bp(g,u,qs,wh,s0,s,xs,Yo,Ll,ya,0,-0,0)}}break}while(!0);Ys(n)}function u0(n){qs===null?qs=n:qs.push.apply(qs,n)}function Bp(n,s,u,g,E,C,M,j,W,oe,be,Le,pe){var _e=s.subtreeFlags;if((_e&8192||(_e&16785408)===16785408)&&(Jc={stylesheets:null,count:0,unsuspend:V_},Sp(s),s=z_(),s!==null)){n.cancelPendingCommit=s(Gp.bind(null,n,u,g,E,M,j,W,1,Le,pe)),Ea(n,C,M,!oe);return}Gp(n,u,g,E,M,j,W,be,Le,pe)}function s_(n){for(var s=n;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var E=u[g],C=E.getSnapshot;E=E.value;try{if(!h(C(),E))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ea(n,s,u,g){s&=~i0,s&=~Yo,n.suspendedLanes|=s,n.pingedLanes&=~s,g&&(n.warmLanes|=s),g=n.expirationTimes;for(var E=s;0<E;){var C=31-Ot(E),M=1<<C;g[C]=-1,E&=~M}u!==0&&Rr(n,u,s)}function vh(){return Kn&6?!0:(Qc(0),!1)}function h0(){if(zt!==null){if(Mn===0)var n=zt.return;else n=zt,fa=zo=null,xd(n),bl=null,Ic=0,n=zt;for(;n!==null;)Lp(n.alternate,n),n=n.return;zt=null}}function kl(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,A_(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),h0(),Dn=n,zt=u=Ja(n.current,null),tn=s,Mn=0,Qi=null,ya=!1,Ol=er(n,s),r0=!1,Ll=xs=i0=Yo=eo=ir=0,qs=qc=null,s0=!1,s&8&&(s|=s&32);var g=n.entangledLanes;if(g!==0)for(n=n.entanglements,g&=s;0<g;){var E=31-Ot(g),C=1<<E;s|=n[E],g&=~C}return wa=s,qu(),u}function jp(n,s){jt=null,P.H=Gs,s===Tc?(s=Jg(),Mn=3):s===Kg?(s=Jg(),Mn=4):Mn=s===Zm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Qi=s,zt===null&&(ir=1,hh(n,us(s,n.current)))}function Up(){var n=P.H;return P.H=Gs,n===null?Gs:n}function Vp(){var n=P.A;return P.A=r_,n}function f0(){ir=4,ya||(tn&4194176)!==tn&&ds.current!==null||(Ol=!0),!(eo&134217727)&&!(Yo&134217727)||Dn===null||Ea(Dn,tn,xs,!1)}function d0(n,s,u){var g=Kn;Kn|=2;var E=Up(),C=Vp();(Dn!==n||tn!==s)&&(wh=null,kl(n,s)),s=!1;var M=ir;e:do try{if(Mn!==0&&zt!==null){var j=zt,W=Qi;switch(Mn){case 8:h0(),M=6;break e;case 3:case 2:case 6:ds.current===null&&(s=!0);var oe=Mn;if(Mn=0,Qi=null,Pl(n,j,W,oe),u&&Ol){M=0;break e}break;default:oe=Mn,Mn=0,Qi=null,Pl(n,j,W,oe)}}a_(),M=ir;break}catch(be){jp(n,be)}while(!0);return s&&n.shellSuspendCounter++,fa=zo=null,Kn=g,P.H=E,P.A=C,zt===null&&(Dn=null,tn=0,qu()),M}function a_(){for(;zt!==null;)Fp(zt)}function o_(n,s){var u=Kn;Kn|=2;var g=Up(),E=Vp();Dn!==n||tn!==s?(wh=null,yh=ot()+500,kl(n,s)):Ol=er(n,s);e:do try{if(Mn!==0&&zt!==null){s=zt;var C=Qi;t:switch(Mn){case 1:Mn=0,Qi=null,Pl(n,s,C,1);break;case 2:if(Zg(C)){Mn=0,Qi=null,zp(s);break}s=function(){Mn===2&&Dn===n&&(Mn=7),Ys(n)},C.then(s,s);break e;case 3:Mn=7;break e;case 4:Mn=5;break e;case 7:Zg(C)?(Mn=0,Qi=null,zp(s)):(Mn=0,Qi=null,Pl(n,s,C,7));break;case 5:var M=null;switch(zt.tag){case 26:M=zt.memoizedState;case 5:case 27:var j=zt;if(!M||x2(M)){Mn=0,Qi=null;var W=j.sibling;if(W!==null)zt=W;else{var oe=j.return;oe!==null?(zt=oe,_h(oe)):zt=null}break t}}Mn=0,Qi=null,Pl(n,s,C,5);break;case 6:Mn=0,Qi=null,Pl(n,s,C,6);break;case 8:h0(),ir=6;break e;default:throw Error(a(462))}}l_();break}catch(be){jp(n,be)}while(!0);return fa=zo=null,P.H=g,P.A=E,Kn=u,zt!==null?0:(Dn=null,tn=0,qu(),ir)}function l_(){for(;zt!==null&&!Jn();)Fp(zt)}function Fp(n){var s=cp(n.alternate,n,wa);n.memoizedProps=n.pendingProps,s===null?_h(n):zt=s}function zp(n){var s=n,u=s.alternate;switch(s.tag){case 15:case 0:s=rp(u,s,s.pendingProps,s.type,void 0,tn);break;case 11:s=rp(u,s,s.pendingProps,s.type.render,s.ref,tn);break;case 5:xd(s);default:Lp(u,s),s=zt=Dp(s,wa),s=cp(u,s,wa)}n.memoizedProps=n.pendingProps,s===null?_h(n):zt=s}function Pl(n,s,u,g){fa=zo=null,xd(s),bl=null,Ic=0;var E=s.return;try{if(Kv(n,E,s,u,tn)){ir=1,hh(n,us(u,n.current)),zt=null;return}}catch(C){if(E!==null)throw zt=E,C;ir=1,hh(n,us(u,n.current)),zt=null;return}s.flags&32768?(cn||g===1?n=!0:Ol||tn&536870912?n=!1:(ya=n=!0,(g===2||g===3||g===6)&&(g=ds.current,g!==null&&g.tag===13&&(g.flags|=16384))),Hp(s,n)):_h(s)}function _h(n){var s=n;do{if(s.flags&32768){Hp(s,ya);return}n=s.return;var u=t_(s.alternate,s,wa);if(u!==null){zt=u;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=n}while(s!==null);ir===0&&(ir=5)}function Hp(n,s){do{var u=n_(n.alternate,n);if(u!==null){u.flags&=32767,zt=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(n=n.sibling,n!==null)){zt=n;return}zt=n=u}while(n!==null);ir=6,zt=null}function Gp(n,s,u,g,E,C,M,j,W,oe){var be=P.T,Le=qe.p;try{qe.p=2,P.T=null,c_(n,s,u,g,Le,E,C,M,j,W,oe)}finally{P.T=be,qe.p=Le}}function c_(n,s,u,g,E,C,M,j){do Bl();while(Xo!==null);if(Kn&6)throw Error(a(327));var W=n.finishedWork;if(g=n.finishedLanes,W===null)return null;if(n.finishedWork=null,n.finishedLanes=0,W===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var oe=W.lanes|W.childLanes;if(oe|=nd,Pa(n,g,oe,C,M,j),n===Dn&&(zt=Dn=null,tn=0),!(W.subtreeFlags&10256)&&!(W.flags&10256)||Eh||(Eh=!0,o0=oe,l0=u,d_(gn,function(){return Bl(),null})),u=(W.flags&15990)!==0,W.subtreeFlags&15990||u?(u=P.T,P.T=null,C=qe.p,qe.p=2,M=Kn,Kn|=4,$v(n,W),Ap(W,n),L(C0,n.containerInfo),Lh=!!A0,C0=A0=null,n.current=W,Ep(n,W.alternate,W),Ln(),Kn=M,qe.p=C,P.T=u):n.current=W,Eh?(Eh=!1,Xo=n,Yc=g):qp(n,oe),oe=n.pendingLanes,oe===0&&(to=null),Cn(W.stateNode),Ys(n),s!==null)for(E=n.onRecoverableError,W=0;W<s.length;W++)oe=s[W],E(oe.value,{componentStack:oe.stack});return Yc&3&&Bl(),oe=n.pendingLanes,g&4194218&&oe&42?n===c0?Xc++:(Xc=0,c0=n):Xc=0,Qc(0),null}function qp(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Rc(s)))}function Bl(){if(Xo!==null){var n=Xo,s=o0;o0=0;var u=cr(Yc),g=P.T,E=qe.p;try{if(qe.p=32>u?32:u,P.T=null,Xo===null)var C=!1;else{u=l0,l0=null;var M=Xo,j=Yc;if(Xo=null,Yc=0,Kn&6)throw Error(a(331));var W=Kn;if(Kn|=4,Np(M.current),Tp(M,M.current,j,u),Kn=W,Qc(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(hn,M)}catch{}C=!0}return C}finally{qe.p=E,P.T=g,qp(n,s)}}return!1}function Yp(n,s,u){s=us(u,s),s=Dd(n.stateNode,s,2),n=Wa(n,s,2),n!==null&&(en(n,2),Ys(n))}function In(n,s,u){if(n.tag===3)Yp(n,n,u);else for(;s!==null;){if(s.tag===3){Yp(s,n,u);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(to===null||!to.has(g))){n=us(u,n),u=Wm(2),g=Wa(s,u,2),g!==null&&(Km(u,g,s,n),en(g,2),Ys(g));break}}s=s.return}}function g0(n,s,u){var g=n.pingCache;if(g===null){g=n.pingCache=new i_;var E=new Set;g.set(s,E)}else E=g.get(s),E===void 0&&(E=new Set,g.set(s,E));E.has(u)||(r0=!0,E.add(u),n=u_.bind(null,n,s,u),s.then(n,n))}function u_(n,s,u){var g=n.pingCache;g!==null&&g.delete(s),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,Dn===n&&(tn&u)===u&&(ir===4||ir===3&&(tn&62914560)===tn&&300>ot()-a0?!(Kn&2)&&kl(n,0):i0|=u,Ll===tn&&(Ll=0)),Ys(n)}function Xp(n,s){s===0&&(s=zr()),n=Fa(n,s),n!==null&&(en(n,s),Ys(n))}function h_(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),Xp(n,u)}function f_(n,s){var u=0;switch(n.tag){case 13:var g=n.stateNode,E=n.memoizedState;E!==null&&(u=E.retryLane);break;case 19:g=n.stateNode;break;case 22:g=n.stateNode._retryCache;break;default:throw Error(a(314))}g!==null&&g.delete(s),Xp(n,u)}function d_(n,s){return Je(n,s)}var bh=null,jl=null,m0=!1,Ah=!1,p0=!1,Qo=0;function Ys(n){n!==jl&&n.next===null&&(jl===null?bh=jl=n:jl=jl.next=n),Ah=!0,m0||(m0=!0,m_(g_))}function Qc(n,s){if(!p0&&Ah){p0=!0;do for(var u=!1,g=bh;g!==null;){if(n!==0){var E=g.pendingLanes;if(E===0)var C=0;else{var M=g.suspendedLanes,j=g.pingedLanes;C=(1<<31-Ot(42|n)+1)-1,C&=E&~(M&~j),C=C&201326677?C&201326677|1:C?C|2:0}C!==0&&(u=!0,Kp(g,C))}else C=tn,C=Fr(g,g===Dn?C:0),!(C&3)||er(g,C)||(u=!0,Kp(g,C));g=g.next}while(u);p0=!1}}function g_(){Ah=m0=!1;var n=0;Qo!==0&&(b_()&&(n=Qo),Qo=0);for(var s=ot(),u=null,g=bh;g!==null;){var E=g.next,C=Qp(g,s);C===0?(g.next=null,u===null?bh=E:u.next=E,E===null&&(jl=u)):(u=g,(n!==0||C&3)&&(Ah=!0)),g=E}Qc(n)}function Qp(n,s){for(var u=n.suspendedLanes,g=n.pingedLanes,E=n.expirationTimes,C=n.pendingLanes&-62914561;0<C;){var M=31-Ot(C),j=1<<M,W=E[M];W===-1?(!(j&u)||j&g)&&(E[M]=ts(j,s)):W<=s&&(n.expiredLanes|=j),C&=~j}if(s=Dn,u=tn,u=Fr(n,n===s?u:0),g=n.callbackNode,u===0||n===s&&Mn===2||n.cancelPendingCommit!==null)return g!==null&&g!==null&&He(g),n.callbackNode=null,n.callbackPriority=0;if(!(u&3)||er(n,u)){if(s=u&-u,s===n.callbackPriority)return s;switch(g!==null&&He(g),cr(u)){case 2:case 8:u=sn;break;case 32:u=gn;break;case 268435456:u=Pi;break;default:u=gn}return g=Wp.bind(null,n),u=Je(u,g),n.callbackPriority=s,n.callbackNode=u,s}return g!==null&&g!==null&&He(g),n.callbackPriority=2,n.callbackNode=null,2}function Wp(n,s){var u=n.callbackNode;if(Bl()&&n.callbackNode!==u)return null;var g=tn;return g=Fr(n,n===Dn?g:0),g===0?null:(Pp(n,g,s),Qp(n,ot()),n.callbackNode!=null&&n.callbackNode===u?Wp.bind(null,n):null)}function Kp(n,s){if(Bl())return null;Pp(n,s,!0)}function m_(n){C_(function(){Kn&6?Je(Pt,n):n()})}function x0(){return Qo===0&&(Qo=Vn()),Qo}function Zp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ai(""+n)}function $p(n,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,n.id&&u.setAttribute("form",n.id),s.parentNode.insertBefore(u,s),n=new FormData(n),u.parentNode.removeChild(u),n}function p_(n,s,u,g,E){if(s==="submit"&&u&&u.stateNode===E){var C=Zp((E[kn]||null).action),M=g.submitter;M&&(s=(s=M[kn]||null)?Zp(s.formAction):M.getAttribute("formAction"),s!==null&&(C=s,M=null));var j=new ls("action","action",null,g,E);n.push({event:j,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Qo!==0){var W=M?$p(E,M):new FormData(E);Td(u,{pending:!0,data:W,method:E.method,action:C},null,W)}}else typeof C=="function"&&(j.preventDefault(),W=M?$p(E,M):new FormData(E),Td(u,{pending:!0,data:W,method:E.method,action:C},C,W))},currentTarget:E}]})}}for(var y0=0;y0<Gu.length;y0++){var w0=Gu[y0],x_=w0.toLowerCase(),y_=w0[0].toUpperCase()+w0.slice(1);qi(x_,"on"+y_)}qi(Yr,"onAnimationEnd"),qi(Di,"onAnimationIteration"),qi(Xr,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(yn,"onTransitionRun"),qi(Ar,"onTransitionStart"),qi(gi,"onTransitionCancel"),qi(sa,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),Et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Et("onBeforeInput",["compositionend","keypress","textInput","paste"]),Et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function Jp(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var g=n[u],E=g.event;g=g.listeners;e:{var C=void 0;if(s)for(var M=g.length-1;0<=M;M--){var j=g[M],W=j.instance,oe=j.currentTarget;if(j=j.listener,W!==C&&E.isPropagationStopped())break e;C=j,E.currentTarget=oe;try{C(E)}catch(be){uh(be)}E.currentTarget=null,C=W}else for(M=0;M<g.length;M++){if(j=g[M],W=j.instance,oe=j.currentTarget,j=j.listener,W!==C&&E.isPropagationStopped())break e;C=j,E.currentTarget=oe;try{C(E)}catch(be){uh(be)}E.currentTarget=null,C=W}}}}function $t(n,s){var u=s[ni];u===void 0&&(u=s[ni]=new Set);var g=n+"__bubble";u.has(g)||(e2(s,n,2,!1),u.add(g))}function E0(n,s,u){var g=0;s&&(g|=4),e2(u,n,g,s)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function v0(n){if(!n[Ch]){n[Ch]=!0,_t.forEach(function(u){u!=="selectionchange"&&(w_.has(u)||E0(u,!1,n),E0(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ch]||(s[Ch]=!0,E0("selectionchange",!1,s))}}function e2(n,s,u,g){switch(b2(s)){case 2:var E=q_;break;case 8:E=Y_;break;default:E=L0}u=E.bind(null,s,u,n),E=void 0,!gt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(E=!0),g?E!==void 0?n.addEventListener(s,u,{capture:!0,passive:E}):n.addEventListener(s,u,!0):E!==void 0?n.addEventListener(s,u,{passive:E}):n.addEventListener(s,u,!1)}function _0(n,s,u,g,E){var C=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var j=g.stateNode.containerInfo;if(j===E||j.nodeType===8&&j.parentNode===E)break;if(M===4)for(M=g.return;M!==null;){var W=M.tag;if((W===3||W===4)&&(W=M.stateNode.containerInfo,W===E||W.nodeType===8&&W.parentNode===E))return;M=M.return}for(;j!==null;){if(M=mn(j),M===null)return;if(W=M.tag,W===5||W===6||W===26||W===27){g=C=M;continue e}j=j.parentNode}}g=g.return}ft(function(){var oe=C,be=Ps(u),Le=[];e:{var pe=aa.get(n);if(pe!==void 0){var _e=ls,st=n;switch(n){case"keypress":if(os(u)===0)break e;case"keydown":case"keyup":_e=Vs;break;case"focusin":st="focus",_e=As;break;case"focusout":st="blur",_e=As;break;case"beforeblur":case"afterblur":_e=As;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Ti;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=ln;break;case Yr:case Di:case Xr:_e=ja;break;case sa:_e=ml;break;case"scroll":case"scrollend":_e=br;break;case"wheel":_e=Ii;break;case"copy":case"cut":case"paste":_e=bt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Fs;break;case"toggle":case"beforetoggle":_e=pl}var St=(s&4)!==0,sr=!St&&(n==="scroll"||n==="scrollend"),le=St?pe!==null?pe+"Capture":null:pe;St=[];for(var se=oe,ge;se!==null;){var Te=se;if(ge=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ge===null||le===null||(Te=ta(se,le),Te!=null&&St.push(Kc(se,Te,ge))),sr)break;se=se.return}0<St.length&&(pe=new _e(pe,st,null,u,be),Le.push({event:pe,listeners:St}))}}if(!(s&7)){e:{if(pe=n==="mouseover"||n==="pointerover",_e=n==="mouseout"||n==="pointerout",pe&&u!==Gr&&(st=u.relatedTarget||u.fromElement)&&(mn(st)||st[Nn]))break e;if((_e||pe)&&(pe=be.window===be?be:(pe=be.ownerDocument)?pe.defaultView||pe.parentWindow:window,_e?(st=u.relatedTarget||u.toElement,_e=oe,st=st?mn(st):null,st!==null&&(sr=Xe(st),St=st.tag,st!==sr||St!==5&&St!==27&&St!==6)&&(st=null)):(_e=null,st=oe),_e!==st)){if(St=Ti,Te="onMouseLeave",le="onMouseEnter",se="mouse",(n==="pointerout"||n==="pointerover")&&(St=Fs,Te="onPointerLeave",le="onPointerEnter",se="pointer"),sr=_e==null?pe:Z(_e),ge=st==null?pe:Z(st),pe=new St(Te,se+"leave",_e,u,be),pe.target=sr,pe.relatedTarget=ge,Te=null,mn(be)===oe&&(St=new St(le,se+"enter",st,u,be),St.target=ge,St.relatedTarget=sr,Te=St),sr=Te,_e&&st)t:{for(St=_e,le=st,se=0,ge=St;ge;ge=Ul(ge))se++;for(ge=0,Te=le;Te;Te=Ul(Te))ge++;for(;0<se-ge;)St=Ul(St),se--;for(;0<ge-se;)le=Ul(le),ge--;for(;se--;){if(St===le||le!==null&&St===le.alternate)break t;St=Ul(St),le=Ul(le)}St=null}else St=null;_e!==null&&t2(Le,pe,_e,St,!1),st!==null&&sr!==null&&t2(Le,sr,st,St,!0)}}e:{if(pe=oe?Z(oe):window,_e=pe.nodeName&&pe.nodeName.toLowerCase(),_e==="select"||_e==="input"&&pe.type==="file")var rt=Hu;else if(Hn(pe))if(vc)rt=o;else{rt=O;var Ut=yl}else _e=pe.nodeName,!_e||_e.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?oe&&xn(oe.elementType)&&(rt=Hu):rt=r;if(rt&&(rt=rt(n,oe))){nr(Le,rt,u,be);break e}Ut&&Ut(n,pe,oe),n==="focusout"&&oe&&pe.type==="number"&&oe.memoizedProps.value!=null&&G(pe,"number",pe.value)}switch(Ut=oe?Z(oe):window,n){case"focusin":(Hn(Ut)||Ut.contentEditable==="true")&&(Y=Ut,ne=oe,re=null);break;case"focusout":re=ne=Y=null;break;case"mousedown":he=!0;break;case"contextmenu":case"mouseup":case"dragend":he=!1,we(Le,u,be);break;case"selectionchange":if(B)break;case"keydown":case"keyup":we(Le,u,be)}var ut;if(Ni)e:{switch(n){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else Yt?ye(n,u)&&(yt="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(yt="onCompositionStart");yt&&(D&&u.locale!=="ko"&&(Yt||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Yt&&(ut=zi()):(is=be,ss="value"in is?is.value:is.textContent,Yt=!0)),Ut=Th(oe,yt),0<Ut.length&&(yt=new js(yt,n,null,u,be),Le.push({event:yt,listeners:Ut}),ut?yt.data=ut:(ut=Ke(u),ut!==null&&(yt.data=ut)))),(ut=I?jn(n,u):Xt(n,u))&&(yt=Th(oe,"onBeforeInput"),0<yt.length&&(Ut=new js("onBeforeInput","beforeinput",null,u,be),Le.push({event:Ut,listeners:yt}),Ut.data=ut)),p_(Le,n,oe,u,be)}Jp(Le,s)})}function Kc(n,s,u){return{instance:n,listener:s,currentTarget:u}}function Th(n,s){for(var u=s+"Capture",g=[];n!==null;){var E=n,C=E.stateNode;E=E.tag,E!==5&&E!==26&&E!==27||C===null||(E=ta(n,u),E!=null&&g.unshift(Kc(n,E,C)),E=ta(n,s),E!=null&&g.push(Kc(n,E,C))),n=n.return}return g}function Ul(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function t2(n,s,u,g,E){for(var C=s._reactName,M=[];u!==null&&u!==g;){var j=u,W=j.alternate,oe=j.stateNode;if(j=j.tag,W!==null&&W===g)break;j!==5&&j!==26&&j!==27||oe===null||(W=oe,E?(oe=ta(u,C),oe!=null&&M.unshift(Kc(u,oe,W))):E||(oe=ta(u,C),oe!=null&&M.push(Kc(u,oe,W)))),u=u.return}M.length!==0&&n.push({event:s,listeners:M})}var E_=/\r\n?/g,v_=/\u0000|\uFFFD/g;function n2(n){return(typeof n=="string"?n:""+n).replace(E_,`
`).replace(v_,"")}function r2(n,s){return s=n2(s),n2(n)===s}function Sh(){}function An(n,s,u,g,E,C){switch(u){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||bi(n,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&bi(n,""+g);break;case"className":rs(n,"class",g);break;case"tabIndex":rs(n,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":rs(n,u,g);break;case"style":lt(n,g,C);break;case"data":if(s!=="object"){rs(n,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||u!=="href")){n.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=Ai(""+g),n.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(u==="formAction"?(s!=="input"&&An(n,s,"name",E.name,E,null),An(n,s,"formEncType",E.formEncType,E,null),An(n,s,"formMethod",E.formMethod,E,null),An(n,s,"formTarget",E.formTarget,E,null)):(An(n,s,"encType",E.encType,E,null),An(n,s,"method",E.method,E,null),An(n,s,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=Ai(""+g),n.setAttribute(u,g);break;case"onClick":g!=null&&(n.onclick=Sh);break;case"onScroll":g!=null&&$t("scroll",n);break;case"onScrollEnd":g!=null&&$t("scrollend",n);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(u=g.__html,u!=null){if(E.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"multiple":n.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":n.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){n.removeAttribute("xlink:href");break}u=Ai(""+g),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""+g):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":g===!0?n.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,g):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?n.setAttribute(u,g):n.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?n.removeAttribute(u):n.setAttribute(u,g);break;case"popover":$t("beforetoggle",n),$t("toggle",n),ns(n,"popover",g);break;case"xlinkActuate":ri(n,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":ri(n,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":ri(n,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":ri(n,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":ri(n,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":ri(n,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":ri(n,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":ri(n,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":ri(n,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ns(n,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=hl.get(u)||u,ns(n,u,g))}}function b0(n,s,u,g,E,C){switch(u){case"style":lt(n,g,C);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(u=g.__html,u!=null){if(E.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"children":typeof g=="string"?bi(n,g):(typeof g=="number"||typeof g=="bigint")&&bi(n,""+g);break;case"onScroll":g!=null&&$t("scroll",n);break;case"onScrollEnd":g!=null&&$t("scrollend",n);break;case"onClick":g!=null&&(n.onclick=Sh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!me.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(E=u.endsWith("Capture"),s=u.slice(2,E?u.length-7:void 0),C=n[kn]||null,C=C!=null?C[u]:null,typeof C=="function"&&n.removeEventListener(s,C,E),typeof g=="function")){typeof C!="function"&&C!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(s,g,E);break e}u in n?n[u]=g:g===!0?n.setAttribute(u,""):ns(n,u,g)}}}function Kr(n,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",n),$t("load",n);var g=!1,E=!1,C;for(C in u)if(u.hasOwnProperty(C)){var M=u[C];if(M!=null)switch(C){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:An(n,s,C,M,u,null)}}E&&An(n,s,"srcSet",u.srcSet,u,null),g&&An(n,s,"src",u.src,u,null);return;case"input":$t("invalid",n);var j=C=M=E=null,W=null,oe=null;for(g in u)if(u.hasOwnProperty(g)){var be=u[g];if(be!=null)switch(g){case"name":E=be;break;case"type":M=be;break;case"checked":W=be;break;case"defaultChecked":oe=be;break;case"value":C=be;break;case"defaultValue":j=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(a(137,s));break;default:An(n,s,g,be,u,null)}}ue(n,C,j,W,oe,M,E,!1),pn(n);return;case"select":$t("invalid",n),g=M=C=null;for(E in u)if(u.hasOwnProperty(E)&&(j=u[E],j!=null))switch(E){case"value":C=j;break;case"defaultValue":M=j;break;case"multiple":g=j;default:An(n,s,E,j,u,null)}s=C,u=M,n.multiple=!!g,s!=null?Qe(n,!!g,s,!1):u!=null&&Qe(n,!!g,u,!0);return;case"textarea":$t("invalid",n),C=E=g=null;for(M in u)if(u.hasOwnProperty(M)&&(j=u[M],j!=null))switch(M){case"value":g=j;break;case"defaultValue":E=j;break;case"children":C=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(91));break;default:An(n,s,M,j,u,null)}ur(n,g,E,C),pn(n);return;case"option":for(W in u)if(u.hasOwnProperty(W)&&(g=u[W],g!=null))switch(W){case"selected":n.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:An(n,s,W,g,u,null)}return;case"dialog":$t("cancel",n),$t("close",n);break;case"iframe":case"object":$t("load",n);break;case"video":case"audio":for(g=0;g<Wc.length;g++)$t(Wc[g],n);break;case"image":$t("error",n),$t("load",n);break;case"details":$t("toggle",n);break;case"embed":case"source":case"link":$t("error",n),$t("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in u)if(u.hasOwnProperty(oe)&&(g=u[oe],g!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:An(n,s,oe,g,u,null)}return;default:if(xn(s)){for(be in u)u.hasOwnProperty(be)&&(g=u[be],g!==void 0&&b0(n,s,be,g,u,void 0));return}}for(j in u)u.hasOwnProperty(j)&&(g=u[j],g!=null&&An(n,s,j,g,u,null))}function __(n,s,u,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,C=null,M=null,j=null,W=null,oe=null,be=null;for(_e in u){var Le=u[_e];if(u.hasOwnProperty(_e)&&Le!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":W=Le;default:g.hasOwnProperty(_e)||An(n,s,_e,null,g,Le)}}for(var pe in g){var _e=g[pe];if(Le=u[pe],g.hasOwnProperty(pe)&&(_e!=null||Le!=null))switch(pe){case"type":C=_e;break;case"name":E=_e;break;case"checked":oe=_e;break;case"defaultChecked":be=_e;break;case"value":M=_e;break;case"defaultValue":j=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(a(137,s));break;default:_e!==Le&&An(n,s,pe,_e,g,Le)}}Pn(n,M,j,W,oe,be,C,E);return;case"select":_e=M=j=pe=null;for(C in u)if(W=u[C],u.hasOwnProperty(C)&&W!=null)switch(C){case"value":break;case"multiple":_e=W;default:g.hasOwnProperty(C)||An(n,s,C,null,g,W)}for(E in g)if(C=g[E],W=u[E],g.hasOwnProperty(E)&&(C!=null||W!=null))switch(E){case"value":pe=C;break;case"defaultValue":j=C;break;case"multiple":M=C;default:C!==W&&An(n,s,E,C,g,W)}s=j,u=M,g=_e,pe!=null?Qe(n,!!u,pe,!1):!!g!=!!u&&(s!=null?Qe(n,!!u,s,!0):Qe(n,!!u,u?[]:"",!1));return;case"textarea":_e=pe=null;for(j in u)if(E=u[j],u.hasOwnProperty(j)&&E!=null&&!g.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:An(n,s,j,null,g,E)}for(M in g)if(E=g[M],C=u[M],g.hasOwnProperty(M)&&(E!=null||C!=null))switch(M){case"value":pe=E;break;case"defaultValue":_e=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==C&&An(n,s,M,E,g,C)}Rn(n,pe,_e);return;case"option":for(var st in u)if(pe=u[st],u.hasOwnProperty(st)&&pe!=null&&!g.hasOwnProperty(st))switch(st){case"selected":n.selected=!1;break;default:An(n,s,st,null,g,pe)}for(W in g)if(pe=g[W],_e=u[W],g.hasOwnProperty(W)&&pe!==_e&&(pe!=null||_e!=null))switch(W){case"selected":n.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:An(n,s,W,pe,g,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var St in u)pe=u[St],u.hasOwnProperty(St)&&pe!=null&&!g.hasOwnProperty(St)&&An(n,s,St,null,g,pe);for(oe in g)if(pe=g[oe],_e=u[oe],g.hasOwnProperty(oe)&&pe!==_e&&(pe!=null||_e!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(137,s));break;default:An(n,s,oe,pe,g,_e)}return;default:if(xn(s)){for(var sr in u)pe=u[sr],u.hasOwnProperty(sr)&&pe!==void 0&&!g.hasOwnProperty(sr)&&b0(n,s,sr,void 0,g,pe);for(be in g)pe=g[be],_e=u[be],!g.hasOwnProperty(be)||pe===_e||pe===void 0&&_e===void 0||b0(n,s,be,pe,g,_e);return}}for(var le in u)pe=u[le],u.hasOwnProperty(le)&&pe!=null&&!g.hasOwnProperty(le)&&An(n,s,le,null,g,pe);for(Le in g)pe=g[Le],_e=u[Le],!g.hasOwnProperty(Le)||pe===_e||pe==null&&_e==null||An(n,s,Le,pe,g,_e)}var A0=null,C0=null;function Ih(n){return n.nodeType===9?n:n.ownerDocument}function i2(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s2(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function T0(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var S0=null;function b_(){var n=window.event;return n&&n.type==="popstate"?n===S0?!1:(S0=n,!0):(S0=null,!1)}var a2=typeof setTimeout=="function"?setTimeout:void 0,A_=typeof clearTimeout=="function"?clearTimeout:void 0,o2=typeof Promise=="function"?Promise:void 0,C_=typeof queueMicrotask=="function"?queueMicrotask:typeof o2<"u"?function(n){return o2.resolve(null).then(n).catch(T_)}:a2;function T_(n){setTimeout(function(){throw n})}function I0(n,s){var u=s,g=0;do{var E=u.nextSibling;if(n.removeChild(u),E&&E.nodeType===8)if(u=E.data,u==="/$"){if(g===0){n.removeChild(E),iu(s);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=E}while(u);iu(s)}function N0(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":N0(u),ks(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function S_(n,s,u,g){for(;n.nodeType===1;){var E=u;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(g){if(!n[vi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(C=n.getAttribute("rel"),C==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(C!==E.rel||n.getAttribute("href")!==(E.href==null?null:E.href)||n.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||n.getAttribute("title")!==(E.title==null?null:E.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(C=n.getAttribute("src"),(C!==(E.src==null?null:E.src)||n.getAttribute("type")!==(E.type==null?null:E.type)||n.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&C&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var C=E.name==null?null:""+E.name;if(E.type==="hidden"&&n.getAttribute("name")===C)return n}else return n;if(n=Is(n.nextSibling),n===null)break}return null}function I_(n,s,u){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=Is(n.nextSibling),n===null))return null;return n}function Is(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}function l2(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}function c2(n,s,u){switch(s=Ih(u),n){case"html":if(n=s.documentElement,!n)throw Error(a(452));return n;case"head":if(n=s.head,!n)throw Error(a(453));return n;case"body":if(n=s.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}var ys=new Map,u2=new Set;function Nh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var va=qe.d;qe.d={f:N_,r:R_,D:D_,C:M_,L:O_,m:L_,X:P_,S:k_,M:B_};function N_(){var n=va.f(),s=vh();return n||s}function R_(n){var s=vn(n);s!==null&&s.tag===5&&s.type==="form"?Bm(s):va.r(n)}var Vl=typeof document>"u"?null:document;function h2(n,s,u){var g=Vl;if(g&&typeof s=="string"&&s){var E=wt(s);E='link[rel="'+n+'"][href="'+E+'"]',typeof u=="string"&&(E+='[crossorigin="'+u+'"]'),u2.has(E)||(u2.add(E),n={rel:n,crossOrigin:u,href:s},g.querySelector(E)===null&&(s=g.createElement("link"),Kr(s,"link",n),We(s),g.head.appendChild(s)))}}function D_(n){va.D(n),h2("dns-prefetch",n,null)}function M_(n,s){va.C(n,s),h2("preconnect",n,s)}function O_(n,s,u){va.L(n,s,u);var g=Vl;if(g&&n&&s){var E='link[rel="preload"][as="'+wt(s)+'"]';s==="image"&&u&&u.imageSrcSet?(E+='[imagesrcset="'+wt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(E+='[imagesizes="'+wt(u.imageSizes)+'"]')):E+='[href="'+wt(n)+'"]';var C=E;switch(s){case"style":C=Fl(n);break;case"script":C=zl(n)}ys.has(C)||(n=z({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:n,as:s},u),ys.set(C,n),g.querySelector(E)!==null||s==="style"&&g.querySelector(Zc(C))||s==="script"&&g.querySelector($c(C))||(s=g.createElement("link"),Kr(s,"link",n),We(s),g.head.appendChild(s)))}}function L_(n,s){va.m(n,s);var u=Vl;if(u&&n){var g=s&&typeof s.as=="string"?s.as:"script",E='link[rel="modulepreload"][as="'+wt(g)+'"][href="'+wt(n)+'"]',C=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=zl(n)}if(!ys.has(C)&&(n=z({rel:"modulepreload",href:n},s),ys.set(C,n),u.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($c(C)))return}g=u.createElement("link"),Kr(g,"link",n),We(g),u.head.appendChild(g)}}}function k_(n,s,u){va.S(n,s,u);var g=Vl;if(g&&n){var E=Ee(g).hoistableStyles,C=Fl(n);s=s||"default";var M=E.get(C);if(!M){var j={loading:0,preload:null};if(M=g.querySelector(Zc(C)))j.loading=5;else{n=z({rel:"stylesheet",href:n,"data-precedence":s},u),(u=ys.get(C))&&R0(n,u);var W=M=g.createElement("link");We(W),Kr(W,"link",n),W._p=new Promise(function(oe,be){W.onload=oe,W.onerror=be}),W.addEventListener("load",function(){j.loading|=1}),W.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Rh(M,s,g)}M={type:"stylesheet",instance:M,count:1,state:j},E.set(C,M)}}}function P_(n,s){va.X(n,s);var u=Vl;if(u&&n){var g=Ee(u).hoistableScripts,E=zl(n),C=g.get(E);C||(C=u.querySelector($c(E)),C||(n=z({src:n,async:!0},s),(s=ys.get(E))&&D0(n,s),C=u.createElement("script"),We(C),Kr(C,"link",n),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(E,C))}}function B_(n,s){va.M(n,s);var u=Vl;if(u&&n){var g=Ee(u).hoistableScripts,E=zl(n),C=g.get(E);C||(C=u.querySelector($c(E)),C||(n=z({src:n,async:!0,type:"module"},s),(s=ys.get(E))&&D0(n,s),C=u.createElement("script"),We(C),Kr(C,"link",n),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(E,C))}}function f2(n,s,u,g){var E=(E=pt.current)?Nh(E):null;if(!E)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Fl(u.href),u=Ee(E).hoistableStyles,g=u.get(s),g||(g={type:"style",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=Fl(u.href);var C=Ee(E).hoistableStyles,M=C.get(n);if(M||(E=E.ownerDocument||E,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(n,M),(C=E.querySelector(Zc(n)))&&!C._p&&(M.instance=C,M.state.loading=5),ys.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ys.set(n,u),C||j_(E,n,u,M.state))),s&&g===null)throw Error(a(528,""));return M}if(s&&g!==null)throw Error(a(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=zl(u),u=Ee(E).hoistableScripts,g=u.get(s),g||(g={type:"script",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Fl(n){return'href="'+wt(n)+'"'}function Zc(n){return'link[rel="stylesheet"]['+n+"]"}function d2(n){return z({},n,{"data-precedence":n.precedence,precedence:null})}function j_(n,s,u,g){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=n.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),Kr(s,"link",u),We(s),n.head.appendChild(s))}function zl(n){return'[src="'+wt(n)+'"]'}function $c(n){return"script[async]"+n}function g2(n,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var g=n.querySelector('style[data-href~="'+wt(u.href)+'"]');if(g)return s.instance=g,We(g),g;var E=z({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(n.ownerDocument||n).createElement("style"),We(g),Kr(g,"style",E),Rh(g,u.precedence,n),s.instance=g;case"stylesheet":E=Fl(u.href);var C=n.querySelector(Zc(E));if(C)return s.state.loading|=4,s.instance=C,We(C),C;g=d2(u),(E=ys.get(E))&&R0(g,E),C=(n.ownerDocument||n).createElement("link"),We(C);var M=C;return M._p=new Promise(function(j,W){M.onload=j,M.onerror=W}),Kr(C,"link",g),s.state.loading|=4,Rh(C,u.precedence,n),s.instance=C;case"script":return C=zl(u.src),(E=n.querySelector($c(C)))?(s.instance=E,We(E),E):(g=u,(E=ys.get(C))&&(g=z({},u),D0(g,E)),n=n.ownerDocument||n,E=n.createElement("script"),We(E),Kr(E,"link",g),n.head.appendChild(E),s.instance=E);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&!(s.state.loading&4)&&(g=s.instance,s.state.loading|=4,Rh(g,u.precedence,n));return s.instance}function Rh(n,s,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,C=E,M=0;M<g.length;M++){var j=g[M];if(j.dataset.precedence===s)C=j;else if(C!==E)break}C?C.parentNode.insertBefore(n,C.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(n,s.firstChild))}function R0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function D0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Dh=null;function m2(n,s,u){if(Dh===null){var g=new Map,E=Dh=new Map;E.set(u,g)}else E=Dh,g=E.get(u),g||(g=new Map,E.set(u,g));if(g.has(n))return g;for(g.set(n,null),u=u.getElementsByTagName(n),E=0;E<u.length;E++){var C=u[E];if(!(C[vi]||C[En]||n==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var M=C.getAttribute(s)||"";M=n+M;var j=g.get(M);j?j.push(C):g.set(M,[C])}}return g}function p2(n,s,u){n=n.ownerDocument||n,n.head.insertBefore(u,s==="title"?n.querySelector("head > title"):null)}function U_(n,s,u){if(u===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function x2(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var Jc=null;function V_(){}function F_(n,s,u){if(Jc===null)throw Error(a(475));var g=Jc;if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&!(s.state.loading&4)){if(s.instance===null){var E=Fl(u.href),C=n.querySelector(Zc(E));if(C){n=C._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(g.count++,g=Mh.bind(g),n.then(g,g)),s.state.loading|=4,s.instance=C,We(C);return}C=n.ownerDocument||n,u=d2(u),(E=ys.get(E))&&R0(u,E),C=C.createElement("link"),We(C);var M=C;M._p=new Promise(function(j,W){M.onload=j,M.onerror=W}),Kr(C,"link",u),s.instance=C}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(s,n),(n=s.state.preload)&&!(s.state.loading&3)&&(g.count++,s=Mh.bind(g),n.addEventListener("load",s),n.addEventListener("error",s))}}function z_(){if(Jc===null)throw Error(a(475));var n=Jc;return n.stylesheets&&n.count===0&&M0(n,n.stylesheets),0<n.count?function(s){var u=setTimeout(function(){if(n.stylesheets&&M0(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(u)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)M0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Oh=null;function M0(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Oh=new Map,s.forEach(H_,n),Oh=null,Mh.call(n))}function H_(n,s){if(!(s.state.loading&4)){var u=Oh.get(n);if(u)var g=u.get(null);else{u=new Map,Oh.set(n,u);for(var E=n.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<E.length;C++){var M=E[C];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),g=M)}g&&u.set(null,g)}E=s.instance,M=E.getAttribute("data-precedence"),C=u.get(M)||g,C===g&&u.set(null,E),u.set(M,E),this.count++,g=Mh.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),C?C.parentNode.insertBefore(E,C.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(E,n.firstChild)),s.state.loading|=4}}var eu={$$typeof:U,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function G_(n,s,u,g,E,C,M,j){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=C,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function y2(n,s,u,g,E,C,M,j,W,oe,be,Le){return n=new G_(n,s,u,M,j,W,oe,Le),s=1,C===!0&&(s|=24),C=ps(3,null,null,s),n.current=C,C.stateNode=n,s=ud(),s.refCount++,n.pooledCache=s,s.refCount++,C.memoizedState={element:g,isDehydrated:u,cache:s},Gd(C),n}function w2(n){return n?(n=El,n):El}function E2(n,s,u,g,E,C){E=w2(E),g.context===null?g.context=E:g.pendingContext=E,g=Qa(s),g.payload={element:u},C=C===void 0?null:C,C!==null&&(g.callback=C),u=Wa(n,g,s),u!==null&&(pi(u,n,s),Bc(u,n,s))}function v2(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function O0(n,s){v2(n,s),(n=n.alternate)&&v2(n,s)}function _2(n){if(n.tag===13){var s=Fa(n,67108864);s!==null&&pi(s,n,67108864),O0(n,67108864)}}var Lh=!0;function q_(n,s,u,g){var E=P.T;P.T=null;var C=qe.p;try{qe.p=2,L0(n,s,u,g)}finally{qe.p=C,P.T=E}}function Y_(n,s,u,g){var E=P.T;P.T=null;var C=qe.p;try{qe.p=8,L0(n,s,u,g)}finally{qe.p=C,P.T=E}}function L0(n,s,u,g){if(Lh){var E=k0(g);if(E===null)_0(n,s,g,kh,u),A2(n,g);else if(Q_(E,n,s,u,g))g.stopPropagation();else if(A2(n,g),s&4&&-1<X_.indexOf(n)){for(;E!==null;){var C=vn(E);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var M=ti(C.pendingLanes);if(M!==0){var j=C;for(j.pendingLanes|=2,j.entangledLanes|=2;M;){var W=1<<31-Ot(M);j.entanglements[1]|=W,M&=~W}Ys(C),!(Kn&6)&&(yh=ot()+500,Qc(0))}}break;case 13:j=Fa(C,2),j!==null&&pi(j,C,2),vh(),O0(C,2)}if(C=k0(g),C===null&&_0(n,s,g,kh,u),C===E)break;E=C}E!==null&&g.stopPropagation()}else _0(n,s,g,null,u)}}function k0(n){return n=Ps(n),P0(n)}var kh=null;function P0(n){if(kh=null,n=mn(n),n!==null){var s=Xe(n);if(s===null)n=null;else{var u=s.tag;if(u===13){if(n=it(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return kh=n,null}function b2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qn()){case Pt:return 2;case sn:return 8;case gn:case Yn:return 32;case Pi:return 268435456;default:return 32}default:return 32}}var B0=!1,no=null,ro=null,io=null,tu=new Map,nu=new Map,so=[],X_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A2(n,s){switch(n){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":tu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(s.pointerId)}}function ru(n,s,u,g,E,C){return n===null||n.nativeEvent!==C?(n={blockedOn:s,domEventName:u,eventSystemFlags:g,nativeEvent:C,targetContainers:[E]},s!==null&&(s=vn(s),s!==null&&_2(s)),n):(n.eventSystemFlags|=g,s=n.targetContainers,E!==null&&s.indexOf(E)===-1&&s.push(E),n)}function Q_(n,s,u,g,E){switch(s){case"focusin":return no=ru(no,n,s,u,g,E),!0;case"dragenter":return ro=ru(ro,n,s,u,g,E),!0;case"mouseover":return io=ru(io,n,s,u,g,E),!0;case"pointerover":var C=E.pointerId;return tu.set(C,ru(tu.get(C)||null,n,s,u,g,E)),!0;case"gotpointercapture":return C=E.pointerId,nu.set(C,ru(nu.get(C)||null,n,s,u,g,E)),!0}return!1}function C2(n){var s=mn(n.target);if(s!==null){var u=Xe(s);if(u!==null){if(s=u.tag,s===13){if(s=it(u),s!==null){n.blockedOn=s,Qn(n.priority,function(){if(u.tag===13){var g=Wi(),E=Fa(u,g);E!==null&&pi(E,u,g),O0(u,g)}});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ph(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=k0(n.nativeEvent);if(u===null){u=n.nativeEvent;var g=new u.constructor(u.type,u);Gr=g,u.target.dispatchEvent(g),Gr=null}else return s=vn(u),s!==null&&_2(s),n.blockedOn=u,!1;s.shift()}return!0}function T2(n,s,u){Ph(n)&&u.delete(s)}function W_(){B0=!1,no!==null&&Ph(no)&&(no=null),ro!==null&&Ph(ro)&&(ro=null),io!==null&&Ph(io)&&(io=null),tu.forEach(T2),nu.forEach(T2)}function Bh(n,s){n.blockedOn===s&&(n.blockedOn=null,B0||(B0=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,W_)))}var jh=null;function S2(n){jh!==n&&(jh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){jh===n&&(jh=null);for(var s=0;s<n.length;s+=3){var u=n[s],g=n[s+1],E=n[s+2];if(typeof g!="function"){if(P0(g||u)===null)continue;break}var C=vn(u);C!==null&&(n.splice(s,3),s-=3,Td(C,{pending:!0,data:E,method:u.method,action:g},g,E))}}))}function iu(n){function s(W){return Bh(W,n)}no!==null&&Bh(no,n),ro!==null&&Bh(ro,n),io!==null&&Bh(io,n),tu.forEach(s),nu.forEach(s);for(var u=0;u<so.length;u++){var g=so[u];g.blockedOn===n&&(g.blockedOn=null)}for(;0<so.length&&(u=so[0],u.blockedOn===null);)C2(u),u.blockedOn===null&&so.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var E=u[g],C=u[g+1],M=E[kn]||null;if(typeof C=="function")M||S2(u);else if(M){var j=null;if(C&&C.hasAttribute("formAction")){if(E=C,M=C[kn]||null)j=M.formAction;else if(P0(E)!==null)continue}else j=M.action;typeof j=="function"?u[g+1]=j:(u.splice(g,3),g-=3),S2(u)}}}function j0(n){this._internalRoot=n}Uh.prototype.render=j0.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(a(409));var u=s.current,g=Wi();E2(u,g,n,s,null,null)},Uh.prototype.unmount=j0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;n.tag===0&&Bl(),E2(n.current,2,null,n,null,null),vh(),s[Nn]=null}};function Uh(n){this._internalRoot=n}Uh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ei();n={blockedOn:null,target:n,priority:s};for(var u=0;u<so.length&&s!==0&&s<so[u].priority;u++);so.splice(u,0,n),u===0&&C2(n)}};var I2=e.version;if(I2!=="19.0.0")throw Error(a(527,I2,"19.0.0"));qe.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=Re(s),n=n!==null?Be(n):null,n=n===null?null:n.stateNode,n};var K_={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:P,findFiberByHostInstance:mn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{hn=Vh.inject(K_),ke=Vh}catch{}}return au.createRoot=function(n,s){if(!c(n))throw Error(a(299));var u=!1,g="",E=qm,C=Ym,M=Xm,j=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(E=s.onUncaughtError),s.onCaughtError!==void 0&&(C=s.onCaughtError),s.onRecoverableError!==void 0&&(M=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(j=s.unstable_transitionCallbacks)),s=y2(n,1,!1,null,null,u,g,E,C,M,j,null),n[Nn]=s.current,v0(n.nodeType===8?n.parentNode:n),new j0(s)},au.hydrateRoot=function(n,s,u){if(!c(n))throw Error(a(299));var g=!1,E="",C=qm,M=Ym,j=Xm,W=null,oe=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(E=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(j=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(W=u.unstable_transitionCallbacks),u.formState!==void 0&&(oe=u.formState)),s=y2(n,1,!0,s,u??null,g,E,C,M,j,W,oe),s.context=w2(null),u=s.current,g=Wi(),E=Qa(g),E.callback=null,Wa(u,E,g),s.current.lanes=g,en(s,g),Ys(s),n[Nn]=s.current,v0(n),new Uh(s)},au.version="19.0.0",au}var j2;function ob(){if(j2)return F0.exports;j2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),F0.exports=ab(),F0.exports}var lb=ob();const cb=P1(lb);var ou={},U2;function ub(){if(U2)return ou;U2=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.parse=y,ou.serialize=w;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,c=Object.prototype.toString,f=(()=>{const k=function(){};return k.prototype=Object.create(null),k})();function y(k,U){const q=new f,ee=k.length;if(ee<2)return q;const K=(U==null?void 0:U.decode)||S;let de=0;do{const fe=k.indexOf("=",de);if(fe===-1)break;const ie=k.indexOf(";",de),ve=ie===-1?ee:ie;if(fe>ve){de=k.lastIndexOf(";",fe-1)+1;continue}const je=b(k,de,fe),Pe=v(k,fe,je),H=k.slice(je,Pe);if(q[H]===void 0){let F=b(k,fe+1,ve),P=v(k,ve,F);const z=K(k.slice(F,P));q[H]=z}de=ve+1}while(de<ee);return q}function b(k,U,q){do{const ee=k.charCodeAt(U);if(ee!==32&&ee!==9)return U}while(++U<q);return q}function v(k,U,q){for(;U>q;){const ee=k.charCodeAt(--U);if(ee!==32&&ee!==9)return U+1}return q}function w(k,U,q){const ee=(q==null?void 0:q.encode)||encodeURIComponent;if(!i.test(k))throw new TypeError(`argument name is invalid: ${k}`);const K=ee(U);if(!e.test(K))throw new TypeError(`argument val is invalid: ${U}`);let de=k+"="+K;if(!q)return de;if(q.maxAge!==void 0){if(!Number.isInteger(q.maxAge))throw new TypeError(`option maxAge is invalid: ${q.maxAge}`);de+="; Max-Age="+q.maxAge}if(q.domain){if(!t.test(q.domain))throw new TypeError(`option domain is invalid: ${q.domain}`);de+="; Domain="+q.domain}if(q.path){if(!a.test(q.path))throw new TypeError(`option path is invalid: ${q.path}`);de+="; Path="+q.path}if(q.expires){if(!R(q.expires)||!Number.isFinite(q.expires.valueOf()))throw new TypeError(`option expires is invalid: ${q.expires}`);de+="; Expires="+q.expires.toUTCString()}if(q.httpOnly&&(de+="; HttpOnly"),q.secure&&(de+="; Secure"),q.partitioned&&(de+="; Partitioned"),q.priority)switch(typeof q.priority=="string"?q.priority.toLowerCase():void 0){case"low":de+="; Priority=Low";break;case"medium":de+="; Priority=Medium";break;case"high":de+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${q.priority}`)}if(q.sameSite)switch(typeof q.sameSite=="string"?q.sameSite.toLowerCase():q.sameSite){case!0:case"strict":de+="; SameSite=Strict";break;case"lax":de+="; SameSite=Lax";break;case"none":de+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${q.sameSite}`)}return de}function S(k){if(k.indexOf("%")===-1)return k;try{return decodeURIComponent(k)}catch{return k}}function R(k){return c.call(k)==="[object Date]"}return ou}ub();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var V2="popstate";function hb(i={}){function e(c,f){let{pathname:y="/",search:b="",hash:v=""}=il(c.location.hash.substring(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),s1("",{pathname:y,search:b,hash:v},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function t(c,f){let y=c.document.querySelector("base"),b="";if(y&&y.getAttribute("href")){let v=c.location.href,w=v.indexOf("#");b=w===-1?v:v.slice(0,w)}return b+"#"+(typeof f=="string"?f:Eu(f))}function a(c,f){es(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return db(e,t,a,i)}function Gn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function es(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fb(){return Math.random().toString(36).substring(2,10)}function F2(i,e){return{usr:i.state,key:i.key,idx:e}}function s1(i,e,t=null,a){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?il(e):e,state:t,key:e&&e.key||a||fb()}}function Eu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function il(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let a=i.indexOf("?");a>=0&&(e.search=i.substring(a),i=i.substring(0,a)),i&&(e.pathname=i)}return e}function db(i,e,t,a={}){let{window:c=document.defaultView,v5Compat:f=!1}=a,y=c.history,b="POP",v=null,w=S();w==null&&(w=0,y.replaceState({...y.state,idx:w},""));function S(){return(y.state||{idx:null}).idx}function R(){b="POP";let K=S(),de=K==null?null:K-w;w=K,v&&v({action:b,location:ee.location,delta:de})}function k(K,de){b="PUSH";let fe=s1(ee.location,K,de);t&&t(fe,K),w=S()+1;let ie=F2(fe,w),ve=ee.createHref(fe);try{y.pushState(ie,"",ve)}catch(je){if(je instanceof DOMException&&je.name==="DataCloneError")throw je;c.location.assign(ve)}f&&v&&v({action:b,location:ee.location,delta:1})}function U(K,de){b="REPLACE";let fe=s1(ee.location,K,de);t&&t(fe,K),w=S();let ie=F2(fe,w),ve=ee.createHref(fe);y.replaceState(ie,"",ve),f&&v&&v({action:b,location:ee.location,delta:0})}function q(K){let de=c.location.origin!=="null"?c.location.origin:c.location.href,fe=typeof K=="string"?K:Eu(K);return fe=fe.replace(/ $/,"%20"),Gn(de,`No window.location.(origin|href) available to create URL for href: ${fe}`),new URL(fe,de)}let ee={get action(){return b},get location(){return i(c,y)},listen(K){if(v)throw new Error("A history only accepts one active listener");return c.addEventListener(V2,R),v=K,()=>{c.removeEventListener(V2,R),v=null}},createHref(K){return e(c,K)},createURL:q,encodeLocation(K){let de=q(K);return{pathname:de.pathname,search:de.search,hash:de.hash}},push:k,replace:U,go(K){return y.go(K)}};return ee}function By(i,e,t="/"){return gb(i,e,t,!1)}function gb(i,e,t,a){let c=typeof e=="string"?il(e):e,f=wo(c.pathname||"/",t);if(f==null)return null;let y=jy(i);mb(y);let b=null;for(let v=0;b==null&&v<y.length;++v){let w=Tb(f);b=Ab(y[v],w,a)}return b}function jy(i,e=[],t=[],a=""){let c=(f,y,b)=>{let v={relativePath:b===void 0?f.path||"":b,caseSensitive:f.caseSensitive===!0,childrenIndex:y,route:f};v.relativePath.startsWith("/")&&(Gn(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length));let w=Ia([a,v.relativePath]),S=t.concat(v);f.children&&f.children.length>0&&(Gn(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),jy(f.children,e,S,w)),!(f.path==null&&!f.index)&&e.push({path:w,score:_b(w,f.index),routesMeta:S})};return i.forEach((f,y)=>{var b;if(f.path===""||!((b=f.path)!=null&&b.includes("?")))c(f,y);else for(let v of Uy(f.path))c(f,y,v)}),e}function Uy(i){let e=i.split("/");if(e.length===0)return[];let[t,...a]=e,c=t.endsWith("?"),f=t.replace(/\?$/,"");if(a.length===0)return c?[f,""]:[f];let y=Uy(a.join("/")),b=[];return b.push(...y.map(v=>v===""?f:[f,v].join("/"))),c&&b.push(...y),b.map(v=>i.startsWith("/")&&v===""?"/":v)}function mb(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:bb(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var pb=/^:[\w-]+$/,xb=3,yb=2,wb=1,Eb=10,vb=-2,z2=i=>i==="*";function _b(i,e){let t=i.split("/"),a=t.length;return t.some(z2)&&(a+=vb),e&&(a+=yb),t.filter(c=>!z2(c)).reduce((c,f)=>c+(pb.test(f)?xb:f===""?wb:Eb),a)}function bb(i,e){return i.length===e.length&&i.slice(0,-1).every((a,c)=>a===e[c])?i[i.length-1]-e[e.length-1]:0}function Ab(i,e,t=!1){let{routesMeta:a}=i,c={},f="/",y=[];for(let b=0;b<a.length;++b){let v=a[b],w=b===a.length-1,S=f==="/"?e:e.slice(f.length)||"/",R=cf({path:v.relativePath,caseSensitive:v.caseSensitive,end:w},S),k=v.route;if(!R&&w&&t&&!a[a.length-1].route.index&&(R=cf({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!R)return null;Object.assign(c,R.params),y.push({params:c,pathname:Ia([f,R.pathname]),pathnameBase:Rb(Ia([f,R.pathnameBase])),route:k}),R.pathnameBase!=="/"&&(f=Ia([f,R.pathnameBase]))}return y}function cf(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,a]=Cb(i.path,i.caseSensitive,i.end),c=e.match(t);if(!c)return null;let f=c[0],y=f.replace(/(.)\/+$/,"$1"),b=c.slice(1);return{params:a.reduce((w,{paramName:S,isOptional:R},k)=>{if(S==="*"){let q=b[k]||"";y=f.slice(0,f.length-q.length).replace(/(.)\/+$/,"$1")}const U=b[k];return R&&!U?w[S]=void 0:w[S]=(U||"").replace(/%2F/g,"/"),w},{}),pathname:f,pathnameBase:y,pattern:i}}function Cb(i,e=!1,t=!0){es(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let a=[],c="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,b,v)=>(a.push({paramName:b,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(a.push({paramName:"*"}),c+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":i!==""&&i!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),a]}function Tb(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return es(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function wo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=i.charAt(t);return a&&a!=="/"?null:i.slice(t)||"/"}function Sb(i,e="/"){let{pathname:t,search:a="",hash:c=""}=typeof i=="string"?il(i):i;return{pathname:t?t.startsWith("/")?t:Ib(t,e):e,search:Db(a),hash:Mb(c)}}function Ib(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function q0(i,e,t,a){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Nb(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function j1(i){let e=Nb(i);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function U1(i,e,t,a=!1){let c;typeof i=="string"?c=il(i):(c={...i},Gn(!c.pathname||!c.pathname.includes("?"),q0("?","pathname","search",c)),Gn(!c.pathname||!c.pathname.includes("#"),q0("#","pathname","hash",c)),Gn(!c.search||!c.search.includes("#"),q0("#","search","hash",c)));let f=i===""||c.pathname==="",y=f?"/":c.pathname,b;if(y==null)b=t;else{let R=e.length-1;if(!a&&y.startsWith("..")){let k=y.split("/");for(;k[0]==="..";)k.shift(),R-=1;c.pathname=k.join("/")}b=R>=0?e[R]:"/"}let v=Sb(c,b),w=y&&y!=="/"&&y.endsWith("/"),S=(f||y===".")&&t.endsWith("/");return!v.pathname.endsWith("/")&&(w||S)&&(v.pathname+="/"),v}var Ia=i=>i.join("/").replace(/\/\/+/g,"/"),Rb=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Db=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Mb=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Ob(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Vy=["POST","PUT","PATCH","DELETE"];new Set(Vy);var Lb=["GET",...Vy];new Set(Lb);var uc=$.createContext(null);uc.displayName="DataRouter";var Of=$.createContext(null);Of.displayName="DataRouterState";var Fy=$.createContext({isTransitioning:!1});Fy.displayName="ViewTransition";var kb=$.createContext(new Map);kb.displayName="Fetchers";var Pb=$.createContext(null);Pb.displayName="Await";var Os=$.createContext(null);Os.displayName="Navigation";var Ru=$.createContext(null);Ru.displayName="Location";var Ls=$.createContext({outlet:null,matches:[],isDataRoute:!1});Ls.displayName="Route";var V1=$.createContext(null);V1.displayName="RouteError";function Bb(i,{relative:e}={}){Gn(hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=$.useContext(Os),{hash:c,pathname:f,search:y}=Du(i,{relative:e}),b=f;return t!=="/"&&(b=f==="/"?t:Ia([t,f])),a.createHref({pathname:b,search:y,hash:c})}function hc(){return $.useContext(Ru)!=null}function La(){return Gn(hc(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Ru).location}var zy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Hy(i){$.useContext(Os).static||$.useLayoutEffect(i)}function ea(){let{isDataRoute:i}=$.useContext(Ls);return i?Kb():jb()}function jb(){Gn(hc(),"useNavigate() may be used only in the context of a <Router> component.");let i=$.useContext(uc),{basename:e,navigator:t}=$.useContext(Os),{matches:a}=$.useContext(Ls),{pathname:c}=La(),f=JSON.stringify(j1(a)),y=$.useRef(!1);return Hy(()=>{y.current=!0}),$.useCallback((v,w={})=>{if(es(y.current,zy),!y.current)return;if(typeof v=="number"){t.go(v);return}let S=U1(v,JSON.parse(f),c,w.relative==="path");i==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Ia([e,S.pathname])),(w.replace?t.replace:t.push)(S,w.state,w)},[e,t,f,c,i])}$.createContext(null);function F1(){let{matches:i}=$.useContext(Ls),e=i[i.length-1];return e?e.params:{}}function Du(i,{relative:e}={}){let{matches:t}=$.useContext(Ls),{pathname:a}=La(),c=JSON.stringify(j1(t));return $.useMemo(()=>U1(i,JSON.parse(c),a,e==="path"),[i,c,a,e])}function Ub(i,e){return Gy(i,e)}function Gy(i,e,t,a){var fe;Gn(hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c,static:f}=$.useContext(Os),{matches:y}=$.useContext(Ls),b=y[y.length-1],v=b?b.params:{},w=b?b.pathname:"/",S=b?b.pathnameBase:"/",R=b&&b.route;{let ie=R&&R.path||"";qy(w,!R||ie.endsWith("*")||ie.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${ie}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ie}"> to <Route path="${ie==="/"?"*":`${ie}/*`}">.`)}let k=La(),U;if(e){let ie=typeof e=="string"?il(e):e;Gn(S==="/"||((fe=ie.pathname)==null?void 0:fe.startsWith(S)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${ie.pathname}" was given in the \`location\` prop.`),U=ie}else U=k;let q=U.pathname||"/",ee=q;if(S!=="/"){let ie=S.replace(/^\//,"").split("/");ee="/"+q.replace(/^\//,"").split("/").slice(ie.length).join("/")}let K=!f&&t&&t.matches&&t.matches.length>0?t.matches:By(i,{pathname:ee});es(R||K!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),es(K==null||K[K.length-1].route.element!==void 0||K[K.length-1].route.Component!==void 0||K[K.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let de=Gb(K&&K.map(ie=>Object.assign({},ie,{params:Object.assign({},v,ie.params),pathname:Ia([S,c.encodeLocation?c.encodeLocation(ie.pathname).pathname:ie.pathname]),pathnameBase:ie.pathnameBase==="/"?S:Ia([S,c.encodeLocation?c.encodeLocation(ie.pathnameBase).pathname:ie.pathnameBase])})),y,t,a);return e&&de?$.createElement(Ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},de):de}function Vb(){let i=Wb(),e=Ob(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,a="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:a},f={padding:"2px 4px",backgroundColor:a},y=null;return console.error("Error handled by React Router default ErrorBoundary:",i),y=$.createElement($.Fragment,null,$.createElement("p",null,"💿 Hey developer 👋"),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:f},"ErrorBoundary")," or"," ",$.createElement("code",{style:f},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:c},t):null,y)}var Fb=$.createElement(Vb,null),zb=class extends $.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?$.createElement(Ls.Provider,{value:this.props.routeContext},$.createElement(V1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hb({routeContext:i,match:e,children:t}){let a=$.useContext(uc);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(Ls.Provider,{value:i},t)}function Gb(i,e=[],t=null,a=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let c=i,f=t==null?void 0:t.errors;if(f!=null){let v=c.findIndex(w=>w.route.id&&(f==null?void 0:f[w.route.id])!==void 0);Gn(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),c=c.slice(0,Math.min(c.length,v+1))}let y=!1,b=-1;if(t)for(let v=0;v<c.length;v++){let w=c[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(b=v),w.route.id){let{loaderData:S,errors:R}=t,k=w.route.loader&&!S.hasOwnProperty(w.route.id)&&(!R||R[w.route.id]===void 0);if(w.route.lazy||k){y=!0,b>=0?c=c.slice(0,b+1):c=[c[0]];break}}}return c.reduceRight((v,w,S)=>{let R,k=!1,U=null,q=null;t&&(R=f&&w.route.id?f[w.route.id]:void 0,U=w.route.errorElement||Fb,y&&(b<0&&S===0?(qy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,q=null):b===S&&(k=!0,q=w.route.hydrateFallbackElement||null)));let ee=e.concat(c.slice(0,S+1)),K=()=>{let de;return R?de=U:k?de=q:w.route.Component?de=$.createElement(w.route.Component,null):w.route.element?de=w.route.element:de=v,$.createElement(Hb,{match:w,routeContext:{outlet:v,matches:ee,isDataRoute:t!=null},children:de})};return t&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?$.createElement(zb,{location:t.location,revalidation:t.revalidation,component:U,error:R,children:K(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):K()},null)}function z1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qb(i){let e=$.useContext(uc);return Gn(e,z1(i)),e}function Yb(i){let e=$.useContext(Of);return Gn(e,z1(i)),e}function Xb(i){let e=$.useContext(Ls);return Gn(e,z1(i)),e}function H1(i){let e=Xb(i),t=e.matches[e.matches.length-1];return Gn(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function Qb(){return H1("useRouteId")}function Wb(){var a;let i=$.useContext(V1),e=Yb("useRouteError"),t=H1("useRouteError");return i!==void 0?i:(a=e.errors)==null?void 0:a[t]}function Kb(){let{router:i}=qb("useNavigate"),e=H1("useNavigate"),t=$.useRef(!1);return Hy(()=>{t.current=!0}),$.useCallback(async(c,f={})=>{es(t.current,zy),t.current&&(typeof c=="number"?i.navigate(c):await i.navigate(c,{fromRouteId:e,...f}))},[i,e])}var H2={};function qy(i,e,t){!e&&!H2[i]&&(H2[i]=!0,es(!1,t))}$.memo(Zb);function Zb({routes:i,future:e,state:t}){return Gy(i,void 0,t,e)}function $b({to:i,replace:e,state:t,relative:a}){Gn(hc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=$.useContext(Os);es(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=$.useContext(Ls),{pathname:y}=La(),b=ea(),v=U1(i,j1(f),y,a==="path"),w=JSON.stringify(v);return $.useEffect(()=>{b(JSON.parse(w),{replace:e,state:t,relative:a})},[b,w,a,e,t]),null}function _a(i){Gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jb({basename:i="/",children:e=null,location:t,navigationType:a="POP",navigator:c,static:f=!1}){Gn(!hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=i.replace(/^\/*/,"/"),b=$.useMemo(()=>({basename:y,navigator:c,static:f,future:{}}),[y,c,f]);typeof t=="string"&&(t=il(t));let{pathname:v="/",search:w="",hash:S="",state:R=null,key:k="default"}=t,U=$.useMemo(()=>{let q=wo(v,y);return q==null?null:{location:{pathname:q,search:w,hash:S,state:R,key:k},navigationType:a}},[y,v,w,S,R,k,a]);return es(U!=null,`<Router basename="${y}"> is not able to match the URL "${v}${w}${S}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:$.createElement(Os.Provider,{value:b},$.createElement(Ru.Provider,{children:e,value:U}))}function eA({children:i,location:e}){return Ub(a1(i),e)}function a1(i,e=[]){let t=[];return $.Children.forEach(i,(a,c)=>{if(!$.isValidElement(a))return;let f=[...e,c];if(a.type===$.Fragment){t.push.apply(t,a1(a.props.children,f));return}Gn(a.type===_a,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let y={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(y.children=a1(a.props.children,f)),t.push(y)}),t}var Wh="get",Kh="application/x-www-form-urlencoded";function Lf(i){return i!=null&&typeof i.tagName=="string"}function tA(i){return Lf(i)&&i.tagName.toLowerCase()==="button"}function nA(i){return Lf(i)&&i.tagName.toLowerCase()==="form"}function rA(i){return Lf(i)&&i.tagName.toLowerCase()==="input"}function iA(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function sA(i,e){return i.button===0&&(!e||e==="_self")&&!iA(i)}function o1(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let a=i[t];return e.concat(Array.isArray(a)?a.map(c=>[t,c]):[[t,a]])},[]))}function aA(i,e){let t=o1(i);return e&&e.forEach((a,c)=>{t.has(c)||e.getAll(c).forEach(f=>{t.append(c,f)})}),t}var zh=null;function oA(){if(zh===null)try{new FormData(document.createElement("form"),0),zh=!1}catch{zh=!0}return zh}var lA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Y0(i){return i!=null&&!lA.has(i)?(es(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kh}"`),null):i}function cA(i,e){let t,a,c,f,y;if(nA(i)){let b=i.getAttribute("action");a=b?wo(b,e):null,t=i.getAttribute("method")||Wh,c=Y0(i.getAttribute("enctype"))||Kh,f=new FormData(i)}else if(tA(i)||rA(i)&&(i.type==="submit"||i.type==="image")){let b=i.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=i.getAttribute("formaction")||b.getAttribute("action");if(a=v?wo(v,e):null,t=i.getAttribute("formmethod")||b.getAttribute("method")||Wh,c=Y0(i.getAttribute("formenctype"))||Y0(b.getAttribute("enctype"))||Kh,f=new FormData(b,i),!oA()){let{name:w,type:S,value:R}=i;if(S==="image"){let k=w?`${w}.`:"";f.append(`${k}x`,"0"),f.append(`${k}y`,"0")}else w&&f.append(w,R)}}else{if(Lf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wh,a=null,c=Kh,y=i}return f&&c==="text/plain"&&(y=f,f=void 0),{action:a,method:t.toLowerCase(),encType:c,formData:f,body:y}}function G1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function uA(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hA(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function fA(i,e,t){let a=await Promise.all(i.map(async c=>{let f=e.routes[c.route.id];if(f){let y=await uA(f,t);return y.links?y.links():[]}return[]}));return pA(a.flat(1).filter(hA).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function G2(i,e,t,a,c,f){let y=(v,w)=>t[w]?v.route.id!==t[w].route.id:!0,b=(v,w)=>{var S;return t[w].pathname!==v.pathname||((S=t[w].route.path)==null?void 0:S.endsWith("*"))&&t[w].params["*"]!==v.params["*"]};return f==="assets"?e.filter((v,w)=>y(v,w)||b(v,w)):f==="data"?e.filter((v,w)=>{var R;let S=a.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(y(v,w)||b(v,w))return!0;if(v.route.shouldRevalidate){let k=v.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((R=t[0])==null?void 0:R.params)||{},nextUrl:new URL(i,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function dA(i,e){return gA(i.map(t=>{let a=e.routes[t.route.id];if(!a)return[];let c=[a.module];return a.imports&&(c=c.concat(a.imports)),c}).flat(1))}function gA(i){return[...new Set(i)]}function mA(i){let e={},t=Object.keys(i).sort();for(let a of t)e[a]=i[a];return e}function pA(i,e){let t=new Set;return new Set(e),i.reduce((a,c)=>{let f=JSON.stringify(mA(c));return t.has(f)||(t.add(f),a.push({key:f,link:c})),a},[])}function xA(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function yA(){let i=$.useContext(uc);return G1(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function wA(){let i=$.useContext(Of);return G1(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var q1=$.createContext(void 0);q1.displayName="FrameworkContext";function Yy(){let i=$.useContext(q1);return G1(i,"You must render this element inside a <HydratedRouter> element"),i}function EA(i,e){let t=$.useContext(q1),[a,c]=$.useState(!1),[f,y]=$.useState(!1),{onFocus:b,onBlur:v,onMouseEnter:w,onMouseLeave:S,onTouchStart:R}=e,k=$.useRef(null);$.useEffect(()=>{if(i==="render"&&y(!0),i==="viewport"){let ee=de=>{de.forEach(fe=>{y(fe.isIntersecting)})},K=new IntersectionObserver(ee,{threshold:.5});return k.current&&K.observe(k.current),()=>{K.disconnect()}}},[i]),$.useEffect(()=>{if(a){let ee=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(ee)}}},[a]);let U=()=>{c(!0)},q=()=>{c(!1),y(!1)};return t?i!=="intent"?[f,k,{}]:[f,k,{onFocus:lu(b,U),onBlur:lu(v,q),onMouseEnter:lu(w,U),onMouseLeave:lu(S,q),onTouchStart:lu(R,U)}]:[!1,k,{}]}function lu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function vA({page:i,...e}){let{router:t}=yA(),a=$.useMemo(()=>By(t.routes,i,t.basename),[t.routes,i,t.basename]);return a?$.createElement(bA,{page:i,matches:a,...e}):null}function _A(i){let{manifest:e,routeModules:t}=Yy(),[a,c]=$.useState([]);return $.useEffect(()=>{let f=!1;return fA(i,e,t).then(y=>{f||c(y)}),()=>{f=!0}},[i,e,t]),a}function bA({page:i,matches:e,...t}){let a=La(),{manifest:c,routeModules:f}=Yy(),{loaderData:y,matches:b}=wA(),v=$.useMemo(()=>G2(i,e,b,c,a,"data"),[i,e,b,c,a]),w=$.useMemo(()=>G2(i,e,b,c,a,"assets"),[i,e,b,c,a]),S=$.useMemo(()=>{if(i===a.pathname+a.search+a.hash)return[];let U=new Set,q=!1;if(e.forEach(K=>{var fe;let de=c.routes[K.route.id];!de||!de.hasLoader||(!v.some(ie=>ie.route.id===K.route.id)&&K.route.id in y&&((fe=f[K.route.id])!=null&&fe.shouldRevalidate)||de.hasClientLoader?q=!0:U.add(K.route.id))}),U.size===0)return[];let ee=xA(i);return q&&U.size>0&&ee.searchParams.set("_routes",e.filter(K=>U.has(K.route.id)).map(K=>K.route.id).join(",")),[ee.pathname+ee.search]},[y,a,c,v,e,i,f]),R=$.useMemo(()=>dA(w,c),[w,c]),k=_A(w);return $.createElement($.Fragment,null,S.map(U=>$.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...t})),R.map(U=>$.createElement("link",{key:U,rel:"modulepreload",href:U,...t})),k.map(({key:U,link:q})=>$.createElement("link",{key:U,...q})))}function AA(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Xy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xy&&(window.__reactRouterVersion="7.1.5")}catch{}function CA({basename:i,children:e,window:t}){let a=$.useRef();a.current==null&&(a.current=hb({window:t,v5Compat:!0}));let c=a.current,[f,y]=$.useState({action:c.action,location:c.location}),b=$.useCallback(v=>{$.startTransition(()=>y(v))},[y]);return $.useLayoutEffect(()=>c.listen(b),[c,b]),$.createElement(Jb,{basename:i,children:e,location:f.location,navigationType:f.action,navigator:c})}var Qy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wy=$.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:c,reloadDocument:f,replace:y,state:b,target:v,to:w,preventScrollReset:S,viewTransition:R,...k},U){let{basename:q}=$.useContext(Os),ee=typeof w=="string"&&Qy.test(w),K,de=!1;if(typeof w=="string"&&ee&&(K=w,Xy))try{let P=new URL(window.location.href),z=w.startsWith("//")?new URL(P.protocol+w):new URL(w),Q=wo(z.pathname,q);z.origin===P.origin&&Q!=null?w=Q+z.search+z.hash:de=!0}catch{es(!1,`<Link to="${w}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let fe=Bb(w,{relative:c}),[ie,ve,je]=EA(a,k),Pe=NA(w,{replace:y,state:b,target:v,preventScrollReset:S,relative:c,viewTransition:R});function H(P){e&&e(P),P.defaultPrevented||Pe(P)}let F=$.createElement("a",{...k,...je,href:K||fe,onClick:de||f?e:H,ref:AA(U,ve),target:v,"data-discover":!ee&&t==="render"?"true":void 0});return ie&&!ee?$.createElement($.Fragment,null,F,$.createElement(vA,{page:fe})):F});Wy.displayName="Link";var TA=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:c=!1,style:f,to:y,viewTransition:b,children:v,...w},S){let R=Du(y,{relative:w.relative}),k=La(),U=$.useContext(Of),{navigator:q,basename:ee}=$.useContext(Os),K=U!=null&&kA(R)&&b===!0,de=q.encodeLocation?q.encodeLocation(R).pathname:R.pathname,fe=k.pathname,ie=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;t||(fe=fe.toLowerCase(),ie=ie?ie.toLowerCase():null,de=de.toLowerCase()),ie&&ee&&(ie=wo(ie,ee)||ie);const ve=de!=="/"&&de.endsWith("/")?de.length-1:de.length;let je=fe===de||!c&&fe.startsWith(de)&&fe.charAt(ve)==="/",Pe=ie!=null&&(ie===de||!c&&ie.startsWith(de)&&ie.charAt(de.length)==="/"),H={isActive:je,isPending:Pe,isTransitioning:K},F=je?e:void 0,P;typeof a=="function"?P=a(H):P=[a,je?"active":null,Pe?"pending":null,K?"transitioning":null].filter(Boolean).join(" ");let z=typeof f=="function"?f(H):f;return $.createElement(Wy,{...w,"aria-current":F,className:P,ref:S,style:z,to:y,viewTransition:b},typeof v=="function"?v(H):v)});TA.displayName="NavLink";var SA=$.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:c,state:f,method:y=Wh,action:b,onSubmit:v,relative:w,preventScrollReset:S,viewTransition:R,...k},U)=>{let q=OA(),ee=LA(b,{relative:w}),K=y.toLowerCase()==="get"?"get":"post",de=typeof b=="string"&&Qy.test(b),fe=ie=>{if(v&&v(ie),ie.defaultPrevented)return;ie.preventDefault();let ve=ie.nativeEvent.submitter,je=(ve==null?void 0:ve.getAttribute("formmethod"))||y;q(ve||ie.currentTarget,{fetcherKey:e,method:je,navigate:t,replace:c,state:f,relative:w,preventScrollReset:S,viewTransition:R})};return $.createElement("form",{ref:U,method:K,action:ee,onSubmit:a?v:fe,...k,"data-discover":!de&&i==="render"?"true":void 0})});SA.displayName="Form";function IA(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ky(i){let e=$.useContext(uc);return Gn(e,IA(i)),e}function NA(i,{target:e,replace:t,state:a,preventScrollReset:c,relative:f,viewTransition:y}={}){let b=ea(),v=La(),w=Du(i,{relative:f});return $.useCallback(S=>{if(sA(S,e)){S.preventDefault();let R=t!==void 0?t:Eu(v)===Eu(w);b(i,{replace:R,state:a,preventScrollReset:c,relative:f,viewTransition:y})}},[v,b,w,t,a,e,i,c,f,y])}function RA(i){es(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=$.useRef(o1(i)),t=$.useRef(!1),a=La(),c=$.useMemo(()=>aA(a.search,t.current?null:e.current),[a.search]),f=ea(),y=$.useCallback((b,v)=>{const w=o1(typeof b=="function"?b(c):b);t.current=!0,f("?"+w,v)},[f,c]);return[c,y]}var DA=0,MA=()=>`__${String(++DA)}__`;function OA(){let{router:i}=Ky("useSubmit"),{basename:e}=$.useContext(Os),t=Qb();return $.useCallback(async(a,c={})=>{let{action:f,method:y,encType:b,formData:v,body:w}=cA(a,e);if(c.navigate===!1){let S=c.fetcherKey||MA();await i.fetch(S,t,c.action||f,{preventScrollReset:c.preventScrollReset,formData:v,body:w,formMethod:c.method||y,formEncType:c.encType||b,flushSync:c.flushSync})}else await i.navigate(c.action||f,{preventScrollReset:c.preventScrollReset,formData:v,body:w,formMethod:c.method||y,formEncType:c.encType||b,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,e,t])}function LA(i,{relative:e}={}){let{basename:t}=$.useContext(Os),a=$.useContext(Ls);Gn(a,"useFormAction must be used inside a RouteContext");let[c]=a.matches.slice(-1),f={...Du(i||".",{relative:e})},y=La();if(i==null){f.search=y.search;let b=new URLSearchParams(f.search),v=b.getAll("index");if(v.some(S=>S==="")){b.delete("index"),v.filter(R=>R).forEach(R=>b.append("index",R));let S=b.toString();f.search=S?`?${S}`:""}}return(!i||i===".")&&c.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(f.pathname=f.pathname==="/"?t:Ia([t,f.pathname])),Eu(f)}function kA(i,e={}){let t=$.useContext(Fy);Gn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Ky("useViewTransitionState"),c=Du(i,{relative:e.relative});if(!t.isTransitioning)return!1;let f=wo(t.currentLocation.pathname,a)||t.currentLocation.pathname,y=wo(t.nextLocation.pathname,a)||t.nextLocation.pathname;return cf(c.pathname,y)!=null||cf(c.pathname,f)!=null}new TextEncoder;var q2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=function(i){const e=[];let t=0;for(let a=0;a<i.length;a++){let c=i.charCodeAt(a);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(c=65536+((c&1023)<<10)+(i.charCodeAt(++a)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},PA=function(i){const e=[];let t=0,a=0;for(;t<i.length;){const c=i[t++];if(c<128)e[a++]=String.fromCharCode(c);else if(c>191&&c<224){const f=i[t++];e[a++]=String.fromCharCode((c&31)<<6|f&63)}else if(c>239&&c<365){const f=i[t++],y=i[t++],b=i[t++],v=((c&7)<<18|(f&63)<<12|(y&63)<<6|b&63)-65536;e[a++]=String.fromCharCode(55296+(v>>10)),e[a++]=String.fromCharCode(56320+(v&1023))}else{const f=i[t++],y=i[t++];e[a++]=String.fromCharCode((c&15)<<12|(f&63)<<6|y&63)}}return e.join("")},$y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let c=0;c<i.length;c+=3){const f=i[c],y=c+1<i.length,b=y?i[c+1]:0,v=c+2<i.length,w=v?i[c+2]:0,S=f>>2,R=(f&3)<<4|b>>4;let k=(b&15)<<2|w>>6,U=w&63;v||(U=64,y||(k=64)),a.push(t[S],t[R],t[k],t[U])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Zy(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):PA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let c=0;c<i.length;){const f=t[i.charAt(c++)],b=c<i.length?t[i.charAt(c)]:0;++c;const w=c<i.length?t[i.charAt(c)]:64;++c;const R=c<i.length?t[i.charAt(c)]:64;if(++c,f==null||b==null||w==null||R==null)throw new BA;const k=f<<2|b>>4;if(a.push(k),w!==64){const U=b<<4&240|w>>2;if(a.push(U),R!==64){const q=w<<6&192|R;a.push(q)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class BA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jA=function(i){const e=Zy(i);return $y.encodeByteArray(e,!0)},uf=function(i){return jA(i).replace(/\./g,"")},Jy=function(i){try{return $y.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=()=>UA().__FIREBASE_DEFAULTS__,FA=()=>{if(typeof process>"u"||typeof q2>"u")return;const i=q2.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},zA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Jy(i[1]);return e&&JSON.parse(e)},kf=()=>{try{return VA()||FA()||zA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ew=i=>{var e,t;return(t=(e=kf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},HA=i=>{const e=ew(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},tw=()=>{var i;return(i=kf())===null||i===void 0?void 0:i.config},nw=i=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",c=i.iat||0,f=i.sub||i.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:c,exp:c+3600,auth_time:c,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}}},i);return[uf(JSON.stringify(t)),uf(JSON.stringify(y)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hi())}function XA(){var i;const e=(i=kf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function KA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZA(){const i=hi();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function $A(){return!XA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JA(){try{return typeof indexedDB=="object"}catch{return!1}}function eC(){return new Promise((i,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(a);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(a),i(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{var f;e(((f=c.error)===null||f===void 0?void 0:f.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="FirebaseError";class ka extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=tC,Object.setPrototypeOf(this,ka.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mu.prototype.create)}}class Mu{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},c=`${this.service}/${e}`,f=this.errors[e],y=f?nC(f,a):"Error",b=`${this.serviceName}: ${y} (${c}).`;return new ka(c,b,a)}}function nC(i,e){return i.replace(rC,(t,a)=>{const c=e[a];return c!=null?String(c):`<${a}?>`})}const rC=/\{\$([^}]+)}/g;function iC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function hf(i,e){if(i===e)return!0;const t=Object.keys(i),a=Object.keys(e);for(const c of t){if(!a.includes(c))return!1;const f=i[c],y=e[c];if(Y2(f)&&Y2(y)){if(!hf(f,y))return!1}else if(f!==y)return!1}for(const c of a)if(!t.includes(c))return!1;return!0}function Y2(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(i){const e=[];for(const[t,a]of Object.entries(i))Array.isArray(a)?a.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function sC(i,e){const t=new aC(i,e);return t.subscribe.bind(t)}class aC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let c;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");oC(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:a},c.next===void 0&&(c.next=X0),c.error===void 0&&(c.error=X0),c.complete===void 0&&(c.complete=X0);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),f}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oC(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function X0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(i){return i&&i._delegate?i._delegate:i}class Jo{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new GA;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&a.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),c=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(f){if(c)return null;throw f}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uC(e))try{this.getOrInitializeService({instanceIdentifier:Wo})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const f=this.getOrInitializeService({instanceIdentifier:c});a.resolve(f)}catch{}}}}clearInstance(e=Wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wo){return this.instances.has(e)}getOptions(e=Wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[f,y]of this.instancesDeferred.entries()){const b=this.normalizeInstanceIdentifier(f);a===b&&y.resolve(c)}return c}onInit(e,t){var a;const c=this.normalizeInstanceIdentifier(t),f=(a=this.onInitCallbacks.get(c))!==null&&a!==void 0?a:new Set;f.add(e),this.onInitCallbacks.set(c,f);const y=this.instances.get(c);return y&&e(y,c),()=>{f.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const c of a)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:cC(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Wo){return this.component?this.component.multipleInstances?e:Wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cC(i){return i===Wo?void 0:i}function uC(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Wt||(Wt={}));const fC={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},dC=Wt.INFO,gC={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},mC=(i,e,...t)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),c=gC[e];if(c)console[c](`[${a}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Y1{constructor(e){this.name=e,this._logLevel=dC,this._logHandler=mC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...e),this._logHandler(this,Wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...e),this._logHandler(this,Wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...e),this._logHandler(this,Wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...e),this._logHandler(this,Wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...e),this._logHandler(this,Wt.ERROR,...e)}}const pC=(i,e)=>e.some(t=>i instanceof t);let X2,Q2;function xC(){return X2||(X2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yC(){return Q2||(Q2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rw=new WeakMap,l1=new WeakMap,iw=new WeakMap,Q0=new WeakMap,X1=new WeakMap;function wC(i){const e=new Promise((t,a)=>{const c=()=>{i.removeEventListener("success",f),i.removeEventListener("error",y)},f=()=>{t(go(i.result)),c()},y=()=>{a(i.error),c()};i.addEventListener("success",f),i.addEventListener("error",y)});return e.then(t=>{t instanceof IDBCursor&&rw.set(t,i)}).catch(()=>{}),X1.set(e,i),e}function EC(i){if(l1.has(i))return;const e=new Promise((t,a)=>{const c=()=>{i.removeEventListener("complete",f),i.removeEventListener("error",y),i.removeEventListener("abort",y)},f=()=>{t(),c()},y=()=>{a(i.error||new DOMException("AbortError","AbortError")),c()};i.addEventListener("complete",f),i.addEventListener("error",y),i.addEventListener("abort",y)});l1.set(i,e)}let c1={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return l1.get(i);if(e==="objectStoreNames")return i.objectStoreNames||iw.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return go(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function vC(i){c1=i(c1)}function _C(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=i.call(W0(this),e,...t);return iw.set(a,e.sort?e.sort():[e]),go(a)}:yC().includes(i)?function(...e){return i.apply(W0(this),e),go(rw.get(this))}:function(...e){return go(i.apply(W0(this),e))}}function bC(i){return typeof i=="function"?_C(i):(i instanceof IDBTransaction&&EC(i),pC(i,xC())?new Proxy(i,c1):i)}function go(i){if(i instanceof IDBRequest)return wC(i);if(Q0.has(i))return Q0.get(i);const e=bC(i);return e!==i&&(Q0.set(i,e),X1.set(e,i)),e}const W0=i=>X1.get(i);function AC(i,e,{blocked:t,upgrade:a,blocking:c,terminated:f}={}){const y=indexedDB.open(i,e),b=go(y);return a&&y.addEventListener("upgradeneeded",v=>{a(go(y.result),v.oldVersion,v.newVersion,go(y.transaction),v)}),t&&y.addEventListener("blocked",v=>t(v.oldVersion,v.newVersion,v)),b.then(v=>{f&&v.addEventListener("close",()=>f()),c&&v.addEventListener("versionchange",w=>c(w.oldVersion,w.newVersion,w))}).catch(()=>{}),b}const CC=["get","getKey","getAll","getAllKeys","count"],TC=["put","add","delete","clear"],K0=new Map;function W2(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(K0.get(e))return K0.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,c=TC.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(c||CC.includes(t)))return;const f=async function(y,...b){const v=this.transaction(y,c?"readwrite":"readonly");let w=v.store;return a&&(w=w.index(b.shift())),(await Promise.all([w[t](...b),c&&v.done]))[0]};return K0.set(e,f),f}vC(i=>({...i,get:(e,t,a)=>W2(e,t)||i.get(e,t,a),has:(e,t)=>!!W2(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IC(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function IC(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const u1="@firebase/app",K2="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Y1("@firebase/app"),NC="@firebase/app-compat",RC="@firebase/analytics-compat",DC="@firebase/analytics",MC="@firebase/app-check-compat",OC="@firebase/app-check",LC="@firebase/auth",kC="@firebase/auth-compat",PC="@firebase/database",BC="@firebase/data-connect",jC="@firebase/database-compat",UC="@firebase/functions",VC="@firebase/functions-compat",FC="@firebase/installations",zC="@firebase/installations-compat",HC="@firebase/messaging",GC="@firebase/messaging-compat",qC="@firebase/performance",YC="@firebase/performance-compat",XC="@firebase/remote-config",QC="@firebase/remote-config-compat",WC="@firebase/storage",KC="@firebase/storage-compat",ZC="@firebase/firestore",$C="@firebase/vertexai",JC="@firebase/firestore-compat",eT="firebase",tT="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="[DEFAULT]",nT={[u1]:"fire-core",[NC]:"fire-core-compat",[DC]:"fire-analytics",[RC]:"fire-analytics-compat",[OC]:"fire-app-check",[MC]:"fire-app-check-compat",[LC]:"fire-auth",[kC]:"fire-auth-compat",[PC]:"fire-rtdb",[BC]:"fire-data-connect",[jC]:"fire-rtdb-compat",[UC]:"fire-fn",[VC]:"fire-fn-compat",[FC]:"fire-iid",[zC]:"fire-iid-compat",[HC]:"fire-fcm",[GC]:"fire-fcm-compat",[qC]:"fire-perf",[YC]:"fire-perf-compat",[XC]:"fire-rc",[QC]:"fire-rc-compat",[WC]:"fire-gcs",[KC]:"fire-gcs-compat",[ZC]:"fire-fst",[JC]:"fire-fst-compat",[$C]:"fire-vertex","fire-js":"fire-js",[eT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Map,rT=new Map,f1=new Map;function Z2(i,e){try{i.container.addComponent(e)}catch(t){Ra.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ec(i){const e=i.name;if(f1.has(e))return Ra.debug(`There were multiple attempts to register component ${e}.`),!1;f1.set(e,i);for(const t of ff.values())Z2(t,i);for(const t of rT.values())Z2(t,i);return!0}function Q1(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Rs(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mo=new Mu("app","Firebase",iT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=tT;function sw(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const a=Object.assign({name:h1,automaticDataCollectionEnabled:!1},e),c=a.name;if(typeof c!="string"||!c)throw mo.create("bad-app-name",{appName:String(c)});if(t||(t=tw()),!t)throw mo.create("no-options");const f=ff.get(c);if(f){if(hf(t,f.options)&&hf(a,f.config))return f;throw mo.create("duplicate-app",{appName:c})}const y=new hC(c);for(const v of f1.values())y.addComponent(v);const b=new sT(t,a,y);return ff.set(c,b),b}function aw(i=h1){const e=ff.get(i);if(!e&&i===h1&&tw())return sw();if(!e)throw mo.create("no-app",{appName:i});return e}function po(i,e,t){var a;let c=(a=nT[i])!==null&&a!==void 0?a:i;t&&(c+=`-${t}`);const f=c.match(/\s|\//),y=e.match(/\s|\//);if(f||y){const b=[`Unable to register library "${c}" with version "${e}":`];f&&b.push(`library name "${c}" contains illegal characters (whitespace or "/")`),f&&y&&b.push("and"),y&&b.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ra.warn(b.join(" "));return}ec(new Jo(`${c}-version`,()=>({library:c,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="firebase-heartbeat-database",oT=1,vu="firebase-heartbeat-store";let Z0=null;function ow(){return Z0||(Z0=AC(aT,oT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(i=>{throw mo.create("idb-open",{originalErrorMessage:i.message})})),Z0}async function lT(i){try{const t=(await ow()).transaction(vu),a=await t.objectStore(vu).get(lw(i));return await t.done,a}catch(e){if(e instanceof ka)Ra.warn(e.message);else{const t=mo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ra.warn(t.message)}}}async function $2(i,e){try{const a=(await ow()).transaction(vu,"readwrite");await a.objectStore(vu).put(e,lw(i)),await a.done}catch(t){if(t instanceof ka)Ra.warn(t.message);else{const a=mo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ra.warn(a.message)}}}function lw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=1024,uT=30;class hT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dT(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=J2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(y=>y.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:c}),this._heartbeatsCache.heartbeats.length>uT){const y=gT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(y,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ra.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=J2(),{heartbeatsToSend:a,unsentEntries:c}=fT(this._heartbeatsCache.heartbeats),f=uf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(t){return Ra.warn(t),""}}}function J2(){return new Date().toISOString().substring(0,10)}function fT(i,e=cT){const t=[];let a=i.slice();for(const c of i){const f=t.find(y=>y.agent===c.agent);if(f){if(f.dates.push(c.date),ex(t)>e){f.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),ex(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class dT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JA()?eC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return $2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return $2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...e.heartbeats]})}else return}}function ex(i){return uf(JSON.stringify({version:2,heartbeats:i})).length}function gT(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let a=1;a<i.length;a++)i[a].date<t&&(t=i[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(i){ec(new Jo("platform-logger",e=>new SC(e),"PRIVATE")),ec(new Jo("heartbeat",e=>new hT(e),"PRIVATE")),po(u1,K2,i),po(u1,K2,"esm2017"),po("fire-js","")}mT("");function W1(i,e){var t={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(i);c<a.length;c++)e.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(i,a[c])&&(t[a[c]]=i[a[c]]);return t}function cw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pT=cw,uw=new Mu("auth","Firebase",cw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new Y1("@firebase/auth");function xT(i,...e){df.logLevel<=Wt.WARN&&df.warn(`Auth (${fc}): ${i}`,...e)}function Zh(i,...e){df.logLevel<=Wt.ERROR&&df.error(`Auth (${fc}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(i,...e){throw Z1(i,...e)}function Ds(i,...e){return Z1(i,...e)}function K1(i,e,t){const a=Object.assign(Object.assign({},pT()),{[e]:t});return new Mu("auth","Firebase",a).create(e,{appName:i.name})}function $o(i){return K1(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yT(i,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&$s(i,"argument-error"),K1(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Z1(i,...e){if(typeof i!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(t,...a)}return uw.create(i,...e)}function At(i,e,...t){if(!i)throw Z1(e,...t)}function Aa(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Zh(e),new Error(e)}function Da(i,e){i||Aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function wT(){return tx()==="http:"||tx()==="https:"}function tx(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wT()||WA()||"connection"in navigator)?navigator.onLine:!0}function vT(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Da(t>e,"Short delay should be less than long delay!"),this.isMobile=YA()||KA()}get(){return ET()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(i,e){Da(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=new Lu(3e4,6e4);function J1(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function sl(i,e,t,a,c={}){return fw(i,c,async()=>{let f={},y={};a&&(e==="GET"?y=a:f={body:JSON.stringify(a)});const b=Ou(Object.assign({key:i.config.apiKey},y)).slice(1),v=await i._getAdditionalHeaders();v["Content-Type"]="application/json",i.languageCode&&(v["X-Firebase-Locale"]=i.languageCode);const w=Object.assign({method:e,headers:v},f);return QA()||(w.referrerPolicy="no-referrer"),hw.fetch()(dw(i,i.config.apiHost,t,b),w)})}async function fw(i,e,t){i._canInitEmulator=!1;const a=Object.assign(Object.assign({},_T),e);try{const c=new CT(i),f=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const y=await f.json();if("needConfirmation"in y)throw Hh(i,"account-exists-with-different-credential",y);if(f.ok&&!("errorMessage"in y))return y;{const b=f.ok?y.errorMessage:y.error.message,[v,w]=b.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(i,"credential-already-in-use",y);if(v==="EMAIL_EXISTS")throw Hh(i,"email-already-in-use",y);if(v==="USER_DISABLED")throw Hh(i,"user-disabled",y);const S=a[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw K1(i,S,w);$s(i,S)}}catch(c){if(c instanceof ka)throw c;$s(i,"network-request-failed",{message:String(c)})}}async function AT(i,e,t,a,c={}){const f=await sl(i,e,t,a,c);return"mfaPendingCredential"in f&&$s(i,"multi-factor-auth-required",{_serverResponse:f}),f}function dw(i,e,t,a){const c=`${e}${t}?${a}`;return i.config.emulator?$1(i.config,c):`${i.config.apiScheme}://${c}`}class CT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Ds(this.auth,"network-request-failed")),bT.get())})}}function Hh(i,e,t){const a={appName:i.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const c=Ds(i,e,a);return c.customData._tokenResponse=t,c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(i,e){return sl(i,"POST","/v1/accounts:delete",e)}async function gw(i,e){return sl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ST(i,e=!1){const t=Ur(i),a=await t.getIdToken(e),c=eg(a);At(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const f=typeof c.firebase=="object"?c.firebase:void 0,y=f==null?void 0:f.sign_in_provider;return{claims:c,token:a,authTime:mu($0(c.auth_time)),issuedAtTime:mu($0(c.iat)),expirationTime:mu($0(c.exp)),signInProvider:y||null,signInSecondFactor:(f==null?void 0:f.sign_in_second_factor)||null}}function $0(i){return Number(i)*1e3}function eg(i){const[e,t,a]=i.split(".");if(e===void 0||t===void 0||a===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const c=Jy(t);return c?JSON.parse(c):(Zh("Failed to decode base64 JWT payload"),null)}catch(c){return Zh("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function nx(i){const e=eg(i);return At(e,"internal-error"),At(typeof e.exp<"u","internal-error"),At(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(i,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ka&&IT(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function IT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const c=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,c)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(i){var e;const t=i.auth,a=await i.getIdToken(),c=await tc(i,gw(t,{idToken:a}));At(c==null?void 0:c.users.length,t,"internal-error");const f=c.users[0];i._notifyReloadListener(f);const y=!((e=f.providerUserInfo)===null||e===void 0)&&e.length?mw(f.providerUserInfo):[],b=DT(i.providerData,y),v=i.isAnonymous,w=!(i.email&&f.passwordHash)&&!(b!=null&&b.length),S=v?w:!1,R={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:b,metadata:new g1(f.createdAt,f.lastLoginAt),isAnonymous:S};Object.assign(i,R)}async function RT(i){const e=Ur(i);await gf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DT(i,e){return[...i.filter(a=>!e.some(c=>c.providerId===a.providerId)),...e]}function mw(i){return i.map(e=>{var{providerId:t}=e,a=W1(e,["providerId"]);return{providerId:t,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(i,e){const t=await fw(i,{},async()=>{const a=Ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:f}=i.config,y=dw(i,c,"/v1/token",`key=${f}`),b=await i._getAdditionalHeaders();return b["Content-Type"]="application/x-www-form-urlencoded",hw.fetch()(y,{method:"POST",headers:b,body:a})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OT(i,e){return sl(i,"POST","/v2/accounts:revokeToken",J1(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){At(e.idToken,"internal-error"),At(typeof e.idToken<"u","internal-error"),At(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){At(e.length!==0,"internal-error");const t=nx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:c,expiresIn:f}=await MT(e,t);this.updateTokensAndExpiration(a,c,Number(f))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:c,expirationTime:f}=t,y=new Wl;return a&&(At(typeof a=="string","internal-error",{appName:e}),y.refreshToken=a),c&&(At(typeof c=="string","internal-error",{appName:e}),y.accessToken=c),f&&(At(typeof f=="number","internal-error",{appName:e}),y.expirationTime=f),y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(i,e){At(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ca{constructor(e){var{uid:t,auth:a,stsTokenManager:c}=e,f=W1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=a,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new g1(f.createdAt||void 0,f.lastLoginAt||void 0)}async getIdToken(e){const t=await tc(this,this.stsTokenManager.getToken(this.auth,e));return At(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ST(this,e)}reload(){return RT(this)}_assign(e){this!==e&&(At(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ca(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await gf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rs(this.auth.app))return Promise.reject($o(this.auth));const e=await this.getIdToken();return await tc(this,TT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var a,c,f,y,b,v,w,S;const R=(a=t.displayName)!==null&&a!==void 0?a:void 0,k=(c=t.email)!==null&&c!==void 0?c:void 0,U=(f=t.phoneNumber)!==null&&f!==void 0?f:void 0,q=(y=t.photoURL)!==null&&y!==void 0?y:void 0,ee=(b=t.tenantId)!==null&&b!==void 0?b:void 0,K=(v=t._redirectEventId)!==null&&v!==void 0?v:void 0,de=(w=t.createdAt)!==null&&w!==void 0?w:void 0,fe=(S=t.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:ie,emailVerified:ve,isAnonymous:je,providerData:Pe,stsTokenManager:H}=t;At(ie&&H,e,"internal-error");const F=Wl.fromJSON(this.name,H);At(typeof ie=="string",e,"internal-error"),oo(R,e.name),oo(k,e.name),At(typeof ve=="boolean",e,"internal-error"),At(typeof je=="boolean",e,"internal-error"),oo(U,e.name),oo(q,e.name),oo(ee,e.name),oo(K,e.name),oo(de,e.name),oo(fe,e.name);const P=new Ca({uid:ie,auth:e,email:k,emailVerified:ve,displayName:R,isAnonymous:je,photoURL:q,phoneNumber:U,tenantId:ee,stsTokenManager:F,createdAt:de,lastLoginAt:fe});return Pe&&Array.isArray(Pe)&&(P.providerData=Pe.map(z=>Object.assign({},z))),K&&(P._redirectEventId=K),P}static async _fromIdTokenResponse(e,t,a=!1){const c=new Wl;c.updateFromServerResponse(t);const f=new Ca({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:a});return await gf(f),f}static async _fromGetAccountInfoResponse(e,t,a){const c=t.users[0];At(c.localId!==void 0,"internal-error");const f=c.providerUserInfo!==void 0?mw(c.providerUserInfo):[],y=!(c.email&&c.passwordHash)&&!(f!=null&&f.length),b=new Wl;b.updateFromIdToken(a);const v=new Ca({uid:c.localId,auth:e,stsTokenManager:b,isAnonymous:y}),w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new g1(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(f!=null&&f.length)};return Object.assign(v,w),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Map;function Ta(i){Da(i instanceof Function,"Expected a class definition");let e=rx.get(i);return e?(Da(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,rx.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pw.type="NONE";const ix=pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(i,e,t){return`firebase:${i}:${e}:${t}`}class Kl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:c,name:f}=this.auth;this.fullUserKey=$h(this.userKey,c.apiKey,f),this.fullPersistenceKey=$h("persistence",c.apiKey,f),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ca._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Kl(Ta(ix),e,a);const c=(await Promise.all(t.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let f=c[0]||Ta(ix);const y=$h(a,e.config.apiKey,e.name);let b=null;for(const w of t)try{const S=await w._get(y);if(S){const R=Ca._fromJSON(e,S);w!==f&&(b=R),f=w;break}}catch{}const v=c.filter(w=>w._shouldAllowMigration);return!f._shouldAllowMigration||!v.length?new Kl(f,e,a):(f=v[0],b&&await f._set(y,b.toJSON()),await Promise.all(t.map(async w=>{if(w!==f)try{await w._remove(y)}catch{}})),new Kl(f,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ew(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_w(e))return"Blackberry";if(bw(e))return"Webos";if(yw(e))return"Safari";if((e.includes("chrome/")||ww(e))&&!e.includes("edge/"))return"Chrome";if(vw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function xw(i=hi()){return/firefox\//i.test(i)}function yw(i=hi()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ww(i=hi()){return/crios\//i.test(i)}function Ew(i=hi()){return/iemobile/i.test(i)}function vw(i=hi()){return/android/i.test(i)}function _w(i=hi()){return/blackberry/i.test(i)}function bw(i=hi()){return/webos/i.test(i)}function tg(i=hi()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function LT(i=hi()){var e;return tg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kT(){return ZA()&&document.documentMode===10}function Aw(i=hi()){return tg(i)||vw(i)||bw(i)||_w(i)||/windows phone/i.test(i)||Ew(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(i,e=[]){let t;switch(i){case"Browser":t=sx(hi());break;case"Worker":t=`${sx(hi())}-${i}`;break;default:t=i}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fc}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=f=>new Promise((y,b)=>{try{const v=e(f);y(v)}catch(v){b(v)}});a.onAbort=t,this.queue.push(a);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(i,e={}){return sl(i,"GET","/v2/passwordPolicy",J1(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=6;class UT{constructor(e){var t,a,c,f;const y=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=y.minPasswordLength)!==null&&t!==void 0?t:jT,y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=y.maxPasswordLength),y.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=y.containsLowercaseCharacter),y.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=y.containsUppercaseCharacter),y.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=y.containsNumericCharacter),y.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=y.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(c=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&c!==void 0?c:"",this.forceUpgradeOnSignin=(f=e.forceUpgradeOnSignin)!==null&&f!==void 0?f:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,a,c,f,y,b;const v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,v),this.validatePasswordCharacterOptions(e,v),v.isValid&&(v.isValid=(t=v.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),v.isValid&&(v.isValid=(a=v.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),v.isValid&&(v.isValid=(c=v.containsLowercaseLetter)!==null&&c!==void 0?c:!0),v.isValid&&(v.isValid=(f=v.containsUppercaseLetter)!==null&&f!==void 0?f:!0),v.isValid&&(v.isValid=(y=v.containsNumericCharacter)!==null&&y!==void 0?y:!0),v.isValid&&(v.isValid=(b=v.containsNonAlphanumericCharacter)!==null&&b!==void 0?b:!0),v}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let c=0;c<e.length;c++)a=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,c,f){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,t,a,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ax(this),this.idTokenSubscription=new ax(this),this.beforeStateQueue=new PT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ta(t)),this._initializationPromise=this.queue(async()=>{var a,c;if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gw(this,{idToken:e}),a=await Ca._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Rs(this.app)){const y=this.app.settings.authIdToken;return y?new Promise(b=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(y).then(b,b))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let c=a,f=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const y=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,b=c==null?void 0:c._redirectEventId,v=await this.tryRedirectSignIn(e);(!y||y===b)&&(v!=null&&v.user)&&(c=v.user,f=!0)}if(!c)return this.directlySetCurrentUser(null);if(!c._redirectEventId){if(f)try{await this.beforeStateQueue.runMiddleware(c)}catch(y){c=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(y))}return c?this.reloadAndSetCurrentUserOrClear(c):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===c._redirectEventId?this.directlySetCurrentUser(c):this.reloadAndSetCurrentUserOrClear(c)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rs(this.app))return Promise.reject($o(this));const t=e?Ur(e):null;return t&&At(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&At(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rs(this.app)?Promise.reject($o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rs(this.app)?Promise.reject($o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BT(this),t=new UT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mu("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await OT(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ta(e)||this._popupRedirectResolver;At(t,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[Ta(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,c){if(this._deleted)return()=>{};const f=typeof t=="function"?t:t.next.bind(t);let y=!1;const b=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(b,this,"internal-error"),b.then(()=>{y||f(this.currentUser)}),typeof t=="function"){const v=e.addObserver(t,a,c);return()=>{y=!0,v()}}else{const v=e.addObserver(t);return()=>{y=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(t["X-Firebase-Client"]=a);const c=await this._getAppCheckToken();return c&&(t["X-Firebase-AppCheck"]=c),t}async _getAppCheckToken(){var e;if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&xT(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Pf(i){return Ur(i)}class ax{constructor(e){this.auth=e,this.observer=null,this.addObserver=sC(t=>this.observer=t)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ng={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FT(i){ng=i}function zT(i){return ng.loadJS(i)}function HT(){return ng.gapiScript}function GT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(i,e){const t=Q1(i,"auth");if(t.isInitialized()){const c=t.getImmediate(),f=t.getOptions();if(hf(f,e??{}))return c;$s(c,"already-initialized")}return t.initialize({options:e})}function YT(i,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(Ta);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function XT(i,e,t){const a=Pf(i);At(a._canInitEmulator,a,"emulator-config-failed"),At(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const c=!1,f=Tw(e),{host:y,port:b}=QT(e),v=b===null?"":`:${b}`;a.config.emulator={url:`${f}//${y}${v}/`},a.settings.appVerificationDisabledForTesting=!0,a.emulatorConfig=Object.freeze({host:y,port:b,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:c})}),WT()}function Tw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function QT(i){const e=Tw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(a);if(c){const f=c[1];return{host:f,port:ox(a.substr(f.length+1))}}else{const[f,y]=a.split(":");return{host:f,port:ox(y)}}}function ox(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function WT(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Aa("not implemented")}_getIdTokenResponse(e){return Aa("not implemented")}_linkToIdToken(e,t){return Aa("not implemented")}_getReauthenticationResolver(e){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(i,e){return AT(i,"POST","/v1/accounts:signInWithIdp",J1(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="http://localhost";class el extends Sw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$s("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:c}=t,f=W1(t,["providerId","signInMethod"]);if(!a||!c)return null;const y=new el(a,c);return y.idToken=f.idToken||void 0,y.accessToken=f.accessToken||void 0,y.secret=f.secret,y.nonce=f.nonce,y.pendingToken=f.pendingToken||null,y}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Zl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:KT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends rg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends ku{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.FACEBOOK_SIGN_IN_METHOD="facebook.com";co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return el._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ba.credential(t,a)}catch{return null}}}ba.GOOGLE_SIGN_IN_METHOD="google.com";ba.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends ku{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.GITHUB_SIGN_IN_METHOD="github.com";uo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends ku{constructor(){super("twitter.com")}static credential(e,t){return el._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ho.credential(t,a)}catch{return null}}}ho.TWITTER_SIGN_IN_METHOD="twitter.com";ho.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,c=!1){const f=await Ca._fromIdTokenResponse(e,a,c),y=lx(a);return new nc({user:f,providerId:y,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const c=lx(a);return new nc({user:e,providerId:c,_tokenResponse:a,operationType:t})}}function lx(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends ka{constructor(e,t,a,c){var f;super(t.code,t.message),this.operationType=a,this.user=c,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:(f=e.tenantId)!==null&&f!==void 0?f:void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,c){return new mf(e,t,a,c)}}function Iw(i,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(i,f,e,a):f})}async function ZT(i,e,t=!1){const a=await tc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return nc._forOperation(i,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(i,e,t=!1){const{auth:a}=i;if(Rs(a.app))return Promise.reject($o(a));const c="reauthenticate";try{const f=await tc(i,Iw(a,c,e,i),t);At(f.idToken,a,"internal-error");const y=eg(f.idToken);At(y,a,"internal-error");const{sub:b}=y;return At(i.uid===b,a,"user-mismatch"),nc._forOperation(i,c,f)}catch(f){throw(f==null?void 0:f.code)==="auth/user-not-found"&&$s(a,"user-mismatch"),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(i,e,t=!1){if(Rs(i.app))return Promise.reject($o(i));const a="signIn",c=await Iw(i,a,e),f=await nc._fromIdTokenResponse(i,a,c);return t||await i._updateCurrentUser(f.user),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(i,e){return sl(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const a=Ur(i),f={idToken:await a.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},y=await tc(a,eS(a.auth,f));a.displayName=y.displayName||null,a.photoURL=y.photoUrl||null;const b=a.providerData.find(({providerId:v})=>v==="password");b&&(b.displayName=a.displayName,b.photoURL=a.photoURL),await a._updateTokensIfNecessary(y)}function nS(i,e,t,a){return Ur(i).onIdTokenChanged(e,t,a)}function rS(i,e,t){return Ur(i).beforeAuthStateChanged(e,t)}function ig(i,e,t,a){return Ur(i).onAuthStateChanged(e,t,a)}function Nw(i){return Ur(i).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=1e3,sS=10;class Dw extends Rw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Aw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),c=this.localCache[t];a!==c&&e(t,c,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((y,b,v)=>{this.notifyListeners(y,v)});return}const a=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const y=this.storage.getItem(a);!t&&this.localCache[a]===y||this.notifyListeners(a,y)},f=this.storage.getItem(a);kT()&&f!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,sS):c()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const c of Array.from(a))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},iS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dw.type="LOCAL";const aS=Dw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Rw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mw.type="SESSION";const Ow=Mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const a=new Bf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:c,data:f}=t.data,y=this.handlersMap[c];if(!(y!=null&&y.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:c});const b=Array.from(y).map(async w=>w(t.origin,f)),v=await oS(b);t.ports[0].postMessage({status:"done",eventId:a,eventType:c,response:v})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(i="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let f,y;return new Promise((b,v)=>{const w=sg("",20);c.port1.start();const S=setTimeout(()=>{v(new Error("unsupported_event"))},a);y={messageChannel:c,onMessage(R){const k=R;if(k.data.eventId===w)switch(k.data.status){case"ack":clearTimeout(S),f=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),b(k.data.response);break;default:clearTimeout(S),clearTimeout(f),v(new Error("invalid_response"));break}}},this.handlers.add(y),c.port1.addEventListener("message",y.onMessage),this.target.postMessage({eventType:e,eventId:w,data:t},[c.port2])}).finally(()=>{y&&this.removeMessageHandler(y)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(){return window}function cS(i){Ws().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(){return typeof Ws().WorkerGlobalScope<"u"&&typeof Ws().importScripts=="function"}async function uS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hS(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function fS(){return Lw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firebaseLocalStorageDb",dS=1,xf="firebaseLocalStorage",Pw="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jf(i,e){return i.transaction([xf],e?"readwrite":"readonly").objectStore(xf)}function gS(){const i=indexedDB.deleteDatabase(kw);return new Pu(i).toPromise()}function m1(){const i=indexedDB.open(kw,dS);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(xf,{keyPath:Pw})}catch(c){t(c)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(xf)?e(a):(a.close(),await gS(),e(await m1()))})})}async function cx(i,e,t){const a=jf(i,!0).put({[Pw]:e,value:t});return new Pu(a).toPromise()}async function mS(i,e){const t=jf(i,!1).get(e),a=await new Pu(t).toPromise();return a===void 0?null:a.value}function ux(i,e){const t=jf(i,!0).delete(e);return new Pu(t).toPromise()}const pS=800,xS=3;class Bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>xS)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bf._getInstance(fS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await uS(),!this.activeServiceWorker)return;this.sender=new lS(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((t=a[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await m1();return await cx(e,pf,"1"),await ux(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>cx(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>mS(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ux(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const f=jf(c,!1).getAll();return new Pu(f).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:c,value:f}of e)a.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(f)&&(this.notifyListeners(c,f),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!a.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const c of Array.from(a))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bw.type="LOCAL";const yS=Bw;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(i,e){return e?Ta(e):(At(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends Sw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wS(i){return JT(i.auth,new ag(i),i.bypassAuthState)}function ES(i){const{auth:e,user:t}=i;return At(t,e,"internal-error"),$T(t,new ag(i),i.bypassAuthState)}async function vS(i){const{auth:e,user:t}=i;return At(t,e,"internal-error"),ZT(t,new ag(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,t,a,c,f=!1){this.auth=e,this.resolver=a,this.user=c,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:c,tenantId:f,error:y,type:b}=e;if(y){this.reject(y);return}const v={auth:this.auth,requestUri:t,sessionId:a,tenantId:f||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(b)(v))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wS;case"linkViaPopup":case"linkViaRedirect":return vS;case"reauthViaPopup":case"reauthViaRedirect":return ES;default:$s(this.auth,"internal-error")}}resolve(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new Lu(2e3,1e4);async function bS(i,e,t){if(Rs(i.app))return Promise.reject(Ds(i,"operation-not-supported-in-this-environment"));const a=Pf(i);yT(i,e,rg);const c=jw(a,t);return new Ko(a,"signInViaPopup",e,c).executeNotNull()}class Ko extends Uw{constructor(e,t,a,c,f){super(e,t,c,f),this.provider=a,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return At(e,this.auth,"internal-error"),e}async onExecution(){Da(this.filter.length===1,"Popup operations only handle one event");const e=sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if(!((a=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_S.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="pendingRedirect",Jh=new Map;class CS extends Uw{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const a=await TS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TS(i,e){const t=NS(e),a=IS(i);if(!await a._isAvailable())return!1;const c=await a._get(t)==="true";return await a._remove(t),c}function SS(i,e){Jh.set(i._key(),e)}function IS(i){return Ta(i._redirectPersistence)}function NS(i){return $h(AS,i.config.apiKey,i.name)}async function RS(i,e,t=!1){if(Rs(i.app))return Promise.reject($o(i));const a=Pf(i),c=jw(a,e),y=await new CS(a,c,t).execute();return y&&!t&&(delete y.user._redirectEventId,await a._persistUserIfCurrent(y.user),await a._setRedirectUser(null,e)),y}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=10*60*1e3;class MS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!Vw(e)){const c=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";t.onError(Ds(this.auth,c))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DS&&this.cachedEventUids.clear(),this.cachedEventUids.has(hx(e))}saveEventToCache(e){this.cachedEventUids.add(hx(e)),this.lastProcessedEventTime=Date.now()}}function hx(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Vw({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(i,e={}){return sl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PS=/^https?/;async function BS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await LS(i);for(const t of e)try{if(jS(t))return}catch{}$s(i,"unauthorized-domain")}function jS(i){const e=d1(),{protocol:t,hostname:a}=new URL(e);if(i.startsWith("chrome-extension://")){const y=new URL(i);return y.hostname===""&&a===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&y.hostname===a}if(!PS.test(t))return!1;if(kS.test(i))return a===i;const c=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Lu(3e4,6e4);function fx(){const i=Ws().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function VS(i){return new Promise((e,t)=>{var a,c,f;function y(){fx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fx(),t(Ds(i,"network-request-failed"))},timeout:US.get()})}if(!((c=(a=Ws().gapi)===null||a===void 0?void 0:a.iframes)===null||c===void 0)&&c.Iframe)e(gapi.iframes.getContext());else if(!((f=Ws().gapi)===null||f===void 0)&&f.load)y();else{const b=GT("iframefcb");return Ws()[b]=()=>{gapi.load?y():t(Ds(i,"network-request-failed"))},zT(`${HT()}?onload=${b}`).catch(v=>t(v))}}).catch(e=>{throw ef=null,e})}let ef=null;function FS(i){return ef=ef||VS(i),ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=new Lu(5e3,15e3),HS="__/auth/iframe",GS="emulator/auth/iframe",qS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XS(i){const e=i.config;At(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?$1(e,GS):`https://${i.config.authDomain}/${HS}`,a={apiKey:e.apiKey,appName:i.name,v:fc},c=YS.get(i.config.apiHost);c&&(a.eid=c);const f=i._getFrameworks();return f.length&&(a.fw=f.join(",")),`${t}?${Ou(a).slice(1)}`}async function QS(i){const e=await FS(i),t=Ws().gapi;return At(t,i,"internal-error"),e.open({where:document.body,url:XS(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qS,dontclear:!0},a=>new Promise(async(c,f)=>{await a.restyle({setHideOnLeave:!1});const y=Ds(i,"network-request-failed"),b=Ws().setTimeout(()=>{f(y)},zS.get());function v(){Ws().clearTimeout(b),c(a)}a.ping(v).then(v,()=>{f(y)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KS=500,ZS=600,$S="_blank",JS="http://localhost";class dx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function e3(i,e,t,a=KS,c=ZS){const f=Math.max((window.screen.availHeight-c)/2,0).toString(),y=Math.max((window.screen.availWidth-a)/2,0).toString();let b="";const v=Object.assign(Object.assign({},WS),{width:a.toString(),height:c.toString(),top:f,left:y}),w=hi().toLowerCase();t&&(b=ww(w)?$S:t),xw(w)&&(e=e||JS,v.scrollbars="yes");const S=Object.entries(v).reduce((k,[U,q])=>`${k}${U}=${q},`,"");if(LT(w)&&b!=="_self")return t3(e||"",b),new dx(null);const R=window.open(e||"",b,S);At(R,i,"popup-blocked");try{R.focus()}catch{}return new dx(R)}function t3(i,e){const t=document.createElement("a");t.href=i,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="__/auth/handler",r3="emulator/auth/handler",i3=encodeURIComponent("fac");async function gx(i,e,t,a,c,f){At(i.config.authDomain,i,"auth-domain-config-required"),At(i.config.apiKey,i,"invalid-api-key");const y={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:a,v:fc,eventId:c};if(e instanceof rg){e.setDefaultLanguage(i.languageCode),y.providerId=e.providerId||"",iC(e.getCustomParameters())||(y.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,R]of Object.entries({}))y[S]=R}if(e instanceof ku){const S=e.getScopes().filter(R=>R!=="");S.length>0&&(y.scopes=S.join(","))}i.tenantId&&(y.tid=i.tenantId);const b=y;for(const S of Object.keys(b))b[S]===void 0&&delete b[S];const v=await i._getAppCheckToken(),w=v?`#${i3}=${encodeURIComponent(v)}`:"";return`${s3(i)}?${Ou(b).slice(1)}${w}`}function s3({config:i}){return i.emulator?$1(i,r3):`https://${i.authDomain}/${n3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="webStorageSupport";class a3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ow,this._completeRedirectFn=RS,this._overrideRedirectResult=SS}async _openPopup(e,t,a,c){var f;Da((f=this.eventManagers[e._key()])===null||f===void 0?void 0:f.manager,"_initialize() not called before _openPopup()");const y=await gx(e,t,a,d1(),c);return e3(e,y,sg())}async _openRedirect(e,t,a,c){await this._originValidation(e);const f=await gx(e,t,a,d1(),c);return cS(f),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:f}=this.eventManagers[t];return c?Promise.resolve(c):(Da(f,"If manager is not set, promise should be"),f)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await QS(e),a=new MS(e);return t.register("authEvent",c=>(At(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:a.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(J0,{type:J0},c=>{var f;const y=(f=c==null?void 0:c[0])===null||f===void 0?void 0:f[J0];y!==void 0&&t(!!y),$s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Aw()||yw()||tg()}}const o3=a3;var mx="@firebase/auth",px="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u3(i){ec(new Jo("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),f=e.getProvider("app-check-internal"),{apiKey:y,authDomain:b}=a.options;At(y&&!y.includes(":"),"invalid-api-key",{appName:a.name});const v={apiKey:y,authDomain:b,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cw(i)},w=new VT(a,c,f,v);return YT(w,t),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),ec(new Jo("auth-internal",e=>{const t=Pf(e.getProvider("auth").getImmediate());return(a=>new l3(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),po(mx,px,c3(i)),po(mx,px,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=5*60,f3=nw("authIdTokenMaxAge")||h3;let xx=null;const d3=i=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>f3)return;const c=t==null?void 0:t.token;xx!==c&&(xx=c,await fetch(i,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function So(i=aw()){const e=Q1(i,"auth");if(e.isInitialized())return e.getImmediate();const t=qT(i,{popupRedirectResolver:o3,persistence:[yS,aS,Ow]}),a=nw("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const f=new URL(a,location.origin);if(location.origin===f.origin){const y=d3(f.toString());rS(t,y,()=>y(t.currentUser)),nS(t,b=>y(b))}}const c=ew("auth");return c&&XT(t,`http://${c}`),t}function g3(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}FT({loadJS(i){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=e,a.onerror=c=>{const f=Ds("internal-error");f.customData=c,t(f)},a.type="text/javascript",a.charset="UTF-8",g3().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u3("Browser");var yx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xo,Fw;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(H,F){function P(){}P.prototype=F.prototype,H.D=F.prototype,H.prototype=new P,H.prototype.constructor=H,H.C=function(z,Q,J){for(var X=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)X[Ve-2]=arguments[Ve];return F.prototype[Q].apply(z,X)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(H,F,P){P||(P=0);var z=Array(16);if(typeof F=="string")for(var Q=0;16>Q;++Q)z[Q]=F.charCodeAt(P++)|F.charCodeAt(P++)<<8|F.charCodeAt(P++)<<16|F.charCodeAt(P++)<<24;else for(Q=0;16>Q;++Q)z[Q]=F[P++]|F[P++]<<8|F[P++]<<16|F[P++]<<24;F=H.g[0],P=H.g[1],Q=H.g[2];var J=H.g[3],X=F+(J^P&(Q^J))+z[0]+3614090360&4294967295;F=P+(X<<7&4294967295|X>>>25),X=J+(Q^F&(P^Q))+z[1]+3905402710&4294967295,J=F+(X<<12&4294967295|X>>>20),X=Q+(P^J&(F^P))+z[2]+606105819&4294967295,Q=J+(X<<17&4294967295|X>>>15),X=P+(F^Q&(J^F))+z[3]+3250441966&4294967295,P=Q+(X<<22&4294967295|X>>>10),X=F+(J^P&(Q^J))+z[4]+4118548399&4294967295,F=P+(X<<7&4294967295|X>>>25),X=J+(Q^F&(P^Q))+z[5]+1200080426&4294967295,J=F+(X<<12&4294967295|X>>>20),X=Q+(P^J&(F^P))+z[6]+2821735955&4294967295,Q=J+(X<<17&4294967295|X>>>15),X=P+(F^Q&(J^F))+z[7]+4249261313&4294967295,P=Q+(X<<22&4294967295|X>>>10),X=F+(J^P&(Q^J))+z[8]+1770035416&4294967295,F=P+(X<<7&4294967295|X>>>25),X=J+(Q^F&(P^Q))+z[9]+2336552879&4294967295,J=F+(X<<12&4294967295|X>>>20),X=Q+(P^J&(F^P))+z[10]+4294925233&4294967295,Q=J+(X<<17&4294967295|X>>>15),X=P+(F^Q&(J^F))+z[11]+2304563134&4294967295,P=Q+(X<<22&4294967295|X>>>10),X=F+(J^P&(Q^J))+z[12]+1804603682&4294967295,F=P+(X<<7&4294967295|X>>>25),X=J+(Q^F&(P^Q))+z[13]+4254626195&4294967295,J=F+(X<<12&4294967295|X>>>20),X=Q+(P^J&(F^P))+z[14]+2792965006&4294967295,Q=J+(X<<17&4294967295|X>>>15),X=P+(F^Q&(J^F))+z[15]+1236535329&4294967295,P=Q+(X<<22&4294967295|X>>>10),X=F+(Q^J&(P^Q))+z[1]+4129170786&4294967295,F=P+(X<<5&4294967295|X>>>27),X=J+(P^Q&(F^P))+z[6]+3225465664&4294967295,J=F+(X<<9&4294967295|X>>>23),X=Q+(F^P&(J^F))+z[11]+643717713&4294967295,Q=J+(X<<14&4294967295|X>>>18),X=P+(J^F&(Q^J))+z[0]+3921069994&4294967295,P=Q+(X<<20&4294967295|X>>>12),X=F+(Q^J&(P^Q))+z[5]+3593408605&4294967295,F=P+(X<<5&4294967295|X>>>27),X=J+(P^Q&(F^P))+z[10]+38016083&4294967295,J=F+(X<<9&4294967295|X>>>23),X=Q+(F^P&(J^F))+z[15]+3634488961&4294967295,Q=J+(X<<14&4294967295|X>>>18),X=P+(J^F&(Q^J))+z[4]+3889429448&4294967295,P=Q+(X<<20&4294967295|X>>>12),X=F+(Q^J&(P^Q))+z[9]+568446438&4294967295,F=P+(X<<5&4294967295|X>>>27),X=J+(P^Q&(F^P))+z[14]+3275163606&4294967295,J=F+(X<<9&4294967295|X>>>23),X=Q+(F^P&(J^F))+z[3]+4107603335&4294967295,Q=J+(X<<14&4294967295|X>>>18),X=P+(J^F&(Q^J))+z[8]+1163531501&4294967295,P=Q+(X<<20&4294967295|X>>>12),X=F+(Q^J&(P^Q))+z[13]+2850285829&4294967295,F=P+(X<<5&4294967295|X>>>27),X=J+(P^Q&(F^P))+z[2]+4243563512&4294967295,J=F+(X<<9&4294967295|X>>>23),X=Q+(F^P&(J^F))+z[7]+1735328473&4294967295,Q=J+(X<<14&4294967295|X>>>18),X=P+(J^F&(Q^J))+z[12]+2368359562&4294967295,P=Q+(X<<20&4294967295|X>>>12),X=F+(P^Q^J)+z[5]+4294588738&4294967295,F=P+(X<<4&4294967295|X>>>28),X=J+(F^P^Q)+z[8]+2272392833&4294967295,J=F+(X<<11&4294967295|X>>>21),X=Q+(J^F^P)+z[11]+1839030562&4294967295,Q=J+(X<<16&4294967295|X>>>16),X=P+(Q^J^F)+z[14]+4259657740&4294967295,P=Q+(X<<23&4294967295|X>>>9),X=F+(P^Q^J)+z[1]+2763975236&4294967295,F=P+(X<<4&4294967295|X>>>28),X=J+(F^P^Q)+z[4]+1272893353&4294967295,J=F+(X<<11&4294967295|X>>>21),X=Q+(J^F^P)+z[7]+4139469664&4294967295,Q=J+(X<<16&4294967295|X>>>16),X=P+(Q^J^F)+z[10]+3200236656&4294967295,P=Q+(X<<23&4294967295|X>>>9),X=F+(P^Q^J)+z[13]+681279174&4294967295,F=P+(X<<4&4294967295|X>>>28),X=J+(F^P^Q)+z[0]+3936430074&4294967295,J=F+(X<<11&4294967295|X>>>21),X=Q+(J^F^P)+z[3]+3572445317&4294967295,Q=J+(X<<16&4294967295|X>>>16),X=P+(Q^J^F)+z[6]+76029189&4294967295,P=Q+(X<<23&4294967295|X>>>9),X=F+(P^Q^J)+z[9]+3654602809&4294967295,F=P+(X<<4&4294967295|X>>>28),X=J+(F^P^Q)+z[12]+3873151461&4294967295,J=F+(X<<11&4294967295|X>>>21),X=Q+(J^F^P)+z[15]+530742520&4294967295,Q=J+(X<<16&4294967295|X>>>16),X=P+(Q^J^F)+z[2]+3299628645&4294967295,P=Q+(X<<23&4294967295|X>>>9),X=F+(Q^(P|~J))+z[0]+4096336452&4294967295,F=P+(X<<6&4294967295|X>>>26),X=J+(P^(F|~Q))+z[7]+1126891415&4294967295,J=F+(X<<10&4294967295|X>>>22),X=Q+(F^(J|~P))+z[14]+2878612391&4294967295,Q=J+(X<<15&4294967295|X>>>17),X=P+(J^(Q|~F))+z[5]+4237533241&4294967295,P=Q+(X<<21&4294967295|X>>>11),X=F+(Q^(P|~J))+z[12]+1700485571&4294967295,F=P+(X<<6&4294967295|X>>>26),X=J+(P^(F|~Q))+z[3]+2399980690&4294967295,J=F+(X<<10&4294967295|X>>>22),X=Q+(F^(J|~P))+z[10]+4293915773&4294967295,Q=J+(X<<15&4294967295|X>>>17),X=P+(J^(Q|~F))+z[1]+2240044497&4294967295,P=Q+(X<<21&4294967295|X>>>11),X=F+(Q^(P|~J))+z[8]+1873313359&4294967295,F=P+(X<<6&4294967295|X>>>26),X=J+(P^(F|~Q))+z[15]+4264355552&4294967295,J=F+(X<<10&4294967295|X>>>22),X=Q+(F^(J|~P))+z[6]+2734768916&4294967295,Q=J+(X<<15&4294967295|X>>>17),X=P+(J^(Q|~F))+z[13]+1309151649&4294967295,P=Q+(X<<21&4294967295|X>>>11),X=F+(Q^(P|~J))+z[4]+4149444226&4294967295,F=P+(X<<6&4294967295|X>>>26),X=J+(P^(F|~Q))+z[11]+3174756917&4294967295,J=F+(X<<10&4294967295|X>>>22),X=Q+(F^(J|~P))+z[2]+718787259&4294967295,Q=J+(X<<15&4294967295|X>>>17),X=P+(J^(Q|~F))+z[9]+3951481745&4294967295,H.g[0]=H.g[0]+F&4294967295,H.g[1]=H.g[1]+(Q+(X<<21&4294967295|X>>>11))&4294967295,H.g[2]=H.g[2]+Q&4294967295,H.g[3]=H.g[3]+J&4294967295}a.prototype.u=function(H,F){F===void 0&&(F=H.length);for(var P=F-this.blockSize,z=this.B,Q=this.h,J=0;J<F;){if(Q==0)for(;J<=P;)c(this,H,J),J+=this.blockSize;if(typeof H=="string"){for(;J<F;)if(z[Q++]=H.charCodeAt(J++),Q==this.blockSize){c(this,z),Q=0;break}}else for(;J<F;)if(z[Q++]=H[J++],Q==this.blockSize){c(this,z),Q=0;break}}this.h=Q,this.o+=F},a.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var F=1;F<H.length-8;++F)H[F]=0;var P=8*this.o;for(F=H.length-8;F<H.length;++F)H[F]=P&255,P/=256;for(this.u(H),H=Array(16),F=P=0;4>F;++F)for(var z=0;32>z;z+=8)H[P++]=this.g[F]>>>z&255;return H};function f(H,F){var P=b;return Object.prototype.hasOwnProperty.call(P,H)?P[H]:P[H]=F(H)}function y(H,F){this.h=F;for(var P=[],z=!0,Q=H.length-1;0<=Q;Q--){var J=H[Q]|0;z&&J==F||(P[Q]=J,z=!1)}this.g=P}var b={};function v(H){return-128<=H&&128>H?f(H,function(F){return new y([F|0],0>F?-1:0)}):new y([H|0],0>H?-1:0)}function w(H){if(isNaN(H)||!isFinite(H))return R;if(0>H)return K(w(-H));for(var F=[],P=1,z=0;H>=P;z++)F[z]=H/P|0,P*=4294967296;return new y(F,0)}function S(H,F){if(H.length==0)throw Error("number format error: empty string");if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(H.charAt(0)=="-")return K(S(H.substring(1),F));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=w(Math.pow(F,8)),z=R,Q=0;Q<H.length;Q+=8){var J=Math.min(8,H.length-Q),X=parseInt(H.substring(Q,Q+J),F);8>J?(J=w(Math.pow(F,J)),z=z.j(J).add(w(X))):(z=z.j(P),z=z.add(w(X)))}return z}var R=v(0),k=v(1),U=v(16777216);i=y.prototype,i.m=function(){if(ee(this))return-K(this).m();for(var H=0,F=1,P=0;P<this.g.length;P++){var z=this.i(P);H+=(0<=z?z:4294967296+z)*F,F*=4294967296}return H},i.toString=function(H){if(H=H||10,2>H||36<H)throw Error("radix out of range: "+H);if(q(this))return"0";if(ee(this))return"-"+K(this).toString(H);for(var F=w(Math.pow(H,6)),P=this,z="";;){var Q=ve(P,F).g;P=de(P,Q.j(F));var J=((0<P.g.length?P.g[0]:P.h)>>>0).toString(H);if(P=Q,q(P))return J+z;for(;6>J.length;)J="0"+J;z=J+z}},i.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h};function q(H){if(H.h!=0)return!1;for(var F=0;F<H.g.length;F++)if(H.g[F]!=0)return!1;return!0}function ee(H){return H.h==-1}i.l=function(H){return H=de(this,H),ee(H)?-1:q(H)?0:1};function K(H){for(var F=H.g.length,P=[],z=0;z<F;z++)P[z]=~H.g[z];return new y(P,~H.h).add(k)}i.abs=function(){return ee(this)?K(this):this},i.add=function(H){for(var F=Math.max(this.g.length,H.g.length),P=[],z=0,Q=0;Q<=F;Q++){var J=z+(this.i(Q)&65535)+(H.i(Q)&65535),X=(J>>>16)+(this.i(Q)>>>16)+(H.i(Q)>>>16);z=X>>>16,J&=65535,X&=65535,P[Q]=X<<16|J}return new y(P,P[P.length-1]&-2147483648?-1:0)};function de(H,F){return H.add(K(F))}i.j=function(H){if(q(this)||q(H))return R;if(ee(this))return ee(H)?K(this).j(K(H)):K(K(this).j(H));if(ee(H))return K(this.j(K(H)));if(0>this.l(U)&&0>H.l(U))return w(this.m()*H.m());for(var F=this.g.length+H.g.length,P=[],z=0;z<2*F;z++)P[z]=0;for(z=0;z<this.g.length;z++)for(var Q=0;Q<H.g.length;Q++){var J=this.i(z)>>>16,X=this.i(z)&65535,Ve=H.i(Q)>>>16,ae=H.i(Q)&65535;P[2*z+2*Q]+=X*ae,fe(P,2*z+2*Q),P[2*z+2*Q+1]+=J*ae,fe(P,2*z+2*Q+1),P[2*z+2*Q+1]+=X*Ve,fe(P,2*z+2*Q+1),P[2*z+2*Q+2]+=J*Ve,fe(P,2*z+2*Q+2)}for(z=0;z<F;z++)P[z]=P[2*z+1]<<16|P[2*z];for(z=F;z<2*F;z++)P[z]=0;return new y(P,0)};function fe(H,F){for(;(H[F]&65535)!=H[F];)H[F+1]+=H[F]>>>16,H[F]&=65535,F++}function ie(H,F){this.g=H,this.h=F}function ve(H,F){if(q(F))throw Error("division by zero");if(q(H))return new ie(R,R);if(ee(H))return F=ve(K(H),F),new ie(K(F.g),K(F.h));if(ee(F))return F=ve(H,K(F)),new ie(K(F.g),F.h);if(30<H.g.length){if(ee(H)||ee(F))throw Error("slowDivide_ only works with positive integers.");for(var P=k,z=F;0>=z.l(H);)P=je(P),z=je(z);var Q=Pe(P,1),J=Pe(z,1);for(z=Pe(z,2),P=Pe(P,2);!q(z);){var X=J.add(z);0>=X.l(H)&&(Q=Q.add(P),J=X),z=Pe(z,1),P=Pe(P,1)}return F=de(H,Q.j(F)),new ie(Q,F)}for(Q=R;0<=H.l(F);){for(P=Math.max(1,Math.floor(H.m()/F.m())),z=Math.ceil(Math.log(P)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),J=w(P),X=J.j(F);ee(X)||0<X.l(H);)P-=z,J=w(P),X=J.j(F);q(J)&&(J=k),Q=Q.add(J),H=de(H,X)}return new ie(Q,H)}i.A=function(H){return ve(this,H).h},i.and=function(H){for(var F=Math.max(this.g.length,H.g.length),P=[],z=0;z<F;z++)P[z]=this.i(z)&H.i(z);return new y(P,this.h&H.h)},i.or=function(H){for(var F=Math.max(this.g.length,H.g.length),P=[],z=0;z<F;z++)P[z]=this.i(z)|H.i(z);return new y(P,this.h|H.h)},i.xor=function(H){for(var F=Math.max(this.g.length,H.g.length),P=[],z=0;z<F;z++)P[z]=this.i(z)^H.i(z);return new y(P,this.h^H.h)};function je(H){for(var F=H.g.length+1,P=[],z=0;z<F;z++)P[z]=H.i(z)<<1|H.i(z-1)>>>31;return new y(P,H.h)}function Pe(H,F){var P=F>>5;F%=32;for(var z=H.g.length-P,Q=[],J=0;J<z;J++)Q[J]=0<F?H.i(J+P)>>>F|H.i(J+P+1)<<32-F:H.i(J+P);return new y(Q,H.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Fw=a,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.A,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=w,y.fromString=S,xo=y}).apply(typeof yx<"u"?yx:typeof self<"u"?self:typeof window<"u"?window:{});var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zw,cu,Hw,tf,p1,Gw,qw,Yw;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,I,D){return x==Array.prototype||x==Object.prototype||(x[I]=D.value),x};function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gh=="object"&&Gh];for(var I=0;I<x.length;++I){var D=x[I];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var a=t(this);function c(x,I){if(I)e:{var D=a;x=x.split(".");for(var V=0;V<x.length-1;V++){var ce=x[V];if(!(ce in D))break e;D=D[ce]}x=x[x.length-1],V=D[x],I=I(V),I!=V&&I!=null&&e(D,x,{configurable:!0,writable:!0,value:I})}}function f(x,I){x instanceof String&&(x+="");var D=0,V=!1,ce={next:function(){if(!V&&D<x.length){var ye=D++;return{value:I(ye,x[ye]),done:!1}}return V=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}c("Array.prototype.values",function(x){return x||function(){return f(this,function(I,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var y=y||{},b=this||self;function v(x){var I=typeof x;return I=I!="object"?I:x?Array.isArray(x)?"array":I:"null",I=="array"||I=="object"&&typeof x.length=="number"}function w(x){var I=typeof x;return I=="object"&&x!=null||I=="function"}function S(x,I,D){return x.call.apply(x.bind,arguments)}function R(x,I,D){if(!x)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,V),x.apply(I,ce)}}return function(){return x.apply(I,arguments)}}function k(x,I,D){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:R,k.apply(null,arguments)}function U(x,I){var D=Array.prototype.slice.call(arguments,1);return function(){var V=D.slice();return V.push.apply(V,arguments),x.apply(this,V)}}function q(x,I){function D(){}D.prototype=I.prototype,x.aa=I.prototype,x.prototype=new D,x.prototype.constructor=x,x.Qb=function(V,ce,ye){for(var Ke=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)Ke[Yt-2]=arguments[Yt];return I.prototype[ce].apply(V,Ke)}}function ee(x){const I=x.length;if(0<I){const D=Array(I);for(let V=0;V<I;V++)D[V]=x[V];return D}return[]}function K(x,I){for(let D=1;D<arguments.length;D++){const V=arguments[D];if(v(V)){const ce=x.length||0,ye=V.length||0;x.length=ce+ye;for(let Ke=0;Ke<ye;Ke++)x[ce+Ke]=V[Ke]}else x.push(V)}}class de{constructor(I,D){this.i=I,this.j=D,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function fe(x){return/^[\s\xa0]*$/.test(x)}function ie(){var x=b.navigator;return x&&(x=x.userAgent)?x:""}function ve(x){return ve[" "](x),x}ve[" "]=function(){};var je=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function Pe(x,I,D){for(const V in x)I.call(D,x[V],V,x)}function H(x,I){for(const D in x)I.call(void 0,x[D],D,x)}function F(x){const I={};for(const D in x)I[D]=x[D];return I}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(x,I){let D,V;for(let ce=1;ce<arguments.length;ce++){V=arguments[ce];for(D in V)x[D]=V[D];for(let ye=0;ye<P.length;ye++)D=P[ye],Object.prototype.hasOwnProperty.call(V,D)&&(x[D]=V[D])}}function Q(x){var I=1;x=x.split(":");const D=[];for(;0<I&&x.length;)D.push(x.shift()),I--;return x.length&&D.push(x.join(":")),D}function J(x){b.setTimeout(()=>{throw x},0)}function X(){var x=it;let I=null;return x.g&&(I=x.g,x.g=x.g.next,x.g||(x.h=null),I.next=null),I}class Ve{constructor(){this.h=this.g=null}add(I,D){const V=ae.get();V.set(I,D),this.h?this.h.next=V:this.g=V,this.h=V}}var ae=new de(()=>new Se,x=>x.reset());class Se{constructor(){this.next=this.g=this.h=null}set(I,D){this.h=I,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Xe=!1,it=new Ve,te=()=>{const x=b.Promise.resolve(void 0);Ae=()=>{x.then(Re)}};var Re=()=>{for(var x;x=X();){try{x.h.call(x.g)}catch(D){J(D)}var I=ae;I.j(x),100>I.h&&(I.h++,x.next=I.g,I.g=x)}Xe=!1};function Be(){this.s=this.s,this.C=this.C}Be.prototype.s=!1,Be.prototype.ma=function(){this.s||(this.s=!0,this.N())},Be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(x,I){this.type=x,this.g=this.target=I,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var x=!1,I=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const D=()=>{};b.addEventListener("test",D,I),b.removeEventListener("test",D,I)}catch{}return x}();function mt(x,I){if(Ge.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var D=this.type=x.type,V=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=I,I=x.relatedTarget){if(je){e:{try{ve(I.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(I=null)}}else D=="mouseover"?I=x.fromElement:D=="mouseout"&&(I=x.toElement);this.relatedTarget=I,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:Me[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&mt.aa.h.call(this)}}q(mt,Ge);var Me={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var rn="closure_listenable_"+(1e6*Math.random()|0),at=0;function Gt(x,I,D,V,ce){this.listener=x,this.proxy=null,this.src=I,this.type=D,this.capture=!!V,this.ha=ce,this.key=++at,this.da=this.fa=!1}function Rt(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function kt(x){this.src=x,this.g={},this.h=0}kt.prototype.add=function(x,I,D,V,ce){var ye=x.toString();x=this.g[ye],x||(x=this.g[ye]=[],this.h++);var Ke=pt(x,I,V,ce);return-1<Ke?(I=x[Ke],D||(I.fa=!1)):(I=new Gt(I,this.src,ye,!!V,ce),I.fa=D,x.push(I)),I};function $n(x,I){var D=I.type;if(D in x.g){var V=x.g[D],ce=Array.prototype.indexOf.call(V,I,void 0),ye;(ye=0<=ce)&&Array.prototype.splice.call(V,ce,1),ye&&(Rt(I),x.g[D].length==0&&(delete x.g[D],x.h--))}}function pt(x,I,D,V){for(var ce=0;ce<x.length;++ce){var ye=x[ce];if(!ye.da&&ye.listener==I&&ye.capture==!!D&&ye.ha==V)return ce}return-1}var ze="closure_lm_"+(1e6*Math.random()|0),$e={};function ht(x,I,D,V,ce){if(Array.isArray(I)){for(var ye=0;ye<I.length;ye++)ht(x,I[ye],D,V,ce);return null}return D=qn(D),x&&x[rn]?x.K(I,D,w(V)?!!V.capture:!1,ce):Ce(x,I,D,!1,V,ce)}function Ce(x,I,D,V,ce,ye){if(!I)throw Error("Invalid event type");var Ke=w(ce)?!!ce.capture:!!ce,Yt=Ln(x);if(Yt||(x[ze]=Yt=new kt(x)),D=Yt.add(I,D,V,Ke,ye),D.proxy)return D;if(V=De(),D.proxy=V,V.src=x,V.listener=D,x.addEventListener)qe||(ce=Ke),ce===void 0&&(ce=!1),x.addEventListener(I.toString(),V,ce);else if(x.attachEvent)x.attachEvent(He(I.toString()),V);else if(x.addListener&&x.removeListener)x.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return D}function De(){function x(D){return I.call(x.src,x.listener,D)}const I=Jn;return x}function Ye(x,I,D,V,ce){if(Array.isArray(I))for(var ye=0;ye<I.length;ye++)Ye(x,I[ye],D,V,ce);else V=w(V)?!!V.capture:!!V,D=qn(D),x&&x[rn]?(x=x.i,I=String(I).toString(),I in x.g&&(ye=x.g[I],D=pt(ye,D,V,ce),-1<D&&(Rt(ye[D]),Array.prototype.splice.call(ye,D,1),ye.length==0&&(delete x.g[I],x.h--)))):x&&(x=Ln(x))&&(I=x.g[I.toString()],x=-1,I&&(x=pt(I,D,V,ce)),(D=-1<x?I[x]:null)&&Je(D))}function Je(x){if(typeof x!="number"&&x&&!x.da){var I=x.src;if(I&&I[rn])$n(I.i,x);else{var D=x.type,V=x.proxy;I.removeEventListener?I.removeEventListener(D,V,x.capture):I.detachEvent?I.detachEvent(He(D),V):I.addListener&&I.removeListener&&I.removeListener(V),(D=Ln(I))?($n(D,x),D.h==0&&(D.src=null,I[ze]=null)):Rt(x)}}}function He(x){return x in $e?$e[x]:$e[x]="on"+x}function Jn(x,I){if(x.da)x=!0;else{I=new mt(I,this);var D=x.listener,V=x.ha||x.src;x.fa&&Je(x),x=D.call(V,I)}return x}function Ln(x){return x=x[ze],x instanceof kt?x:null}var ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function qn(x){return typeof x=="function"?x:(x[ot]||(x[ot]=function(I){return x.handleEvent(I)}),x[ot])}function Pt(){Be.call(this),this.i=new kt(this),this.M=this,this.F=null}q(Pt,Be),Pt.prototype[rn]=!0,Pt.prototype.removeEventListener=function(x,I,D,V){Ye(this,x,I,D,V)};function sn(x,I){var D,V=x.F;if(V)for(D=[];V;V=V.F)D.push(V);if(x=x.M,V=I.type||I,typeof I=="string")I=new Ge(I,x);else if(I instanceof Ge)I.target=I.target||x;else{var ce=I;I=new Ge(V,x),z(I,ce)}if(ce=!0,D)for(var ye=D.length-1;0<=ye;ye--){var Ke=I.g=D[ye];ce=gn(Ke,V,!0,I)&&ce}if(Ke=I.g=x,ce=gn(Ke,V,!0,I)&&ce,ce=gn(Ke,V,!1,I)&&ce,D)for(ye=0;ye<D.length;ye++)Ke=I.g=D[ye],ce=gn(Ke,V,!1,I)&&ce}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var x=this.i,I;for(I in x.g){for(var D=x.g[I],V=0;V<D.length;V++)Rt(D[V]);delete x.g[I],x.h--}}this.F=null},Pt.prototype.K=function(x,I,D,V){return this.i.add(String(x),I,!1,D,V)},Pt.prototype.L=function(x,I,D,V){return this.i.add(String(x),I,!0,D,V)};function gn(x,I,D,V){if(I=x.i.g[String(I)],!I)return!0;I=I.concat();for(var ce=!0,ye=0;ye<I.length;++ye){var Ke=I[ye];if(Ke&&!Ke.da&&Ke.capture==D){var Yt=Ke.listener,jn=Ke.ha||Ke.src;Ke.fa&&$n(x.i,Ke),ce=Yt.call(jn,V)!==!1&&ce}}return ce&&!V.defaultPrevented}function Yn(x,I,D){if(typeof x=="function")D&&(x=k(x,D));else if(x&&typeof x.handleEvent=="function")x=k(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:b.setTimeout(x,I||0)}function Pi(x){x.g=Yn(()=>{x.g=null,x.i&&(x.i=!1,Pi(x))},x.l);const I=x.h;x.h=null,x.m.apply(null,I)}class Bi extends Be{constructor(I,D){super(),this.m=I,this.l=D,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Pi(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(x){Be.call(this),this.h=x,this.g={}}q(ji,Be);var hn=[];function ke(x){Pe(x.g,function(I,D){this.g.hasOwnProperty(D)&&Je(I)},x),x.g={}}ji.prototype.N=function(){ji.aa.N.call(this),ke(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cn=b.JSON.stringify,Nt=b.JSON.parse,Ot=class{stringify(x){return b.JSON.stringify(x,void 0)}parse(x){return b.JSON.parse(x,void 0)}};function lr(){}lr.prototype.h=null;function yi(x){return x.h||(x.h=x.i())}function Vr(){}var Tt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xn(){Ge.call(this,"d")}q(Xn,Ge);function ti(){Ge.call(this,"c")}q(ti,Ge);var Fr={},er=null;function ts(){return er=er||new Pt}Fr.La="serverreachability";function Vn(x){Ge.call(this,Fr.La,x)}q(Vn,Ge);function zr(x){const I=ts();sn(I,new Vn(I))}Fr.STAT_EVENT="statevent";function Ui(x,I){Ge.call(this,Fr.STAT_EVENT,x),this.stat=I}q(Ui,Ge);function en(x){const I=ts();sn(I,new Ui(I,x))}Fr.Ma="timingevent";function Pa(x,I){Ge.call(this,Fr.Ma,x),this.size=I}q(Pa,Ge);function Rr(x,I){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){x()},I)}function wi(){this.g=!0}wi.prototype.xa=function(){this.g=!1};function cr(x,I,D,V,ce,ye){x.info(function(){if(x.g)if(ye)for(var Ke="",Yt=ye.split("&"),jn=0;jn<Yt.length;jn++){var Xt=Yt[jn].split("=");if(1<Xt.length){var Sn=Xt[0];Xt=Xt[1];var Hn=Sn.split("_");Ke=2<=Hn.length&&Hn[1]=="type"?Ke+(Sn+"="+Xt+"&"):Ke+(Sn+"=redacted&")}}else Ke=null;else Ke=ye;return"XMLHTTP REQ ("+V+") [attempt "+ce+"]: "+I+`
`+D+`
`+Ke})}function Ei(x,I,D,V,ce,ye,Ke){x.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ce+"]: "+I+`
`+D+`
`+ye+" "+Ke})}function Qn(x,I,D,V){x.info(function(){return"XMLHTTP TEXT ("+I+"): "+En(x,D)+(V?" "+V:"")})}function Ze(x,I){x.info(function(){return"TIMEOUT: "+I})}wi.prototype.info=function(){};function En(x,I){if(!x.g)return I;if(!I)return null;try{var D=JSON.parse(I);if(D){for(x=0;x<D.length;x++)if(Array.isArray(D[x])){var V=D[x];if(!(2>V.length)){var ce=V[1];if(Array.isArray(ce)&&!(1>ce.length)){var ye=ce[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var Ke=1;Ke<ce.length;Ke++)ce[Ke]=""}}}}return Cn(D)}catch{return I}}var kn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ni;function Vi(){}q(Vi,lr),Vi.prototype.g=function(){return new XMLHttpRequest},Vi.prototype.i=function(){return{}},ni=new Vi;function Hr(x,I,D,V){this.j=x,this.i=I,this.l=D,this.R=V||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dr}function Dr(){this.i=null,this.g="",this.h=!1}var vi={},ks={};function mn(x,I,D){x.L=1,x.v=Rn(wt(I)),x.m=D,x.P=!0,vn(x,null)}function vn(x,I){x.F=Date.now(),We(x),x.A=wt(x.v);var D=x.A,V=x.R;Array.isArray(V)||(V=[String(V)]),_n(D.i,"t",V),x.C=0,D=x.j.J,x.h=new Dr,x.g=ml(x.j,D?I:null,!x.m),0<x.O&&(x.M=new Bi(k(x.Y,x,x.g),x.O)),I=x.U,D=x.g,V=x.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(hn[0]=ce.toString()),ce=hn);for(var ye=0;ye<ce.length;ye++){var Ke=ht(D,ce[ye],V||I.handleEvent,!1,I.h||I);if(!Ke)break;I.g[Ke.key]=Ke}I=x.H?F(x.H):{},x.m?(x.u||(x.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,I)):(x.u="GET",x.g.ea(x.A,x.u,null,I)),zr(),cr(x.i,x.u,x.A,x.l,x.R,x.m)}Hr.prototype.ca=function(x){x=x.target;const I=this.M;I&&Ti(x)==3?I.j():this.Y(x)},Hr.prototype.Y=function(x){try{if(x==this.g)e:{const Hn=Ti(this.g);var I=this.g.Ba();const nr=this.g.Z();if(!(3>Hn)&&(Hn!=3||this.g&&(this.h.h||this.g.oa()||fl(this.g)))){this.J||Hn!=4||I==7||(I==8||0>=nr?zr(3):zr(2)),me(this);var D=this.g.Z();this.X=D;t:if(Z(this)){var V=fl(this.g);x="";var ce=V.length,ye=Ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vt(this),Et(this);var Ke="";break t}this.h.i=new b.TextDecoder}for(I=0;I<ce;I++)this.h.h=!0,x+=this.h.i.decode(V[I],{stream:!(ye&&I==ce-1)});V.length=0,this.h.g+=x,this.C=0,Ke=this.h.g}else Ke=this.g.oa();if(this.o=D==200,Ei(this.i,this.u,this.A,this.l,this.R,Hn,D),this.o){if(this.T&&!this.K){t:{if(this.g){var Yt,jn=this.g;if((Yt=jn.g?jn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fe(Yt)){var Xt=Yt;break t}}Xt=null}if(D=Xt)Qn(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mr(this,D);else{this.o=!1,this.s=3,en(12),Vt(this),Et(this);break e}}if(this.P){D=!0;let pr;for(;!this.J&&this.C<Ke.length;)if(pr=Ee(this,Ke),pr==ks){Hn==4&&(this.s=4,en(14),D=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(pr==vi){this.s=4,en(15),Qn(this.i,this.l,Ke,"[Invalid Chunk]"),D=!1;break}else Qn(this.i,this.l,pr,null),mr(this,pr);if(Z(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Hn!=4||Ke.length!=0||this.h.h||(this.s=1,en(16),D=!1),this.o=this.o&&D,!D)Qn(this.i,this.l,Ke,"[Invalid Chunked Response]"),Vt(this),Et(this);else if(0<Ke.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+Ke.length),Cs(Sn),Sn.M=!0,en(11))}}else Qn(this.i,this.l,Ke,null),mr(this,Ke);Hn==4&&Vt(this),this.o&&!this.J&&(Hn==4?Tn(this.j,this):(this.o=!1,We(this)))}else on(this.g),D==400&&0<Ke.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),Vt(this),Et(this)}}}catch{}finally{}};function Z(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Ee(x,I){var D=x.C,V=I.indexOf(`
`,D);return V==-1?ks:(D=Number(I.substring(D,V)),isNaN(D)?vi:(V+=1,V+D>I.length?ks:(I=I.slice(V,V+D),x.C=V+D,I)))}Hr.prototype.cancel=function(){this.J=!0,Vt(this)};function We(x){x.S=Date.now()+x.I,_t(x,x.I)}function _t(x,I){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Rr(k(x.ba,x),I)}function me(x){x.B&&(b.clearTimeout(x.B),x.B=null)}Hr.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Ze(this.i,this.A),this.L!=2&&(zr(),en(17)),Vt(this),this.s=2,Et(this)):_t(this,this.S-x)};function Et(x){x.j.G==0||x.J||Tn(x.j,x)}function Vt(x){me(x);var I=x.M;I&&typeof I.ma=="function"&&I.ma(),x.M=null,ke(x.U),x.g&&(I=x.g,x.g=null,I.abort(),I.ma())}function mr(x,I){try{var D=x.j;if(D.G!=0&&(D.g==x||ns(D.h,x))){if(!x.K&&ns(D.h,x)&&D.G==3){try{var V=D.Da.g.parse(I)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ce=V;if(ce[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<x.F)Vs(D),ja(D);else break e;Do(D),en(18)}}else D.za=ce[1],0<D.za-D.T&&37500>ce[2]&&D.F&&D.v==0&&!D.C&&(D.C=Rr(k(D.Za,D),6e3));if(1>=Lt(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else qr(D,11)}else if((x.K||D.g==x)&&Vs(D),!fe(I))for(ce=D.Da.g.parse(I),I=0;I<ce.length;I++){let Xt=ce[I];if(D.T=Xt[0],Xt=Xt[1],D.G==2)if(Xt[0]=="c"){D.K=Xt[1],D.ia=Xt[2];const Sn=Xt[3];Sn!=null&&(D.la=Sn,D.j.info("VER="+D.la));const Hn=Xt[4];Hn!=null&&(D.Aa=Hn,D.j.info("SVER="+D.Aa));const nr=Xt[5];nr!=null&&typeof nr=="number"&&0<nr&&(V=1.5*nr,D.L=V,D.j.info("backChannelRequestTimeoutMs_="+V)),V=D;const pr=x.g;if(pr){const fr=pr.g?pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fr){var ye=V.h;ye.g||fr.indexOf("spdy")==-1&&fr.indexOf("quic")==-1&&fr.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(rs(ye,ye.h),ye.h=null))}if(V.D){const Mo=pr.g?pr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(V.ya=Mo,Qe(V.I,V.D,Mo))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-x.F,D.j.info("Handshake RTT: "+D.R+"ms")),V=D;var Ke=x;if(V.qa=ct(V,V.J?V.ia:null,V.W),Ke.K){ri(V.h,Ke);var Yt=Ke,jn=V.L;jn&&(Yt.I=jn),Yt.B&&(me(Yt),We(Yt)),V.g=Ke}else gl(V);0<D.i.length&&bt(D)}else Xt[0]!="stop"&&Xt[0]!="close"||qr(D,7);else D.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?qr(D,7):Si(D):Xt[0]!="noop"&&D.l&&D.l.ta(Xt),D.v=0)}}zr(4)}catch{}}var yc=class{constructor(x,I){this.g=x,this.map=I}};function qt(x){this.l=x||10,b.PerformanceNavigationTiming?(x=b.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(b.chrome&&b.chrome.loadTimes&&b.chrome.loadTimes()&&b.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ft(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Lt(x){return x.h?1:x.g?x.g.size:0}function ns(x,I){return x.h?x.h==I:x.g?x.g.has(I):!1}function rs(x,I){x.g?x.g.add(I):x.h=I}function ri(x,I){x.h&&x.h==I?x.h=null:x.g&&x.g.has(I)&&x.g.delete(I)}qt.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Zt(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let I=x.i;for(const D of x.g.values())I=I.concat(D.D);return I}return ee(x.i)}function Fi(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(v(x)){for(var I=[],D=x.length,V=0;V<D;V++)I.push(x[V]);return I}I=[],D=0;for(V in x)I[D++]=x[V];return I}function wc(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(v(x)||typeof x=="string"){var I=[];x=x.length;for(var D=0;D<x;D++)I.push(D);return I}I=[],D=0;for(const V in x)I[D++]=V;return I}}}function pn(x,I){if(x.forEach&&typeof x.forEach=="function")x.forEach(I,void 0);else if(v(x)||typeof x=="string")Array.prototype.forEach.call(x,I,void 0);else for(var D=wc(x),V=Fi(x),ce=V.length,ye=0;ye<ce;ye++)I.call(void 0,V[ye],D&&D[ye],x)}var _i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(x,I){if(x){x=x.split("&");for(var D=0;D<x.length;D++){var V=x[D].indexOf("="),ce=null;if(0<=V){var ye=x[D].substring(0,V);ce=x[D].substring(V+1)}else ye=x[D];I(ye,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function ii(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof ii){this.h=x.h,Pn(this,x.j),this.o=x.o,this.g=x.g,ue(this,x.s),this.l=x.l;var I=x.i,D=new Ai;D.i=I.i,I.g&&(D.g=new Map(I.g),D.h=I.h),G(this,D),this.m=x.m}else x&&(I=String(x).match(_i))?(this.h=!1,Pn(this,I[1]||"",!0),this.o=ur(I[2]||""),this.g=ur(I[3]||"",!0),ue(this,I[4]),this.l=ur(I[5]||"",!0),G(this,I[6]||"",!0),this.m=ur(I[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}ii.prototype.toString=function(){var x=[],I=this.j;I&&x.push(bi(I,Mr,!0),":");var D=this.g;return(D||I=="file")&&(x.push("//"),(I=this.o)&&x.push(bi(I,Mr,!0),"@"),x.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&x.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&x.push("/"),x.push(bi(D,D.charAt(0)=="/"?xn:lt,!0))),(D=this.i.toString())&&x.push("?",D),(D=this.m)&&x.push("#",bi(D,Ec)),x.join("")};function wt(x){return new ii(x)}function Pn(x,I,D){x.j=D?ur(I,!0):I,x.j&&(x.j=x.j.replace(/:$/,""))}function ue(x,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);x.s=I}else x.s=null}function G(x,I,D){I instanceof Ai?(x.i=I,Ci(x.i,x.h)):(D||(I=bi(I,hl)),x.i=new Ai(I,x.h))}function Qe(x,I,D){x.i.set(I,D)}function Rn(x){return Qe(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function ur(x,I){return x?I?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function bi(x,I,D){return typeof x=="string"?(x=encodeURI(x).replace(I,Ro),D&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Ro(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Mr=/[#\/\?@]/g,lt=/[#\?:]/g,xn=/[#\?]/g,hl=/[#\?@]/g,Ec=/#/g;function Ai(x,I){this.h=this.g=null,this.i=x||null,this.j=!!I}function Gr(x){x.g||(x.g=new Map,x.h=0,x.i&&Ba(x.i,function(I,D){x.add(decodeURIComponent(I.replace(/\+/g," ")),D)}))}i=Ai.prototype,i.add=function(x,I){Gr(this),this.i=null,x=fi(this,x);var D=this.g.get(x);return D||this.g.set(x,D=[]),D.push(I),this.h+=1,this};function Ps(x,I){Gr(x),I=fi(x,I),x.g.has(I)&&(x.i=null,x.h-=x.g.get(I).length,x.g.delete(I))}function _s(x,I){return Gr(x),I=fi(x,I),x.g.has(I)}i.forEach=function(x,I){Gr(this),this.g.forEach(function(D,V){D.forEach(function(ce){x.call(I,ce,V,this)},this)},this)},i.na=function(){Gr(this);const x=Array.from(this.g.values()),I=Array.from(this.g.keys()),D=[];for(let V=0;V<I.length;V++){const ce=x[V];for(let ye=0;ye<ce.length;ye++)D.push(I[V])}return D},i.V=function(x){Gr(this);let I=[];if(typeof x=="string")_s(this,x)&&(I=I.concat(this.g.get(fi(this,x))));else{x=Array.from(this.g.values());for(let D=0;D<x.length;D++)I=I.concat(x[D])}return I},i.set=function(x,I){return Gr(this),this.i=null,x=fi(this,x),_s(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[I]),this.h+=1,this},i.get=function(x,I){return x?(x=this.V(x),0<x.length?String(x[0]):I):I};function _n(x,I,D){Ps(x,I),0<D.length&&(x.i=null,x.g.set(fi(x,I),ee(D)),x.h+=D.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],I=Array.from(this.g.keys());for(var D=0;D<I.length;D++){var V=I[D];const ye=encodeURIComponent(String(V)),Ke=this.V(V);for(V=0;V<Ke.length;V++){var ce=ye;Ke[V]!==""&&(ce+="="+encodeURIComponent(String(Ke[V]))),x.push(ce)}}return this.i=x.join("&")};function fi(x,I){return I=String(I),x.j&&(I=I.toLowerCase()),I}function Ci(x,I){I&&!x.j&&(Gr(x),x.i=null,x.g.forEach(function(D,V){var ce=V.toLowerCase();V!=ce&&(Ps(this,V),_n(this,ce,D))},x)),x.j=I}function ft(x,I){const D=new wi;if(b.Image){const V=new Image;V.onload=U(gt,D,"TestLoadImage: loaded",!0,I,V),V.onerror=U(gt,D,"TestLoadImage: error",!1,I,V),V.onabort=U(gt,D,"TestLoadImage: abort",!1,I,V),V.ontimeout=U(gt,D,"TestLoadImage: timeout",!1,I,V),b.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=x}else I(!1)}function ta(x,I){const D=new wi,V=new AbortController,ce=setTimeout(()=>{V.abort(),gt(D,"TestPingServer: timeout",!1,I)},1e4);fetch(x,{signal:V.signal}).then(ye=>{clearTimeout(ce),ye.ok?gt(D,"TestPingServer: ok",!0,I):gt(D,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ce),gt(D,"TestPingServer: error",!1,I)})}function gt(x,I,D,V,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),V(D)}catch{}}function Bn(){this.g=new Ot}function is(x,I,D){const V=D||"";try{pn(x,function(ce,ye){let Ke=ce;w(ce)&&(Ke=Cn(ce)),I.push(V+ye+"="+encodeURIComponent(Ke))})}catch(ce){throw I.push(V+"type="+encodeURIComponent("_badmap")),ce}}function ss(x){this.l=x.Ub||null,this.j=x.eb||!1}q(ss,lr),ss.prototype.g=function(){return new as(this.l,this.j)},ss.prototype.i=function(x){return function(){return x}}({});function as(x,I){Pt.call(this),this.D=x,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(as,Pt),i=as.prototype,i.open=function(x,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=I,this.readyState=1,si(this)},i.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(I.body=x),(this.D||b).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},i.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof b.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zi(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function zi(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}i.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var I=x.value?x.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!x.done}))&&(this.response=this.responseText+=I)}x.done?os(this):si(this),this.readyState==3&&zi(this)}},i.Ra=function(x){this.g&&(this.response=this.responseText=x,os(this))},i.Qa=function(x){this.g&&(this.response=x,os(this))},i.ga=function(){this.g&&os(this)};function os(x){x.readyState=4,x.l=null,x.j=null,x.v=null,si(x)}i.setRequestHeader=function(x,I){this.u.append(x,I)},i.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],I=this.h.entries();for(var D=I.next();!D.done;)D=D.value,x.push(D[0]+": "+D[1]),D=I.next();return x.join(`\r
`)};function si(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(as.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function bs(x){let I="";return Pe(x,function(D,V){I+=V,I+=":",I+=D,I+=`\r
`}),I}function Fn(x,I,D){e:{for(V in D){var V=!1;break e}V=!0}V||(D=bs(D),typeof x=="string"?D!=null&&encodeURIComponent(String(D)):Qe(x,I,D))}function an(x){Pt.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(an,Pt);var ls=/^https?$/i,Hi=["POST","PUT"];i=an.prototype,i.Ha=function(x){this.J=x},i.ea=function(x,I,D,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);I=I?I.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ni.g(),this.v=this.o?yi(this.o):yi(ni),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(I,String(x),!0),this.B=!1}catch(ye){br(this,ye);return}if(x=D||"",D=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ce in V)D.set(ce,V[ce]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ye of V.keys())D.set(ye,V.get(ye));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(D.keys()).find(ye=>ye.toLowerCase()=="content-type"),ce=b.FormData&&x instanceof b.FormData,!(0<=Array.prototype.indexOf.call(Hi,I,void 0))||V||ce||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Ke]of D)this.g.setRequestHeader(ye,Ke);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ia(this),this.u=!0,this.g.send(x),this.u=!1}catch(ye){br(this,ye)}};function br(x,I){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=I,x.m=5,na(x),Gi(x)}function na(x){x.A||(x.A=!0,sn(x,"complete"),sn(x,"error"))}i.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,sn(this,"complete"),sn(this,"abort"),Gi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),an.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ra(this):this.bb())},i.bb=function(){ra(this)};function ra(x){if(x.h&&typeof y<"u"&&(!x.v[1]||Ti(x)!=4||x.Z()!=2)){if(x.u&&Ti(x)==4)Yn(x.Ea,0,x);else if(sn(x,"readystatechange"),Ti(x)==4){x.h=!1;try{const Ke=x.Z();e:switch(Ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var D;if(!(D=I)){var V;if(V=Ke===0){var ce=String(x.D).match(_i)[1]||null;!ce&&b.self&&b.self.location&&(ce=b.self.location.protocol.slice(0,-1)),V=!ls.test(ce?ce.toLowerCase():"")}D=V}if(D)sn(x,"complete"),sn(x,"success");else{x.m=6;try{var ye=2<Ti(x)?x.g.statusText:""}catch{ye=""}x.l=ye+" ["+x.Z()+"]",na(x)}}finally{Gi(x)}}}}function Gi(x,I){if(x.g){ia(x);const D=x.g,V=x.v[0]?()=>{}:null;x.g=null,x.v=null,I||sn(x,"ready");try{D.onreadystatechange=V}catch{}}}function ia(x){x.I&&(b.clearTimeout(x.I),x.I=null)}i.isActive=function(){return!!this.g};function Ti(x){return x.g?x.g.readyState:0}i.Z=function(){try{return 2<Ti(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(x){if(this.g){var I=this.g.responseText;return x&&I.indexOf(x)==0&&(I=I.substring(x.length)),Nt(I)}};function fl(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function on(x){const I={};x=(x.g&&2<=Ti(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<x.length;V++){if(fe(x[V]))continue;var D=Q(x[V]);const ce=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const ye=I[ce]||[];I[ce]=ye,ye.push(D)}H(I,function(V){return V.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(x,I,D){return D&&D.internalChannelParams&&D.internalChannelParams[x]||I}function As(x){this.Aa=0,this.i=[],this.j=new wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bs("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bs("baseRetryDelayMs",5e3,x),this.cb=Bs("retryDelaySeedMs",1e4,x),this.Wa=Bs("forwardChannelMaxRetries",2,x),this.wa=Bs("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new qt(x&&x.concurrentRequestLimit),this.Da=new Bn,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=As.prototype,i.la=8,i.G=1,i.connect=function(x,I,D,V){en(0),this.W=x,this.H=I||{},D&&V!==void 0&&(this.H.OSID=D,this.H.OAID=V),this.F=this.X,this.I=ct(this,null,this.W),bt(this)};function Si(x){if(xe(x),x.G==3){var I=x.U++,D=wt(x.I);if(Qe(D,"SID",x.K),Qe(D,"RID",I),Qe(D,"TYPE","terminate"),Us(x,D),I=new Hr(x,x.j,I),I.L=2,I.v=Rn(wt(D)),D=!1,b.navigator&&b.navigator.sendBeacon)try{D=b.navigator.sendBeacon(I.v.toString(),"")}catch{}!D&&b.Image&&(new Image().src=I.v,D=!0),D||(I.g=ml(I.j,null),I.g.ea(I.v)),I.F=Date.now(),We(I)}ln(x)}function ja(x){x.g&&(Cs(x),x.g.cancel(),x.g=null)}function xe(x){ja(x),x.u&&(b.clearTimeout(x.u),x.u=null),Vs(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&b.clearTimeout(x.s),x.s=null)}function bt(x){if(!Ft(x.h)&&!x.s){x.s=!0;var I=x.Ga;Ae||te(),Xe||(Ae(),Xe=!0),it.add(I,x),x.B=0}}function hr(x,I){return Lt(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=I.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Rr(k(x.Ga,x,I),Fs(x,x.B)),x.B++,!0)}i.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const ce=new Hr(this,this.j,x);let ye=this.o;if(this.S&&(ye?(ye=F(ye),z(ye,this.S)):ye=this.S),this.m!==null||this.O||(ce.H=ye,ye=null),this.P)e:{for(var I=0,D=0;D<this.i.length;D++){t:{var V=this.i[D];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(I+=V,4096<I){I=D;break e}if(I===4096||D===this.i.length-1){I=D+1;break e}}I=1e3}else I=1e3;I=dl(this,ce,I),D=wt(this.I),Qe(D,"RID",x),Qe(D,"CVER",22),this.D&&Qe(D,"X-HTTP-Session-Id",this.D),Us(this,D),ye&&(this.O?I="headers="+encodeURIComponent(String(bs(ye)))+"&"+I:this.m&&Fn(D,this.m,ye)),rs(this.h,ce),this.Ua&&Qe(D,"TYPE","init"),this.P?(Qe(D,"$req",I),Qe(D,"SID","null"),ce.T=!0,mn(ce,D,null)):mn(ce,D,I),this.G=2}}else this.G==3&&(x?js(this,x):this.i.length==0||Ft(this.h)||js(this))};function js(x,I){var D;I?D=I.l:D=x.U++;const V=wt(x.I);Qe(V,"SID",x.K),Qe(V,"RID",D),Qe(V,"AID",x.T),Us(x,V),x.m&&x.o&&Fn(V,x.m,x.o),D=new Hr(x,x.j,D,x.B+1),x.m===null&&(D.H=x.o),I&&(x.i=I.D.concat(x.i)),I=dl(x,D,1e3),D.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),rs(x.h,D),mn(D,V,I)}function Us(x,I){x.H&&Pe(x.H,function(D,V){Qe(I,V,D)}),x.l&&pn({},function(D,V){Qe(I,V,D)})}function dl(x,I,D){D=Math.min(x.i.length,D);var V=x.l?k(x.l.Na,x.l,x):null;e:{var ce=x.i;let ye=-1;for(;;){const Ke=["count="+D];ye==-1?0<D?(ye=ce[0].g,Ke.push("ofs="+ye)):ye=0:Ke.push("ofs="+ye);let Yt=!0;for(let jn=0;jn<D;jn++){let Xt=ce[jn].g;const Sn=ce[jn].map;if(Xt-=ye,0>Xt)ye=Math.max(0,ce[jn].g-100),Yt=!1;else try{is(Sn,Ke,"req"+Xt+"_")}catch{V&&V(Sn)}}if(Yt){V=Ke.join("&");break e}}}return x=x.i.splice(0,D),I.D=x,V}function gl(x){if(!x.g&&!x.u){x.Y=1;var I=x.Fa;Ae||te(),Xe||(Ae(),Xe=!0),it.add(I,x),x.v=0}}function Do(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Rr(k(x.Fa,x),Fs(x,x.v)),x.v++,!0)}i.Fa=function(){if(this.u=null,zn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Rr(k(this.ab,this),x)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),ja(this),zn(this))};function Cs(x){x.A!=null&&(b.clearTimeout(x.A),x.A=null)}function zn(x){x.g=new Hr(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var I=wt(x.qa);Qe(I,"RID","rpc"),Qe(I,"SID",x.K),Qe(I,"AID",x.T),Qe(I,"CI",x.F?"0":"1"),!x.F&&x.ja&&Qe(I,"TO",x.ja),Qe(I,"TYPE","xmlhttp"),Us(x,I),x.m&&x.o&&Fn(I,x.m,x.o),x.L&&(x.g.I=x.L);var D=x.g;x=x.ia,D.L=1,D.v=Rn(wt(I)),D.m=null,D.P=!0,vn(D,x)}i.Za=function(){this.C!=null&&(this.C=null,ja(this),Do(this),en(19))};function Vs(x){x.C!=null&&(b.clearTimeout(x.C),x.C=null)}function Tn(x,I){var D=null;if(x.g==I){Vs(x),Cs(x),x.g=null;var V=2}else if(ns(x.h,I))D=I.D,ri(x.h,I),V=1;else return;if(x.G!=0){if(I.o)if(V==1){D=I.m?I.m.length:0,I=Date.now()-I.F;var ce=x.B;V=ts(),sn(V,new Pa(V,D)),bt(x)}else gl(x);else if(ce=I.s,ce==3||ce==0&&0<I.X||!(V==1&&hr(x,I)||V==2&&Do(x)))switch(D&&0<D.length&&(I=x.h,I.i=I.i.concat(D)),ce){case 1:qr(x,5);break;case 4:qr(x,10);break;case 3:qr(x,6);break;default:qr(x,2)}}}function Fs(x,I){let D=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(D*=2),D*I}function qr(x,I){if(x.j.info("Error code "+I),I==2){var D=k(x.fb,x),V=x.Xa;const ce=!V;V=new ii(V||"//www.google.com/images/cleardot.gif"),b.location&&b.location.protocol=="http"||Pn(V,"https"),Rn(V),ce?ft(V.toString(),D):ta(V.toString(),D)}else en(2);x.G=0,x.l&&x.l.sa(I),ln(x),xe(x)}i.fb=function(x){x?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function ln(x){if(x.G=0,x.ka=[],x.l){const I=Zt(x.h);(I.length!=0||x.i.length!=0)&&(K(x.ka,I),K(x.ka,x.i),x.h.i.length=0,ee(x.i),x.i.length=0),x.l.ra()}}function ct(x,I,D){var V=D instanceof ii?wt(D):new ii(D);if(V.g!="")I&&(V.g=I+"."+V.g),ue(V,V.s);else{var ce=b.location;V=ce.protocol,I=I?I+"."+ce.hostname:ce.hostname,ce=+ce.port;var ye=new ii(null);V&&Pn(ye,V),I&&(ye.g=I),ce&&ue(ye,ce),D&&(ye.l=D),V=ye}return D=x.D,I=x.ya,D&&I&&Qe(V,D,I),Qe(V,"VER",x.la),Us(x,V),V}function ml(x,I,D){if(I&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=x.Ca&&!x.pa?new an(new ss({eb:D})):new an(x.pa),I.Ha(x.J),I}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function fn(){}i=fn.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ii(){}Ii.prototype.g=function(x,I){return new tr(x,I)};function tr(x,I){Pt.call(this),this.g=new As(I),this.l=x,this.h=I&&I.messageUrlParams||null,x=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(x?x["X-WebChannel-Content-Type"]=I.messageContentType:x={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(x?x["X-WebChannel-Client-Profile"]=I.va:x={"X-WebChannel-Client-Profile":I.va}),this.g.S=x,(x=I&&I.Sb)&&!fe(x)&&(this.g.m=x),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!fe(I)&&(this.g.D=I,x=this.h,x!==null&&I in x&&(x=this.h,I in x&&delete x[I])),this.j=new Ni(this)}q(tr,Pt),tr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tr.prototype.close=function(){Si(this.g)},tr.prototype.o=function(x){var I=this.g;if(typeof x=="string"){var D={};D.__data__=x,x=D}else this.u&&(D={},D.__data__=Cn(x),x=D);I.i.push(new yc(I.Ya++,x)),I.G==3&&bt(I)},tr.prototype.N=function(){this.g.l=null,delete this.j,Si(this.g),delete this.g,tr.aa.N.call(this)};function pl(x){Xn.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var I=x.__sm__;if(I){e:{for(const D in I){x=D;break e}x=void 0}(this.i=x)&&(x=this.i,I=I!==null&&x in I?I[x]:void 0),this.data=I}else this.data=x}q(pl,Xn);function di(){ti.call(this),this.status=1}q(di,ti);function Ni(x){this.g=x}q(Ni,fn),Ni.prototype.ua=function(){sn(this.g,"a")},Ni.prototype.ta=function(x){sn(this.g,new pl(x))},Ni.prototype.sa=function(x){sn(this.g,new di)},Ni.prototype.ra=function(){sn(this.g,"b")},Ii.prototype.createWebChannel=Ii.prototype.g,tr.prototype.send=tr.prototype.o,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,Yw=function(){return new Ii},qw=function(){return ts()},Gw=Fr,p1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,tf=kn,Nn.COMPLETE="complete",Hw=Nn,Vr.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,cu=Vr,an.prototype.listenOnce=an.prototype.L,an.prototype.getLastError=an.prototype.Ka,an.prototype.getLastErrorCode=an.prototype.Ba,an.prototype.getStatus=an.prototype.Z,an.prototype.getResponseJson=an.prototype.Oa,an.prototype.getResponseText=an.prototype.oa,an.prototype.send=an.prototype.ea,an.prototype.setWithCredentials=an.prototype.Ha,zw=an}).apply(typeof Gh<"u"?Gh:typeof self<"u"?self:typeof window<"u"?window:{});const wx="@firebase/firestore",Ex="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Y1("@firebase/firestore");function Hl(){return tl.logLevel}function et(i,...e){if(tl.logLevel<=Wt.DEBUG){const t=e.map(og);tl.debug(`Firestore (${dc}): ${i}`,...t)}}function Ma(i,...e){if(tl.logLevel<=Wt.ERROR){const t=e.map(og);tl.error(`Firestore (${dc}): ${i}`,...t)}}function rc(i,...e){if(tl.logLevel<=Wt.WARN){const t=e.map(og);tl.warn(`Firestore (${dc}): ${i}`,...t)}}function og(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(i="Unexpected state"){const e=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: `+i;throw Ma(e),new Error(e)}function dn(i,e){i||vt()}function It(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends ka{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ci.UNAUTHENTICATED))}shutdown(){}}class p3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class x3{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dn(this.o===void 0);let a=this.i;const c=v=>this.i!==a?(a=this.i,t(v)):Promise.resolve();let f=new Na;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Na,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const v=f;e.enqueueRetryable(async()=>{await v.promise,await c(this.currentUser)})},b=v=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit(v=>b(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?b(v):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Na)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(dn(typeof a.accessToken=="string"),new Xw(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dn(e===null||typeof e=="string"),new ci(e)}}class y3{constructor(e,t,a){this.l=e,this.h=t,this.P=a,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class w3{constructor(e,t,a){this.l=e,this.h=t,this.P=a}getToken(){return Promise.resolve(new y3(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E3{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Rs(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){dn(this.o===void 0);const a=f=>{f.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const y=f.token!==this.R;return this.R=f.token,et("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>a(f))};const c=f=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.A.getImmediate({optional:!0});f?c(f):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new vx(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dn(typeof t.token=="string"),this.R=t.token,new vx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const c=v3(40);for(let f=0;f<c.length;++f)a.length<20&&c[f]<t&&(a+=e.charAt(c[f]%62))}return a}}function Jt(i,e){return i<e?-1:i>e?1:0}function ic(i,e,t){return i.length===e.length&&i.every((a,c)=>t(a,e[c]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=-62135596800,bx=1e6;class Ir{static now(){return Ir.fromMillis(Date.now())}static fromDate(e){return Ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*bx);return new Ir(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nt(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nt(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_x)throw new nt(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bx}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-_x;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Ir(0,0))}static max(){return new Ct(new Ir(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="__name__";class Qs{constructor(e,t,a){t===void 0?t=0:t>e.length&&vt(),a===void 0?a=e.length-t:a>e.length-t&&vt(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Qs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qs?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let c=0;c<a;c++){const f=Qs.compareSegments(e.get(c),t.get(c));if(f!==0)return f}return Math.sign(e.length-t.length)}static compareSegments(e,t){const a=Qs.isNumericId(e),c=Qs.isNumericId(t);return a&&!c?-1:!a&&c?1:a&&c?Qs.extractNumericId(e).compare(Qs.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xo.fromString(e.substring(4,e.length-2))}}class On extends Qs{construct(e,t,a){return new On(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new nt(Ie.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(c=>c.length>0))}return new On(t)}static emptyPath(){return new On([])}}const _3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jr extends Qs{construct(e,t,a){return new Jr(e,t,a)}static isValidIdentifier(e){return _3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ax}static keyField(){return new Jr([Ax])}static fromServerFormat(e){const t=[];let a="",c=0;const f=()=>{if(a.length===0)throw new nt(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let y=!1;for(;c<e.length;){const b=e[c];if(b==="\\"){if(c+1===e.length)throw new nt(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[c+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new nt(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=v,c+=2}else b==="`"?(y=!y,c++):b!=="."||y?(a+=b,c++):(f(),c++)}if(f(),y)throw new nt(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jr(t)}static emptyPath(){return new Jr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(On.fromString(e))}static fromName(e){return new dt(On.fromString(e).popFirst(5))}static empty(){return new dt(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&On.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return On.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new On(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;function b3(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,c=Ct.fromTimestamp(a===1e9?new Ir(t+1,0):new Ir(t,a));return new Eo(c,dt.empty(),e)}function A3(i){return new Eo(i.readTime,i.key,_u)}class Eo{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new Eo(Ct.min(),dt.empty(),_u)}static max(){return new Eo(Ct.max(),dt.empty(),_u)}}function C3(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=dt.comparator(i.documentKey,e.documentKey),t!==0?t:Jt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(i){if(i.code!==Ie.FAILED_PRECONDITION||i.message!==T3)throw i;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((a,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(a,c)},this.catchCallback=f=>{this.wrapFailure(t,f).next(a,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,a)=>{t(e)})}static reject(e){return new Ne((t,a)=>{a(e)})}static waitFor(e){return new Ne((t,a)=>{let c=0,f=0,y=!1;e.forEach(b=>{++c,b.next(()=>{++f,y&&f===c&&t()},v=>a(v))}),y=!0,f===c&&t()})}static or(e){let t=Ne.resolve(!1);for(const a of e)t=t.next(c=>c?Ne.resolve(c):a());return t}static forEach(e,t){const a=[];return e.forEach((c,f)=>{a.push(t.call(this,c,f))}),this.waitFor(a)}static mapArray(e,t){return new Ne((a,c)=>{const f=e.length,y=new Array(f);let b=0;for(let v=0;v<f;v++){const w=v;t(e[w]).next(S=>{y[w]=S,++b,b===f&&a(y)},S=>c(S))}})}static doWhile(e,t){return new Ne((a,c)=>{const f=()=>{e()===!0?t().next(()=>{f()},c):a()};f()})}}function I3(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mc(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.oe(a),this._e=a=>t.writeSequenceNumber(a))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Uf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function Vf(i){return i==null}function yf(i){return i===0&&1/i==-1/0}function N3(i){return typeof i=="number"&&Number.isInteger(i)&&!yf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="";function R3(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Cx(e)),e=D3(i.get(t),e);return Cx(e)}function D3(i,e){let t=e;const a=i.length;for(let c=0;c<a;c++){const f=i.charAt(c);switch(f){case"\0":t+="";break;case Ww:t+="";break;default:t+=f}}return t}function Cx(i){return i+Ww+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Io(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Kw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new Zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const c=this.comparator(e,a.key);if(c===0)return t+a.left.size;c<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,a,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?a(e.key,t):1,t&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,a,c,f){this.key=e,this.value=t,this.color=a??$r.RED,this.left=c??$r.EMPTY,this.right=f??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,c,f){return new $r(e??this.key,t??this.value,a??this.color,c??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let c=this;const f=a(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,t,a),null):f===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,a)),c.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return $r.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1;$r.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,t,a,c,f){return this}insert(e,t,a){return new $r(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const c=a.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sx(this.data.getIterator())}getIteratorFrom(e){return new Sx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof Nr)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(this.comparator(c,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nr(this.comparator);return t.data=e,t}}class Sx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.fields=e,e.sort(Jr.comparator)}static empty(){return new Ji([])}unionWith(e){let t=new Nr(Jr.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(t,a)=>t.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(c){try{return atob(c)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new Zw("Invalid base64 string: "+f):f}}(e);return new ei(t)}static fromUint8Array(e){const t=function(c){let f="";for(let y=0;y<c.length;++y)f+=String.fromCharCode(c[y]);return f}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const a=new Uint8Array(t.length);for(let c=0;c<t.length;c++)a[c]=t.charCodeAt(c);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const M3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(i){if(dn(!!i),typeof i=="string"){let e=0;const t=M3.exec(i);if(dn(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:gr(i.seconds),nanos:gr(i.nanos)}}function gr(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function _o(i){return typeof i=="string"?ei.fromBase64String(i):ei.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="server_timestamp",Jw="__type__",eE="__previous_value__",tE="__local_write_time__";function cg(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Jw])===null||t===void 0?void 0:t.stringValue)===$w}function Ff(i){const e=i.mapValue.fields[eE];return cg(e)?Ff(e):e}function bu(i){const e=vo(i.mapValue.fields[tE].timestampValue);return new Ir(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,t,a,c,f,y,b,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=c,this.ssl=f,this.forceLongPolling=y,this.autoDetectLongPolling=b,this.longPollingOptions=v,this.useFetchStreams=w}}const wf="(default)";class Au{constructor(e,t){this.projectId=e,this.database=t||wf}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===wf}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="__type__",L3="__max__",Yh={mapValue:{}},rE="__vector__",Ef="value";function bo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?cg(i)?4:P3(i)?9007199254740991:k3(i)?10:11:vt()}function Js(i,e){if(i===e)return!0;const t=bo(i);if(t!==bo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return bu(i).isEqual(bu(e));case 3:return function(c,f){if(typeof c.timestampValue=="string"&&typeof f.timestampValue=="string"&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const y=vo(c.timestampValue),b=vo(f.timestampValue);return y.seconds===b.seconds&&y.nanos===b.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(c,f){return _o(c.bytesValue).isEqual(_o(f.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(c,f){return gr(c.geoPointValue.latitude)===gr(f.geoPointValue.latitude)&&gr(c.geoPointValue.longitude)===gr(f.geoPointValue.longitude)}(i,e);case 2:return function(c,f){if("integerValue"in c&&"integerValue"in f)return gr(c.integerValue)===gr(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const y=gr(c.doubleValue),b=gr(f.doubleValue);return y===b?yf(y)===yf(b):isNaN(y)&&isNaN(b)}return!1}(i,e);case 9:return ic(i.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:case 11:return function(c,f){const y=c.mapValue.fields||{},b=f.mapValue.fields||{};if(Tx(y)!==Tx(b))return!1;for(const v in y)if(y.hasOwnProperty(v)&&(b[v]===void 0||!Js(y[v],b[v])))return!1;return!0}(i,e);default:return vt()}}function Cu(i,e){return(i.values||[]).find(t=>Js(t,e))!==void 0}function sc(i,e){if(i===e)return 0;const t=bo(i),a=bo(e);if(t!==a)return Jt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jt(i.booleanValue,e.booleanValue);case 2:return function(f,y){const b=gr(f.integerValue||f.doubleValue),v=gr(y.integerValue||y.doubleValue);return b<v?-1:b>v?1:b===v?0:isNaN(b)?isNaN(v)?0:-1:1}(i,e);case 3:return Ix(i.timestampValue,e.timestampValue);case 4:return Ix(bu(i),bu(e));case 5:return Jt(i.stringValue,e.stringValue);case 6:return function(f,y){const b=_o(f),v=_o(y);return b.compareTo(v)}(i.bytesValue,e.bytesValue);case 7:return function(f,y){const b=f.split("/"),v=y.split("/");for(let w=0;w<b.length&&w<v.length;w++){const S=Jt(b[w],v[w]);if(S!==0)return S}return Jt(b.length,v.length)}(i.referenceValue,e.referenceValue);case 8:return function(f,y){const b=Jt(gr(f.latitude),gr(y.latitude));return b!==0?b:Jt(gr(f.longitude),gr(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Nx(i.arrayValue,e.arrayValue);case 10:return function(f,y){var b,v,w,S;const R=f.fields||{},k=y.fields||{},U=(b=R[Ef])===null||b===void 0?void 0:b.arrayValue,q=(v=k[Ef])===null||v===void 0?void 0:v.arrayValue,ee=Jt(((w=U==null?void 0:U.values)===null||w===void 0?void 0:w.length)||0,((S=q==null?void 0:q.values)===null||S===void 0?void 0:S.length)||0);return ee!==0?ee:Nx(U,q)}(i.mapValue,e.mapValue);case 11:return function(f,y){if(f===Yh.mapValue&&y===Yh.mapValue)return 0;if(f===Yh.mapValue)return 1;if(y===Yh.mapValue)return-1;const b=f.fields||{},v=Object.keys(b),w=y.fields||{},S=Object.keys(w);v.sort(),S.sort();for(let R=0;R<v.length&&R<S.length;++R){const k=Jt(v[R],S[R]);if(k!==0)return k;const U=sc(b[v[R]],w[S[R]]);if(U!==0)return U}return Jt(v.length,S.length)}(i.mapValue,e.mapValue);default:throw vt()}}function Ix(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Jt(i,e);const t=vo(i),a=vo(e),c=Jt(t.seconds,a.seconds);return c!==0?c:Jt(t.nanos,a.nanos)}function Nx(i,e){const t=i.values||[],a=e.values||[];for(let c=0;c<t.length&&c<a.length;++c){const f=sc(t[c],a[c]);if(f)return f}return Jt(t.length,a.length)}function ac(i){return x1(i)}function x1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const a=vo(t);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return _o(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return dt.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let a="[",c=!0;for(const f of t.values||[])c?c=!1:a+=",",a+=x1(f);return a+"]"}(i.arrayValue):"mapValue"in i?function(t){const a=Object.keys(t.fields||{}).sort();let c="{",f=!0;for(const y of a)f?f=!1:c+=",",c+=`${y}:${x1(t.fields[y])}`;return c+"}"}(i.mapValue):vt()}function nf(i){switch(bo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ff(i);return e?16+nf(e):16;case 5:return 2*i.stringValue.length;case 6:return _o(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((c,f)=>c+nf(f),0)}(i.arrayValue);case 10:case 11:return function(a){let c=0;return Io(a.fields,(f,y)=>{c+=f.length+nf(y)}),c}(i.mapValue);default:throw vt()}}function Rx(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function y1(i){return!!i&&"integerValue"in i}function ug(i){return!!i&&"arrayValue"in i}function Dx(i){return!!i&&"nullValue"in i}function Mx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function rf(i){return!!i&&"mapValue"in i}function k3(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[nE])===null||t===void 0?void 0:t.stringValue)===rE}function pu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Io(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=pu(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function P3(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===L3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(t)}setAll(e){let t=Jr.emptyPath(),a={},c=[];e.forEach((y,b)=>{if(!t.isImmediateParentOf(b)){const v=this.getFieldsMap(t);this.applyChanges(v,a,c),a={},c=[],t=b.popLast()}y?a[b.lastSegment()]=pu(y):c.push(b.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,a,c)}delete(e){const t=this.field(e.popLast());rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let c=t.mapValue.fields[e.get(a)];rf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,a){Io(t,(c,f)=>e[c]=f);for(const c of a)delete e[c]}clone(){return new Li(pu(this.value))}}function iE(i){const e=[];return Io(i.fields,(t,a)=>{const c=new Jr([t]);if(rf(a)){const f=iE(a.mapValue).fields;if(f.length===0)e.push(c);else for(const y of f)e.push(c.child(y))}else e.push(c)}),new Ji(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,t,a,c,f,y,b){this.key=e,this.documentType=t,this.version=a,this.readTime=c,this.createTime=f,this.data=y,this.documentState=b}static newInvalidDocument(e){return new ui(e,0,Ct.min(),Ct.min(),Ct.min(),Li.empty(),0)}static newFoundDocument(e,t,a,c){return new ui(e,1,t,Ct.min(),a,c,0)}static newNoDocument(e,t){return new ui(e,2,t,Ct.min(),Ct.min(),Li.empty(),0)}static newUnknownDocument(e,t){return new ui(e,3,t,Ct.min(),Ct.min(),Li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ui&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.position=e,this.inclusive=t}}function Ox(i,e,t){let a=0;for(let c=0;c<i.position.length;c++){const f=e[c],y=i.position[c];if(f.field.isKeyField()?a=dt.comparator(dt.fromName(y.referenceValue),t.key):a=sc(y,t.data.field(f.field)),f.dir==="desc"&&(a*=-1),a!==0)break}return a}function Lx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Js(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t="asc"){this.field=e,this.dir=t}}function B3(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{}class _r extends sE{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new U3(e,t,a):t==="array-contains"?new z3(e,a):t==="in"?new H3(e,a):t==="not-in"?new G3(e,a):t==="array-contains-any"?new q3(e,a):new _r(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new V3(e,a):new F3(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(sc(t,this.value)):t!==null&&bo(this.value)===bo(t)&&this.matchesComparison(sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ms extends sE{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ms(e,t)}matches(e){return aE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function aE(i){return i.op==="and"}function oE(i){return j3(i)&&aE(i)}function j3(i){for(const e of i.filters)if(e instanceof Ms)return!1;return!0}function w1(i){if(i instanceof _r)return i.field.canonicalString()+i.op.toString()+ac(i.value);if(oE(i))return i.filters.map(e=>w1(e)).join(",");{const e=i.filters.map(t=>w1(t)).join(",");return`${i.op}(${e})`}}function lE(i,e){return i instanceof _r?function(a,c){return c instanceof _r&&a.op===c.op&&a.field.isEqual(c.field)&&Js(a.value,c.value)}(i,e):i instanceof Ms?function(a,c){return c instanceof Ms&&a.op===c.op&&a.filters.length===c.filters.length?a.filters.reduce((f,y,b)=>f&&lE(y,c.filters[b]),!0):!1}(i,e):void vt()}function cE(i){return i instanceof _r?function(t){return`${t.field.canonicalString()} ${t.op} ${ac(t.value)}`}(i):i instanceof Ms?function(t){return t.op.toString()+" {"+t.getFilters().map(cE).join(" ,")+"}"}(i):"Filter"}class U3 extends _r{constructor(e,t,a){super(e,t,a),this.key=dt.fromName(a.referenceValue)}matches(e){const t=dt.comparator(e.key,this.key);return this.matchesComparison(t)}}class V3 extends _r{constructor(e,t){super(e,"in",t),this.keys=uE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F3 extends _r{constructor(e,t){super(e,"not-in",t),this.keys=uE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uE(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(a=>dt.fromName(a.referenceValue))}class z3 extends _r{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ug(t)&&Cu(t.arrayValue,this.value)}}class H3 extends _r{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cu(this.value.arrayValue,t)}}class G3 extends _r{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Cu(this.value.arrayValue,t)}}class q3 extends _r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ug(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Cu(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,t=null,a=[],c=[],f=null,y=null,b=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=c,this.limit=f,this.startAt=y,this.endAt=b,this.le=null}}function kx(i,e=null,t=[],a=[],c=null,f=null,y=null){return new Y3(i,e,t,a,c,f,y)}function hg(i){const e=It(i);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>w1(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>function(f){return f.field.canonicalString()+f.dir}(a)).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>ac(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>ac(a)).join(",")),e.le=t}return e.le}function fg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!B3(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!lE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Lx(i.startAt,e.startAt)&&Lx(i.endAt,e.endAt)}function E1(i){return dt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t=null,a=[],c=[],f=null,y="F",b=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=c,this.limit=f,this.limitType=y,this.startAt=b,this.endAt=v,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function X3(i,e,t,a,c,f,y,b){return new pc(i,e,t,a,c,f,y,b)}function dg(i){return new pc(i)}function Px(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function hE(i){return i.collectionGroup!==null}function xu(i){const e=It(i);if(e.he===null){e.he=[];const t=new Set;for(const f of e.explicitOrderBy)e.he.push(f),t.add(f.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(y){let b=new Nr(Jr.comparator);return y.filters.forEach(v=>{v.getFlattenedFilters().forEach(w=>{w.isInequality()&&(b=b.add(w.field))})}),b})(e).forEach(f=>{t.has(f.canonicalString())||f.isKeyField()||e.he.push(new _f(f,a))}),t.has(Jr.keyField().canonicalString())||e.he.push(new _f(Jr.keyField(),a))}return e.he}function Ks(i){const e=It(i);return e.Pe||(e.Pe=Q3(e,xu(i))),e.Pe}function Q3(i,e){if(i.limitType==="F")return kx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(c=>{const f=c.dir==="desc"?"asc":"desc";return new _f(c.field,f)});const t=i.endAt?new vf(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new vf(i.startAt.position,i.startAt.inclusive):null;return kx(i.path,i.collectionGroup,e,i.filters,i.limit,t,a)}}function v1(i,e){const t=i.filters.concat([e]);return new pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function _1(i,e,t){return new pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function zf(i,e){return fg(Ks(i),Ks(e))&&i.limitType===e.limitType}function fE(i){return`${hg(Ks(i))}|lt:${i.limitType}`}function Gl(i){return`Query(target=${function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map(c=>cE(c)).join(", ")}]`),Vf(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map(c=>function(y){return`${y.field.canonicalString()} (${y.dir})`}(c)).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map(c=>ac(c)).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map(c=>ac(c)).join(",")),`Target(${a})`}(Ks(i))}; limitType=${i.limitType})`}function Hf(i,e){return e.isFoundDocument()&&function(a,c){const f=c.key.path;return a.collectionGroup!==null?c.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(f):dt.isDocumentKey(a.path)?a.path.isEqual(f):a.path.isImmediateParentOf(f)}(i,e)&&function(a,c){for(const f of xu(a))if(!f.field.isKeyField()&&c.data.field(f.field)===null)return!1;return!0}(i,e)&&function(a,c){for(const f of a.filters)if(!f.matches(c))return!1;return!0}(i,e)&&function(a,c){return!(a.startAt&&!function(y,b,v){const w=Ox(y,b,v);return y.inclusive?w<=0:w<0}(a.startAt,xu(a),c)||a.endAt&&!function(y,b,v){const w=Ox(y,b,v);return y.inclusive?w>=0:w>0}(a.endAt,xu(a),c))}(i,e)}function W3(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function dE(i){return(e,t)=>{let a=!1;for(const c of xu(i)){const f=K3(c,e,t);if(f!==0)return f;a=a||c.field.isKeyField()}return 0}}function K3(i,e,t){const a=i.field.isKeyField()?dt.comparator(e.key,t.key):function(f,y,b){const v=y.data.field(f),w=b.data.field(f);return v!==null&&w!==null?sc(v,w):vt()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[c,f]of a)if(this.equalsFn(c,e))return f}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),c=this.inner[a];if(c===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return a.length===1?delete this.inner[t]:a.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(t,a)=>{for(const[c,f]of a)e(c,f)})}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=new Zn(dt.comparator);function Oa(){return Z3}const gE=new Zn(dt.comparator);function uu(...i){let e=gE;for(const t of i)e=e.insert(t.key,t);return e}function mE(i){let e=gE;return i.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Zo(){return yu()}function pE(){return yu()}function yu(){return new al(i=>i.toString(),(i,e)=>i.isEqual(e))}const $3=new Zn(dt.comparator),J3=new Nr(dt.comparator);function Kt(...i){let e=J3;for(const t of i)e=e.add(t);return e}const eI=new Nr(Jt);function tI(){return eI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function xE(i){return{integerValue:""+i}}function nI(i,e){return N3(e)?xE(e):gg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this._=void 0}}function rI(i,e,t){return i instanceof bf?function(c,f){const y={fields:{[Jw]:{stringValue:$w},[tE]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&cg(f)&&(f=Ff(f)),f&&(y.fields[eE]=f),{mapValue:y}}(t,e):i instanceof Tu?wE(i,e):i instanceof Su?EE(i,e):function(c,f){const y=yE(c,f),b=Bx(y)+Bx(c.Ie);return y1(y)&&y1(c.Ie)?xE(b):gg(c.serializer,b)}(i,e)}function iI(i,e,t){return i instanceof Tu?wE(i,e):i instanceof Su?EE(i,e):t}function yE(i,e){return i instanceof Af?function(a){return y1(a)||function(f){return!!f&&"doubleValue"in f}(a)}(e)?e:{integerValue:0}:null}class bf extends Gf{}class Tu extends Gf{constructor(e){super(),this.elements=e}}function wE(i,e){const t=vE(e);for(const a of i.elements)t.some(c=>Js(c,a))||t.push(a);return{arrayValue:{values:t}}}class Su extends Gf{constructor(e){super(),this.elements=e}}function EE(i,e){let t=vE(e);for(const a of i.elements)t=t.filter(c=>!Js(c,a));return{arrayValue:{values:t}}}class Af extends Gf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Bx(i){return gr(i.integerValue||i.doubleValue)}function vE(i){return ug(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function sI(i,e){return i.field.isEqual(e.field)&&function(a,c){return a instanceof Tu&&c instanceof Tu||a instanceof Su&&c instanceof Su?ic(a.elements,c.elements,Js):a instanceof Af&&c instanceof Af?Js(a.Ie,c.Ie):a instanceof bf&&c instanceof bf}(i.transform,e.transform)}class aI{constructor(e,t){this.version=e,this.transformResults=t}}class ws{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ws}static exists(e){return new ws(void 0,e)}static updateTime(e){return new ws(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class qf{}function _E(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new mg(i.key,ws.none()):new Bu(i.key,i.data,ws.none());{const t=i.data,a=Li.empty();let c=new Nr(Jr.comparator);for(let f of e.fields)if(!c.has(f)){let y=t.field(f);y===null&&f.length>1&&(f=f.popLast(),y=t.field(f)),y===null?a.delete(f):a.set(f,y),c=c.add(f)}return new No(i.key,a,new Ji(c.toArray()),ws.none())}}function oI(i,e,t){i instanceof Bu?function(c,f,y){const b=c.value.clone(),v=Ux(c.fieldTransforms,f,y.transformResults);b.setAll(v),f.convertToFoundDocument(y.version,b).setHasCommittedMutations()}(i,e,t):i instanceof No?function(c,f,y){if(!sf(c.precondition,f))return void f.convertToUnknownDocument(y.version);const b=Ux(c.fieldTransforms,f,y.transformResults),v=f.data;v.setAll(bE(c)),v.setAll(b),f.convertToFoundDocument(y.version,v).setHasCommittedMutations()}(i,e,t):function(c,f,y){f.convertToNoDocument(y.version).setHasCommittedMutations()}(0,e,t)}function wu(i,e,t,a){return i instanceof Bu?function(f,y,b,v){if(!sf(f.precondition,y))return b;const w=f.value.clone(),S=Vx(f.fieldTransforms,v,y);return w.setAll(S),y.convertToFoundDocument(y.version,w).setHasLocalMutations(),null}(i,e,t,a):i instanceof No?function(f,y,b,v){if(!sf(f.precondition,y))return b;const w=Vx(f.fieldTransforms,v,y),S=y.data;return S.setAll(bE(f)),S.setAll(w),y.convertToFoundDocument(y.version,S).setHasLocalMutations(),b===null?null:b.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(R=>R.field))}(i,e,t,a):function(f,y,b){return sf(f.precondition,y)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):b}(i,e,t)}function lI(i,e){let t=null;for(const a of i.fieldTransforms){const c=e.data.field(a.field),f=yE(a.transform,c||null);f!=null&&(t===null&&(t=Li.empty()),t.set(a.field,f))}return t||null}function jx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(a,c){return a===void 0&&c===void 0||!(!a||!c)&&ic(a,c,(f,y)=>sI(f,y))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Bu extends qf{constructor(e,t,a,c=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class No extends qf{constructor(e,t,a,c,f=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function bE(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function Ux(i,e,t){const a=new Map;dn(i.length===t.length);for(let c=0;c<t.length;c++){const f=i[c],y=f.transform,b=e.data.field(f.field);a.set(f.field,iI(y,b,t[c]))}return a}function Vx(i,e,t){const a=new Map;for(const c of i){const f=c.transform,y=t.data.field(c.field);a.set(c.field,rI(f,y,e))}return a}class mg extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cI extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t,a,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=c}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&oI(f,e,a[c])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=wu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=wu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=pE();return this.mutations.forEach(c=>{const f=e.get(c.key),y=f.overlayedDocument;let b=this.applyToLocalView(y,f.mutatedFields);b=t.has(c.key)?null:b;const v=_E(y,b);v!==null&&a.set(c.key,v),y.isValidDocument()||y.convertToNoDocument(Ct.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(t,a)=>jx(t,a))&&ic(this.baseMutations,e.baseMutations,(t,a)=>jx(t,a))}}class pg{constructor(e,t,a,c){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=c}static from(e,t,a){dn(e.mutations.length===a.length);let c=function(){return $3}();const f=e.mutations;for(let y=0;y<f.length;y++)c=c.insert(f[y].key,a[y].version);return new pg(e,t,a,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er,nn;function dI(i){switch(i){case Ie.OK:return vt();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return vt()}}function AE(i){if(i===void 0)return Ma("GRPC error has no .code"),Ie.UNKNOWN;switch(i){case Er.OK:return Ie.OK;case Er.CANCELLED:return Ie.CANCELLED;case Er.UNKNOWN:return Ie.UNKNOWN;case Er.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Er.INTERNAL:return Ie.INTERNAL;case Er.UNAVAILABLE:return Ie.UNAVAILABLE;case Er.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Er.NOT_FOUND:return Ie.NOT_FOUND;case Er.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Er.ABORTED:return Ie.ABORTED;case Er.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Er.DATA_LOSS:return Ie.DATA_LOSS;default:return vt()}}(nn=Er||(Er={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new xo([4294967295,4294967295],0);function Fx(i){const e=gI().encode(i),t=new Fw;return t.update(e),new Uint8Array(t.digest())}function zx(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new xo([t,a],0),new xo([c,f],0)]}class xg{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new hu(`Invalid padding: ${t}`);if(a<0)throw new hu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new hu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new hu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=xo.fromNumber(this.Ee)}Ae(e,t,a){let c=e.add(t.multiply(xo.fromNumber(a)));return c.compare(mI)===1&&(c=new xo([c.getBits(0),c.getBits(1)],0)),c.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Fx(e),[a,c]=zx(t);for(let f=0;f<this.hashCount;f++){const y=this.Ae(a,c,f);if(!this.Re(y))return!1}return!0}static create(e,t,a){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),y=new xg(f,c,t);return a.forEach(b=>y.insert(b)),y}insert(e){if(this.Ee===0)return;const t=Fx(e),[a,c]=zx(t);for(let f=0;f<this.hashCount;f++){const y=this.Ae(a,c,f);this.Ve(y)}}Ve(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,a,c,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const c=new Map;return c.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Yf(Ct.min(),c,new Zn(Jt),Oa(),Kt())}}class ju{constructor(e,t,a,c,f){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new ju(a,t,Kt(),Kt(),Kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,a,c){this.me=e,this.removedTargetIds=t,this.key=a,this.fe=c}}class CE{constructor(e,t){this.targetId=e,this.ge=t}}class TE{constructor(e,t,a=ei.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=c}}class Hx{constructor(){this.pe=0,this.ye=Gx(),this.we=ei.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Kt(),t=Kt(),a=Kt();return this.ye.forEach((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:a=a.add(c);break;default:vt()}}),new ju(this.we,this.Se,e,t,a)}Me(){this.be=!1,this.ye=Gx()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,dn(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class pI{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Oa(),this.$e=Xh(),this.Ke=Xh(),this.Ue=new Zn(Jt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const a=this.He(t);switch(e.state){case 0:this.Je(t)&&a.Ce(e.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(e.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(t);break;case 3:this.Je(t)&&(a.Le(),a.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),a.Ce(e.resumeToken));break;default:vt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((a,c)=>{this.Je(c)&&t(c)})}Ze(e){const t=e.targetId,a=e.ge.count,c=this.Xe(t);if(c){const f=c.target;if(E1(f))if(a===0){const y=new dt(f.path);this.ze(t,y,ui.newNoDocument(y,Ct.min()))}else dn(a===1);else{const y=this.et(t);if(y!==a){const b=this.tt(e),v=b?this.nt(b,e,y):1;if(v!==0){this.Ye(t);const w=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,w)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=t;let y,b;try{y=_o(a).toUint8Array()}catch(v){if(v instanceof Zw)return rc("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{b=new xg(y,c,f)}catch(v){return rc(v instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return b.Ee===0?null:b}nt(e,t,a){return t.ge.count===a-this.st(e,t.targetId)?0:2}st(e,t){const a=this.ke.getRemoteKeysForTarget(t);let c=0;return a.forEach(f=>{const y=this.ke.it(),b=`projects/${y.projectId}/databases/${y.database}/documents/${f.path.canonicalString()}`;e.mightContain(b)||(this.ze(t,f,null),c++)}),c}ot(e){const t=new Map;this.qe.forEach((f,y)=>{const b=this.Xe(y);if(b){if(f.current&&E1(b.target)){const v=new dt(b.target.path);this._t(v).has(y)||this.ut(y,v)||this.ze(y,v,ui.newNoDocument(v,e))}f.ve&&(t.set(y,f.Fe()),f.Me())}});let a=Kt();this.Ke.forEach((f,y)=>{let b=!0;y.forEachWhile(v=>{const w=this.Xe(v);return!w||w.purpose==="TargetPurposeLimboResolution"||(b=!1,!1)}),b&&(a=a.add(f))}),this.Qe.forEach((f,y)=>y.setReadTime(e));const c=new Yf(e,t,this.Ue,this.Qe,a);return this.Qe=Oa(),this.$e=Xh(),this.Ke=Xh(),this.Ue=new Zn(Jt),c}Ge(e,t){if(!this.Je(e))return;const a=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,a),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,a){if(!this.Je(e))return;const c=this.He(e);this.ut(e,t)?c.xe(t,1):c.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),a&&(this.Qe=this.Qe.insert(t,a))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Hx,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Nr(Jt),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Nr(Jt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||et("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Hx),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Xh(){return new Zn(dt.comparator)}function Gx(){return new Zn(dt.comparator)}const xI={asc:"ASCENDING",desc:"DESCENDING"},yI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wI={and:"AND",or:"OR"};class EI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function b1(i,e){return i.useProto3Json||Vf(e)?e:{value:e}}function Cf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function vI(i,e){return Cf(i,e.toTimestamp())}function Zs(i){return dn(!!i),Ct.fromTimestamp(function(t){const a=vo(t);return new Ir(a.seconds,a.nanos)}(i))}function yg(i,e){return A1(i,e).canonicalString()}function A1(i,e){const t=function(c){return new On(["projects",c.projectId,"databases",c.database])}(i).child("documents");return e===void 0?t:t.child(e)}function IE(i){const e=On.fromString(i);return dn(OE(e)),e}function C1(i,e){return yg(i.databaseId,e.path)}function e1(i,e){const t=IE(e);if(t.get(1)!==i.databaseId.projectId)throw new nt(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new nt(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new dt(RE(t))}function NE(i,e){return yg(i.databaseId,e)}function _I(i){const e=IE(i);return e.length===4?On.emptyPath():RE(e)}function T1(i){return new On(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function RE(i){return dn(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function qx(i,e,t){return{name:C1(i,e),fields:t.value.mapValue.fields}}function bI(i,e){let t;if("targetChange"in e){e.targetChange;const a=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:vt()}(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],f=function(w,S){return w.useProto3Json?(dn(S===void 0||typeof S=="string"),ei.fromBase64String(S||"")):(dn(S===void 0||S instanceof Buffer||S instanceof Uint8Array),ei.fromUint8Array(S||new Uint8Array))}(i,e.targetChange.resumeToken),y=e.targetChange.cause,b=y&&function(w){const S=w.code===void 0?Ie.UNKNOWN:AE(w.code);return new nt(S,w.message||"")}(y);t=new TE(a,c,f,b||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const c=e1(i,a.document.name),f=Zs(a.document.updateTime),y=a.document.createTime?Zs(a.document.createTime):Ct.min(),b=new Li({mapValue:{fields:a.document.fields}}),v=ui.newFoundDocument(c,f,y,b),w=a.targetIds||[],S=a.removedTargetIds||[];t=new af(w,S,v.key,v)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const c=e1(i,a.document),f=a.readTime?Zs(a.readTime):Ct.min(),y=ui.newNoDocument(c,f),b=a.removedTargetIds||[];t=new af([],b,y.key,y)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const c=e1(i,a.document),f=a.removedTargetIds||[];t=new af([],f,c,null)}else{if(!("filter"in e))return vt();{e.filter;const a=e.filter;a.targetId;const{count:c=0,unchangedNames:f}=a,y=new fI(c,f),b=a.targetId;t=new CE(b,y)}}return t}function AI(i,e){let t;if(e instanceof Bu)t={update:qx(i,e.key,e.value)};else if(e instanceof mg)t={delete:C1(i,e.key)};else if(e instanceof No)t={update:qx(i,e.key,e.data),updateMask:OI(e.fieldMask)};else{if(!(e instanceof cI))return vt();t={verify:C1(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(f,y){const b=y.transform;if(b instanceof bf)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof Tu)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof Su)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof Af)return{fieldPath:y.field.canonicalString(),increment:b.Ie};throw vt()}(0,a))),e.precondition.isNone||(t.currentDocument=function(c,f){return f.updateTime!==void 0?{updateTime:vI(c,f.updateTime)}:f.exists!==void 0?{exists:f.exists}:vt()}(i,e.precondition)),t}function CI(i,e){return i&&i.length>0?(dn(e!==void 0),i.map(t=>function(c,f){let y=c.updateTime?Zs(c.updateTime):Zs(f);return y.isEqual(Ct.min())&&(y=Zs(f)),new aI(y,c.transformResults||[])}(t,e))):[]}function TI(i,e){return{documents:[NE(i,e.path)]}}function SI(i,e){const t={structuredQuery:{}},a=e.path;let c;e.collectionGroup!==null?(c=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=NE(i,c);const f=function(w){if(w.length!==0)return ME(Ms.create(w,"and"))}(e.filters);f&&(t.structuredQuery.where=f);const y=function(w){if(w.length!==0)return w.map(S=>function(k){return{field:ql(k.field),direction:RI(k.dir)}}(S))}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const b=b1(i,e.limit);return b!==null&&(t.structuredQuery.limit=b),e.startAt&&(t.structuredQuery.startAt=function(w){return{before:w.inclusive,values:w.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),{ht:t,parent:c}}function II(i){let e=_I(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let c=null;if(a>0){dn(a===1);const S=t.from[0];S.allDescendants?c=S.collectionId:e=e.child(S.collectionId)}let f=[];t.where&&(f=function(R){const k=DE(R);return k instanceof Ms&&oE(k)?k.getFilters():[k]}(t.where));let y=[];t.orderBy&&(y=function(R){return R.map(k=>function(q){return new _f(Yl(q.field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(k))}(t.orderBy));let b=null;t.limit&&(b=function(R){let k;return k=typeof R=="object"?R.value:R,Vf(k)?null:k}(t.limit));let v=null;t.startAt&&(v=function(R){const k=!!R.before,U=R.values||[];return new vf(U,k)}(t.startAt));let w=null;return t.endAt&&(w=function(R){const k=!R.before,U=R.values||[];return new vf(U,k)}(t.endAt)),X3(e,c,y,f,b,"F",v,w)}function NI(i,e){const t=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DE(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Yl(t.unaryFilter.field);return _r.create(a,"==",{doubleValue:NaN});case"IS_NULL":const c=Yl(t.unaryFilter.field);return _r.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Yl(t.unaryFilter.field);return _r.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=Yl(t.unaryFilter.field);return _r.create(y,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(i):i.fieldFilter!==void 0?function(t){return _r.create(Yl(t.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Ms.create(t.compositeFilter.filters.map(a=>DE(a)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return vt()}}(t.compositeFilter.op))}(i):vt()}function RI(i){return xI[i]}function DI(i){return yI[i]}function MI(i){return wI[i]}function ql(i){return{fieldPath:i.canonicalString()}}function Yl(i){return Jr.fromServerFormat(i.fieldPath)}function ME(i){return i instanceof _r?function(t){if(t.op==="=="){if(Mx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(Dx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Mx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(Dx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:DI(t.op),value:t.value}}}(i):i instanceof Ms?function(t){const a=t.getFilters().map(c=>ME(c));return a.length===1?a[0]:{compositeFilter:{op:MI(t.op),filters:a}}}(i):vt()}function OI(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,a,c,f=Ct.min(),y=Ct.min(),b=ei.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=b,this.expectedCount=v}withSequenceNumber(e){return new fo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.Tt=e}}function kI(i){const e=II({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?_1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.Tn=new BI}addToCollectionParentIndex(e,t){return this.Tn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(Eo.min())}updateCollectionGroup(e,t,a){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class BI{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t]||new Nr(On.comparator),f=!c.has(a);return this.index[t]=c.add(a),f}has(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t];return c&&c.has(a)}getEntries(e){return(this.index[e]||new Nr(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LE=41943040;class Oi{static withCacheSize(e){return new Oi(e,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi.DEFAULT_COLLECTION_PERCENTILE=10,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oi.DEFAULT=new Oi(LE,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oi.DISABLED=new Oi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new oc(0)}static Un(){return new oc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="LruGarbageCollector",jI=1048576;function Qx([i,e],[t,a]){const c=Jt(i,t);return c===0?Jt(e,a):c}class UI{constructor(e){this.Hn=e,this.buffer=new Nr(Qx),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Qx(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VI{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){et(Xx,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){mc(t)?et(Xx,"Ignoring IndexedDB error during garbage collection: ",t):await gc(t)}await this.er(3e5)})}}class FI{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(t===0)return Ne.resolve(Uf.ae);const a=new UI(t);return this.tr.forEachTarget(e,c=>a.Zn(c.sequenceNumber)).next(()=>this.tr.rr(e,c=>a.Zn(c))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.tr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Yx)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yx):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let a,c,f,y,b,v,w;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),c=this.params.maximumSequenceNumbersToCollect):c=R,y=Date.now(),this.nthSequenceNumber(e,c))).next(R=>(a=R,b=Date.now(),this.removeTargets(e,a,t))).next(R=>(f=R,v=Date.now(),this.removeOrphanedDocuments(e,a))).next(R=>(w=Date.now(),Hl()<=Wt.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${y-S}ms
	Determined least recently used ${c} in `+(b-y)+`ms
	Removed ${f} targets in `+(v-b)+`ms
	Removed ${R} documents in `+(w-v)+`ms
Total Duration: ${w-S}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:R})))}}function zI(i,e){return new FI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.changes=new al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ui.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?Ne.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t,a,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=c}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(a=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(a!==null&&wu(a.mutation,c,Ji.empty(),Ir.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Kt()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Kt()){const c=Zo();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,a).next(f=>{let y=uu();return f.forEach((b,v)=>{y=y.insert(b,v.overlayedDocument)}),y}))}getOverlayedDocuments(e,t){const a=Zo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Kt()))}populateOverlays(e,t,a){const c=[];return a.forEach(f=>{t.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(e,c).next(f=>{f.forEach((y,b)=>{t.set(y,b)})})}computeViews(e,t,a,c){let f=Oa();const y=yu(),b=function(){return yu()}();return t.forEach((v,w)=>{const S=a.get(w.key);c.has(w.key)&&(S===void 0||S.mutation instanceof No)?f=f.insert(w.key,w):S!==void 0?(y.set(w.key,S.mutation.getFieldMask()),wu(S.mutation,w,S.mutation.getFieldMask(),Ir.now())):y.set(w.key,Ji.empty())}),this.recalculateAndSaveOverlays(e,f).next(v=>(v.forEach((w,S)=>y.set(w,S)),t.forEach((w,S)=>{var R;return b.set(w,new GI(S,(R=y.get(w))!==null&&R!==void 0?R:null))}),b))}recalculateAndSaveOverlays(e,t){const a=yu();let c=new Zn((y,b)=>y-b),f=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(y=>{for(const b of y)b.keys().forEach(v=>{const w=t.get(v);if(w===null)return;let S=a.get(v)||Ji.empty();S=b.applyToLocalView(w,S),a.set(v,S);const R=(c.get(b.batchId)||Kt()).add(v);c=c.insert(b.batchId,R)})}).next(()=>{const y=[],b=c.getReverseIterator();for(;b.hasNext();){const v=b.getNext(),w=v.key,S=v.value,R=pE();S.forEach(k=>{if(!f.has(k)){const U=_E(t.get(k),a.get(k));U!==null&&R.set(k,U),f=f.add(k)}}),y.push(this.documentOverlayCache.saveOverlays(e,w,R))}return Ne.waitFor(y)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a,c){return function(y){return dt.isDocumentKey(y.path)&&y.collectionGroup===null&&y.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,c):this.getDocumentsMatchingCollectionQuery(e,t,a,c)}getNextDocuments(e,t,a,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,c).next(f=>{const y=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,c-f.size):Ne.resolve(Zo());let b=_u,v=f;return y.next(w=>Ne.forEach(w,(S,R)=>(b<R.largestBatchId&&(b=R.largestBatchId),f.get(S)?Ne.resolve():this.remoteDocumentCache.getEntry(e,S).next(k=>{v=v.insert(S,k)}))).next(()=>this.populateOverlays(e,w,f)).next(()=>this.computeViews(e,v,w,Kt())).next(S=>({batchId:b,changes:mE(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dt(t)).next(a=>{let c=uu();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,a,c){const f=t.collectionGroup;let y=uu();return this.indexManager.getCollectionParents(e,f).next(b=>Ne.forEach(b,v=>{const w=function(R,k){return new pc(k,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(t,v.child(f));return this.getDocumentsMatchingCollectionQuery(e,w,a,c).next(S=>{S.forEach((R,k)=>{y=y.insert(R,k)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,a,c){let f;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(y=>(f=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,f,c))).next(y=>{f.forEach((v,w)=>{const S=w.getKey();y.get(S)===null&&(y=y.insert(S,ui.newInvalidDocument(S)))});let b=uu();return y.forEach((v,w)=>{const S=f.get(v);S!==void 0&&wu(S.mutation,w,Ji.empty(),Ir.now()),Hf(t,w)&&(b=b.insert(v,w))}),b})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(c){return{id:c.id,version:c.version,createTime:Zs(c.createTime)}}(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(c){return{name:c.name,query:kI(c.bundledQuery),readTime:Zs(c.readTime)}}(t)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.overlays=new Zn(dt.comparator),this.Rr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Zo();return Ne.forEach(t,c=>this.getOverlay(e,c).next(f=>{f!==null&&a.set(c,f)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((c,f)=>{this.Et(e,t,f)}),Ne.resolve()}removeOverlaysForBatchId(e,t,a){const c=this.Rr.get(a);return c!==void 0&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.Rr.delete(a)),Ne.resolve()}getOverlaysForCollection(e,t,a){const c=Zo(),f=t.length+1,y=new dt(t.child("")),b=this.overlays.getIteratorFrom(y);for(;b.hasNext();){const v=b.getNext().value,w=v.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===f&&v.largestBatchId>a&&c.set(v.getKey(),v)}return Ne.resolve(c)}getOverlaysForCollectionGroup(e,t,a,c){let f=new Zn((w,S)=>w-S);const y=this.overlays.getIterator();for(;y.hasNext();){const w=y.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>a){let S=f.get(w.largestBatchId);S===null&&(S=Zo(),f=f.insert(w.largestBatchId,S)),S.set(w.getKey(),w)}}const b=Zo(),v=f.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((w,S)=>b.set(w,S)),!(b.size()>=c)););return Ne.resolve(b)}Et(e,t,a){const c=this.overlays.get(a.key);if(c!==null){const y=this.Rr.get(c.largestBatchId).delete(a.key);this.Rr.set(c.largestBatchId,y)}this.overlays=this.overlays.insert(a.key,new hI(t,a));let f=this.Rr.get(t);f===void 0&&(f=Kt(),this.Rr.set(t,f)),this.Rr.set(t,f.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.sessionToken=ei.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.Vr=new Nr(Pr.mr),this.gr=new Nr(Pr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const a=new Pr(e,t);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.wr(new Pr(e,t))}Sr(e,t){e.forEach(a=>this.removeReference(a,t))}br(e){const t=new dt(new On([])),a=new Pr(t,e),c=new Pr(t,e+1),f=[];return this.gr.forEachInRange([a,c],y=>{this.wr(y),f.push(y.key)}),f}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new dt(new On([])),a=new Pr(t,e),c=new Pr(t,e+1);let f=Kt();return this.gr.forEachInRange([a,c],y=>{f=f.add(y.key)}),f}containsKey(e){const t=new Pr(e,0),a=this.Vr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Pr{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return dt.comparator(e.key,t.key)||Jt(e.Cr,t.Cr)}static pr(e,t){return Jt(e.Cr,t.Cr)||dt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Nr(Pr.mr)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,c){const f=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const y=new uI(f,t,a,c);this.mutationQueue.push(y);for(const b of c)this.Mr=this.Mr.add(new Pr(b.key,f)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return Ne.resolve(y)}lookupMutationBatch(e,t){return Ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,c=this.Nr(a),f=c<0?0:c;return Ne.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?lg:this.Fr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Pr(t,0),c=new Pr(t,Number.POSITIVE_INFINITY),f=[];return this.Mr.forEachInRange([a,c],y=>{const b=this.Or(y.Cr);f.push(b)}),Ne.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Nr(Jt);return t.forEach(c=>{const f=new Pr(c,0),y=new Pr(c,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([f,y],b=>{a=a.add(b.Cr)})}),Ne.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,c=a.length+1;let f=a;dt.isDocumentKey(f)||(f=f.child(""));const y=new Pr(new dt(f),0);let b=new Nr(Jt);return this.Mr.forEachWhile(v=>{const w=v.key.path;return!!a.isPrefixOf(w)&&(w.length===c&&(b=b.add(v.Cr)),!0)},y),Ne.resolve(this.Br(b))}Br(e){const t=[];return e.forEach(a=>{const c=this.Or(a);c!==null&&t.push(c)}),t}removeMutationBatch(e,t){dn(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Ne.forEach(t.mutations,c=>{const f=new Pr(c.key,t.batchId);return a=a.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Mr=a})}qn(e){}containsKey(e,t){const a=new Pr(t,0),c=this.Mr.firstAfterOrEqual(a);return Ne.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.kr=e,this.docs=function(){return new Zn(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,c=this.docs.get(a),f=c?c.size:0,y=this.kr(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:y}),this.size+=y-f,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return Ne.resolve(a?a.document.mutableCopy():ui.newInvalidDocument(t))}getEntries(e,t){let a=Oa();return t.forEach(c=>{const f=this.docs.get(c);a=a.insert(c,f?f.document.mutableCopy():ui.newInvalidDocument(c))}),Ne.resolve(a)}getDocumentsMatchingQuery(e,t,a,c){let f=Oa();const y=t.path,b=new dt(y.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(b);for(;v.hasNext();){const{key:w,value:{document:S}}=v.getNext();if(!y.isPrefixOf(w.path))break;w.path.length>y.length+1||C3(A3(S),a)<=0||(c.has(S.key)||Hf(t,S))&&(f=f.insert(S.key,S.mutableCopy()))}return Ne.resolve(f)}getAllFromCollectionGroup(e,t,a,c){vt()}qr(e,t){return Ne.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new ZI(this)}getSize(e){return Ne.resolve(this.size)}}class ZI extends HI{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((a,c)=>{c.isValidDocument()?t.push(this.Ir.addEntry(e,c)):this.Ir.removeEntry(a)}),Ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.persistence=e,this.Qr=new al(t=>hg(t),fg),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.$r=0,this.Kr=new wg,this.targetCount=0,this.Ur=oc.Kn()}forEachTarget(e,t){return this.Qr.forEach((a,c)=>t(c)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.$r&&(this.$r=t),Ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new oc(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.zn(t),Ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,a){let c=0;const f=[];return this.Qr.forEach((y,b)=>{b.sequenceNumber<=t&&a.get(b.targetId)===null&&(this.Qr.delete(y),f.push(this.removeMatchingKeysForTargetId(e,b.targetId)),c++)}),Ne.waitFor(f).next(()=>c)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const a=this.Qr.get(t)||null;return Ne.resolve(a)}addMatchingKeys(e,t,a){return this.Kr.yr(t,a),Ne.resolve()}removeMatchingKeys(e,t,a){this.Kr.Sr(t,a);const c=this.persistence.referenceDelegate,f=[];return c&&t.forEach(y=>{f.push(c.markPotentiallyOrphaned(e,y))}),Ne.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const a=this.Kr.vr(t);return Ne.resolve(a)}containsKey(e,t){return Ne.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Uf(0),this.zr=!1,this.zr=!0,this.jr=new QI,this.referenceDelegate=e(this),this.Hr=new $I(this),this.indexManager=new PI,this.remoteDocumentCache=function(c){return new KI(c)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new LI(t),this.Yr=new YI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Wr[e.toKey()];return a||(a=new WI(t,this.referenceDelegate),this.Wr[e.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,a){et("MemoryPersistence","Starting transaction:",e);const c=new JI(this.Gr.next());return this.referenceDelegate.Zr(),a(c).next(f=>this.referenceDelegate.Xr(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}ei(e,t){return Ne.or(Object.values(this.Wr).map(a=>()=>a.containsKey(e,t)))}}class JI extends S3{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.ti=new wg,this.ni=null}static ri(e){return new Eg(e)}get ii(){if(this.ni)return this.ni;throw vt()}addReference(e,t,a){return this.ti.addReference(a,t),this.ii.delete(a.toString()),Ne.resolve()}removeReference(e,t,a){return this.ti.removeReference(a,t),this.ii.add(a.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(c=>this.ii.add(c.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(f=>this.ii.add(f.toString()))}).next(()=>a.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.ii,a=>{const c=dt.fromPath(a);return this.si(e,c).next(f=>{f||t.removeEntry(c,Ct.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(a=>{a?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Ne.or([()=>Ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Tf{constructor(e,t){this.persistence=e,this.oi=new al(a=>R3(a.path),(a,c)=>a.isEqual(c)),this.garbageCollector=zI(this,t)}static ri(e,t){return new Tf(e,t)}Zr(){}Xr(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>t.next(c=>a+c))}sr(e){let t=0;return this.rr(e,a=>{t++}).next(()=>t)}rr(e,t){return Ne.forEach(this.oi,(a,c)=>this.ar(e,a,c).next(f=>f?Ne.resolve():t(c)))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const c=this.persistence.getRemoteDocumentCache(),f=c.newChangeBuffer();return c.qr(e,y=>this.ar(e,y,t).next(b=>{b||(a++,f.removeEntry(y,Ct.min()))})).next(()=>f.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nf(e.data.value)),t}ar(e,t,a){return Ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.oi.get(t);return Ne.resolve(c!==void 0&&c>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,a,c){this.targetId=e,this.fromCache=t,this.Hi=a,this.Ji=c}static Yi(e,t){let a=Kt(),c=Kt();for(const f of t.docChanges)switch(f.type){case 0:a=a.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new vg(e,t.fromCache,a,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return $A()?8:I3(hi())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,a,c){const f={result:null};return this.rs(e,t).next(y=>{f.result=y}).next(()=>{if(!f.result)return this.ss(e,t,c,a).next(y=>{f.result=y})}).next(()=>{if(f.result)return;const y=new e4;return this._s(e,t,y).next(b=>{if(f.result=b,this.Xi)return this.us(e,t,y,b.size)})}).next(()=>f.result)}us(e,t,a,c){return a.documentReadCount<this.es?(Hl()<=Wt.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",Gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ne.resolve()):(Hl()<=Wt.DEBUG&&et("QueryEngine","Query:",Gl(t),"scans",a.documentReadCount,"local documents and returns",c,"documents as results."),a.documentReadCount>this.ts*c?(Hl()<=Wt.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",Gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ks(t))):Ne.resolve())}rs(e,t){if(Px(t))return Ne.resolve(null);let a=Ks(t);return this.indexManager.getIndexType(e,a).next(c=>c===0?null:(t.limit!==null&&c===1&&(t=_1(t,null,"F"),a=Ks(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(f=>{const y=Kt(...f);return this.ns.getDocuments(e,y).next(b=>this.indexManager.getMinOffset(e,a).next(v=>{const w=this.cs(t,b);return this.ls(t,w,y,v.readTime)?this.rs(e,_1(t,null,"F")):this.hs(e,w,t,v)}))})))}ss(e,t,a,c){return Px(t)||c.isEqual(Ct.min())?Ne.resolve(null):this.ns.getDocuments(e,a).next(f=>{const y=this.cs(t,f);return this.ls(t,y,a,c)?Ne.resolve(null):(Hl()<=Wt.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Gl(t)),this.hs(e,y,t,b3(c,_u)).next(b=>b))})}cs(e,t){let a=new Nr(dE(e));return t.forEach((c,f)=>{Hf(e,f)&&(a=a.add(f))}),a}ls(e,t,a,c){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const f=e.limitType==="F"?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}_s(e,t,a){return Hl()<=Wt.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",Gl(t)),this.ns.getDocumentsMatchingQuery(e,t,Eo.min(),a)}hs(e,t,a,c){return this.ns.getDocumentsMatchingQuery(e,a,c).next(f=>(t.forEach(y=>{f=f.insert(y.key,y)}),f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LocalStore",n4=3e8;class r4{constructor(e,t,a,c){this.persistence=e,this.Ps=t,this.serializer=c,this.Ts=new Zn(Jt),this.Is=new al(f=>hg(f),fg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(a)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function i4(i,e,t,a){return new r4(i,e,t,a)}async function PE(i,e){const t=It(i);return await t.persistence.runTransaction("Handle user change","readonly",a=>{let c;return t.mutationQueue.getAllMutationBatches(a).next(f=>(c=f,t.As(e),t.mutationQueue.getAllMutationBatches(a))).next(f=>{const y=[],b=[];let v=Kt();for(const w of c){y.push(w.batchId);for(const S of w.mutations)v=v.add(S.key)}for(const w of f){b.push(w.batchId);for(const S of w.mutations)v=v.add(S.key)}return t.localDocuments.getDocuments(a,v).next(w=>({Rs:w,removedBatchIds:y,addedBatchIds:b}))})})}function s4(i,e){const t=It(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const c=e.batch.keys(),f=t.ds.newChangeBuffer({trackRemovals:!0});return function(b,v,w,S){const R=w.batch,k=R.keys();let U=Ne.resolve();return k.forEach(q=>{U=U.next(()=>S.getEntry(v,q)).next(ee=>{const K=w.docVersions.get(q);dn(K!==null),ee.version.compareTo(K)<0&&(R.applyToRemoteDocument(ee,w),ee.isValidDocument()&&(ee.setReadTime(w.commitVersion),S.addEntry(ee)))})}),U.next(()=>b.mutationQueue.removeMutationBatch(v,R))}(t,a,e,f).next(()=>f.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(b){let v=Kt();for(let w=0;w<b.mutationResults.length;++w)b.mutationResults[w].transformResults.length>0&&(v=v.add(b.batch.mutations[w].key));return v}(e))).next(()=>t.localDocuments.getDocuments(a,c))})}function BE(i){const e=It(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function a4(i,e){const t=It(i),a=e.snapshotVersion;let c=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const y=t.ds.newChangeBuffer({trackRemovals:!0});c=t.Ts;const b=[];e.targetChanges.forEach((S,R)=>{const k=c.get(R);if(!k)return;b.push(t.Hr.removeMatchingKeys(f,S.removedDocuments,R).next(()=>t.Hr.addMatchingKeys(f,S.addedDocuments,R)));let U=k.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(R)!==null?U=U.withResumeToken(ei.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):S.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(S.resumeToken,a)),c=c.insert(R,U),function(ee,K,de){return ee.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=n4?!0:de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0}(k,U,S)&&b.push(t.Hr.updateTargetData(f,U))});let v=Oa(),w=Kt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&b.push(t.persistence.referenceDelegate.updateLimboDocument(f,S))}),b.push(o4(f,y,e.documentUpdates).next(S=>{v=S.Vs,w=S.fs})),!a.isEqual(Ct.min())){const S=t.Hr.getLastRemoteSnapshotVersion(f).next(R=>t.Hr.setTargetsMetadata(f,f.currentSequenceNumber,a));b.push(S)}return Ne.waitFor(b).next(()=>y.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,v,w)).next(()=>v)}).then(f=>(t.Ts=c,f))}function o4(i,e,t){let a=Kt(),c=Kt();return t.forEach(f=>a=a.add(f)),e.getEntries(i,a).next(f=>{let y=Oa();return t.forEach((b,v)=>{const w=f.get(b);v.isFoundDocument()!==w.isFoundDocument()&&(c=c.add(b)),v.isNoDocument()&&v.version.isEqual(Ct.min())?(e.removeEntry(b,v.readTime),y=y.insert(b,v)):!w.isValidDocument()||v.version.compareTo(w.version)>0||v.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(v),y=y.insert(b,v)):et(_g,"Ignoring outdated watch update for ",b,". Current version:",w.version," Watch version:",v.version)}),{Vs:y,fs:c}})}function l4(i,e){const t=It(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=lg),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function c4(i,e){const t=It(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let c;return t.Hr.getTargetData(a,e).next(f=>f?(c=f,Ne.resolve(c)):t.Hr.allocateTargetId(a).next(y=>(c=new fo(e,y,"TargetPurposeListen",a.currentSequenceNumber),t.Hr.addTargetData(a,c).next(()=>c))))}).then(a=>{const c=t.Ts.get(a.targetId);return(c===null||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(a.targetId,a),t.Is.set(e,a.targetId)),a})}async function S1(i,e,t){const a=It(i),c=a.Ts.get(e),f=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",f,y=>a.persistence.referenceDelegate.removeTarget(y,c))}catch(y){if(!mc(y))throw y;et(_g,`Failed to update sequence numbers for target ${e}: ${y}`)}a.Ts=a.Ts.remove(e),a.Is.delete(c.target)}function Wx(i,e,t){const a=It(i);let c=Ct.min(),f=Kt();return a.persistence.runTransaction("Execute query","readwrite",y=>function(v,w,S){const R=It(v),k=R.Is.get(S);return k!==void 0?Ne.resolve(R.Ts.get(k)):R.Hr.getTargetData(w,S)}(a,y,Ks(e)).next(b=>{if(b)return c=b.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(y,b.targetId).next(v=>{f=v})}).next(()=>a.Ps.getDocumentsMatchingQuery(y,e,t?c:Ct.min(),t?f:Kt())).next(b=>(u4(a,W3(e),b),{documents:b,gs:f})))}function u4(i,e,t){let a=i.Es.get(e)||Ct.min();t.forEach((c,f)=>{f.readTime.compareTo(a)>0&&(a=f.readTime)}),i.Es.set(e,a)}class Kx{constructor(){this.activeTargetIds=tI()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h4{constructor(){this.ho=new Kx,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,a){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Kx,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="ConnectivityMonitor";class $x{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){et(Zx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){et(Zx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function I1(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="RestConnection",d4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${a}/databases/${c}`,this.wo=this.databaseId.database===wf?`project_id=${a}`:`project_id=${a}&database_id=${c}`}So(e,t,a,c,f){const y=I1(),b=this.bo(e,t.toUriEncodedString());et(t1,`Sending RPC '${e}' ${y}:`,b,a);const v={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(v,c,f),this.vo(e,b,v,a).then(w=>(et(t1,`Received RPC '${e}' ${y}: `,w),w),w=>{throw rc(t1,`RPC '${e}' ${y} failed with error: `,w,"url: ",b,"request:",a),w})}Co(e,t,a,c,f,y){return this.So(e,t,a,c,f)}Do(e,t,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,f)=>e[f]=c),a&&a.headers.forEach((c,f)=>e[f]=c)}bo(e,t){const a=d4[e];return`${this.po}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="WebChannelConnection";class p4 extends g4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,a,c){const f=I1();return new Promise((y,b)=>{const v=new zw;v.setWithCredentials(!0),v.listenOnce(Hw.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case tf.NO_ERROR:const S=v.getResponseJson();et(li,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),y(S);break;case tf.TIMEOUT:et(li,`RPC '${e}' ${f} timed out`),b(new nt(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const R=v.getStatus();if(et(li,`RPC '${e}' ${f} failed with status:`,R,"response text:",v.getResponseText()),R>0){let k=v.getResponseJson();Array.isArray(k)&&(k=k[0]);const U=k==null?void 0:k.error;if(U&&U.status&&U.message){const q=function(K){const de=K.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(de)>=0?de:Ie.UNKNOWN}(U.status);b(new nt(q,U.message))}else b(new nt(Ie.UNKNOWN,"Server responded with status "+v.getStatus()))}else b(new nt(Ie.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{et(li,`RPC '${e}' ${f} completed.`)}});const w=JSON.stringify(c);et(li,`RPC '${e}' ${f} sending request:`,c),v.send(t,"POST",w,a,15)})}Wo(e,t,a){const c=I1(),f=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=Yw(),b=qw(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(v.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Do(v.initMessageHeaders,t,a),v.encodeInitMessageHeaders=!0;const S=f.join("");et(li,`Creating RPC '${e}' stream ${c}: ${S}`,v);const R=y.createWebChannel(S,v);let k=!1,U=!1;const q=new m4({Fo:K=>{U?et(li,`Not sending because RPC '${e}' stream ${c} is closed:`,K):(k||(et(li,`Opening RPC '${e}' stream ${c} transport.`),R.open(),k=!0),et(li,`RPC '${e}' stream ${c} sending:`,K),R.send(K))},Mo:()=>R.close()}),ee=(K,de,fe)=>{K.listen(de,ie=>{try{fe(ie)}catch(ve){setTimeout(()=>{throw ve},0)}})};return ee(R,cu.EventType.OPEN,()=>{U||(et(li,`RPC '${e}' stream ${c} transport opened.`),q.Qo())}),ee(R,cu.EventType.CLOSE,()=>{U||(U=!0,et(li,`RPC '${e}' stream ${c} transport closed`),q.Ko())}),ee(R,cu.EventType.ERROR,K=>{U||(U=!0,rc(li,`RPC '${e}' stream ${c} transport errored:`,K),q.Ko(new nt(Ie.UNAVAILABLE,"The operation could not be completed")))}),ee(R,cu.EventType.MESSAGE,K=>{var de;if(!U){const fe=K.data[0];dn(!!fe);const ie=fe,ve=(ie==null?void 0:ie.error)||((de=ie[0])===null||de===void 0?void 0:de.error);if(ve){et(li,`RPC '${e}' stream ${c} received error:`,ve);const je=ve.status;let Pe=function(P){const z=Er[P];if(z!==void 0)return AE(z)}(je),H=ve.message;Pe===void 0&&(Pe=Ie.INTERNAL,H="Unknown error status: "+je+" with message "+ve.message),U=!0,q.Ko(new nt(Pe,H)),R.close()}else et(li,`RPC '${e}' stream ${c} received:`,fe),q.Uo(fe)}}),ee(b,Gw.STAT_EVENT,K=>{K.stat===p1.PROXY?et(li,`RPC '${e}' stream ${c} detected buffering proxy`):K.stat===p1.NOPROXY&&et(li,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{q.$o()},0),q}}function n1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(i){return new EI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t,a=1e3,c=1.5,f=6e4){this.Ti=e,this.timerId=t,this.Go=a,this.zo=c,this.jo=f,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),c=Math.max(0,t-a);c>0&&et("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,c,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="PersistentStream";class UE{constructor(e,t,a,c,f,y,b,v){this.Ti=e,this.n_=a,this.r_=c,this.connection=f,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=b,this.listener=v,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new jE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(Ma(t.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,c])=>{this.i_===t&&this.V_(a,c)},a=>{e(()=>{const c=new nt(Ie.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(c)})})}V_(e,t){const a=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(c=>{a(()=>this.m_(c))}),this.stream.onMessage(c=>{a(()=>++this.__==1?this.g_(c):this.onNext(c))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return et(Jx,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(et(Jx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x4 extends UE{constructor(e,t,a,c,f,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,c,y),this.serializer=f}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=bI(this.serializer,e),a=function(f){if(!("targetChange"in f))return Ct.min();const y=f.targetChange;return y.targetIds&&y.targetIds.length?Ct.min():y.readTime?Zs(y.readTime):Ct.min()}(e);return this.listener.p_(t,a)}y_(e){const t={};t.database=T1(this.serializer),t.addTarget=function(f,y){let b;const v=y.target;if(b=E1(v)?{documents:TI(f,v)}:{query:SI(f,v).ht},b.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){b.resumeToken=SE(f,y.resumeToken);const w=b1(f,y.expectedCount);w!==null&&(b.expectedCount=w)}else if(y.snapshotVersion.compareTo(Ct.min())>0){b.readTime=Cf(f,y.snapshotVersion.toTimestamp());const w=b1(f,y.expectedCount);w!==null&&(b.expectedCount=w)}return b}(this.serializer,e);const a=NI(this.serializer,e);a&&(t.labels=a),this.I_(t)}w_(e){const t={};t.database=T1(this.serializer),t.removeTarget=e,this.I_(t)}}class y4 extends UE{constructor(e,t,a,c,f,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,c,y),this.serializer=f}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return dn(!!e.streamToken),this.lastStreamToken=e.streamToken,dn(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){dn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=CI(e.writeResults,e.commitTime),a=Zs(e.commitTime);return this.listener.v_(a,t)}C_(){const e={};e.database=T1(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>AI(this.serializer,a))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{}class E4 extends w4{constructor(e,t,a,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=c,this.F_=!1}M_(){if(this.F_)throw new nt(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,a,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,y])=>this.connection.So(e,A1(t,a),c,f,y)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new nt(Ie.UNKNOWN,f.toString())})}Co(e,t,a,c,f){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,b])=>this.connection.Co(e,A1(t,a),c,y,b,f)).catch(y=>{throw y.name==="FirebaseError"?(y.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new nt(Ie.UNKNOWN,y.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class v4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ma(t),this.N_=!1):et("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class _4{constructor(e,t,a,c,f){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=f,this.z_.To(y=>{a.enqueueAndForget(async()=>{ol(this)&&(et(nl,"Restarting streams for network reachability change."),await async function(v){const w=It(v);w.W_.add(4),await Uu(w),w.j_.set("Unknown"),w.W_.delete(4),await Qf(w)}(this))})}),this.j_=new v4(a,c)}}async function Qf(i){if(ol(i))for(const e of i.G_)await e(!0)}async function Uu(i){for(const e of i.G_)await e(!1)}function VE(i,e){const t=It(i);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Tg(t)?Cg(t):xc(t).c_()&&Ag(t,e))}function bg(i,e){const t=It(i),a=xc(t);t.U_.delete(e),a.c_()&&FE(t,e),t.U_.size===0&&(a.c_()?a.P_():ol(t)&&t.j_.set("Unknown"))}function Ag(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xc(i).y_(e)}function FE(i,e){i.H_.Ne(e),xc(i).w_(e)}function Cg(i){i.H_=new pI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.U_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),xc(i).start(),i.j_.B_()}function Tg(i){return ol(i)&&!xc(i).u_()&&i.U_.size>0}function ol(i){return It(i).W_.size===0}function zE(i){i.H_=void 0}async function b4(i){i.j_.set("Online")}async function A4(i){i.U_.forEach((e,t)=>{Ag(i,e)})}async function C4(i,e){zE(i),Tg(i)?(i.j_.q_(e),Cg(i)):i.j_.set("Unknown")}async function T4(i,e,t){if(i.j_.set("Online"),e instanceof TE&&e.state===2&&e.cause)try{await async function(c,f){const y=f.cause;for(const b of f.targetIds)c.U_.has(b)&&(await c.remoteSyncer.rejectListen(b,y),c.U_.delete(b),c.H_.removeTarget(b))}(i,e)}catch(a){et(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Sf(i,a)}else if(e instanceof af?i.H_.We(e):e instanceof CE?i.H_.Ze(e):i.H_.je(e),!t.isEqual(Ct.min()))try{const a=await BE(i.localStore);t.compareTo(a)>=0&&await function(f,y){const b=f.H_.ot(y);return b.targetChanges.forEach((v,w)=>{if(v.resumeToken.approximateByteSize()>0){const S=f.U_.get(w);S&&f.U_.set(w,S.withResumeToken(v.resumeToken,y))}}),b.targetMismatches.forEach((v,w)=>{const S=f.U_.get(v);if(!S)return;f.U_.set(v,S.withResumeToken(ei.EMPTY_BYTE_STRING,S.snapshotVersion)),FE(f,v);const R=new fo(S.target,v,w,S.sequenceNumber);Ag(f,R)}),f.remoteSyncer.applyRemoteEvent(b)}(i,t)}catch(a){et(nl,"Failed to raise snapshot:",a),await Sf(i,a)}}async function Sf(i,e,t){if(!mc(e))throw e;i.W_.add(1),await Uu(i),i.j_.set("Offline"),t||(t=()=>BE(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{et(nl,"Retrying IndexedDB access"),await t(),i.W_.delete(1),await Qf(i)})}function HE(i,e){return e().catch(t=>Sf(i,t,e))}async function Wf(i){const e=It(i),t=Ao(e);let a=e.K_.length>0?e.K_[e.K_.length-1].batchId:lg;for(;S4(e);)try{const c=await l4(e.localStore,a);if(c===null){e.K_.length===0&&t.P_();break}a=c.batchId,I4(e,c)}catch(c){await Sf(e,c)}GE(e)&&qE(e)}function S4(i){return ol(i)&&i.K_.length<10}function I4(i,e){i.K_.push(e);const t=Ao(i);t.c_()&&t.S_&&t.b_(e.mutations)}function GE(i){return ol(i)&&!Ao(i).u_()&&i.K_.length>0}function qE(i){Ao(i).start()}async function N4(i){Ao(i).C_()}async function R4(i){const e=Ao(i);for(const t of i.K_)e.b_(t.mutations)}async function D4(i,e,t){const a=i.K_.shift(),c=pg.from(a,e,t);await HE(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),await Wf(i)}async function M4(i,e){e&&Ao(i).S_&&await async function(a,c){if(function(y){return dI(y)&&y!==Ie.ABORTED}(c.code)){const f=a.K_.shift();Ao(a).h_(),await HE(a,()=>a.remoteSyncer.rejectFailedWrite(f.batchId,c)),await Wf(a)}}(i,e),GE(i)&&qE(i)}async function ey(i,e){const t=It(i);t.asyncQueue.verifyOperationInProgress(),et(nl,"RemoteStore received new credentials");const a=ol(t);t.W_.add(3),await Uu(t),a&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Qf(t)}async function O4(i,e){const t=It(i);e?(t.W_.delete(2),await Qf(t)):e||(t.W_.add(2),await Uu(t),t.j_.set("Unknown"))}function xc(i){return i.J_||(i.J_=function(t,a,c){const f=It(t);return f.M_(),new x4(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{xo:b4.bind(null,i),No:A4.bind(null,i),Lo:C4.bind(null,i),p_:T4.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Tg(i)?Cg(i):i.j_.set("Unknown")):(await i.J_.stop(),zE(i))})),i.J_}function Ao(i){return i.Y_||(i.Y_=function(t,a,c){const f=It(t);return f.M_(),new y4(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:N4.bind(null,i),Lo:M4.bind(null,i),D_:R4.bind(null,i),v_:D4.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await Wf(i)):(await i.Y_.stop(),i.K_.length>0&&(et(nl,`Stopping write stream with ${i.K_.length} pending writes`),i.K_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,a,c,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=c,this.removalCallback=f,this.deferred=new Na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,c,f){const y=Date.now()+a,b=new Sg(e,t,y,c,f);return b.start(a),b}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(i,e){if(Ma("AsyncQueue",`${e}: ${i}`),mc(i))return new nt(Ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{static emptySet(e){return new $l(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||dt.comparator(t.key,a.key):(t,a)=>dt.comparator(t.key,a.key),this.keyedMap=uu(),this.sortedSet=new Zn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $l)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new $l;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.Z_=new Zn(dt.comparator)}track(e){const t=e.doc.key,a=this.Z_.get(t);a?e.type!==0&&a.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&a.type!==1?this.Z_=this.Z_.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Z_=this.Z_.remove(t):e.type===1&&a.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):vt():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,a)=>{e.push(a)}),e}}class lc{constructor(e,t,a,c,f,y,b,v,w){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=f,this.fromCache=y,this.syncStateChanged=b,this.excludesMetadataChanges=v,this.hasCachedResults=w}static fromInitialDocuments(e,t,a,c,f){const y=[];return t.forEach(b=>{y.push({type:0,doc:b})}),new lc(e,t,$l.emptySet(t),y,a,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==a[c].type||!t[c].doc.isEqual(a[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class k4{constructor(){this.queries=ny(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,a){const c=It(t),f=c.queries;c.queries=ny(),f.forEach((y,b)=>{for(const v of b.ta)v.onError(a)})})(this,new nt(Ie.ABORTED,"Firestore shutting down"))}}function ny(){return new al(i=>fE(i),zf)}async function YE(i,e){const t=It(i);let a=3;const c=e.query;let f=t.queries.get(c);f?!f.na()&&e.ra()&&(a=2):(f=new L4,a=e.ra()?0:1);try{switch(a){case 0:f.ea=await t.onListen(c,!0);break;case 1:f.ea=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(y){const b=Ig(y,`Initialization of query '${Gl(e.query)}' failed`);return void e.onError(b)}t.queries.set(c,f),f.ta.push(e),e.sa(t.onlineState),f.ea&&e.oa(f.ea)&&Ng(t)}async function XE(i,e){const t=It(i),a=e.query;let c=3;const f=t.queries.get(a);if(f){const y=f.ta.indexOf(e);y>=0&&(f.ta.splice(y,1),f.ta.length===0?c=e.ra()?0:1:!f.na()&&e.ra()&&(c=2))}switch(c){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function P4(i,e){const t=It(i);let a=!1;for(const c of e){const f=c.query,y=t.queries.get(f);if(y){for(const b of y.ta)b.oa(c)&&(a=!0);y.ea=c}}a&&Ng(t)}function B4(i,e,t){const a=It(i),c=a.queries.get(e);if(c)for(const f of c.ta)f.onError(t);a.queries.delete(e)}function Ng(i){i.ia.forEach(e=>{e.next()})}var N1,ry;(ry=N1||(N1={}))._a="default",ry.Cache="cache";class QE{constructor(e,t,a){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(e){if(!this.options.includeMetadataChanges){const a=[];for(const c of e.docChanges)c.type!==3&&a.push(c);e=new lc(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const a=t!=="Offline";return(!this.options.Ta||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==N1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.key=e}}class KE{constructor(e){this.key=e}}class j4{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Kt(),this.mutatedKeys=Kt(),this.ya=dE(e),this.wa=new $l(this.ya)}get Sa(){return this.fa}ba(e,t){const a=t?t.Da:new ty,c=t?t.wa:this.wa;let f=t?t.mutatedKeys:this.mutatedKeys,y=c,b=!1;const v=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,w=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((S,R)=>{const k=c.get(S),U=Hf(this.query,R)?R:null,q=!!k&&this.mutatedKeys.has(k.key),ee=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let K=!1;k&&U?k.data.isEqual(U.data)?q!==ee&&(a.track({type:3,doc:U}),K=!0):this.va(k,U)||(a.track({type:2,doc:U}),K=!0,(v&&this.ya(U,v)>0||w&&this.ya(U,w)<0)&&(b=!0)):!k&&U?(a.track({type:0,doc:U}),K=!0):k&&!U&&(a.track({type:1,doc:k}),K=!0,(v||w)&&(b=!0)),K&&(U?(y=y.add(U),f=ee?f.add(S):f.delete(S)):(y=y.delete(S),f=f.delete(S)))}),this.query.limit!==null)for(;y.size>this.query.limit;){const S=this.query.limitType==="F"?y.last():y.first();y=y.delete(S.key),f=f.delete(S.key),a.track({type:1,doc:S})}return{wa:y,Da:a,ls:b,mutatedKeys:f}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,c){const f=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const y=e.Da.X_();y.sort((S,R)=>function(U,q){const ee=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return ee(U)-ee(q)}(S.type,R.type)||this.ya(S.doc,R.doc)),this.Ca(a),c=c!=null&&c;const b=t&&!c?this.Fa():[],v=this.pa.size===0&&this.current&&!c?1:0,w=v!==this.ga;return this.ga=v,y.length!==0||w?{snapshot:new lc(this.query,e.wa,f,y,e.mutatedKeys,v===0,w,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:b}:{Ma:b}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ty,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Kt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const t=[];return e.forEach(a=>{this.pa.has(a)||t.push(new KE(a))}),this.pa.forEach(a=>{e.has(a)||t.push(new WE(a))}),t}Oa(e){this.fa=e.gs,this.pa=Kt();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return lc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Rg="SyncEngine";class U4{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class V4{constructor(e){this.key=e,this.Ba=!1}}class F4{constructor(e,t,a,c,f,y){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=y,this.La={},this.ka=new al(b=>fE(b),zf),this.qa=new Map,this.Qa=new Set,this.$a=new Zn(dt.comparator),this.Ka=new Map,this.Ua=new wg,this.Wa={},this.Ga=new Map,this.za=oc.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function z4(i,e,t=!0){const a=nv(i);let c;const f=a.ka.get(e);return f?(a.sharedClientState.addLocalQueryTarget(f.targetId),c=f.view.Na()):c=await ZE(a,e,t,!0),c}async function H4(i,e){const t=nv(i);await ZE(t,e,!0,!1)}async function ZE(i,e,t,a){const c=await c4(i.localStore,Ks(e)),f=c.targetId,y=i.sharedClientState.addLocalQueryTarget(f,t);let b;return a&&(b=await G4(i,e,f,y==="current",c.resumeToken)),i.isPrimaryClient&&t&&VE(i.remoteStore,c),b}async function G4(i,e,t,a,c){i.Ha=(R,k,U)=>async function(ee,K,de,fe){let ie=K.view.ba(de);ie.ls&&(ie=await Wx(ee.localStore,K.query,!1).then(({documents:H})=>K.view.ba(H,ie)));const ve=fe&&fe.targetChanges.get(K.targetId),je=fe&&fe.targetMismatches.get(K.targetId)!=null,Pe=K.view.applyChanges(ie,ee.isPrimaryClient,ve,je);return sy(ee,K.targetId,Pe.Ma),Pe.snapshot}(i,R,k,U);const f=await Wx(i.localStore,e,!0),y=new j4(e,f.gs),b=y.ba(f.documents),v=ju.createSynthesizedTargetChangeForCurrentChange(t,a&&i.onlineState!=="Offline",c),w=y.applyChanges(b,i.isPrimaryClient,v);sy(i,t,w.Ma);const S=new U4(e,t,y);return i.ka.set(e,S),i.qa.has(t)?i.qa.get(t).push(e):i.qa.set(t,[e]),w.snapshot}async function q4(i,e,t){const a=It(i),c=a.ka.get(e),f=a.qa.get(c.targetId);if(f.length>1)return a.qa.set(c.targetId,f.filter(y=>!zf(y,e))),void a.ka.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(c.targetId),a.sharedClientState.isActiveQueryTarget(c.targetId)||await S1(a.localStore,c.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(c.targetId),t&&bg(a.remoteStore,c.targetId),R1(a,c.targetId)}).catch(gc)):(R1(a,c.targetId),await S1(a.localStore,c.targetId,!0))}async function Y4(i,e){const t=It(i),a=t.ka.get(e),c=t.qa.get(a.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),bg(t.remoteStore,a.targetId))}async function X4(i,e,t){const a=eN(i);try{const c=await function(y,b){const v=It(y),w=Ir.now(),S=b.reduce((U,q)=>U.add(q.key),Kt());let R,k;return v.persistence.runTransaction("Locally write mutations","readwrite",U=>{let q=Oa(),ee=Kt();return v.ds.getEntries(U,S).next(K=>{q=K,q.forEach((de,fe)=>{fe.isValidDocument()||(ee=ee.add(de))})}).next(()=>v.localDocuments.getOverlayedDocuments(U,q)).next(K=>{R=K;const de=[];for(const fe of b){const ie=lI(fe,R.get(fe.key).overlayedDocument);ie!=null&&de.push(new No(fe.key,ie,iE(ie.value.mapValue),ws.exists(!0)))}return v.mutationQueue.addMutationBatch(U,w,de,b)}).next(K=>{k=K;const de=K.applyToLocalDocumentSet(R,ee);return v.documentOverlayCache.saveOverlays(U,K.batchId,de)})}).then(()=>({batchId:k.batchId,changes:mE(R)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(c.batchId),function(y,b,v){let w=y.Wa[y.currentUser.toKey()];w||(w=new Zn(Jt)),w=w.insert(b,v),y.Wa[y.currentUser.toKey()]=w}(a,c.batchId,t),await Vu(a,c.changes),await Wf(a.remoteStore)}catch(c){const f=Ig(c,"Failed to persist write");t.reject(f)}}async function $E(i,e){const t=It(i);try{const a=await a4(t.localStore,e);e.targetChanges.forEach((c,f)=>{const y=t.Ka.get(f);y&&(dn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?y.Ba=!0:c.modifiedDocuments.size>0?dn(y.Ba):c.removedDocuments.size>0&&(dn(y.Ba),y.Ba=!1))}),await Vu(t,a,e)}catch(a){await gc(a)}}function iy(i,e,t){const a=It(i);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const c=[];a.ka.forEach((f,y)=>{const b=y.view.sa(e);b.snapshot&&c.push(b.snapshot)}),function(y,b){const v=It(y);v.onlineState=b;let w=!1;v.queries.forEach((S,R)=>{for(const k of R.ta)k.sa(b)&&(w=!0)}),w&&Ng(v)}(a.eventManager,e),c.length&&a.La.p_(c),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function Q4(i,e,t){const a=It(i);a.sharedClientState.updateQueryState(e,"rejected",t);const c=a.Ka.get(e),f=c&&c.key;if(f){let y=new Zn(dt.comparator);y=y.insert(f,ui.newNoDocument(f,Ct.min()));const b=Kt().add(f),v=new Yf(Ct.min(),new Map,new Zn(Jt),y,b);await $E(a,v),a.$a=a.$a.remove(f),a.Ka.delete(e),Dg(a)}else await S1(a.localStore,e,!1).then(()=>R1(a,e,t)).catch(gc)}async function W4(i,e){const t=It(i),a=e.batch.batchId;try{const c=await s4(t.localStore,e);ev(t,a,null),JE(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Vu(t,c)}catch(c){await gc(c)}}async function K4(i,e,t){const a=It(i);try{const c=await function(y,b){const v=It(y);return v.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let S;return v.mutationQueue.lookupMutationBatch(w,b).next(R=>(dn(R!==null),S=R.keys(),v.mutationQueue.removeMutationBatch(w,R))).next(()=>v.mutationQueue.performConsistencyCheck(w)).next(()=>v.documentOverlayCache.removeOverlaysForBatchId(w,S,b)).next(()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,S)).next(()=>v.localDocuments.getDocuments(w,S))})}(a.localStore,e);ev(a,e,t),JE(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Vu(a,c)}catch(c){await gc(c)}}function JE(i,e){(i.Ga.get(e)||[]).forEach(t=>{t.resolve()}),i.Ga.delete(e)}function ev(i,e,t){const a=It(i);let c=a.Wa[a.currentUser.toKey()];if(c){const f=c.get(e);f&&(t?f.reject(t):f.resolve(),c=c.remove(e)),a.Wa[a.currentUser.toKey()]=c}}function R1(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.qa.get(e))i.ka.delete(a),t&&i.La.Ja(a,t);i.qa.delete(e),i.isPrimaryClient&&i.Ua.br(e).forEach(a=>{i.Ua.containsKey(a)||tv(i,a)})}function tv(i,e){i.Qa.delete(e.path.canonicalString());const t=i.$a.get(e);t!==null&&(bg(i.remoteStore,t),i.$a=i.$a.remove(e),i.Ka.delete(t),Dg(i))}function sy(i,e,t){for(const a of t)a instanceof WE?(i.Ua.addReference(a.key,e),Z4(i,a)):a instanceof KE?(et(Rg,"Document no longer in limbo: "+a.key),i.Ua.removeReference(a.key,e),i.Ua.containsKey(a.key)||tv(i,a.key)):vt()}function Z4(i,e){const t=e.key,a=t.path.canonicalString();i.$a.get(t)||i.Qa.has(a)||(et(Rg,"New document in limbo: "+t),i.Qa.add(a),Dg(i))}function Dg(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const t=new dt(On.fromString(e)),a=i.za.next();i.Ka.set(a,new V4(t)),i.$a=i.$a.insert(t,a),VE(i.remoteStore,new fo(Ks(dg(t.path)),a,"TargetPurposeLimboResolution",Uf.ae))}}async function Vu(i,e,t){const a=It(i),c=[],f=[],y=[];a.ka.isEmpty()||(a.ka.forEach((b,v)=>{y.push(a.Ha(v,e,t).then(w=>{var S;if((w||t)&&a.isPrimaryClient){const R=w?!w.fromCache:(S=t==null?void 0:t.targetChanges.get(v.targetId))===null||S===void 0?void 0:S.current;a.sharedClientState.updateQueryState(v.targetId,R?"current":"not-current")}if(w){c.push(w);const R=vg.Yi(v.targetId,w);f.push(R)}}))}),await Promise.all(y),a.La.p_(c),await async function(v,w){const S=It(v);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>Ne.forEach(w,k=>Ne.forEach(k.Hi,U=>S.persistence.referenceDelegate.addReference(R,k.targetId,U)).next(()=>Ne.forEach(k.Ji,U=>S.persistence.referenceDelegate.removeReference(R,k.targetId,U)))))}catch(R){if(!mc(R))throw R;et(_g,"Failed to update sequence numbers: "+R)}for(const R of w){const k=R.targetId;if(!R.fromCache){const U=S.Ts.get(k),q=U.snapshotVersion,ee=U.withLastLimboFreeSnapshotVersion(q);S.Ts=S.Ts.insert(k,ee)}}}(a.localStore,f))}async function $4(i,e){const t=It(i);if(!t.currentUser.isEqual(e)){et(Rg,"User change. New user:",e.toKey());const a=await PE(t.localStore,e);t.currentUser=e,function(f,y){f.Ga.forEach(b=>{b.forEach(v=>{v.reject(new nt(Ie.CANCELLED,y))})}),f.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Vu(t,a.Rs)}}function J4(i,e){const t=It(i),a=t.Ka.get(e);if(a&&a.Ba)return Kt().add(a.key);{let c=Kt();const f=t.qa.get(e);if(!f)return c;for(const y of f){const b=t.ka.get(y);c=c.unionWith(b.view.Sa)}return c}}function nv(i){const e=It(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=$E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q4.bind(null,e),e.La.p_=P4.bind(null,e.eventManager),e.La.Ja=B4.bind(null,e.eventManager),e}function eN(i){const e=It(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K4.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return i4(this.persistence,new t4,e.initialUser,this.serializer)}Xa(e){return new kE(Eg.ri,this.serializer)}Za(e){return new h4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class tN extends If{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){dn(this.persistence.referenceDelegate instanceof Tf);const a=this.persistence.referenceDelegate.garbageCollector;return new VI(a,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Oi.withCacheSize(this.cacheSizeBytes):Oi.DEFAULT;return new kE(a=>Tf.ri(a,t),this.serializer)}}class D1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>iy(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=$4.bind(null,this.syncEngine),await O4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new k4}()}createDatastore(e){const t=Xf(e.databaseInfo.databaseId),a=function(f){return new p4(f)}(e.databaseInfo);return function(f,y,b,v){return new E4(f,y,b,v)}(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return function(a,c,f,y,b){return new _4(a,c,f,y,b)}(this.localStore,this.datastore,e.asyncQueue,t=>iy(this.syncEngine,t,0),function(){return $x.D()?new $x:new f4}())}createSyncEngine(e,t){return function(c,f,y,b,v,w,S){const R=new F4(c,f,y,b,v,w);return S&&(R.ja=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(c){const f=It(c);et(nl,"RemoteStore shutting down."),f.W_.add(5),await Uu(f),f.z_.shutdown(),f.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}D1.provider={build:()=>new D1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="FirestoreClient";class nN{constructor(e,t,a,c,f){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=c,this.user=ci.UNAUTHENTICATED,this.clientId=Qw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(a,async y=>{et(Co,"Received user=",y.uid),await this.authCredentialListener(y),this.user=y}),this.appCheckCredentials.start(a,y=>(et(Co,"Received new app check token=",y),this.appCheckCredentialListener(y,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Ig(t,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function r1(i,e){i.asyncQueue.verifyOperationInProgress(),et(Co,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(async c=>{a.isEqual(c)||(await PE(e.localStore,c),a=c)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function ay(i,e){i.asyncQueue.verifyOperationInProgress();const t=await rN(i);et(Co,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(a=>ey(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,c)=>ey(e.remoteStore,c)),i._onlineComponents=e}async function rN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){et(Co,"Using user provided OfflineComponentProvider");try{await r1(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(c){return c.name==="FirebaseError"?c.code===Ie.FAILED_PRECONDITION||c.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(t))throw t;rc("Error using user provided cache. Falling back to memory cache: "+t),await r1(i,new If)}}else et(Co,"Using default OfflineComponentProvider"),await r1(i,new tN(void 0));return i._offlineComponents}async function iv(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(et(Co,"Using user provided OnlineComponentProvider"),await ay(i,i._uninitializedComponentsProvider._online)):(et(Co,"Using default OnlineComponentProvider"),await ay(i,new D1))),i._onlineComponents}function iN(i){return iv(i).then(e=>e.syncEngine)}async function sv(i){const e=await iv(i),t=e.eventManager;return t.onListen=z4.bind(null,e.syncEngine),t.onUnlisten=q4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=H4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Y4.bind(null,e.syncEngine),t}function sN(i,e,t={}){const a=new Na;return i.asyncQueue.enqueueAndForget(async()=>function(f,y,b,v,w){const S=new rv({next:k=>{S.su(),y.enqueueAndForget(()=>XE(f,R));const U=k.docs.has(b);!U&&k.fromCache?w.reject(new nt(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&k.fromCache&&v&&v.source==="server"?w.reject(new nt(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(k)},error:k=>w.reject(k)}),R=new QE(dg(b.path),S,{includeMetadataChanges:!0,Ta:!0});return YE(f,R)}(await sv(i),i.asyncQueue,e,t,a)),a.promise}function aN(i,e,t={}){const a=new Na;return i.asyncQueue.enqueueAndForget(async()=>function(f,y,b,v,w){const S=new rv({next:k=>{S.su(),y.enqueueAndForget(()=>XE(f,R)),k.fromCache&&v.source==="server"?w.reject(new nt(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(k)},error:k=>w.reject(k)}),R=new QE(b,S,{includeMetadataChanges:!0,Ta:!0});return YE(f,R)}(await sv(i),i.asyncQueue,e,t,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(i,e,t){if(!t)throw new nt(Ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function oN(i,e,t,a){if(e===!0&&a===!0)throw new nt(Ie.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ly(i){if(!dt.isDocumentKey(i))throw new nt(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function cy(i){if(dt.isDocumentKey(i))throw new nt(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Kf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":vt()}function Es(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new nt(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kf(i);throw new nt(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="firestore.googleapis.com",uy=!0;class hy{constructor(e){var t,a;if(e.host===void 0){if(e.ssl!==void 0)throw new nt(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ov,this.ssl=uy}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:uy;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jI)throw new nt(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=av((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new nt(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new nt(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new nt(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,c){return a.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,t,a,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new nt(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hy(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new m3;switch(a.type){case"firstParty":return new w3(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new nt(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const a=oy.get(t);a&&(et("ComponentProvider","Removing Datastore"),oy.delete(t),a.terminate())}(this),Promise.resolve()}}function lN(i,e,t,a={}){var c;const f=(i=Es(i,Fu))._getSettings(),y=`${e}:${t}`;if(f.host!==ov&&f.host!==y&&rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},f),{host:y,ssl:!1})),a.mockUserToken){let b,v;if(typeof a.mockUserToken=="string")b=a.mockUserToken,v=ci.MOCK_USER;else{b=qA(a.mockUserToken,(c=i._app)===null||c===void 0?void 0:c.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new nt(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ci(w)}i._authCredentials=new p3(new Xw(b,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ll(this.firestore,e,this._query)}}class xi{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xi(this.firestore,e,this._key)}}class yo extends ll{constructor(e,t,a){super(e,t,dg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xi(this.firestore,null,new dt(e))}withConverter(e){return new yo(this.firestore,e,this._path)}}function jr(i,e,...t){if(i=Ur(i),Mg("collection","path",e),i instanceof Fu){const a=On.fromString(e,...t);return cy(a),new yo(i,null,a)}{if(!(i instanceof xi||i instanceof yo))throw new nt(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(On.fromString(e,...t));return cy(a),new yo(i.firestore,null,a)}}function fy(i,e){if(i=Es(i,Fu),Mg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new nt(Ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ll(i,null,function(a){return new pc(On.emptyPath(),a)}(e))}function Mt(i,e,...t){if(i=Ur(i),arguments.length===1&&(e=Qw.newId()),Mg("doc","path",e),i instanceof Fu){const a=On.fromString(e,...t);return ly(a),new xi(i,null,new dt(a))}{if(!(i instanceof xi||i instanceof yo))throw new nt(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(On.fromString(e,...t));return ly(a),new xi(i.firestore,i instanceof yo?i.converter:null,new dt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="AsyncQueue";class gy{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new jE(this,"async_queue_retry"),this.Su=()=>{const a=n1();a&&et(dy,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=e;const t=n1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=n1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Na;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!mc(e))throw e;et(dy,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(a=>{this.gu=a,this.pu=!1;const c=function(y){let b=y.message||"";return y.stack&&(b=y.stack.includes(y.message)?y.stack:y.message+`
`+y.stack),b}(a);throw Ma("INTERNAL UNHANDLED ERROR: ",c),a}).then(a=>(this.pu=!1,a))));return this.bu=t,t}enqueueAfterDelay(e,t,a){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const c=Sg.createAndSchedule(this,e,t,a,f=>this.Fu(f));return this.fu.push(c),c}Du(){this.gu&&vt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class cl extends Fu{constructor(e,t,a,c){super(e,t,a,c),this.type="firestore",this._queue=new gy,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gy(e),this._firestoreClient=void 0,await e}}}function ul(i,e){const t=typeof i=="object"?i:aw(),a=typeof i=="string"?i:wf,c=Q1(t,"firestore").getImmediate({identifier:a});if(!c._initialized){const f=HA("firestore");f&&lN(c,...f)}return c}function Og(i){if(i._terminated)throw new nt(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||cN(i),i._firestoreClient}function cN(i){var e,t,a;const c=i._freezeSettings(),f=function(b,v,w,S){return new O3(b,v,w,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,av(S.experimentalLongPollingOptions),S.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,c);i._componentsProvider||!((t=c.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((a=c.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(i._componentsProvider={_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider}),i._firestoreClient=new nN(i._authCredentials,i._appCheckCredentials,i._queue,f,i._componentsProvider&&function(b){const v=b==null?void 0:b._online.build();return{_offline:b==null?void 0:b._offline.build(v),_online:v}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cc(ei.fromBase64String(e))}catch(t){throw new nt(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cc(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new nt(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nt(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nt(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,c){if(a.length!==c.length)return!1;for(let f=0;f<a.length;++f)if(a[f]!==c[f])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=/^__.*__$/;class hN{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bu(e,this.data,t,this.fieldTransforms)}}class lv{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new No(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class Bg{constructor(e,t,a,c,f,y){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=c,f===void 0&&this.Bu(),this.fieldTransforms=f||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:a,Qu:!1});return c.$u(e),c}Ku(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:a,Qu:!1});return c.Bu(),c}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Nf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(cv(this.Lu)&&uN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class fN{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Xf(e)}ju(e,t,a,c=!1){return new Bg({Lu:e,methodName:t,zu:a,path:Jr.emptyPath(),Qu:!1,Gu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $f(i){const e=i._freezeSettings(),t=Xf(i._databaseId);return new fN(i._databaseId,!!e.ignoreUndefinedProperties,t)}function uv(i,e,t,a,c,f={}){const y=i.ju(f.merge||f.mergeFields?2:0,e,t,c);jg("Data must be an object, but it was:",y,a);const b=hv(a,y);let v,w;if(f.merge)v=new Ji(y.fieldMask),w=y.fieldTransforms;else if(f.mergeFields){const S=[];for(const R of f.mergeFields){const k=M1(e,R,t);if(!y.contains(k))throw new nt(Ie.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);dv(S,k)||S.push(k)}v=new Ji(S),w=y.fieldTransforms.filter(R=>v.covers(R.field))}else v=null,w=y.fieldTransforms;return new hN(new Li(b),v,w)}class Jf extends Lg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jf}}function dN(i,e,t,a){const c=i.ju(1,e,t);jg("Data must be an object, but it was:",c,a);const f=[],y=Li.empty();Io(a,(v,w)=>{const S=Ug(e,v,t);w=Ur(w);const R=c.Ku(S);if(w instanceof Jf)f.push(S);else{const k=zu(w,R);k!=null&&(f.push(S),y.set(S,k))}});const b=new Ji(f);return new lv(y,b,c.fieldTransforms)}function gN(i,e,t,a,c,f){const y=i.ju(1,e,t),b=[M1(e,a,t)],v=[c];if(f.length%2!=0)throw new nt(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<f.length;k+=2)b.push(M1(e,f[k])),v.push(f[k+1]);const w=[],S=Li.empty();for(let k=b.length-1;k>=0;--k)if(!dv(w,b[k])){const U=b[k];let q=v[k];q=Ur(q);const ee=y.Ku(U);if(q instanceof Jf)w.push(U);else{const K=zu(q,ee);K!=null&&(w.push(U),S.set(U,K))}}const R=new Ji(w);return new lv(S,R,y.fieldTransforms)}function mN(i,e,t,a=!1){return zu(t,i.ju(a?4:3,e))}function zu(i,e){if(fv(i=Ur(i)))return jg("Unsupported field value:",e,i),hv(i,e);if(i instanceof Lg)return function(a,c){if(!cv(c.Lu))throw c.Wu(`${a._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Wu(`${a._methodName}() is not currently supported inside arrays`);const f=a._toFieldTransform(c);f&&c.fieldTransforms.push(f)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(a,c){const f=[];let y=0;for(const b of a){let v=zu(b,c.Uu(y));v==null&&(v={nullValue:"NULL_VALUE"}),f.push(v),y++}return{arrayValue:{values:f}}}(i,e)}return function(a,c){if((a=Ur(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return nI(c.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const f=Ir.fromDate(a);return{timestampValue:Cf(c.serializer,f)}}if(a instanceof Ir){const f=new Ir(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Cf(c.serializer,f)}}if(a instanceof kg)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof cc)return{bytesValue:SE(c.serializer,a._byteString)};if(a instanceof xi){const f=c.databaseId,y=a.firestore._databaseId;if(!y.isEqual(f))throw c.Wu(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:yg(a.firestore._databaseId||c.databaseId,a._key.path)}}if(a instanceof Pg)return function(y,b){return{mapValue:{fields:{[nE]:{stringValue:rE},[Ef]:{arrayValue:{values:y.toArray().map(w=>{if(typeof w!="number")throw b.Wu("VectorValues must only contain numeric values.");return gg(b.serializer,w)})}}}}}}(a,c);throw c.Wu(`Unsupported field value: ${Kf(a)}`)}(i,e)}function hv(i,e){const t={};return Kw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(i,(a,c)=>{const f=zu(c,e.qu(a));f!=null&&(t[a]=f)}),{mapValue:{fields:t}}}function fv(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ir||i instanceof kg||i instanceof cc||i instanceof xi||i instanceof Lg||i instanceof Pg)}function jg(i,e,t){if(!fv(t)||!function(c){return typeof c=="object"&&c!==null&&(Object.getPrototypeOf(c)===Object.prototype||Object.getPrototypeOf(c)===null)}(t)){const a=Kf(t);throw a==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+a)}}function M1(i,e,t){if((e=Ur(e))instanceof Zf)return e._internalPath;if(typeof e=="string")return Ug(i,e);throw Nf("Field path arguments must be of type string or ",i,!1,void 0,t)}const pN=new RegExp("[~\\*/\\[\\]]");function Ug(i,e,t){if(e.search(pN)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Zf(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Nf(i,e,t,a,c){const f=a&&!a.isEmpty(),y=c!==void 0;let b=`Function ${e}() called with invalid data`;t&&(b+=" (via `toFirestore()`)"),b+=". ";let v="";return(f||y)&&(v+=" (found",f&&(v+=` in field ${a}`),y&&(v+=` in document ${c}`),v+=")"),new nt(Ie.INVALID_ARGUMENT,b+i+v)}function dv(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t,a,c,f){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new xi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xN extends gv{data(){return super.data()}}function Vg(i,e){return typeof e=="string"?Ug(i,e):e instanceof Zf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new nt(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fg{}class wN extends Fg{}function Iu(i,e,...t){let a=[];e instanceof Fg&&a.push(e),a=a.concat(t),function(f){const y=f.filter(v=>v instanceof zg).length,b=f.filter(v=>v instanceof ed).length;if(y>1||y>0&&b>0)throw new nt(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const c of a)i=c._apply(i);return i}class ed extends wN{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new ed(e,t,a)}_apply(e){const t=this._parse(e);return mv(e._query,t),new ll(e.firestore,e.converter,v1(e._query,t))}_parse(e){const t=$f(e.firestore);return function(f,y,b,v,w,S,R){let k;if(w.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new nt(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){py(R,S);const q=[];for(const ee of R)q.push(my(v,f,ee));k={arrayValue:{values:q}}}else k=my(v,f,R)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||py(R,S),k=mN(b,y,R,S==="in"||S==="not-in");return _r.create(w,S,k)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Nu(i,e,t){const a=e,c=Vg("where",i);return ed._create(c,a,t)}class zg extends Fg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zg(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return t.length===1?t[0]:Ms.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(c,f){let y=c;const b=f.getFlattenedFilters();for(const v of b)mv(y,v),y=v1(y,v)}(e._query,t),new ll(e.firestore,e.converter,v1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function my(i,e,t){if(typeof(t=Ur(t))=="string"){if(t==="")throw new nt(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hE(e)&&t.indexOf("/")!==-1)throw new nt(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(On.fromString(t));if(!dt.isDocumentKey(a))throw new nt(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Rx(i,new dt(a))}if(t instanceof xi)return Rx(i,t._key);throw new nt(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kf(t)}.`)}function py(i,e){if(!Array.isArray(i)||i.length===0)throw new nt(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mv(i,e){const t=function(c,f){for(const y of c)for(const b of y.getFlattenedFilters())if(f.indexOf(b.op)>=0)return b.op;return null}(i.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new nt(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new nt(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class EN{convertValue(e,t="none"){switch(bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw vt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Io(e,(c,f)=>{a[c]=this.convertValue(f,t)}),a}convertVectorValue(e){var t,a,c;const f=(c=(a=(t=e.fields)===null||t===void 0?void 0:t[Ef].arrayValue)===null||a===void 0?void 0:a.values)===null||c===void 0?void 0:c.map(y=>gr(y.doubleValue));return new Pg(f)}convertGeoPoint(e){return new kg(gr(e.latitude),gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Ff(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){const t=vo(e);return new Ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=On.fromString(e);dn(OE(a));const c=new Au(a.get(1),a.get(3)),f=new dt(a.popFirst(5));return c.isEqual(t)||Ma(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xv extends gv{constructor(e,t,a,c,f,y){super(e,t,a,c,y),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Vg("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class of extends xv{data(e={}){return super.data(e)}}class vN{constructor(e,t,a,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new fu(c.hasPendingWrites,c.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new of(this._firestore,this._userDataWriter,a.key,a,new fu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nt(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(c,f){if(c._snapshot.oldDocs.isEmpty()){let y=0;return c._snapshot.docChanges.map(b=>{const v=new of(c._firestore,c._userDataWriter,b.doc.key,b.doc,new fu(c._snapshot.mutatedKeys.has(b.doc.key),c._snapshot.fromCache),c.query.converter);return b.doc,{type:"added",doc:v,oldIndex:-1,newIndex:y++}})}{let y=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(b=>f||b.type!==3).map(b=>{const v=new of(c._firestore,c._userDataWriter,b.doc.key,b.doc,new fu(c._snapshot.mutatedKeys.has(b.doc.key),c._snapshot.fromCache),c.query.converter);let w=-1,S=-1;return b.type!==0&&(w=y.indexOf(b.doc.key),y=y.delete(b.doc.key)),b.type!==1&&(y=y.add(b.doc),S=y.indexOf(b.doc.key)),{type:_N(b.type),doc:v,oldIndex:w,newIndex:S}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _N(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(i){i=Es(i,xi);const e=Es(i.firestore,cl);return sN(Og(e),i._key).then(t=>AN(e,i,t))}class yv extends EN{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,t)}}function Sr(i){i=Es(i,ll);const e=Es(i.firestore,cl),t=Og(e),a=new yv(e);return yN(i._query),aN(t,i._query).then(c=>new vN(e,a,i,c))}function ki(i,e,t){i=Es(i,xi);const a=Es(i.firestore,cl),c=pv(i.converter,e,t);return td(a,[uv($f(a),"setDoc",i._key,c,i.converter!==null,t).toMutation(i._key,ws.none())])}function Jl(i,e,t,...a){i=Es(i,xi);const c=Es(i.firestore,cl),f=$f(c);let y;return y=typeof(e=Ur(e))=="string"||e instanceof Zf?gN(f,"updateDoc",i._key,e,t,a):dN(f,"updateDoc",i._key,e),td(c,[y.toMutation(i._key,ws.exists(!0))])}function du(i){return td(Es(i.firestore,cl),[new mg(i._key,ws.none())])}function bN(i,e){const t=Es(i.firestore,cl),a=Mt(i),c=pv(i.converter,e);return td(t,[uv($f(i.firestore),"addDoc",a._key,c,i.converter!==null,{}).toMutation(a._key,ws.exists(!1))]).then(()=>a)}function td(i,e){return function(a,c){const f=new Na;return a.asyncQueue.enqueueAndForget(async()=>X4(await iN(a),c,f)),f.promise}(Og(i),e)}function AN(i,e,t){const a=t.docs.get(e._key),c=new yv(i);return new xv(i,c,e._key,a,new fu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(c){dc=c})(fc),ec(new Jo("firestore",(a,{instanceIdentifier:c,options:f})=>{const y=a.getProvider("app").getImmediate(),b=new cl(new x3(a.getProvider("auth-internal")),new E3(y,a.getProvider("app-check-internal")),function(w,S){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new nt(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(w.options.projectId,S)}(y,c),y);return f=Object.assign({useFetchStreams:t},f),b._setSettings(f),b},"PUBLIC").setMultipleInstances(!0)),po(wx,Ex,e),po(wx,Ex,"esm2017")})();var CN="firebase",TN="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */po(CN,TN,"app");const SN={apiKey:"AIzaSyC1K4kZk4TwvPBhndVCffuw5P4MqAC_AFM",authDomain:"web2024-9dc04.firebaseapp.com",projectId:"web2024-9dc04",storageBucket:"web2024-9dc04.firebasestorage.app",messagingSenderId:"533756221690",appId:"1:533756221690:web:7553ac87b46090dab99143",measurementId:"G-1EEGB1LPBS"},vs=sw(SN);So(vs);function IN(){const[i,e]=$.useState(""),t=ea(),a=So(vs),c=new ba,f=ul(vs),y=async()=>{var b,v;try{const S=(await bS(a,c)).user,R=Mt(f,"users",S.uid);(await Br(R)).exists()||await ki(R,{name:S.displayName,email:S.email,photo:S.photoURL,classroom:{cid:"",status:2}});const q=(v=(b=(await Br(R)).data())==null?void 0:b.classroom)==null?void 0:v.status;console.log("User status:",q),t(q===1?"/dashboard":q===2?"/student-dashboard":"/dashboard")}catch(w){console.error(w),e("ไม่สามารถเข้าสู่ระบบด้วย Google ได้: "+w.message)}};return A.jsxs("div",{className:"min-h-screen flex",children:[A.jsx("div",{className:"w-1/2 bg-gradient-to-br from-blue-200 to-blue-500 flex items-center justify-center p-6",children:A.jsxs("div",{className:"text-center",children:[A.jsx("h1",{className:"text-5xl font-ChakraPetchTH text-white mb-4",children:"ยินดีต้อนรับสู่"}),A.jsx("h2",{className:"text-4xl font-ChakraPetchTH text-white mb-2",children:"ระบบจัดการห้องเรียน"}),A.jsx("h3",{className:"text-3xl font-InterEN text-white",children:"Classroom Management System"})]})}),A.jsx("div",{className:"w-1/2 bg-white flex items-center justify-center p-6",children:A.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-md",children:[A.jsx("h2",{className:"text-3xl font-ChakraPetchTH text-gray-800 mb-8",children:"เข้าสู่ระบบ"}),i&&A.jsx("div",{className:"bg-red-100 border border-red-400 text-red-800 px-4 py-3 rounded mb-6 w-full",children:i}),A.jsxs("button",{onClick:y,className:"w-80 h-16 flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-700 text-xl font-ChakraPetchTH rounded-xl transition duration-300 shadow-lg border-2 border-gray-200 hover:border-blue-500 group mx-auto",children:[A.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-7 h-7"}),A.jsx("span",{className:"group-hover:text-blue-600",children:"เข้าสู่ระบบด้วย Google"})]}),A.jsx("h3",{className:"p-6 text-red-500 font-ChakraPetchTH",children:"ลงทะเบียนครั้งแรกสำหรับอาจารย์ โปรดติดต่อแอดมิน"})]})})]})}const Zr=[];for(let i=0;i<256;++i)Zr.push((i+256).toString(16).slice(1));function NN(i,e=0){return(Zr[i[e+0]]+Zr[i[e+1]]+Zr[i[e+2]]+Zr[i[e+3]]+"-"+Zr[i[e+4]]+Zr[i[e+5]]+"-"+Zr[i[e+6]]+Zr[i[e+7]]+"-"+Zr[i[e+8]]+Zr[i[e+9]]+"-"+Zr[i[e+10]]+Zr[i[e+11]]+Zr[i[e+12]]+Zr[i[e+13]]+Zr[i[e+14]]+Zr[i[e+15]]).toLowerCase()}let i1;const RN=new Uint8Array(16);function DN(){if(!i1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i1=crypto.getRandomValues.bind(crypto)}return i1(RN)}const MN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xy={randomUUID:MN};function wv(i,e,t){var c;if(xy.randomUUID&&!i)return xy.randomUUID();i=i||{};const a=i.random??((c=i.rng)==null?void 0:c.call(i))??DN();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,NN(a)}var ON=Object.defineProperty,Rf=Object.getOwnPropertySymbols,Ev=Object.prototype.hasOwnProperty,vv=Object.prototype.propertyIsEnumerable,yy=(i,e,t)=>e in i?ON(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,O1=(i,e)=>{for(var t in e||(e={}))Ev.call(e,t)&&yy(i,t,e[t]);if(Rf)for(var t of Rf(e))vv.call(e,t)&&yy(i,t,e[t]);return i},L1=(i,e)=>{var t={};for(var a in i)Ev.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(i!=null&&Rf)for(var a of Rf(i))e.indexOf(a)<0&&vv.call(i,a)&&(t[a]=i[a]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var rl;(i=>{const e=class Ht{constructor(v,w,S,R){if(this.version=v,this.errorCorrectionLevel=w,this.modules=[],this.isFunction=[],v<Ht.MIN_VERSION||v>Ht.MAX_VERSION)throw new RangeError("Version value out of range");if(R<-1||R>7)throw new RangeError("Mask value out of range");this.size=v*4+17;let k=[];for(let q=0;q<this.size;q++)k.push(!1);for(let q=0;q<this.size;q++)this.modules.push(k.slice()),this.isFunction.push(k.slice());this.drawFunctionPatterns();const U=this.addEccAndInterleave(S);if(this.drawCodewords(U),R==-1){let q=1e9;for(let ee=0;ee<8;ee++){this.applyMask(ee),this.drawFormatBits(ee);const K=this.getPenaltyScore();K<q&&(R=ee,q=K),this.applyMask(ee)}}c(0<=R&&R<=7),this.mask=R,this.applyMask(R),this.drawFormatBits(R),this.isFunction=[]}static encodeText(v,w){const S=i.QrSegment.makeSegments(v);return Ht.encodeSegments(S,w)}static encodeBinary(v,w){const S=i.QrSegment.makeBytes(v);return Ht.encodeSegments([S],w)}static encodeSegments(v,w,S=1,R=40,k=-1,U=!0){if(!(Ht.MIN_VERSION<=S&&S<=R&&R<=Ht.MAX_VERSION)||k<-1||k>7)throw new RangeError("Invalid value");let q,ee;for(q=S;;q++){const ie=Ht.getNumDataCodewords(q,w)*8,ve=y.getTotalBits(v,q);if(ve<=ie){ee=ve;break}if(q>=R)throw new RangeError("Data too long")}for(const ie of[Ht.Ecc.MEDIUM,Ht.Ecc.QUARTILE,Ht.Ecc.HIGH])U&&ee<=Ht.getNumDataCodewords(q,ie)*8&&(w=ie);let K=[];for(const ie of v){t(ie.mode.modeBits,4,K),t(ie.numChars,ie.mode.numCharCountBits(q),K);for(const ve of ie.getData())K.push(ve)}c(K.length==ee);const de=Ht.getNumDataCodewords(q,w)*8;c(K.length<=de),t(0,Math.min(4,de-K.length),K),t(0,(8-K.length%8)%8,K),c(K.length%8==0);for(let ie=236;K.length<de;ie^=253)t(ie,8,K);let fe=[];for(;fe.length*8<K.length;)fe.push(0);return K.forEach((ie,ve)=>fe[ve>>>3]|=ie<<7-(ve&7)),new Ht(q,w,fe,k)}getModule(v,w){return 0<=v&&v<this.size&&0<=w&&w<this.size&&this.modules[w][v]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const v=this.getAlignmentPatternPositions(),w=v.length;for(let S=0;S<w;S++)for(let R=0;R<w;R++)S==0&&R==0||S==0&&R==w-1||S==w-1&&R==0||this.drawAlignmentPattern(v[S],v[R]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(v){const w=this.errorCorrectionLevel.formatBits<<3|v;let S=w;for(let k=0;k<10;k++)S=S<<1^(S>>>9)*1335;const R=(w<<10|S)^21522;c(R>>>15==0);for(let k=0;k<=5;k++)this.setFunctionModule(8,k,a(R,k));this.setFunctionModule(8,7,a(R,6)),this.setFunctionModule(8,8,a(R,7)),this.setFunctionModule(7,8,a(R,8));for(let k=9;k<15;k++)this.setFunctionModule(14-k,8,a(R,k));for(let k=0;k<8;k++)this.setFunctionModule(this.size-1-k,8,a(R,k));for(let k=8;k<15;k++)this.setFunctionModule(8,this.size-15+k,a(R,k));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let v=this.version;for(let S=0;S<12;S++)v=v<<1^(v>>>11)*7973;const w=this.version<<12|v;c(w>>>18==0);for(let S=0;S<18;S++){const R=a(w,S),k=this.size-11+S%3,U=Math.floor(S/3);this.setFunctionModule(k,U,R),this.setFunctionModule(U,k,R)}}drawFinderPattern(v,w){for(let S=-4;S<=4;S++)for(let R=-4;R<=4;R++){const k=Math.max(Math.abs(R),Math.abs(S)),U=v+R,q=w+S;0<=U&&U<this.size&&0<=q&&q<this.size&&this.setFunctionModule(U,q,k!=2&&k!=4)}}drawAlignmentPattern(v,w){for(let S=-2;S<=2;S++)for(let R=-2;R<=2;R++)this.setFunctionModule(v+R,w+S,Math.max(Math.abs(R),Math.abs(S))!=1)}setFunctionModule(v,w,S){this.modules[w][v]=S,this.isFunction[w][v]=!0}addEccAndInterleave(v){const w=this.version,S=this.errorCorrectionLevel;if(v.length!=Ht.getNumDataCodewords(w,S))throw new RangeError("Invalid argument");const R=Ht.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][w],k=Ht.ECC_CODEWORDS_PER_BLOCK[S.ordinal][w],U=Math.floor(Ht.getNumRawDataModules(w)/8),q=R-U%R,ee=Math.floor(U/R);let K=[];const de=Ht.reedSolomonComputeDivisor(k);for(let ie=0,ve=0;ie<R;ie++){let je=v.slice(ve,ve+ee-k+(ie<q?0:1));ve+=je.length;const Pe=Ht.reedSolomonComputeRemainder(je,de);ie<q&&je.push(0),K.push(je.concat(Pe))}let fe=[];for(let ie=0;ie<K[0].length;ie++)K.forEach((ve,je)=>{(ie!=ee-k||je>=q)&&fe.push(ve[ie])});return c(fe.length==U),fe}drawCodewords(v){if(v.length!=Math.floor(Ht.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let w=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let R=0;R<this.size;R++)for(let k=0;k<2;k++){const U=S-k,ee=(S+1&2)==0?this.size-1-R:R;!this.isFunction[ee][U]&&w<v.length*8&&(this.modules[ee][U]=a(v[w>>>3],7-(w&7)),w++)}}c(w==v.length*8)}applyMask(v){if(v<0||v>7)throw new RangeError("Mask value out of range");for(let w=0;w<this.size;w++)for(let S=0;S<this.size;S++){let R;switch(v){case 0:R=(S+w)%2==0;break;case 1:R=w%2==0;break;case 2:R=S%3==0;break;case 3:R=(S+w)%3==0;break;case 4:R=(Math.floor(S/3)+Math.floor(w/2))%2==0;break;case 5:R=S*w%2+S*w%3==0;break;case 6:R=(S*w%2+S*w%3)%2==0;break;case 7:R=((S+w)%2+S*w%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[w][S]&&R&&(this.modules[w][S]=!this.modules[w][S])}}getPenaltyScore(){let v=0;for(let k=0;k<this.size;k++){let U=!1,q=0,ee=[0,0,0,0,0,0,0];for(let K=0;K<this.size;K++)this.modules[k][K]==U?(q++,q==5?v+=Ht.PENALTY_N1:q>5&&v++):(this.finderPenaltyAddHistory(q,ee),U||(v+=this.finderPenaltyCountPatterns(ee)*Ht.PENALTY_N3),U=this.modules[k][K],q=1);v+=this.finderPenaltyTerminateAndCount(U,q,ee)*Ht.PENALTY_N3}for(let k=0;k<this.size;k++){let U=!1,q=0,ee=[0,0,0,0,0,0,0];for(let K=0;K<this.size;K++)this.modules[K][k]==U?(q++,q==5?v+=Ht.PENALTY_N1:q>5&&v++):(this.finderPenaltyAddHistory(q,ee),U||(v+=this.finderPenaltyCountPatterns(ee)*Ht.PENALTY_N3),U=this.modules[K][k],q=1);v+=this.finderPenaltyTerminateAndCount(U,q,ee)*Ht.PENALTY_N3}for(let k=0;k<this.size-1;k++)for(let U=0;U<this.size-1;U++){const q=this.modules[k][U];q==this.modules[k][U+1]&&q==this.modules[k+1][U]&&q==this.modules[k+1][U+1]&&(v+=Ht.PENALTY_N2)}let w=0;for(const k of this.modules)w=k.reduce((U,q)=>U+(q?1:0),w);const S=this.size*this.size,R=Math.ceil(Math.abs(w*20-S*10)/S)-1;return c(0<=R&&R<=9),v+=R*Ht.PENALTY_N4,c(0<=v&&v<=2568888),v}getAlignmentPatternPositions(){if(this.version==1)return[];{const v=Math.floor(this.version/7)+2,w=this.version==32?26:Math.ceil((this.version*4+4)/(v*2-2))*2;let S=[6];for(let R=this.size-7;S.length<v;R-=w)S.splice(1,0,R);return S}}static getNumRawDataModules(v){if(v<Ht.MIN_VERSION||v>Ht.MAX_VERSION)throw new RangeError("Version number out of range");let w=(16*v+128)*v+64;if(v>=2){const S=Math.floor(v/7)+2;w-=(25*S-10)*S-55,v>=7&&(w-=36)}return c(208<=w&&w<=29648),w}static getNumDataCodewords(v,w){return Math.floor(Ht.getNumRawDataModules(v)/8)-Ht.ECC_CODEWORDS_PER_BLOCK[w.ordinal][v]*Ht.NUM_ERROR_CORRECTION_BLOCKS[w.ordinal][v]}static reedSolomonComputeDivisor(v){if(v<1||v>255)throw new RangeError("Degree out of range");let w=[];for(let R=0;R<v-1;R++)w.push(0);w.push(1);let S=1;for(let R=0;R<v;R++){for(let k=0;k<w.length;k++)w[k]=Ht.reedSolomonMultiply(w[k],S),k+1<w.length&&(w[k]^=w[k+1]);S=Ht.reedSolomonMultiply(S,2)}return w}static reedSolomonComputeRemainder(v,w){let S=w.map(R=>0);for(const R of v){const k=R^S.shift();S.push(0),w.forEach((U,q)=>S[q]^=Ht.reedSolomonMultiply(U,k))}return S}static reedSolomonMultiply(v,w){if(v>>>8||w>>>8)throw new RangeError("Byte out of range");let S=0;for(let R=7;R>=0;R--)S=S<<1^(S>>>7)*285,S^=(w>>>R&1)*v;return c(S>>>8==0),S}finderPenaltyCountPatterns(v){const w=v[1];c(w<=this.size*3);const S=w>0&&v[2]==w&&v[3]==w*3&&v[4]==w&&v[5]==w;return(S&&v[0]>=w*4&&v[6]>=w?1:0)+(S&&v[6]>=w*4&&v[0]>=w?1:0)}finderPenaltyTerminateAndCount(v,w,S){return v&&(this.finderPenaltyAddHistory(w,S),w=0),w+=this.size,this.finderPenaltyAddHistory(w,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(v,w){w[0]==0&&(v+=this.size),w.pop(),w.unshift(v)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function t(b,v,w){if(v<0||v>31||b>>>v)throw new RangeError("Value out of range");for(let S=v-1;S>=0;S--)w.push(b>>>S&1)}function a(b,v){return(b>>>v&1)!=0}function c(b){if(!b)throw new Error("Assertion error")}const f=class ar{constructor(v,w,S){if(this.mode=v,this.numChars=w,this.bitData=S,w<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(v){let w=[];for(const S of v)t(S,8,w);return new ar(ar.Mode.BYTE,v.length,w)}static makeNumeric(v){if(!ar.isNumeric(v))throw new RangeError("String contains non-numeric characters");let w=[];for(let S=0;S<v.length;){const R=Math.min(v.length-S,3);t(parseInt(v.substring(S,S+R),10),R*3+1,w),S+=R}return new ar(ar.Mode.NUMERIC,v.length,w)}static makeAlphanumeric(v){if(!ar.isAlphanumeric(v))throw new RangeError("String contains unencodable characters in alphanumeric mode");let w=[],S;for(S=0;S+2<=v.length;S+=2){let R=ar.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S))*45;R+=ar.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S+1)),t(R,11,w)}return S<v.length&&t(ar.ALPHANUMERIC_CHARSET.indexOf(v.charAt(S)),6,w),new ar(ar.Mode.ALPHANUMERIC,v.length,w)}static makeSegments(v){return v==""?[]:ar.isNumeric(v)?[ar.makeNumeric(v)]:ar.isAlphanumeric(v)?[ar.makeAlphanumeric(v)]:[ar.makeBytes(ar.toUtf8ByteArray(v))]}static makeEci(v){let w=[];if(v<0)throw new RangeError("ECI assignment value out of range");if(v<128)t(v,8,w);else if(v<16384)t(2,2,w),t(v,14,w);else if(v<1e6)t(6,3,w),t(v,21,w);else throw new RangeError("ECI assignment value out of range");return new ar(ar.Mode.ECI,0,w)}static isNumeric(v){return ar.NUMERIC_REGEX.test(v)}static isAlphanumeric(v){return ar.ALPHANUMERIC_REGEX.test(v)}getData(){return this.bitData.slice()}static getTotalBits(v,w){let S=0;for(const R of v){const k=R.mode.numCharCountBits(w);if(R.numChars>=1<<k)return 1/0;S+=4+k+R.bitData.length}return S}static toUtf8ByteArray(v){v=encodeURI(v);let w=[];for(let S=0;S<v.length;S++)v.charAt(S)!="%"?w.push(v.charCodeAt(S)):(w.push(parseInt(v.substring(S+1,S+3),16)),S+=2);return w}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=f;i.QrSegment=f})(rl||(rl={}));(i=>{(e=>{const t=class{constructor(c,f){this.ordinal=c,this.formatBits=f}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(i.QrCode||(i.QrCode={}))})(rl||(rl={}));(i=>{(e=>{const t=class{constructor(c,f){this.modeBits=c,this.numBitsCharCount=f}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(i.QrSegment||(i.QrSegment={}))})(rl||(rl={}));var Xl=rl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var LN={L:Xl.QrCode.Ecc.LOW,M:Xl.QrCode.Ecc.MEDIUM,Q:Xl.QrCode.Ecc.QUARTILE,H:Xl.QrCode.Ecc.HIGH},_v=128,bv="L",Av="#FFFFFF",Cv="#000000",Tv=!1,Sv=1,kN=4,PN=0,BN=.1;function Iv(i,e=0){const t=[];return i.forEach(function(a,c){let f=null;a.forEach(function(y,b){if(!y&&f!==null){t.push(`M${f+e} ${c+e}h${b-f}v1H${f+e}z`),f=null;return}if(b===a.length-1){if(!y)return;f===null?t.push(`M${b+e},${c+e} h1v1H${b+e}z`):t.push(`M${f+e},${c+e} h${b+1-f}v1H${f+e}z`);return}y&&f===null&&(f=b)})}),t.join("")}function Nv(i,e){return i.slice().map((t,a)=>a<e.y||a>=e.y+e.h?t:t.map((c,f)=>f<e.x||f>=e.x+e.w?c:!1))}function jN(i,e,t,a){if(a==null)return null;const c=i.length+t*2,f=Math.floor(e*BN),y=c/e,b=(a.width||f)*y,v=(a.height||f)*y,w=a.x==null?i.length/2-b/2:a.x*y,S=a.y==null?i.length/2-v/2:a.y*y,R=a.opacity==null?1:a.opacity;let k=null;if(a.excavate){let q=Math.floor(w),ee=Math.floor(S),K=Math.ceil(b+w-q),de=Math.ceil(v+S-ee);k={x:q,y:ee,w:K,h:de}}const U=a.crossOrigin;return{x:w,y:S,h:v,w:b,excavation:k,opacity:R,crossOrigin:U}}function UN(i,e){return e!=null?Math.max(Math.floor(e),0):i?kN:PN}function Rv({value:i,level:e,minVersion:t,includeMargin:a,marginSize:c,imageSettings:f,size:y,boostLevel:b}){let v=vr.useMemo(()=>{const q=(Array.isArray(i)?i:[i]).reduce((ee,K)=>(ee.push(...Xl.QrSegment.makeSegments(K)),ee),[]);return Xl.QrCode.encodeSegments(q,LN[e],t,void 0,void 0,b)},[i,e,t,b]);const{cells:w,margin:S,numCells:R,calculatedImageSettings:k}=vr.useMemo(()=>{let U=v.getModules();const q=UN(a,c),ee=U.length+q*2,K=jN(U,y,q,f);return{cells:U,margin:q,numCells:ee,calculatedImageSettings:K}},[v,y,f,a,c]);return{qrcode:v,margin:S,cells:w,numCells:R,calculatedImageSettings:k}}var VN=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),FN=vr.forwardRef(function(e,t){const a=e,{value:c,size:f=_v,level:y=bv,bgColor:b=Av,fgColor:v=Cv,includeMargin:w=Tv,minVersion:S=Sv,boostLevel:R,marginSize:k,imageSettings:U}=a,ee=L1(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:K}=ee,de=L1(ee,["style"]),fe=U==null?void 0:U.src,ie=vr.useRef(null),ve=vr.useRef(null),je=vr.useCallback(Ve=>{ie.current=Ve,typeof t=="function"?t(Ve):t&&(t.current=Ve)},[t]),[Pe,H]=vr.useState(!1),{margin:F,cells:P,numCells:z,calculatedImageSettings:Q}=Rv({value:c,level:y,minVersion:S,boostLevel:R,includeMargin:w,marginSize:k,imageSettings:U,size:f});vr.useEffect(()=>{if(ie.current!=null){const Ve=ie.current,ae=Ve.getContext("2d");if(!ae)return;let Se=P;const Ae=ve.current,Xe=Q!=null&&Ae!==null&&Ae.complete&&Ae.naturalHeight!==0&&Ae.naturalWidth!==0;Xe&&Q.excavation!=null&&(Se=Nv(P,Q.excavation));const it=window.devicePixelRatio||1;Ve.height=Ve.width=f*it;const te=f/z*it;ae.scale(te,te),ae.fillStyle=b,ae.fillRect(0,0,z,z),ae.fillStyle=v,VN?ae.fill(new Path2D(Iv(Se,F))):P.forEach(function(Re,Be){Re.forEach(function(Ge,qe){Ge&&ae.fillRect(qe+F,Be+F,1,1)})}),Q&&(ae.globalAlpha=Q.opacity),Xe&&ae.drawImage(Ae,Q.x+F,Q.y+F,Q.w,Q.h)}}),vr.useEffect(()=>{H(!1)},[fe]);const J=O1({height:f,width:f},K);let X=null;return fe!=null&&(X=vr.createElement("img",{src:fe,key:fe,style:{display:"none"},onLoad:()=>{H(!0)},ref:ve,crossOrigin:Q==null?void 0:Q.crossOrigin})),vr.createElement(vr.Fragment,null,vr.createElement("canvas",O1({style:J,height:f,width:f,ref:je,role:"img"},de)),X)});FN.displayName="QRCodeCanvas";var lf=vr.forwardRef(function(e,t){const a=e,{value:c,size:f=_v,level:y=bv,bgColor:b=Av,fgColor:v=Cv,includeMargin:w=Tv,minVersion:S=Sv,boostLevel:R,title:k,marginSize:U,imageSettings:q}=a,ee=L1(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:K,cells:de,numCells:fe,calculatedImageSettings:ie}=Rv({value:c,level:y,minVersion:S,boostLevel:R,includeMargin:w,marginSize:U,imageSettings:q,size:f});let ve=de,je=null;q!=null&&ie!=null&&(ie.excavation!=null&&(ve=Nv(de,ie.excavation)),je=vr.createElement("image",{href:q.src,height:ie.h,width:ie.w,x:ie.x+K,y:ie.y+K,preserveAspectRatio:"none",opacity:ie.opacity,crossOrigin:ie.crossOrigin}));const Pe=Iv(ve,K);return vr.createElement("svg",O1({height:f,width:f,viewBox:`0 0 ${fe} ${fe}`,ref:t,role:"img"},ee),!!k&&vr.createElement("title",null,k),vr.createElement("path",{fill:b,d:`M0,0 h${fe}v${fe}H0z`,shapeRendering:"crispEdges"}),vr.createElement("path",{fill:v,d:Pe,shapeRendering:"crispEdges"}),je)});lf.displayName="QRCodeSVG";function zN(){var vn;const i=ea(),e=So(),t=ul(vs),a=e.currentUser,[c,f]=$.useState(null),[y,b]=$.useState([]),[v,w]=$.useState(!1),[S,R]=$.useState(null),[k,U]=$.useState(!1),[q,ee]=$.useState(""),[K,de]=$.useState(""),[fe,ie]=$.useState(""),[ve,je]=$.useState(""),[Pe,H]=$.useState(!1),[F,P]=$.useState(!1),[z,Q]=$.useState(null),[J,X]=$.useState(""),[Ve,ae]=$.useState(""),[Se,Ae]=$.useState(""),[Xe,it]=$.useState(""),[te,Re]=$.useState(""),[Be,Ge]=$.useState([]),[qe,mt]=$.useState([]),[Me,rn]=$.useState(""),[at,Gt]=$.useState(!1),[Rt,kt]=$.useState(!1),[$n,pt]=$.useState(!1),[ze,$e]=$.useState([]),[ht,Ce]=$.useState(""),[De,Ye]=$.useState(""),[Je,He]=$.useState(null),[Jn,Ln]=$.useState(!1),[ot,qn]=$.useState(null),[Pt,sn]=$.useState(!1),[gn,Yn]=$.useState(null),[Pi,Bi]=$.useState(!1),[ji,hn]=$.useState(1),[ke,Cn]=$.useState(""),[Nt,Ot]=$.useState("all"),[lr,yi]=$.useState([]),[Vr,Tt]=$.useState(""),[Xn,ti]=$.useState("asc");$.useEffect(()=>{if(a){const Z=Mt(t,"users",a.uid);Br(Z).then(Ee=>{Ee.exists()&&f(Ee.data())}).catch(Ee=>{console.error("Error fetching user profile:",Ee)})}},[a,t]),$.useEffect(()=>{if(a){const Z=Iu(jr(t,"classroom"),Nu("owner","==",a.uid));Sr(Z).then(Ee=>{const We=[];Ee.forEach(_t=>{We.push({id:_t.id,..._t.data()})}),b(We)}).catch(Ee=>{console.error("Error fetching classrooms:",Ee)})}},[a,t]),$.useEffect(()=>{z&&(async()=>{try{const Ee=jr(t,"classroom",z.id,"students"),We=await Sr(Ee),_t=[];We.forEach(me=>{_t.push({id:me.id,checked:!1,...me.data()})}),Ge(_t)}catch(Ee){console.error("Error fetching students for inline edit:",Ee)}})()},[z,t]),$.useEffect(()=>{(async()=>{try{const Ee=jr(t,"users"),We=Iu(Ee,Nu("classroom.status","==",2)),_t=await Sr(We),me=[];_t.forEach(Et=>{me.push({id:Et.id,...Et.data()})}),mt(me)}catch(Ee){console.error("Error fetching available users:",Ee)}})()},[t]),$.useEffect(()=>{z&&(async()=>{try{const Ee=jr(t,"classroom",z.id,"checkin"),We=await Sr(Ee),_t=[];We.forEach(me=>{_t.push({id:me.id,...me.data()})}),$e(_t)}catch(Ee){console.error("Error fetching check-in records:",Ee)}})()},[z,t]),$.useEffect(()=>{(async()=>{if(!(!z||!Je))try{const Ee=jr(t,"classroom",z.id,"checkin",Je.id,"students"),_t=(await Sr(Ee)).docs.map(Et=>Et.id),me=Be.map(Et=>_t.includes(Et.id)?{...Et,checked:!0}:{...Et,checked:!1});Ge(me)}catch(Ee){console.error("Error loading checked status:",Ee)}})()},[z,Je,t,Be]);const Fr=async()=>{if(Me){if(Be.some(Z=>Z.id===Me)){alert("This student is already added.");return}try{const Z=qe.find(We=>We.id===Me);if(!Z)return;const Ee=Mt(t,"classroom",z.id,"students",Z.id);await ki(Ee,{stdid:Z.id,name:Z.name,status:1}),Ge([...Be,{id:Z.id,stdid:Z.id,name:Z.name,status:1}]),alert("Student added successfully."),rn("")}catch(Z){console.error("Error adding student inline:",Z),alert("Failed to add student.")}}},er=async()=>{try{await Nw(e),i("/")}catch(Z){console.error("Error signing out:",Z)}},ts=Z=>{R(Ee=>Ee===Z?null:Z)},Vn=async Z=>{if(window.confirm("Are you sure you want to delete this classroom?"))try{await du(Mt(t,"classroom",Z)),b(Ee=>Ee.filter(We=>We.id!==Z))}catch(Ee){console.error("Error deleting classroom:",Ee)}},zr=async Z=>{Z.preventDefault(),H(!0);try{const Ee=wv(),We=Mt(t,"classroom",Ee);await ki(We,{owner:a.uid,info:{code:q,name:K,photo:ve||"",room:fe}}),b(_t=>[..._t,{id:Ee,owner:a.uid,info:{code:q,name:K,photo:ve,room:fe}}]),ee(""),de(""),ie(""),je(""),U(!1),F&&P(!1),alert("Classroom created successfully!")}catch(Ee){console.error("Error creating classroom:",Ee),alert("Error creating classroom.")}H(!1)},Ui=Z=>{P(!0),Q(Z),X(Z.info.code),ae(Z.info.name),Ae(Z.info.photo),it(Z.info.room),Re(""),R(null),Gt(!1),Ge([]),rn("")},en=async Z=>{Z.preventDefault(),H(!0),Re("");try{const Ee=Mt(t,"classroom",z.id);await Jl(Ee,{"info.code":J,"info.name":Ve,"info.photo":Se,"info.room":Xe}),b(We=>We.map(_t=>_t.id===z.id?{..._t,info:{code:J,name:Ve,photo:Se,room:Xe}}:_t)),Re("Classroom updated successfully.")}catch(Ee){console.error("Error updating classroom:",Ee),Re("Failed to update classroom.")}H(!1)},Pa=async()=>{if(!ht||!De){alert("Please provide check-in code and date/time.");return}try{const Ee={id:(await bN(jr(t,"classroom",z.id,"checkin"),{code:ht,date:De,status:ji})).id,code:ht,date:De,status:ji};He(Ee),$e(We=>[...We,Ee]),Ce(""),Ye(""),Bi(!0)}catch(Z){console.error("Error creating check-in record:",Z),alert("Failed to create check-in record.")}},Rr=async Z=>{try{const Ee=Be.find(_t=>_t.id===Z);if(!Ee)return;const We=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await ki(Mt(t,"classroom",z.id,"checkin",Je.id,"students",Z),{stdid:Ee.stdid,name:Ee.name,remark:"",date:We}),await ki(Mt(t,"classroom",z.id,"checkin",Je.id,"scores",Ee.stdid),{uid:Z,stdid:Ee.stdid,name:Ee.name,remark:"",dates:We,score:1,status:1}),Ge(_t=>_t.map(me=>me.id===Z?{...me,checked:!0}:me))}catch(Ee){console.error("Error storing student check-in:",Ee),alert("Failed to check in student.")}},wi=async Z=>{qn(Z),Ln(!0);try{const Ee=jr(t,"classroom",z.id,"checkin",Z.id,"students"),_t=(await Sr(Ee)).docs.map(me=>me.id);Ge(me=>me.map(Et=>_t.includes(Et.id)?{...Et,checked:!0}:{...Et,checked:!1}))}catch(Ee){console.error("Error viewing check-in details:",Ee)}},cr=async()=>{if(!(!z||!ot)&&window.confirm("Are you sure you want to delete this check-in record?"))try{await du(Mt(t,"classroom",z.id,"checkin",ot.id)),$e(Z=>Z.filter(Ee=>Ee.id!==ot.id)),alert("Check-in record deleted successfully."),Ln(!1)}catch(Z){console.error("Error deleting check-in record:",Z),alert("Failed to delete check-in record.")}},Ei=Z=>{i(`/create-quiz/${z.id}?checkinId=${Z.id}`)},Qn=async Z=>{try{const Ee=Be.find(We=>We.id===Z);if(!Ee)return;await du(Mt(t,"classroom",z.id,"checkin",Je.id,"students",Z)),await du(Mt(t,"classroom",z.id,"checkin",Je.id,"scores",Ee.stdid)),Ge(We=>We.map(_t=>_t.id===Z?{..._t,checked:!1}:_t))}catch(Ee){console.error("Error undoing student check-in:",Ee),alert("Failed to undo check-in for student.")}},Ze=Z=>{Yn(Z),sn(!0),R(null)},En=async Z=>{try{const Ee=Be.find(me=>me.id===Z);if(!Ee)return;const We=Ee.status===0?1:0,_t=Mt(t,"classroom",z.id,"students",Z);await Jl(_t,{status:We}),Ge(me=>me.map(Et=>Et.id===Z?{...Et,status:We}:Et))}catch(Ee){console.error("Error toggling student verification:",Ee),alert("เกิดข้อผิดพลาดในการอัปเดตสถานะนักเรียน")}},kn=()=>{!Je||!z||Bi(!0)},Nn=async Z=>{try{let Ee;Z.status===1?Ee=0:Z.status===0?Ee=2:Ee=1;const We=Mt(t,"classroom",z.id,"checkin",Z.id);await Jl(We,{status:Ee}),$e(me=>me.map(Et=>Et.id===Z.id?{...Et,status:Ee}:Et)),Je&&Je.id===Z.id&&He({...Je,status:Ee}),alert(`การเช็คชื่อได้ถูก${Ee===1?"เปิดใช้งาน":Ee===0?"ปิดใช้งาน":"เสร็จสิ้น"}แล้ว`)}catch(Ee){console.error("Error toggling check-in status:",Ee),alert("เกิดข้อผิดพลาดในการเปลี่ยนสถานะการเช็คชื่อ")}},ni=Z=>{yi(Ee=>Ee.includes(Z)?Ee.filter(We=>We!==Z):[...Ee,Z])},Vi=()=>{lr.length===mn.length?yi([]):yi(mn.map(Z=>Z.id))},Hr=async()=>{try{const Z=t.batch();lr.forEach(Ee=>{const We=Mt(t,"classroom",z.id,"students",Ee);Z.update(We,{status:1})}),await Z.commit(),Ge(Ee=>Ee.map(We=>lr.includes(We.id)?{...We,status:1}:We)),yi([])}catch(Z){console.error("Error verifying students:",Z),alert("Failed to verify students.")}},Dr=async()=>{try{const Z=t.batch();lr.forEach(Ee=>{const We=Mt(t,"classroom",z.id,"students",Ee);Z.update(We,{status:0})}),await Z.commit(),Ge(Ee=>Ee.map(We=>lr.includes(We.id)?{...We,status:0}:We)),yi([])}catch(Z){console.error("Error unverifying students:",Z),alert("Failed to unverify students.")}},vi=Z=>{const Ee=Vr===Z&&Xn==="asc"?"desc":"asc";Tt(Z),ti(Ee)},mn=(()=>{let Z=Be;return ke&&(Z=Z.filter(Ee=>Ee.name.toLowerCase().includes(ke.toLowerCase())||Ee.stdid.toLowerCase().includes(ke.toLowerCase()))),Nt!=="all"&&(Z=Z.filter(Ee=>Nt==="verified"?Ee.status===1:Ee.status===0)),Vr&&(Z=Z.sort((Ee,We)=>Ee[Vr]<We[Vr]?Xn==="asc"?-1:1:Ee[Vr]>We[Vr]?Xn==="asc"?1:-1:0)),Z})();return A.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[A.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-4xl --font-InterEN mb-8",children:"Classroom Management System"}),A.jsxs("ul",{className:"space-y-4",children:[A.jsx("li",{children:A.jsx("button",{onClick:()=>{P(!1),U(!1),Q(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"ห้องเรียนของฉัน"})}),A.jsx("li",{children:A.jsx("button",{onClick:()=>{P(!0),U(!0),Q(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"สร้างห้องเรียน"})})]})]}),A.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-400/30 cursor-pointer group transition-all duration-300 rounded-lg p-2 hover:bg-blue-600/30",onClick:()=>i("/edit-profile"),children:[A.jsxs("div",{className:"relative flex-shrink-0",children:[c&&c.photo?A.jsx("img",{src:c.photo,alt:"Profile",className:"w-12 h-12 rounded-full border-2 border-white shadow-md object-cover group-hover:ring-2 group-hover:ring-blue-300 transition-all"}):A.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center border-2 border-white shadow-md group-hover:bg-blue-800 transition-all",children:A.jsx("span",{className:"text-lg text-white font-medium",children:c!=null&&c.name?c.name.charAt(0).toUpperCase():((vn=a==null?void 0:a.email)==null?void 0:vn.charAt(0).toUpperCase())||"U"})}),A.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-300 rounded-full p-1 border border-white transform scale-0 group-hover:scale-100 transition-transform duration-200",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-blue-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),A.jsxs("div",{className:"ml-4 min-w-0 max-w-[160px] overflow-hidden",children:[A.jsx("p",{className:"text-white font-InterEN font-bold truncate group-hover:text-blue-200 transition-colors",title:(c==null?void 0:c.name)||(a==null?void 0:a.email)||"User",children:(c==null?void 0:c.name)||(a==null?void 0:a.email)||"User"}),a&&A.jsx("p",{className:"text-blue-200 font-InterEN text-sm truncate group-hover:text-blue-300 transition-colors",title:a.email,children:a.email})]})]})]}),A.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"แดชบอร์ด"}),A.jsx("button",{onClick:()=>w(!0),className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),A.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[A.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["ยินดีต้อนรับสู่ระบบจัดการห้องเรียน Classroom Management System, ",(c==null?void 0:c.name)||(a==null?void 0:a.email)||"User","😊"]}),A.jsx("p",{className:"text-blue-700 font-ChakraPetchTH mb-4",children:"จัดการห้องเรียนของคุณที่มหาวิทยาลัยขอนแก่น"}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:F?z?"แก้ไขห้องเรียน":"สร้างห้องเรียน":"ห้องเรียนของคุณ"}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:F?z?A.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h2",{className:"text-xl font-ChakraPetchTH text-blue-900",children:at?`แก้ไขรายละเอียดห้องเรียน : ${z.info.name}`:`จัดการนักเรียน : ${z.info.name}`}),A.jsxs("div",{className:"relative",children:[A.jsx("button",{onClick:()=>kt(Z=>!Z),className:"p-2 focus:outline-none",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),Rt&&A.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md z-10",children:[A.jsx("button",{onClick:()=>{Gt(!0),kt(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"แก้ไขห้องเรียน"}),A.jsx("button",{onClick:()=>{Gt(!1),kt(!1)},className:"block w-full font-ChakraPetchTH text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"จัดการนักเรียน"})]})]})]}),at?A.jsxs("form",{onSubmit:en,className:"space-y-6",children:[A.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:J,onChange:Z=>X(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),A.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:Ve,onChange:Z=>ae(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),A.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:Se,onChange:Z=>Ae(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),A.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:Xe,onChange:Z=>it(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),te&&A.jsx("p",{className:"text-green-600 text-center",children:te}),A.jsxs("div",{className:"flex justify-end space-x-4",children:[A.jsx("button",{type:"button",onClick:()=>{Q(null),P(!1),U(!1)},className:"px-4 py-2 rounded border border-gray-300 hover:bg-gray-100 transition",children:"ยกเลิก"}),A.jsx("button",{type:"submit",disabled:Pe,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:Pe?"กำลังอัพเดท...":"บันทึก"})]})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"mt-4 p-6 border-2 rounded-xl border-blue-200 bg-white shadow-sm",children:[A.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-blue-100",children:"1️⃣ สถิติและการค้นหานักเรียน"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[A.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 flex items-center",children:[A.jsx("div",{className:"rounded-full bg-blue-500 p-3 mr-3",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-500 font-ChakraPetchTH",children:"นักเรียนทั้งหมด"}),A.jsx("p",{className:"text-2xl font-bold text-blue-800",children:Be.length})]})]}),A.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200 flex items-center",children:[A.jsx("div",{className:"rounded-full bg-green-500 p-3 mr-3",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-500 font-ChakraPetchTH",children:"ยืนยันแล้ว"}),A.jsx("p",{className:"text-2xl font-bold text-green-800",children:Be.filter(Z=>Z.status===1).length})]})]}),A.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200 flex items-center",children:[A.jsx("div",{className:"rounded-full bg-yellow-500 p-3 mr-3",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-500 font-ChakraPetchTH",children:"รอการยืนยัน"}),A.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:Be.filter(Z=>Z.status===0).length})]})]})]}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[A.jsx("div",{className:"w-full md:w-2/3",children:A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"text",placeholder:"ค้นหาตามชื่อหรือรหัสนักศึกษา...",value:ke||"",onChange:Z=>Cn(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none pl-10"}),A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 absolute left-3 top-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),A.jsx("div",{className:"w-full md:w-1/3",children:A.jsxs("select",{value:Nt,onChange:Z=>Ot(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none",children:[A.jsx("option",{value:"all",children:"ทั้งหมด"}),A.jsx("option",{value:"verified",children:"ยืนยันแล้ว"}),A.jsx("option",{value:"unverified",children:"รอการยืนยัน"})]})})]})]}),A.jsxs("div",{className:"mt-4 p-6 border-2 rounded-xl border-blue-200 bg-white shadow-sm",children:[A.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-blue-100",children:"2️⃣ นักเรียนที่ลงทะเบียน"}),Be.length>0?A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx("input",{type:"checkbox",id:"select-all",checked:lr.length===mn.length&&mn.length>0,onChange:Vi,className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),A.jsx("label",{htmlFor:"select-all",className:"ml-2 text-gray-700 font-ChakraPetchTH",children:"เลือกทั้งหมด"})]}),lr.length>0&&A.jsxs("div",{className:"flex space-x-2",children:[A.jsxs("button",{onClick:Hr,className:"px-3 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition font-ChakraPetchTH",children:["ยืนยันที่เลือก (",lr.length,")"]}),A.jsx("button",{onClick:Dr,className:"px-3 py-2 bg-yellow-500 text-white text-sm rounded hover:bg-yellow-600 transition font-ChakraPetchTH",children:"ยกเลิกการยืนยันที่เลือก"})]})]}),A.jsxs("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:[A.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),A.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:A.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>vi("stdid"),children:["รหัสนักศึกษา",Vr==="stdid"&&A.jsx("span",{className:"ml-1",children:Xn==="asc"?"▲":"▼"})]})}),A.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:A.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>vi("name"),children:["ชื่อ",Vr==="name"&&A.jsx("span",{className:"ml-1",children:Xn==="asc"?"▲":"▼"})]})}),A.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:A.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>vi("status"),children:["สถานะ",Vr==="status"&&A.jsx("span",{className:"ml-1",children:Xn==="asc"?"▲":"▼"})]})}),A.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:"การปฏิบัติ"})]})}),A.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:mn.map((Z,Ee)=>A.jsxs("tr",{className:Ee%2===0?"bg-white":"bg-gray-50",children:[A.jsx("td",{className:"pl-6 py-4 whitespace-nowrap",children:A.jsx("input",{type:"checkbox",checked:lr.includes(Z.id),onChange:()=>ni(Z.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"})}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Z.stdid}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Z.name}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:A.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Z.status===1?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Z.status===1?"ยืนยันแล้ว":"รอการยืนยัน"})}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:A.jsx("button",{onClick:()=>En(Z.id),className:`px-3 py-1 rounded ${Z.status===1?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:Z.status===1?"ยกเลิกการยืนยัน":"ยืนยันนักเรียน"})})]},Z.id))})]}),mn.length===0&&A.jsx("div",{className:"text-center py-8 text-gray-500 font-ChakraPetchTH",children:"ไม่พบนักเรียนที่ตรงตามเงื่อนไขการค้นหา"})]})]}):A.jsx("p",{className:"text-center text-gray-700 py-4",children:"ยังไม่มีนักเรียนในห้องเรียนนี้"})]}),A.jsxs("div",{className:"mt-4 p-6 border-2 rounded-xl border-blue-200 bg-white shadow-sm",children:[A.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-blue-100",children:"1️⃣ นักเรียนที่ลงทะเบียน"}),Be.length>0?A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full border",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-blue-100",children:[A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"สถานะ"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"การปฏิบัติ"})]})}),A.jsx("tbody",{children:Be.map(Z=>A.jsxs("tr",{className:"hover:bg-blue-50",children:[A.jsx("td",{className:"border p-2",children:Z.stdid}),A.jsx("td",{className:"border p-2",children:Z.name}),A.jsx("td",{className:"border p-2",children:Z.status===0?"ยังไม่ตรวจสอบ":"ตรวจสอบแล้ว"}),A.jsx("td",{className:"border p-2",children:A.jsx("button",{onClick:()=>En(Z.id),className:`px-3 py-1 rounded ${Z.status===1?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:Z.status===1?"ยกเลิกการยืนยัน":"ยืนยันนักเรียน"})})]},Z.id))})]})}):A.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนในห้องเรียนนี้"})]}),A.jsxs("div",{className:"mt-6 p-6 border-2 rounded-xl border-green-200 bg-white shadow-sm",children:[A.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-green-100",children:"3️⃣ เพิ่มนักเรียน"}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[A.jsx("div",{className:"w-full md:w-3/4",children:A.jsxs("select",{value:Me,onChange:Z=>rn(Z.target.value),className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",children:[A.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),qe.map(Z=>A.jsxs("option",{value:Z.id,children:[Z.name," (",Z.email,")"]},Z.id))]})}),A.jsx("div",{className:"w-full md:w-1/4",children:A.jsxs("button",{type:"button",onClick:Fr,className:"w-full bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH flex items-center justify-center",disabled:!Me,children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"เพิ่มนักเรียน"]})})]})]}),A.jsxs("div",{className:"mt-6 p-6 border-2 rounded-xl border-indigo-200 bg-white shadow-sm",children:[A.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-indigo-100",children:"3️⃣ จัดการการเช็คชื่อ"}),A.jsx("div",{className:"mb-4",children:A.jsx("button",{type:"button",onClick:()=>pt(Z=>!Z),className:"w-full font-ChakraPetchTH bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:Je?"แสดงตารางเช็คชื่อ":"สร้างการเช็คชื่อ"})}),$n&&!Je&&A.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:A.jsxs("div",{className:"space-y-4",children:[A.jsx("input",{type:"text",placeholder:"รหัสเช็คชื่อ (e.g., ABC123456)",value:ht,onChange:Z=>Ce(Z.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),A.jsx("input",{type:"datetime-local",value:De,onChange:Z=>Ye(Z.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),A.jsxs("select",{value:ji,onChange:Z=>hn(parseInt(Z.target.value)),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition",children:[A.jsx("option",{value:1,children:"เปิดใช้งาน"}),A.jsx("option",{value:0,children:"ปิดใช้งาน"})]}),A.jsx("button",{type:"button",onClick:Pa,className:"w-full bg-blue-600 text-white font-ChakraPetchTH px-4 py-2 rounded hover:bg-blue-700 transition",children:"สร้างการเช็คชื่อ"})]})}),$n&&Je&&A.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:A.jsxs("div",{className:"space-y-4",children:[A.jsxs("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["Check-in Table (Code: ",Je.code,", Time: ",Je.date,")"]}),Be.length>0?A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full border",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-blue-100",children:[A.jsx("th",{className:"border p-2 text-left",children:"ลำดับ"}),A.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),A.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),A.jsx("th",{className:"border p-2 text-left",children:"สถานะ"}),A.jsx("th",{className:"border p-2 text-left",children:"การปฏิบัติ"})]})}),A.jsx("tbody",{children:Be.map((Z,Ee)=>A.jsxs("tr",{className:"hover:bg-blue-50",children:[A.jsx("td",{className:"border p-2",children:Ee+1}),A.jsx("td",{className:"border p-2",children:Z.stdid}),A.jsx("td",{className:"border p-2",children:Z.name}),A.jsx("td",{className:"border p-2",children:Z.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็ค"}),A.jsx("td",{className:"border p-2",children:A.jsx("button",{type:"button",onClick:()=>{Z.checked?Qn(Z.id):Rr(Z.id)},className:`px-3 py-1 rounded ${Z.checked?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:Z.checked?"ยกเลิกเช็คชื่อ":"เช็คชื่อ"})})]},Z.id))})]})}):A.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีนักเรียนในห้องเรียนนี้"}),A.jsx("div",{className:"flex space-x-4 mt-4",children:A.jsx("button",{type:"button",onClick:kn,className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"แสดง QR Code เช็คชื่อ"})})]})}),A.jsxs("div",{className:"mt-6",children:[A.jsx("h4",{className:"text-lg font-ChakraPetchTH mb-3 text-blue-800",children:"บันทึกการเช็คชื่อ"}),ze.length>0?A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full border",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-blue-100",children:[A.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),A.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสเช็คชื่อ"}),A.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"วัน/เวลา"}),A.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"}),A.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รายละเอียด"})]})}),A.jsx("tbody",{children:ze.map((Z,Ee)=>A.jsxs("tr",{className:"hover:bg-blue-50",children:[A.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Ee+1}),A.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.code}),A.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.date}),A.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.status===0?A.jsx("span",{className:"text-red-600",children:"ปิดใช้งาน"}):Z.status===1?A.jsx("span",{className:"text-green-600",children:"กำลังใช้งาน"}):A.jsx("span",{className:"text-gray-500",children:"เสร็จสิ้น"})}),A.jsxs("td",{className:"border p-2",children:[A.jsx("button",{type:"button",onClick:()=>wi(Z),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition mr-2",children:"รายละเอียด"}),A.jsx("button",{type:"button",onClick:()=>Nn(Z),className:`font-ChakraPetchTH text-white px-3 py-1 rounded transition mr-2 ${Z.status===1?"bg-red-600 hover:bg-red-700":Z.status===0?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:Z.status===1?"ปิดใช้งาน":Z.status===0?"ตั้งเป็นเสร็จสิ้น":"เปิดใช้งานใหม่"}),A.jsx("button",{type:"button",onClick:()=>Ei(Z),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition",children:"ควิซ"})]})]},Z.id))})]})}):A.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีบันทึกการเช็คชื่อในห้องเรียนนี้"})]})]})]})]}):k?A.jsx("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:A.jsxs("form",{onSubmit:zr,className:"space-y-6",children:[A.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:q,onChange:Z=>ee(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),A.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:K,onChange:Z=>de(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),A.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:fe,onChange:Z=>ie(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),A.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:ve,onChange:Z=>je(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),A.jsxs("div",{className:"flex justify-end space-x-4",children:[A.jsx("button",{type:"button",onClick:()=>{U(!1),P(!1)},className:"px-6 py-3 rounded border border-gray-300 hover:bg-gray-100 transition",children:"Cancel"}),A.jsx("button",{type:"submit",disabled:Pe,className:"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 transition shadow-md",children:Pe?"Creating...":"Create"})]})]})}):A.jsxs("div",{onClick:()=>U(!0),className:"col-span-1 md:col-span-2 relative flex flex-col items-center justify-center border-4 border-dashed border-blue-400 rounded-xl h-60 cursor-pointer hover:bg-blue-100 transition duration-300",children:[A.jsx("span",{className:"text-6xl text-blue-500",children:"+"}),A.jsx("span",{className:"mt-4 text-2xl text-blue-700 font-bold",children:"Create New Classroom"})]}):A.jsx(A.Fragment,{children:y.map(Z=>A.jsxs("div",{className:"relative flex flex-col items-center border border-gray-200 rounded-lg shadow-md bg-white transition transform hover:-translate-y-1 hover:shadow-xl duration-300",children:[A.jsx("button",{onClick:()=>ts(Z.id),className:"absolute top-2 right-2 bg-white border border-gray-300 rounded-full p-2 transition duration-200 active:scale-95 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),S===Z.id&&A.jsxs("div",{className:"absolute top-10 right-2 w-36 bg-white shadow-lg rounded py-1 z-20",children:[A.jsx("button",{onClick:()=>Ui(Z),className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"จัดการนักเรียน"}),A.jsx("button",{onClick:()=>Ze(Z),className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"สร้าง QR Code"}),A.jsx("button",{onClick:()=>{Vn(Z.id),R(null)},className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"ลบห้องเรียน"})]}),Z.info.photo?A.jsx("img",{src:Z.info.photo,alt:Z.info.name,className:"w-full h-48 object-cover rounded-t-lg border-b border-gray-200"}):A.jsx("div",{className:"w-full h-48 bg-blue-300 flex items-center justify-center rounded-t-lg border-b border-gray-200",children:A.jsx("span",{className:"text-lg text-white",children:"No Image"})}),A.jsxs("div",{className:"p-4 text-center",children:[A.jsx("p",{className:"font-semibold font-InterEN text-blue-900 text-xl mb-1",children:Z.info.name}),A.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Code : ",Z.info.code]}),A.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Room : ",Z.info.room]})]})]},Z.id))})})]})]})]}),Jn&&ot&&A.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-10 z-50",children:A.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50 w-11/12 md:w-1/2",children:[A.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"รายละเอียดการเช็คชื่อ"}),A.jsxs("div",{className:"flex flex-col items-center mb-6",children:[A.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:A.jsx(lf,{id:"detail-checkin-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/student-checkin/${z.id}/${ot.id}`,size:150,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),A.jsx("div",{className:"mt-2 mb-2 text-center",children:A.jsxs("p",{className:`font-ChakraPetchTH mt-2 ${ot.status===1?"text-green-600":ot.status===0?"text-red-600":"text-gray-600"}`,children:["สถานะ: ",ot.status===1?"เปิดใช้งาน":ot.status===0?"ปิดใช้งาน":"เสร็จสิ้น"]})})]}),A.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["รหัสเช็คชื่อ: ",ot.code]}),A.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["วัน/เวลา: ",ot.date]}),A.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH",children:["จำนวนนักเรียนที่เช็คชื่อ : ",Be.filter(Z=>Z.checked).length," / ",Be.length]}),A.jsx("div",{className:"mt-4 overflow-x-auto",children:A.jsxs("table",{className:"w-full border",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-blue-100",children:[A.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),A.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสนักเรียน"}),A.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ชื่อ"}),A.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"})]})}),A.jsx("tbody",{children:Be.map((Z,Ee)=>A.jsxs("tr",{className:"hover:bg-blue-50",children:[A.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Ee+1}),A.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.stdid}),A.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.name}),A.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็คชื่อ"})]},Z.id))})]})}),A.jsxs("div",{className:"flex justify-between mt-4",children:[A.jsx("button",{type:"button",onClick:()=>{const Z=document.getElementById("detail-checkin-qr-code"),Ee=document.createElement("canvas"),We=Ee.getContext("2d"),_t=new XMLSerializer().serializeToString(Z),me=new Image;me.onload=()=>{Ee.width=me.width,Ee.height=me.height,We.drawImage(me,0,0);const Et=document.createElement("a");Et.download=`checkin-${ot.code}.png`,Et.href=Ee.toDataURL("image/png"),Et.click()},me.src=`data:image/svg+xml;base64,${btoa(_t)}`},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 shadow-xs transition font-ChakraPetchTH",children:"ดาวน์โหลด QR"}),A.jsxs("div",{className:"flex space-x-4",children:[A.jsx("button",{type:"button",onClick:cr,className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 shadow-xs transition",children:"ลบบันทึกการเช็คชื่อ"}),A.jsx("button",{type:"button",onClick:()=>Ln(!1),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 shadow-xs transition",children:"ปิด"})]})]})]})}),v&&A.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[A.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),A.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:A.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:A.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[A.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:A.jsxs("div",{className:"sm:flex sm:items-start",children:[A.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:A.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),A.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[A.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),A.jsx("div",{className:"mt-2",children:A.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),A.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[A.jsx("button",{type:"button",onClick:()=>{w(!1),er()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),A.jsx("button",{type:"button",onClick:()=>w(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]}),Pt&&gn&&A.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-50 z-50",children:A.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-xl w-11/12 md:w-96 relative",children:[A.jsx("button",{onClick:()=>sn(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),A.jsx("h3",{className:"text-xl font-ChakraPetchTH text-center mb-4 text-blue-900",children:"QR Code ลงทะเบียนห้องเรียน"}),A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:A.jsx(lf,{id:"classroom-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/register-classroom/${gn.id}`,size:200,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),A.jsxs("div",{className:"mt-4 text-center",children:[A.jsx("p",{className:"font-ChakraPetchTH text-lg font-bold text-blue-900",children:gn.info.name}),A.jsxs("p",{className:"font-InterEN text-gray-600",children:["Code: ",gn.info.code]}),A.jsxs("p",{className:"font-InterEN text-gray-600",children:["Room: ",gn.info.room]})]}),A.jsxs("div",{className:"mt-6",children:[A.jsx("button",{onClick:()=>sn(!1),className:"bg-blue-600 text-white px-6 py-2 m-2 rounded-lg hover:bg-blue-700 transition font-ChakraPetchTH",children:"ปิด"}),A.jsx("button",{onClick:()=>{const Z=document.getElementById("classroom-qr-code"),Ee=document.createElement("canvas"),We=Ee.getContext("2d"),_t=new XMLSerializer().serializeToString(Z),me=new Image;me.onload=()=>{Ee.width=me.width,Ee.height=me.height,We.drawImage(me,0,0);const Et=document.createElement("a");Et.download=`classroom-${gn.info.code}.png`,Et.href=Ee.toDataURL("image/png"),Et.click()},me.src=`data:image/svg+xml;base64,${btoa(_t)}`},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH mr-2",children:"ดาวน์โหลด QR"})]})]})]})}),Pi&&Je&&z&&A.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-50 z-50",children:A.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-xl w-11/12 md:w-96 relative",children:[A.jsx("button",{onClick:()=>Bi(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),A.jsx("h3",{className:"text-xl font-ChakraPetchTH text-center mb-4 text-blue-900",children:"QR Code เช็คชื่อเข้าเรียน"}),A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:A.jsx(lf,{id:"checkin-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/student-checkin/${z.id}/${Je.id}`,size:200,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),A.jsxs("div",{className:"mt-4 text-center",children:[A.jsx("p",{className:"font-ChakraPetchTH text-lg font-bold text-blue-900",children:z.info.name}),A.jsxs("p",{className:"font-InterEN text-gray-600",children:["รหัสเช็คชื่อ: ",Je.code]}),A.jsxs("p",{className:"font-InterEN text-gray-600",children:["เวลา: ",Je.date]}),A.jsxs("p",{className:`font-ChakraPetchTH mt-2 ${Je.status===1?"text-green-600":Je.status===0?"text-red-600":"text-gray-600"}`,children:["สถานะ: ",Je.status===1?"เปิดใช้งาน":Je.status===0?"ปิดใช้งาน":"เสร็จสิ้น"]})]}),A.jsxs("div",{className:"mt-6",children:[A.jsx("button",{onClick:()=>Bi(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition font-ChakraPetchTH mr-2",children:"ปิด"}),A.jsx("button",{onClick:()=>{const Z=document.getElementById("checkin-qr-code"),Ee=document.createElement("canvas"),We=Ee.getContext("2d"),_t=new XMLSerializer().serializeToString(Z),me=new Image;me.onload=()=>{Ee.width=me.width,Ee.height=me.height,We.drawImage(me,0,0);const Et=document.createElement("a");Et.download=`checkin-${Je.code}.png`,Et.href=Ee.toDataURL("image/png"),Et.click()},me.src=`data:image/svg+xml;base64,${btoa(_t)}`},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH",children:"ดาวน์โหลด QR"})]})]})]})})]})}function HN(){const i=So(vs),e=ul(vs),t=ea(),[a,c]=$.useState(!0),[f,y]=$.useState(null),[b,v]=$.useState(""),[w,S]=$.useState(""),[R,k]=$.useState(""),[U,q]=$.useState(!1),[ee,K]=$.useState(!1),[de,fe]=$.useState(""),[ie,ve]=$.useState(!1);$.useEffect(()=>{const z=ig(i,Q=>{y(Q),c(!1),!Q&&!a&&t("/")});return()=>z()},[i,t,a]),$.useEffect(()=>{if(a||!f)return;(async()=>{try{const Q=Mt(e,"users",f.uid),J=await Br(Q);if(J.exists()){const X=J.data();v(X.name||""),S(X.photo||""),k(X.photo||""),ve(!1)}}catch(Q){console.error("Error loading profile:",Q)}})()},[f,e,a]);const je=z=>{const Q=z.target.value;S(Q),q(!1),Q.trim()?k(Q):k("")},Pe=()=>{q(!0)},H=async z=>{if(z.preventDefault(),!!f){K(!0),fe("");try{await tS(f,{displayName:b,photoURL:w});const Q=Mt(e,"users",f.uid);await ki(Q,{name:b,photo:w,email:f.email,classroom:{status:1}},{merge:!0}),fe("อัปเดตโปรไฟล์สำเร็จแล้ว"),ve(!1)}catch(Q){console.error("Error updating profile:",Q),fe("เกิดข้อผิดพลาดในการอัปเดตโปรไฟล์")}K(!1)}},F=()=>b?b.split(" ").map(z=>z[0]).join("").toUpperCase().substring(0,2):f!=null&&f.email?f.email[0].toUpperCase():"N/A",P=()=>{if(!(f!=null&&f.uid))return"bg-blue-600";const z=["bg-red-600","bg-blue-600","bg-green-600","bg-yellow-600","bg-purple-600","bg-pink-600","bg-indigo-600","bg-teal-600"],Q=f.uid.split("").reduce((J,X)=>J+X.charCodeAt(0),0)%z.length;return z[Q]};return a?A.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:A.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-md",children:[A.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-4"}),A.jsx("p",{className:"text-blue-800",children:"กำลังตรวจสอบการเข้าสู่ระบบ..."})]})}):f?A.jsxs("div",{className:"relative min-h-screen bg-gray-100 p-8",children:[A.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"absolute top-4 left-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:"ไปที่แดชบอร์ด"}),A.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded-lg shadow-lg",children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"แก้ไขโปรไฟล์"}),A.jsx("div",{className:"flex justify-center mb-6",children:A.jsxs("div",{className:"relative w-32 h-32",children:[R&&!U?A.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden flex items-center justify-center border-2 border-gray-200",children:A.jsx("img",{src:R,alt:"Profile",className:"object-cover w-full h-full",onError:Pe})}):A.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center text-white text-2xl ${P()}`,children:F()}),ie&&A.jsx("div",{className:"absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}),ie?A.jsxs("form",{onSubmit:H,children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),A.jsx("input",{type:"email",value:f.email||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-200 cursor-not-allowed"})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),A.jsx("input",{type:"text",value:b,onChange:z=>v(z.target.value),placeholder:"กรอกชื่อของคุณ",className:"w-full px-3 py-2 border rounded-lg",required:!0})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),A.jsx("input",{type:"text",value:w,onChange:je,placeholder:"กรอก URL รูปโปรไฟล์",className:"w-full px-3 py-2 border rounded-lg"}),U&&w&&A.jsx("p",{className:"mt-1 text-sm text-red-500",children:"ไม่สามารถโหลดรูปภาพได้ กรุณาตรวจสอบ URL"}),A.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"* ใส่ URL รูปภาพจากอินเทอร์เน็ต เช่น https://example.com/image.jpg"})]}),de&&A.jsx("div",{className:"mb-4 text-green-500",children:de}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("button",{type:"submit",disabled:ee,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:ee?"กำลังบันทึก...":"บันทึกการเปลี่ยนแปลง"}),A.jsx("button",{type:"button",onClick:()=>{ve(!1),fe(""),k(w),q(!1)},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-300",children:"ยกเลิก"})]})]}):A.jsxs("div",{children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),A.jsx("p",{className:"px-3 py-2 border rounded-lg bg-gray-200",children:f.email})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),A.jsx("p",{className:"px-3 py-2 border rounded-lg",children:b||"ไม่ได้ระบุ"})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),A.jsx("p",{className:"px-3 py-2 border rounded-lg",children:w})]}),A.jsx("button",{type:"button",onClick:()=>{ve(!0),fe("")},className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition duration-300",children:"แก้ไขโปรไฟล์"})]})]})]}):A.jsx("div",{className:"min-h-screen flex items-center justify-center",children:A.jsx("p",{children:"ผู้ใช้ยังไม่ได้เข้าสู่ระบบ."})})}function GN(){const{cid:i}=F1(),e=ea(),t=So(),a=ul(vs),c=t.currentUser,[f,y]=$.useState(null),[b,v]=$.useState(""),[w,S]=$.useState(""),[R,k]=$.useState(""),[U,q]=$.useState(""),[ee,K]=$.useState([]),[de,fe]=$.useState([]),[ie,ve]=$.useState(!1),[je,Pe]=$.useState(""),[H,F]=$.useState(""),[P,z]=$.useState([]),[Q,J]=$.useState("");$.useEffect(()=>{if(i){const Ve=Mt(a,"classroom",i);Br(Ve).then(Ae=>{if(Ae.exists()){const Xe=Ae.data();if(Xe.owner!==c.uid){Pe("สิทธิ์ไม่พอ คุณไม่ใช่เจ้าของห้องเรียนนี้.");return}y(Xe),v(Xe.info.code),S(Xe.info.name),k(Xe.info.photo),q(Xe.info.room)}else Pe("ไม่พบห้องเรียน.")}).catch(Ae=>{console.error(Ae),Pe("เกิดข้อผิดพลาดในการดึงข้อมูลห้องเรียน.")});const ae=jr(a,"classroom",i,"students");Sr(ae).then(Ae=>{const Xe=[];Ae.forEach(it=>{Xe.push({id:it.id,...it.data()})}),K(Xe)}).catch(Ae=>console.error("เกิดข้อผิดพลาดในการดึงนักเรียน: ",Ae));const Se=jr(a,"classroom",i,"checkin");Sr(Se).then(Ae=>{const Xe=[];Ae.forEach(it=>{Xe.push({id:it.id,...it.data()})}),fe(Xe)}).catch(Ae=>console.error("เกิดข้อผิดพลาดในการดึงกิจกรรมเช็คอิน: ",Ae))}},[i,c.uid,a]),$.useEffect(()=>{(async()=>{try{const ae=jr(a,"users"),Se=Iu(ae,Nu("classroom.status","==",2)),Ae=await Sr(Se),Xe=[];Ae.forEach(it=>{Xe.push({id:it.id,...it.data()})}),z(Xe)}catch(ae){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลผู้ใช้: ",ae)}})()},[a]);const X=async Ve=>{Ve.preventDefault(),ve(!0),F("");try{const ae=Mt(a,"classroom",i);await Jl(ae,{"info.code":b,"info.name":w,"info.photo":R,"info.room":U}),F("แก้ไขห้องเรียนสำเร็จแล้ว.")}catch(ae){console.error("เกิดข้อผิดพลาดในการแก้ไขห้องเรียน: ",ae),F("แก้ไขห้องเรียนไม่สำเร็จ.")}ve(!1)};return je?A.jsx("div",{className:"p-6 text-red-600 text-center",children:je}):f?A.jsxs("div",{className:"min-h-screen bg-blue-50 p-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-8",children:[A.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน: ",f.info.name]}),A.jsx("button",{onClick:()=>e("/dashboard"),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition",children:"กลับไปที่แดชบอร์ด"})]}),A.jsxs("div",{className:"mb-8",children:[A.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"นักเรียนที่ลงทะเบียน"}),ee.length>0?A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full border",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-blue-100",children:[A.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),A.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),A.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),A.jsx("tbody",{children:ee.map(Ve=>A.jsxs("tr",{className:"hover:bg-blue-50",children:[A.jsx("td",{className:"border p-2",children:Ve.stdid}),A.jsx("td",{className:"border p-2",children:Ve.name}),A.jsx("td",{className:"border p-2",children:Ve.status===0?"รออนุมัติ":"ตรวจสอบแล้ว"})]},Ve.id))})]})}):A.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนที่ลงทะเบียน"})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-8",children:[A.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"เพิ่มนักเรียน"}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-1",children:"เลือกนักเรียน"}),A.jsxs("select",{value:Q,onChange:Ve=>J(Ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:[A.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),P.map(Ve=>A.jsxs("option",{value:Ve.id,children:[Ve.name," (",Ve.email,")"]},Ve.id))]})]}),A.jsx("button",{onClick:async()=>{if(!Q)return;const Ve=P.find(ae=>ae.id===Q);if(Ve)try{const ae=Mt(a,"classroom",i,"students",Ve.id);await ki(ae,{stdid:Ve.id,name:Ve.name,status:1}),K([...ee,{id:Ve.id,stdid:Ve.id,name:Ve.name,status:1}]),F("เพิ่มนักเรียนสำเร็จแล้ว."),J("")}catch(ae){console.error("เกิดข้อผิดพลาดในการเพิ่มนักเรียน: ",ae),F("เพิ่มนักเรียนไม่สำเร็จ.")}},className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"เพิ่มนักเรียน"})]}),A.jsxs("div",{className:"mb-8",children:[A.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"กิจกรรมเช็คอิน"}),de.length>0?A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full border",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-blue-100",children:[A.jsx("th",{className:"border p-2 text-left",children:"หมายเลขเช็คอิน"}),A.jsx("th",{className:"border p-2 text-left",children:"รหัส"}),A.jsx("th",{className:"border p-2 text-left",children:"วันที่"}),A.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),A.jsx("tbody",{children:de.map(Ve=>A.jsxs("tr",{className:"hover:bg-blue-50",children:[A.jsx("td",{className:"border p-2",children:Ve.id}),A.jsx("td",{className:"border p-2",children:Ve.code}),A.jsx("td",{className:"border p-2",children:Ve.date}),A.jsx("td",{className:"border p-2",children:Ve.status===0?"ยังไม่เริ่ม":Ve.status===1?"กำลังดำเนินการ":"เสร็จสิ้น"})]},Ve.id))})]})}):A.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีกิจกรรมเช็คอิน"})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[A.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"แก้ไขรายละเอียดห้องเรียน"}),A.jsxs("form",{onSubmit:X,children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-1",children:"รหัสวิชา"}),A.jsx("input",{type:"text",value:b,onChange:Ve=>v(Ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อวิชา"}),A.jsx("input",{type:"text",value:w,onChange:Ve=>S(Ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-1",children:"URL รูปภาพ"}),A.jsx("input",{type:"text",value:R,onChange:Ve=>k(Ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อห้องเรียน"}),A.jsx("input",{type:"text",value:U,onChange:Ve=>q(Ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),A.jsx("button",{type:"submit",disabled:ie,className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:ie?"กำลังแก้ไข...":"บันทึกการแก้ไข"}),H&&A.jsx("p",{className:"mt-4 text-green-600 text-center",children:H})]})]})]}):A.jsx("div",{className:"p-6 text-center",children:"กำลังโหลดข้อมูลห้องเรียน..."})}var tt;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tt||(tt={}));var wy=new Map([[tt.QR_CODE,"QR_CODE"],[tt.AZTEC,"AZTEC"],[tt.CODABAR,"CODABAR"],[tt.CODE_39,"CODE_39"],[tt.CODE_93,"CODE_93"],[tt.CODE_128,"CODE_128"],[tt.DATA_MATRIX,"DATA_MATRIX"],[tt.MAXICODE,"MAXICODE"],[tt.ITF,"ITF"],[tt.EAN_13,"EAN_13"],[tt.EAN_8,"EAN_8"],[tt.PDF_417,"PDF_417"],[tt.RSS_14,"RSS_14"],[tt.RSS_EXPANDED,"RSS_EXPANDED"],[tt.UPC_A,"UPC_A"],[tt.UPC_E,"UPC_E"],[tt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ey;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(Ey||(Ey={}));function qN(i){return Object.values(tt).includes(i)}var To;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(To||(To={}));var Ns=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[To.SCAN_TYPE_CAMERA,To.SCAN_TYPE_FILE],i}(),Dv=function(){function i(e,t){this.format=e,this.formatName=t}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!wy.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,wy.get(e))},i}(),vy=function(){function i(){}return i.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i}(),k1;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(k1||(k1={}));var Mv=function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:k1.UNKWOWN_ERROR}},i}(),Ov=function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i}();function Xs(i){return typeof i>"u"||i===null}function YN(i,e,t){return i>t?t:i<e?e:i}var Ql=function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}(),wn=function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(e){return"Last Match: ".concat(e)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i}(),_y=function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i}(),Lv=function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var a=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(c),y=Object.keys(e),b=0,v=y;b<v.length;b++){var w=v[b];if(f.has(w))return t.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},i}(),gu={exports:{}},XN=gu.exports,by;function QN(){return by||(by=1,function(i,e){(function(t,a){a(e)})(XN,function(t){function a(O){return O==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,r){O.__proto__=r}||function(O,r){for(var o in r)r.hasOwnProperty(o)&&(O[o]=r[o])};function f(O,r){c(O,r);function o(){this.constructor=O}O.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}function y(O,r){var o=Object.setPrototypeOf;o?o(O,r):O.__proto__=r}function b(O,r){r===void 0&&(r=O.constructor);var o=Error.captureStackTrace;o&&o(O,r)}var v=function(O){f(r,O);function r(o){var l=this.constructor,h=O.call(this,o)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),y(h,l.prototype),b(h),h}return r}(Error);class w extends v{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}w.kind="Exception";class S extends w{}S.kind="ArgumentException";class R extends w{}R.kind="IllegalArgumentException";class k{constructor(r){if(this.binarizer=r,r===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,o){return this.binarizer.getBlackRow(r,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,o,l,h){const d=this.binarizer.getLuminanceSource().crop(r,o,l,h);return new k(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class U extends w{static getChecksumInstance(){return new U}}U.kind="ChecksumException";class q{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ee{static arraycopy(r,o,l,h,d){for(;d--;)l[h++]=r[o++]}static currentTimeMillis(){return Date.now()}}class K extends w{}K.kind="IndexOutOfBoundsException";class de extends K{constructor(r=void 0,o=void 0){super(o),this.index=r,this.message=o}}de.kind="ArrayIndexOutOfBoundsException";class fe{static fill(r,o){for(let l=0,h=r.length;l<h;l++)r[l]=o}static fillWithin(r,o,l,h){fe.rangeCheck(r.length,o,l);for(let d=o;d<l;d++)r[d]=h}static rangeCheck(r,o,l){if(o>l)throw new R("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new de(o);if(l>r)throw new de(l)}static asList(...r){return r}static create(r,o,l){return Array.from({length:r}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(r,o,l){return Array.from({length:r}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(r,o){if(!r||!o||!r.length||!o.length||r.length!==o.length)return!1;for(let l=0,h=r.length;l<h;l++)if(r[l]!==o[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let o=1;for(const l of r)o=31*o+l;return o}static fillUint8Array(r,o){for(let l=0;l!==r.length;l++)r[l]=o}static copyOf(r,o){return r.slice(0,o)}static copyOfUint8Array(r,o){if(r.length<=o){const l=new Uint8Array(o);return l.set(r),l}return r.slice(0,o)}static copyOfRange(r,o,l){const h=l-o,d=new Int32Array(h);return ee.arraycopy(r,o,d,0,h),d}static binarySearch(r,o,l){l===void 0&&(l=fe.numberComparator);let h=0,d=r.length-1;for(;h<=d;){const m=d+h>>1,p=l(o,r[m]);if(p>0)h=m+1;else if(p<0)d=m-1;else return m}return-h-1}static numberComparator(r,o){return r-o}}class ie{static numberOfTrailingZeros(r){let o;if(r===0)return 32;let l=31;return o=r<<16,o!==0&&(l-=16,r=o),o=r<<8,o!==0&&(l-=8,r=o),o=r<<4,o!==0&&(l-=4,r=o),o=r<<2,o!==0&&(l-=2,r=o),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let o=1;return r>>>16||(o+=16,r<<=16),r>>>24||(o+=8,r<<=8),r>>>28||(o+=4,r<<=4),r>>>30||(o+=2,r<<=2),o-=r>>>31,o}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,o){return Math.trunc(r/o)}static parseInt(r,o=void 0){return parseInt(r,o)}}ie.MIN_VALUE_32_BITS=-2147483648,ie.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ve{constructor(r,o){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,o==null?this.bits=ve.makeArray(r):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const o=ve.makeArray(r);ee.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=l[h]}const p=h*32+ie.numberOfTrailingZeros(d);return p>o?o:p}getNextUnset(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=~l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=~l[h]}const p=h*32+ie.numberOfTrailingZeros(d);return p>o?o:p}setBulk(r,o){this.bits[Math.floor(r/32)]=o}setRange(r,o){if(o<r||r<0||o>this.size)throw new R;if(o===r)return;o--;const l=Math.floor(r/32),h=Math.floor(o/32),d=this.bits;for(let m=l;m<=h;m++){const p=m>l?0:r&31,T=(2<<(m<h?31:o&31))-(1<<p);d[m]|=T}}clear(){const r=this.bits.length,o=this.bits;for(let l=0;l<r;l++)o[l]=0}isRange(r,o,l){if(o<r||r<0||o>this.size)throw new R;if(o===r)return!0;o--;const h=Math.floor(r/32),d=Math.floor(o/32),m=this.bits;for(let p=h;p<=d;p++){const _=p>h?0:r&31,N=(2<<(p<d?31:o&31))-(1<<_)&4294967295;if((m[p]&N)!==(l?N:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,o){if(o<0||o>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const o=r.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new R("Sizes don't match");const o=this.bits;for(let l=0,h=o.length;l<h;l++)o[l]^=r.bits[l]}toBytes(r,o,l,h){for(let d=0;d<h;d++){let m=0;for(let p=0;p<8;p++)this.get(r)&&(m|=1<<7-p),r++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,h=this.bits;for(let d=0;d<l;d++){let m=h[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=r[0]>>>d;for(let p=1;p<l;p++){const _=r[p];m|=_<<32-d,r[p-1]=m,m=_>>>d}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof ve))return!1;const o=r;return this.size===o.size&&fe.equals(this.bits,o.bits)}hashCode(){return 31*this.size+fe.hashCode(this.bits)}toString(){let r="";for(let o=0,l=this.size;o<l;o++)o&7||(r+=" "),r+=this.get(o)?"X":".";return r}clone(){return new ve(this.size,this.bits.slice())}}var je;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(je||(je={}));var Pe=je;class H extends w{static getFormatInstance(){return new H}}H.kind="FormatException";var F;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(F||(F={}));class P{constructor(r,o,l,...h){this.valueIdentifier=r,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=h,P.VALUE_IDENTIFIER_TO_ECI.set(r,this),P.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,p=d.length;m!==p;m++){const _=d[m];P.VALUES_TO_ECI.set(_,this)}for(const m of h)P.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new H("incorect value");const o=P.VALUES_TO_ECI.get(r);if(o===void 0)throw new H("incorect value");return o}static getCharacterSetECIByName(r){const o=P.NAME_TO_ECI.get(r);if(o===void 0)throw new H("incorect value");return o}equals(r){if(!(r instanceof P))return!1;const o=r;return this.getName()===o.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(F.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(F.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(F.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(F.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(F.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(F.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(F.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(F.Big5,28,"Big5"),P.GB18030=new P(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(F.EUC_KR,30,"EUC_KR","EUC-KR");class z extends w{}z.kind="UnsupportedOperationException";class Q{static decode(r,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!Q.isBrowser()&&r==="ISO-8859-1"}static encode(r,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof P?r:P.getCharacterSetECIByName(r)}static decodeFallback(r,o){const l=this.encodingCharacterSet(o);if(Q.isDecodeFallbackSupported(l)){let h="";for(let d=0,m=r.length;d<m;d++){let p=r[d].toString(16);p.length<2&&(p="0"+p),h+="%"+p}return decodeURIComponent(h)}if(l.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new z(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(P.UTF8)||r.equals(P.ISO8859_1)||r.equals(P.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),h=[];for(let d=0;d<l.length;d++)h.push(l[d].charCodeAt(0));return new Uint8Array(h)}}class J{static castAsNonUtf8Char(r,o=null){const l=o?o.getName():this.ISO88591;return Q.decode(new Uint8Array([r]),l)}static guessEncoding(r,o){if(o!=null&&o.get(Pe.CHARACTER_SET)!==void 0)return o.get(Pe.CHARACTER_SET).toString();const l=r.length;let h=!0,d=!0,m=!0,p=0,_=0,T=0,N=0,L=0,B=0,Y=0,ne=0,re=0,he=0,we=0;const Ue=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Fe=0;Fe<l&&(h||d||m);Fe++){const Oe=r[Fe]&255;m&&(p>0?Oe&128?p--:m=!1:Oe&128&&(Oe&64?(p++,Oe&32?(p++,Oe&16?(p++,Oe&8?m=!1:N++):T++):_++):m=!1)),h&&(Oe>127&&Oe<160?h=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&we++),d&&(L>0?Oe<64||Oe===127||Oe>252?d=!1:L--:Oe===128||Oe===160||Oe>239?d=!1:Oe>160&&Oe<224?(B++,ne=0,Y++,Y>re&&(re=Y)):Oe>127?(L++,Y=0,ne++,ne>he&&(he=ne)):(Y=0,ne=0))}return m&&p>0&&(m=!1),d&&L>0&&(d=!1),m&&(Ue||_+T+N>0)?J.UTF8:d&&(J.ASSUME_SHIFT_JIS||re>=3||he>=3)?J.SHIFT_JIS:h&&d?re===2&&B===2||we*10>=l?J.SHIFT_JIS:J.ISO88591:h?J.ISO88591:d?J.SHIFT_JIS:m?J.UTF8:J.PLATFORM_DEFAULT_ENCODING}static format(r,...o){let l=-1;function h(m,p,_,T,N,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let B=N?parseInt(N.substr(1)):void 0,Y;switch(L){case"s":Y=o[l];break;case"c":Y=o[l][0];break;case"f":Y=parseFloat(o[l]).toFixed(m);break;case"p":Y=parseFloat(o[l]).toPrecision(m);break;case"e":Y=parseFloat(o[l]).toExponential(m);break;case"x":Y=parseInt(o[l]).toString(B||16);break;case"d":Y=parseFloat(parseInt(o[l],B||10).toPrecision(m)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(B);let ne=parseInt(_),re=_&&_[0]+""=="0"?"0":" ";for(;Y.length<ne;)Y=p!==void 0?Y+re:re+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}static getBytes(r,o){return Q.encode(r,o)}static getCharCode(r,o=0){return r.charCodeAt(o)}static getCharAt(r){return String.fromCharCode(r)}}J.SHIFT_JIS=P.SJIS.getName(),J.GB2312="GB2312",J.ISO88591=P.ISO8859_1.getName(),J.EUC_JP="EUC_JP",J.UTF8=P.UTF8.getName(),J.PLATFORM_DEFAULT_ENCODING=J.UTF8,J.ASSUME_SHIFT_JIS=!1;class X{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=J.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,o,l){for(let h=o;o<o+l;h++)this.append(r[h]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+1)}substring(r,o){return this.value.substring(r,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+o.length)}}class Ve{constructor(r,o,l,h){if(this.width=r,this.height=o,this.rowSize=l,this.bits=h,o==null&&(o=r),this.height=o,r<1||o<1)throw new R("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const o=r.length,l=r[0].length,h=new Ve(l,o);for(let d=0;d<o;d++){const m=r[d];for(let p=0;p<l;p++)m[p]&&h.set(p,d)}return h}static parseFromString(r,o,l){if(r===null)throw new R("stringRepresentation cannot be null");const h=new Array(r.length);let d=0,m=0,p=-1,_=0,T=0;for(;T<r.length;)if(r.charAt(T)===`
`||r.charAt(T)==="\r"){if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new R("row lengths do not match");m=d,_++}T++}else if(r.substring(T,T+o.length)===o)T+=o.length,h[d]=!0,d++;else if(r.substring(T,T+l.length)===l)T+=l.length,h[d]=!1,d++;else throw new R("illegal character encountered: "+r.substring(T));if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new R("row lengths do not match");_++}const N=new Ve(p,_);for(let L=0;L<d;L++)h[L]&&N.set(Math.floor(L%p),Math.floor(L/p));return N}get(r,o){const l=o*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new R("input matrix dimensions do not match");const o=new ve(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let d=0,m=this.height;d<m;d++){const p=d*l,_=r.getRow(d,o).getBitArray();for(let T=0;T<l;T++)h[p+T]^=_[T]}}clear(){const r=this.bits,o=r.length;for(let l=0;l<o;l++)r[l]=0}setRegion(r,o,l,h){if(o<0||r<0)throw new R("Left and top must be nonnegative");if(h<1||l<1)throw new R("Height and width must be at least 1");const d=r+l,m=o+h;if(m>this.height||d>this.width)throw new R("The region must fit inside the matrix");const p=this.rowSize,_=this.bits;for(let T=o;T<m;T++){const N=T*p;for(let L=r;L<d;L++)_[N+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(r,o){o==null||o.getSize()<this.width?o=new ve(this.width):o.clear();const l=this.rowSize,h=this.bits,d=r*l;for(let m=0;m<l;m++)o.setBulk(m*32,h[d+m]);return o}setRow(r,o){ee.arraycopy(o.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),o=this.getHeight();let l=new ve(r),h=new ve(r);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),h=this.getRow(o-1-d,h),l.reverse(),h.reverse(),this.setRow(d,h),this.setRow(o-1-d,l)}getEnclosingRectangle(){const r=this.width,o=this.height,l=this.rowSize,h=this.bits;let d=r,m=o,p=-1,_=-1;for(let T=0;T<o;T++)for(let N=0;N<l;N++){const L=h[T*l+N];if(L!==0){if(T<m&&(m=T),T>_&&(_=T),N*32<d){let B=0;for(;!(L<<31-B&4294967295);)B++;N*32+B<d&&(d=N*32+B)}if(N*32+31>p){let B=31;for(;!(L>>>B);)B--;N*32+B>p&&(p=N*32+B)}}}return p<d||_<m?null:Int32Array.from([d,m,p-d+1,_-m+1])}getTopLeftOnBit(){const r=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const h=l/r;let d=l%r*32;const m=o[l];let p=0;for(;!(m<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,h])}getBottomRightOnBit(){const r=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/r);let d=Math.floor(l%r)*32;const m=o[l];let p=31;for(;!(m>>>p);)p--;return d+=p,Int32Array.from([d,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Ve))return!1;const o=r;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&fe.equals(this.bits,o.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+fe.hashCode(this.bits),r}toString(r="X ",o="  ",l=`
`){return this.buildToString(r,o,l)}buildToString(r,o,l){let h=new X;for(let d=0,m=this.height;d<m;d++){for(let p=0,_=this.width;p<_;p++)h.append(this.get(p,d)?r:o);h.append(l)}return h.toString()}clone(){return new Ve(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends w{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class Se extends q{constructor(r){super(r),this.luminances=Se.EMPTY,this.buckets=new Int32Array(Se.LUMINANCE_BUCKETS)}getBlackRow(r,o){const l=this.getLuminanceSource(),h=l.getWidth();o==null||o.getSize()<h?o=new ve(h):o.clear(),this.initArrays(h);const d=l.getRow(r,this.luminances),m=this.buckets;for(let _=0;_<h;_++)m[(d[_]&255)>>Se.LUMINANCE_SHIFT]++;const p=Se.estimateBlackPoint(m);if(h<3)for(let _=0;_<h;_++)(d[_]&255)<p&&o.set(_);else{let _=d[0]&255,T=d[1]&255;for(let N=1;N<h-1;N++){const L=d[N+1]&255;(T*4-_-L)/2<p&&o.set(N),_=T,T=L}}return o}getBlackMatrix(){const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight(),h=new Ve(o,l);this.initArrays(o);const d=this.buckets;for(let _=1;_<5;_++){const T=Math.floor(l*_/5),N=r.getRow(T,this.luminances),L=Math.floor(o*4/5);for(let B=Math.floor(o/5);B<L;B++){const Y=N[B]&255;d[Y>>Se.LUMINANCE_SHIFT]++}}const m=Se.estimateBlackPoint(d),p=r.getMatrix();for(let _=0;_<l;_++){const T=_*o;for(let N=0;N<o;N++)(p[T+N]&255)<m&&h.set(N,_)}return h}createBinarizer(r){return new Se(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const o=this.buckets;for(let l=0;l<Se.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(r){const o=r.length;let l=0,h=0,d=0;for(let N=0;N<o;N++)r[N]>d&&(h=N,d=r[N]),r[N]>l&&(l=r[N]);let m=0,p=0;for(let N=0;N<o;N++){const L=N-h,B=r[N]*L*L;B>p&&(m=N,p=B)}if(h>m){const N=h;h=m,m=N}if(m-h<=o/16)throw new ae;let _=m-1,T=-1;for(let N=m-1;N>h;N--){const L=N-h,B=L*L*(m-N)*(l-r[N]);B>T&&(_=N,T=B)}return _<<Se.LUMINANCE_SHIFT}}Se.LUMINANCE_BITS=5,Se.LUMINANCE_SHIFT=8-Se.LUMINANCE_BITS,Se.LUMINANCE_BUCKETS=1<<Se.LUMINANCE_BITS,Se.EMPTY=Uint8ClampedArray.from([0]);class Ae extends Se{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight();if(o>=Ae.MINIMUM_DIMENSION&&l>=Ae.MINIMUM_DIMENSION){const h=r.getMatrix();let d=o>>Ae.BLOCK_SIZE_POWER;o&Ae.BLOCK_SIZE_MASK&&d++;let m=l>>Ae.BLOCK_SIZE_POWER;l&Ae.BLOCK_SIZE_MASK&&m++;const p=Ae.calculateBlackPoints(h,d,m,o,l),_=new Ve(o,l);Ae.calculateThresholdForBlock(h,d,m,o,l,p,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Ae(r)}static calculateThresholdForBlock(r,o,l,h,d,m,p){const _=d-Ae.BLOCK_SIZE,T=h-Ae.BLOCK_SIZE;for(let N=0;N<l;N++){let L=N<<Ae.BLOCK_SIZE_POWER;L>_&&(L=_);const B=Ae.cap(N,2,l-3);for(let Y=0;Y<o;Y++){let ne=Y<<Ae.BLOCK_SIZE_POWER;ne>T&&(ne=T);const re=Ae.cap(Y,2,o-3);let he=0;for(let Ue=-2;Ue<=2;Ue++){const Fe=m[B+Ue];he+=Fe[re-2]+Fe[re-1]+Fe[re]+Fe[re+1]+Fe[re+2]}const we=he/25;Ae.thresholdBlock(r,ne,L,we,h,p)}}}static cap(r,o,l){return r<o?o:r>l?l:r}static thresholdBlock(r,o,l,h,d,m){for(let p=0,_=l*d+o;p<Ae.BLOCK_SIZE;p++,_+=d)for(let T=0;T<Ae.BLOCK_SIZE;T++)(r[_+T]&255)<=h&&m.set(o+T,l+p)}static calculateBlackPoints(r,o,l,h,d){const m=d-Ae.BLOCK_SIZE,p=h-Ae.BLOCK_SIZE,_=new Array(l);for(let T=0;T<l;T++){_[T]=new Int32Array(o);let N=T<<Ae.BLOCK_SIZE_POWER;N>m&&(N=m);for(let L=0;L<o;L++){let B=L<<Ae.BLOCK_SIZE_POWER;B>p&&(B=p);let Y=0,ne=255,re=0;for(let we=0,Ue=N*h+B;we<Ae.BLOCK_SIZE;we++,Ue+=h){for(let Fe=0;Fe<Ae.BLOCK_SIZE;Fe++){const Oe=r[Ue+Fe]&255;Y+=Oe,Oe<ne&&(ne=Oe),Oe>re&&(re=Oe)}if(re-ne>Ae.MIN_DYNAMIC_RANGE)for(we++,Ue+=h;we<Ae.BLOCK_SIZE;we++,Ue+=h)for(let Fe=0;Fe<Ae.BLOCK_SIZE;Fe++)Y+=r[Ue+Fe]&255}let he=Y>>Ae.BLOCK_SIZE_POWER*2;if(re-ne<=Ae.MIN_DYNAMIC_RANGE&&(he=ne/2,T>0&&L>0)){const we=(_[T-1][L]+2*_[T][L-1]+_[T-1][L-1])/4;ne<we&&(he=we)}_[T][L]=he}}return _}}Ae.BLOCK_SIZE_POWER=3,Ae.BLOCK_SIZE=1<<Ae.BLOCK_SIZE_POWER,Ae.BLOCK_SIZE_MASK=Ae.BLOCK_SIZE-1,Ae.MINIMUM_DIMENSION=Ae.BLOCK_SIZE*5,Ae.MIN_DYNAMIC_RANGE=24;class Xe{constructor(r,o){this.width=r,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,o,l,h){throw new z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new z("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let o=new X;for(let l=0;l<this.height;l++){const h=this.getRow(l,r);for(let d=0;d<this.width;d++){const m=h[d]&255;let p;m<64?p="#":m<128?p="+":m<192?p=".":p=" ",o.append(p)}o.append(`
`)}return o.toString()}}class it extends Xe{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,o){const l=this.delegate.getRow(r,o),h=this.getWidth();for(let d=0;d<h;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let h=0;h<o;h++)l[h]=255-(r[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,o,l,h){return new it(this.delegate.crop(r,o,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new it(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new it(this.delegate.rotateCounterClockwise45())}}class te extends Xe{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=te.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const o=r.getContext("2d").getImageData(0,0,r.width,r.height);return te.toGrayscaleBuffer(o.data,r.width,r.height)}static toGrayscaleBuffer(r,o,l){const h=new Uint8ClampedArray(o*l);for(let d=0,m=0,p=r.length;d<p;d+=4,m++){let _;if(r[d+3]===0)_=255;else{const N=r[d],L=r[d+1],B=r[d+2];_=306*N+601*L+117*B+512>>10}h[m]=_}return h}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth(),h=r*l;return o===null?o=this.buffer.slice(h,h+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(h,h+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,o,l,h){return super.crop(r,o,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const o=this.getTempCanvasElement(),l=o.getContext("2d"),h=r*te.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(h))*d+Math.abs(Math.sin(h))*m),_=Math.ceil(Math.abs(Math.sin(h))*d+Math.abs(Math.cos(h))*m);return o.width=p,o.height=_,l.translate(p/2,_/2),l.rotate(h),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=te.makeBufferFromCanvasImageData(o),this}invert(){return new it(this)}}te.DEGREE_TO_RADIANS=Math.PI/180;class Re{constructor(r,o,l){this.deviceId=r,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Be=(globalThis||Fh||self||window||void 0)&&(globalThis||Fh||self||window||void 0).__awaiter||function(O,r,o,l){function h(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function p(N){try{T(l.next(N))}catch(L){m(L)}}function _(N){try{T(l.throw(N))}catch(L){m(L)}}function T(N){N.done?d(N.value):h(N.value).then(p,_)}T((l=l.apply(O,r||[])).next())})};class Ge{constructor(r,o=500,l){this.reader=r,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Be(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of r){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,p=l.groupId,_={deviceId:d,label:m,kind:h,groupId:p};o.push(_)}return o})}getVideoInputDevices(){return Be(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new Re(o.deviceId,o.label))})}findDeviceById(r){return Be(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,o){return Be(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,o)})}decodeOnceFromVideoDevice(r,o){return Be(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,o)})}decodeOnceFromConstraints(r,o){return Be(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(r,o){return Be(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,o,l){return Be(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,o,l)})}decodeFromVideoDevice(r,o,l){return Be(this,void 0,void 0,function*(){let h;r?h={deviceId:{exact:r}}:h={facingMode:"environment"};const d={video:h};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(r,o,l){return Be(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(h,o,l)})}decodeFromStream(r,o,l){return Be(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(r,o);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,o){return Be(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((o,l)=>this.playVideoOnLoad(r,()=>o()))}playVideoOnLoad(r,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",o),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Be(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,o){const l=document.getElementById(r);if(!l)throw new S(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new S(`element with id '${r}' must be an ${o} element`);return l}decodeFromImage(r,o){if(!r&&!o)throw new S("either imageElement with a src set or an url must be provided");return o&&!r?this.decodeFromImageUrl(o):this.decodeFromImageElement(r)}decodeFromVideo(r,o){if(!r&&!o)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,o,l){if(r===void 0&&o===void 0)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const o=this.prepareImageElement(r);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(r){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(r,o){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const o=this.prepareVideoElement(r);return this.videoElement=o,o}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=r,l}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=r,l}decodeFromVideoUrlContinuously(r,o){if(!r)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,o);return l.src=r,h}_decodeOnLoadImage(r){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(o,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Be(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,o){return Be(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,o)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let o;return typeof r>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(o=r),o}prepareVideoElement(r){let o;return!r&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(o=r),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(r,o=!0,l=!0){this._stopAsyncDecode=!1;const h=(d,m)=>{if(this._stopAsyncDecode){m(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(r);d(p)}catch(p){const _=o&&p instanceof ae,N=(p instanceof U||p instanceof H)&&l;if(_||N)return setTimeout(h,this._timeBetweenDecodingAttempts,d,m);m(p)}};return new Promise((d,m)=>h(d,m))}decodeContinuously(r,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(r);o(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){o(null,h);const d=h instanceof U||h instanceof H,m=h instanceof ae;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const o=this.createBinaryBitmap(r);return this.decodeBitmap(o)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,o,l){o||(o={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(r,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const o=this.getCaptureCanvas(r),l=new te(o),h=new Ae(l);return new k(h)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const o=this.createCaptureCanvas(r);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,h;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,h=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,h=r.naturalHeight||r.height)),o.style.width=l+"px",o.style.height=h+"px",o.width=l,o.height=h,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,o){try{r.srcObject=o}catch{r.src=URL.createObjectURL(o)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class qe{constructor(r,o,l=o==null?0:8*o.length,h,d,m=ee.currentTimeMillis()){this.text=r,this.rawBytes=o,this.numBits=l,this.resultPoints=h,this.format=d,this.timestamp=m,this.text=r,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=h,this.format=d,this.resultMetadata=null,m==null?this.timestamp=ee.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,o)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const o=this.resultPoints;if(o===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(o.length+r.length);ee.arraycopy(o,0,l,0,o.length),ee.arraycopy(r,0,l,o.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var mt;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(mt||(mt={}));var Me=mt,rn;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(rn||(rn={}));var at=rn;class Gt{constructor(r,o,l,h,d=-1,m=-1){this.rawBytes=r,this.text=o,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Rt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}static addOrSubtract(r,o){return r^o}}class kt{constructor(r,o){if(o.length===0)throw new R;this.field=r;const l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),ee.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(r===1){l=0;for(let m=0,p=o.length;m!==p;m++){const _=o[m];l=Rt.addOrSubtract(l,_)}return l}l=o[0];const h=o.length,d=this.field;for(let m=1;m<h;m++)l=Rt.addOrSubtract(d.multiply(r,l),o[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let h=new Int32Array(l.length);const d=l.length-o.length;ee.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=Rt.addOrSubtract(o[m-d],l[m]);return new kt(this.field,h)}multiply(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1),p=this.field;for(let _=0;_<l;_++){const T=o[_];for(let N=0;N<d;N++)m[_+N]=Rt.addOrSubtract(m[_+N],p.multiply(T,h[N]))}return new kt(p,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const o=this.coefficients.length,l=this.field,h=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)h[m]=l.multiply(d[m],r);return new kt(l,h)}multiplyByMonomial(r,o){if(r<0)throw new R;if(o===0)return this.field.getZero();const l=this.coefficients,h=l.length,d=new Int32Array(h+r),m=this.field;for(let p=0;p<h;p++)d[p]=m.multiply(l[p],o);return new kt(m,d)}divide(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new R("Divide by 0");const o=this.field;let l=o.getZero(),h=this;const d=r.getCoefficient(r.getDegree()),m=o.inverse(d);for(;h.getDegree()>=r.getDegree()&&!h.isZero();){const p=h.getDegree()-r.getDegree(),_=o.multiply(h.getCoefficient(h.getDegree()),m),T=r.multiplyByMonomial(p,_),N=o.buildMonomial(p,_);l=l.addOrSubtract(N),h=h.addOrSubtract(T)}return[l,h]}toString(){let r="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),o===0||l!==1){const h=this.field.log(l);h===0?r+="1":h===1?r+="a":(r+="a^",r+=h)}o!==0&&(o===1?r+="x":(r+="x^",r+=o))}}return r}}class $n extends w{}$n.kind="ArithmeticException";class pt extends Rt{constructor(r,o,l){super(),this.primitive=r,this.size=o,this.generatorBase=l;const h=new Int32Array(o);let d=1;for(let p=0;p<o;p++)h[p]=d,d*=2,d>=o&&(d^=r,d&=o-1);this.expTable=h;const m=new Int32Array(o);for(let p=0;p<o-1;p++)m[h[p]]=p;this.logTable=m,this.zero=new kt(this,Int32Array.from([0])),this.one=new kt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new R;if(o===0)return this.zero;const l=new Int32Array(r+1);return l[0]=o,new kt(this,l)}inverse(r){if(r===0)throw new $n;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ie.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}pt.AZTEC_DATA_12=new pt(4201,4096,1),pt.AZTEC_DATA_10=new pt(1033,1024,1),pt.AZTEC_DATA_6=new pt(67,64,1),pt.AZTEC_PARAM=new pt(19,16,1),pt.QR_CODE_FIELD_256=new pt(285,256,0),pt.DATA_MATRIX_FIELD_256=new pt(301,256,1),pt.AZTEC_DATA_8=pt.DATA_MATRIX_FIELD_256,pt.MAXICODE_FIELD_64=pt.AZTEC_DATA_6;class ze extends w{}ze.kind="ReedSolomonException";class $e extends w{}$e.kind="IllegalStateException";class ht{constructor(r){this.field=r}decode(r,o){const l=this.field,h=new kt(l,r),d=new Int32Array(o);let m=!0;for(let Y=0;Y<o;Y++){const ne=h.evaluateAt(l.exp(Y+l.getGeneratorBase()));d[d.length-1-Y]=ne,ne!==0&&(m=!1)}if(m)return;const p=new kt(l,d),_=this.runEuclideanAlgorithm(l.buildMonomial(o,1),p,o),T=_[0],N=_[1],L=this.findErrorLocations(T),B=this.findErrorMagnitudes(N,L);for(let Y=0;Y<L.length;Y++){const ne=r.length-1-l.log(L[Y]);if(ne<0)throw new ze("Bad error location");r[ne]=pt.addOrSubtract(r[ne],B[Y])}}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){const Y=r;r=o,o=Y}const h=this.field;let d=r,m=o,p=h.getZero(),_=h.getOne();for(;m.getDegree()>=(l/2|0);){let Y=d,ne=p;if(d=m,p=_,d.isZero())throw new ze("r_{i-1} was zero");m=Y;let re=h.getZero();const he=d.getCoefficient(d.getDegree()),we=h.inverse(he);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const Ue=m.getDegree()-d.getDegree(),Fe=h.multiply(m.getCoefficient(m.getDegree()),we);re=re.addOrSubtract(h.buildMonomial(Ue,Fe)),m=m.addOrSubtract(d.multiplyByMonomial(Ue,Fe))}if(_=re.multiply(p).addOrSubtract(ne),m.getDegree()>=d.getDegree())throw new $e("Division algorithm failed to reduce polynomial?")}const T=_.getCoefficient(0);if(T===0)throw new ze("sigmaTilde(0) was zero");const N=h.inverse(T),L=_.multiplyScalar(N),B=m.multiplyScalar(N);return[L,B]}findErrorLocations(r){const o=r.getDegree();if(o===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(o);let h=0;const d=this.field;for(let m=1;m<d.getSize()&&h<o;m++)r.evaluateAt(m)===0&&(l[h]=d.inverse(m),h++);if(h!==o)throw new ze("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,o){const l=o.length,h=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const p=d.inverse(o[m]);let _=1;for(let T=0;T<l;T++)if(m!==T){const N=d.multiply(o[T],p),L=N&1?N&-2:N|1;_=d.multiply(_,L)}h[m]=d.multiply(r.evaluateAt(p),d.inverse(_)),d.getGeneratorBase()!==0&&(h[m]=d.multiply(h[m],p))}return h}}var Ce;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(Ce||(Ce={}));class De{decode(r){this.ddata=r;let o=r.getBits(),l=this.extractBits(o),h=this.correctBits(l),d=De.convertBoolArrayToByteArray(h),m=De.getEncodedData(h),p=new Gt(d,m,null,null);return p.setNumBits(h.length),p}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let o=r.length,l=Ce.UPPER,h=Ce.UPPER,d="",m=0;for(;m<o;)if(h===Ce.BINARY){if(o-m<5)break;let p=De.readCode(r,m,5);if(m+=5,p===0){if(o-m<11)break;p=De.readCode(r,m,11)+31,m+=11}for(let _=0;_<p;_++){if(o-m<8){m=o;break}const T=De.readCode(r,m,8);d+=J.castAsNonUtf8Char(T),m+=8}h=l}else{let p=h===Ce.DIGIT?4:5;if(o-m<p)break;let _=De.readCode(r,m,p);m+=p;let T=De.getCharacter(h,_);T.startsWith("CTRL_")?(l=h,h=De.getTable(T.charAt(5)),T.charAt(6)==="L"&&(l=h)):(d+=T,h=l)}return d}static getTable(r){switch(r){case"L":return Ce.LOWER;case"P":return Ce.PUNCT;case"M":return Ce.MIXED;case"D":return Ce.DIGIT;case"B":return Ce.BINARY;case"U":default:return Ce.UPPER}}static getCharacter(r,o){switch(r){case Ce.UPPER:return De.UPPER_TABLE[o];case Ce.LOWER:return De.LOWER_TABLE[o];case Ce.MIXED:return De.MIXED_TABLE[o];case Ce.PUNCT:return De.PUNCT_TABLE[o];case Ce.DIGIT:return De.DIGIT_TABLE[o];default:throw new $e("Bad table")}}correctBits(r){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=pt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=pt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=pt.AZTEC_DATA_10):(l=12,o=pt.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),d=r.length/l;if(d<h)throw new H;let m=r.length%l,p=new Int32Array(d);for(let B=0;B<d;B++,m+=l)p[B]=De.readCode(r,m,l);try{new ht(o).decode(p,d-h)}catch(B){throw new H(B)}let _=(1<<l)-1,T=0;for(let B=0;B<h;B++){let Y=p[B];if(Y===0||Y===_)throw new H;(Y===1||Y===_-1)&&T++}let N=new Array(h*l-T),L=0;for(let B=0;B<h;B++){let Y=p[B];if(Y===1||Y===_-1)N.fill(Y>1,L,L+l-1),L+=l-1;else for(let ne=l-1;ne>=0;--ne)N[L++]=(Y&1<<ne)!==0}return N}extractBits(r){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(o?11:14)+l*4,d=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let p=0;p<d.length;p++)d[p]=p;else{let p=h+1+2*ie.truncDivision(ie.truncDivision(h,2)-1,15),_=h/2,T=ie.truncDivision(p,2);for(let N=0;N<_;N++){let L=N+ie.truncDivision(N,15);d[_-N-1]=T-L-1,d[_+N]=T+L+1}}for(let p=0,_=0;p<l;p++){let T=(l-p)*4+(o?9:12),N=p*2,L=h-1-N;for(let B=0;B<T;B++){let Y=B*2;for(let ne=0;ne<2;ne++)m[_+Y+ne]=r.get(d[N+ne],d[N+B]),m[_+2*T+Y+ne]=r.get(d[N+B],d[L-ne]),m[_+4*T+Y+ne]=r.get(d[L-ne],d[L-B]),m[_+6*T+Y+ne]=r.get(d[L-B],d[N+ne])}_+=T*8}return m}static readCode(r,o,l){let h=0;for(let d=o;d<o+l;d++)h<<=1,r[d]&&(h|=1);return h}static readByte(r,o){let l=r.length-o;return l>=8?De.readCode(r,o,8):De.readCode(r,o,l)<<8-l}static convertBoolArrayToByteArray(r){let o=new Uint8Array((r.length+7)/8);for(let l=0;l<o.length;l++)o[l]=De.readByte(r,8*l);return o}totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}De.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],De.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],De.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],De.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],De.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ye{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,o,l,h){const d=r-l,m=o-h;return Math.sqrt(d*d+m*m)}static sum(r){let o=0;for(let l=0,h=r.length;l!==h;l++){const d=r[l];o+=d}return o}}class Je{static floatToIntBits(r){return r}}Je.MAX_VALUE=Number.MAX_SAFE_INTEGER;class He{constructor(r,o){this.x=r,this.y=o}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof He){const o=r;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Je.floatToIntBits(this.x)+Je.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const o=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),h=this.distance(r[0],r[2]);let d,m,p;if(l>=o&&l>=h?(m=r[0],d=r[1],p=r[2]):h>=l&&h>=o?(m=r[1],d=r[0],p=r[2]):(m=r[2],d=r[0],p=r[1]),this.crossProductZ(d,m,p)<0){const _=d;d=p,p=_}r[0]=d,r[1]=m,r[2]=p}static distance(r,o){return Ye.distance(r.x,r.y,o.x,o.y)}static crossProductZ(r,o,l){const h=o.x,d=o.y;return(l.x-h)*(r.y-d)-(l.y-d)*(r.x-h)}}class Jn{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Ln extends Jn{constructor(r,o,l,h,d){super(r,o),this.compact=l,this.nbDatablocks=h,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ot{constructor(r,o,l,h){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),o==null&&(o=ot.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),h==null&&(h=r.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=h-d,this.downInit=h+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let r=this.leftInit,o=this.rightInit,l=this.upInit,h=this.downInit,d=!1,m=!0,p=!1,_=!1,T=!1,N=!1,L=!1;const B=this.width,Y=this.height;for(;m;){m=!1;let ne=!0;for(;(ne||!_)&&o<B;)ne=this.containsBlackPoint(l,h,o,!1),ne?(o++,m=!0,_=!0):_||o++;if(o>=B){d=!0;break}let re=!0;for(;(re||!T)&&h<Y;)re=this.containsBlackPoint(r,o,h,!0),re?(h++,m=!0,T=!0):T||h++;if(h>=Y){d=!0;break}let he=!0;for(;(he||!N)&&r>=0;)he=this.containsBlackPoint(l,h,r,!1),he?(r--,m=!0,N=!0):N||r--;if(r<0){d=!0;break}let we=!0;for(;(we||!L)&&l>=0;)we=this.containsBlackPoint(r,o,l,!0),we?(l--,m=!0,L=!0):L||l--;if(l<0){d=!0;break}m&&(p=!0)}if(!d&&p){const ne=o-r;let re=null;for(let Fe=1;re===null&&Fe<ne;Fe++)re=this.getBlackPointOnSegment(r,h-Fe,r+Fe,h);if(re==null)throw new ae;let he=null;for(let Fe=1;he===null&&Fe<ne;Fe++)he=this.getBlackPointOnSegment(r,l+Fe,r+Fe,l);if(he==null)throw new ae;let we=null;for(let Fe=1;we===null&&Fe<ne;Fe++)we=this.getBlackPointOnSegment(o,l+Fe,o-Fe,l);if(we==null)throw new ae;let Ue=null;for(let Fe=1;Ue===null&&Fe<ne;Fe++)Ue=this.getBlackPointOnSegment(o,h-Fe,o-Fe,h);if(Ue==null)throw new ae;return this.centerEdges(Ue,re,we,he)}else throw new ae}getBlackPointOnSegment(r,o,l,h){const d=Ye.round(Ye.distance(r,o,l,h)),m=(l-r)/d,p=(h-o)/d,_=this.image;for(let T=0;T<d;T++){const N=Ye.round(r+T*m),L=Ye.round(o+T*p);if(_.get(N,L))return new He(N,L)}return null}centerEdges(r,o,l,h){const d=r.getX(),m=r.getY(),p=o.getX(),_=o.getY(),T=l.getX(),N=l.getY(),L=h.getX(),B=h.getY(),Y=ot.CORR;return d<this.width/2?[new He(L-Y,B+Y),new He(p+Y,_+Y),new He(T-Y,N-Y),new He(d+Y,m-Y)]:[new He(L+Y,B+Y),new He(p+Y,_-Y),new He(T-Y,N+Y),new He(d-Y,m-Y)]}containsBlackPoint(r,o,l,h){const d=this.image;if(h){for(let m=r;m<=o;m++)if(d.get(m,l))return!0}else for(let m=r;m<=o;m++)if(d.get(l,m))return!0;return!1}}ot.INIT_SIZE=10,ot.CORR=1;class qn{static checkAndNudgePoints(r,o){const l=r.getWidth(),h=r.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const p=Math.floor(o[m]),_=Math.floor(o[m+1]);if(p<-1||p>l||_<-1||_>h)throw new ae;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),_===-1?(o[m+1]=0,d=!0):_===h&&(o[m+1]=h-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const p=Math.floor(o[m]),_=Math.floor(o[m+1]);if(p<-1||p>l||_<-1||_>h)throw new ae;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),_===-1?(o[m+1]=0,d=!0):_===h&&(o[m+1]=h-1,d=!0)}}}class Pt{constructor(r,o,l,h,d,m,p,_,T){this.a11=r,this.a21=o,this.a31=l,this.a12=h,this.a22=d,this.a32=m,this.a13=p,this.a23=_,this.a33=T}static quadrilateralToQuadrilateral(r,o,l,h,d,m,p,_,T,N,L,B,Y,ne,re,he){const we=Pt.quadrilateralToSquare(r,o,l,h,d,m,p,_);return Pt.squareToQuadrilateral(T,N,L,B,Y,ne,re,he).times(we)}transformPoints(r){const o=r.length,l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,_=this.a23,T=this.a31,N=this.a32,L=this.a33;for(let B=0;B<o;B+=2){const Y=r[B],ne=r[B+1],re=d*Y+_*ne+L;r[B]=(l*Y+m*ne+T)/re,r[B+1]=(h*Y+p*ne+N)/re}}transformPointsWithValues(r,o){const l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,_=this.a23,T=this.a31,N=this.a32,L=this.a33,B=r.length;for(let Y=0;Y<B;Y++){const ne=r[Y],re=o[Y],he=d*ne+_*re+L;r[Y]=(l*ne+m*re+T)/he,o[Y]=(h*ne+p*re+N)/he}}static squareToQuadrilateral(r,o,l,h,d,m,p,_){const T=r-l+d-p,N=o-h+m-_;if(T===0&&N===0)return new Pt(l-r,d-l,r,h-o,m-h,o,0,0,1);{const L=l-d,B=p-d,Y=h-m,ne=_-m,re=L*ne-B*Y,he=(T*ne-B*N)/re,we=(L*N-T*Y)/re;return new Pt(l-r+he*l,p-r+we*p,r,h-o+he*h,_-o+we*_,o,he,we,1)}}static quadrilateralToSquare(r,o,l,h,d,m,p,_){return Pt.squareToQuadrilateral(r,o,l,h,d,m,p,_).buildAdjoint()}buildAdjoint(){return new Pt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Pt(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class sn extends qn{sampleGrid(r,o,l,h,d,m,p,_,T,N,L,B,Y,ne,re,he,we,Ue,Fe){const Oe=Pt.quadrilateralToQuadrilateral(h,d,m,p,_,T,N,L,B,Y,ne,re,he,we,Ue,Fe);return this.sampleGridWithTransform(r,o,l,Oe)}sampleGridWithTransform(r,o,l,h){if(o<=0||l<=0)throw new ae;const d=new Ve(o,l),m=new Float32Array(2*o);for(let p=0;p<l;p++){const _=m.length,T=p+.5;for(let N=0;N<_;N+=2)m[N]=N/2+.5,m[N+1]=T;h.transformPoints(m),qn.checkAndNudgePoints(r,m);try{for(let N=0;N<_;N+=2)r.get(Math.floor(m[N]),Math.floor(m[N+1]))&&d.set(N/2,p)}catch{throw new ae}}return d}}class gn{static setGridSampler(r){gn.gridSampler=r}static getInstance(){return gn.gridSampler}}gn.gridSampler=new sn;class Yn{constructor(r,o){this.x=r,this.y=o}toResultPoint(){return new He(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Pi{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Ln(h,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ae;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],o),this.sampleLine(r[1],r[2],o),this.sampleLine(r[2],r[3],o),this.sampleLine(r[3],r[0],o)]);this.shift=this.getRotation(l,o);let h=0;for(let m=0;m<4;m++){let p=l[(this.shift+m)%4];this.compact?(h<<=7,h+=p>>1&127):(h<<=10,h+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,o){let l=0;r.forEach((h,d,m)=>{let p=(h>>o-2<<1)+(h&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(ie.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new ae}getCorrectedParameterData(r,o){let l,h;o?(l=7,h=2):(l=10,h=4);let d=l-h,m=new Int32Array(l);for(let _=l-1;_>=0;--_)m[_]=r&15,r>>=4;try{new ht(pt.AZTEC_PARAM).decode(m,d)}catch{throw new ae}let p=0;for(let _=0;_<h;_++)p=(p<<4)+m[_];return p}getBullsEyeCorners(r){let o=r,l=r,h=r,d=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(o,m,1,-1),B=this.getFirstDifferent(l,m,1,1),Y=this.getFirstDifferent(h,m,-1,1),ne=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(ne,L)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle(L,B,Y,ne))break}o=L,l=B,h=Y,d=ne,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let p=new He(o.getX()+.5,o.getY()-.5),_=new He(l.getX()+.5,l.getY()+.5),T=new He(h.getX()-.5,h.getY()+.5),N=new He(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,_,T,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,o,l,h;try{let p=new ot(this.image).detect();r=p[0],o=p[1],l=p[2],h=p[3]}catch{let _=this.image.getWidth()/2,T=this.image.getHeight()/2;r=this.getFirstDifferent(new Yn(_+7,T-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Yn(_+7,T+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Yn(_-7,T+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Yn(_-7,T-7),!1,-1,-1).toResultPoint()}let d=Ye.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=Ye.round((r.getY()+h.getY()+o.getY()+l.getY())/4);try{let p=new ot(this.image,15,d,m).detect();r=p[0],o=p[1],l=p[2],h=p[3]}catch{r=this.getFirstDifferent(new Yn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Yn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Yn(d-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Yn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=Ye.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=Ye.round((r.getY()+h.getY()+o.getY()+l.getY())/4),new Yn(d,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,o,l,h,d){let m=gn.getInstance(),p=this.getDimension(),_=p/2-this.nbCenterLayers,T=p/2+this.nbCenterLayers;return m.sampleGrid(r,p,p,_,_,T,_,T,T,_,T,o.getX(),o.getY(),l.getX(),l.getY(),h.getX(),h.getY(),d.getX(),d.getY())}sampleLine(r,o,l){let h=0,d=this.distanceResultPoint(r,o),m=d/l,p=r.getX(),_=r.getY(),T=m*(o.getX()-r.getX())/d,N=m*(o.getY()-r.getY())/d;for(let L=0;L<l;L++)this.image.get(Ye.round(p+L*T),Ye.round(_+L*N))&&(h|=1<<l-L-1);return h}isWhiteOrBlackRectangle(r,o,l,h){let d=3;r=new Yn(r.getX()-d,r.getY()+d),o=new Yn(o.getX()-d,o.getY()-d),l=new Yn(l.getX()+d,l.getY()-d),h=new Yn(h.getX()+d,h.getY()+d);let m=this.getColor(h,r);if(m===0)return!1;let p=this.getColor(r,o);return p!==m||(p=this.getColor(o,l),p!==m)?!1:(p=this.getColor(l,h),p===m)}getColor(r,o){let l=this.distancePoint(r,o),h=(o.getX()-r.getX())/l,d=(o.getY()-r.getY())/l,m=0,p=r.getX(),_=r.getY(),T=this.image.get(r.getX(),r.getY()),N=Math.ceil(l);for(let B=0;B<N;B++)p+=h,_+=d,this.image.get(Ye.round(p),Ye.round(_))!==T&&m++;let L=m/l;return L>.1&&L<.9?0:L<=.1===T?1:-1}getFirstDifferent(r,o,l,h){let d=r.getX()+l,m=r.getY()+h;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=h;for(d-=l,m-=h;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=h;return m-=h,new Yn(d,m)}expandSquare(r,o,l){let h=l/(2*o),d=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),p=(r[0].getX()+r[2].getX())/2,_=(r[0].getY()+r[2].getY())/2,T=new He(p+h*d,_+h*m),N=new He(p-h*d,_-h*m);d=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),p=(r[1].getX()+r[3].getX())/2,_=(r[1].getY()+r[3].getY())/2;let L=new He(p+h*d,_+h*m),B=new He(p-h*d,_-h*m);return[T,L,N,B]}isValid(r,o){return r>=0&&r<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(r){let o=Ye.round(r.getX()),l=Ye.round(r.getY());return this.isValid(o,l)}distancePoint(r,o){return Ye.distance(r.getX(),r.getY(),o.getX(),o.getY())}distanceResultPoint(r,o){return Ye.distance(r.getX(),r.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ie.truncDivision(this.nbLayers-4,8)+1)+15}}class Bi{decode(r,o=null){let l=null,h=new Pi(r.getBlackMatrix()),d=null,m=null;try{let N=h.detectMirror(!1);d=N.getPoints(),this.reportFoundResultPoints(o,d),m=new De().decode(N)}catch(N){l=N}if(m==null)try{let N=h.detectMirror(!0);d=N.getPoints(),this.reportFoundResultPoints(o,d),m=new De().decode(N)}catch(N){throw l??N}let p=new qe(m.getText(),m.getRawBytes(),m.getNumBits(),d,Me.AZTEC,ee.currentTimeMillis()),_=m.getByteSegments();_!=null&&p.putMetadata(at.BYTE_SEGMENTS,_);let T=m.getECLevel();return T!=null&&p.putMetadata(at.ERROR_CORRECTION_LEVEL,T),p}reportFoundResultPoints(r,o){if(r!=null){let l=r.get(Pe.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((h,d,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class ji extends Ge{constructor(r=500){super(new Bi,r)}}class hn{decode(r,o){try{return this.doDecode(r,o)}catch{if(o&&o.get(Pe.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),m=this.doDecode(d,o),p=m.getResultMetadata();let _=270;p!==null&&p.get(at.ORIENTATION)===!0&&(_=_+p.get(at.ORIENTATION)%360),m.putMetadata(at.ORIENTATION,_);const T=m.getResultPoints();if(T!==null){const N=d.getHeight();for(let L=0;L<T.length;L++)T[L]=new He(N-T[L].getY()-1,T[L].getX())}return m}else throw new ae}}reset(){}doDecode(r,o){const l=r.getWidth(),h=r.getHeight();let d=new ve(l);const m=o&&o.get(Pe.TRY_HARDER)===!0,p=Math.max(1,h>>(m?8:5));let _;m?_=h:_=15;const T=Math.trunc(h/2);for(let N=0;N<_;N++){const L=Math.trunc((N+1)/2),B=(N&1)===0,Y=T+p*(B?L:-L);if(Y<0||Y>=h)break;try{d=r.getBlackRow(Y,d)}catch{continue}for(let ne=0;ne<2;ne++){if(ne===1&&(d.reverse(),o&&o.get(Pe.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;o.forEach((he,we)=>re.set(we,he)),re.delete(Pe.NEED_RESULT_POINT_CALLBACK),o=re}try{const re=this.decodeRow(Y,d,o);if(ne===1){re.putMetadata(at.ORIENTATION,180);const he=re.getResultPoints();he!==null&&(he[0]=new He(l-he[0].getX()-1,he[0].getY()),he[1]=new He(l-he[1].getX()-1,he[1].getY()))}return re}catch{}}}throw new ae}static recordPattern(r,o,l){const h=l.length;for(let T=0;T<h;T++)l[T]=0;const d=r.getSize();if(o>=d)throw new ae;let m=!r.get(o),p=0,_=o;for(;_<d;){if(r.get(_)!==m)l[p]++;else{if(++p===h)break;l[p]=1,m=!m}_++}if(!(p===h||p===h-1&&_===d))throw new ae}static recordPatternInReverse(r,o,l){let h=l.length,d=r.get(o);for(;o>0&&h>=0;)r.get(--o)!==d&&(h--,d=!d);if(h>=0)throw new ae;hn.recordPattern(r,o+1,l)}static patternMatchVariance(r,o,l){const h=r.length;let d=0,m=0;for(let T=0;T<h;T++)d+=r[T],m+=o[T];if(d<m)return Number.POSITIVE_INFINITY;const p=d/m;l*=p;let _=0;for(let T=0;T<h;T++){const N=r[T],L=o[T]*p,B=N>L?N-L:L-N;if(B>l)return Number.POSITIVE_INFINITY;_+=B}return _/d}}class ke extends hn{static findStartPattern(r){const o=r.getSize(),l=r.getNextSet(0);let h=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,p=!1;const _=6;for(let T=l;T<o;T++)if(r.get(T)!==p)d[h]++;else{if(h===_-1){let N=ke.MAX_AVG_VARIANCE,L=-1;for(let B=ke.CODE_START_A;B<=ke.CODE_START_C;B++){const Y=hn.patternMatchVariance(d,ke.CODE_PATTERNS[B],ke.MAX_INDIVIDUAL_VARIANCE);Y<N&&(N=Y,L=B)}if(L>=0&&r.isRange(Math.max(0,m-(T-m)/2),m,!1))return Int32Array.from([m,T,L]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,p=!p}throw new ae}static decodeCode(r,o,l){hn.recordPattern(r,l,o);let h=ke.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<ke.CODE_PATTERNS.length;m++){const p=ke.CODE_PATTERNS[m],_=this.patternMatchVariance(o,p,ke.MAX_INDIVIDUAL_VARIANCE);_<h&&(h=_,d=m)}if(d>=0)return d;throw new ae}decodeRow(r,o,l){const h=l&&l.get(Pe.ASSUME_GS1)===!0,d=ke.findStartPattern(o),m=d[2];let p=0;const _=new Uint8Array(20);_[p++]=m;let T;switch(m){case ke.CODE_START_A:T=ke.CODE_CODE_A;break;case ke.CODE_START_B:T=ke.CODE_CODE_B;break;case ke.CODE_START_C:T=ke.CODE_CODE_C;break;default:throw new H}let N=!1,L=!1,B="",Y=d[0],ne=d[1];const re=Int32Array.from([0,0,0,0,0,0]);let he=0,we=0,Ue=m,Fe=0,Oe=!0,Bt=!1,xt=!1;for(;!N;){const aa=L;switch(L=!1,he=we,we=ke.decodeCode(o,re,ne),_[p++]=we,we!==ke.CODE_STOP&&(Oe=!0),we!==ke.CODE_STOP&&(Fe++,Ue+=Fe*we),Y=ne,ne+=re.reduce((Gu,qi)=>Gu+qi,0),we){case ke.CODE_START_A:case ke.CODE_START_B:case ke.CODE_START_C:throw new H}switch(T){case ke.CODE_CODE_A:if(we<64)xt===Bt?B+=String.fromCharCode(32+we):B+=String.fromCharCode(32+we+128),xt=!1;else if(we<96)xt===Bt?B+=String.fromCharCode(we-64):B+=String.fromCharCode(we+64),xt=!1;else switch(we!==ke.CODE_STOP&&(Oe=!1),we){case ke.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case ke.CODE_FNC_2:case ke.CODE_FNC_3:break;case ke.CODE_FNC_4_A:!Bt&&xt?(Bt=!0,xt=!1):Bt&&xt?(Bt=!1,xt=!1):xt=!0;break;case ke.CODE_SHIFT:L=!0,T=ke.CODE_CODE_B;break;case ke.CODE_CODE_B:T=ke.CODE_CODE_B;break;case ke.CODE_CODE_C:T=ke.CODE_CODE_C;break;case ke.CODE_STOP:N=!0;break}break;case ke.CODE_CODE_B:if(we<96)xt===Bt?B+=String.fromCharCode(32+we):B+=String.fromCharCode(32+we+128),xt=!1;else switch(we!==ke.CODE_STOP&&(Oe=!1),we){case ke.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case ke.CODE_FNC_2:case ke.CODE_FNC_3:break;case ke.CODE_FNC_4_B:!Bt&&xt?(Bt=!0,xt=!1):Bt&&xt?(Bt=!1,xt=!1):xt=!0;break;case ke.CODE_SHIFT:L=!0,T=ke.CODE_CODE_A;break;case ke.CODE_CODE_A:T=ke.CODE_CODE_A;break;case ke.CODE_CODE_C:T=ke.CODE_CODE_C;break;case ke.CODE_STOP:N=!0;break}break;case ke.CODE_CODE_C:if(we<100)we<10&&(B+="0"),B+=we;else switch(we!==ke.CODE_STOP&&(Oe=!1),we){case ke.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case ke.CODE_CODE_A:T=ke.CODE_CODE_A;break;case ke.CODE_CODE_B:T=ke.CODE_CODE_B;break;case ke.CODE_STOP:N=!0;break}break}aa&&(T=T===ke.CODE_CODE_A?ke.CODE_CODE_B:ke.CODE_CODE_A)}const Yr=ne-Y;if(ne=o.getNextUnset(ne),!o.isRange(ne,Math.min(o.getSize(),ne+(ne-Y)/2),!1))throw new ae;if(Ue-=Fe*he,Ue%103!==he)throw new U;const Di=B.length;if(Di===0)throw new ae;Di>0&&Oe&&(T===ke.CODE_CODE_C?B=B.substring(0,Di-2):B=B.substring(0,Di-1));const Xr=(d[1]+d[0])/2,yn=Y+Yr/2,Ar=_.length,gi=new Uint8Array(Ar);for(let aa=0;aa<Ar;aa++)gi[aa]=_[aa];const sa=[new He(Xr,r),new He(yn,r)];return new qe(B,gi,0,sa,Me.CODE_128,new Date().getTime())}}ke.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ke.MAX_AVG_VARIANCE=.25,ke.MAX_INDIVIDUAL_VARIANCE=.7,ke.CODE_SHIFT=98,ke.CODE_CODE_C=99,ke.CODE_CODE_B=100,ke.CODE_CODE_A=101,ke.CODE_FNC_1=102,ke.CODE_FNC_2=97,ke.CODE_FNC_3=96,ke.CODE_FNC_4_A=101,ke.CODE_FNC_4_B=100,ke.CODE_START_A=103,ke.CODE_START_B=104,ke.CODE_START_C=105,ke.CODE_STOP=106;class Cn extends hn{constructor(r=!1,o=!1){super(),this.usingCheckDigit=r,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,o,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let d=Cn.findAsteriskPattern(o,h),m=o.getNextSet(d[1]),p=o.getSize(),_,T;do{Cn.recordPattern(o,m,h);let re=Cn.toNarrowWidePattern(h);if(re<0)throw new ae;_=Cn.patternToChar(re),this.decodeRowResult+=_,T=m;for(let he of h)m+=he;m=o.getNextSet(m)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let re of h)N+=re;let L=m-T-N;if(m!==p&&L*2<N)throw new ae;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,he=0;for(let we=0;we<re;we++)he+=Cn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(we));if(this.decodeRowResult.charAt(re)!==Cn.ALPHABET_STRING.charAt(he%43))throw new U;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new ae;let B;this.extendedMode?B=Cn.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let Y=(d[1]+d[0])/2,ne=T+N/2;return new qe(B,null,0,[new He(Y,r),new He(ne,r)],Me.CODE_39,new Date().getTime())}static findAsteriskPattern(r,o){let l=r.getSize(),h=r.getNextSet(0),d=0,m=h,p=!1,_=o.length;for(let T=h;T<l;T++)if(r.get(T)!==p)o[d]++;else{if(d===_-1){if(this.toNarrowWidePattern(o)===Cn.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((T-m)/2)),m,!1))return[m,T];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,p=!p}throw new ae}static toNarrowWidePattern(r){let o=r.length,l=0,h;do{let d=2147483647;for(let _ of r)_<d&&_>l&&(d=_);l=d,h=0;let m=0,p=0;for(let _=0;_<o;_++){let T=r[_];T>l&&(p|=1<<o-1-_,h++,m+=T)}if(h===3){for(let _=0;_<o&&h>0;_++){let T=r[_];if(T>l&&(h--,T*2>=m))return-1}return p}}while(h>3);return-1}static patternToChar(r){for(let o=0;o<Cn.CHARACTER_ENCODINGS.length;o++)if(Cn.CHARACTER_ENCODINGS[o]===r)return Cn.ALPHABET_STRING.charAt(o);if(r===Cn.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(r){let o=r.length,l="";for(let h=0;h<o;h++){let d=r.charAt(h);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=r.charAt(h+1),p="\0";switch(d){case"+":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)+32);else throw new H;break;case"$":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)-64);else throw new H;break;case"%":if(m>="A"&&m<="E")p=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")p=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")p=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")p="\0";else if(m==="V")p="@";else if(m==="W")p="`";else if(m==="X"||m==="Y"||m==="Z")p="";else throw new H;break;case"/":if(m>="A"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")p=":";else throw new H;break}l+=p,h++}else l+=d}return l}}Cn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Cn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Cn.ASTERISK_ENCODING=148;class Nt extends hn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,o,l){let h=this.decodeStart(o),d=this.decodeEnd(o),m=new X;Nt.decodeMiddle(o,h[1],d[0],m);let p=m.toString(),_=null;l!=null&&(_=l.get(Pe.ALLOWED_LENGTHS)),_==null&&(_=Nt.DEFAULT_ALLOWED_LENGTHS);let T=p.length,N=!1,L=0;for(let ne of _){if(T===ne){N=!0;break}ne>L&&(L=ne)}if(!N&&T>L&&(N=!0),!N)throw new H;const B=[new He(h[1],r),new He(d[0],r)];return new qe(p,null,0,B,Me.ITF,new Date().getTime())}static decodeMiddle(r,o,l,h){let d=new Int32Array(10),m=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),m.fill(0),p.fill(0);o<l;){hn.recordPattern(r,o,d);for(let T=0;T<5;T++){let N=2*T;m[T]=d[N],p[T]=d[N+1]}let _=Nt.decodeDigit(m);h.append(_.toString()),_=this.decodeDigit(p),h.append(_.toString()),d.forEach(function(T){o+=T})}}decodeStart(r){let o=Nt.skipWhiteSpace(r),l=Nt.findGuardPattern(r,o,Nt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let h=o-1;l>0&&h>=0&&!r.get(h);h--)l--;if(l!==0)throw new ae}static skipWhiteSpace(r){const o=r.getSize(),l=r.getNextSet(0);if(l===o)throw new ae;return l}decodeEnd(r){r.reverse();try{let o=Nt.skipWhiteSpace(r),l;try{l=Nt.findGuardPattern(r,o,Nt.END_PATTERN_REVERSED[0])}catch(d){d instanceof ae&&(l=Nt.findGuardPattern(r,o,Nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let h=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-h,l}finally{r.reverse()}}static findGuardPattern(r,o,l){let h=l.length,d=new Int32Array(h),m=r.getSize(),p=!1,_=0,T=o;d.fill(0);for(let N=o;N<m;N++)if(r.get(N)!==p)d[_]++;else{if(_===h-1){if(hn.patternMatchVariance(d,l,Nt.MAX_INDIVIDUAL_VARIANCE)<Nt.MAX_AVG_VARIANCE)return[T,N];T+=d[0]+d[1],ee.arraycopy(d,2,d,0,_-1),d[_-1]=0,d[_]=0,_--}else _++;d[_]=1,p=!p}throw new ae}static decodeDigit(r){let o=Nt.MAX_AVG_VARIANCE,l=-1,h=Nt.PATTERNS.length;for(let d=0;d<h;d++){let m=Nt.PATTERNS[d],p=hn.patternMatchVariance(r,m,Nt.MAX_INDIVIDUAL_VARIANCE);p<o?(o=p,l=d):p===o&&(l=-1)}if(l>=0)return l%10;throw new ae}}Nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Nt.MAX_AVG_VARIANCE=.38,Nt.MAX_INDIVIDUAL_VARIANCE=.5,Nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Nt.START_PATTERN=Int32Array.from([1,1,1,1]),Nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ot extends hn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let o=!1,l,h=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=Ot.findGuardPattern(r,h,!1,this.START_END_PATTERN,d);let m=l[0];h=l[1];let p=m-(h-m);p>=0&&(o=r.isRange(p,m,!1))}return l}static checkChecksum(r){return Ot.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return Ot.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}static decodeEnd(r,o){return Ot.findGuardPattern(r,o,!1,Ot.START_END_PATTERN,new Int32Array(Ot.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,o,l,h){return this.findGuardPattern(r,o,l,h,new Int32Array(h.length))}static findGuardPattern(r,o,l,h,d){let m=r.getSize();o=l?r.getNextUnset(o):r.getNextSet(o);let p=0,_=o,T=h.length,N=l;for(let L=o;L<m;L++)if(r.get(L)!==N)d[p]++;else{if(p===T-1){if(hn.patternMatchVariance(d,h,Ot.MAX_INDIVIDUAL_VARIANCE)<Ot.MAX_AVG_VARIANCE)return Int32Array.from([_,L]);_+=d[0]+d[1];let B=d.slice(2,d.length-1);for(let Y=0;Y<p-1;Y++)d[Y]=B[Y];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,N=!N}throw new ae}static decodeDigit(r,o,l,h){this.recordPattern(r,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,p=h.length;for(let _=0;_<p;_++){let T=h[_],N=hn.patternMatchVariance(o,T,Ot.MAX_INDIVIDUAL_VARIANCE);N<d&&(d=N,m=_)}if(m>=0)return m;throw new ae}}Ot.MAX_AVG_VARIANCE=.48,Ot.MAX_INDIVIDUAL_VARIANCE=.7,Ot.START_END_PATTERN=Int32Array.from([1,1,1]),Ot.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ot.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ot.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class lr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=lr.parseExtensionString(m),_=[new He((l[0]+l[1])/2,r),new He(d,r)],T=new qe(m,null,0,_,Me.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&T.putAllMetadata(p),T}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let T=0;T<5&&m<d;T++){let N=Ot.decodeDigit(r,h,m,Ot.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<4-T),T!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new ae;let _=this.determineCheckDigit(p);if(lr.extensionChecksum(l.toString())!==_)throw new ae;return m}static extensionChecksum(r){let o=r.length,l=0;for(let h=o-2;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;l*=3;for(let h=o-1;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let o=0;o<10;o++)if(r===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ae}static parseExtensionString(r){if(r.length!==5)return null;let o=lr.parseExtension5String(r);return o==null?null:new Map([[at.SUGGESTED_PRICE,o]])}static parseExtension5String(r){let o;switch(r.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(r.substring(1)),h=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+h+"."+m}}class yi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=yi.parseExtensionString(m),_=[new He((l[0]+l[1])/2,r),new He(d,r)],T=new qe(m,null,0,_,Me.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&T.putAllMetadata(p),T}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let _=0;_<2&&m<d;_++){let T=Ot.decodeDigit(r,h,m,Ot.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let N of h)m+=N;T>=10&&(p|=1<<1-_),_!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new ae;if(parseInt(l.toString())%4!==p)throw new ae;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[at.ISSUE_NUMBER,parseInt(r)]])}}class Vr{static decodeRow(r,o,l){let h=Ot.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new lr().decodeRow(r,o,h)}catch{return new yi().decodeRow(r,o,h)}}}Vr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Tt extends Ot{constructor(){super(),this.decodeRowStringBuffer="",Tt.L_AND_G_PATTERNS=Tt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let o=Tt.L_PATTERNS[r-10],l=new Int32Array(o.length);for(let h=0;h<o.length;h++)l[h]=o[o.length-h-1];Tt.L_AND_G_PATTERNS[r]=l}}decodeRow(r,o,l){let h=Tt.findStartGuardPattern(o),d=l==null?null:l.get(Pe.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Oe=new He((h[0]+h[1])/2,r);d.foundPossibleResultPoint(Oe)}let m=this.decodeMiddle(o,h,this.decodeRowStringBuffer),p=m.rowOffset,_=m.resultString;if(d!=null){const Oe=new He(p,r);d.foundPossibleResultPoint(Oe)}let T=this.decodeEnd(o,p);if(d!=null){const Oe=new He((T[0]+T[1])/2,r);d.foundPossibleResultPoint(Oe)}let N=T[1],L=N+(N-T[0]);if(L>=o.getSize()||!o.isRange(N,L,!1))throw new ae;let B=_.toString();if(B.length<8)throw new H;if(!Tt.checkChecksum(B))throw new U;let Y=(h[1]+h[0])/2,ne=(T[1]+T[0])/2,re=this.getBarcodeFormat(),he=[new He(Y,r),new He(ne,r)],we=new qe(B,null,0,he,re,new Date().getTime()),Ue=0;try{let Oe=Vr.decodeRow(r,o,T[1]);we.putMetadata(at.UPC_EAN_EXTENSION,Oe.getText()),we.putAllMetadata(Oe.getResultMetadata()),we.addResultPoints(Oe.getResultPoints()),Ue=Oe.getText().length}catch{}let Fe=l==null?null:l.get(Pe.ALLOWED_EAN_EXTENSIONS);if(Fe!=null){let Oe=!1;for(let Bt in Fe)if(Ue.toString()===Bt){Oe=!0;break}if(!Oe)throw new ae}return we}decodeEnd(r,o){return Tt.findGuardPattern(r,o,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Tt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return Tt.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}}class Xn extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let T=0;T<6&&m<d;T++){let N=Tt.decodeDigit(r,h,m,Tt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<5-T)}l=Xn.determineFirstDigit(l,p),m=Tt.findGuardPattern(r,m,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&m<d;T++){let N=Tt.decodeDigit(r,h,m,Tt.L_PATTERNS);l+=String.fromCharCode(48+N);for(let L of h)m+=L}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Me.EAN_13}static determineFirstDigit(r,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new ae}}Xn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ti extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1];for(let _=0;_<4&&m<d;_++){let T=Tt.decodeDigit(r,h,m,Tt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let N of h)m+=N}m=Tt.findGuardPattern(r,m,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&m<d;_++){let T=Tt.decodeDigit(r,h,m,Tt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let N of h)m+=N}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Me.EAN_8}}class Fr extends Tt{constructor(){super(...arguments),this.ean13Reader=new Xn}getBarcodeFormat(){return Me.UPC_A}decode(r,o){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,o,l))}decodeMiddle(r,o,l){return this.ean13Reader.decodeMiddle(r,o,l)}maybeReturnResult(r){let o=r.getText();if(o.charAt(0)==="0"){let l=new qe(o.substring(1),null,null,r.getResultPoints(),Me.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new ae}reset(){this.ean13Reader.reset()}}class er extends Tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters.map(T=>T);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const d=r.getSize();let m=o[1],p=0;for(let T=0;T<6&&m<d;T++){const N=er.decodeDigit(r,h,m,er.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<5-T)}let _=er.determineNumSysAndCheckDigit(l,p);return{rowOffset:m,resultString:_}}decodeEnd(r,o){return er.findGuardPatternWithoutCounters(r,o,!0,er.MIDDLE_END_PATTERN)}checkChecksum(r){return Tt.checkChecksum(er.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,o){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return d+r+m}throw ae.getNotFoundInstance()}getBarcodeFormat(){return Me.UPC_E}static convertUPCEtoUPCA(r){const o=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new X;l.append(r.charAt(0));let h=o[5];switch(h){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(h),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(h);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ts extends hn{constructor(r){super();let o=r==null?null:r.get(Pe.POSSIBLE_FORMATS),l=[];a(o)?(l.push(new Xn),l.push(new Fr),l.push(new ti),l.push(new er)):(o.indexOf(Me.EAN_13)>-1&&l.push(new Xn),o.indexOf(Me.UPC_A)>-1&&l.push(new Fr),o.indexOf(Me.EAN_8)>-1&&l.push(new ti),o.indexOf(Me.UPC_E)>-1&&l.push(new er)),this.readers=l}decodeRow(r,o,l){for(let h of this.readers)try{const d=h.decodeRow(r,o,l),m=d.getBarcodeFormat()===Me.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(Pe.POSSIBLE_FORMATS),_=p==null||p.includes(Me.UPC_A);if(m&&_){const T=d.getRawBytes(),N=new qe(d.getText().substring(1),T,T?T.length:null,d.getResultPoints(),Me.UPC_A);return N.putAllMetadata(d.getResultMetadata()),N}return d}catch{}throw new ae}reset(){for(let r of this.readers)r.reset()}}class Vn extends hn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,o){for(let l=0;l<o.length;l++)if(hn.patternMatchVariance(r,o[l],Vn.MAX_INDIVIDUAL_VARIANCE)<Vn.MAX_AVG_VARIANCE)return l;throw new ae}static count(r){return Ye.sum(new Int32Array(r))}static increment(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]>h&&(h=o[d],l=d);r[l]++}static decrement(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]<h&&(h=o[d],l=d);r[l]--}static isFinderPattern(r){let o=r[0]+r[1],l=o+r[2]+r[3],h=o/l;if(h>=Vn.MIN_FINDER_PATTERN_RATIO&&h<=Vn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let p of r)p>m&&(m=p),p<d&&(d=p);return m<10*d}return!1}}Vn.MAX_AVG_VARIANCE=.2,Vn.MAX_INDIVIDUAL_VARIANCE=.45,Vn.MIN_FINDER_PATTERN_RATIO=9.5/12,Vn.MAX_FINDER_PATTERN_RATIO=12.5/14;class zr{constructor(r,o){this.value=r,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof zr))return!1;const o=r;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ui{constructor(r,o,l,h,d){this.value=r,this.startEnd=o,this.value=r,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new He(l,d)),this.resultPoints.push(new He(h,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Ui))return!1;const o=r;return this.value===o.value}hashCode(){return this.value}}class en{constructor(){}static getRSSvalue(r,o,l){let h=0;for(let _ of r)h+=_;let d=0,m=0,p=r.length;for(let _=0;_<p-1;_++){let T;for(T=1,m|=1<<_;T<r[_];T++,m&=~(1<<_)){let N=en.combins(h-T-1,p-_-2);if(l&&m===0&&h-T-(p-_-1)>=p-_-1&&(N-=en.combins(h-T-(p-_),p-_-2)),p-_-1>1){let L=0;for(let B=h-T-(p-_-2);B>o;B--)L+=en.combins(h-T-B-1,p-_-3);N-=L*(p-1-_)}else h-T>o&&N--;d+=N}h-=T}return d}static combins(r,o){let l,h;r-o>o?(h=o,l=r-o):(h=r-o,l=o);let d=1,m=1;for(let p=r;p>l;p--)d*=p,m<=h&&(d/=m,m++);for(;m<=h;)d/=m,m++;return d}}class Pa{static buildBitArray(r){let o=r.length*2-1;r[r.length-1].getRightChar()==null&&(o-=1);let l=12*o,h=new ve(l),d=0,p=r[0].getRightChar().getValue();for(let _=11;_>=0;--_)p&1<<_&&h.set(d),d++;for(let _=1;_<r.length;++_){let T=r[_],N=T.getLeftChar().getValue();for(let L=11;L>=0;--L)N&1<<L&&h.set(d),d++;if(T.getRightChar()!=null){let L=T.getRightChar().getValue();for(let B=11;B>=0;--B)L&1<<B&&h.set(d),d++}}return h}}class Rr{constructor(r,o){o?this.decodedInformation=null:(this.finished=r,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wi{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class cr extends wi{constructor(r,o){super(r),this.value=o}getValue(){return this.value}isFNC1(){return this.value===cr.FNC1}}cr.FNC1="$";class Ei extends wi{constructor(r,o,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Qn extends wi{constructor(r,o,l){if(super(r),o<0||o>10||l<0||l>10)throw new H;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Qn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Qn.FNC1}isAnyFNC1(){return this.firstDigit===Qn.FNC1||this.secondDigit===Qn.FNC1}}Qn.FNC1=10;class Ze{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ae;let o=r.substring(0,2);for(let d of Ze.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Ze.VARIABLE_LENGTH?Ze.processVariableAI(2,d[2],r):Ze.processFixedAI(2,d[1],r);if(r.length<3)throw new ae;let l=r.substring(0,3);for(let d of Ze.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Ze.VARIABLE_LENGTH?Ze.processVariableAI(3,d[2],r):Ze.processFixedAI(3,d[1],r);for(let d of Ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Ze.VARIABLE_LENGTH?Ze.processVariableAI(4,d[2],r):Ze.processFixedAI(4,d[1],r);if(r.length<4)throw new ae;let h=r.substring(0,4);for(let d of Ze.FOUR_DIGIT_DATA_LENGTH)if(d[0]===h)return d[1]===Ze.VARIABLE_LENGTH?Ze.processVariableAI(4,d[2],r):Ze.processFixedAI(4,d[1],r);throw new ae}static processFixedAI(r,o,l){if(l.length<r)throw new ae;let h=l.substring(0,r);if(l.length<r+o)throw new ae;let d=l.substring(r,r+o),m=l.substring(r+o),p="("+h+")"+d,_=Ze.parseFieldsInGeneralPurpose(m);return _==null?p:p+_}static processVariableAI(r,o,l){let h=l.substring(0,r),d;l.length<r+o?d=l.length:d=r+o;let m=l.substring(r,d),p=l.substring(d),_="("+h+")"+m,T=Ze.parseFieldsInGeneralPurpose(p);return T==null?_:_+T}}Ze.VARIABLE_LENGTH=[],Ze.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ze.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ze.VARIABLE_LENGTH,20],["22",Ze.VARIABLE_LENGTH,29],["30",Ze.VARIABLE_LENGTH,8],["37",Ze.VARIABLE_LENGTH,8],["90",Ze.VARIABLE_LENGTH,30],["91",Ze.VARIABLE_LENGTH,30],["92",Ze.VARIABLE_LENGTH,30],["93",Ze.VARIABLE_LENGTH,30],["94",Ze.VARIABLE_LENGTH,30],["95",Ze.VARIABLE_LENGTH,30],["96",Ze.VARIABLE_LENGTH,30],["97",Ze.VARIABLE_LENGTH,3],["98",Ze.VARIABLE_LENGTH,30],["99",Ze.VARIABLE_LENGTH,30]],Ze.THREE_DIGIT_DATA_LENGTH=[["240",Ze.VARIABLE_LENGTH,30],["241",Ze.VARIABLE_LENGTH,30],["242",Ze.VARIABLE_LENGTH,6],["250",Ze.VARIABLE_LENGTH,30],["251",Ze.VARIABLE_LENGTH,30],["253",Ze.VARIABLE_LENGTH,17],["254",Ze.VARIABLE_LENGTH,20],["400",Ze.VARIABLE_LENGTH,30],["401",Ze.VARIABLE_LENGTH,30],["402",17],["403",Ze.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ze.VARIABLE_LENGTH,20],["421",Ze.VARIABLE_LENGTH,15],["422",3],["423",Ze.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ze.VARIABLE_LENGTH,15],["391",Ze.VARIABLE_LENGTH,18],["392",Ze.VARIABLE_LENGTH,15],["393",Ze.VARIABLE_LENGTH,18],["703",Ze.VARIABLE_LENGTH,30]],Ze.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ze.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ze.VARIABLE_LENGTH,20],["8003",Ze.VARIABLE_LENGTH,30],["8004",Ze.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ze.VARIABLE_LENGTH,30],["8008",Ze.VARIABLE_LENGTH,12],["8018",18],["8020",Ze.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ze.VARIABLE_LENGTH,70],["8200",Ze.VARIABLE_LENGTH,70]];class En{constructor(r){this.buffer=new X,this.information=r}decodeAllCodes(r,o){let l=o,h=null;do{let d=this.decodeGeneralPurposeField(l,h),m=Ze.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&r.append(m),d.isRemaining()?h=""+d.getRemainingValue():h=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let o=r;o<r+3;++o)if(this.information.get(o))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Qn(this.information.getSize(),Qn.FNC1,Qn.FNC1):new Qn(this.information.getSize(),d-1,Qn.FNC1)}let o=this.extractNumericValueFromBitArray(r,7),l=(o-8)/11,h=(o-8)%11;return new Qn(r+7,l,h)}extractNumericValueFromBitArray(r,o){return En.extractNumericValueFromBitArray(this.information,r,o)}static extractNumericValueFromBitArray(r,o,l){let h=0;for(let d=0;d<l;++d)r.get(o+d)&&(h|=1<<l-d-1);return h}decodeGeneralPurposeField(r,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Ei(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Ei(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),r=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),r=o.isFinished()):(o=this.parseNumericBlock(),r=o.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let o;return r.isSecondDigitFNC1()?o=new Ei(this.current.getPosition(),this.buffer.toString()):o=new Ei(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Rr(!0,o)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let o=new Ei(this.current.getPosition(),this.buffer.toString());return new Rr(!0,o)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Rr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ei(this.current.getPosition(),this.buffer.toString());return new Rr(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Rr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ei(this.current.getPosition(),this.buffer.toString());return new Rr(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Rr(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(r,8);return h>=232&&h<253}decodeIsoIec646(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new cr(r+5,cr.FNC1);if(o>=5&&o<15)return new cr(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new cr(r+7,""+(l+1));if(l>=90&&l<116)return new cr(r+7,""+(l+7));let h=this.extractNumericValueFromBitArray(r,8),d;switch(h){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new H}return new cr(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new cr(r+5,cr.FNC1);if(o>=5&&o<15)return new cr(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new cr(r+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new $e("Decoding invalid alphanumeric value: "+l)}return new cr(r+6,h)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<5&&o+r<this.information.getSize();++o)if(o===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+o))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let o=r;o<r+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<4&&o+r<this.information.getSize();++o)if(this.information.get(r+o))return!1;return!0}}class kn{constructor(r){this.information=r,this.generalDecoder=new En(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Nn extends kn{constructor(r){super(r)}encodeCompressedGtin(r,o){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,o,l)}encodeCompressedGtinWithoutAI(r,o,l){for(let h=0;h<4;++h){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*h,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}Nn.appendCheckDigit(r,l)}static appendCheckDigit(r,o){let l=0;for(let h=0;h<13;h++){let d=r.charAt(h+o).charCodeAt(0)-48;l+=h&1?d:3*d}l=10-l%10,l===10&&(l=0),r.append(l)}}Nn.GTIN_SIZE=40;class ni extends Nn{constructor(r){super(r)}parseInformation(){let r=new X;r.append("(01)");let o=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(ni.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,ni.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(r,ni.HEADER_SIZE+44)}}ni.HEADER_SIZE=4;class Vi extends kn{constructor(r){super(r)}parseInformation(){let r=new X;return this.getGeneralDecoder().decodeAllCodes(r,Vi.HEADER_SIZE)}}Vi.HEADER_SIZE=5;class Hr extends Nn{constructor(r){super(r)}encodeCompressedWeight(r,o,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(r,h);let d=this.checkWeight(h),m=1e5;for(let p=0;p<5;++p)d/m===0&&r.append("0"),m/=10;r.append(d)}}class Dr extends Hr{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Dr.HEADER_SIZE+Hr.GTIN_SIZE+Dr.WEIGHT_SIZE)throw new ae;let r=new X;return this.encodeCompressedGtin(r,Dr.HEADER_SIZE),this.encodeCompressedWeight(r,Dr.HEADER_SIZE+Hr.GTIN_SIZE,Dr.WEIGHT_SIZE),r.toString()}}Dr.HEADER_SIZE=5,Dr.WEIGHT_SIZE=15;class vi extends Dr{constructor(r){super(r)}addWeightCode(r,o){r.append("(3103)")}checkWeight(r){return r}}class ks extends Dr{constructor(r){super(r)}addWeightCode(r,o){o<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class mn extends Nn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<mn.HEADER_SIZE+Nn.GTIN_SIZE)throw new ae;let r=new X;this.encodeCompressedGtin(r,mn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(mn.HEADER_SIZE+Nn.GTIN_SIZE,mn.LAST_DIGIT_SIZE);r.append("(392"),r.append(o),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(mn.HEADER_SIZE+Nn.GTIN_SIZE+mn.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}mn.HEADER_SIZE=8,mn.LAST_DIGIT_SIZE=2;class vn extends Nn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<vn.HEADER_SIZE+Nn.GTIN_SIZE)throw new ae;let r=new X;this.encodeCompressedGtin(r,vn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE+Nn.GTIN_SIZE,vn.LAST_DIGIT_SIZE);r.append("(393"),r.append(o),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE+Nn.GTIN_SIZE+vn.LAST_DIGIT_SIZE,vn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(vn.HEADER_SIZE+Nn.GTIN_SIZE+vn.LAST_DIGIT_SIZE+vn.FIRST_THREE_DIGITS_SIZE,null);return r.append(h.getNewString()),r.toString()}}vn.HEADER_SIZE=8,vn.LAST_DIGIT_SIZE=2,vn.FIRST_THREE_DIGITS_SIZE=10;class Z extends Hr{constructor(r,o,l){super(r),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Z.HEADER_SIZE+Z.GTIN_SIZE+Z.WEIGHT_SIZE+Z.DATE_SIZE)throw new ae;let r=new X;return this.encodeCompressedGtin(r,Z.HEADER_SIZE),this.encodeCompressedWeight(r,Z.HEADER_SIZE+Z.GTIN_SIZE,Z.WEIGHT_SIZE),this.encodeCompressedDate(r,Z.HEADER_SIZE+Z.GTIN_SIZE+Z.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Z.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let h=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),d/10==0&&r.append("0"),r.append(d),h/10==0&&r.append("0"),r.append(h)}addWeightCode(r,o){r.append("("),r.append(this.firstAIdigits),r.append(o/1e5),r.append(")")}checkWeight(r){return r%1e5}}Z.HEADER_SIZE=8,Z.WEIGHT_SIZE=20,Z.DATE_SIZE=16;function Ee(O){try{if(O.get(1))return new ni(O);if(!O.get(2))return new Vi(O);switch(En.extractNumericValueFromBitArray(O,1,4)){case 4:return new vi(O);case 5:return new ks(O)}switch(En.extractNumericValueFromBitArray(O,1,5)){case 12:return new mn(O);case 13:return new vn(O)}switch(En.extractNumericValueFromBitArray(O,1,7)){case 56:return new Z(O,"310","11");case 57:return new Z(O,"320","11");case 58:return new Z(O,"310","13");case 59:return new Z(O,"320","13");case 60:return new Z(O,"310","15");case 61:return new Z(O,"320","15");case 62:return new Z(O,"310","17");case 63:return new Z(O,"320","17")}}catch(r){throw console.log(r),new $e("unknown decoder: "+O)}}class We{constructor(r,o,l,h){this.leftchar=r,this.rightchar=o,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,o){return r instanceof We?We.equalsOrNull(r.leftchar,o.leftchar)&&We.equalsOrNull(r.rightchar,o.rightchar)&&We.equalsOrNull(r.finderpattern,o.finderpattern):!1}static equalsOrNull(r,o){return r===null?o===null:We.equals(r,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class _t{constructor(r,o,l){this.pairs=r,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,o){return r instanceof _t?this.checkEqualitity(r,o)&&r.wasReversed===o.wasReversed:!1}checkEqualitity(r,o){if(!r||!o)return;let l;return r.forEach((h,d)=>{o.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class me extends Vn{constructor(r){super(...arguments),this.pairs=new Array(me.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,o,l){this.pairs.length=0,this.startFromEven=!1;try{return me.constructResult(this.decodeRow2pairs(r,o))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,me.constructResult(this.decodeRow2pairs(r,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,r))}catch(d){if(d instanceof ae){if(!this.pairs.length)throw new ae;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(r,!1),h){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new ae}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),o}checkRows(r,o){for(let l=o;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!me.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(h);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new ae}static isValidSequence(r){for(let o of me.FINDER_PATTERN_SEQUENCES){if(r.length>o.length)continue;let l=!0;for(let h=0;h<r.length;h++)if(r[h].getFinderPattern().getValue()!=o[h]){l=!1;break}if(l)return!0}return!1}storeRow(r,o){let l=0,h=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){d=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}d||h||me.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new _t(this.pairs,r,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,o){for(let l of o)if(l.getPairs().length!==r.length){for(let h of l.getPairs())for(let d of r)if(We.equals(h,d))break}}static isPartialRow(r,o){for(let l of o){let h=!0;for(let d of r){let m=!1;for(let p of l.getPairs())if(d.equals(p)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(r){let o=Pa.buildBitArray(r),h=Ee(o).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],m[0],m[1]];return new qe(h,null,null,p,Me.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),o=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let _=this.pairs.get(p);h+=_.getLeftChar().getChecksumPortion(),d++;let T=_.getRightChar();T!=null&&(h+=T.getChecksumPortion(),d++)}return h%=211,211*(d-4)+h==o.getValue()}static getNextSecondBar(r,o){let l;return r.get(o)?(l=r.getNextUnset(o),l=r.getNextSet(l)):(l=r.getNextSet(o),l=r.getNextUnset(l)),l}retrieveNextPair(r,o,l){let h=o.length%2==0;this.startFromEven&&(h=!h);let d,m=!0,p=-1;do this.findNextPair(r,o,p),d=this.parseFoundFinderPattern(r,l,h),d==null?p=me.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let _=this.decodeDataCharacter(r,d,h,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ae;let T;try{T=this.decodeDataCharacter(r,d,h,!1)}catch(N){T=null,this.verbose&&console.log(N)}return new We(_,T,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,o,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let p=o.length%2!=0;this.startFromEven&&(p=!p);let _=!1;for(;m<d&&(_=!r.get(m),!!_);)m++;let T=0,N=m;for(let L=m;L<d;L++)if(r.get(L)!=_)h[T]++;else{if(T==3){if(p&&me.reverseCounters(h),me.isFinderPattern(h)){this.startEnd[0]=N,this.startEnd[1]=L;return}p&&me.reverseCounters(h),N+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,T--}else T++;h[T]=1,_=!_}throw new ae}static reverseCounters(r){let o=r.length;for(let l=0;l<o/2;++l){let h=r[l];r[l]=r[o-l-1],r[o-l-1]=h}}parseFoundFinderPattern(r,o,l){let h,d,m;if(l){let T=this.startEnd[0]-1;for(;T>=0&&!r.get(T);)T--;T++,h=this.startEnd[0]-T,d=T,m=this.startEnd[1]}else d=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let p=this.getDecodeFinderCounters();ee.arraycopy(p,0,p,1,p.length-1),p[0]=h;let _;try{_=this.parseFinderValue(p,me.FINDER_PATTERNS)}catch{return null}return new Ui(_,[d,m],d,m,o)}decodeDataCharacter(r,o,l,h){let d=this.getDataCharacterCounters();for(let yn=0;yn<d.length;yn++)d[yn]=0;if(h)me.recordPatternInReverse(r,o.getStartEnd()[0],d);else{me.recordPattern(r,o.getStartEnd()[1],d);for(let yn=0,Ar=d.length-1;yn<Ar;yn++,Ar--){let gi=d[yn];d[yn]=d[Ar],d[Ar]=gi}}let m=17,p=Ye.sum(new Int32Array(d))/m,_=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(p-_)/_>.3)throw new ae;let T=this.getOddCounts(),N=this.getEvenCounts(),L=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let yn=0;yn<d.length;yn++){let Ar=1*d[yn]/p,gi=Ar+.5;if(gi<1){if(Ar<.3)throw new ae;gi=1}else if(gi>8){if(Ar>8.7)throw new ae;gi=8}let sa=yn/2;yn&1?(N[sa]=gi,B[sa]=Ar-gi):(T[sa]=gi,L[sa]=Ar-gi)}this.adjustOddEvenCounts(m);let Y=4*o.getValue()+(l?0:2)+(h?0:1)-1,ne=0,re=0;for(let yn=T.length-1;yn>=0;yn--){if(me.isNotA1left(o,l,h)){let Ar=me.WEIGHTS[Y][2*yn];re+=T[yn]*Ar}ne+=T[yn]}let he=0;for(let yn=N.length-1;yn>=0;yn--)if(me.isNotA1left(o,l,h)){let Ar=me.WEIGHTS[Y][2*yn+1];he+=N[yn]*Ar}let we=re+he;if(ne&1||ne>13||ne<4)throw new ae;let Ue=(13-ne)/2,Fe=me.SYMBOL_WIDEST[Ue],Oe=9-Fe,Bt=en.getRSSvalue(T,Fe,!0),xt=en.getRSSvalue(N,Oe,!1),Yr=me.EVEN_TOTAL_SUBSET[Ue],Di=me.GSUM[Ue],Xr=Bt*Yr+xt+Di;return new zr(Xr,we)}static isNotA1left(r,o,l){return!(r.getValue()==0&&o&&l)}adjustOddEvenCounts(r){let o=Ye.sum(new Int32Array(this.getOddCounts())),l=Ye.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1;o>13?d=!0:o<4&&(h=!0);let m=!1,p=!1;l>13?p=!0:l<4&&(m=!0);let _=o+l-r,T=(o&1)==1,N=(l&1)==0;if(_==1)if(T){if(N)throw new ae;d=!0}else{if(!N)throw new ae;p=!0}else if(_==-1)if(T){if(N)throw new ae;h=!0}else{if(!N)throw new ae;m=!0}else if(_==0){if(T){if(!N)throw new ae;o<l?(h=!0,p=!0):(d=!0,m=!0)}else if(N)throw new ae}else throw new ae;if(h){if(d)throw new ae;me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new ae;me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}me.SYMBOL_WIDEST=[7,5,4,3,1],me.EVEN_TOTAL_SUBSET=[4,20,52,104,204],me.GSUM=[0,348,1388,2948,3988],me.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],me.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],me.FINDER_PAT_A=0,me.FINDER_PAT_B=1,me.FINDER_PAT_C=2,me.FINDER_PAT_D=3,me.FINDER_PAT_E=4,me.FINDER_PAT_F=5,me.FINDER_PATTERN_SEQUENCES=[[me.FINDER_PAT_A,me.FINDER_PAT_A],[me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B],[me.FINDER_PAT_A,me.FINDER_PAT_C,me.FINDER_PAT_B,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_C],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F]],me.MAX_PAIRS=11;class Et extends zr{constructor(r,o,l){super(r,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Vt extends Vn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,o,l){const h=this.decodePair(o,!1,r,l);Vt.addOrTally(this.possibleLeftPairs,h),o.reverse();let d=this.decodePair(o,!0,r,l);Vt.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Vt.checkChecksum(m,p))return Vt.constructResult(m,p)}throw new ae}static addOrTally(r,o){if(o==null)return;let l=!1;for(let h of r)if(h.getValue()===o.getValue()){h.incrementCount(),l=!0;break}l||r.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,o){let l=4537077*r.getValue()+o.getValue(),h=new String(l).toString(),d=new X;for(let T=13-h.length;T>0;T--)d.append("0");d.append(h);let m=0;for(let T=0;T<13;T++){let N=d.charAt(T).charCodeAt(0)-48;m+=T&1?N:3*N}m=10-m%10,m===10&&(m=0),d.append(m.toString());let p=r.getFinderPattern().getResultPoints(),_=o.getFinderPattern().getResultPoints();return new qe(d.toString(),null,0,[p[0],p[1],_[0],_[1]],Me.RSS_14,new Date().getTime())}static checkChecksum(r,o){let l=(r.getChecksumPortion()+16*o.getChecksumPortion())%79,h=9*r.getFinderPattern().getValue()+o.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(r,o,l,h){try{let d=this.findFinderPattern(r,o),m=this.parseFoundFinderPattern(r,l,o,d),p=h==null?null:h.get(Pe.NEED_RESULT_POINT_CALLBACK);if(p!=null){let N=(d[0]+d[1])/2;o&&(N=r.getSize()-1-N),p.foundPossibleResultPoint(new He(N,l))}let _=this.decodeDataCharacter(r,m,!0),T=this.decodeDataCharacter(r,m,!1);return new Et(1597*_.getValue()+T.getValue(),_.getChecksumPortion()+4*T.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,o,l){let h=this.getDataCharacterCounters();for(let he=0;he<h.length;he++)h[he]=0;if(l)hn.recordPatternInReverse(r,o.getStartEnd()[0],h);else{hn.recordPattern(r,o.getStartEnd()[1]+1,h);for(let he=0,we=h.length-1;he<we;he++,we--){let Ue=h[he];h[he]=h[we],h[we]=Ue}}let d=l?16:15,m=Ye.sum(new Int32Array(h))/d,p=this.getOddCounts(),_=this.getEvenCounts(),T=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let he=0;he<h.length;he++){let we=h[he]/m,Ue=Math.floor(we+.5);Ue<1?Ue=1:Ue>8&&(Ue=8);let Fe=Math.floor(he/2);he&1?(_[Fe]=Ue,N[Fe]=we-Ue):(p[Fe]=Ue,T[Fe]=we-Ue)}this.adjustOddEvenCounts(l,d);let L=0,B=0;for(let he=p.length-1;he>=0;he--)B*=9,B+=p[he],L+=p[he];let Y=0,ne=0;for(let he=_.length-1;he>=0;he--)Y*=9,Y+=_[he],ne+=_[he];let re=B+3*Y;if(l){if(L&1||L>12||L<4)throw new ae;let he=(12-L)/2,we=Vt.OUTSIDE_ODD_WIDEST[he],Ue=9-we,Fe=en.getRSSvalue(p,we,!1),Oe=en.getRSSvalue(_,Ue,!0),Bt=Vt.OUTSIDE_EVEN_TOTAL_SUBSET[he],xt=Vt.OUTSIDE_GSUM[he];return new zr(Fe*Bt+Oe+xt,re)}else{if(ne&1||ne>10||ne<4)throw new ae;let he=(10-ne)/2,we=Vt.INSIDE_ODD_WIDEST[he],Ue=9-we,Fe=en.getRSSvalue(p,we,!0),Oe=en.getRSSvalue(_,Ue,!1),Bt=Vt.INSIDE_ODD_TOTAL_SUBSET[he],xt=Vt.INSIDE_GSUM[he];return new zr(Oe*Bt+Fe+xt,re)}}findFinderPattern(r,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=r.getSize(),d=!1,m=0;for(;m<h&&(d=!r.get(m),o!==d);)m++;let p=0,_=m;for(let T=m;T<h;T++)if(r.get(T)!==d)l[p]++;else{if(p===3){if(Vn.isFinderPattern(l))return[_,T];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new ae}parseFoundFinderPattern(r,o,l,h){let d=r.get(h[0]),m=h[0]-1;for(;m>=0&&d!==r.get(m);)m--;m++;const p=h[0]-m,_=this.getDecodeFinderCounters(),T=new Int32Array(_.length);ee.arraycopy(_,0,T,1,_.length-1),T[0]=p;const N=this.parseFinderValue(T,Vt.FINDER_PATTERNS);let L=m,B=h[1];return l&&(L=r.getSize()-1-L,B=r.getSize()-1-B),new Ui(N,[m,h[1]],L,B,o)}adjustOddEvenCounts(r,o){let l=Ye.sum(new Int32Array(this.getOddCounts())),h=Ye.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,p=!1,_=!1;r?(l>12?m=!0:l<4&&(d=!0),h>12?_=!0:h<4&&(p=!0)):(l>11?m=!0:l<5&&(d=!0),h>10?_=!0:h<4&&(p=!0));let T=l+h-o,N=(l&1)===(r?1:0),L=(h&1)===1;if(T===1)if(N){if(L)throw new ae;m=!0}else{if(!L)throw new ae;_=!0}else if(T===-1)if(N){if(L)throw new ae;d=!0}else{if(!L)throw new ae;p=!0}else if(T===0){if(N){if(!L)throw new ae;l<h?(d=!0,_=!0):(m=!0,p=!0)}else if(L)throw new ae}else throw new ae;if(d){if(m)throw new ae;Vn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Vn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(_)throw new ae;Vn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Vn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Vt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Vt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Vt.OUTSIDE_GSUM=[0,161,961,2015,2715],Vt.INSIDE_GSUM=[0,336,1036,1516],Vt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Vt.INSIDE_ODD_WIDEST=[2,4,6,8],Vt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class mr extends hn{constructor(r,o){super(),this.readers=[],this.verbose=o===!0;const l=r?r.get(Pe.POSSIBLE_FORMATS):null,h=r&&r.get(Pe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Me.EAN_13)||l.includes(Me.UPC_A)||l.includes(Me.EAN_8)||l.includes(Me.UPC_E))&&this.readers.push(new ts(r)),l.includes(Me.CODE_39)&&this.readers.push(new Cn(h)),l.includes(Me.CODE_128)&&this.readers.push(new ke),l.includes(Me.ITF)&&this.readers.push(new Nt),l.includes(Me.RSS_14)&&this.readers.push(new Vt),l.includes(Me.RSS_EXPANDED)&&this.readers.push(new me(this.verbose))):(this.readers.push(new ts(r)),this.readers.push(new Cn),this.readers.push(new ts(r)),this.readers.push(new ke),this.readers.push(new Nt),this.readers.push(new Vt),this.readers.push(new me(this.verbose)))}decodeRow(r,o,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(r,o,l)}catch{}throw new ae}reset(){this.readers.forEach(r=>r.reset())}}class yc extends Ge{constructor(r=500,o){super(new mr(o),r,o)}}class qt{constructor(r,o,l){this.ecCodewords=r,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ft{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Lt{constructor(r,o,l,h,d,m){this.versionNumber=r,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=d,this.ecBlocks=m;let p=0;const _=m.getECCodewords(),T=m.getECBlocks();for(let N of T)p+=N.getCount()*(N.getDataCodewords()+_);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,o){if(r&1||o&1)throw new H;for(let l of Lt.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===o)return l;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new Lt(1,10,10,8,8,new qt(5,new Ft(1,3))),new Lt(2,12,12,10,10,new qt(7,new Ft(1,5))),new Lt(3,14,14,12,12,new qt(10,new Ft(1,8))),new Lt(4,16,16,14,14,new qt(12,new Ft(1,12))),new Lt(5,18,18,16,16,new qt(14,new Ft(1,18))),new Lt(6,20,20,18,18,new qt(18,new Ft(1,22))),new Lt(7,22,22,20,20,new qt(20,new Ft(1,30))),new Lt(8,24,24,22,22,new qt(24,new Ft(1,36))),new Lt(9,26,26,24,24,new qt(28,new Ft(1,44))),new Lt(10,32,32,14,14,new qt(36,new Ft(1,62))),new Lt(11,36,36,16,16,new qt(42,new Ft(1,86))),new Lt(12,40,40,18,18,new qt(48,new Ft(1,114))),new Lt(13,44,44,20,20,new qt(56,new Ft(1,144))),new Lt(14,48,48,22,22,new qt(68,new Ft(1,174))),new Lt(15,52,52,24,24,new qt(42,new Ft(2,102))),new Lt(16,64,64,14,14,new qt(56,new Ft(2,140))),new Lt(17,72,72,16,16,new qt(36,new Ft(4,92))),new Lt(18,80,80,18,18,new qt(48,new Ft(4,114))),new Lt(19,88,88,20,20,new qt(56,new Ft(4,144))),new Lt(20,96,96,22,22,new qt(68,new Ft(4,174))),new Lt(21,104,104,24,24,new qt(56,new Ft(6,136))),new Lt(22,120,120,18,18,new qt(68,new Ft(6,175))),new Lt(23,132,132,20,20,new qt(62,new Ft(8,163))),new Lt(24,144,144,22,22,new qt(62,new Ft(8,156),new Ft(2,155))),new Lt(25,8,18,6,16,new qt(7,new Ft(1,5))),new Lt(26,8,32,6,14,new qt(11,new Ft(1,10))),new Lt(27,12,26,10,24,new qt(14,new Ft(1,16))),new Lt(28,12,36,10,16,new qt(18,new Ft(1,22))),new Lt(29,16,36,14,16,new qt(24,new Ft(1,32))),new Lt(30,16,48,14,22,new qt(28,new Ft(1,49)))]}}Lt.VERSIONS=Lt.buildVersions();class ns{constructor(r){const o=r.getHeight();if(o<8||o>144||o&1)throw new H;this.version=ns.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Ve(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const o=r.getHeight(),l=r.getWidth();return Lt.getVersionForDimensions(o,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,h=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let p=!1,_=!1,T=!1,N=!1;do if(l===d&&h===0&&!p)r[o++]=this.readCorner1(d,m)&255,l-=2,h+=2,p=!0;else if(l===d-2&&h===0&&m&3&&!_)r[o++]=this.readCorner2(d,m)&255,l-=2,h+=2,_=!0;else if(l===d+4&&h===2&&!(m&7)&&!T)r[o++]=this.readCorner3(d,m)&255,l-=2,h+=2,T=!0;else if(l===d-2&&h===0&&(m&7)===4&&!N)r[o++]=this.readCorner4(d,m)&255,l-=2,h+=2,N=!0;else{do l<d&&h>=0&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l+=2,h-=2;while(l<d&&h>=0);l+=3,h+=1}while(l<d||h<m);if(o!==this.version.getTotalCodewords())throw new H;return r}readModule(r,o,l,h){return r<0&&(r+=l,o+=4-(l+4&7)),o<0&&(o+=h,r+=4-(h+4&7)),this.readMappingMatrix.set(o,r),this.mappingBitMatrix.get(o,r)}readUtah(r,o,l,h){let d=0;return this.readModule(r-2,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-2,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o,l,h)&&(d|=1),d<<=1,this.readModule(r,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r,o,l,h)&&(d|=1),d}readCorner1(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,1,r,o)&&(l|=1),l<<=1,this.readModule(r-1,2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}readCorner2(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-4,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner3(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-3,r,o)&&(l|=1),l<<=1,this.readModule(1,o-2,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner4(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}extractDataRegion(r){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==o)throw new R("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/h|0,p=l/d|0,_=m*h,T=p*d,N=new Ve(T,_);for(let L=0;L<m;++L){const B=L*h;for(let Y=0;Y<p;++Y){const ne=Y*d;for(let re=0;re<h;++re){const he=L*(h+2)+1+re,we=B+re;for(let Ue=0;Ue<d;++Ue){const Fe=Y*(d+2)+1+Ue;if(r.get(Fe,he)){const Oe=ne+Ue;N.set(Oe,we)}}}}}return N}}class rs{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o){const l=o.getECBlocks();let h=0;const d=l.getECBlocks();for(let re of d)h+=re.getCount();const m=new Array(h);let p=0;for(let re of d)for(let he=0;he<re.getCount();he++){const we=re.getDataCodewords(),Ue=l.getECCodewords()+we;m[p++]=new rs(we,new Uint8Array(Ue))}const T=m[0].codewords.length-l.getECCodewords(),N=T-1;let L=0;for(let re=0;re<N;re++)for(let he=0;he<p;he++)m[he].codewords[re]=r[L++];const B=o.getVersionNumber()===24,Y=B?8:p;for(let re=0;re<Y;re++)m[re].codewords[T-1]=r[L++];const ne=m[0].codewords.length;for(let re=T;re<ne;re++)for(let he=0;he<p;he++){const we=B?(he+8)%p:he,Ue=B&&we>7?re-1:re;m[we].codewords[Ue]=r[L++]}if(L!==r.length)throw new R;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ri{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new R(""+r);let o=0,l=this.bitOffset,h=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,p=r<m?r:m,_=m-p,T=255>>8-p<<_;o=(d[h]&T)>>_,r-=p,l+=p,l===8&&(l=0,h++)}if(r>0){for(;r>=8;)o=o<<8|d[h]&255,h++,r-=8;if(r>0){const m=8-r,p=255>>m<<m;o=o<<r|(d[h]&p)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=h,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Zt;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(Zt||(Zt={}));class Fi{static decode(r){const o=new ri(r),l=new X,h=new X,d=new Array;let m=Zt.ASCII_ENCODE;do if(m===Zt.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,h);else{switch(m){case Zt.C40_ENCODE:this.decodeC40Segment(o,l);break;case Zt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Zt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Zt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Zt.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new H}m=Zt.ASCII_ENCODE}while(m!==Zt.PAD_ENCODE&&o.available()>0);return h.length()>0&&l.append(h.toString()),new Gt(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,o,l){let h=!1;do{let d=r.readBits(8);if(d===0)throw new H;if(d<=128)return h&&(d+=128),o.append(String.fromCharCode(d-1)),Zt.ASCII_ENCODE;if(d===129)return Zt.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return Zt.C40_ENCODE;case 231:return Zt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Zt.ANSIX12_ENCODE;case 239:return Zt.TEXT_ENCODE;case 240:return Zt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new H;break}}while(r.available()>0);return Zt.ASCII_ENCODE}static decodeC40Segment(r,o){let l=!1;const h=[];let d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const _=h[p];switch(d){case 0:if(_<3)d=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[_];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else throw new H;break;case 1:l?(o.append(String.fromCharCode(_+128)),l=!1):o.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[_];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else switch(_){case 27:o.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:l?(o.append(String.fromCharCode(_+224)),l=!1):o.append(String.fromCharCode(_+96)),d=0;break;default:throw new H}}}while(r.available()>0)}static decodeTextSegment(r,o){let l=!1,h=[],d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const _=h[p];switch(d){case 0:if(_<3)d=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[_];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else throw new H;break;case 1:l?(o.append(String.fromCharCode(_+128)),l=!1):o.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[_];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else switch(_){case 27:o.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[_];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T),d=0}else throw new H;break;default:throw new H}}}while(r.available()>0)}static decodeAnsiX12Segment(r,o){const l=[];do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new H;break}}}while(r.available()>0)}static parseTwoBytes(r,o,l){let h=(r<<8)+o-1,d=Math.floor(h/1600);l[0]=d,h-=d*1600,d=Math.floor(h/40),l[1]=d,l[2]=h-d*40}static decodeEdifactSegment(r,o){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let h=r.readBits(6);if(h===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}h&32||(h|=64),o.append(String.fromCharCode(h))}}while(r.available()>0)}static decodeBase256Segment(r,o,l){let h=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),h++);let m;if(d===0?m=r.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(r.readBits(8),h++),m<0)throw new H;const p=new Uint8Array(m);for(let _=0;_<m;_++){if(r.available()<8)throw new H;p[_]=this.unrandomize255State(r.readBits(8),h++)}l.push(p);try{o.append(Q.decode(p,J.ISO88591))}catch(_){throw new $e("Platform does not support required encoding: "+_.message)}}static unrandomize255State(r,o){const l=149*o%255+1,h=r-l;return h>=0?h:h+256}}Fi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Fi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Fi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Fi.TEXT_SHIFT2_SET_CHARS=Fi.C40_SHIFT2_SET_CHARS,Fi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class wc{constructor(){this.rsDecoder=new ht(pt.DATA_MATRIX_FIELD_256)}decode(r){const o=new ns(r),l=o.getVersion(),h=o.readCodewords(),d=rs.getDataBlocks(h,l);let m=0;for(let T of d)m+=T.getNumDataCodewords();const p=new Uint8Array(m),_=d.length;for(let T=0;T<_;T++){const N=d[T],L=N.getCodewords(),B=N.getNumDataCodewords();this.correctErrors(L,B);for(let Y=0;Y<B;Y++)p[Y*_+T]=L[Y]}return Fi.decode(p)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new U}for(let h=0;h<o;h++)r[h]=l[h]}}class pn{constructor(r){this.image=r,this.rectangleDetector=new ot(this.image)}detect(){const r=this.rectangleDetector.detect();let o=this.detectSolid1(r);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ae;o=this.shiftToModuleCenter(o);const l=o[0],h=o[1],d=o[2],m=o[3];let p=this.transitionsBetween(l,m)+1,_=this.transitionsBetween(d,m)+1;(p&1)===1&&(p+=1),(_&1)===1&&(_+=1),4*p<7*_&&4*_<7*p&&(p=_=Math.max(p,_));let T=pn.sampleGrid(this.image,l,h,d,m,p,_);return new Jn(T,[l,h,d,m])}static shiftPoint(r,o,l){let h=(o.getX()-r.getX())/(l+1),d=(o.getY()-r.getY())/(l+1);return new He(r.getX()+h,r.getY()+d)}static moveAway(r,o,l){let h=r.getX(),d=r.getY();return h<o?h-=1:h+=1,d<l?d-=1:d+=1,new He(h,d)}detectSolid1(r){let o=r[0],l=r[1],h=r[3],d=r[2],m=this.transitionsBetween(o,l),p=this.transitionsBetween(l,h),_=this.transitionsBetween(h,d),T=this.transitionsBetween(d,o),N=m,L=[d,o,l,h];return N>p&&(N=p,L[0]=o,L[1]=l,L[2]=h,L[3]=d),N>_&&(N=_,L[0]=l,L[1]=h,L[2]=d,L[3]=o),N>T&&(L[0]=h,L[1]=d,L[2]=o,L[3]=l),L}detectSolid2(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),p=pn.shiftPoint(l,h,(m+1)*4),_=pn.shiftPoint(h,l,(m+1)*4),T=this.transitionsBetween(p,o),N=this.transitionsBetween(_,d);return T<N?(r[0]=o,r[1]=l,r[2]=h,r[3]=d):(r[0]=l,r[1]=h,r[2]=d,r[3]=o),r}correctTopRight(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),p=this.transitionsBetween(l,d),_=pn.shiftPoint(o,l,(p+1)*4),T=pn.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(_,d),p=this.transitionsBetween(T,d);let N=new He(d.getX()+(h.getX()-l.getX())/(m+1),d.getY()+(h.getY()-l.getY())/(m+1)),L=new He(d.getX()+(o.getX()-l.getX())/(p+1),d.getY()+(o.getY()-l.getY())/(p+1));if(!this.isValid(N))return this.isValid(L)?L:null;if(!this.isValid(L))return N;let B=this.transitionsBetween(_,N)+this.transitionsBetween(T,N),Y=this.transitionsBetween(_,L)+this.transitionsBetween(T,L);return B>Y?N:L}shiftToModuleCenter(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d)+1,p=this.transitionsBetween(h,d)+1,_=pn.shiftPoint(o,l,p*4),T=pn.shiftPoint(h,l,m*4);m=this.transitionsBetween(_,d)+1,p=this.transitionsBetween(T,d)+1,(m&1)===1&&(m+=1),(p&1)===1&&(p+=1);let N=(o.getX()+l.getX()+h.getX()+d.getX())/4,L=(o.getY()+l.getY()+h.getY()+d.getY())/4;o=pn.moveAway(o,N,L),l=pn.moveAway(l,N,L),h=pn.moveAway(h,N,L),d=pn.moveAway(d,N,L);let B,Y;return _=pn.shiftPoint(o,l,p*4),_=pn.shiftPoint(_,d,m*4),B=pn.shiftPoint(l,o,p*4),B=pn.shiftPoint(B,h,m*4),T=pn.shiftPoint(h,d,p*4),T=pn.shiftPoint(T,l,m*4),Y=pn.shiftPoint(d,h,p*4),Y=pn.shiftPoint(Y,o,m*4),[_,B,T,Y]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,o,l,h,d,m,p){return gn.getInstance().sampleGrid(r,m,p,.5,.5,m-.5,.5,m-.5,p-.5,.5,p-.5,o.getX(),o.getY(),d.getX(),d.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(r,o){let l=Math.trunc(r.getX()),h=Math.trunc(r.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),p=Math.abs(m-h)>Math.abs(d-l);if(p){let re=l;l=h,h=re,re=d,d=m,m=re}let _=Math.abs(d-l),T=Math.abs(m-h),N=-_/2,L=h<m?1:-1,B=l<d?1:-1,Y=0,ne=this.image.get(p?h:l,p?l:h);for(let re=l,he=h;re!==d;re+=B){let we=this.image.get(p?he:re,p?re:he);if(we!==ne&&(Y++,ne=we),N+=T,N>0){if(he===m)break;he+=L,N-=_}}return Y}}class _i{constructor(){this.decoder=new wc}decode(r,o=null){let l,h;if(o!=null&&o.has(Pe.PURE_BARCODE)){const T=_i.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(T),h=_i.NO_POINTS}else{const T=new pn(r.getBlackMatrix()).detect();l=this.decoder.decode(T.getBits()),h=T.getPoints()}const d=l.getRawBytes(),m=new qe(l.getText(),d,8*d.length,h,Me.DATA_MATRIX,ee.currentTimeMillis()),p=l.getByteSegments();p!=null&&m.putMetadata(at.BYTE_SEGMENTS,p);const _=l.getECLevel();return _!=null&&m.putMetadata(at.ERROR_CORRECTION_LEVEL,_),m}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o==null||l==null)throw new ae;const h=this.moduleSize(o,r);let d=o[1];const m=l[1];let p=o[0];const T=(l[0]-p+1)/h,N=(m-d+1)/h;if(T<=0||N<=0)throw new ae;const L=h/2;d+=L,p+=L;const B=new Ve(T,N);for(let Y=0;Y<N;Y++){const ne=d+Y*h;for(let re=0;re<T;re++)r.get(p+re*h,ne)&&B.set(re,Y)}return B}static moduleSize(r,o){const l=o.getWidth();let h=r[0];const d=r[1];for(;h<l&&o.get(h,d);)h++;if(h===l)throw new ae;const m=h-r[0];if(m===0)throw new ae;return m}}_i.NO_POINTS=[];class Ba extends Ge{constructor(r=500){super(new _i,r)}}var ii;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(ii||(ii={}));class wt{constructor(r,o,l){this.value=r,this.stringValue=o,this.bits=l,wt.FOR_BITS.set(l,this),wt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return wt.L;case"M":return wt.M;case"Q":return wt.Q;case"H":return wt.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof wt))return!1;const o=r;return this.value===o.value}static forBits(r){if(r<0||r>=wt.FOR_BITS.size)throw new R;return wt.FOR_BITS.get(r)}}wt.FOR_BITS=new Map,wt.FOR_VALUE=new Map,wt.L=new wt(ii.L,"L",1),wt.M=new wt(ii.M,"M",0),wt.Q=new wt(ii.Q,"Q",3),wt.H=new wt(ii.H,"H",2);class Pn{constructor(r){this.errorCorrectionLevel=wt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,o){return ie.bitCount(r^o)}static decodeFormatInformation(r,o){const l=Pn.doDecodeFormatInformation(r,o);return l!==null?l:Pn.doDecodeFormatInformation(r^Pn.FORMAT_INFO_MASK_QR,o^Pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,o){let l=Number.MAX_SAFE_INTEGER,h=0;for(const d of Pn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===r||m===o)return new Pn(d[1]);let p=Pn.numBitsDiffering(r,m);p<l&&(h=d[1],l=p),r!==o&&(p=Pn.numBitsDiffering(o,m),p<l&&(h=d[1],l=p))}return l<=3?new Pn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Pn))return!1;const o=r;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Pn.FORMAT_INFO_MASK_QR=21522,Pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(r,...o){this.ecCodewordsPerBlock=r,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const o=this.ecBlocks;for(const l of o)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class G{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Qe{constructor(r,o,...l){this.versionNumber=r,this.alignmentPatternCenters=o,this.ecBlocks=l;let h=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const p of m)h+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new H;try{return this.getVersionForNumber((r-17)/4)}catch{throw new H}}static getVersionForNumber(r){if(r<1||r>40)throw new R;return Qe.VERSIONS[r-1]}static decodeVersionInformation(r){let o=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Qe.VERSION_DECODE_INFO.length;h++){const d=Qe.VERSION_DECODE_INFO[h];if(d===r)return Qe.getVersionForNumber(h+7);const m=Pn.numBitsDiffering(r,d);m<o&&(l=h+7,o=m)}return o<=3?Qe.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),o=new Ve(r);o.setRegion(0,0,9,9),o.setRegion(r-8,0,8,9),o.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const d=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,r-17),o.setRegion(9,6,r-17,1),this.versionNumber>6&&(o.setRegion(r-11,0,3,6),o.setRegion(0,r-11,6,3)),o}toString(){return""+this.versionNumber}}Qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Qe.VERSIONS=[new Qe(1,new Int32Array(0),new ue(7,new G(1,19)),new ue(10,new G(1,16)),new ue(13,new G(1,13)),new ue(17,new G(1,9))),new Qe(2,Int32Array.from([6,18]),new ue(10,new G(1,34)),new ue(16,new G(1,28)),new ue(22,new G(1,22)),new ue(28,new G(1,16))),new Qe(3,Int32Array.from([6,22]),new ue(15,new G(1,55)),new ue(26,new G(1,44)),new ue(18,new G(2,17)),new ue(22,new G(2,13))),new Qe(4,Int32Array.from([6,26]),new ue(20,new G(1,80)),new ue(18,new G(2,32)),new ue(26,new G(2,24)),new ue(16,new G(4,9))),new Qe(5,Int32Array.from([6,30]),new ue(26,new G(1,108)),new ue(24,new G(2,43)),new ue(18,new G(2,15),new G(2,16)),new ue(22,new G(2,11),new G(2,12))),new Qe(6,Int32Array.from([6,34]),new ue(18,new G(2,68)),new ue(16,new G(4,27)),new ue(24,new G(4,19)),new ue(28,new G(4,15))),new Qe(7,Int32Array.from([6,22,38]),new ue(20,new G(2,78)),new ue(18,new G(4,31)),new ue(18,new G(2,14),new G(4,15)),new ue(26,new G(4,13),new G(1,14))),new Qe(8,Int32Array.from([6,24,42]),new ue(24,new G(2,97)),new ue(22,new G(2,38),new G(2,39)),new ue(22,new G(4,18),new G(2,19)),new ue(26,new G(4,14),new G(2,15))),new Qe(9,Int32Array.from([6,26,46]),new ue(30,new G(2,116)),new ue(22,new G(3,36),new G(2,37)),new ue(20,new G(4,16),new G(4,17)),new ue(24,new G(4,12),new G(4,13))),new Qe(10,Int32Array.from([6,28,50]),new ue(18,new G(2,68),new G(2,69)),new ue(26,new G(4,43),new G(1,44)),new ue(24,new G(6,19),new G(2,20)),new ue(28,new G(6,15),new G(2,16))),new Qe(11,Int32Array.from([6,30,54]),new ue(20,new G(4,81)),new ue(30,new G(1,50),new G(4,51)),new ue(28,new G(4,22),new G(4,23)),new ue(24,new G(3,12),new G(8,13))),new Qe(12,Int32Array.from([6,32,58]),new ue(24,new G(2,92),new G(2,93)),new ue(22,new G(6,36),new G(2,37)),new ue(26,new G(4,20),new G(6,21)),new ue(28,new G(7,14),new G(4,15))),new Qe(13,Int32Array.from([6,34,62]),new ue(26,new G(4,107)),new ue(22,new G(8,37),new G(1,38)),new ue(24,new G(8,20),new G(4,21)),new ue(22,new G(12,11),new G(4,12))),new Qe(14,Int32Array.from([6,26,46,66]),new ue(30,new G(3,115),new G(1,116)),new ue(24,new G(4,40),new G(5,41)),new ue(20,new G(11,16),new G(5,17)),new ue(24,new G(11,12),new G(5,13))),new Qe(15,Int32Array.from([6,26,48,70]),new ue(22,new G(5,87),new G(1,88)),new ue(24,new G(5,41),new G(5,42)),new ue(30,new G(5,24),new G(7,25)),new ue(24,new G(11,12),new G(7,13))),new Qe(16,Int32Array.from([6,26,50,74]),new ue(24,new G(5,98),new G(1,99)),new ue(28,new G(7,45),new G(3,46)),new ue(24,new G(15,19),new G(2,20)),new ue(30,new G(3,15),new G(13,16))),new Qe(17,Int32Array.from([6,30,54,78]),new ue(28,new G(1,107),new G(5,108)),new ue(28,new G(10,46),new G(1,47)),new ue(28,new G(1,22),new G(15,23)),new ue(28,new G(2,14),new G(17,15))),new Qe(18,Int32Array.from([6,30,56,82]),new ue(30,new G(5,120),new G(1,121)),new ue(26,new G(9,43),new G(4,44)),new ue(28,new G(17,22),new G(1,23)),new ue(28,new G(2,14),new G(19,15))),new Qe(19,Int32Array.from([6,30,58,86]),new ue(28,new G(3,113),new G(4,114)),new ue(26,new G(3,44),new G(11,45)),new ue(26,new G(17,21),new G(4,22)),new ue(26,new G(9,13),new G(16,14))),new Qe(20,Int32Array.from([6,34,62,90]),new ue(28,new G(3,107),new G(5,108)),new ue(26,new G(3,41),new G(13,42)),new ue(30,new G(15,24),new G(5,25)),new ue(28,new G(15,15),new G(10,16))),new Qe(21,Int32Array.from([6,28,50,72,94]),new ue(28,new G(4,116),new G(4,117)),new ue(26,new G(17,42)),new ue(28,new G(17,22),new G(6,23)),new ue(30,new G(19,16),new G(6,17))),new Qe(22,Int32Array.from([6,26,50,74,98]),new ue(28,new G(2,111),new G(7,112)),new ue(28,new G(17,46)),new ue(30,new G(7,24),new G(16,25)),new ue(24,new G(34,13))),new Qe(23,Int32Array.from([6,30,54,78,102]),new ue(30,new G(4,121),new G(5,122)),new ue(28,new G(4,47),new G(14,48)),new ue(30,new G(11,24),new G(14,25)),new ue(30,new G(16,15),new G(14,16))),new Qe(24,Int32Array.from([6,28,54,80,106]),new ue(30,new G(6,117),new G(4,118)),new ue(28,new G(6,45),new G(14,46)),new ue(30,new G(11,24),new G(16,25)),new ue(30,new G(30,16),new G(2,17))),new Qe(25,Int32Array.from([6,32,58,84,110]),new ue(26,new G(8,106),new G(4,107)),new ue(28,new G(8,47),new G(13,48)),new ue(30,new G(7,24),new G(22,25)),new ue(30,new G(22,15),new G(13,16))),new Qe(26,Int32Array.from([6,30,58,86,114]),new ue(28,new G(10,114),new G(2,115)),new ue(28,new G(19,46),new G(4,47)),new ue(28,new G(28,22),new G(6,23)),new ue(30,new G(33,16),new G(4,17))),new Qe(27,Int32Array.from([6,34,62,90,118]),new ue(30,new G(8,122),new G(4,123)),new ue(28,new G(22,45),new G(3,46)),new ue(30,new G(8,23),new G(26,24)),new ue(30,new G(12,15),new G(28,16))),new Qe(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new G(3,117),new G(10,118)),new ue(28,new G(3,45),new G(23,46)),new ue(30,new G(4,24),new G(31,25)),new ue(30,new G(11,15),new G(31,16))),new Qe(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new G(7,116),new G(7,117)),new ue(28,new G(21,45),new G(7,46)),new ue(30,new G(1,23),new G(37,24)),new ue(30,new G(19,15),new G(26,16))),new Qe(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new G(5,115),new G(10,116)),new ue(28,new G(19,47),new G(10,48)),new ue(30,new G(15,24),new G(25,25)),new ue(30,new G(23,15),new G(25,16))),new Qe(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new G(13,115),new G(3,116)),new ue(28,new G(2,46),new G(29,47)),new ue(30,new G(42,24),new G(1,25)),new ue(30,new G(23,15),new G(28,16))),new Qe(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new G(17,115)),new ue(28,new G(10,46),new G(23,47)),new ue(30,new G(10,24),new G(35,25)),new ue(30,new G(19,15),new G(35,16))),new Qe(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new G(17,115),new G(1,116)),new ue(28,new G(14,46),new G(21,47)),new ue(30,new G(29,24),new G(19,25)),new ue(30,new G(11,15),new G(46,16))),new Qe(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new G(13,115),new G(6,116)),new ue(28,new G(14,46),new G(23,47)),new ue(30,new G(44,24),new G(7,25)),new ue(30,new G(59,16),new G(1,17))),new Qe(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new G(12,121),new G(7,122)),new ue(28,new G(12,47),new G(26,48)),new ue(30,new G(39,24),new G(14,25)),new ue(30,new G(22,15),new G(41,16))),new Qe(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new G(6,121),new G(14,122)),new ue(28,new G(6,47),new G(34,48)),new ue(30,new G(46,24),new G(10,25)),new ue(30,new G(2,15),new G(64,16))),new Qe(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new G(17,122),new G(4,123)),new ue(28,new G(29,46),new G(14,47)),new ue(30,new G(49,24),new G(10,25)),new ue(30,new G(24,15),new G(46,16))),new Qe(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new G(4,122),new G(18,123)),new ue(28,new G(13,46),new G(32,47)),new ue(30,new G(48,24),new G(14,25)),new ue(30,new G(42,15),new G(32,16))),new Qe(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new G(20,117),new G(4,118)),new ue(28,new G(40,47),new G(7,48)),new ue(30,new G(43,24),new G(22,25)),new ue(30,new G(10,15),new G(67,16))),new Qe(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new G(19,118),new G(6,119)),new ue(28,new G(18,47),new G(31,48)),new ue(30,new G(34,24),new G(34,25)),new ue(30,new G(20,15),new G(61,16)))];var Rn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class ur{constructor(r,o){this.value=r,this.isMasked=o}unmaskBitMatrix(r,o){for(let l=0;l<o;l++)for(let h=0;h<o;h++)this.isMasked(l,h)&&r.flip(h,l)}}ur.values=new Map([[Rn.DATA_MASK_000,new ur(Rn.DATA_MASK_000,(O,r)=>(O+r&1)===0)],[Rn.DATA_MASK_001,new ur(Rn.DATA_MASK_001,(O,r)=>(O&1)===0)],[Rn.DATA_MASK_010,new ur(Rn.DATA_MASK_010,(O,r)=>r%3===0)],[Rn.DATA_MASK_011,new ur(Rn.DATA_MASK_011,(O,r)=>(O+r)%3===0)],[Rn.DATA_MASK_100,new ur(Rn.DATA_MASK_100,(O,r)=>(Math.floor(O/2)+Math.floor(r/3)&1)===0)],[Rn.DATA_MASK_101,new ur(Rn.DATA_MASK_101,(O,r)=>O*r%6===0)],[Rn.DATA_MASK_110,new ur(Rn.DATA_MASK_110,(O,r)=>O*r%6<3)],[Rn.DATA_MASK_111,new ur(Rn.DATA_MASK_111,(O,r)=>(O+r+O*r%3&1)===0)]]);class bi{constructor(r){const o=r.getHeight();if(o<21||(o&3)!==1)throw new H;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const o=this.bitMatrix.getHeight();let l=0;const h=o-7;for(let d=o-1;d>=h;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Pn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),o=Math.floor((r-17)/4);if(o<=6)return Qe.getVersionForNumber(o);let l=0;const h=r-11;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(p,m,l);let d=Qe.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(m,p,l);if(d=Qe.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new H}copyBit(r,o,l){return(this.isMirror?this.bitMatrix.get(o,r):this.bitMatrix.get(r,o))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),o=this.readVersion(),l=ur.values.get(r.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const d=o.buildFunctionPattern();let m=!0;const p=new Uint8Array(o.getTotalCodewords());let _=0,T=0,N=0;for(let L=h-1;L>0;L-=2){L===6&&L--;for(let B=0;B<h;B++){const Y=m?h-1-B:B;for(let ne=0;ne<2;ne++)d.get(L-ne,Y)||(N++,T<<=1,this.bitMatrix.get(L-ne,Y)&&(T|=1),N===8&&(p[_++]=T,N=0,T=0))}m=!m}if(_!==o.getTotalCodewords())throw new H;return p}remask(){if(this.parsedFormatInfo===null)return;const r=ur.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let o=0,l=r.getWidth();o<l;o++)for(let h=o+1,d=r.getHeight();h<d;h++)r.get(o,h)!==r.get(h,o)&&(r.flip(h,o),r.flip(o,h))}}class Ro{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o,l){if(r.length!==o.getTotalCodewords())throw new R;const h=o.getECBlocksForLevel(l);let d=0;const m=h.getECBlocks();for(const ne of m)d+=ne.getCount();const p=new Array(d);let _=0;for(const ne of m)for(let re=0;re<ne.getCount();re++){const he=ne.getDataCodewords(),we=h.getECCodewordsPerBlock()+he;p[_++]=new Ro(he,new Uint8Array(we))}const T=p[0].codewords.length;let N=p.length-1;for(;N>=0&&p[N].codewords.length!==T;)N--;N++;const L=T-h.getECCodewordsPerBlock();let B=0;for(let ne=0;ne<L;ne++)for(let re=0;re<_;re++)p[re].codewords[ne]=r[B++];for(let ne=N;ne<_;ne++)p[ne].codewords[L]=r[B++];const Y=p[0].codewords.length;for(let ne=L;ne<Y;ne++)for(let re=0;re<_;re++){const he=re<N?ne:ne+1;p[re].codewords[he]=r[B++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Mr;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(Mr||(Mr={}));class lt{constructor(r,o,l,h){this.value=r,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=h,lt.FOR_BITS.set(h,this),lt.FOR_VALUE.set(r,this)}static forBits(r){const o=lt.FOR_BITS.get(r);if(o===void 0)throw new R;return o}getCharacterCountBits(r){const o=r.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof lt))return!1;const o=r;return this.value===o.value}toString(){return this.stringValue}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.TERMINATOR=new lt(Mr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),lt.NUMERIC=new lt(Mr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),lt.ALPHANUMERIC=new lt(Mr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),lt.STRUCTURED_APPEND=new lt(Mr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),lt.BYTE=new lt(Mr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),lt.ECI=new lt(Mr.ECI,"ECI",Int32Array.from([0,0,0]),7),lt.KANJI=new lt(Mr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),lt.FNC1_FIRST_POSITION=new lt(Mr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),lt.FNC1_SECOND_POSITION=new lt(Mr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),lt.HANZI=new lt(Mr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class xn{static decode(r,o,l,h){const d=new ri(r);let m=new X;const p=new Array;let _=-1,T=-1;try{let N=null,L=!1,B;do{if(d.available()<4)B=lt.TERMINATOR;else{const Y=d.readBits(4);B=lt.forBits(Y)}switch(B){case lt.TERMINATOR:break;case lt.FNC1_FIRST_POSITION:case lt.FNC1_SECOND_POSITION:L=!0;break;case lt.STRUCTURED_APPEND:if(d.available()<16)throw new H;_=d.readBits(8),T=d.readBits(8);break;case lt.ECI:const Y=xn.parseECIValue(d);if(N=P.getCharacterSetECIByValue(Y),N===null)throw new H;break;case lt.HANZI:const ne=d.readBits(4),re=d.readBits(B.getCharacterCountBits(o));ne===xn.GB2312_SUBSET&&xn.decodeHanziSegment(d,m,re);break;default:const he=d.readBits(B.getCharacterCountBits(o));switch(B){case lt.NUMERIC:xn.decodeNumericSegment(d,m,he);break;case lt.ALPHANUMERIC:xn.decodeAlphanumericSegment(d,m,he,L);break;case lt.BYTE:xn.decodeByteSegment(d,m,he,N,p,h);break;case lt.KANJI:xn.decodeKanjiSegment(d,m,he);break;default:throw new H}break}}while(B!==lt.TERMINATOR)}catch{throw new H}return new Gt(r,m.toString(),p.length===0?null:p,l===null?null:l.toString(),_,T)}static decodeHanziSegment(r,o,l){if(l*13>r.available())throw new H;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/96<<8&4294967295|m%96;p<959?p+=41377:p+=42657,h[d]=p>>8&255,h[d+1]=p&255,d+=2,l--}try{o.append(Q.decode(h,J.GB2312))}catch(m){throw new H(m)}}static decodeKanjiSegment(r,o,l){if(l*13>r.available())throw new H;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/192<<8&4294967295|m%192;p<7936?p+=33088:p+=49472,h[d]=p>>8,h[d+1]=p,d+=2,l--}try{o.append(Q.decode(h,J.SHIFT_JIS))}catch(m){throw new H(m)}}static decodeByteSegment(r,o,l,h,d,m){if(8*l>r.available())throw new H;const p=new Uint8Array(l);for(let T=0;T<l;T++)p[T]=r.readBits(8);let _;h===null?_=J.guessEncoding(p,m):_=h.getName();try{o.append(Q.decode(p,_))}catch(T){throw new H(T)}d.push(p)}static toAlphaNumericChar(r){if(r>=xn.ALPHANUMERIC_CHARS.length)throw new H;return xn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,o,l,h){const d=o.length();for(;l>1;){if(r.available()<11)throw new H;const m=r.readBits(11);o.append(xn.toAlphaNumericChar(Math.floor(m/45))),o.append(xn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new H;o.append(xn.toAlphaNumericChar(r.readBits(6)))}if(h)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(r,o,l){for(;l>=3;){if(r.available()<10)throw new H;const h=r.readBits(10);if(h>=1e3)throw new H;o.append(xn.toAlphaNumericChar(Math.floor(h/100))),o.append(xn.toAlphaNumericChar(Math.floor(h/10)%10)),o.append(xn.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(r.available()<7)throw new H;const h=r.readBits(7);if(h>=100)throw new H;o.append(xn.toAlphaNumericChar(Math.floor(h/10))),o.append(xn.toAlphaNumericChar(h%10))}else if(l===1){if(r.available()<4)throw new H;const h=r.readBits(4);if(h>=10)throw new H;o.append(xn.toAlphaNumericChar(h))}}static parseECIValue(r){const o=r.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const l=r.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=r.readBits(16);return(o&31)<<16&4294967295|l}throw new H}}xn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",xn.GB2312_SUBSET=1;class hl{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const o=r[0];r[0]=r[2],r[2]=o}}class Ec{constructor(){this.rsDecoder=new ht(pt.QR_CODE_FIELD_256)}decodeBooleanArray(r,o){return this.decodeBitMatrix(Ve.parseFromBooleanArray(r),o)}decodeBitMatrix(r,o){const l=new bi(r);let h=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){h=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new hl(!0)),d}catch(d){throw h!==null?h:d}}decodeBitMatrixParser(r,o){const l=r.readVersion(),h=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),m=Ro.getDataBlocks(d,l,h);let p=0;for(const N of m)p+=N.getNumDataCodewords();const _=new Uint8Array(p);let T=0;for(const N of m){const L=N.getCodewords(),B=N.getNumDataCodewords();this.correctErrors(L,B);for(let Y=0;Y<B;Y++)_[T++]=L[Y]}return xn.decode(_,l,h,o)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new U}for(let h=0;h<o;h++)r[h]=l[h]}}class Ai extends He{constructor(r,o,l){super(r,o),this.estimatedModuleSize=l}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=(this.getX()+o)/2,d=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new Ai(h,d,m)}}class Gr{constructor(r,o,l,h,d,m,p){this.image=r,this.startX=o,this.startY=l,this.width=h,this.height=d,this.moduleSize=m,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,o=this.height,l=this.width,h=r+l,d=this.startY+o/2,m=new Int32Array(3),p=this.image;for(let _=0;_<o;_++){const T=d+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));m[0]=0,m[1]=0,m[2]=0;let N=r;for(;N<h&&!p.get(N,T);)N++;let L=0;for(;N<h;){if(p.get(N,T))if(L===1)m[1]++;else if(L===2){if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,T,N);if(B!==null)return B}m[0]=m[2],m[1]=1,m[2]=0,L=1}else m[++L]++;else L===1&&L++,m[L]++;N++}if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,T,h);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(r,o){return o-r[2]-r[1]/2}foundPatternCross(r){const o=this.moduleSize,l=o/2;for(let h=0;h<3;h++)if(Math.abs(o-r[h])>=l)return!1;return!0}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let _=r;for(;_>=0&&d.get(o,_)&&p[1]<=l;)p[1]++,_--;if(_<0||p[1]>l)return NaN;for(;_>=0&&!d.get(o,_)&&p[0]<=l;)p[0]++,_--;if(p[0]>l)return NaN;for(_=r+1;_<m&&d.get(o,_)&&p[1]<=l;)p[1]++,_++;if(_===m||p[1]>l)return NaN;for(;_<m&&!d.get(o,_)&&p[2]<=l;)p[2]++,_++;if(p[2]>l)return NaN;const T=p[0]+p[1]+p[2];return 5*Math.abs(T-h)>=2*h?NaN:this.foundPatternCross(p)?Gr.centerFromEnd(p,_):NaN}handlePossibleCenter(r,o,l){const h=r[0]+r[1]+r[2],d=Gr.centerFromEnd(r,l),m=this.crossCheckVertical(o,d,2*r[1],h);if(!isNaN(m)){const p=(r[0]+r[1]+r[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(p,m,d))return T.combineEstimate(m,d,p);const _=new Ai(d,m,p);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Ps extends He{constructor(r,o,l,h){super(r,o),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=this.count+1,d=(this.count*this.getX()+o)/h,m=(this.count*this.getY()+r)/h,p=(this.count*this.estimatedModuleSize+l)/h;return new Ps(d,m,p,h)}}class _s{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class _n{constructor(r,o){this.image=r,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const o=r!=null&&r.get(Pe.TRY_HARDER)!==void 0,l=r!=null&&r.get(Pe.PURE_BARCODE)!==void 0,h=this.image,d=h.getHeight(),m=h.getWidth();let p=Math.floor(3*d/(4*_n.MAX_MODULES));(p<_n.MIN_SKIP||o)&&(p=_n.MIN_SKIP);let _=!1;const T=new Int32Array(5);for(let L=p-1;L<d&&!_;L+=p){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let B=0;for(let Y=0;Y<m;Y++)if(h.get(Y,L))(B&1)===1&&B++,T[B]++;else if(B&1)T[B]++;else if(B===4)if(_n.foundPatternCross(T)){if(this.handlePossibleCenter(T,L,Y,l)===!0)if(p=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>T[2]&&(L+=re-T[2]-p,Y=m-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,B=3;continue}B=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,B=3;else T[++B]++;_n.foundPatternCross(T)&&this.handlePossibleCenter(T,L,m,l)===!0&&(p=T[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return He.orderBestPatterns(N),new _s(N)}static centerFromEnd(r,o){return o-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let o=0;for(let d=0;d<5;d++){const m=r[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,h=l/2;return Math.abs(l-r[0])<h&&Math.abs(l-r[1])<h&&Math.abs(3*l-r[2])<3*h&&Math.abs(l-r[3])<h&&Math.abs(l-r[4])<h}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,o,l,h){const d=this.getCrossCheckStateCount();let m=0;const p=this.image;for(;r>=m&&o>=m&&p.get(o-m,r-m);)d[2]++,m++;if(r<m||o<m)return!1;for(;r>=m&&o>=m&&!p.get(o-m,r-m)&&d[1]<=l;)d[1]++,m++;if(r<m||o<m||d[1]>l)return!1;for(;r>=m&&o>=m&&p.get(o-m,r-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const _=p.getHeight(),T=p.getWidth();for(m=1;r+m<_&&o+m<T&&p.get(o+m,r+m);)d[2]++,m++;if(r+m>=_||o+m>=T)return!1;for(;r+m<_&&o+m<T&&!p.get(o+m,r+m)&&d[3]<l;)d[3]++,m++;if(r+m>=_||o+m>=T||d[3]>=l)return!1;for(;r+m<_&&o+m<T&&p.get(o+m,r+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const N=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(N-h)<2*h&&_n.foundPatternCross(d)}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),p=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(o,_);)p[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(o,_)&&p[1]<=l;)p[1]++,_--;if(_<0||p[1]>l)return NaN;for(;_>=0&&d.get(o,_)&&p[0]<=l;)p[0]++,_--;if(p[0]>l)return NaN;for(_=r+1;_<m&&d.get(o,_);)p[2]++,_++;if(_===m)return NaN;for(;_<m&&!d.get(o,_)&&p[3]<l;)p[3]++,_++;if(_===m||p[3]>=l)return NaN;for(;_<m&&d.get(o,_)&&p[4]<l;)p[4]++,_++;if(p[4]>=l)return NaN;const T=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(T-h)>=2*h?NaN:_n.foundPatternCross(p)?_n.centerFromEnd(p,_):NaN}crossCheckHorizontal(r,o,l,h){const d=this.image,m=d.getWidth(),p=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(_,o);)p[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(_,o)&&p[1]<=l;)p[1]++,_--;if(_<0||p[1]>l)return NaN;for(;_>=0&&d.get(_,o)&&p[0]<=l;)p[0]++,_--;if(p[0]>l)return NaN;for(_=r+1;_<m&&d.get(_,o);)p[2]++,_++;if(_===m)return NaN;for(;_<m&&!d.get(_,o)&&p[3]<l;)p[3]++,_++;if(_===m||p[3]>=l)return NaN;for(;_<m&&d.get(_,o)&&p[4]<l;)p[4]++,_++;if(p[4]>=l)return NaN;const T=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(T-h)>=h?NaN:_n.foundPatternCross(p)?_n.centerFromEnd(p,_):NaN}handlePossibleCenter(r,o,l,h){const d=r[0]+r[1]+r[2]+r[3]+r[4];let m=_n.centerFromEnd(r,l),p=this.crossCheckVertical(o,Math.floor(m),r[2],d);if(!isNaN(p)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(p),r[2],d),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(p),Math.floor(m),r[2],d)))){const _=d/7;let T=!1;const N=this.possibleCenters;for(let L=0,B=N.length;L<B;L++){const Y=N[L];if(Y.aboutEquals(_,p,m)){N[L]=Y.combineEstimate(p,m,_),T=!0;break}}if(!T){const L=new Ps(m,p,_);N.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=_n.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=_n.CENTER_QUORUM&&(r++,o+=m.getEstimatedModuleSize());if(r<3)return!1;const h=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-h);return d<=.05*o}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ae;const o=this.possibleCenters;let l;if(r>3){let h=0,d=0;for(const _ of this.possibleCenters){const T=_.getEstimatedModuleSize();h+=T,d+=T*T}l=h/r;let m=Math.sqrt(d/r-l*l);o.sort((_,T)=>{const N=Math.abs(T.getEstimatedModuleSize()-l),L=Math.abs(_.getEstimatedModuleSize()-l);return N<L?-1:N>L?1:0});const p=Math.max(.2*l,m);for(let _=0;_<o.length&&o.length>3;_++){const T=o[_];Math.abs(T.getEstimatedModuleSize()-l)>p&&(o.splice(_,1),_--)}}if(o.length>3){let h=0;for(const d of o)h+=d.getEstimatedModuleSize();l=h/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const p=Math.abs(m.getEstimatedModuleSize()-l),_=Math.abs(d.getEstimatedModuleSize()-l);return p<_?1:p>_?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}_n.CENTER_QUORUM=2,_n.MIN_SKIP=3,_n.MAX_MODULES=57;class fi{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Pe.NEED_RESULT_POINT_CALLBACK);const l=new _n(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const o=r.getTopLeft(),l=r.getTopRight(),h=r.getBottomLeft(),d=this.calculateModuleSize(o,l,h);if(d<1)throw new ae("No pattern found in proccess finder.");const m=fi.computeDimension(o,l,h,d),p=Qe.getProvisionalVersionForDimension(m),_=p.getDimensionForVersion()-7;let T=null;if(p.getAlignmentPatternCenters().length>0){const Y=l.getX()-o.getX()+h.getX(),ne=l.getY()-o.getY()+h.getY(),re=1-3/_,he=Math.floor(o.getX()+re*(Y-o.getX())),we=Math.floor(o.getY()+re*(ne-o.getY()));for(let Ue=4;Ue<=16;Ue<<=1)try{T=this.findAlignmentInRegion(d,he,we,Ue);break}catch(Fe){if(!(Fe instanceof ae))throw Fe}}const N=fi.createTransform(o,l,h,T,m),L=fi.sampleGrid(this.image,N,m);let B;return T===null?B=[h,o,l]:B=[h,o,l,T],new Jn(L,B)}static createTransform(r,o,l,h,d){const m=d-3.5;let p,_,T,N;return h!==null?(p=h.getX(),_=h.getY(),T=m-3,N=T):(p=o.getX()-r.getX()+l.getX(),_=o.getY()-r.getY()+l.getY(),T=m,N=m),Pt.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,T,N,3.5,m,r.getX(),r.getY(),o.getX(),o.getY(),p,_,l.getX(),l.getY())}static sampleGrid(r,o,l){return gn.getInstance().sampleGridWithTransform(r,l,l,o)}static computeDimension(r,o,l,h){const d=Ye.round(He.distance(r,o)/h),m=Ye.round(He.distance(r,l)/h);let p=Math.floor((d+m)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new ae("Dimensions could be not found.")}return p}calculateModuleSize(r,o,l){return(this.calculateModuleSizeOneWay(r,o)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(o.getX()),Math.floor(o.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(r,o,l,h){let d=this.sizeOfBlackWhiteBlackRun(r,o,l,h),m=1,p=r-(l-r);p<0?(m=r/(r-p),p=0):p>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(p-r),p=this.image.getWidth()-1);let _=Math.floor(o-(h-o)*m);return m=1,_<0?(m=o/(o-_),_=0):_>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(_-o),_=this.image.getHeight()-1),p=Math.floor(r+(p-r)*m),d+=this.sizeOfBlackWhiteBlackRun(r,o,p,_),d-1}sizeOfBlackWhiteBlackRun(r,o,l,h){const d=Math.abs(h-o)>Math.abs(l-r);if(d){let Y=r;r=o,o=Y,Y=l,l=h,h=Y}const m=Math.abs(l-r),p=Math.abs(h-o);let _=-m/2;const T=r<l?1:-1,N=o<h?1:-1;let L=0;const B=l+T;for(let Y=r,ne=o;Y!==B;Y+=T){const re=d?ne:Y,he=d?Y:ne;if(L===1===this.image.get(re,he)){if(L===2)return Ye.distance(Y,ne,r,o);L++}if(_+=p,_>0){if(ne===h)break;ne+=N,_-=m}}return L===2?Ye.distance(l+T,h,r,o):NaN}findAlignmentInRegion(r,o,l,h){const d=Math.floor(h*r),m=Math.max(0,o-d),p=Math.min(this.image.getWidth()-1,o+d);if(p-m<r*3)throw new ae("Alignment top exceeds estimated module size.");const _=Math.max(0,l-d),T=Math.min(this.image.getHeight()-1,l+d);if(T-_<r*3)throw new ae("Alignment bottom exceeds estimated module size.");return new Gr(this.image,m,_,p-m,T-_,r,this.resultPointCallback).find()}}class Ci{constructor(){this.decoder=new Ec}getDecoder(){return this.decoder}decode(r,o){let l,h;if(o!=null&&o.get(Pe.PURE_BARCODE)!==void 0){const _=Ci.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,o),h=Ci.NO_POINTS}else{const _=new fi(r.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(_.getBits(),o),h=_.getPoints()}l.getOther()instanceof hl&&l.getOther().applyMirroredCorrection(h);const d=new qe(l.getText(),l.getRawBytes(),void 0,h,Me.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(at.BYTE_SEGMENTS,m);const p=l.getECLevel();return p!==null&&d.putMetadata(at.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(at.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(at.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o===null||l===null)throw new ae;const h=this.moduleSize(o,r);let d=o[1],m=l[1],p=o[0],_=l[0];if(p>=_||d>=m)throw new ae;if(m-d!==_-p&&(_=p+(m-d),_>=r.getWidth()))throw new ae;const T=Math.round((_-p+1)/h),N=Math.round((m-d+1)/h);if(T<=0||N<=0)throw new ae;if(N!==T)throw new ae;const L=Math.floor(h/2);d+=L,p+=L;const B=p+Math.floor((T-1)*h)-_;if(B>0){if(B>L)throw new ae;p-=B}const Y=d+Math.floor((N-1)*h)-m;if(Y>0){if(Y>L)throw new ae;d-=Y}const ne=new Ve(T,N);for(let re=0;re<N;re++){const he=d+Math.floor(re*h);for(let we=0;we<T;we++)r.get(p+Math.floor(we*h),he)&&ne.set(we,re)}return ne}static moduleSize(r,o){const l=o.getHeight(),h=o.getWidth();let d=r[0],m=r[1],p=!0,_=0;for(;d<h&&m<l;){if(p!==o.get(d,m)){if(++_===5)break;p=!p}d++,m++}if(d===h||m===l)throw new ae;return(d-r[0])/7}}Ci.NO_POINTS=new Array;class ft{PDF417Common(){}static getBitCountSum(r){return Ye.sum(r)}static toIntArray(r){if(r==null||!r.length)return ft.EMPTY_INT_ARRAY;const o=new Int32Array(r.length);let l=0;for(const h of r)o[l++]=h;return o}static getCodeword(r){const o=fe.binarySearch(ft.SYMBOL_TABLE,r&262143);return o<0?-1:(ft.CODEWORD_TABLE[o]-1)%ft.NUMBER_OF_CODEWORDS}}ft.NUMBER_OF_CODEWORDS=929,ft.MAX_CODEWORDS_IN_BARCODE=ft.NUMBER_OF_CODEWORDS-1,ft.MIN_ROWS_IN_BARCODE=3,ft.MAX_ROWS_IN_BARCODE=90,ft.MODULES_IN_CODEWORD=17,ft.MODULES_IN_STOP_PATTERN=18,ft.BARS_IN_MODULE=8,ft.EMPTY_INT_ARRAY=new Int32Array([]),ft.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ft.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ta{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class gt{static detectMultiple(r,o,l){let h=r.getBlackMatrix(),d=gt.detect(l,h);return d.length||(h=h.clone(),h.rotate180(),d=gt.detect(l,h)),new ta(h,d)}static detect(r,o){const l=new Array;let h=0,d=0,m=!1;for(;h<o.getHeight();){const p=gt.findVertices(o,h,d);if(p[0]==null&&p[3]==null){if(!m)break;m=!1,d=0;for(const _ of l)_[1]!=null&&(h=Math.trunc(Math.max(h,_[1].getY()))),_[3]!=null&&(h=Math.max(h,Math.trunc(_[3].getY())));h+=gt.ROW_STEP;continue}if(m=!0,l.push(p),!r)break;p[2]!=null?(d=Math.trunc(p[2].getX()),h=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),h=Math.trunc(p[4].getY()))}return l}static findVertices(r,o,l){const h=r.getHeight(),d=r.getWidth(),m=new Array(8);return gt.copyToResult(m,gt.findRowsWithPattern(r,h,d,o,l,gt.START_PATTERN),gt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),gt.copyToResult(m,gt.findRowsWithPattern(r,h,d,o,l,gt.STOP_PATTERN),gt.INDEXES_STOP_PATTERN),m}static copyToResult(r,o,l){for(let h=0;h<l.length;h++)r[l[h]]=o[h]}static findRowsWithPattern(r,o,l,h,d,m){const p=new Array(4);let _=!1;const T=new Int32Array(m.length);for(;h<o;h+=gt.ROW_STEP){let L=gt.findGuardPattern(r,d,h,l,!1,m,T);if(L!=null){for(;h>0;){const B=gt.findGuardPattern(r,d,--h,l,!1,m,T);if(B!=null)L=B;else{h++;break}}p[0]=new He(L[0],h),p[1]=new He(L[1],h),_=!0;break}}let N=h+1;if(_){let L=0,B=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;N<o;N++){const Y=gt.findGuardPattern(r,B[0],N,l,!1,m,T);if(Y!=null&&Math.abs(B[0]-Y[0])<gt.MAX_PATTERN_DRIFT&&Math.abs(B[1]-Y[1])<gt.MAX_PATTERN_DRIFT)B=Y,L=0;else{if(L>gt.SKIPPED_ROW_COUNT_MAX)break;L++}}N-=L+1,p[2]=new He(B[0],N),p[3]=new He(B[1],N)}return N-h<gt.BARCODE_MIN_HEIGHT&&fe.fill(p,null),p}static findGuardPattern(r,o,l,h,d,m,p){fe.fillWithin(p,0,p.length,0);let _=o,T=0;for(;r.get(_,l)&&_>0&&T++<gt.MAX_PIXEL_DRIFT;)_--;let N=_,L=0,B=m.length;for(let Y=d;N<h;N++)if(r.get(N,l)!==Y)p[L]++;else{if(L===B-1){if(gt.patternMatchVariance(p,m,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return new Int32Array([_,N]);_+=p[0]+p[1],ee.arraycopy(p,2,p,0,L-1),p[L-1]=0,p[L]=0,L--}else L++;p[L]=1,Y=!Y}return L===B-1&&gt.patternMatchVariance(p,m,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE?new Int32Array([_,N-1]):null}static patternMatchVariance(r,o,l){let h=r.length,d=0,m=0;for(let T=0;T<h;T++)d+=r[T],m+=o[T];if(d<m)return 1/0;let p=d/m;l*=p;let _=0;for(let T=0;T<h;T++){let N=r[T],L=o[T]*p,B=N>L?N-L:L-N;if(B>l)return 1/0;_+=B}return _/d}}gt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),gt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),gt.MAX_AVG_VARIANCE=.42,gt.MAX_INDIVIDUAL_VARIANCE=.8,gt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),gt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),gt.MAX_PIXEL_DRIFT=3,gt.MAX_PATTERN_DRIFT=5,gt.SKIPPED_ROW_COUNT_MAX=25,gt.ROW_STEP=5,gt.BARCODE_MIN_HEIGHT=10;class Bn{constructor(r,o){if(o.length===0)throw new R;this.field=r;let l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),ee.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let h=0;for(let d of this.coefficients)h=this.field.add(h,d);return h}let o=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)o=this.field.add(this.field.multiply(r,o),this.coefficients[h]);return o}add(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let h=new Int32Array(l.length),d=l.length-o.length;ee.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=this.field.add(o[m-d],l[m]);return new Bn(this.field,h)}subtract(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Bn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Bn(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1);for(let p=0;p<l;p++){let _=o[p];for(let T=0;T<d;T++)m[p+T]=this.field.add(m[p+T],this.field.multiply(_,h[T]))}return new Bn(this.field,m)}negative(){let r=this.coefficients.length,o=new Int32Array(r);for(let l=0;l<r;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new Bn(this.field,o)}multiplyScalar(r){if(r===0)return new Bn(this.field,new Int32Array([0]));if(r===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let h=0;h<o;h++)l[h]=this.field.multiply(this.coefficients[h],r);return new Bn(this.field,l)}multiplyByMonomial(r,o){if(r<0)throw new R;if(o===0)return new Bn(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+r);for(let d=0;d<l;d++)h[d]=this.field.multiply(this.coefficients[d],o);return new Bn(this.field,h)}toString(){let r=new X;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(o===0||l!==1)&&r.append(l),o!==0&&(o===1?r.append("x"):(r.append("x^"),r.append(o))))}return r.toString()}}class is{add(r,o){return(r+o)%this.modulus}subtract(r,o){return(this.modulus+r-o)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}inverse(r){if(r===0)throw new $n;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class ss extends is{constructor(r,o){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let h=0;h<r;h++)this.expTable[h]=l,l=l*o%r;for(let h=0;h<r-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new Bn(this,new Int32Array([0])),this.one=new Bn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new R;if(o===0)return this.zero;let l=new Int32Array(r+1);return l[0]=o,new Bn(this,l)}}ss.PDF417_GF=new ss(ft.NUMBER_OF_CODEWORDS,3);class as{constructor(){this.field=ss.PDF417_GF}decode(r,o,l){let h=new Bn(this.field,r),d=new Int32Array(o),m=!1;for(let ne=o;ne>0;ne--){let re=h.evaluateAt(this.field.exp(ne));d[o-ne]=re,re!==0&&(m=!0)}if(!m)return 0;let p=this.field.getOne();if(l!=null)for(const ne of l){let re=this.field.exp(r.length-1-ne),he=new Bn(this.field,new Int32Array([this.field.subtract(0,re),1]));p=p.multiply(he)}let _=new Bn(this.field,d),T=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),_,o),N=T[0],L=T[1],B=this.findErrorLocations(N),Y=this.findErrorMagnitudes(L,N,B);for(let ne=0;ne<B.length;ne++){let re=r.length-1-this.field.log(B[ne]);if(re<0)throw U.getChecksumInstance();r[re]=this.field.subtract(r[re],Y[ne])}return B.length}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){let B=r;r=o,o=B}let h=r,d=o,m=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let B=h,Y=m;if(h=d,m=p,h.isZero())throw U.getChecksumInstance();d=B;let ne=this.field.getZero(),re=h.getCoefficient(h.getDegree()),he=this.field.inverse(re);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){let we=d.getDegree()-h.getDegree(),Ue=this.field.multiply(d.getCoefficient(d.getDegree()),he);ne=ne.add(this.field.buildMonomial(we,Ue)),d=d.subtract(h.multiplyByMonomial(we,Ue))}p=ne.multiply(m).subtract(Y).negative()}let _=p.getCoefficient(0);if(_===0)throw U.getChecksumInstance();let T=this.field.inverse(_),N=p.multiply(T),L=d.multiply(T);return[N,L]}findErrorLocations(r){let o=r.getDegree(),l=new Int32Array(o),h=0;for(let d=1;d<this.field.getSize()&&h<o;d++)r.evaluateAt(d)===0&&(l[h]=this.field.inverse(d),h++);if(h!==o)throw U.getChecksumInstance();return l}findErrorMagnitudes(r,o,l){let h=o.getDegree(),d=new Int32Array(h);for(let T=1;T<=h;T++)d[h-T]=this.field.multiply(T,o.getCoefficient(T));let m=new Bn(this.field,d),p=l.length,_=new Int32Array(p);for(let T=0;T<p;T++){let N=this.field.inverse(l[T]),L=this.field.subtract(0,r.evaluateAt(N)),B=this.field.inverse(m.evaluateAt(N));_[T]=this.field.multiply(L,B)}return _}}class zi{constructor(r,o,l,h,d){r instanceof zi?this.constructor_2(r):this.constructor_1(r,o,l,h,d)}constructor_1(r,o,l,h,d){const m=o==null||l==null,p=h==null||d==null;if(m&&p)throw new ae;m?(o=new He(0,h.getY()),l=new He(0,d.getY())):p&&(h=new He(r.getWidth()-1,o.getY()),d=new He(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=o,this.bottomLeft=l,this.topRight=h,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,o){return r==null?o:o==null?r:new zi(r.image,r.topLeft,r.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(r,o,l){let h=this.topLeft,d=this.bottomLeft,m=this.topRight,p=this.bottomRight;if(r>0){let _=l?this.topLeft:this.topRight,T=Math.trunc(_.getY()-r);T<0&&(T=0);let N=new He(_.getX(),T);l?h=N:m=N}if(o>0){let _=l?this.bottomLeft:this.bottomRight,T=Math.trunc(_.getY()+o);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let N=new He(_.getX(),T);l?d=N:p=N}return new zi(this.image,h,d,m,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class os{constructor(r,o,l,h){this.columnCount=r,this.errorCorrectionLevel=h,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class si{constructor(){this.buffer=""}static form(r,o){let l=-1;function h(m,p,_,T,N,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let B=N?parseInt(N.substr(1)):void 0,Y;switch(L){case"s":Y=o[l];break;case"c":Y=o[l][0];break;case"f":Y=parseFloat(o[l]).toFixed(m);break;case"p":Y=parseFloat(o[l]).toPrecision(m);break;case"e":Y=parseFloat(o[l]).toExponential(m);break;case"x":Y=parseInt(o[l]).toString(B||16);break;case"d":Y=parseFloat(parseInt(o[l],B||10).toPrecision(m)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(B);let ne=parseInt(_),re=_&&_[0]+""=="0"?"0":" ";for(;Y.length<ne;)Y=p!==void 0?Y+re:re+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}format(r,...o){this.buffer+=si.form(r,o)}toString(){return this.buffer}}class bs{constructor(r){this.boundingBox=new zi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let o=this.getCodeword(r);if(o!=null)return o;for(let l=1;l<bs.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(r)-l;if(h>=0&&(o=this.codewords[h],o!=null)||(h=this.imageRowToCodewordIndex(r)+l,h<this.codewords.length&&(o=this.codewords[h],o!=null)))return o}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,o){this.codewords[this.imageRowToCodewordIndex(r)]=o}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new si;let o=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return r.toString()}}bs.MAX_NEARBY_DISTANCE=5;class Fn{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let o=this.values.get(r);o==null&&(o=0),o++,this.values.set(r,o)}getValue(){let r=-1,o=new Array;for(const[l,h]of this.values.entries()){const d={getKey:()=>l,getValue:()=>h};d.getValue()>r?(r=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===r&&o.push(d.getKey())}return ft.toIntArray(o)}getConfidence(r){return this.values.get(r)}}class an extends bs{constructor(r,o){super(r),this._isLeft=o}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,r);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),_=-1,T=1,N=0;for(let L=m;L<p;L++){if(o[L]==null)continue;let B=o[L],Y=B.getRowNumber()-_;if(Y===0)N++;else if(Y===1)T=Math.max(T,N),N=1,_=B.getRowNumber();else if(Y<0||B.getRowNumber()>=r.getRowCount()||Y>L)o[L]=null;else{let ne;T>2?ne=(T-2)*Y:ne=Y;let re=ne>=L;for(let he=1;he<=ne&&!re;he++)re=o[L-he]!=null;re?o[L]=null:(_=B.getRowNumber(),N=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let o=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=o.length)continue;o[h]++}return o}adjustIncompleteIndicatorColumnRowNumbers(r){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),h=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.getCodewords(),_=-1;for(let T=d;T<m;T++){if(p[T]==null)continue;let N=p[T];N.setRowNumberAsRowIndicatorColumn();let L=N.getRowNumber()-_;L===0||(L===1?_=N.getRowNumber():N.getRowNumber()>=r.getRowCount()?p[T]=null:_=N.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),o=new Fn,l=new Fn,h=new Fn,d=new Fn;for(let p of r){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let _=p.getValue()%30,T=p.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:l.setValue(_*3+1);break;case 1:d.setValue(_/3),h.setValue(_%3);break;case 2:o.setValue(_+1);break}}if(o.getValue().length===0||l.getValue().length===0||h.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<ft.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>ft.MAX_ROWS_IN_BARCODE)return null;let m=new os(o.getValue()[0],l.getValue()[0],h.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,o){for(let l=0;l<r.length;l++){let h=r[l];if(r[l]==null)continue;let d=h.getValue()%30,m=h.getRowNumber();if(m>o.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==o.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ls{constructor(r,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=ft.MAX_CODEWORDS_IN_BARCODE,o;do o=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(o,h,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&o[l]!=null&&r[l].getRowNumber()===o[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let d=this.detectionResultColumns[h].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=ls.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=ls.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),o=0):++o),o}adjustRowNumbers(r,o,l){if(!this.detectionResultColumns[r-1])return;let h=l[o],d=this.detectionResultColumns[r-1].getCodewords(),m=d;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let p=new Array(14);p[2]=d[o],p[3]=m[o],o>0&&(p[0]=l[o-1],p[4]=d[o-1],p[5]=m[o-1]),o>1&&(p[8]=l[o-2],p[10]=d[o-2],p[11]=m[o-2]),o<l.length-1&&(p[1]=l[o+1],p[6]=d[o+1],p[7]=m[o+1]),o<l.length-2&&(p[9]=l[o+2],p[12]=d[o+2],p[13]=m[o+2]);for(let _ of p)if(ls.adjustRowNumber(h,_))return}static adjustRowNumber(r,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===r.getBucket()?(r.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,o){this.detectionResultColumns[r]=o}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new si;for(let l=0;l<r.getCodewords().length;l++){o.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[h].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class Hi{constructor(r,o,l,h){this.rowNumber=Hi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Hi.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Hi.BARCODE_ROW_UNKNOWN=-1;class br{static initialize(){for(let r=0;r<ft.SYMBOL_TABLE.length;r++){let o=ft.SYMBOL_TABLE[r],l=o&1;for(let h=0;h<ft.BARS_IN_MODULE;h++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,br.RATIOS_TABLE[r]||(br.RATIOS_TABLE[r]=new Array(ft.BARS_IN_MODULE)),br.RATIOS_TABLE[r][ft.BARS_IN_MODULE-h-1]=Math.fround(d/ft.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let o=br.getDecodedCodewordValue(br.sampleBitCounts(r));return o!==-1?o:br.getClosestDecodedValue(r)}static sampleBitCounts(r){let o=Ye.sum(r),l=new Int32Array(ft.BARS_IN_MODULE),h=0,d=0;for(let m=0;m<ft.MODULES_IN_CODEWORD;m++){let p=o/(2*ft.MODULES_IN_CODEWORD)+m*o/ft.MODULES_IN_CODEWORD;d+r[h]<=p&&(d+=r[h],h++),l[h]++}return l}static getDecodedCodewordValue(r){let o=br.getBitValue(r);return ft.getCodeword(o)===-1?-1:o}static getBitValue(r){let o=0;for(let l=0;l<r.length;l++)for(let h=0;h<r[l];h++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(r){let o=Ye.sum(r),l=new Array(ft.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/o);let h=Je.MAX_VALUE,d=-1;this.bSymbolTableReady||br.initialize();for(let m=0;m<br.RATIOS_TABLE.length;m++){let p=0,_=br.RATIOS_TABLE[m];for(let T=0;T<ft.BARS_IN_MODULE;T++){let N=Math.fround(_[T]-l[T]);if(p+=Math.fround(N*N),p>=h)break}p<h&&(h=p,d=ft.SYMBOL_TABLE[m])}return d}}br.bSymbolTableReady=!1,br.RATIOS_TABLE=new Array(ft.SYMBOL_TABLE.length).map(O=>new Array(ft.BARS_IN_MODULE));class na{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class ra{static parseLong(r,o=void 0){return parseInt(r,o)}}class Gi extends w{}Gi.kind="NullPointerException";class ia{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,o,l){if(r==null)throw new Gi;if(o<0||o>r.length||l<0||o+l>r.length||o+l<0)throw new K;if(l===0)return;for(let h=0;h<l;h++)this.write(r[o+h])}flush(){}close(){}}class Ti extends w{}class fl extends ia{constructor(r=32){if(super(),this.count=0,r<0)throw new R("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Ti;l=ie.MAX_VALUE}this.buf=fe.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,o,l){if(o<0||o>r.length||l<0||o+l-r.length>0)throw new K;this.ensureCapacity(this.count+l),ee.arraycopy(r,o,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return fe.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var on;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(on||(on={}));function Bs(){if(typeof window<"u")return window.BigInt||null;if(typeof Fh<"u")return Fh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let As;function Si(O){if(typeof As>"u"&&(As=Bs()),As===null)throw new Error("BigInt is not supported!");return As(O)}function ja(){let O=[];O[0]=Si(1);let r=Si(900);O[1]=r;for(let o=2;o<16;o++)O[o]=O[o-1]*r;return O}class xe{static decode(r,o){let l=new X(""),h=P.ISO8859_1;l.enableDecoding(h);let d=1,m=r[d++],p=new na;for(;d<r[0];){switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:d=xe.textCompaction(r,d,l);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:d=xe.byteCompaction(m,r,h,d,l);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:d=xe.numericCompaction(r,d,l);break;case xe.ECI_CHARSET:P.getCharacterSetECIByValue(r[d++]);break;case xe.ECI_GENERAL_PURPOSE:d+=2;break;case xe.ECI_USER_DEFINED:d++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=xe.decodeMacroBlock(r,d,p);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new H;default:d--,d=xe.textCompaction(r,d,l);break}if(d<r.length)m=r[d++];else throw H.getFormatInstance()}if(l.length()===0)throw H.getFormatInstance();let _=new Gt(null,l.toString(),null,o);return _.setOther(p),_}static decodeMacroBlock(r,o,l){if(o+xe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw H.getFormatInstance();let h=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<xe.NUMBER_OF_SEQUENCE_CODEWORDS;p++,o++)h[p]=r[o];l.setSegmentIndex(ie.parseInt(xe.decodeBase900toBase10(h,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new X;o=xe.textCompaction(r,o,d),l.setFileId(d.toString());let m=-1;for(r[o]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<r[0];)switch(r[o]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,r[o]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new X;o=xe.textCompaction(r,o+1,p),l.setFileName(p.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new X;o=xe.textCompaction(r,o+1,_),l.setSender(_.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new X;o=xe.textCompaction(r,o+1,T),l.setAddressee(T.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new X;o=xe.numericCompaction(r,o+1,N),l.setSegmentCount(ie.parseInt(N.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new X;o=xe.numericCompaction(r,o+1,L),l.setTimestamp(ra.parseLong(L.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new X;o=xe.numericCompaction(r,o+1,B),l.setChecksum(ie.parseInt(B.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new X;o=xe.numericCompaction(r,o+1,Y),l.setFileSize(ra.parseLong(Y.toString()));break;default:throw H.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(m!==-1){let p=o-m;l.isLastSegment()&&p--,l.setOptionalData(fe.copyOfRange(r,m,m+p))}return o}static textCompaction(r,o,l){let h=new Int32Array((r[0]-o)*2),d=new Int32Array((r[0]-o)*2),m=0,p=!1;for(;o<r[0]&&!p;){let _=r[o++];if(_<xe.TEXT_COMPACTION_MODE_LATCH)h[m]=_/30,h[m+1]=_%30,m+=2;else switch(_){case xe.TEXT_COMPACTION_MODE_LATCH:h[m++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,p=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=r[o++],d[m]=_,m++;break}}return xe.decodeTextCompaction(h,d,m,l),o}static decodeTextCompaction(r,o,l,h){let d=on.ALPHA,m=on.ALPHA,p=0;for(;p<l;){let _=r[p],T="";switch(d){case on.ALPHA:if(_<26)T=String.fromCharCode(65+_);else switch(_){case 26:T=" ";break;case xe.LL:d=on.LOWER;break;case xe.ML:d=on.MIXED;break;case xe.PS:m=d,d=on.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=on.ALPHA;break}break;case on.LOWER:if(_<26)T=String.fromCharCode(97+_);else switch(_){case 26:T=" ";break;case xe.AS:m=d,d=on.ALPHA_SHIFT;break;case xe.ML:d=on.MIXED;break;case xe.PS:m=d,d=on.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=on.ALPHA;break}break;case on.MIXED:if(_<xe.PL)T=xe.MIXED_CHARS[_];else switch(_){case xe.PL:d=on.PUNCT;break;case 26:T=" ";break;case xe.LL:d=on.LOWER;break;case xe.AL:d=on.ALPHA;break;case xe.PS:m=d,d=on.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=on.ALPHA;break}break;case on.PUNCT:if(_<xe.PAL)T=xe.PUNCT_CHARS[_];else switch(_){case xe.PAL:d=on.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=on.ALPHA;break}break;case on.ALPHA_SHIFT:if(d=m,_<26)T=String.fromCharCode(65+_);else switch(_){case 26:T=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:d=on.ALPHA;break}break;case on.PUNCT_SHIFT:if(d=m,_<xe.PAL)T=xe.PUNCT_CHARS[_];else switch(_){case xe.PAL:d=on.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=on.ALPHA;break}break}T!==""&&h.append(T),p++}}static byteCompaction(r,o,l,h,d){let m=new fl,p=0,_=0,T=!1;switch(r){case xe.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),L=o[h++];for(;h<o[0]&&!T;)switch(N[p++]=L,_=900*_+L,L=o[h++],L){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,T=!0;break;default:if(p%5===0&&p>0){for(let B=0;B<6;++B)m.write(Number(Si(_)>>Si(8*(5-B))));_=0,p=0}break}h===o[0]&&L<xe.TEXT_COMPACTION_MODE_LATCH&&(N[p++]=L);for(let B=0;B<p;B++)m.write(N[B]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<o[0]&&!T;){let B=o[h++];if(B<xe.TEXT_COMPACTION_MODE_LATCH)p++,_=900*_+B;else switch(B){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,T=!0;break}if(p%5===0&&p>0){for(let Y=0;Y<6;++Y)m.write(Number(Si(_)>>Si(8*(5-Y))));_=0,p=0}}break}return d.append(Q.decode(m.toByteArray(),l)),h}static numericCompaction(r,o,l){let h=0,d=!1,m=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;o<r[0]&&!d;){let p=r[o++];if(o===r[0]&&(d=!0),p<xe.TEXT_COMPACTION_MODE_LATCH)m[h]=p,h++;else switch(p){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(h%xe.MAX_NUMERIC_CODEWORDS===0||p===xe.NUMERIC_COMPACTION_MODE_LATCH||d)&&h>0&&(l.append(xe.decodeBase900toBase10(m,h)),h=0)}return o}static decodeBase900toBase10(r,o){let l=Si(0);for(let d=0;d<o;d++)l+=xe.EXP900[o-d-1]*Si(r[d]);let h=l.toString();if(h.charAt(0)!=="1")throw new H;return h.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=Bs()?ja():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class bt{constructor(){}static decode(r,o,l,h,d,m,p){let _=new zi(r,o,l,h,d),T=null,N=null,L;for(let ne=!0;;ne=!1){if(o!=null&&(T=bt.getRowIndicatorColumn(r,_,o,!0,m,p)),h!=null&&(N=bt.getRowIndicatorColumn(r,_,h,!1,m,p)),L=bt.merge(T,N),L==null)throw ae.getNotFoundInstance();let re=L.getBoundingBox();if(ne&&re!=null&&(re.getMinY()<_.getMinY()||re.getMaxY()>_.getMaxY()))_=re;else break}L.setBoundingBox(_);let B=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,T),L.setDetectionResultColumn(B,N);let Y=T!=null;for(let ne=1;ne<=B;ne++){let re=Y?ne:B-ne;if(L.getDetectionResultColumn(re)!==void 0)continue;let he;re===0||re===B?he=new an(_,re===0):he=new bs(_),L.setDetectionResultColumn(re,he);let we=-1,Ue=we;for(let Fe=_.getMinY();Fe<=_.getMaxY();Fe++){if(we=bt.getStartColumn(L,re,Fe,Y),we<0||we>_.getMaxX()){if(Ue===-1)continue;we=Ue}let Oe=bt.detectCodeword(r,_.getMinX(),_.getMaxX(),Y,we,Fe,m,p);Oe!=null&&(he.setCodeword(Fe,Oe),Ue=we,m=Math.min(m,Oe.getWidth()),p=Math.max(p,Oe.getWidth()))}}return bt.createDecoderResult(L)}static merge(r,o){if(r==null&&o==null)return null;let l=bt.getBarcodeMetadata(r,o);if(l==null)return null;let h=zi.merge(bt.adjustBoundingBox(r),bt.adjustBoundingBox(o));return new ls(l,h)}static adjustBoundingBox(r){if(r==null)return null;let o=r.getRowHeights();if(o==null)return null;let l=bt.getMax(o),h=0;for(let p of o)if(h+=l-p,p>0)break;let d=r.getCodewords();for(let p=0;h>0&&d[p]==null;p++)h--;let m=0;for(let p=o.length-1;p>=0&&(m+=l-o[p],!(o[p]>0));p--);for(let p=d.length-1;m>0&&d[p]==null;p--)m--;return r.getBoundingBox().addMissingRows(h,m,r.isLeft())}static getMax(r){let o=-1;for(let l of r)o=Math.max(o,l);return o}static getBarcodeMetadata(r,o){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let h;return o==null||(h=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(r,o,l,h,d,m){let p=new an(o,h);for(let _=0;_<2;_++){let T=_===0?1:-1,N=Math.trunc(Math.trunc(l.getX()));for(let L=Math.trunc(Math.trunc(l.getY()));L<=o.getMaxY()&&L>=o.getMinY();L+=T){let B=bt.detectCodeword(r,0,r.getWidth(),h,N,L,d,m);B!=null&&(p.setCodeword(L,B),h?N=B.getStartX():N=B.getEndX())}}return p}static adjustCodewordCount(r,o){let l=o[0][1],h=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-bt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(h.length===0){if(d<1||d>ft.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();l.setValue(d)}else h[0]!==d&&l.setValue(d)}static createDecoderResult(r){let o=bt.createBarcodeMatrix(r);bt.adjustCodewordCount(r,o);let l=new Array,h=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],m=new Array;for(let _=0;_<r.getBarcodeRowCount();_++)for(let T=0;T<r.getBarcodeColumnCount();T++){let N=o[_][T+1].getValue(),L=_*r.getBarcodeColumnCount()+T;N.length===0?l.push(L):N.length===1?h[L]=N[0]:(m.push(L),d.push(N))}let p=new Array(d.length);for(let _=0;_<p.length;_++)p[_]=d[_];return bt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),h,ft.toIntArray(l),ft.toIntArray(m),p)}static createDecoderResultFromAmbiguousValues(r,o,l,h,d){let m=new Int32Array(h.length),p=100;for(;p-- >0;){for(let _=0;_<m.length;_++)o[h[_]]=d[_][m[_]];try{return bt.decodeCodewords(o,r,l)}catch(_){if(!(_ instanceof U))throw _}if(m.length===0)throw U.getChecksumInstance();for(let _=0;_<m.length;_++)if(m[_]<d[_].length-1){m[_]++;break}else if(m[_]=0,_===m.length-1)throw U.getChecksumInstance()}throw U.getChecksumInstance()}static createBarcodeMatrix(r){let o=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let h=0;h<o.length;h++)for(let d=0;d<o[h].length;d++)o[h][d]=new Fn;let l=0;for(let h of r.getDetectionResultColumns()){if(h!=null){for(let d of h.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(r,o){return o>=0&&o<=r.getBarcodeColumnCount()+1}static getStartColumn(r,o,l,h){let d=h?1:-1,m=null;if(bt.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(bt.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let p=0;for(;bt.isValidBarcodeColumn(r,o-d);){o-=d;for(let _ of r.getDetectionResultColumn(o).getCodewords())if(_!=null)return(h?_.getEndX():_.getStartX())+d*p*(_.getEndX()-_.getStartX());p++}return h?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,o,l,h,d,m,p,_){d=bt.adjustCodewordStartColumn(r,o,l,h,d,m);let T=bt.getModuleBitCount(r,o,l,h,d,m);if(T==null)return null;let N,L=Ye.sum(T);if(h)N=d+L;else{for(let ne=0;ne<T.length/2;ne++){let re=T[ne];T[ne]=T[T.length-1-ne],T[T.length-1-ne]=re}N=d,d=N-L}if(!bt.checkCodewordSkew(L,p,_))return null;let B=br.getDecodedValue(T),Y=ft.getCodeword(B);return Y===-1?null:new Hi(d,N,bt.getCodewordBucketNumber(B),Y)}static getModuleBitCount(r,o,l,h,d,m){let p=d,_=new Int32Array(8),T=0,N=h?1:-1,L=h;for(;(h?p<l:p>=o)&&T<_.length;)r.get(p,m)===L?(_[T]++,p+=N):(T++,L=!L);return T===_.length||p===(h?l:o)&&T===_.length-1?_:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,o,l,h,d,m){let p=d,_=h?-1:1;for(let T=0;T<2;T++){for(;(h?p>=o:p<l)&&h===r.get(p,m);){if(Math.abs(d-p)>bt.CODEWORD_SKEW_SIZE)return d;p+=_}_=-_,h=!h}return p}static checkCodewordSkew(r,o,l){return o-bt.CODEWORD_SKEW_SIZE<=r&&r<=l+bt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,o,l){if(r.length===0)throw H.getFormatInstance();let h=1<<o+1,d=bt.correctErrors(r,l,h);bt.verifyCodewordCount(r,h);let m=xe.decode(r,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(r,o,l){if(o!=null&&o.length>l/2+bt.MAX_ERRORS||l<0||l>bt.MAX_EC_CODEWORDS)throw U.getChecksumInstance();return bt.errorCorrection.decode(r,l,o)}static verifyCodewordCount(r,o){if(r.length<4)throw H.getFormatInstance();let l=r[0];if(l>r.length)throw H.getFormatInstance();if(l===0)if(o<r.length)r[0]=r.length-o;else throw H.getFormatInstance()}static getBitCountForCodeword(r){let o=new Int32Array(8),l=0,h=o.length-1;for(;!((r&1)!==l&&(l=r&1,h--,h<0));)o[h]++,r>>=1;return o}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return bt.getCodewordBucketNumber(bt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let o=new si;for(let l=0;l<r.length;l++){o.format("Row %2d: ",l);for(let h=0;h<r[l].length;h++){let d=r[l][h];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}bt.CODEWORD_SKEW_SIZE=2,bt.MAX_ERRORS=3,bt.MAX_EC_CODEWORDS=512,bt.errorCorrection=new as;class hr{decode(r,o=null){let l=hr.decode(r,o,!1);if(l==null||l.length===0||l[0]==null)throw ae.getNotFoundInstance();return l[0]}decodeMultiple(r,o=null){try{return hr.decode(r,o,!0)}catch(l){throw l instanceof H||l instanceof U?ae.getNotFoundInstance():l}}static decode(r,o,l){const h=new Array,d=gt.detectMultiple(r,o,l);for(const m of d.getPoints()){const p=bt.decode(d.getBits(),m[4],m[5],m[6],m[7],hr.getMinCodewordWidth(m),hr.getMaxCodewordWidth(m)),_=new qe(p.getText(),p.getRawBytes(),void 0,m,Me.PDF_417);_.putMetadata(at.ERROR_CORRECTION_LEVEL,p.getECLevel());const T=p.getOther();T!=null&&_.putMetadata(at.PDF417_EXTRA_METADATA,T),h.push(_)}return h.map(m=>m)}static getMaxWidth(r,o){return r==null||o==null?0:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMinWidth(r,o){return r==null||o==null?ie.MAX_VALUE:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(hr.getMaxWidth(r[0],r[4]),hr.getMaxWidth(r[6],r[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.max(hr.getMaxWidth(r[1],r[5]),hr.getMaxWidth(r[7],r[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(hr.getMinWidth(r[0],r[4]),hr.getMinWidth(r[6],r[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.min(hr.getMinWidth(r[1],r[5]),hr.getMinWidth(r[7],r[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}reset(){}}class js extends w{}js.kind="ReaderException";class Us{constructor(r,o){this.verbose=r===!0,o&&this.setHints(o)}decode(r,o){return o&&this.setHints(o),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const o=!a(r)&&r.get(Pe.TRY_HARDER)===!0,l=a(r)?null:r.get(Pe.POSSIBLE_FORMATS),h=new Array;if(!a(l)){const d=l.some(m=>m===Me.UPC_A||m===Me.UPC_E||m===Me.EAN_13||m===Me.EAN_8||m===Me.CODABAR||m===Me.CODE_39||m===Me.CODE_93||m===Me.CODE_128||m===Me.ITF||m===Me.RSS_14||m===Me.RSS_EXPANDED);d&&!o&&h.push(new mr(r,this.verbose)),l.includes(Me.QR_CODE)&&h.push(new Ci),l.includes(Me.DATA_MATRIX)&&h.push(new _i),l.includes(Me.AZTEC)&&h.push(new Bi),l.includes(Me.PDF_417)&&h.push(new hr),d&&o&&h.push(new mr(r,this.verbose))}h.length===0&&(o||h.push(new mr(r,this.verbose)),h.push(new Ci),h.push(new _i),h.push(new Bi),h.push(new hr),o&&h.push(new mr(r,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new js("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(r,this.hints)}catch(l){if(l instanceof js)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class dl extends Ge{constructor(r=null,o=500){const l=new Us;l.setHints(r),super(l,o)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class gl extends Ge{constructor(r=500){super(new hr,r)}}class Do extends Ge{constructor(r=500){super(new Ci,r)}}var Cs;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(Cs||(Cs={}));var zn=Cs;class Vs{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new kt(r,Int32Array.from([1])))}buildGenerator(r){const o=this.cachedGenerators;if(r>=o.length){let l=o[o.length-1];const h=this.field;for(let d=o.length;d<=r;d++){const m=l.multiply(new kt(h,Int32Array.from([1,h.exp(d-1+h.getGeneratorBase())])));o.push(m),l=m}}return o[r]}encode(r,o){if(o===0)throw new R("No error correction bytes");const l=r.length-o;if(l<=0)throw new R("No data bytes provided");const h=this.buildGenerator(o),d=new Int32Array(l);ee.arraycopy(r,0,d,0,l);let m=new kt(this.field,d);m=m.multiplyByMonomial(o,1);const _=m.divide(h)[1].getCoefficients(),T=o-_.length;for(let N=0;N<T;N++)r[l+N]=0;ee.arraycopy(_,0,r,l+T,_.length)}}class Tn{constructor(){}static applyMaskPenaltyRule1(r){return Tn.applyMaskPenaltyRule1Internal(r,!0)+Tn.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d-1;m++){const p=l[m];for(let _=0;_<h-1;_++){const T=p[_];T===p[_+1]&&T===l[m+1][_]&&T===l[m+1][_+1]&&o++}}return Tn.N2*o}static applyMaskPenaltyRule3(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d;m++)for(let p=0;p<h;p++){const _=l[m];p+6<h&&_[p]===1&&_[p+1]===0&&_[p+2]===1&&_[p+3]===1&&_[p+4]===1&&_[p+5]===0&&_[p+6]===1&&(Tn.isWhiteHorizontal(_,p-4,p)||Tn.isWhiteHorizontal(_,p+7,p+11))&&o++,m+6<d&&l[m][p]===1&&l[m+1][p]===0&&l[m+2][p]===1&&l[m+3][p]===1&&l[m+4][p]===1&&l[m+5][p]===0&&l[m+6][p]===1&&(Tn.isWhiteVertical(l,p,m-4,m)||Tn.isWhiteVertical(l,p,m+7,m+11))&&o++}return o*Tn.N3}static isWhiteHorizontal(r,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let h=o;h<l;h++)if(r[h]===1)return!1;return!0}static isWhiteVertical(r,o,l,h){l=Math.max(l,0),h=Math.min(h,r.length);for(let d=l;d<h;d++)if(r[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let _=0;_<d;_++){const T=l[_];for(let N=0;N<h;N++)T[N]===1&&o++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*Tn.N4}static getDataMaskBit(r,o,l){let h,d;switch(r){case 0:h=l+o&1;break;case 1:h=l&1;break;case 2:h=o%3;break;case 3:h=(l+o)%3;break;case 4:h=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,h=(d&1)+d%3;break;case 6:d=l*o,h=(d&1)+d%3&1;break;case 7:d=l*o,h=d%3+(l+o&1)&1;break;default:throw new R("Invalid mask pattern: "+r)}return h===0}static applyMaskPenaltyRule1Internal(r,o){let l=0;const h=o?r.getHeight():r.getWidth(),d=o?r.getWidth():r.getHeight(),m=r.getArray();for(let p=0;p<h;p++){let _=0,T=-1;for(let N=0;N<d;N++){const L=o?m[p][N]:m[N][p];L===T?_++:(_>=5&&(l+=Tn.N1+(_-5)),_=1,T=L)}_>=5&&(l+=Tn.N1+(_-5))}return l}}Tn.N1=3,Tn.N2=3,Tn.N3=40,Tn.N4=10;class Fs{constructor(r,o){this.width=r,this.height=o;const l=new Array(o);for(let h=0;h!==o;h++)l[h]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,o){return this.bytes[o][r]}getArray(){return this.bytes}setNumber(r,o,l){this.bytes[o][r]=l}setBoolean(r,o,l){this.bytes[o][r]=l?1:0}clear(r){for(const o of this.bytes)fe.fill(o,r)}equals(r){if(!(r instanceof Fs))return!1;const o=r;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,h=this.height;l<h;++l){const d=this.bytes[l],m=o.bytes[l];for(let p=0,_=this.width;p<_;++p)if(d[p]!==m[p])return!1}return!0}toString(){const r=new X;for(let o=0,l=this.height;o<l;++o){const h=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(h[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class qr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new X;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<qr.NUM_MASK_PATTERNS}}qr.NUM_MASK_PATTERNS=8;class ln extends w{}ln.kind="WriterException";class ct{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,o,l,h,d){ct.clearMatrix(d),ct.embedBasicPatterns(l,d),ct.embedTypeInfo(o,h,d),ct.maybeEmbedVersionInfo(l,d),ct.embedDataBits(r,h,d)}static embedBasicPatterns(r,o){ct.embedPositionDetectionPatternsAndSeparators(o),ct.embedDarkDotAtLeftBottomCorner(o),ct.maybeEmbedPositionAdjustmentPatterns(r,o),ct.embedTimingPatterns(o)}static embedTypeInfo(r,o,l){const h=new ve;ct.makeTypeInfoBits(r,o,h);for(let d=0,m=h.getSize();d<m;++d){const p=h.get(h.getSize()-1-d),_=ct.TYPE_INFO_COORDINATES[d],T=_[0],N=_[1];if(l.setBoolean(T,N,p),d<8){const L=l.getWidth()-d-1;l.setBoolean(L,8,p)}else{const B=l.getHeight()-7+(d-8);l.setBoolean(8,B,p)}}}static maybeEmbedVersionInfo(r,o){if(r.getVersionNumber()<7)return;const l=new ve;ct.makeVersionInfoBits(r,l);let h=6*3-1;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const p=l.get(h);h--,o.setBoolean(d,o.getHeight()-11+m,p),o.setBoolean(o.getHeight()-11+m,d,p)}}static embedDataBits(r,o,l){let h=0,d=-1,m=l.getWidth()-1,p=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);p>=0&&p<l.getHeight();){for(let _=0;_<2;++_){const T=m-_;if(!ct.isEmpty(l.get(T,p)))continue;let N;h<r.getSize()?(N=r.get(h),++h):N=!1,o!==255&&Tn.getDataMaskBit(o,T,p)&&(N=!N),l.setBoolean(T,p,N)}p+=d}d=-d,p+=d,m-=2}if(h!==r.getSize())throw new ln("Not all bits consumed: "+h+"/"+r.getSize())}static findMSBSet(r){return 32-ie.numberOfLeadingZeros(r)}static calculateBCHCode(r,o){if(o===0)throw new R("0 polynomial");const l=ct.findMSBSet(o);for(r<<=l-1;ct.findMSBSet(r)>=l;)r^=o<<ct.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,o,l){if(!qr.isValidMaskPattern(o))throw new ln("Invalid mask pattern");const h=r.getBits()<<3|o;l.appendBits(h,5);const d=ct.calculateBCHCode(h,ct.TYPE_INFO_POLY);l.appendBits(d,10);const m=new ve;if(m.appendBits(ct.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new ln("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,o){o.appendBits(r.getVersionNumber(),6);const l=ct.calculateBCHCode(r.getVersionNumber(),ct.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new ln("should not happen but we got: "+o.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let o=8;o<r.getWidth()-8;++o){const l=(o+1)%2;ct.isEmpty(r.get(o,6))&&r.setNumber(o,6,l),ct.isEmpty(r.get(6,o))&&r.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new ln;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,o,l){for(let h=0;h<8;++h){if(!ct.isEmpty(l.get(r+h,o)))throw new ln;l.setNumber(r+h,o,0)}}static embedVerticalSeparationPattern(r,o,l){for(let h=0;h<7;++h){if(!ct.isEmpty(l.get(r,o+h)))throw new ln;l.setNumber(r,o+h,0)}}static embedPositionAdjustmentPattern(r,o,l){for(let h=0;h<5;++h){const d=ct.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPattern(r,o,l){for(let h=0;h<7;++h){const d=ct.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPatternsAndSeparators(r){const o=ct.POSITION_DETECTION_PATTERN[0].length;ct.embedPositionDetectionPattern(0,0,r),ct.embedPositionDetectionPattern(r.getWidth()-o,0,r),ct.embedPositionDetectionPattern(0,r.getWidth()-o,r);const l=8;ct.embedHorizontalSeparationPattern(0,l-1,r),ct.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),ct.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const h=7;ct.embedVerticalSeparationPattern(h,0,r),ct.embedVerticalSeparationPattern(r.getHeight()-h-1,0,r),ct.embedVerticalSeparationPattern(h,r.getHeight()-h,r)}static maybeEmbedPositionAdjustmentPatterns(r,o){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,h=ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=h.length;d!==m;d++){const p=h[d];if(p>=0)for(let _=0;_!==m;_++){const T=h[_];T>=0&&ct.isEmpty(o.get(T,p))&&ct.embedPositionAdjustmentPattern(T-2,p-2,o)}}}}ct.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ct.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ct.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ct.VERSION_INFO_POLY=7973,ct.TYPE_INFO_POLY=1335,ct.TYPE_INFO_MASK_PATTERN=21522;class ml{constructor(r,o){this.dataBytes=r,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class fn{constructor(){}static calculateMaskPenalty(r){return Tn.applyMaskPenaltyRule1(r)+Tn.applyMaskPenaltyRule2(r)+Tn.applyMaskPenaltyRule3(r)+Tn.applyMaskPenaltyRule4(r)}static encode(r,o,l=null){let h=fn.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(zn.CHARACTER_SET)!==void 0;d&&(h=l.get(zn.CHARACTER_SET).toString());const m=this.chooseMode(r,h),p=new ve;if(m===lt.BYTE&&(d||fn.DEFAULT_BYTE_MODE_ENCODING!==h)){const Fe=P.getCharacterSetECIByName(h);Fe!==void 0&&this.appendECI(Fe,p)}this.appendModeInfo(m,p);const _=new ve;this.appendBytes(r,m,_,h);let T;if(l!==null&&l.get(zn.QR_VERSION)!==void 0){const Fe=Number.parseInt(l.get(zn.QR_VERSION).toString(),10);T=Qe.getVersionForNumber(Fe);const Oe=this.calculateBitsNeeded(m,p,_,T);if(!this.willFit(Oe,T,o))throw new ln("Data too big for requested version")}else T=this.recommendVersion(o,m,p,_);const N=new ve;N.appendBitArray(p);const L=m===lt.BYTE?_.getSizeInBytes():r.length;this.appendLengthInfo(L,T,m,N),N.appendBitArray(_);const B=T.getECBlocksForLevel(o),Y=T.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(Y,N);const ne=this.interleaveWithECBytes(N,T.getTotalCodewords(),Y,B.getNumBlocks()),re=new qr;re.setECLevel(o),re.setMode(m),re.setVersion(T);const he=T.getDimensionForVersion(),we=new Fs(he,he),Ue=this.chooseMaskPattern(ne,o,T,we);return re.setMaskPattern(Ue),ct.buildMatrix(ne,o,T,Ue,we),re.setMatrix(we),re}static recommendVersion(r,o,l,h){const d=this.calculateBitsNeeded(o,l,h,Qe.getVersionForNumber(1)),m=this.chooseVersion(d,r),p=this.calculateBitsNeeded(o,l,h,m);return this.chooseVersion(p,r)}static calculateBitsNeeded(r,o,l,h){return o.getSize()+r.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(r){return r<fn.ALPHANUMERIC_TABLE.length?fn.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,o=null){if(P.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(r))return lt.KANJI;let l=!1,h=!1;for(let d=0,m=r.length;d<m;++d){const p=r.charAt(d);if(fn.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)h=!0;else return lt.BYTE}return h?lt.ALPHANUMERIC:l?lt.NUMERIC:lt.BYTE}static isOnlyDoubleByteKanji(r){let o;try{o=Q.encode(r,P.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const d=o[h]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,o,l,h){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let p=0;p<qr.NUM_MASK_PATTERNS;p++){ct.buildMatrix(r,o,l,p,h);let _=this.calculateMaskPenalty(h);_<d&&(d=_,m=p)}return m}static chooseVersion(r,o){for(let l=1;l<=40;l++){const h=Qe.getVersionForNumber(l);if(fn.willFit(r,h,o))return h}throw new ln("Data too big")}static willFit(r,o,l){const h=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),p=h-m,_=(r+7)/8;return p>=_}static terminateBits(r,o){const l=r*8;if(o.getSize()>l)throw new ln("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const h=o.getSize()&7;if(h>0)for(let m=h;m<8;m++)o.appendBit(!1);const d=r-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits(m&1?17:236,8);if(o.getSize()!==l)throw new ln("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,o,l,h,d,m){if(h>=l)throw new ln("Block ID too large");const p=r%l,_=l-p,T=Math.floor(r/l),N=T+1,L=Math.floor(o/l),B=L+1,Y=T-L,ne=N-B;if(Y!==ne)throw new ln("EC bytes mismatch");if(l!==_+p)throw new ln("RS blocks mismatch");if(r!==(L+Y)*_+(B+ne)*p)throw new ln("Total bytes mismatch");h<_?(d[0]=L,m[0]=Y):(d[0]=B,m[0]=ne)}static interleaveWithECBytes(r,o,l,h){if(r.getSizeInBytes()!==l)throw new ln("Number of bits and data bytes does not match");let d=0,m=0,p=0;const _=new Array;for(let N=0;N<h;++N){const L=new Int32Array(1),B=new Int32Array(1);fn.getNumDataBytesAndNumECBytesForBlockID(o,l,h,N,L,B);const Y=L[0],ne=new Uint8Array(Y);r.toBytes(8*d,ne,0,Y);const re=fn.generateECBytes(ne,B[0]);_.push(new ml(ne,re)),m=Math.max(m,Y),p=Math.max(p,re.length),d+=L[0]}if(l!==d)throw new ln("Data bytes does not match offset");const T=new ve;for(let N=0;N<m;++N)for(const L of _){const B=L.getDataBytes();N<B.length&&T.appendBits(B[N],8)}for(let N=0;N<p;++N)for(const L of _){const B=L.getErrorCorrectionBytes();N<B.length&&T.appendBits(B[N],8)}if(o!==T.getSizeInBytes())throw new ln("Interleaving error: "+o+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(r,o){const l=r.length,h=new Int32Array(l+o);for(let m=0;m<l;m++)h[m]=r[m]&255;new Vs(pt.QR_CODE_FIELD_256).encode(h,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=h[l+m];return d}static appendModeInfo(r,o){o.appendBits(r.getBits(),4)}static appendLengthInfo(r,o,l,h){const d=l.getCharacterCountBits(o);if(r>=1<<d)throw new ln(r+" is bigger than "+((1<<d)-1));h.appendBits(r,d)}static appendBytes(r,o,l,h){switch(o){case lt.NUMERIC:fn.appendNumericBytes(r,l);break;case lt.ALPHANUMERIC:fn.appendAlphanumericBytes(r,l);break;case lt.BYTE:fn.append8BitBytes(r,l,h);break;case lt.KANJI:fn.appendKanjiBytes(r,l);break;default:throw new ln("Invalid mode: "+o)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const o=fn.getDigit(r);return o>=0&&o<=9}static appendNumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=fn.getDigit(r.charAt(h));if(h+2<l){const m=fn.getDigit(r.charAt(h+1)),p=fn.getDigit(r.charAt(h+2));o.appendBits(d*100+m*10+p,10),h+=3}else if(h+1<l){const m=fn.getDigit(r.charAt(h+1));o.appendBits(d*10+m,7),h+=2}else o.appendBits(d,4),h++}}static appendAlphanumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=fn.getAlphanumericCode(r.charCodeAt(h));if(d===-1)throw new ln;if(h+1<l){const m=fn.getAlphanumericCode(r.charCodeAt(h+1));if(m===-1)throw new ln;o.appendBits(d*45+m,11),h+=2}else o.appendBits(d,6),h++}}static append8BitBytes(r,o,l){let h;try{h=Q.encode(r,l)}catch(d){throw new ln(d)}for(let d=0,m=h.length;d!==m;d++){const p=h[d];o.appendBits(p,8)}}static appendKanjiBytes(r,o){let l;try{l=Q.encode(r,P.SJIS)}catch(d){throw new ln(d)}const h=l.length;for(let d=0;d<h;d+=2){const m=l[d]&255,p=l[d+1]&255,_=m<<8&4294967295|p;let T=-1;if(_>=33088&&_<=40956?T=_-33088:_>=57408&&_<=60351&&(T=_-49472),T===-1)throw new ln("Invalid byte sequence");const N=(T>>8)*192+(T&255);o.appendBits(N,13)}}static appendECI(r,o){o.appendBits(lt.ECI.getBits(),4),o.appendBits(r.getValue(),8)}}fn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),fn.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class Ii{write(r,o,l,h=null){if(r.length===0)throw new R("Found empty contents");if(o<0||l<0)throw new R("Requested dimensions are too small: "+o+"x"+l);let d=wt.L,m=Ii.QUIET_ZONE_SIZE;h!==null&&(h.get(zn.ERROR_CORRECTION)!==void 0&&(d=wt.fromString(h.get(zn.ERROR_CORRECTION).toString())),h.get(zn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(zn.MARGIN).toString(),10)));const p=fn.encode(r,d,h);return this.renderResult(p,o,l,m)}writeToDom(r,o,l,h,d=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(o,l,h,d);r&&r.appendChild(m)}renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new $e;const m=d.getWidth(),p=d.getHeight(),_=m+h*2,T=p+h*2,N=Math.max(o,_),L=Math.max(l,T),B=Math.min(Math.floor(N/_),Math.floor(L/T)),Y=Math.floor((N-m*B)/2),ne=Math.floor((L-p*B)/2),re=this.createSVGElement(N,L);for(let he=0,we=ne;he<p;he++,we+=B)for(let Ue=0,Fe=Y;Ue<m;Ue++,Fe+=B)if(d.get(Ue,he)===1){const Oe=this.createSvgRectElement(Fe,we,B,B);re.appendChild(Oe)}return re}createSVGElement(r,o){const l=document.createElementNS(Ii.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(r,o,l,h){const d=document.createElementNS(Ii.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",h.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Ii.QUIET_ZONE_SIZE=4,Ii.SVG_NS="http://www.w3.org/2000/svg";class tr{encode(r,o,l,h,d){if(r.length===0)throw new R("Found empty contents");if(o!==Me.QR_CODE)throw new R("Can only encode QR_CODE, but got "+o);if(l<0||h<0)throw new R(`Requested dimensions are too small: ${l}x${h}`);let m=wt.L,p=tr.QUIET_ZONE_SIZE;d!==null&&(d.get(zn.ERROR_CORRECTION)!==void 0&&(m=wt.fromString(d.get(zn.ERROR_CORRECTION).toString())),d.get(zn.MARGIN)!==void 0&&(p=Number.parseInt(d.get(zn.MARGIN).toString(),10)));const _=fn.encode(r,m,d);return tr.renderResult(_,l,h,p)}static renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new $e;const m=d.getWidth(),p=d.getHeight(),_=m+h*2,T=p+h*2,N=Math.max(o,_),L=Math.max(l,T),B=Math.min(Math.floor(N/_),Math.floor(L/T)),Y=Math.floor((N-m*B)/2),ne=Math.floor((L-p*B)/2),re=new Ve(N,L);for(let he=0,we=ne;he<p;he++,we+=B)for(let Ue=0,Fe=Y;Ue<m;Ue++,Fe+=B)d.get(Ue,he)===1&&re.setRegion(Fe,we,B,B);return re}}tr.QUIET_ZONE_SIZE=4;class pl{encode(r,o,l,h,d){let m;switch(o){case Me.QR_CODE:m=new tr;break;default:throw new R("No encoder available for format "+o)}return m.encode(r,o,l,h,d)}}class di extends Xe{constructor(r,o,l,h,d,m,p,_){if(super(m,p),this.yuvData=r,this.dataWidth=o,this.dataHeight=l,this.left=h,this.top=d,h+m>o||d+p>l)throw new R("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(m,p)}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return ee.arraycopy(this.yuvData,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ee.arraycopy(this.yuvData,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*r;ee.arraycopy(this.yuvData,d,h,p,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new di(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+o,l,h,!1)}renderThumbnail(){const r=this.getWidth()/di.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/di.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*o),h=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const p=m*r;for(let _=0;_<r;_++){const T=h[d+_*di.THUMBNAIL_SCALE_FACTOR]&255;l[p+_]=4278190080|T*65793}d+=this.dataWidth*di.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/di.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/di.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,o){const l=this.yuvData;for(let h=0,d=this.top*this.dataWidth+this.left;h<o;h++,d+=this.dataWidth){const m=d+r/2;for(let p=d,_=d+r-1;p<m;p++,_--){const T=l[p];l[p]=l[_],l[_]=T}}}invert(){return new it(this)}}di.THUMBNAIL_SCALE_FACTOR=2;class Ni extends Xe{constructor(r,o,l,h,d,m,p){if(super(o,l),this.dataWidth=h,this.dataHeight=d,this.left=m,this.top=p,r.BYTES_PER_ELEMENT===4){const _=o*l,T=new Uint8ClampedArray(_);for(let N=0;N<_;N++){const L=r[N],B=L>>16&255,Y=L>>7&510,ne=L&255;T[N]=(B+Y+ne)/4&255}this.luminances=T}else this.luminances=r;if(h===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return ee.arraycopy(this.luminances,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ee.arraycopy(this.luminances,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*r;ee.arraycopy(this.luminances,d,h,p,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new Ni(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+r,this.top+o)}invert(){return new it(this)}}class x extends P{static forName(r){return this.getCharacterSetECIByName(r)}}class I{}I.ISO_8859_1=P.ISO8859_1;class D{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class V{static singletonList(r){return[r]}static min(r,o){return r.sort(o)[0]}}class ce{constructor(r){this.previous=r}getPrevious(){return this.previous}}class ye extends ce{constructor(r,o,l){super(r),this.value=o,this.bitCount=l}appendTo(r,o){r.appendBits(this.value,this.bitCount)}add(r,o){return new ye(this,r,o)}addBinaryShift(r,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ye(this,r,o)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+ie.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Ke extends ye{constructor(r,o,l){super(r,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(r,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(r,o){return new Ke(this,r,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Yt(O,r,o){return new Ke(O,r,o)}function jn(O,r,o){return new ye(O,r,o)}const Xt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Sn=0,Hn=1,nr=2,pr=3,fr=4,Mo=new ye(null,0,0),Ua=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Hu(O){for(let r of O)fe.fill(r,-1);return O[Sn][fr]=0,O[Hn][fr]=0,O[Hn][Sn]=28,O[pr][fr]=0,O[nr][fr]=0,O[nr][Sn]=15,O}const vc=Hu(fe.createInt32Array(6,6));class Ri{constructor(r,o,l,h){this.token=r,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,o){let l=this.bitCount,h=this.token;if(r!==this.mode){let m=Ua[this.mode][r];h=jn(h,m&65535,m>>16),l+=m>>16}let d=r===nr?4:5;return h=jn(h,o,d),new Ri(h,r,0,l+d)}shiftAndAppend(r,o){let l=this.token,h=this.mode===nr?4:5;return l=jn(l,vc[this.mode][r],h),l=jn(l,o,5),new Ri(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(r){let o=this.token,l=this.mode,h=this.bitCount;if(this.mode===fr||this.mode===nr){let p=Ua[l][Sn];o=jn(o,p&65535,p>>16),h+=p>>16,l=Sn}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Ri(o,l,this.binaryShiftByteCount+1,h+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=Yt(o,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ri(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let o=this.bitCount+(Ua[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?o+=Ri.calculateBinaryShiftCost(r)-Ri.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(o+=10),o<=r.bitCount}toBitArray(r){let o=[];for(let h=this.endBinaryShift(r.length).token;h!==null;h=h.getPrevious())o.unshift(h);let l=new ve;for(const h of o)h.appendTo(l,r);return l}toString(){return J.format("%s bits=%d bytes=%d",Xt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Ri.INITIAL_STATE=new Ri(Mo,Sn,0,0);function _c(O){const r=J.getCharCode(" "),o=J.getCharCode("."),l=J.getCharCode(",");O[Sn][r]=1;const h=J.getCharCode("Z"),d=J.getCharCode("A");for(let B=d;B<=h;B++)O[Sn][B]=B-d+2;O[Hn][r]=1;const m=J.getCharCode("z"),p=J.getCharCode("a");for(let B=p;B<=m;B++)O[Hn][B]=B-p+2;O[nr][r]=1;const _=J.getCharCode("9"),T=J.getCharCode("0");for(let B=T;B<=_;B++)O[nr][B]=B-T+2;O[nr][l]=12,O[nr][o]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<N.length;B++)O[pr][J.getCharCode(N[B])]=B;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<L.length;B++)J.getCharCode(L[B])>0&&(O[fr][J.getCharCode(L[B])]=B);return O}const xl=_c(fe.createInt32Array(5,256));class Va{constructor(r){this.text=r}encode(){const r=J.getCharCode(" "),o=J.getCharCode(`
`);let l=V.singletonList(Ri.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case J.getCharCode("\r"):m=p===o?2:0;break;case J.getCharCode("."):m=p===r?3:0;break;case J.getCharCode(","):m=p===r?4:0;break;case J.getCharCode(":"):m=p===r?5:0;break;default:m=0}m>0?(l=Va.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return V.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,o){const l=[];for(let h of r)this.updateStateForChar(h,o,l);return Va.simplifyStates(l)}updateStateForChar(r,o,l){let h=this.text[o]&255,d=xl[r.getMode()][h]>0,m=null;for(let p=0;p<=fr;p++){let _=xl[p][h];if(_>0){if(m==null&&(m=r.endBinaryShift(o)),!d||p===r.getMode()||p===nr){const T=m.latchAndAppend(p,_);l.push(T)}if(!d&&vc[r.getMode()][p]>=0){const T=m.shiftAndAppend(p,_);l.push(T)}}}if(r.getBinaryShiftByteCount()>0||xl[r.getMode()][h]===0){let p=r.addBinaryShiftChar(o);l.push(p)}}static updateStateListForPair(r,o,l){const h=[];for(let d of r)this.updateStateForPair(d,o,l,h);return this.simplifyStates(h)}static updateStateForPair(r,o,l,h){let d=r.endBinaryShift(o);if(h.push(d.latchAndAppend(fr,l)),r.getMode()!==fr&&h.push(d.shiftAndAppend(fr,l)),l===3||l===4){let m=d.latchAndAppend(nr,16-l).latchAndAppend(nr,1);h.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(o).addBinaryShiftChar(o+1);h.push(m)}}static simplifyStates(r){let o=[];for(const l of r){let h=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}h&&o.push(l)}return o}}class Qt{constructor(){}static encodeBytes(r){return Qt.encode(r,Qt.DEFAULT_EC_PERCENT,Qt.DEFAULT_AZTEC_LAYERS)}static encode(r,o,l){let h=new Va(r).encode(),d=ie.truncDivision(h.getSize()*o,100)+11,m=h.getSize()+d,p,_,T,N,L;if(l!==Qt.DEFAULT_AZTEC_LAYERS){if(p=l<0,_=Math.abs(l),_>(p?Qt.MAX_NB_BITS_COMPACT:Qt.MAX_NB_BITS))throw new R(J.format("Illegal value %s for layers",l));T=Qt.totalBitsInLayer(_,p),N=Qt.WORD_SIZE[_];let Oe=T-T%N;if(L=Qt.stuffBits(h,N),L.getSize()+d>Oe)throw new R("Data to large for user specified layer");if(p&&L.getSize()>N*64)throw new R("Data to large for user specified layer")}else{N=0,L=null;for(let Oe=0;;Oe++){if(Oe>Qt.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(p=Oe<=3,_=p?Oe+1:Oe,T=Qt.totalBitsInLayer(_,p),m>T)continue;(L==null||N!==Qt.WORD_SIZE[_])&&(N=Qt.WORD_SIZE[_],L=Qt.stuffBits(h,N));let Bt=T-T%N;if(!(p&&L.getSize()>N*64)&&L.getSize()+d<=Bt)break}}let B=Qt.generateCheckWords(L,T,N),Y=L.getSize()/N,ne=Qt.generateModeMessage(p,_,Y),re=(p?11:14)+_*4,he=new Int32Array(re),we;if(p){we=re;for(let Oe=0;Oe<he.length;Oe++)he[Oe]=Oe}else{we=re+1+2*ie.truncDivision(ie.truncDivision(re,2)-1,15);let Oe=ie.truncDivision(re,2),Bt=ie.truncDivision(we,2);for(let xt=0;xt<Oe;xt++){let Yr=xt+ie.truncDivision(xt,15);he[Oe-xt-1]=Bt-Yr-1,he[Oe+xt]=Bt+Yr+1}}let Ue=new Ve(we);for(let Oe=0,Bt=0;Oe<_;Oe++){let xt=(_-Oe)*4+(p?9:12);for(let Yr=0;Yr<xt;Yr++){let Di=Yr*2;for(let Xr=0;Xr<2;Xr++)B.get(Bt+Di+Xr)&&Ue.set(he[Oe*2+Xr],he[Oe*2+Yr]),B.get(Bt+xt*2+Di+Xr)&&Ue.set(he[Oe*2+Yr],he[re-1-Oe*2-Xr]),B.get(Bt+xt*4+Di+Xr)&&Ue.set(he[re-1-Oe*2-Xr],he[re-1-Oe*2-Yr]),B.get(Bt+xt*6+Di+Xr)&&Ue.set(he[re-1-Oe*2-Yr],he[Oe*2+Xr])}Bt+=xt*8}if(Qt.drawModeMessage(Ue,p,we,ne),p)Qt.drawBullsEye(Ue,ie.truncDivision(we,2),5);else{Qt.drawBullsEye(Ue,ie.truncDivision(we,2),7);for(let Oe=0,Bt=0;Oe<ie.truncDivision(re,2)-1;Oe+=15,Bt+=16)for(let xt=ie.truncDivision(we,2)&1;xt<we;xt+=2)Ue.set(ie.truncDivision(we,2)-Bt,xt),Ue.set(ie.truncDivision(we,2)+Bt,xt),Ue.set(xt,ie.truncDivision(we,2)-Bt),Ue.set(xt,ie.truncDivision(we,2)+Bt)}let Fe=new D;return Fe.setCompact(p),Fe.setSize(we),Fe.setLayers(_),Fe.setCodeWords(Y),Fe.setMatrix(Ue),Fe}static drawBullsEye(r,o,l){for(let h=0;h<l;h+=2)for(let d=o-h;d<=o+h;d++)r.set(d,o-h),r.set(d,o+h),r.set(o-h,d),r.set(o+h,d);r.set(o-l,o-l),r.set(o-l+1,o-l),r.set(o-l,o-l+1),r.set(o+l,o-l),r.set(o+l,o-l+1),r.set(o+l,o+l-1)}static generateModeMessage(r,o,l){let h=new ve;return r?(h.appendBits(o-1,2),h.appendBits(l-1,6),h=Qt.generateCheckWords(h,28,4)):(h.appendBits(o-1,5),h.appendBits(l-1,11),h=Qt.generateCheckWords(h,40,4)),h}static drawModeMessage(r,o,l,h){let d=ie.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let p=d-3+m;h.get(m)&&r.set(p,d-5),h.get(m+7)&&r.set(d+5,p),h.get(20-m)&&r.set(p,d+5),h.get(27-m)&&r.set(d-5,p)}else for(let m=0;m<10;m++){let p=d-5+m+ie.truncDivision(m,5);h.get(m)&&r.set(p,d-7),h.get(m+10)&&r.set(d+7,p),h.get(29-m)&&r.set(p,d+7),h.get(39-m)&&r.set(d-7,p)}}static generateCheckWords(r,o,l){let h=r.getSize()/l,d=new Vs(Qt.getGF(l)),m=ie.truncDivision(o,l),p=Qt.bitsToWords(r,l,m);d.encode(p,m-h);let _=o%l,T=new ve;T.appendBits(0,_);for(const N of Array.from(p))T.appendBits(N,l);return T}static bitsToWords(r,o,l){let h=new Int32Array(l),d,m;for(d=0,m=r.getSize()/o;d<m;d++){let p=0;for(let _=0;_<o;_++)p|=r.get(d*o+_)?1<<o-_-1:0;h[d]=p}return h}static getGF(r){switch(r){case 4:return pt.AZTEC_PARAM;case 6:return pt.AZTEC_DATA_6;case 8:return pt.AZTEC_DATA_8;case 10:return pt.AZTEC_DATA_10;case 12:return pt.AZTEC_DATA_12;default:throw new R("Unsupported word size "+r)}}static stuffBits(r,o){let l=new ve,h=r.getSize(),d=(1<<o)-2;for(let m=0;m<h;m+=o){let p=0;for(let _=0;_<o;_++)(m+_>=h||r.get(m+_))&&(p|=1<<o-1-_);(p&d)===d?(l.appendBits(p&d,o),m--):p&d?l.appendBits(p,o):(l.appendBits(p|1,o),m--)}return l}static totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}Qt.DEFAULT_EC_PERCENT=33,Qt.DEFAULT_AZTEC_LAYERS=0,Qt.MAX_NB_BITS=32,Qt.MAX_NB_BITS_COMPACT=4,Qt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class yl{encode(r,o,l,h){return this.encodeWithHints(r,o,l,h,null)}encodeWithHints(r,o,l,h,d){let m=I.ISO_8859_1,p=Qt.DEFAULT_EC_PERCENT,_=Qt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(zn.CHARACTER_SET)&&(m=x.forName(d.get(zn.CHARACTER_SET).toString())),d.has(zn.ERROR_CORRECTION)&&(p=ie.parseInt(d.get(zn.ERROR_CORRECTION).toString())),d.has(zn.AZTEC_LAYERS)&&(_=ie.parseInt(d.get(zn.AZTEC_LAYERS).toString()))),yl.encodeLayers(r,o,l,h,m,p,_)}static encodeLayers(r,o,l,h,d,m,p){if(o!==Me.AZTEC)throw new R("Can only encode AZTEC, but got "+o);let _=Qt.encode(J.getBytes(r,d),m,p);return yl.renderResult(_,l,h)}static renderResult(r,o,l){let h=r.getMatrix();if(h==null)throw new $e;let d=h.getWidth(),m=h.getHeight(),p=Math.max(o,d),_=Math.max(l,m),T=Math.min(p/d,_/m),N=(p-d*T)/2,L=(_-m*T)/2,B=new Ve(p,_);for(let Y=0,ne=L;Y<m;Y++,ne+=T)for(let re=0,he=N;re<d;re++,he+=T)h.get(re,Y)&&B.setRegion(he,ne,T,T);return B}}t.AbstractExpandedDecoder=kn,t.ArgumentException=S,t.ArithmeticException=$n,t.AztecCode=D,t.AztecCodeReader=Bi,t.AztecCodeWriter=yl,t.AztecDecoder=De,t.AztecDetector=Pi,t.AztecDetectorResult=Ln,t.AztecEncoder=Qt,t.AztecHighLevelEncoder=Va,t.AztecPoint=Yn,t.BarcodeFormat=Me,t.Binarizer=q,t.BinaryBitmap=k,t.BitArray=ve,t.BitMatrix=Ve,t.BitSource=ri,t.BrowserAztecCodeReader=ji,t.BrowserBarcodeReader=yc,t.BrowserCodeReader=Ge,t.BrowserDatamatrixCodeReader=Ba,t.BrowserMultiFormatReader=dl,t.BrowserPDF417Reader=gl,t.BrowserQRCodeReader=Do,t.BrowserQRCodeSvgWriter=Ii,t.CharacterSetECI=P,t.ChecksumException=U,t.Code128Reader=ke,t.Code39Reader=Cn,t.DataMatrixDecodedBitStreamParser=Fi,t.DataMatrixReader=_i,t.DecodeHintType=Pe,t.DecoderResult=Gt,t.DefaultGridSampler=sn,t.DetectorResult=Jn,t.EAN13Reader=Xn,t.EncodeHintType=zn,t.Exception=w,t.FormatException=H,t.GenericGF=pt,t.GenericGFPoly=kt,t.GlobalHistogramBinarizer=Se,t.GridSampler=qn,t.GridSamplerInstance=gn,t.HTMLCanvasElementLuminanceSource=te,t.HybridBinarizer=Ae,t.ITFReader=Nt,t.IllegalArgumentException=R,t.IllegalStateException=$e,t.InvertedLuminanceSource=it,t.LuminanceSource=Xe,t.MathUtils=Ye,t.MultiFormatOneDReader=mr,t.MultiFormatReader=Us,t.MultiFormatWriter=pl,t.NotFoundException=ae,t.OneDReader=hn,t.PDF417DecodedBitStreamParser=xe,t.PDF417DecoderErrorCorrection=as,t.PDF417Reader=hr,t.PDF417ResultMetadata=na,t.PerspectiveTransform=Pt,t.PlanarYUVLuminanceSource=di,t.QRCodeByteMatrix=Fs,t.QRCodeDataMask=ur,t.QRCodeDecodedBitStreamParser=xn,t.QRCodeDecoderErrorCorrectionLevel=wt,t.QRCodeDecoderFormatInformation=Pn,t.QRCodeEncoder=fn,t.QRCodeEncoderQRCode=qr,t.QRCodeMaskUtil=Tn,t.QRCodeMatrixUtil=ct,t.QRCodeMode=lt,t.QRCodeReader=Ci,t.QRCodeVersion=Qe,t.QRCodeWriter=tr,t.RGBLuminanceSource=Ni,t.RSS14Reader=Vt,t.RSSExpandedReader=me,t.ReaderException=js,t.ReedSolomonDecoder=ht,t.ReedSolomonEncoder=Vs,t.ReedSolomonException=ze,t.Result=qe,t.ResultMetadataType=at,t.ResultPoint=He,t.StringUtils=J,t.UnsupportedOperationException=z,t.VideoInputDevice=Re,t.WhiteRectangleDetector=ot,t.WriterException=ln,t.ZXingArrays=fe,t.ZXingCharset=x,t.ZXingInteger=ie,t.ZXingStandardCharsets=I,t.ZXingStringBuilder=X,t.ZXingStringEncoding=Q,t.ZXingSystem=ee,t.createAbstractExpandedDecoder=Ee,Object.defineProperty(t,"__esModule",{value:!0})})}(gu,gu.exports)),gu.exports}var Un=QN();const WN=P1(Un),KN=$_({__proto__:null,default:WN},[Un]);var Ay=function(){function i(e,t,a){if(this.formatMap=new Map([[tt.QR_CODE,Un.BarcodeFormat.QR_CODE],[tt.AZTEC,Un.BarcodeFormat.AZTEC],[tt.CODABAR,Un.BarcodeFormat.CODABAR],[tt.CODE_39,Un.BarcodeFormat.CODE_39],[tt.CODE_93,Un.BarcodeFormat.CODE_93],[tt.CODE_128,Un.BarcodeFormat.CODE_128],[tt.DATA_MATRIX,Un.BarcodeFormat.DATA_MATRIX],[tt.MAXICODE,Un.BarcodeFormat.MAXICODE],[tt.ITF,Un.BarcodeFormat.ITF],[tt.EAN_13,Un.BarcodeFormat.EAN_13],[tt.EAN_8,Un.BarcodeFormat.EAN_8],[tt.PDF_417,Un.BarcodeFormat.PDF_417],[tt.RSS_14,Un.BarcodeFormat.RSS_14],[tt.RSS_EXPANDED,Un.BarcodeFormat.RSS_EXPANDED],[tt.UPC_A,Un.BarcodeFormat.UPC_A],[tt.UPC_E,Un.BarcodeFormat.UPC_E],[tt.UPC_EAN_EXTENSION,Un.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!KN)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=a;var c=this.createZXingFormats(e),f=new Map;f.set(Un.DecodeHintType.POSSIBLE_FORMATS,c),f.set(Un.DecodeHintType.TRY_HARDER,!1),this.hints=f}return i.prototype.decodeAsync=function(e){var t=this;return new Promise(function(a,c){try{a(t.decode(e))}catch(f){c(f)}})},i.prototype.decode=function(e){var t=new Un.MultiFormatReader(this.verbose,this.hints),a=new Un.HTMLCanvasElementLuminanceSource(e),c=new Un.BinaryBitmap(new Un.HybridBinarizer(a)),f=t.decode(c);return{text:f.text,format:Dv.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,c){e.set(t,a)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var t=[],a=0,c=e;a<c.length;a++){var f=c[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return t},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}(),ZN=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function v(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,v)}w((a=a.apply(i,e||[])).next())})},$N=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return v([w,S])}}function v(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Cy=function(){function i(e,t,a){if(this.formatMap=new Map([[tt.QR_CODE,"qr_code"],[tt.AZTEC,"aztec"],[tt.CODABAR,"codabar"],[tt.CODE_39,"code_39"],[tt.CODE_93,"code_93"],[tt.CODE_128,"code_128"],[tt.DATA_MATRIX,"data_matrix"],[tt.ITF,"itf"],[tt.EAN_13,"ean_13"],[tt.EAN_8,"ean_8"],[tt.PDF_417,"pdf417"],[tt.UPC_A,"upc_a"],[tt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=a;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return ZN(this,void 0,void 0,function(){var t,a;return $N(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(t),[2,{text:a.rawValue,format:Dv.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var t=null,a=0,c=0,f=e;c<f.length;c++){var y=f[c],b=y.boundingBox.width*y.boundingBox.height;b>a&&(a=b,t=y)}if(!t)throw"No largest barcode found";return t},i.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],a=0,c=e;a<c.length;a++){var f=c[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,c){e.set(t,a)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}(),Ty=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function v(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,v)}w((a=a.apply(i,e||[])).next())})},Sy=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return v([w,S])}}function v(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},JN=function(){function i(e,t,a,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,t&&Cy.isSupported()?(this.primaryDecoder=new Cy(e,a,c),this.secondaryDecoder=new Ay(e,a,c)):this.primaryDecoder=new Ay(e,a,c)}return i.prototype.decodeAsync=function(e){return Ty(this,void 0,void 0,function(){var t;return Sy(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return Ty(this,void 0,void 0,function(){var t,a;return Sy(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(a=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw a;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,a=this.executionResults;t<a.length;t++){var c=a[t];e+=c}var f=e/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}(),Hg=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),Df=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function v(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,v)}w((a=a.apply(i,e||[])).next())})},Mf=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return v([w,S])}}function v(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},kv=function(){function i(e,t){this.name=e,this.track=t}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var t={};t[this.name]=e;var a={advanced:[t]};return this.track.applyConstraints(a)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},i}(),eR=function(i){Hg(e,i);function e(t,a){return i.call(this,t,a)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var a={};a[this.name]=t;var c={advanced:[a]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),a=t[this.name];return{min:a.min,max:a.max,step:a.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(kv),tR=function(i){Hg(e,i);function e(t){return i.call(this,"zoom",t)||this}return e}(eR),nR=function(i){Hg(e,i);function e(t){return i.call(this,"torch",t)||this}return e}(kv),rR=function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new tR(this.track)},i.prototype.torchFeature=function(){return new nR(this.track)},i}(),iR=function(){function i(e,t,a){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var a=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(a,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,t,a,c){return Df(this,void 0,void 0,function(){var f,y;return Mf(this,function(b){switch(b.label){case 0:return f=new i(e,t,c),a.aspectRatio?(y={aspectRatio:a.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:b.sent(),b.label=2;case 2:return f.setupSurface(),[2,f]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var t=this,a=function(){setTimeout(e,200),t.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return Df(this,void 0,void 0,function(){return Mf(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,a){var c=e.mediaStream.getVideoTracks(),f=c.length,y=0;e.mediaStream.getVideoTracks().forEach(function(b){e.mediaStream.removeTrack(b),b.stop(),++y,y>=f&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},i.prototype.getCapabilities=function(){return new rR(this.getFirstTrackOrFail())},i}(),sR=function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,t,a){return Df(this,void 0,void 0,function(){return Mf(this,function(c){return[2,iR.create(e,this.mediaStream,t,a)]})})},i.create=function(e){return Df(this,void 0,void 0,function(){var t,a;return Mf(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return a=c.sent(),[2,new i(a)]}})})},i}(),Iy=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function v(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,v)}w((a=a.apply(i,e||[])).next())})},Ny=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return v([w,S])}}function v(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},aR=function(){function i(){}return i.failIfNotSupported=function(){return Iy(this,void 0,void 0,function(){return Ny(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return Iy(this,void 0,void 0,function(){return Ny(this,function(t){return[2,sR.create(e)]})})},i}(),oR=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function v(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,v)}w((a=a.apply(i,e||[])).next())})},lR=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return v([w,S])}}function v(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},cR=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=Ql.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=Ql.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return oR(this,void 0,void 0,function(){var e,t,a,c,f,y,b;return lR(this,function(v){switch(v.label){case 0:return e=function(w){for(var S=w.getVideoTracks(),R=0,k=S;R<k.length;R++){var U=k[R];U.enabled=!1,U.stop(),w.removeTrack(U)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=v.sent(),c=[],f=0,y=a;f<y.length;f++)b=y[f],b.kind==="videoinput"&&c.push({id:b.deviceId,label:b.label});return e(t),[2,c]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var a=function(f){for(var y=[],b=0,v=f;b<v.length;b++){var w=v[b];w.kind==="video"&&y.push({id:w.id,label:w.label})}e(y)},c=MediaStreamTrack;c.getSources(a)})},i}(),or;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(or||(or={}));var uR=function(){function i(){this.state=or.NOT_STARTED,this.onGoingTransactionNewState=or.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===or.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=or.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===or.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=or.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==or.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case or.UNKNOWN:throw"Transition from unknown is not allowed";case or.NOT_STARTED:this.failIfNewStateIs(e,[or.PAUSED]);break;case or.SCANNING:break;case or.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,t){for(var a=0,c=t;a<c.length;a++){var f=c[a];if(e===f)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i}(),hR=function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===or.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==or.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===or.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===or.PAUSED},i}(),fR=function(){function i(){}return i.create=function(){return new hR(new uR)},i}(),dR=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),Ki=function(i){dR(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Ns),gR=function(){function i(e,t){this.logger=t,this.fps=Ki.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ki.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Lv.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!Xs(this.qrbox)},i.create=function(e,t){return new i(e,t)},i}(),Ry=function(){function i(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var a;typeof t=="boolean"?this.verbose=t===!0:t&&(a=t,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new Ov(this.verbose),this.qrcode=new JN(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=fR.create()}return i.prototype.start=function(e,t,a,c){var f=this;if(!e)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;c?y=c:y=this.verbose?this.logger.log:function(){};var b=gR.create(t,this.logger);this.clearElement();var v=!1;b.videoConstraints&&(b.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=v,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Ki.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var R=this,k=this.stateManagerProxy.startTransition(or.SCANNING);return new Promise(function(U,q){var ee=w?b.videoConstraints:R.createVideoConstraints(e);if(!ee){k.cancel(),q("videoConstraints should be defined");return}var K={};(!w||b.aspectRatio)&&(K.aspectRatio=b.aspectRatio);var de={onRenderSurfaceReady:function(fe,ie){R.setupUi(fe,ie,b),R.isScanning=!0,R.foreverScan(b,a,y)}};aR.failIfNotSupported().then(function(fe){fe.create(ee).then(function(ie){return ie.render(f.element,K,de).then(function(ve){R.renderedCamera=ve,k.execute(),U(null)}).catch(function(ve){k.cancel(),q(ve)})}).catch(function(ie){k.cancel(),q(Ql.errorGettingUserMedia(ie))})}).catch(function(fe){k.cancel(),q(Ql.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(or.PAUSED),this.showPausedState(),(Xs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(or.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(or.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(e.element){var f=document.getElementById(Ki.SHADED_REGION_ELEMENT_ID);f&&e.element.removeChild(f)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),a(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(a){return a.decodedText})},i.prototype.scanFileV2=function(e,t){var a=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Xs(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,f){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(e);var y=new Image;y.onload=function(){var b=y.width,v=y.height,w=document.getElementById(a.elementId),S=w.clientWidth?w.clientWidth:Ki.DEFAULT_WIDTH,R=Math.max(w.clientHeight?w.clientHeight:v,Ki.FILE_SCAN_MIN_HEIGHT),k=a.computeCanvasDrawConfig(b,v,S,R);if(t){var U=a.createCanvasElement(S,R,"qr-canvas-visible");U.style.display="inline-block",w.appendChild(U);var q=U.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=S,q.canvas.height=R,q.drawImage(y,0,0,b,v,k.x,k.y,k.width,k.height)}var ee=Ki.FILE_SCAN_HIDDEN_CANVAS_PADDING,K=Math.max(y.width,k.width),de=Math.max(y.height,k.height),fe=K+2*ee,ie=de+2*ee,ve=a.createCanvasElement(fe,ie);w.appendChild(ve);var je=ve.getContext("2d");if(!je)throw"Unable to get 2d context from canvas";je.canvas.width=fe,je.canvas.height=ie,je.drawImage(y,0,0,b,v,ee,ee,K,de);try{a.qrcode.decodeRobustlyAsync(ve).then(function(Pe){c(vy.createFromQrcodeResult(Pe))}).catch(f)}catch(Pe){f("QR code parse error, error = ".concat(Pe))}},y.onerror=f,y.onabort=f,y.onstalled=f,y.onsuspend=f,y.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return cR.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!Lv.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var t=[tt.QR_CODE,tt.AZTEC,tt.CODABAR,tt.CODE_39,tt.CODE_93,tt.CODE_128,tt.DATA_MATRIX,tt.MAXICODE,tt.ITF,tt.EAN_13,tt.EAN_8,tt.PDF_417,tt.RSS_14,tt.RSS_EXPANDED,tt.UPC_A,tt.UPC_E,tt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],c=0,f=e.formatsToSupport;c<f.length;c++){var y=f[c];qN(y)?a.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Xs(e))return!0;if(!Xs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Xs(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Xs(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,t,a){var c=this,f=a.qrbox;this.validateQrboxConfig(f);var y=this.toQrdimensions(e,t,f),b=function(w){if(w<Ki.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ki.MIN_QR_BOX_SIZE,"px.")},v=function(w){return w>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};b(y.width),b(y.height),y.width=v(y.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,t,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return a},i.prototype.setupUi=function(e,t,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,a);var c=Xs(a.qrbox)?{width:e,height:t}:a.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(e,t,c);f.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=a.isShadedBoxEnabled()&&f.height<=t,b={x:0,y:0,width:e,height:t},v=y?this.getShadedRegionBounds(e,t,f):b,w=this.createCanvasElement(v.width,v.height),S={willReadFrequently:!0},R=w.getContext("2d",S);R.canvas.width=v.width,R.canvas.height=v.height,this.element.append(w),y&&this.possiblyInsertShadingElement(this.element,e,t,f),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=R,this.canvasElement=w},i.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Ql.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},i.prototype.scanContext=function(e,t){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,vy.createFromQrcodeResult(c)),a.possiblyUpdateShaders(!0),!0}).catch(function(c){a.possiblyUpdateShaders(!1);var f=Ql.codeParseError(c);return t(f,Mv.createFrom(f)),!1})},i.prototype.foreverScan=function(e,t,a){var c=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),y=f.videoWidth/f.clientWidth,b=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*y,w=this.qrRegion.height*b,S=this.qrRegion.x*y,R=this.qrRegion.y*b;this.context.drawImage(f,S,R,v,w,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,a)},c.getTimeoutFps(e.fps))};this.scanContext(t,a).then(function(U){!U&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,a).finally(function(){k()})):k()}).catch(function(U){c.logger.logError("Error happend while scanning context",U),k()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",a="deviceId",c={user:!0,environment:!0},f="exact",y=function(q){if(q in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(q,"'")},b=Object.keys(e);if(b.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(b.length," keys");var v=Object.keys(e)[0];if(v!==t&&v!==a)throw"Only '".concat(t,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(v===t){var w=e.facingMode;if(typeof w=="string"){if(y(w))return{facingMode:w}}else if(typeof w=="object")if(f in w){if(y(w["".concat(f)]))return{facingMode:{exact:w["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var S=typeof w;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var R=e.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(f in R)return{deviceId:{exact:R["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var k=typeof R;throw"Invalid type of 'deviceId' = ".concat(k)}}}var U=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(U)},i.prototype.computeCanvasDrawConfig=function(e,t,a,c){if(e<=a&&t<=c){var f=(a-e)/2,y=(c-t)/2;return{x:f,y,width:e,height:t}}else{var b=e,v=t;return e>a&&(t=a/e*t,e=a),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(b,"X").concat(v)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,a,c)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Ki.BORDER_SHADER_MATCH_COLOR:Ki.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,t,a){var c=e,f=t,y=document.createElement("canvas");return y.style.width="".concat(c,"px"),y.style.height="".concat(f,"px"),y.style.display="none",y.id=Xs(a)?"qr-canvas":a,y},i.prototype.getShadedRegionBounds=function(e,t,a){if(a.width>e||a.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-a.width)/2,y:(t-a.height)/2,width:a.width,height:a.height}},i.prototype.possiblyInsertShadingElement=function(e,t,a,c){if(!(t-c.width<1||a-c.height<1)){var f=document.createElement("div");f.style.position="absolute";var y=(t-c.width)/2,b=(a-c.height)/2;if(f.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(Ki.SHADED_REGION_ELEMENT_ID),t-c.width<11||a-c.height<11)this.hasBorderShaders=!1;else{var v=5,w=40;this.insertShaderBorders(f,w,v,-v,null,0,!0),this.insertShaderBorders(f,w,v,-v,null,0,!1),this.insertShaderBorders(f,w,v,null,-v,0,!0),this.insertShaderBorders(f,w,v,null,-v,0,!1),this.insertShaderBorders(f,v,w+v,-v,null,-v,!0),this.insertShaderBorders(f,v,w+v,null,-v,-v,!0),this.insertShaderBorders(f,v,w+v,-v,null,-v,!1),this.insertShaderBorders(f,v,w+v,null,-v,-v,!1),this.hasBorderShaders=!0}e.append(f)}},i.prototype.insertShaderBorders=function(e,t,a,c,f,y,b){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=Ki.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(t,"px"),v.style.height="".concat(a,"px"),c!==null&&(v.style.top="".concat(c,"px")),f!==null&&(v.style.bottom="".concat(f,"px")),b?v.style.left="".concat(y,"px"):v.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),e.appendChild(v)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i}(),Gg="data:image/svg+xml;base64,",mR=Gg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",pR=Gg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Dy=Gg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",xR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",My=function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i}(),yR=function(){function i(){this.data=My.createDefault();var e=localStorage.getItem(i.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},i.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=My.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i}(),wR=function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=_y.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var a=document.createElement("br"),c=document.createElement("br");this.infoDiv.appendChild(a),this.infoDiv.appendChild(c);var f=document.createElement("a");f.innerText=_y.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),e.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i}(),ER=function(){function i(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Dy,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(a){return t.onHoverIn()},this.infoIcon.onmouseout=function(a){return t.onHoverOut()},this.infoIcon.onclick=function(a){return t.onClick()},e.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=xR,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Dy,this.infoIcon.style.opacity="0.6")},i}(),vR=function(){function i(){var e=this;this.infoDiv=new wR,this.infoIcon=new ER(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return i.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},i}(),_R=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function v(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,v)}w((a=a.apply(i,e||[])).next())})},bR=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return v([w,S])}}function v(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Oy=function(){function i(){}return i.hasPermissions=function(){return _R(this,void 0,void 0,function(){var e,t,a,c;return bR(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=f.sent(),t=0,a=e;t<a.length;t++)if(c=a[t],c.kind==="videoinput"&&c.label)return[2,!0];return[2,!1]}})})},i}(),lo=function(){function i(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var a=t[e];if(i.isCameraScanType(a))return!0}return!1},i.isCameraScanType=function(e){return e===To.SCAN_TYPE_CAMERA},i.isFileScanType=function(e){return e===To.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Ns.DEFAULT_SUPPORTED_SCAN_TYPE;var t=Ns.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var a=0,c=e;a<c.length;a++){var f=c[a];if(!Ns.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return e},i}(),$i=function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i}(),Sa=function(){function i(){}return i.createElement=function(e,t){var a=document.createElement(e);return a.id=t,a.classList.add($i.ALL_ELEMENT_CLASS),e==="button"&&a.setAttribute("type","button"),a},i}(),Pv=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function v(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,v)}w((a=a.apply(i,e||[])).next())})},Bv=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return v([w,S])}}function v(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Ly=function(){function i(e,t,a){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=a}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return Pv(this,void 0,void 0,function(){var e,t;return Bv(this,function(a){switch(a.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return a.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=a.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?wn.torchOffButton():wn.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},i.prototype.propagateFailure=function(e,t){var a=e?wn.torchOnFailedMessage():wn.torchOffFailedMessage();t&&(a+="; Error = "+t),this.onTorchActionFailureCallback(a)},i.prototype.reset=function(){this.isTorchOn=!1},i}(),AR=function(){function i(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Sa.createElement("button",$i.TORCH_BUTTON_ID),this.torchController=new Ly(e,this,t)}return i.prototype.render=function(e,t){var a=this;this.torchButton.innerText=wn.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var c=this;this.torchButton.addEventListener("click",function(f){return Pv(a,void 0,void 0,function(){return Bv(this,function(y){switch(y.label){case 0:return[4,c.torchController.flipState()];case 1:return y.sent(),c.torchController.isTorchEnabled()?(c.torchButton.classList.remove($i.TORCH_BUTTON_CLASS_TORCH_OFF),c.torchButton.classList.add($i.TORCH_BUTTON_CLASS_TORCH_ON)):(c.torchButton.classList.remove($i.TORCH_BUTTON_CLASS_TORCH_ON),c.torchButton.classList.add($i.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(e){this.torchController=new Ly(e,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(e){this.torchButton.innerText=e},i.prototype.reset=function(){this.torchButton.innerText=wn.torchOnButton(),this.torchController.reset()},i.create=function(e,t,a,c){var f=new i(t,c);return f.render(e,a),f},i}(),CR=function(){function i(e,t,a){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var c=document.createElement("label");c.setAttribute("for",this.getFileScanInputId()),c.style.display="inline-block",this.fileBasedScanRegion.appendChild(c),this.fileSelectionButton=Sa.createElement("button",$i.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(b){c.click()}),c.append(this.fileSelectionButton),this.fileScanInput=Sa.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",c.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(b){if(!(b==null||b.target==null)){var v=b.target;if(!(v.files&&v.files.length===0)){var w=v.files,S=w[0],R=S.name;f.setImageNameToButton(R),a(S)}}});var y=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(y),this.fileBasedScanRegion.addEventListener("dragenter",function(b){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(b){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(b){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(b){b.stopPropagation(),b.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var v=b.dataTransfer;if(v){var w=v.files;if(!w||w.length===0)return;for(var S=!1,R=0;R<w.length;++R){var k=w.item(R);if(k){var U=/image.*/;if(k.type.match(U)){S=!0;var q=k.name;f.setImageNameToButton(q),a(k),y.innerText=wn.dragAndDropMessage();break}}}S||(y.innerText=wn.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=wn.dragAndDropMessage(),e.style.fontWeight="400",e},i.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var a=e.substring(0,8),c=e.length,f=e.substring(c-8,c);e="".concat(a,"....").concat(f)}var y=wn.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=y},i.prototype.setInitialValueToButton=function(){var e=wn.fileSelectionChooseImage()+" - "+wn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(e,t,a){var c=new i(e,t,a);return c},i}(),TR=function(){function i(e){this.selectElement=Sa.createElement("select",$i.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return i.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var a=this.cameras.length;if(a===0)throw new Error("No cameras found");if(a===1)t.style.display="none";else{var c=wn.selectCamera();t.innerText="".concat(c," (").concat(this.cameras.length,")  ")}for(var f=1,y=0,b=this.cameras;y<b.length;y++){var v=b[y],w=v.id,S=v.label==null?w:v.label;(!S||S==="")&&(S=[wn.anonymousCameraPrefix(),f++].join(" "));var R=document.createElement("option");R.value=w,R.innerText=S,this.options.push(R),this.selectElement.appendChild(R)}t.appendChild(this.selectElement),e.appendChild(t)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(e){for(var t=0,a=this.options;t<a.length;t++){var c=a[t];if(c.value===e)return!0}return!1},i.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(e,t){var a=new i(t);return a.render(e),a},i}(),SR=function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Sa.createElement("input",$i.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var a=wn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.rangeText.style.marginRight="10px";var c=this;this.rangeInput.addEventListener("input",function(){return c.onValueChange()}),this.rangeInput.addEventListener("change",function(){return c.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var e=wn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(e,t,a,c){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=c.toString(),this.rangeInput.value=a.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(e,t){var a=new i;return a.render(e,t),a},i}(),Zi;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Zi||(Zi={}));function IR(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function NR(i,e){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:e}}var ky=function(){function i(e,t,a){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=a===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new lo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Ov(this.verbose),this.persistedDataManager=new yR,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(e,t){var a=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,y){if(e)e(f,y);else{if(a.lastMatchFound===f)return;a.lastMatchFound=f,a.setHeaderMessage(wn.lastMatch(f),Zi.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,y){t&&t(f,y)};var c=document.getElementById(this.elementId);if(!c)throw"HTML Element with id=".concat(this.elementId," not found");c.innerHTML="",this.createBasicLayout(c),this.html5Qrcode=new Ry(this.getScanRegionId(),NR(this.config,this.verbose))},i.prototype.pause=function(e){(Xs(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var e=this,t=function(){var a=document.getElementById(e.elementId);a&&(a.innerHTML="",e.resetBasicLayout(a))};return this.html5Qrcode?new Promise(function(a,c){if(!e.html5Qrcode){a();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(f){if(!e.html5Qrcode){a();return}e.html5Qrcode.clear(),t(),a()}).catch(function(f){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",f),c(f)}):(e.html5Qrcode.clear(),t(),a())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Ns.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Ns.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Ns.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Ns.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Ns.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ns.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ns.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),a=this.getScanRegionId();t.id=a,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),lo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var c=document.createElement("div"),f=this.getDashboardId();c.id=f,c.style.width="100%",e.appendChild(c),this.setupInitialDashboard(c)},i.prototype.resetBasicLayout=function(e){e.style.border="none"},i.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var a=new vR;a.renderInto(t);var c=document.createElement("div");c.id=this.getHeaderMessageContainerId(),c.style.display="none",c.style.textAlign="center",c.style.fontSize="14px",c.style.padding="2px 10px",c.style.margin="4px",c.style.borderTop="1px solid #f6f6f6",t.appendChild(c)},i.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},i.prototype.createCameraListUi=function(e,t,a){var c=this;c.showHideScanTypeSwapLink(!1),c.setHeaderMessage(wn.cameraPermissionRequesting());var f=function(){a||c.createPermissionButton(e,t)};Ry.getCameras().then(function(y){c.persistedDataManager.setHasPermission(!0),c.showHideScanTypeSwapLink(!0),c.resetHeaderMessage(),y&&y.length>0?(e.removeChild(t),c.renderCameraSelection(y)):(c.setHeaderMessage(wn.noCameraFound(),Zi.STATUS_WARNING),f())}).catch(function(y){c.persistedDataManager.setHasPermission(!1),a?a.disabled=!1:f(),c.setHeaderMessage(y,Zi.STATUS_WARNING),c.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(e,t){var a=this,c=Sa.createElement("button",this.getCameraPermissionButtonId());c.innerText=wn.cameraPermissionTitle(),c.addEventListener("click",function(){c.disabled=!0,a.createCameraListUi(e,t,c)}),t.appendChild(c)},i.prototype.createPermissionsUi=function(e,t){var a=this;if(lo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Oy.hasPermissions().then(function(c){c?a.createCameraListUi(e,t):(a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t))}).catch(function(c){a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},i.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var a=document.createElement("div");a.id=this.getDashboardSectionCameraScanRegionId(),a.style.display=lo.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(a);var c=document.createElement("div");c.style.textAlign="center",a.appendChild(c),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(a,c),this.renderFileScanUi(t)},i.prototype.renderFileScanUi=function(e){var t=lo.isFileScanType(this.currentScanType),a=this,c=function(f){if(!a.html5Qrcode)throw"html5Qrcode not defined";lo.isFileScanType(a.currentScanType)&&(a.setHeaderMessage(wn.loadingImage()),a.html5Qrcode.scanFileV2(f,!0).then(function(y){a.resetHeaderMessage(),a.qrCodeSuccessCallback(y.decodedText,y)}).catch(function(y){a.setHeaderMessage(y,Zi.STATUS_WARNING),a.qrCodeErrorCallback(y,Mv.createFrom(y))}))};this.fileSelectionUi=CR.create(e,t,c)},i.prototype.renderCameraSelection=function(e){var t=this,a=this,c=document.getElementById(this.getDashboardSectionCameraScanRegionId());c.style.textAlign="center";var f=SR.create(c,!1),y=function(ee){var K=ee.zoomFeature();if(K.isSupported()){f.setOnCameraZoomValueChangeCallback(function(fe){K.apply(fe)});var de=1;t.config.defaultZoomValueIfSupported&&(de=t.config.defaultZoomValueIfSupported),de=YN(de,K.min(),K.max()),f.setValues(K.min(),K.max(),de,K.step()),f.show()}},b=TR.create(c,e),v=document.createElement("span"),w=Sa.createElement("button",$i.CAMERA_START_BUTTON_ID);w.innerText=wn.scanButtonStartScanningText(),v.appendChild(w);var S=Sa.createElement("button",$i.CAMERA_STOP_BUTTON_ID);S.innerText=wn.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,v.appendChild(S);var R,k=function(ee){if(!ee.torchFeature().isSupported()){R&&R.hide();return}R?R.updateTorchCapability(ee.torchFeature()):R=AR.create(v,ee.torchFeature(),{display:"none",marginLeft:"5px"},function(K){a.setHeaderMessage(K,Zi.STATUS_WARNING)}),R.show()};c.appendChild(v);var U=function(ee){ee||(w.style.display="none"),w.innerText=wn.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,ee&&(w.style.display="inline-block")};if(w.addEventListener("click",function(ee){w.innerText=wn.scanButtonScanningStarting(),b.disable(),w.disabled=!0,w.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!1),a.resetHeaderMessage();var K=b.getValue();a.persistedDataManager.setLastUsedCameraId(K),a.html5Qrcode.start(K,IR(a.config),a.qrCodeSuccessCallback,a.qrCodeErrorCallback).then(function(de){S.disabled=!1,S.style.display="inline-block",U(!1);var fe=a.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&k(fe),t.config.showZoomSliderIfSupported===!0&&y(fe)}).catch(function(de){a.showHideScanTypeSwapLink(!0),b.enable(),U(!0),a.setHeaderMessage(de,Zi.STATUS_WARNING)})}),b.hasSingleItem()&&w.click(),S.addEventListener("click",function(ee){if(!a.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,a.html5Qrcode.stop().then(function(K){t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!0),b.enable(),w.disabled=!1,S.style.display="none",w.style.display="inline-block",R&&(R.reset(),R.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),a.insertCameraScanImageToScanRegion()}).catch(function(K){S.disabled=!1,a.setHeaderMessage(K,Zi.STATUS_WARNING)})}),a.persistedDataManager.getLastUsedCameraId()){var q=a.persistedDataManager.getLastUsedCameraId();b.hasValue(q)?(b.setValue(q),w.click()):a.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var e=this,t=wn.textIfCameraScanSelected(),a=wn.textIfFileScanSelected(),c=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var y=Sa.createElement("span",this.getDashboardSectionSwapLinkId());y.style.textDecoration="underline",y.style.cursor="pointer",y.innerText=lo.isCameraScanType(this.currentScanType)?t:a,y.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,lo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),y.innerText=a,e.currentScanType=To.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),y.innerText=t,e.currentScanType=To.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),f.appendChild(y),c.appendChild(f)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){Oy.hasPermissions().then(function(a){if(a){var c=document.getElementById(t.getCameraPermissionButtonId());if(!c)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";c.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(a){t.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},i.prototype.setHeaderMessage=function(e,t){t||(t=Zi.STATUS_DEFAULT);var a=this.getHeaderMessageDiv();switch(a.innerText=e,a.style.display="block",t){case Zi.STATUS_SUCCESS:a.style.background="rgba(106, 175, 80, 0.26)",a.style.color="#477735";break;case Zi.STATUS_WARNING:a.style.background="rgba(203, 36, 49, 0.14)",a.style.color="#cb2431";break;case Zi.STATUS_DEFAULT:default:a.style.background="rgba(0, 0, 0, 0)",a.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=mR,this.cameraScanImage.alt=wn.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=pR,this.fileScanImage.alt=wn.fileScanAltText()},i.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return $i.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return $i.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i}();const RR=({photoURL:i,name:e,email:t,size:a="medium"})=>{const[c,f]=$.useState(!0),[y,b]=$.useState(!1),v={small:"w-8 h-8",medium:"w-12 h-12",large:"w-16 h-16"},w=()=>e?e.split(" ").map(U=>U[0]).join("").toUpperCase().substring(0,2):t?t[0].toUpperCase():"N/A",S=()=>{const U=e||t||"default",q=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],ee=U.split("").reduce((K,de)=>K+de.charCodeAt(0),0)%q.length;return q[ee]},R=()=>{f(!1),b(!1)},k=()=>{f(!1),b(!0)};return!i||y?A.jsx("div",{className:`${v[a]} rounded-full flex items-center justify-center ${S()}`,children:A.jsx("span",{className:"text-white font-semibold",children:w()})}):A.jsxs("div",{className:`${v[a]} rounded-full relative overflow-hidden`,children:[c&&A.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${S()}`,children:A.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}),A.jsx("img",{src:i,alt:e||"Profile",className:`${v[a]} object-cover ${c?"opacity-0":"opacity-100"} transition-opacity duration-300`,onLoad:R,onError:k})]})},Py=({imageUrl:i,altText:e,className:t=""})=>{const[a,c]=$.useState(!0),[f,y]=$.useState(!1),b=()=>{c(!1)},v=()=>{c(!1),y(!0)};return A.jsxs("div",{className:`relative w-full h-40 bg-blue-100 rounded-md overflow-hidden ${t}`,children:[a&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:A.jsx("div",{className:"w-8 h-8 border-4 border-blue-300 border-t-blue-500 rounded-full animate-spin"})}),f?A.jsx("div",{className:"w-full h-full bg-blue-300 flex items-center justify-center",children:A.jsx("span",{className:"text-white font-medium",children:"No Image"})}):A.jsx("img",{src:i,alt:e||"Classroom",className:`w-full h-full object-cover ${a?"opacity-0":"opacity-100"} transition-opacity duration-300`,onLoad:b,onError:v})]})};function DR(){var kt,$n,pt,ze,$e,ht;const i=So(vs),e=ul(vs),t=ea(),[a,c]=$.useState(!0),[f,y]=$.useState(null);$.useEffect(()=>{console.log("Current user:",f),console.log("User is authenticated:",!!f)},[f]);const[b,v]=$.useState([]),[w,S]=$.useState(null),[R,k]=$.useState(!0),[U,q]=$.useState(null),[ee,K]=$.useState([]),[de,fe]=$.useState({}),[ie,ve]=$.useState(!1),[je,Pe]=$.useState(!1),[H,F]=$.useState(""),[P,z]=$.useState({type:"",text:""}),Q=$.useRef(null),[J,X]=$.useState(!1),[Ve,ae]=$.useState({type:"",text:""}),[Se,Ae]=$.useState(!1),Xe=$.useRef(null),[it,te]=$.useState([]);$.useEffect(()=>{const Ce=ig(i,De=>{console.log("Auth state changed, user:",De),y(De),c(!1),!De&&!a&&t("/")});return()=>Ce()},[i,t]),$.useEffect(()=>{if(!a&&!f){t("/");return}if(!a&&f){const Ce=async()=>{try{const Ye=Mt(e,"users",f.uid),Je=await Br(Ye);Je.exists()&&S(Je.data())}catch(Ye){console.error("Error loading user profile:",Ye)}},De=async()=>{try{k(!0);const Ye=Iu(fy(e,"students"),Nu("stdid","==",f.uid)),Je=await Sr(Ye),He=[];Je.forEach(ot=>{const qn=ot.ref.parent.parent;qn&&He.push(Br(qn))});const Ln=(await Promise.all(He)).map(ot=>({id:ot.id,...ot.data()})).filter(ot=>ot.info&&ot.info.name);v(Ln)}catch(Ye){console.error("Error loading classrooms:",Ye)}finally{k(!1)}};Ce(),De()}},[a,f,e,t]);const Re=async()=>{try{await i.signOut(),t("/")}catch(Ce){console.error("Error signing out:",Ce)}},Be=async Ce=>{k(!0);try{q(Ce),fe({}),await Ge(Ce.id);const De=await Sr(jr(e,"classroom",Ce.id,"checkin"));let Ye=[];for(const Je of De.docs){const He=Je.data(),Jn=jr(e,"classroom",Ce.id,"checkin",Je.id,"question");(await Sr(Jn)).forEach(ot=>{const qn=ot.data();qn.question_show&&Ye.push({checkinId:Je.id,checkinCode:He.code||"-",questionDocId:ot.id,...qn})})}Ye.sort((Je,He)=>(Je.question_no||0)-(He.question_no||0)),K(Ye)}catch(De){console.error("Error loading quiz:",De)}finally{k(!1)}},Ge=async Ce=>{try{const De=await Sr(jr(e,"classroom",Ce,"checkin"));let Ye=[];for(const Je of De.docs){const He=Je.data(),Jn=Mt(e,"classroom",Ce,"checkin",Je.id,"students",f.uid),Ln=await Br(Jn);if(Ln.exists()){const ot=Ln.data();Ye.push({id:Je.id,code:He.code,date:He.date,checkinTime:ot.date,status:He.status})}}Ye.sort((Je,He)=>new Date(He.date)-new Date(Je.date)),te(Ye)}catch(De){console.error("Error fetching check-in history:",De)}},qe=()=>{q(null),K([]),fe({})},mt=(Ce,De)=>{fe(Ye=>({...Ye,[Ce]:De}))},Me=async Ce=>{const De=de[Ce.questionDocId]||"";if(!De.trim()){alert("Please enter an answer or select a choice");return}try{const Ye=Mt(e,"classroom",U.id,"checkin",Ce.checkinId,"answers",String(Ce.question_no));await ki(Ye,{text:Ce.question_text},{merge:!0});const Je=Mt(Ye,"students",f.uid),He=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await ki(Je,{time:He,answer:De}),alert("Answer submitted!")}catch(Ye){console.error("Error submitting answer:",Ye),alert("Failed to submit answer.")}},rn=async Ce=>{if(Ce.preventDefault(),!H.trim()){z({type:"error",text:"กรุณาใส่รหัสห้องเรียน"});return}try{const De=Mt(e,"classroom",H);if(!(await Br(De)).exists()){z({type:"error",text:"ไม่พบห้องเรียนที่ระบุ กรุณาตรวจสอบรหัสอีกครั้ง"});return}const Je=Mt(e,"classroom",H,"students",f.uid);if((await Br(Je)).exists()){z({type:"error",text:"คุณได้ลงทะเบียนในห้องเรียนนี้แล้ว"});return}await ki(Je,{stdid:f.uid,name:(w==null?void 0:w.name)||f.email,status:0}),z({type:"success",text:"ลงทะเบียนสำเร็จ! รอการยืนยันจากอาจารย์"});const Jn=Iu(fy(e,"students"),Nu("stdid","==",f.uid)),Ln=await Sr(Jn),ot=[];Ln.forEach(sn=>{const gn=sn.ref.parent.parent;gn&&ot.push(Br(gn))});const Pt=(await Promise.all(ot)).map(sn=>({id:sn.id,...sn.data()}));v(Pt),setTimeout(()=>{Pe(!1),F(""),z({type:"",text:""})},2e3)}catch(De){console.error("Error registering for classroom:",De),z({type:"error",text:"เกิดข้อผิดพลาดในการลงทะเบียน โปรดลองอีกครั้ง"})}},at=Ce=>{try{const De=/\/register-classroom\/([^/?\s]+)/,Ye=Ce.match(De);if(Ye&&Ye[1]){const Je=Ye[1];F(Je),rn({preventDefault:()=>{}})}else z({type:"error",text:"รูปแบบ QR Code ไม่ถูกต้อง"})}catch(De){console.error("Error processing QR code:",De),z({type:"error",text:"ไม่สามารถประมวลผล QR Code ได้"})}},Gt=async Ce=>{try{Ae(!0);const De=/\/student-checkin\/([^/?\s]+)\/([^/?\s]+)/,Ye=Ce.match(De);if(!Ye||!Ye[1]||!Ye[2]){ae({type:"error",text:"QR Code ไม่ถูกต้องสำหรับการเช็คชื่อ"});return}const Je=Ye[1],He=Ye[2];if(U&&U.id!==Je){ae({type:"error",text:"QR Code นี้ไม่ตรงกับห้องเรียนที่คุณเลือก"});return}const Jn=Mt(e,"classroom",Je,"students",f.uid),Ln=await Br(Jn);if(!Ln.exists()){ae({type:"error",text:"คุณไม่ได้ลงทะเบียนในห้องเรียนนี้"});return}const ot=Mt(e,"classroom",Je,"checkin",He),qn=await Br(ot);if(!qn.exists()){ae({type:"error",text:"ไม่พบรายการเช็คชื่อ หรือการเช็คชื่อถูกยกเลิก"});return}const Pt=qn.data();if(Pt.status===0){ae({type:"error",text:"การเช็คชื่อนี้ถูกปิดใช้งานชั่วคราว กรุณาติดต่ออาจารย์"});return}if(Pt.status===2){ae({type:"error",text:"การเช็คชื่อนี้ได้สิ้นสุดแล้ว"});return}const sn=Mt(e,"classroom",Je,"checkin",He,"students",f.uid);if((await Br(sn)).exists()){ae({type:"info",text:"คุณได้เช็คชื่อในคาบเรียนนี้แล้ว"});return}const Yn=Ln.data(),Pi=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await ki(sn,{stdid:f.uid,name:(w==null?void 0:w.name)||f.email,remark:"",date:Pi}),await ki(Mt(e,"classroom",Je,"checkin",He,"scores",f.uid),{uid:f.uid,stdid:f.uid,name:(w==null?void 0:w.name)||f.email,remark:"",dates:Pi,score:1,status:1}),ae({type:"success",text:"เช็คชื่อสำเร็จ! 🎉"}),setTimeout(()=>{X(!1),ae({type:"",text:""})},3e3)}catch(De){console.error("Error processing check-in QR code:",De),ae({type:"error",text:"เกิดข้อผิดพลาดในการเช็คชื่อ โปรดลองใหม่อีกครั้ง"})}finally{Ae(!1)}},Rt=Ce=>{ae({type:"",text:""}),X(!0)};return $.useEffect(()=>{if(je&&!Q.current){const Ce=new ky("qr-reader",{fps:10,qrbox:250},!1);return Ce.render(De=>{at(De),Ce.clear()},De=>{}),Q.current=Ce,()=>{Q.current&&(Q.current.clear(),Q.current=null)}}},[je]),$.useEffect(()=>{if(J&&!Xe.current){const Ce=new ky("checkin-qr-reader",{fps:10,qrbox:250},!1);return Ce.render(De=>{Gt(De),Ce.clear()},De=>{}),Xe.current=Ce,()=>{Xe.current&&(Xe.current.clear(),Xe.current=null)}}},[J]),$.useEffect(()=>{console.log("Loading state:",R),console.log("Selected classroom:",U)},[R,U]),a?A.jsx("div",{className:"flex items-center justify-center h-screen bg-blue-50",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-2"}),A.jsx("p",{className:"text-blue-800",children:"กำลังตรวจสอบการเข้าสู่ระบบ..."})]})}):f?A.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[A.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-3xl font-bold mb-6",children:"Student Classroom"}),A.jsx("div",{className:"mb-4",children:U?A.jsx("button",{onClick:qe,className:"hover:text-blue-300 transition",children:"กลับสู่รายการห้องเรียน"}):A.jsx("button",{onClick:()=>t("/student-dashboard"),className:"hover:text-blue-300 transition",children:"ห้องเรียนของฉัน"})})]}),A.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700",children:[A.jsx(RR,{photoURL:w==null?void 0:w.photo,name:w==null?void 0:w.name,email:f==null?void 0:f.email,size:"medium"}),A.jsxs("div",{className:"ml-4",children:[A.jsx("p",{className:"font-bold",children:(w==null?void 0:w.name)||(f==null?void 0:f.email)}),A.jsx("p",{className:"text-sm",children:"Status : Student"})]})]})]}),A.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[U?A.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน : ",((kt=U.info)==null?void 0:kt.name)||"Unknown"]}):A.jsx("h1",{className:"text-3xl font-bold text-blue-900",children:"ห้องเรียนของฉัน"}),A.jsx("button",{onClick:()=>ve(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),R&&A.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"Loading..."}),!R&&!U&&A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"mb-6",children:A.jsx("button",{onClick:()=>Pe(!0),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH text-lg shadow-md",children:"ลงทะเบียนห้องเรียนใหม่"})}),b.length===0?A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-gray-600 mb-4",children:"คุณยังไม่ได้อยู่ในห้องเรียนใด ๆ"}),A.jsx("button",{onClick:()=>Pe(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH text-lg shadow-md mx-auto",children:"ลงทะเบียนห้องเรียนใหม่"})]}):A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:b.map(Ce=>{const De=Ce.info||{};return A.jsxs("div",{className:"border rounded-lg shadow-md p-4 bg-white hover:shadow-xl transition cursor-pointer",onClick:()=>Be(Ce),children:[A.jsx(Py,{imageUrl:De.photo,altText:De.name,className:"mb-4"}),A.jsx("h2",{className:"text-xl font-bold text-blue-900",children:De.name}),A.jsxs("p",{className:"text-blue-700 text-lg",children:["Code : ",De.code]}),A.jsxs("p",{className:"text-blue-700 text-lg",children:["Room : ",De.room]})]},Ce.id)})})]}),!R&&U&&A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500",children:[A.jsx("div",{className:"flex justify-between items-center",children:A.jsxs("h2",{className:"text-2xl font-bold text-blue-900 font-ChakraPetchTH",children:[A.jsx("span",{className:"inline-block mr-2",children:"📚"}),"ข้อมูลห้องเรียน"]})}),A.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"text-gray-700 mb-2",children:[A.jsx("span",{className:"font-bold",children:"รหัสวิชา:"})," ",(($n=U.info)==null?void 0:$n.code)||"N/A"]}),A.jsxs("p",{className:"text-gray-700 mb-2",children:[A.jsx("span",{className:"font-bold",children:"ชื่อวิชา:"})," ",((pt=U.info)==null?void 0:pt.name)||"N/A"]}),A.jsxs("p",{className:"text-gray-700 mb-2",children:[A.jsx("span",{className:"font-bold",children:"ห้องเรียน:"})," ",((ze=U.info)==null?void 0:ze.room)||"N/A"]})]}),(($e=U.info)==null?void 0:$e.photo)&&A.jsx("div",{className:"flex justify-center",children:A.jsx(Py,{imageUrl:U.info.photo,altText:U.info.name,className:"w-full max-w-xs rounded-md"})})]})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("h2",{className:"text-2xl font-bold text-blue-900 font-ChakraPetchTH",children:[A.jsx("span",{className:"inline-block mr-2",children:"✅"}),"การเช็คชื่อเข้าเรียน"]}),A.jsxs("button",{onClick:()=>Rt(),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH shadow-md flex items-center",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"เช็คชื่อเข้าเรียน"]})]}),A.jsxs("div",{className:"mt-3",children:[A.jsxs("p",{className:"text-gray-600 bg-blue-50 p-4 rounded-lg border border-blue-100 mb-4",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 inline-block mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"กดปุ่มเช็คชื่อเพื่อสแกน QR Code ที่อาจารย์แสดง เพื่อบันทึกการเข้าเรียนของคุณ"]}),A.jsxs("div",{className:"mt-4",children:[A.jsx("h3",{className:"text-lg font-ChakraPetchTH font-semibold text-blue-800 mb-2",children:"ประวัติการเช็คชื่อของคุณ"}),it.length>0?A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full border-collapse",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-green-50",children:[A.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"ลำดับ"}),A.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"รหัสการเช็คชื่อ"}),A.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"วันที่เช็คชื่อ"}),A.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"เช็คชื่อเมื่อ"}),A.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"สถานะ"})]})}),A.jsx("tbody",{children:it.map((Ce,De)=>A.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[A.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:De+1}),A.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:Ce.code}),A.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:Ce.date}),A.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:Ce.checkinTime}),A.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:Ce.status===1?A.jsxs("span",{className:"text-green-600 flex items-center",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"เปิดใช้งาน"]}):Ce.status===0?A.jsxs("span",{className:"text-red-600 flex items-center",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"ปิดใช้งาน"]}):A.jsxs("span",{className:"text-gray-600 flex items-center",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"เสร็จสิ้น"]})})]},Ce.id))})]})}):A.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),A.jsx("p",{className:"text-gray-600 font-ChakraPetchTH",children:"คุณยังไม่มีประวัติการเช็คชื่อในห้องเรียนนี้"})]})]})]})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-indigo-500",children:[A.jsxs("h2",{className:"text-2xl font-bold text-blue-900 font-ChakraPetchTH mb-4",children:[A.jsx("span",{className:"inline-block mr-2",children:"📝"}),"แบบทดสอบ (Quiz)"]}),ee.length===0?A.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),A.jsx("p",{className:"text-gray-600 font-ChakraPetchTH",children:"ยังไม่มีควิซในขณะนี้"}),A.jsx("p",{className:"text-gray-500 text-sm font-ChakraPetchTH mt-1",children:"อาจารย์จะเพิ่มควิซเมื่อต้องการให้คุณตอบคำถาม"})]}):A.jsx("div",{className:"space-y-6",children:ee.map(Ce=>{const De=de[Ce.questionDocId]||"";return A.jsxs("div",{className:"border-2 border-indigo-100 p-6 rounded-lg hover:bg-indigo-50 transition bg-white",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsxs("h3",{className:"font-semibold text-lg text-indigo-900 font-ChakraPetchTH",children:["คำถาม #",Ce.question_no]}),A.jsxs("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm",children:["รหัสเช็คชื่อ: ",Ce.checkinCode||"-"]})]}),A.jsx("p",{className:"font-medium mb-4 text-gray-800 font-ChakraPetchTH",children:Ce.question_text}),Ce.question_type==="objective"&&Array.isArray(Ce.choices)&&Ce.choices.length>0?A.jsx("div",{className:"flex flex-col space-y-3 mb-4 bg-white p-4 rounded-lg border border-indigo-100",children:Ce.choices.map((Ye,Je)=>A.jsxs("label",{className:"flex items-center space-x-3 p-2 rounded hover:bg-indigo-50 cursor-pointer",children:[A.jsx("input",{type:"radio",name:`q_${Ce.questionDocId}`,value:Ye,checked:De===Ye,onChange:He=>mt(Ce.questionDocId,He.target.value),className:"h-5 w-5 text-indigo-600"}),A.jsx("span",{className:"font-ChakraPetchTH",children:Ye})]},Je))}):A.jsx("textarea",{placeholder:"พิมพ์คำตอบของคุณที่นี่...",className:"w-full p-3 border border-indigo-200 rounded-lg focus:ring focus:ring-indigo-200 focus:outline-none mb-4",rows:"3",value:De,onChange:Ye=>mt(Ce.questionDocId,Ye.target.value)}),A.jsxs("button",{onClick:()=>Me(Ce),className:"bg-indigo-600 text-white px-5 py-2 rounded-lg hover:bg-indigo-700 transition font-ChakraPetchTH flex items-center",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"ส่งคำตอบ"]})]},Ce.questionDocId)})})]})]}),ie&&A.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[A.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),A.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:A.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:A.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[A.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:A.jsxs("div",{className:"sm:flex sm:items-start",children:[A.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:A.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),A.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[A.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),A.jsx("div",{className:"mt-2",children:A.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),A.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[A.jsx("button",{type:"button",onClick:()=>{ve(!1),Re()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),A.jsx("button",{type:"button",onClick:()=>ve(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]}),je&&A.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[A.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),A.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:A.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:A.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[A.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:A.jsxs("div",{className:"sm:flex sm:items-start",children:[A.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:A.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),A.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[A.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ลงทะเบียนห้องเรียน"}),A.jsxs("div",{className:"mt-2",children:[A.jsxs("form",{onSubmit:rn,children:[A.jsx("input",{type:"text",placeholder:"รหัสห้องเรียน",className:"w-full p-2 border rounded mb-2",value:H,onChange:Ce=>F(Ce.target.value)}),A.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"ลงทะเบียน"})]}),P.text&&A.jsx("p",{className:`mt-2 text-sm ${P.type==="error"?"text-red-600":"text-green-600"}`,children:P.text}),A.jsxs("div",{className:"mt-4",children:[A.jsx("h4",{className:"text-md font-ChakraPetchTH mb-2",children:"หรือสแกน QR Code"}),A.jsx("div",{id:"qr-reader",className:"w-full rounded overflow-hidden",style:{maxWidth:"100%"}})]})]})]})]})}),A.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:A.jsx("button",{type:"button",onClick:()=>Pe(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})})]})})})]}),J&&A.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[A.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),A.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:A.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:A.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[A.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:A.jsxs("div",{className:"sm:flex sm:items-start",children:[A.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:A.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),A.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[A.jsxs("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:["เช็คชื่อเข้าเรียน",U&&A.jsx("span",{className:"text-blue-600 ml-2",children:(ht=U.info)==null?void 0:ht.name})]}),A.jsxs("div",{className:"mt-2",children:[A.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"กรุณาสแกน QR Code ที่อาจารย์แสดงเพื่อเช็คชื่อเข้าเรียน"}),Ve.text&&A.jsx("div",{className:`p-3 rounded mb-4 ${Ve.type==="error"?"bg-red-100 text-red-700":Ve.type==="success"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:A.jsx("p",{className:"text-sm font-ChakraPetchTH",children:Ve.text})}),A.jsx("div",{id:"checkin-qr-reader",className:"w-full rounded overflow-hidden",style:{maxWidth:"100%"}})]})]})]})}),A.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:A.jsx("button",{type:"button",onClick:()=>X(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ปิด"})})]})})})]})]})]}):null}function MR(){const i=ea(),e=So(),t=ul(vs),[a,c]=$.useState(!0),[f,y]=$.useState(null),{classroomId:b}=F1(),[v]=RA(),w=v.get("checkinId")||"",[S,R]=$.useState(null),[k,U]=$.useState([]),[q,ee]=$.useState(""),[K,de]=$.useState(""),[fe,ie]=$.useState(!1),[ve,je]=$.useState("subjective"),[Pe,H]=$.useState([""]),[F,P]=$.useState(null),[z,Q]=$.useState(null),[J,X]=$.useState([]),[Ve,ae]=$.useState(!1),[Se,Ae]=$.useState({type:"",message:""}),[Xe,it]=$.useState(!1);$.useEffect(()=>{const ze=ig(e,$e=>{y($e),c(!1),!$e&&!a&&i("/")});return()=>ze()},[e,i,a]),$.useEffect(()=>{async function ze(){if(f){const $e=Mt(t,"users",f.uid),ht=await Br($e);ht.exists()&&R(ht.data())}}!a&&f&&ze()},[f,t,a]),$.useEffect(()=>{async function ze(){if(!(!b||!w))try{const $e=jr(t,"classroom",b,"checkin",w,"question"),ht=await Sr($e),Ce=[];if(ht.forEach(De=>{Ce.push({id:De.id,...De.data()})}),Ce.sort((De,Ye)=>De.question_no-Ye.question_no),U(Ce),!F){const De=Ce.length>0?Math.max(...Ce.map(Ye=>Ye.question_no))+1:1;ee(De.toString())}}catch($e){console.error("Error loading questions:",$e)}}ze()},[t,b,w,F]);const te=(ze,$e,ht=3e3)=>{Ae({type:ze,message:$e}),setTimeout(()=>{Ae({type:"",message:""})},ht)},Re=async()=>{if(!b||!w){te("error","ไม่พบ classroomId หรือ checkinId");return}if(!q||!K){te("error","กรุณากรอกหมายเลขและข้อความคำถาม");return}try{const ze=F||wv(),$e=Mt(t,"classroom",b,"checkin",w,"question",ze);await ki($e,{question_no:parseInt(q,10),question_text:K,question_show:fe,question_type:ve,choices:ve==="objective"?Pe.filter(De=>De.trim()!==""):[]}),te("success",F?"แก้ไขคำถามสำเร็จ":"สร้างคำถามสำเร็จ");const ht=await Sr(jr(t,"classroom",b,"checkin",w,"question")),Ce=[];ht.forEach(De=>{Ce.push({id:De.id,...De.data()})}),Ce.sort((De,Ye)=>De.question_no-Ye.question_no),U(Ce),Be()}catch(ze){console.error("Error saving question:",ze),te("error","เกิดข้อผิดพลาดในการบันทึกคำถาม")}},Be=()=>{de(""),ie(!1),je("subjective"),H([""]),P(null);const ze=k.length>0?Math.max(...k.map($e=>parseInt($e.question_no)))+1:1;ee(ze.toString())},Ge=ze=>{P(ze.id),ee(ze.question_no),de(ze.question_text),ie(ze.question_show),je(ze.question_type||"subjective"),ze.choices&&Array.isArray(ze.choices)?H(ze.choices):H([""])},qe=async ze=>{if(window.confirm("คุณแน่ใจหรือไม่ที่จะลบคำถามนี้?"))try{await du(Mt(t,"classroom",b,"checkin",w,"question",ze)),te("success","ลบคำถามสำเร็จ"),U($e=>$e.filter(ht=>ht.id!==ze))}catch($e){console.error("Error deleting question:",$e),te("error","ไม่สามารถลบคำถามได้")}},mt=async ze=>{try{const $e=Mt(t,"classroom",b,"checkin",w,"question",ze.id);await Jl($e,{question_show:!ze.question_show}),U(ht=>ht.map(Ce=>Ce.id===ze.id?{...Ce,question_show:!ze.question_show}:Ce))}catch($e){console.error("Error toggling question_show:",$e)}},Me=()=>{H(ze=>[...ze,""])},rn=(ze,$e)=>{H(ht=>{const Ce=[...ht];return Ce[ze]=$e,Ce})},at=ze=>{H($e=>{const ht=[...$e];return ht.splice(ze,1),ht})},Gt=async ze=>{if(!b||!w){alert("ไม่พบ classroomId หรือ checkinId");return}const $e=String(ze.question_no);Q(ze),X([]),ae(!0);try{const ht=Mt(t,"classroom",b,"checkin",w,"answers",$e);await ki(ht,{text:ze.question_text},{merge:!0});const Ce=jr(ht,"students"),De=await Sr(Ce),Ye=[];for(const Je of De.docs){const He=Je.data(),Jn=Je.id,Ln=Mt(t,"classroom",b,"checkin",w,"students",Jn),ot=await Br(Ln);let qn="(ไม่มีชื่อ)";ot.exists()&&(qn=ot.data().name||"(ไม่มีชื่อ)"),Ye.push({studentDocId:Jn,name:qn,...He})}X(Ye)}catch(ht){console.error("Error loading student answers:",ht),alert("ไม่สามารถโหลดคำตอบนักเรียนได้")}finally{ae(!1)}},Rt=()=>{Q(null),X([])},kt=(ze,$e)=>{X(ht=>{const Ce=[...ht];return Ce[ze]={...Ce[ze],score:$e},Ce})},$n=async ze=>{if(!z)return;const $e=J[ze],ht=String(z.question_no);if($e.score==null||$e.score===""){alert("กรุณากรอกคะแนนให้ถูกต้อง");return}try{const Ce=Mt(t,"classroom",b,"checkin",w,"answers",ht),De=Mt(Ce,"students",$e.studentDocId);await Jl(De,{score:Number($e.score)}),alert(`บันทึกคะแนนสำเร็จสำหรับนักเรียน: ${$e.studentDocId}`)}catch(Ce){console.error("Error saving score:",Ce),alert("ไม่สามารถบันทึกคะแนนได้")}},pt=async()=>{try{await Nw(e),i("/")}catch(ze){console.error("Error signing out:",ze)}};return a?A.jsx("div",{className:"min-h-screen flex items-center justify-center bg-blue-50",children:A.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-md",children:[A.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-4"}),A.jsx("p",{className:"text-blue-800 font-ChakraPetchTH",children:"กำลังตรวจสอบการเข้าสู่ระบบ..."})]})}):f?A.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[A.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-4xl font-ChakraPetchTH mb-8",children:"สร้างควิซ"}),A.jsx("ul",{className:"space-y-4",children:A.jsx("li",{children:A.jsx("button",{onClick:()=>i("/dashboard"),className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"กลับไปแดชบอร์ด"})})})]}),A.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",onClick:()=>i("/edit-profile"),children:[S&&S.photo?A.jsx("img",{src:S.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):A.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:A.jsx("span",{className:"text-lg text-white",children:"N/A"})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold font-ChakraPetchTH",children:(S==null?void 0:S.name)||(f==null?void 0:f.email)||"User"}),f&&A.jsx("p",{className:"text-blue-200 text-sm font-ChakraPetchTH",children:f.email})]})]})]}),A.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"สร้าง/จัดการควิซ"}),A.jsx("button",{onClick:()=>it(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition font-ChakraPetchTH",children:"ออกจากระบบ"})]}),Se.message&&A.jsx("div",{className:`mb-4 p-3 rounded-md ${Se.type==="success"?"bg-green-100 text-green-800":Se.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:A.jsx("p",{className:"font-ChakraPetchTH",children:Se.message})}),A.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[A.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["รหัสห้องเรียน: ",b||"N/A"," | รหัสเช็คอิน: ",w||"N/A"]}),A.jsxs("div",{className:"mb-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[A.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:F?`แก้ไขคำถาม (ID: ${F})`:"สร้างคำถามใหม่"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"หมายเลขคำถาม"}),A.jsx("input",{type:"number",className:`w-full p-2 border rounded ${F?"":"bg-gray-100"}`,value:q,onChange:ze=>ee(ze.target.value),readOnly:!F}),!F&&A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"หมายเลขคำถามถูกสร้างโดยอัตโนมัติ"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"แสดงคำถาม?"}),A.jsxs("div",{className:"flex items-center mt-2",children:[A.jsx("input",{type:"checkbox",id:"questionShow",checked:fe,onChange:ze=>ie(ze.target.checked),className:"h-5 w-5 text-blue-600"}),A.jsx("label",{htmlFor:"questionShow",className:"ml-2 text-gray-700",children:fe?"แสดงให้นักเรียนเห็น":"ซ่อนจากนักเรียน"})]})]})]}),A.jsxs("div",{className:"mt-4",children:[A.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ประเภทคำถาม"}),A.jsxs("select",{className:"p-2 border rounded w-full md:w-auto",value:ve,onChange:ze=>je(ze.target.value),children:[A.jsx("option",{value:"subjective",children:"อัตนัย (เขียนตอบ)"}),A.jsx("option",{value:"objective",children:"ปรนัย (ตัวเลือก)"})]})]}),A.jsxs("div",{className:"mt-4",children:[A.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ข้อความคำถาม"}),A.jsx("textarea",{className:"w-full p-2 border rounded",rows:3,value:K,onChange:ze=>de(ze.target.value),placeholder:"พิมพ์คำถามที่นี่..."})]}),ve==="objective"&&A.jsxs("div",{className:"mt-4",children:[A.jsx("label",{className:"block text-blue-700 mb-2 font-ChakraPetchTH",children:"ตัวเลือก"}),Pe.map((ze,$e)=>A.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[A.jsx("div",{className:"flex-none w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center",children:String.fromCharCode(65+$e)}),A.jsx("input",{type:"text",className:"flex-1 p-2 border rounded",value:ze,onChange:ht=>rn($e,ht.target.value),placeholder:`ตัวเลือกที่ ${$e+1}`}),Pe.length>1&&A.jsx("button",{onClick:()=>at($e),className:"bg-red-500 text-white px-3 py-1 rounded-full hover:bg-red-600 transition flex-none",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},$e)),A.jsxs("button",{onClick:Me,className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH flex items-center mt-2",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"เพิ่มตัวเลือก"]})]}),A.jsxs("div",{className:"mt-6 flex flex-wrap gap-2",children:[A.jsxs("button",{onClick:Re,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH flex items-center",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),F?"อัปเดตคำถาม":"บันทึกคำถาม"]}),F&&A.jsxs("button",{onClick:Be,className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH flex items-center",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"ยกเลิก"]})]})]}),A.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-2 text-blue-900",children:"รายการคำถาม"}),k.length===0?A.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำถาม"}):A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full border",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-blue-100",children:[A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ลำดับ"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ข้อความคำถาม"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ประเภท"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"แสดง?"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"การดำเนินการ"})]})}),A.jsx("tbody",{children:k.map(ze=>A.jsxs("tr",{className:"hover:bg-blue-50",children:[A.jsx("td",{className:"border p-2",children:ze.question_no}),A.jsx("td",{className:"border p-2",children:ze.question_text}),A.jsx("td",{className:"border p-2",children:ze.question_type==="objective"?"ปรนัย":"อัตนัย"}),A.jsx("td",{className:"border p-2",children:ze.question_show?"ใช่":"ไม่ใช่"}),A.jsxs("td",{className:"border p-2",children:[A.jsx("button",{onClick:()=>Ge(ze),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition font-ChakraPetchTH mr-2",children:"แก้ไข"}),A.jsx("button",{onClick:()=>mt(ze),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition font-ChakraPetchTH mr-2",children:"สลับแสดง"}),A.jsx("button",{onClick:()=>qe(ze.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition font-ChakraPetchTH mr-2",children:"ลบ"}),A.jsx("button",{onClick:()=>Gt(ze),className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition font-ChakraPetchTH",children:"ให้คะแนน"})]})]},ze.id))})]})}),z&&A.jsxs("div",{className:"mt-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsxs("h3",{className:"text-lg font-ChakraPetchTH",children:["คำตอบนักเรียนสำหรับคำถามที่ #",z.question_no]}),A.jsx("button",{onClick:Rt,className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH",children:"ปิด"})]}),Ve?A.jsx("p",{className:"font-ChakraPetchTH",children:"กำลังโหลดคำตอบ..."}):J.length===0?A.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำตอบนักเรียน"}):A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full border",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-blue-100",children:[A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คำตอบ"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"เวลา"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คะแนน"}),A.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ดำเนินการ"})]})}),A.jsx("tbody",{children:J.map((ze,$e)=>A.jsxs("tr",{className:"hover:bg-blue-50",children:[A.jsx("td",{className:"border p-2",children:ze.studentDocId}),A.jsx("td",{className:"border p-2",children:ze.name}),A.jsx("td",{className:"border p-2",children:ze.answer||"-"}),A.jsx("td",{className:"border p-2",children:ze.time||"-"}),A.jsx("td",{className:"border p-2",children:A.jsx("input",{type:"number",className:"w-20 p-1 border rounded",value:ze.score||"",onChange:ht=>kt($e,ht.target.value)})}),A.jsx("td",{className:"border p-2",children:A.jsx("button",{onClick:()=>$n($e),className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH",children:"บันทึก"})})]},ze.studentDocId))})]})})]})]})]}),Xe&&A.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[A.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),A.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:A.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:A.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[A.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:A.jsxs("div",{className:"sm:flex sm:items-start",children:[A.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:A.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),A.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[A.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),A.jsx("div",{className:"mt-2",children:A.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),A.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[A.jsx("button",{type:"button",onClick:()=>{it(!1),pt()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),A.jsx("button",{type:"button",onClick:()=>it(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]})]}):null}function OR(){const i=ul(vs),e=So(vs),t=e.currentUser,a=ea(),{classroomId:c}=F1(),[f,y]=$.useState(null),[b,v]=$.useState(null),[w,S]=$.useState([]),[R,k]=$.useState(!0);$.useEffect(()=>{if(!t){a("/");return}(async()=>{try{const ee=Mt(i,"users",t.uid),K=await Br(ee);K.exists()&&y(K.data());const de=Mt(i,"classroom",c),fe=await Br(de);fe.exists()&&v(fe.data().info||{});const ie=jr(i,"classroom",c,"checkin"),ve=await Sr(ie);let je=[];for(const Pe of ve.docs){const H=Pe.id,F=jr(i,"classroom",c,"checkin",H,"question");(await Sr(F)).forEach(z=>{const Q=z.data();Q.question_show===!0&&je.push({checkinId:H,id:z.id,question_no:Q.question_no,question_text:Q.question_text,question_show:Q.question_show})})}je.sort((Pe,H)=>Pe.question_no-H.question_no),S(je)}catch(ee){console.error("Error loading data for student detail:",ee)}finally{k(!1)}})()},[i,t,a,c]);const U=async()=>{try{await e.signOut(),a("/")}catch(q){console.error("Error signing out:",q)}};return t?R?A.jsx("div",{children:"Loading..."}):A.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[A.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-2xl mb-6",children:"Student Classroom"}),A.jsx("button",{onClick:()=>a("/student-dashboard"),className:"hover:text-blue-300 transition",children:"Back to My Classes"})]}),A.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",children:[f&&f.photo?A.jsx("img",{src:f.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):A.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:A.jsx("span",{className:"text-lg text-white",children:"N/A"})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:(f==null?void 0:f.name)||t.email}),A.jsx("p",{className:"text-sm",children:"Status: Student"})]})]})]}),A.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsxs("h1",{className:"text-3xl",children:[(b==null?void 0:b.name)||"Unknown"," - Quiz"]}),A.jsx("button",{onClick:U,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Sign Out"})]}),A.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold mb-4",children:"Questions (ที่ question_show = true)"}),w.length===0?A.jsx("p",{children:"No questions yet."}):A.jsx("ul",{className:"space-y-2",children:w.map(q=>A.jsxs("li",{className:"border p-2 rounded hover:bg-blue-50",children:[A.jsxs("span",{className:"font-semibold",children:["Question #",q.question_no,":"]})," ",q.question_text,A.jsxs("span",{className:"ml-4 italic text-sm text-gray-500",children:["(Checkin: ",q.checkinId,")"]})]},`${q.checkinId}-${q.id}`))})]})]})]}):null}function LR(){return A.jsx(CA,{children:A.jsxs(eA,{children:[A.jsx(_a,{path:"/",element:A.jsx(IN,{})}),A.jsx(_a,{path:"/dashboard",element:A.jsx(zN,{})}),A.jsx(_a,{path:"/student-dashboard",element:A.jsx(DR,{})}),A.jsx(_a,{path:"/edit-profile",element:A.jsx(HN,{})}),A.jsx(_a,{path:"/edit-classroom/:cid",element:A.jsx(GN,{})}),A.jsx(_a,{path:"/create-quiz/:classroomId",element:A.jsx(MR,{})}),A.jsx(_a,{path:"/student-classroom/:classroomId",element:A.jsx(OR,{})}),A.jsx(_a,{path:"*",element:A.jsx($b,{to:"/",replace:!0})})]})})}cb.createRoot(document.getElementById("root")).render(A.jsx(vr.StrictMode,{children:A.jsx(LR,{})}));
