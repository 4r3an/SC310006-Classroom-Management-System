(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function I0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Bd={exports:{}},Vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function Uw(){if(Bv)return Vl;Bv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Vl.Fragment=e,Vl.jsx=n,Vl.jsxs=n,Vl}var qv;function Lw(){return qv||(qv=1,Bd.exports=Uw()),Bd.exports}var v=Lw(),qd={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function zw(){if(Fv)return je;Fv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),R=Symbol.iterator;function C(M){return M===null||typeof M!="object"?null:(M=R&&M[R]||M["@@iterator"],typeof M=="function"?M:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,Q={};function z(M,re,fe){this.props=M,this.context=re,this.refs=Q,this.updater=fe||O}z.prototype.isReactComponent={},z.prototype.setState=function(M,re){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,re,"setState")},z.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function $(){}$.prototype=z.prototype;function te(M,re,fe){this.props=M,this.context=re,this.refs=Q,this.updater=fe||O}var W=te.prototype=new $;W.constructor=te,P(W,z.prototype),W.isPureReactComponent=!0;var pe=Array.isArray,ue={H:null,A:null,T:null,S:null},be=Object.prototype.hasOwnProperty;function k(M,re,fe,le,de,ke){return fe=ke.ref,{$$typeof:i,type:M,key:re,ref:fe!==void 0?fe:null,props:ke}}function A(M,re){return k(M.type,re,void 0,void 0,void 0,M.props)}function S(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function x(M){var re={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return re[fe]})}var D=/\/+/g;function L(M,re){return typeof M=="object"&&M!==null&&M.key!=null?x(""+M.key):re.toString(36)}function I(){}function he(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(I,I):(M.status="pending",M.then(function(re){M.status==="pending"&&(M.status="fulfilled",M.value=re)},function(re){M.status==="pending"&&(M.status="rejected",M.reason=re)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Re(M,re,fe,le,de){var ke=typeof M;(ke==="undefined"||ke==="boolean")&&(M=null);var Ce=!1;if(M===null)Ce=!0;else switch(ke){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(M.$$typeof){case i:case e:Ce=!0;break;case E:return Ce=M._init,Re(Ce(M._payload),re,fe,le,de)}}if(Ce)return de=de(M),Ce=le===""?"."+L(M,0):le,pe(de)?(fe="",Ce!=null&&(fe=Ce.replace(D,"$&/")+"/"),Re(de,re,fe,"",function(Se){return Se})):de!=null&&(S(de)&&(de=A(de,fe+(de.key==null||M&&M.key===de.key?"":(""+de.key).replace(D,"$&/")+"/")+Ce)),re.push(de)),1;Ce=0;var ie=le===""?".":le+":";if(pe(M))for(var me=0;me<M.length;me++)le=M[me],ke=ie+L(le,me),Ce+=Re(le,re,fe,ke,de);else if(me=C(M),typeof me=="function")for(M=me.call(M),me=0;!(le=M.next()).done;)le=le.value,ke=ie+L(le,me++),Ce+=Re(le,re,fe,ke,de);else if(ke==="object"){if(typeof M.then=="function")return Re(he(M),re,fe,le,de);throw re=String(M),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function se(M,re,fe){if(M==null)return M;var le=[],de=0;return Re(M,le,"","",function(ke){return re.call(fe,ke,de++)}),le}function ge(M){if(M._status===-1){var re=M._result;re=re(),re.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=re)}if(M._status===1)return M._result.default;throw M._result}var ce=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Oe(){}return je.Children={map:se,forEach:function(M,re,fe){se(M,function(){re.apply(this,arguments)},fe)},count:function(M){var re=0;return se(M,function(){re++}),re},toArray:function(M){return se(M,function(re){return re})||[]},only:function(M){if(!S(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},je.Component=z,je.Fragment=n,je.Profiler=o,je.PureComponent=te,je.StrictMode=s,je.Suspense=p,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,je.act=function(){throw Error("act(...) is not supported in production builds of React.")},je.cache=function(M){return function(){return M.apply(null,arguments)}},je.cloneElement=function(M,re,fe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=P({},M.props),de=M.key,ke=void 0;if(re!=null)for(Ce in re.ref!==void 0&&(ke=void 0),re.key!==void 0&&(de=""+re.key),re)!be.call(re,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&re.ref===void 0||(le[Ce]=re[Ce]);var Ce=arguments.length-2;if(Ce===1)le.children=fe;else if(1<Ce){for(var ie=Array(Ce),me=0;me<Ce;me++)ie[me]=arguments[me+2];le.children=ie}return k(M.type,de,void 0,void 0,ke,le)},je.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},je.createElement=function(M,re,fe){var le,de={},ke=null;if(re!=null)for(le in re.key!==void 0&&(ke=""+re.key),re)be.call(re,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(de[le]=re[le]);var Ce=arguments.length-2;if(Ce===1)de.children=fe;else if(1<Ce){for(var ie=Array(Ce),me=0;me<Ce;me++)ie[me]=arguments[me+2];de.children=ie}if(M&&M.defaultProps)for(le in Ce=M.defaultProps,Ce)de[le]===void 0&&(de[le]=Ce[le]);return k(M,ke,void 0,void 0,null,de)},je.createRef=function(){return{current:null}},je.forwardRef=function(M){return{$$typeof:m,render:M}},je.isValidElement=S,je.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:ge}},je.memo=function(M,re){return{$$typeof:y,type:M,compare:re===void 0?null:re}},je.startTransition=function(M){var re=ue.T,fe={};ue.T=fe;try{var le=M(),de=ue.S;de!==null&&de(fe,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Oe,ce)}catch(ke){ce(ke)}finally{ue.T=re}},je.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},je.use=function(M){return ue.H.use(M)},je.useActionState=function(M,re,fe){return ue.H.useActionState(M,re,fe)},je.useCallback=function(M,re){return ue.H.useCallback(M,re)},je.useContext=function(M){return ue.H.useContext(M)},je.useDebugValue=function(){},je.useDeferredValue=function(M,re){return ue.H.useDeferredValue(M,re)},je.useEffect=function(M,re){return ue.H.useEffect(M,re)},je.useId=function(){return ue.H.useId()},je.useImperativeHandle=function(M,re,fe){return ue.H.useImperativeHandle(M,re,fe)},je.useInsertionEffect=function(M,re){return ue.H.useInsertionEffect(M,re)},je.useLayoutEffect=function(M,re){return ue.H.useLayoutEffect(M,re)},je.useMemo=function(M,re){return ue.H.useMemo(M,re)},je.useOptimistic=function(M,re){return ue.H.useOptimistic(M,re)},je.useReducer=function(M,re,fe){return ue.H.useReducer(M,re,fe)},je.useRef=function(M){return ue.H.useRef(M)},je.useState=function(M){return ue.H.useState(M)},je.useSyncExternalStore=function(M,re,fe){return ue.H.useSyncExternalStore(M,re,fe)},je.useTransition=function(){return ue.H.useTransition()},je.version="19.0.0",je}var Gv;function Pm(){return Gv||(Gv=1,qd.exports=zw()),qd.exports}var V=Pm();const Hw=I0(V);var Fd={exports:{}},Pl={},Gd={exports:{}},Qd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function Bw(){return Qv||(Qv=1,function(i){function e(se,ge){var ce=se.length;se.push(ge);e:for(;0<ce;){var Oe=ce-1>>>1,M=se[Oe];if(0<o(M,ge))se[Oe]=ge,se[ce]=M,ce=Oe;else break e}}function n(se){return se.length===0?null:se[0]}function s(se){if(se.length===0)return null;var ge=se[0],ce=se.pop();if(ce!==ge){se[0]=ce;e:for(var Oe=0,M=se.length,re=M>>>1;Oe<re;){var fe=2*(Oe+1)-1,le=se[fe],de=fe+1,ke=se[de];if(0>o(le,ce))de<M&&0>o(ke,le)?(se[Oe]=ke,se[de]=ce,Oe=de):(se[Oe]=le,se[fe]=ce,Oe=fe);else if(de<M&&0>o(ke,ce))se[Oe]=ke,se[de]=ce,Oe=de;else break e}}return ge}function o(se,ge){var ce=se.sortIndex-ge.sortIndex;return ce!==0?ce:se.id-ge.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],y=[],E=1,R=null,C=3,O=!1,P=!1,Q=!1,z=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function W(se){for(var ge=n(y);ge!==null;){if(ge.callback===null)s(y);else if(ge.startTime<=se)s(y),ge.sortIndex=ge.expirationTime,e(p,ge);else break;ge=n(y)}}function pe(se){if(Q=!1,W(se),!P)if(n(p)!==null)P=!0,he();else{var ge=n(y);ge!==null&&Re(pe,ge.startTime-se)}}var ue=!1,be=-1,k=5,A=-1;function S(){return!(i.unstable_now()-A<k)}function x(){if(ue){var se=i.unstable_now();A=se;var ge=!0;try{e:{P=!1,Q&&(Q=!1,$(be),be=-1),O=!0;var ce=C;try{t:{for(W(se),R=n(p);R!==null&&!(R.expirationTime>se&&S());){var Oe=R.callback;if(typeof Oe=="function"){R.callback=null,C=R.priorityLevel;var M=Oe(R.expirationTime<=se);if(se=i.unstable_now(),typeof M=="function"){R.callback=M,W(se),ge=!0;break t}R===n(p)&&s(p),W(se)}else s(p);R=n(p)}if(R!==null)ge=!0;else{var re=n(y);re!==null&&Re(pe,re.startTime-se),ge=!1}}break e}finally{R=null,C=ce,O=!1}ge=void 0}}finally{ge?D():ue=!1}}}var D;if(typeof te=="function")D=function(){te(x)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,I=L.port2;L.port1.onmessage=x,D=function(){I.postMessage(null)}}else D=function(){z(x,0)};function he(){ue||(ue=!0,D())}function Re(se,ge){be=z(function(){se(i.unstable_now())},ge)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(se){se.callback=null},i.unstable_continueExecution=function(){P||O||(P=!0,he())},i.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<se?Math.floor(1e3/se):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_getFirstCallbackNode=function(){return n(p)},i.unstable_next=function(se){switch(C){case 1:case 2:case 3:var ge=3;break;default:ge=C}var ce=C;C=ge;try{return se()}finally{C=ce}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(se,ge){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ce=C;C=se;try{return ge()}finally{C=ce}},i.unstable_scheduleCallback=function(se,ge,ce){var Oe=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Oe+ce:Oe):ce=Oe,se){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ce+M,se={id:E++,callback:ge,priorityLevel:se,startTime:ce,expirationTime:M,sortIndex:-1},ce>Oe?(se.sortIndex=ce,e(y,se),n(p)===null&&se===n(y)&&(Q?($(be),be=-1):Q=!0,Re(pe,ce-Oe))):(se.sortIndex=M,e(p,se),P||O||(P=!0,he())),se},i.unstable_shouldYield=S,i.unstable_wrapCallback=function(se){var ge=C;return function(){var ce=C;C=ge;try{return se.apply(this,arguments)}finally{C=ce}}}}(Qd)),Qd}var Kv;function qw(){return Kv||(Kv=1,Gd.exports=Bw()),Gd.exports}var Kd={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function Fw(){if($v)return cn;$v=1;var i=Pm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,E){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:R==null?null:""+R,children:p,containerInfo:y,implementation:E}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,cn.createPortal=function(p,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,E)},cn.flushSync=function(p){var y=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=E,s.d.f()}},cn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},cn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},cn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var E=y.as,R=m(E,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:R,integrity:C,fetchPriority:O}):E==="script"&&s.d.X(p,{crossOrigin:R,integrity:C,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},cn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},cn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,R=m(E,y.crossOrigin);s.d.L(p,E,{crossOrigin:R,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},cn.preloadModule=function(p,y){if(typeof p=="string")if(y){var E=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},cn.requestFormReset=function(p){s.d.r(p)},cn.unstable_batchedUpdates=function(p,y){return p(y)},cn.useFormState=function(p,y,E){return f.H.useFormState(p,y,E)},cn.useFormStatus=function(){return f.H.useHostTransitionStatus()},cn.version="19.0.0",cn}var Yv;function Gw(){if(Yv)return Kd.exports;Yv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Kd.exports=Fw(),Kd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function Qw(){if(Xv)return Pl;Xv=1;var i=qw(),e=Pm(),n=Gw();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var u=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),O=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),pe=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function be(t){return t===null||typeof t!="object"?null:(t=ue&&t[ue]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function A(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case p:return"Fragment";case m:return"Portal";case E:return"Profiler";case y:return"StrictMode";case Q:return"Suspense";case z:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case O:return(t.displayName||"Context")+".Provider";case C:return(t._context.displayName||"Context")+".Consumer";case P:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return r=t.displayName||null,r!==null?r:A(t.type)||"Memo";case te:r=t._payload,t=t._init;try{return A(t(r))}catch{}}return null}var S=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=Object.assign,D,L;function I(t){if(D===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||"",L=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+D+t+L}var he=!1;function Re(t,r){if(!t||he)return"";he=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Y){var F=Y}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(Y){F=Y}t.call(ne.prototype)}}else{try{throw Error()}catch(Y){F=Y}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Y){if(Y&&F&&typeof Y.stack=="string")return[Y.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),b=d[0],T=d[1];if(b&&T){var N=b.split(`
`),U=T.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===U.length)for(l=N.length-1,h=U.length-1;1<=l&&0<=h&&N[l]!==U[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==U[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==U[h]){var X=`
`+N[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{he=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?I(a):""}function se(t){switch(t.tag){case 26:case 27:case 5:return I(t.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 15:return t=Re(t.type,!1),t;case 11:return t=Re(t.type.render,!1),t;case 1:return t=Re(t.type,!0),t;default:return""}}function ge(t){try{var r="";do r+=se(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ce(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function Oe(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function M(t){if(ce(t)!==t)throw Error(s(188))}function re(t){var r=t.alternate;if(!r){if(r=ce(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return M(h),t;if(d===l)return M(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var b=!1,T=h.child;T;){if(T===a){b=!0,a=h,l=d;break}if(T===l){b=!0,l=h,a=d;break}T=T.sibling}if(!b){for(T=d.child;T;){if(T===a){b=!0,a=d,l=h;break}if(T===l){b=!0,l=d,a=h;break}T=T.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function fe(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=fe(t),r!==null)return r;t=t.sibling}return null}var le=Array.isArray,de=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},Ce=[],ie=-1;function me(t){return{current:t}}function Se(t){0>ie||(t.current=Ce[ie],Ce[ie]=null,ie--)}function Te(t,r){ie++,Ce[ie]=t.current,t.current=r}var Fe=me(null),Ot=me(null),Xt=me(null),xn=me(null);function pn(t,r){switch(Te(Xt,r),Te(Ot,t),Te(Fe,null),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?yv(r):0;break;default:if(t=t===8?r.parentNode:r,r=t.tagName,t=t.namespaceURI)t=yv(t),r=vv(t,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Se(Fe),Te(Fe,r)}function ln(){Se(Fe),Se(Ot),Se(Xt)}function er(t){t.memoizedState!==null&&Te(xn,t);var r=Fe.current,a=vv(r,t.type);r!==a&&(Te(Ot,t),Te(Fe,a))}function En(t){Ot.current===t&&(Se(Fe),Se(Ot)),xn.current===t&&(Se(xn),Il._currentValue=ke)}var pr=Object.prototype.hasOwnProperty,pt=i.unstable_scheduleCallback,Ur=i.unstable_cancelCallback,ko=i.unstable_shouldYield,Lr=i.unstable_requestPaint,bt=i.unstable_now,ga=i.unstable_getCurrentPriorityLevel,Et=i.unstable_ImmediatePriority,xt=i.unstable_UserBlockingPriority,tr=i.unstable_NormalPriority,ya=i.unstable_LowPriority,Ts=i.unstable_IdlePriority,Mo=i.log,zr=i.unstable_setDisableYieldValue,gr=null,zt=null;function ws(t){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(gr,t,void 0,(t.current.flags&128)===128)}catch{}}function Pn(t){if(typeof Mo=="function"&&zr(t),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(gr,t)}catch{}}var Wt=Math.clz32?Math.clz32:G,Ss=Math.log,va=Math.LN2;function G(t){return t>>>=0,t===0?32:31-(Ss(t)/va|0)|0}var oe=128,He=4194304;function Pe(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ke(t,r){var a=t.pendingLanes;if(a===0)return 0;var l=0,h=t.suspendedLanes,d=t.pingedLanes,b=t.warmLanes;t=t.finishedLanes!==0;var T=a&134217727;return T!==0?(a=T&~h,a!==0?l=Pe(a):(d&=T,d!==0?l=Pe(d):t||(b=T&~b,b!==0&&(l=Pe(b))))):(T=a&~h,T!==0?l=Pe(T):d!==0?l=Pe(d):t||(b=a&~b,b!==0&&(l=Pe(b)))),l===0?0:r!==0&&r!==l&&!(r&h)&&(h=l&-l,b=r&-r,h>=b||h===32&&(b&4194176)!==0)?r:l}function Tt(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function _a(t,r){switch(t){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(){var t=oe;return oe<<=1,!(oe&4194176)&&(oe=128),t}function Si(){var t=He;return He<<=1,!(He&62914560)&&(He=4194304),t}function ba(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function wt(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function yu(t,r,a,l,h,d){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,N=t.expirationTimes,U=t.hiddenUpdates;for(a=b&~a;0<a;){var X=31-Wt(a),ne=1<<X;T[X]=0,N[X]=-1;var F=U[X];if(F!==null)for(U[X]=null,X=0;X<F.length;X++){var Y=F[X];Y!==null&&(Y.lane&=-536870913)}a&=~ne}l!==0&&Ai(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(b&~r))}function Ai(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Wt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194218}function xi(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Wt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function vu(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function _u(){var t=de.p;return t!==0?t:(t=window.event,t===void 0?32:Pv(t.type))}function Ri(t,r){var a=de.p;try{return de.p=t,r()}finally{de.p=a}}var yr=Math.random().toString(36).slice(2),Ht="__reactFiber$"+yr,kt="__reactProps$"+yr,Hr="__reactContainer$"+yr,As="__reactEvents$"+yr,Ea="__reactListeners$"+yr,vr="__reactHandles$"+yr,Po="__reactResources$"+yr,Ci="__reactMarker$"+yr;function xs(t){delete t[Ht],delete t[kt],delete t[As],delete t[Ea],delete t[vr]}function nr(t){var r=t[Ht];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Hr]||a[Ht]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Ev(t);t!==null;){if(a=t[Ht])return a;t=Ev(t)}return r}t=a,a=t.parentNode}return null}function Br(t){if(t=t[Ht]||t[Hr]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Ni(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Ii(t){var r=t[Po];return r||(r=t[Po]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ht(t){t[Ci]=!0}var jo=new Set,Ta={};function Rn(t,r){Tn(t,r),Tn(t+"Capture",r)}function Tn(t,r){for(Ta[t]=r,t=0;t<r.length;t++)jo.add(r[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uo={},Lo={};function bu(t){return pr.call(Lo,t)?!0:pr.call(Uo,t)?!1:Gh.test(t)?Lo[t]=!0:(Uo[t]=!0,!1)}function Di(t,r,a){if(bu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Oi(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function jn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Eu(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Qh(t){var r=Eu(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,d.call(this,b)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Rs(t){t._valueTracker||(t._valueTracker=Qh(t))}function zo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Eu(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function wa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var qr=/[\n"\\]/g;function gt(t){return t.replace(qr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ki(t,r,a,l,h,d,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+gn(r)):t.value!==""+gn(r)&&(t.value=""+gn(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Sa(t,b,gn(r)):a!=null?Sa(t,b,gn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+gn(T):t.removeAttribute("name")}function Cs(t,r,a,l,h,d,b,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+gn(a):"",r=r!=null?""+gn(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Sa(t,r,a){r==="number"&&wa(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ze(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+gn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Ns(t,r,a){if(r!=null&&(r=""+gn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+gn(a):""}function Mi(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(le(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=gn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Un(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Kh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ho(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Kh.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Tu(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Ho(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&Ho(t,d,r[d])}function Bo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _r(t){return Yh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ln=null;function Aa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fr=null,Gr=null;function Qr(t){var r=Br(t);if(r&&(t=r.stateNode)){var a=t[kt]||null;e:switch(t=r.stateNode,r.type){case"input":if(ki(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[kt]||null;if(!h)throw Error(s(90));ki(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&zo(l)}break e;case"textarea":Ns(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ze(t,!!a.multiple,r,!1)}}}var qo=!1;function wu(t,r,a){if(qo)return t(r,a);qo=!0;try{var l=t(r);return l}finally{if(qo=!1,(Fr!==null||Gr!==null)&&(mc(),Fr&&(r=Fr,t=Gr,Gr=Fr=null,Qr(r),t)))for(r=0;r<t.length;r++)Qr(t[r])}}function Is(t,r){var a=t.stateNode;if(a===null)return null;var l=a[kt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var zn=!1;if(Cn)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){zn=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{zn=!1}var br=null,Vi=null,Kr=null;function Fo(){if(Kr)return Kr;var t,r=Vi,a=r.length,l,h="value"in br?br.value:br.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&r[a-l]===h[d-l];l++);return Kr=h.slice(t,1<l?1-l:void 0)}function Er(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Tr(){return!0}function Go(){return!1}function Bt(t){function r(a,l,h,d,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Tr:Go,this.isPropagationStopped=Go,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),r}var nt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=Bt(nt),Os=x({},nt,{view:0,detail:0}),Su=Bt(Os),Ra,Ca,wr,ks=x({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wr&&(wr&&t.type==="mousemove"?(Ra=t.screenX-wr.screenX,Ca=t.screenY-wr.screenY):Ca=Ra=0,wr=t),Ra)},movementY:function(t){return"movementY"in t?t.movementY:Ca}}),Hn=Bt(ks),Au=x({},ks,{dataTransfer:0}),Xh=Bt(Au),Ms=x({},Os,{relatedTarget:0}),Na=Bt(Ms),Qo=x({},nt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ia=Bt(Qo),xu=x({},nt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Da=Bt(xu),Wh=x({},nt,{data:0}),Ko=Bt(Wh),Vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $o(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Cu[t])?!!r[t]:!1}function Ps(){return $o}var Nu=x({},Os,{key:function(t){if(t.key){var r=Vs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Er(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ru[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(t){return t.type==="keypress"?Er(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Er(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Oa=Bt(Nu),Iu=x({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yo=Bt(Iu),$r=x({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),Du=Bt($r),Ou=x({},nt,{propertyName:0,elapsedTime:0,pseudoElement:0}),ku=Bt(Ou),Mu=x({},ks,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ka=Bt(Mu),yn=x({},nt,{newState:0,oldState:0}),Vu=Bt(yn),Pu=[9,13,27,32],Sr=Cn&&"CompositionEvent"in window,c=null;Cn&&"documentMode"in document&&(c=document.documentMode);var g=Cn&&"TextEvent"in window&&!c,_=Cn&&(!Sr||c&&8<c&&11>=c),w=" ",B=!1;function K(t,r){switch(t){case"keyup":return Pu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $e=!1;function Mt(t,r){switch(t){case"compositionend":return ae(r);case"keypress":return r.which!==32?null:(B=!0,w);case"textInput":return t=r.data,t===w&&B?null:t;default:return null}}function Ye(t,r){if($e)return t==="compositionend"||!Sr&&K(t,r)?(t=Fo(),Kr=Vi=br=null,$e=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var qt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!qt[t.type]:r==="textarea"}function Yr(t,r,a,l){Fr?Gr?Gr.push(l):Gr=[l]:Fr=l,r=_c(r,"onChange"),0<r.length&&(a=new xa("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Zt=null,Ar=null;function Xo(t){fv(t,0)}function ju(t){var r=Ni(t);if(zo(r))return t}function Hp(t,r){if(t==="change")return r}var Bp=!1;if(Cn){var Zh;if(Cn){var Jh="oninput"in document;if(!Jh){var qp=document.createElement("div");qp.setAttribute("oninput","return;"),Jh=typeof qp.oninput=="function"}Zh=Jh}else Zh=!1;Bp=Zh&&(!document.documentMode||9<document.documentMode)}function Fp(){Zt&&(Zt.detachEvent("onpropertychange",Gp),Ar=Zt=null)}function Gp(t){if(t.propertyName==="value"&&ju(Ar)){var r=[];Yr(r,Ar,t,Aa(t)),wu(Xo,r)}}function mT(t,r,a){t==="focusin"?(Fp(),Zt=r,Ar=a,Zt.attachEvent("onpropertychange",Gp)):t==="focusout"&&Fp()}function pT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ju(Ar)}function gT(t,r){if(t==="click")return ju(r)}function yT(t,r){if(t==="input"||t==="change")return ju(r)}function vT(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:vT;function Wo(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!pr.call(r,h)||!Nn(t[h],r[h]))return!1}return!0}function Qp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kp(t,r){var a=Qp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Qp(a)}}function $p(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?$p(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Yp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=wa(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=wa(t.document)}return r}function ef(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function _T(t,r){var a=Yp(r);r=t.focusedElem;var l=t.selectionRange;if(a!==r&&r&&r.ownerDocument&&$p(r.ownerDocument.documentElement,r)){if(l!==null&&ef(r)){if(t=l.start,a=l.end,a===void 0&&(a=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(a,r.value.length);else if(a=(t=r.ownerDocument||document)&&t.defaultView||window,a.getSelection){a=a.getSelection();var h=r.textContent.length,d=Math.min(l.start,h);l=l.end===void 0?d:Math.min(l.end,h),!a.extend&&d>l&&(h=l,l=d,d=h),h=Kp(r,d);var b=Kp(r,l);h&&b&&(a.rangeCount!==1||a.anchorNode!==h.node||a.anchorOffset!==h.offset||a.focusNode!==b.node||a.focusOffset!==b.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),a.removeAllRanges(),d>l?(a.addRange(t),a.extend(b.node,b.offset)):(t.setEnd(b.node,b.offset),a.addRange(t)))}}for(t=[],a=r;a=a.parentNode;)a.nodeType===1&&t.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)a=t[r],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var bT=Cn&&"documentMode"in document&&11>=document.documentMode,Ma=null,tf=null,Zo=null,nf=!1;function Xp(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nf||Ma==null||Ma!==wa(l)||(l=Ma,"selectionStart"in l&&ef(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Zo&&Wo(Zo,l)||(Zo=l,l=_c(tf,"onSelect"),0<l.length&&(r=new xa("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ma)))}function js(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Va={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionrun:js("Transition","TransitionRun"),transitionstart:js("Transition","TransitionStart"),transitioncancel:js("Transition","TransitionCancel"),transitionend:js("Transition","TransitionEnd")},rf={},Wp={};Cn&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Us(t){if(rf[t])return rf[t];if(!Va[t])return t;var r=Va[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Wp)return rf[t]=r[a];return t}var Zp=Us("animationend"),Jp=Us("animationiteration"),eg=Us("animationstart"),ET=Us("transitionrun"),TT=Us("transitionstart"),wT=Us("transitioncancel"),tg=Us("transitionend"),ng=new Map,rg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function rr(t,r){ng.set(t,r),Rn(r,[t])}var Bn=[],Pa=0,sf=0;function Uu(){for(var t=Pa,r=sf=Pa=0;r<t;){var a=Bn[r];Bn[r++]=null;var l=Bn[r];Bn[r++]=null;var h=Bn[r];Bn[r++]=null;var d=Bn[r];if(Bn[r++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}d!==0&&ig(a,h,d)}}function Lu(t,r,a,l){Bn[Pa++]=t,Bn[Pa++]=r,Bn[Pa++]=a,Bn[Pa++]=l,sf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function af(t,r,a,l){return Lu(t,r,a,l),zu(t)}function Pi(t,r){return Lu(t,null,null,r),zu(t)}function ig(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;h&&r!==null&&t.tag===3&&(d=t.stateNode,h=31-Wt(a),d=d.hiddenUpdates,t=d[h],t===null?d[h]=[r]:t.push(r),r.lane=a|536870912)}function zu(t){if(50<wl)throw wl=0,fd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ja={},sg=new WeakMap;function qn(t,r){if(typeof t=="object"&&t!==null){var a=sg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:ge(r)},sg.set(t,r),r)}return{value:t,source:r,stack:ge(r)}}var Ua=[],La=0,Hu=null,Bu=0,Fn=[],Gn=0,Ls=null,Xr=1,Wr="";function zs(t,r){Ua[La++]=Bu,Ua[La++]=Hu,Hu=t,Bu=r}function ag(t,r,a){Fn[Gn++]=Xr,Fn[Gn++]=Wr,Fn[Gn++]=Ls,Ls=t;var l=Xr;t=Wr;var h=32-Wt(l)-1;l&=~(1<<h),a+=1;var d=32-Wt(r)+h;if(30<d){var b=h-h%5;d=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Xr=1<<32-Wt(r)+h|a<<h|l,Wr=d+t}else Xr=1<<d|a<<h|l,Wr=t}function of(t){t.return!==null&&(zs(t,1),ag(t,1,0))}function lf(t){for(;t===Hu;)Hu=Ua[--La],Ua[La]=null,Bu=Ua[--La],Ua[La]=null;for(;t===Ls;)Ls=Fn[--Gn],Fn[Gn]=null,Wr=Fn[--Gn],Fn[Gn]=null,Xr=Fn[--Gn],Fn[Gn]=null}var vn=null,Jt=null,Je=!1,ir=null,xr=!1,uf=Error(s(519));function Hs(t){var r=Error(s(418,""));throw tl(qn(r,t)),uf}function og(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Ht]=t,r[kt]=l,a){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(a=0;a<Al.length;a++)Ge(Al[a],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Ge("invalid",r),Cs(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Rs(r);break;case"select":Ge("invalid",r);break;case"textarea":Ge("invalid",r),Mi(r,l.value,l.defaultValue,l.children),Rs(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||gv(r.textContent,a)?(l.popover!=null&&(Ge("beforetoggle",r),Ge("toggle",r)),l.onScroll!=null&&Ge("scroll",r),l.onScrollEnd!=null&&Ge("scrollend",r),l.onClick!=null&&(r.onclick=bc),r=!0):r=!1,r||Hs(t)}function lg(t){for(vn=t.return;vn;)switch(vn.tag){case 3:case 27:xr=!0;return;case 5:case 13:xr=!1;return;default:vn=vn.return}}function Jo(t){if(t!==vn)return!1;if(!Je)return lg(t),Je=!0,!1;var r=!1,a;if((a=t.tag!==3&&t.tag!==27)&&((a=t.tag===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Nd(t.type,t.memoizedProps)),a=!a),a&&(r=!0),r&&Jt&&Hs(t),lg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){Jt=ar(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}Jt=null}}else Jt=vn?ar(t.stateNode.nextSibling):null;return!0}function el(){Jt=vn=null,Je=!1}function tl(t){ir===null?ir=[t]:ir.push(t)}var nl=Error(s(460)),ug=Error(s(474)),cf={then:function(){}};function cg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qu(){}function hg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(qu,qu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,t===nl?Error(s(483)):t;default:if(typeof r.status=="string")r.then(qu,qu);else{if(t=ot,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,t===nl?Error(s(483)):t}throw rl=r,nl}}var rl=null;function fg(){if(rl===null)throw Error(s(459));var t=rl;return rl=null,t}var za=null,il=0;function Fu(t){var r=il;return il+=1,za===null&&(za=[]),hg(za,t,r)}function sl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Gu(t,r){throw r.$$typeof===u?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function dg(t){var r=t._init;return r(t._payload)}function mg(t){function r(H,j){if(t){var q=H.deletions;q===null?(H.deletions=[j],H.flags|=16):q.push(j)}}function a(H,j){if(!t)return null;for(;j!==null;)r(H,j),j=j.sibling;return null}function l(H){for(var j=new Map;H!==null;)H.key!==null?j.set(H.key,H):j.set(H.index,H),H=H.sibling;return j}function h(H,j){return H=$i(H,j),H.index=0,H.sibling=null,H}function d(H,j,q){return H.index=q,t?(q=H.alternate,q!==null?(q=q.index,q<j?(H.flags|=33554434,j):q):(H.flags|=33554434,j)):(H.flags|=1048576,j)}function b(H){return t&&H.alternate===null&&(H.flags|=33554434),H}function T(H,j,q,Z){return j===null||j.tag!==6?(j=id(q,H.mode,Z),j.return=H,j):(j=h(j,q),j.return=H,j)}function N(H,j,q,Z){var _e=q.type;return _e===p?X(H,j,q.props.children,Z,q.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===te&&dg(_e)===j.type)?(j=h(j,q.props),sl(j,q),j.return=H,j):(j=uc(q.type,q.key,q.props,null,H.mode,Z),sl(j,q),j.return=H,j)}function U(H,j,q,Z){return j===null||j.tag!==4||j.stateNode.containerInfo!==q.containerInfo||j.stateNode.implementation!==q.implementation?(j=sd(q,H.mode,Z),j.return=H,j):(j=h(j,q.children||[]),j.return=H,j)}function X(H,j,q,Z,_e){return j===null||j.tag!==7?(j=Ws(q,H.mode,Z,_e),j.return=H,j):(j=h(j,q),j.return=H,j)}function ne(H,j,q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=id(""+j,H.mode,q),j.return=H,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case f:return q=uc(j.type,j.key,j.props,null,H.mode,q),sl(q,j),q.return=H,q;case m:return j=sd(j,H.mode,q),j.return=H,j;case te:var Z=j._init;return j=Z(j._payload),ne(H,j,q)}if(le(j)||be(j))return j=Ws(j,H.mode,q,null),j.return=H,j;if(typeof j.then=="function")return ne(H,Fu(j),q);if(j.$$typeof===O)return ne(H,ac(H,j),q);Gu(H,j)}return null}function F(H,j,q,Z){var _e=j!==null?j.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return _e!==null?null:T(H,j,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case f:return q.key===_e?N(H,j,q,Z):null;case m:return q.key===_e?U(H,j,q,Z):null;case te:return _e=q._init,q=_e(q._payload),F(H,j,q,Z)}if(le(q)||be(q))return _e!==null?null:X(H,j,q,Z,null);if(typeof q.then=="function")return F(H,j,Fu(q),Z);if(q.$$typeof===O)return F(H,j,ac(H,q),Z);Gu(H,q)}return null}function Y(H,j,q,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return H=H.get(q)||null,T(j,H,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case f:return H=H.get(Z.key===null?q:Z.key)||null,N(j,H,Z,_e);case m:return H=H.get(Z.key===null?q:Z.key)||null,U(j,H,Z,_e);case te:var Le=Z._init;return Z=Le(Z._payload),Y(H,j,q,Z,_e)}if(le(Z)||be(Z))return H=H.get(q)||null,X(j,H,Z,_e,null);if(typeof Z.then=="function")return Y(H,j,q,Fu(Z),_e);if(Z.$$typeof===O)return Y(H,j,q,ac(j,Z),_e);Gu(j,Z)}return null}function Ee(H,j,q,Z){for(var _e=null,Le=null,we=j,xe=j=0,Qt=null;we!==null&&xe<q.length;xe++){we.index>xe?(Qt=we,we=null):Qt=we.sibling;var et=F(H,we,q[xe],Z);if(et===null){we===null&&(we=Qt);break}t&&we&&et.alternate===null&&r(H,we),j=d(et,j,xe),Le===null?_e=et:Le.sibling=et,Le=et,we=Qt}if(xe===q.length)return a(H,we),Je&&zs(H,xe),_e;if(we===null){for(;xe<q.length;xe++)we=ne(H,q[xe],Z),we!==null&&(j=d(we,j,xe),Le===null?_e=we:Le.sibling=we,Le=we);return Je&&zs(H,xe),_e}for(we=l(we);xe<q.length;xe++)Qt=Y(we,H,xe,q[xe],Z),Qt!==null&&(t&&Qt.alternate!==null&&we.delete(Qt.key===null?xe:Qt.key),j=d(Qt,j,xe),Le===null?_e=Qt:Le.sibling=Qt,Le=Qt);return t&&we.forEach(function(ts){return r(H,ts)}),Je&&zs(H,xe),_e}function Me(H,j,q,Z){if(q==null)throw Error(s(151));for(var _e=null,Le=null,we=j,xe=j=0,Qt=null,et=q.next();we!==null&&!et.done;xe++,et=q.next()){we.index>xe?(Qt=we,we=null):Qt=we.sibling;var ts=F(H,we,et.value,Z);if(ts===null){we===null&&(we=Qt);break}t&&we&&ts.alternate===null&&r(H,we),j=d(ts,j,xe),Le===null?_e=ts:Le.sibling=ts,Le=ts,we=Qt}if(et.done)return a(H,we),Je&&zs(H,xe),_e;if(we===null){for(;!et.done;xe++,et=q.next())et=ne(H,et.value,Z),et!==null&&(j=d(et,j,xe),Le===null?_e=et:Le.sibling=et,Le=et);return Je&&zs(H,xe),_e}for(we=l(we);!et.done;xe++,et=q.next())et=Y(we,H,xe,et.value,Z),et!==null&&(t&&et.alternate!==null&&we.delete(et.key===null?xe:et.key),j=d(et,j,xe),Le===null?_e=et:Le.sibling=et,Le=et);return t&&we.forEach(function(jw){return r(H,jw)}),Je&&zs(H,xe),_e}function _t(H,j,q,Z){if(typeof q=="object"&&q!==null&&q.type===p&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case f:e:{for(var _e=q.key;j!==null;){if(j.key===_e){if(_e=q.type,_e===p){if(j.tag===7){a(H,j.sibling),Z=h(j,q.props.children),Z.return=H,H=Z;break e}}else if(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===te&&dg(_e)===j.type){a(H,j.sibling),Z=h(j,q.props),sl(Z,q),Z.return=H,H=Z;break e}a(H,j);break}else r(H,j);j=j.sibling}q.type===p?(Z=Ws(q.props.children,H.mode,Z,q.key),Z.return=H,H=Z):(Z=uc(q.type,q.key,q.props,null,H.mode,Z),sl(Z,q),Z.return=H,H=Z)}return b(H);case m:e:{for(_e=q.key;j!==null;){if(j.key===_e)if(j.tag===4&&j.stateNode.containerInfo===q.containerInfo&&j.stateNode.implementation===q.implementation){a(H,j.sibling),Z=h(j,q.children||[]),Z.return=H,H=Z;break e}else{a(H,j);break}else r(H,j);j=j.sibling}Z=sd(q,H.mode,Z),Z.return=H,H=Z}return b(H);case te:return _e=q._init,q=_e(q._payload),_t(H,j,q,Z)}if(le(q))return Ee(H,j,q,Z);if(be(q)){if(_e=be(q),typeof _e!="function")throw Error(s(150));return q=_e.call(q),Me(H,j,q,Z)}if(typeof q.then=="function")return _t(H,j,Fu(q),Z);if(q.$$typeof===O)return _t(H,j,ac(H,q),Z);Gu(H,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,j!==null&&j.tag===6?(a(H,j.sibling),Z=h(j,q),Z.return=H,H=Z):(a(H,j),Z=id(q,H.mode,Z),Z.return=H,H=Z),b(H)):a(H,j)}return function(H,j,q,Z){try{il=0;var _e=_t(H,j,q,Z);return za=null,_e}catch(we){if(we===nl)throw we;var Le=Yn(29,we,null,H.mode);return Le.lanes=Z,Le.return=H,Le}finally{}}}var Bs=mg(!0),pg=mg(!1),Ha=me(null),Qu=me(0);function gg(t,r){t=li,Te(Qu,t),Te(Ha,r),li=t|r.baseLanes}function hf(){Te(Qu,li),Te(Ha,Ha.current)}function ff(){li=Qu.current,Se(Ha),Se(Qu)}var Qn=me(null),Rr=null;function ji(t){var r=t.alternate;Te(Pt,Pt.current&1),Te(Qn,t),Rr===null&&(r===null||Ha.current!==null||r.memoizedState!==null)&&(Rr=t)}function yg(t){if(t.tag===22){if(Te(Pt,Pt.current),Te(Qn,t),Rr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Rr=t)}}else Ui()}function Ui(){Te(Pt,Pt.current),Te(Qn,Qn.current)}function Zr(t){Se(Qn),Rr===t&&(Rr=null),Se(Pt)}var Pt=me(0);function Ku(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ST=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},AT=i.unstable_scheduleCallback,xT=i.unstable_NormalPriority,jt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function df(){return{controller:new ST,data:new Map,refCount:0}}function al(t){t.refCount--,t.refCount===0&&AT(xT,function(){t.controller.abort()})}var ol=null,mf=0,Ba=0,qa=null;function RT(t,r){if(ol===null){var a=ol=[];mf=0,Ba=bd(),qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return mf++,r.then(vg,vg),r}function vg(){if(--mf===0&&ol!==null){qa!==null&&(qa.status="fulfilled");var t=ol;ol=null,Ba=0,qa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function CT(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var _g=S.S;S.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&RT(t,r),_g!==null&&_g(t,r)};var qs=me(null);function pf(){var t=qs.current;return t!==null?t:ot.pooledCache}function $u(t,r){r===null?Te(qs,qs.current):Te(qs,r.pool)}function bg(){var t=pf();return t===null?null:{parent:jt._currentValue,pool:t}}var Li=0,Ue=null,it=null,Rt=null,Yu=!1,Fa=!1,Fs=!1,Xu=0,ll=0,Ga=null,NT=0;function St(){throw Error(s(321))}function gf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Nn(t[a],r[a]))return!1;return!0}function yf(t,r,a,l,h,d){return Li=d,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,S.H=t===null||t.memoizedState===null?Gs:zi,Fs=!1,d=a(l,h),Fs=!1,Fa&&(d=Tg(r,a,l,h)),Eg(t),d}function Eg(t){S.H=Cr;var r=it!==null&&it.next!==null;if(Li=0,Rt=it=Ue=null,Yu=!1,ll=0,Ga=null,r)throw Error(s(300));t===null||Ft||(t=t.dependencies,t!==null&&sc(t)&&(Ft=!0))}function Tg(t,r,a,l){Ue=t;var h=0;do{if(Fa&&(Ga=null),ll=0,Fa=!1,25<=h)throw Error(s(301));if(h+=1,Rt=it=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}S.H=Qs,d=r(a,l)}while(Fa);return d}function IT(){var t=S.H,r=t.useState()[0];return r=typeof r.then=="function"?ul(r):r,t=t.useState()[0],(it!==null?it.memoizedState:null)!==t&&(Ue.flags|=1024),r}function vf(){var t=Xu!==0;return Xu=0,t}function _f(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function bf(t){if(Yu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Yu=!1}Li=0,Rt=it=Ue=null,Fa=!1,ll=Xu=0,Ga=null}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ue.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Ct(){if(it===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var r=Rt===null?Ue.memoizedState:Rt.next;if(r!==null)Rt=r,it=t;else{if(t===null)throw Ue.alternate===null?Error(s(467)):Error(s(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Rt===null?Ue.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}var Wu;Wu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ul(t){var r=ll;return ll+=1,Ga===null&&(Ga=[]),t=hg(Ga,t,r),r=Ue,(Rt===null?r.memoizedState:Rt.next)===null&&(r=r.alternate,S.H=r===null||r.memoizedState===null?Gs:zi),t}function Zu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ul(t);if(t.$$typeof===O)return un(t)}throw Error(s(438,String(t)))}function Ef(t){var r=null,a=Ue.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ue.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Wu(),Ue.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=pe;return r.index++,a}function Jr(t,r){return typeof r=="function"?r(t):r}function Ju(t){var r=Ct();return Tf(r,it,t)}function Tf(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var b=h.next;h.next=d.next,d.next=b}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var T=b=null,N=null,U=r,X=!1;do{var ne=U.lane&-536870913;if(ne!==U.lane?(Xe&ne)===ne:(Li&ne)===ne){var F=U.revertLane;if(F===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),ne===Ba&&(X=!0);else if((Li&F)===F){U=U.next,F===Ba&&(X=!0);continue}else ne={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(T=N=ne,b=d):N=N.next=ne,Ue.lanes|=F,Yi|=F;ne=U.action,Fs&&a(d,ne),d=U.hasEagerState?U.eagerState:a(d,ne)}else F={lane:ne,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(T=N=F,b=d):N=N.next=F,Ue.lanes|=ne,Yi|=ne;U=U.next}while(U!==null&&U!==r);if(N===null?b=d:N.next=T,!Nn(d,t.memoizedState)&&(Ft=!0,X&&(a=qa,a!==null)))throw a;t.memoizedState=d,t.baseState=b,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function wf(t){var r=Ct(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do d=t(d,b.action),b=b.next;while(b!==h);Nn(d,r.memoizedState)||(Ft=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function wg(t,r,a){var l=Ue,h=Ct(),d=Je;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!Nn((it||h).memoizedState,a);if(b&&(h.memoizedState=a,Ft=!0),h=h.queue,xf(xg.bind(null,l,h,t),[t]),h.getSnapshot!==r||b||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,Qa(9,Ag.bind(null,l,h,a,r),{destroy:void 0},null),ot===null)throw Error(s(349));d||Li&60||Sg(l,r,a)}return a}function Sg(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ue.updateQueue,r===null?(r=Wu(),Ue.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Ag(t,r,a,l){r.value=a,r.getSnapshot=l,Rg(r)&&Cg(t)}function xg(t,r,a){return a(function(){Rg(r)&&Cg(t)})}function Rg(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Nn(t,a)}catch{return!0}}function Cg(t){var r=Pi(t,2);r!==null&&_n(r,t,2)}function Sf(t){var r=wn();if(typeof t=="function"){var a=t;if(t=a(),Fs){Pn(!0);try{a()}finally{Pn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:t},r}function Ng(t,r,a,l){return t.baseState=a,Tf(t,it,typeof l=="function"?l:Jr)}function DT(t,r,a,l,h){if(nc(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){d.listeners.push(b)}};S.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,Ig(r,d)):(d.next=a.next,r.pending=a.next=d)}}function Ig(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=S.T,b={};S.T=b;try{var T=a(h,l),N=S.S;N!==null&&N(b,T),Dg(t,r,T)}catch(U){Af(t,r,U)}finally{S.T=d}}else try{d=a(h,l),Dg(t,r,d)}catch(U){Af(t,r,U)}}function Dg(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Og(t,r,l)},function(l){return Af(t,r,l)}):Og(t,r,a)}function Og(t,r,a){r.status="fulfilled",r.value=a,kg(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Ig(t,a)))}function Af(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,kg(r),r=r.next;while(r!==l)}t.action=null}function kg(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Mg(t,r){return r}function Vg(t,r){if(Je){var a=ot.formState;if(a!==null){e:{var l=Ue;if(Je){if(Jt){t:{for(var h=Jt,d=xr;h.nodeType!==8;){if(!d){h=null;break t}if(h=ar(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Jt=ar(h.nextSibling),l=h.data==="F!";break e}}Hs(l)}l=!1}l&&(r=a[0])}}return a=wn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mg,lastRenderedState:r},a.queue=l,a=Jg.bind(null,Ue,l),l.dispatch=a,l=Sf(!1),d=Df.bind(null,Ue,!1,l.queue),l=wn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=DT.bind(null,Ue,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Pg(t){var r=Ct();return jg(r,it,t)}function jg(t,r,a){r=Tf(t,r,Mg)[0],t=Ju(Jr)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?ul(r):r;var l=Ct(),h=l.queue,d=h.dispatch;return a!==l.memoizedState&&(Ue.flags|=2048,Qa(9,OT.bind(null,h,a),{destroy:void 0},null)),[r,d,t]}function OT(t,r){t.action=r}function Ug(t){var r=Ct(),a=it;if(a!==null)return jg(r,a,t);Ct(),r=r.memoizedState,a=Ct();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Qa(t,r,a,l){return t={tag:t,create:r,inst:a,deps:l,next:null},r=Ue.updateQueue,r===null&&(r=Wu(),Ue.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Lg(){return Ct().memoizedState}function ec(t,r,a,l){var h=wn();Ue.flags|=t,h.memoizedState=Qa(1|r,a,{destroy:void 0},l===void 0?null:l)}function tc(t,r,a,l){var h=Ct();l=l===void 0?null:l;var d=h.memoizedState.inst;it!==null&&l!==null&&gf(l,it.memoizedState.deps)?h.memoizedState=Qa(r,a,d,l):(Ue.flags|=t,h.memoizedState=Qa(1|r,a,d,l))}function zg(t,r){ec(8390656,8,t,r)}function xf(t,r){tc(2048,8,t,r)}function Hg(t,r){return tc(4,2,t,r)}function Bg(t,r){return tc(4,4,t,r)}function qg(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Fg(t,r,a){a=a!=null?a.concat([t]):null,tc(4,4,qg.bind(null,r,t),a)}function Rf(){}function Gg(t,r){var a=Ct();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&gf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Qg(t,r){var a=Ct();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&gf(r,l[1]))return l[0];if(l=t(),Fs){Pn(!0);try{t()}finally{Pn(!1)}}return a.memoizedState=[l,r],l}function Cf(t,r,a){return a===void 0||Li&1073741824?t.memoizedState=r:(t.memoizedState=a,t=$y(),Ue.lanes|=t,Yi|=t,a)}function Kg(t,r,a,l){return Nn(a,r)?a:Ha.current!==null?(t=Cf(t,a,l),Nn(t,r)||(Ft=!0),t):Li&42?(t=$y(),Ue.lanes|=t,Yi|=t,r):(Ft=!0,t.memoizedState=a)}function $g(t,r,a,l,h){var d=de.p;de.p=d!==0&&8>d?d:8;var b=S.T,T={};S.T=T,Df(t,!1,r,a);try{var N=h(),U=S.S;if(U!==null&&U(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var X=CT(N,l);cl(t,r,X,kn(t))}else cl(t,r,l,kn(t))}catch(ne){cl(t,r,{then:function(){},status:"rejected",reason:ne},kn())}finally{de.p=d,S.T=b}}function kT(){}function Nf(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Yg(t).queue;$g(t,h,r,ke,a===null?kT:function(){return Xg(t),a(l)})}function Yg(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:ke},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Xg(t){var r=Yg(t).next.queue;cl(t,r,{},kn())}function If(){return un(Il)}function Wg(){return Ct().memoizedState}function Zg(){return Ct().memoizedState}function MT(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=kn();t=qi(a);var l=Fi(r,t,a);l!==null&&(_n(l,r,a),dl(l,r,a)),r={cache:df()},t.payload=r;return}r=r.return}}function VT(t,r,a){var l=kn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},nc(t)?ey(r,a):(a=af(t,r,a,l),a!==null&&(_n(a,t,l),ty(a,r,l)))}function Jg(t,r,a){var l=kn();cl(t,r,a,l)}function cl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(nc(t))ey(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var b=r.lastRenderedState,T=d(b,a);if(h.hasEagerState=!0,h.eagerState=T,Nn(T,b))return Lu(t,r,h,0),ot===null&&Uu(),!1}catch{}finally{}if(a=af(t,r,h,l),a!==null)return _n(a,t,l),ty(a,r,l),!0}return!1}function Df(t,r,a,l){if(l={lane:2,revertLane:bd(),action:l,hasEagerState:!1,eagerState:null,next:null},nc(t)){if(r)throw Error(s(479))}else r=af(t,a,l,2),r!==null&&_n(r,t,2)}function nc(t){var r=t.alternate;return t===Ue||r!==null&&r===Ue}function ey(t,r){Fa=Yu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function ty(t,r,a){if(a&4194176){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,xi(t,a)}}var Cr={readContext:un,use:Zu,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St};Cr.useCacheRefresh=St,Cr.useMemoCache=St,Cr.useHostTransitionStatus=St,Cr.useFormState=St,Cr.useActionState=St,Cr.useOptimistic=St;var Gs={readContext:un,use:Zu,useCallback:function(t,r){return wn().memoizedState=[t,r===void 0?null:r],t},useContext:un,useEffect:zg,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,ec(4194308,4,qg.bind(null,r,t),a)},useLayoutEffect:function(t,r){return ec(4194308,4,t,r)},useInsertionEffect:function(t,r){ec(4,2,t,r)},useMemo:function(t,r){var a=wn();r=r===void 0?null:r;var l=t();if(Fs){Pn(!0);try{t()}finally{Pn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=wn();if(a!==void 0){var h=a(r);if(Fs){Pn(!0);try{a(r)}finally{Pn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=VT.bind(null,Ue,t),[l.memoizedState,t]},useRef:function(t){var r=wn();return t={current:t},r.memoizedState=t},useState:function(t){t=Sf(t);var r=t.queue,a=Jg.bind(null,Ue,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Rf,useDeferredValue:function(t,r){var a=wn();return Cf(a,t,r)},useTransition:function(){var t=Sf(!1);return t=$g.bind(null,Ue,t.queue,!0,!1),wn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ue,h=wn();if(Je){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ot===null)throw Error(s(349));Xe&60||Sg(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,zg(xg.bind(null,l,d,t),[t]),l.flags|=2048,Qa(9,Ag.bind(null,l,d,a,r),{destroy:void 0},null),a},useId:function(){var t=wn(),r=ot.identifierPrefix;if(Je){var a=Wr,l=Xr;a=(l&~(1<<32-Wt(l)-1)).toString(32)+a,r=":"+r+"R"+a,a=Xu++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=NT++,r=":"+r+"r"+a.toString(32)+":";return t.memoizedState=r},useCacheRefresh:function(){return wn().memoizedState=MT.bind(null,Ue)}};Gs.useMemoCache=Ef,Gs.useHostTransitionStatus=If,Gs.useFormState=Vg,Gs.useActionState=Vg,Gs.useOptimistic=function(t){var r=wn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Df.bind(null,Ue,!0,a),a.dispatch=r,[t,r]};var zi={readContext:un,use:Zu,useCallback:Gg,useContext:un,useEffect:xf,useImperativeHandle:Fg,useInsertionEffect:Hg,useLayoutEffect:Bg,useMemo:Qg,useReducer:Ju,useRef:Lg,useState:function(){return Ju(Jr)},useDebugValue:Rf,useDeferredValue:function(t,r){var a=Ct();return Kg(a,it.memoizedState,t,r)},useTransition:function(){var t=Ju(Jr)[0],r=Ct().memoizedState;return[typeof t=="boolean"?t:ul(t),r]},useSyncExternalStore:wg,useId:Wg};zi.useCacheRefresh=Zg,zi.useMemoCache=Ef,zi.useHostTransitionStatus=If,zi.useFormState=Pg,zi.useActionState=Pg,zi.useOptimistic=function(t,r){var a=Ct();return Ng(a,it,t,r)};var Qs={readContext:un,use:Zu,useCallback:Gg,useContext:un,useEffect:xf,useImperativeHandle:Fg,useInsertionEffect:Hg,useLayoutEffect:Bg,useMemo:Qg,useReducer:wf,useRef:Lg,useState:function(){return wf(Jr)},useDebugValue:Rf,useDeferredValue:function(t,r){var a=Ct();return it===null?Cf(a,t,r):Kg(a,it.memoizedState,t,r)},useTransition:function(){var t=wf(Jr)[0],r=Ct().memoizedState;return[typeof t=="boolean"?t:ul(t),r]},useSyncExternalStore:wg,useId:Wg};Qs.useCacheRefresh=Zg,Qs.useMemoCache=Ef,Qs.useHostTransitionStatus=If,Qs.useFormState=Ug,Qs.useActionState=Ug,Qs.useOptimistic=function(t,r){var a=Ct();return it!==null?Ng(a,it,t,r):(a.baseState=t,[t,a.queue.dispatch])};function Of(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:x({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var kf={isMounted:function(t){return(t=t._reactInternals)?ce(t)===t:!1},enqueueSetState:function(t,r,a){t=t._reactInternals;var l=kn(),h=qi(l);h.payload=r,a!=null&&(h.callback=a),r=Fi(t,h,l),r!==null&&(_n(r,t,l),dl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=kn(),h=qi(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Fi(t,h,l),r!==null&&(_n(r,t,l),dl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=kn(),l=qi(a);l.tag=2,r!=null&&(l.callback=r),r=Fi(t,l,a),r!==null&&(_n(r,t,a),dl(r,t,a))}};function ny(t,r,a,l,h,d,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,b):r.prototype&&r.prototype.isPureReactComponent?!Wo(a,l)||!Wo(h,d):!0}function ry(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&kf.enqueueReplaceState(r,r.state,null)}function Ks(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=x({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var rc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function iy(t){rc(t)}function sy(t){console.error(t)}function ay(t){rc(t)}function ic(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function oy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Mf(t,r,a){return a=qi(a),a.tag=3,a.payload={element:null},a.callback=function(){ic(t,r)},a}function ly(t){return t=qi(t),t.tag=3,t}function uy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){oy(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){oy(r,a,l),typeof h!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function PT(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&fl(r,a,h,!0),a=Qn.current,a!==null){switch(a.tag){case 13:return Rr===null?pd():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===cf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),yd(t,l,h)),!1;case 22:return a.flags|=65536,l===cf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),yd(t,l,h)),!1}throw Error(s(435,a.tag))}return yd(t,l,h),pd(),!1}if(Je)return r=Qn.current,r!==null?(!(r.flags&65536)&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==uf&&(t=Error(s(422),{cause:l}),tl(qn(t,a)))):(l!==uf&&(r=Error(s(423),{cause:l}),tl(qn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=qn(l,a),h=Mf(t.stateNode,l,h),Yf(t,h),vt!==4&&(vt=2)),!1;var d=Error(s(520),{cause:l});if(d=qn(d,a),El===null?El=[d]:El.push(d),vt!==4&&(vt=2),r===null)return!0;l=qn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Mf(a.stateNode,l,t),Yf(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Xi===null||!Xi.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ly(h),uy(h,t,a,l),Yf(a,h),!1}a=a.return}while(a!==null);return!1}var cy=Error(s(461)),Ft=!1;function en(t,r,a,l){r.child=t===null?pg(r,null,a,l):Bs(r,t.child,a,l)}function hy(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return Ys(r),l=yf(t,r,a,b,d,h),T=vf(),t!==null&&!Ft?(_f(t,r,h),ei(t,r,h)):(Je&&T&&of(r),r.flags|=1,en(t,r,l,h),r.child)}function fy(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!rd(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,dy(t,r,d,l,h)):(t=uc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!qf(t,h)){var b=d.memoizedProps;if(a=a.compare,a=a!==null?a:Wo,a(b,l)&&t.ref===r.ref)return ei(t,r,h)}return r.flags|=1,t=$i(d,l),t.ref=r.ref,t.return=r,r.child=t}function dy(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(Wo(d,l)&&t.ref===r.ref)if(Ft=!1,r.pendingProps=l=d,qf(t,h))t.flags&131072&&(Ft=!0);else return r.lanes=t.lanes,ei(t,r,h)}return Vf(t,r,a,l,h)}function my(t,r,a){var l=r.pendingProps,h=l.children,d=(r.stateNode._pendingVisibility&2)!==0,b=t!==null?t.memoizedState:null;if(hl(t,r),l.mode==="hidden"||d){if(r.flags&128){if(l=b!==null?b.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return py(t,r,l,a)}if(a&536870912)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&$u(r,b!==null?b.cachePool:null),b!==null?gg(r,b):hf(),yg(r);else return r.lanes=r.childLanes=536870912,py(t,r,b!==null?b.baseLanes|a:a,a)}else b!==null?($u(r,b.cachePool),gg(r,b),Ui(),r.memoizedState=null):(t!==null&&$u(r,null),hf(),Ui());return en(t,r,h,a),r.child}function py(t,r,a,l){var h=pf();return h=h===null?null:{parent:jt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&$u(r,null),hf(),yg(r),t!==null&&fl(t,r,l,!0),null}function hl(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=2097664)}}function Vf(t,r,a,l,h){return Ys(r),a=yf(t,r,a,l,void 0,h),l=vf(),t!==null&&!Ft?(_f(t,r,h),ei(t,r,h)):(Je&&l&&of(r),r.flags|=1,en(t,r,a,h),r.child)}function gy(t,r,a,l,h,d){return Ys(r),r.updateQueue=null,a=Tg(r,l,a,h),Eg(t),l=vf(),t!==null&&!Ft?(_f(t,r,d),ei(t,r,d)):(Je&&l&&of(r),r.flags|=1,en(t,r,a,d),r.child)}function yy(t,r,a,l,h){if(Ys(r),r.stateNode===null){var d=ja,b=a.contextType;typeof b=="object"&&b!==null&&(d=un(b)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=kf,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Kf(r),b=a.contextType,d.context=typeof b=="object"&&b!==null?un(b):ja,d.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Of(r,a,b,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(b=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),b!==d.state&&kf.enqueueReplaceState(d,d.state,null),pl(r,l,d,h),ml(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var T=r.memoizedProps,N=Ks(a,T);d.props=N;var U=d.context,X=a.contextType;b=ja,typeof X=="object"&&X!==null&&(b=un(X));var ne=a.getDerivedStateFromProps;X=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||U!==b)&&ry(r,d,l,b),Bi=!1;var F=r.memoizedState;d.state=F,pl(r,l,d,h),ml(),U=r.memoizedState,T||F!==U||Bi?(typeof ne=="function"&&(Of(r,a,ne,l),U=r.memoizedState),(N=Bi||ny(r,a,N,l,F,U,b))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=U),d.props=l,d.state=U,d.context=b,l=N):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,$f(t,r),b=r.memoizedProps,X=Ks(a,b),d.props=X,ne=r.pendingProps,F=d.context,U=a.contextType,N=ja,typeof U=="object"&&U!==null&&(N=un(U)),T=a.getDerivedStateFromProps,(U=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==ne||F!==N)&&ry(r,d,l,N),Bi=!1,F=r.memoizedState,d.state=F,pl(r,l,d,h),ml();var Y=r.memoizedState;b!==ne||F!==Y||Bi||t!==null&&t.dependencies!==null&&sc(t.dependencies)?(typeof T=="function"&&(Of(r,a,T,l),Y=r.memoizedState),(X=Bi||ny(r,a,X,l,F,Y,N)||t!==null&&t.dependencies!==null&&sc(t.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,N)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Y),d.props=l,d.state=Y,d.context=N,l=X):(typeof d.componentDidUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,hl(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=Bs(r,t.child,null,h),r.child=Bs(r,null,a,h)):en(t,r,a,h),r.memoizedState=d.state,t=r.child):t=ei(t,r,h),t}function vy(t,r,a,l){return el(),r.flags|=256,en(t,r,a,l),r.child}var Pf={dehydrated:null,treeContext:null,retryLane:0};function jf(t){return{baseLanes:t,cachePool:bg()}}function Uf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Xn),t}function _y(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,b;if((b=d)||(b=t!==null&&t.memoizedState===null?!1:(Pt.current&2)!==0),b&&(h=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(Je){if(h?ji(r):Ui(),Je){var T=Jt,N;if(N=T){e:{for(N=T,T=xr;N.nodeType!==8;){if(!T){T=null;break e}if(N=ar(N.nextSibling),N===null){T=null;break e}}T=N}T!==null?(r.memoizedState={dehydrated:T,treeContext:Ls!==null?{id:Xr,overflow:Wr}:null,retryLane:536870912},N=Yn(18,null,null,0),N.stateNode=T,N.return=r,r.child=N,vn=r,Jt=null,N=!0):N=!1}N||Hs(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return T.data==="$!"?r.lanes=16:r.lanes=536870912,null;Zr(r)}return T=l.children,l=l.fallback,h?(Ui(),h=r.mode,T=zf({mode:"hidden",children:T},h),l=Ws(l,h,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,h=r.child,h.memoizedState=jf(a),h.childLanes=Uf(t,b,a),r.memoizedState=Pf,l):(ji(r),Lf(r,T))}if(N=t.memoizedState,N!==null&&(T=N.dehydrated,T!==null)){if(d)r.flags&256?(ji(r),r.flags&=-257,r=Hf(t,r,a)):r.memoizedState!==null?(Ui(),r.child=t.child,r.flags|=128,r=null):(Ui(),h=l.fallback,T=r.mode,l=zf({mode:"visible",children:l.children},T),h=Ws(h,T,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Bs(r,t.child,null,a),l=r.child,l.memoizedState=jf(a),l.childLanes=Uf(t,b,a),r.memoizedState=Pf,r=h);else if(ji(r),T.data==="$!"){if(b=T.nextSibling&&T.nextSibling.dataset,b)var U=b.dgst;b=U,l=Error(s(419)),l.stack="",l.digest=b,tl({value:l,source:null,stack:null}),r=Hf(t,r,a)}else if(Ft||fl(t,r,a,!1),b=(a&t.childLanes)!==0,Ft||b){if(b=ot,b!==null){if(l=a&-a,l&42)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=l&(b.suspendedLanes|a)?0:l,l!==0&&l!==N.retryLane)throw N.retryLane=l,Pi(t,l),_n(b,t,l),cy}T.data==="$?"||pd(),r=Hf(t,r,a)}else T.data==="$?"?(r.flags|=128,r.child=t.child,r=WT.bind(null,t),T._reactRetry=r,r=null):(t=N.treeContext,Jt=ar(T.nextSibling),vn=r,Je=!0,ir=null,xr=!1,t!==null&&(Fn[Gn++]=Xr,Fn[Gn++]=Wr,Fn[Gn++]=Ls,Xr=t.id,Wr=t.overflow,Ls=r),r=Lf(r,l.children),r.flags|=4096);return r}return h?(Ui(),h=l.fallback,T=r.mode,N=t.child,U=N.sibling,l=$i(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&31457280,U!==null?h=$i(U,h):(h=Ws(h,T,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,T=t.child.memoizedState,T===null?T=jf(a):(N=T.cachePool,N!==null?(U=jt._currentValue,N=N.parent!==U?{parent:U,pool:U}:N):N=bg(),T={baseLanes:T.baseLanes|a,cachePool:N}),h.memoizedState=T,h.childLanes=Uf(t,b,a),r.memoizedState=Pf,l):(ji(r),a=t.child,t=a.sibling,a=$i(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=a,r.memoizedState=null,a)}function Lf(t,r){return r=zf({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function zf(t,r){return Gy(t,r,0,null)}function Hf(t,r,a){return Bs(r,t.child,null,a),t=Lf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function by(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Gf(t.return,r,a)}function Bf(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Ey(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(en(t,r,l.children,a),l=Pt.current,l&2)l=l&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,a,r);else if(t.tag===19)by(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(Te(Pt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Ku(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Bf(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Ku(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Bf(r,!0,a,null,d);break;case"together":Bf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ei(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Yi|=r.lanes,!(a&r.childLanes))if(t!==null){if(fl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=$i(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=$i(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function qf(t,r){return t.lanes&r?!0:(t=t.dependencies,!!(t!==null&&sc(t)))}function jT(t,r,a){switch(r.tag){case 3:pn(r,r.stateNode.containerInfo),Hi(r,jt,t.memoizedState.cache),el();break;case 27:case 5:er(r);break;case 4:pn(r,r.stateNode.containerInfo);break;case 10:Hi(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(ji(r),r.flags|=128,null):a&r.child.childLanes?_y(t,r,a):(ji(r),t=ei(t,r,a),t!==null?t.sibling:null);ji(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(fl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Ey(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Te(Pt,Pt.current),l)break;return null;case 22:case 23:return r.lanes=0,my(t,r,a);case 24:Hi(r,jt,t.memoizedState.cache)}return ei(t,r,a)}function Ty(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ft=!0;else{if(!qf(t,a)&&!(r.flags&128))return Ft=!1,jT(t,r,a);Ft=!!(t.flags&131072)}else Ft=!1,Je&&r.flags&1048576&&ag(r,Bu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")rd(l)?(t=Ks(l,t),r.tag=1,r=yy(null,r,l,t,a)):(r.tag=0,r=Vf(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===P){r.tag=11,r=hy(null,r,l,t,a);break e}else if(h===$){r.tag=14,r=fy(null,r,l,t,a);break e}}throw r=A(l)||l,Error(s(306,r,""))}}return r;case 0:return Vf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Ks(l,r.pendingProps),yy(t,r,l,h,a);case 3:e:{if(pn(r,r.stateNode.containerInfo),t===null)throw Error(s(387));var d=r.pendingProps;h=r.memoizedState,l=h.element,$f(t,r),pl(r,d,null,a);var b=r.memoizedState;if(d=b.cache,Hi(r,jt,d),d!==h.cache&&Qf(r,[jt],a,!0),ml(),d=b.element,h.isDehydrated)if(h={element:d,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=h,r.memoizedState=h,r.flags&256){r=vy(t,r,d,a);break e}else if(d!==l){l=qn(Error(s(424)),r),tl(l),r=vy(t,r,d,a);break e}else for(Jt=ar(r.stateNode.containerInfo.firstChild),vn=r,Je=!0,ir=null,xr=!0,a=pg(r,null,d,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(el(),d===l){r=ei(t,r,a);break e}en(t,r,d,a)}r=r.child}return r;case 26:return hl(t,r),t===null?(a=Av(r.type,null,r.pendingProps,null))?r.memoizedState=a:Je||(a=r.type,t=r.pendingProps,l=Ec(Xt.current).createElement(a),l[Ht]=r,l[kt]=t,tn(l,a,t),ht(l),r.stateNode=l):r.memoizedState=Av(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return er(r),t===null&&Je&&(l=r.stateNode=Tv(r.type,r.pendingProps,Xt.current),vn=r,xr=!0,Jt=ar(l.firstChild)),l=r.pendingProps.children,t!==null||Je?en(t,r,l,a):r.child=Bs(r,null,l,a),hl(t,r),r.child;case 5:return t===null&&Je&&((h=l=Jt)&&(l=dw(l,r.type,r.pendingProps,xr),l!==null?(r.stateNode=l,vn=r,Jt=ar(l.firstChild),xr=!1,h=!0):h=!1),h||Hs(r)),er(r),h=r.type,d=r.pendingProps,b=t!==null?t.memoizedProps:null,l=d.children,Nd(h,d)?l=null:b!==null&&Nd(h,b)&&(r.flags|=32),r.memoizedState!==null&&(h=yf(t,r,IT,null,null,a),Il._currentValue=h),hl(t,r),en(t,r,l,a),r.child;case 6:return t===null&&Je&&((t=a=Jt)&&(a=mw(a,r.pendingProps,xr),a!==null?(r.stateNode=a,vn=r,Jt=null,t=!0):t=!1),t||Hs(r)),null;case 13:return _y(t,r,a);case 4:return pn(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Bs(r,null,l,a):en(t,r,l,a),r.child;case 11:return hy(t,r,r.type,r.pendingProps,a);case 7:return en(t,r,r.pendingProps,a),r.child;case 8:return en(t,r,r.pendingProps.children,a),r.child;case 12:return en(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Hi(r,r.type,l.value),en(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Ys(r),h=un(h),l=l(h),r.flags|=1,en(t,r,l,a),r.child;case 14:return fy(t,r,r.type,r.pendingProps,a);case 15:return dy(t,r,r.type,r.pendingProps,a);case 19:return Ey(t,r,a);case 22:return my(t,r,a);case 24:return Ys(r),l=un(jt),t===null?(h=pf(),h===null&&(h=ot,d=df(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},Kf(r),Hi(r,jt,h)):(t.lanes&a&&($f(t,r),pl(r,null,null,a),ml()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Hi(r,jt,l)):(l=d.cache,Hi(r,jt,l),l!==h.cache&&Qf(r,[jt],a,!0))),en(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}var Ff=me(null),$s=null,ti=null;function Hi(t,r,a){Te(Ff,r._currentValue),r._currentValue=a}function ni(t){t._currentValue=Ff.current,Se(Ff)}function Gf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Qf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var b=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var N=0;N<r.length;N++)if(T.context===r[N]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Gf(d.return,a,t),l||(b=null);break e}d=T.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=a,d=b.alternate,d!==null&&(d.lanes|=a),Gf(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function fl(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if(h.flags&524288)d=!0;else if(h.flags&262144)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var T=h.type;Nn(h.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(h===xn.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Il):t=[Il])}h=h.return}t!==null&&Qf(r,t,a,l),r.flags|=262144}function sc(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ys(t){$s=t,ti=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function un(t){return wy($s,t)}function ac(t,r){return $s===null&&Ys(t),wy(t,r)}function wy(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ti===null){if(t===null)throw Error(s(308));ti=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ti=ti.next=r;return a}var Bi=!1;function Kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,dt&2){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=zu(t),ig(t,null,a),r}return Lu(t,l,r,a),zu(t)}function dl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194176)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,xi(t,a)}}function Yf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=b:d=d.next=b,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Xf=!1;function ml(){if(Xf){var t=qa;if(t!==null)throw t}}function pl(t,r,a,l){Xf=!1;var h=t.updateQueue;Bi=!1;var d=h.firstBaseUpdate,b=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var N=T,U=N.next;N.next=null,b===null?d=U:b.next=U,b=N;var X=t.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==b&&(T===null?X.firstBaseUpdate=U:T.next=U,X.lastBaseUpdate=N))}if(d!==null){var ne=h.baseState;b=0,X=U=N=null,T=d;do{var F=T.lane&-536870913,Y=F!==T.lane;if(Y?(Xe&F)===F:(l&F)===F){F!==0&&F===Ba&&(Xf=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ee=t,Me=T;F=r;var _t=a;switch(Me.tag){case 1:if(Ee=Me.payload,typeof Ee=="function"){ne=Ee.call(_t,ne,F);break e}ne=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Me.payload,F=typeof Ee=="function"?Ee.call(_t,ne,F):Ee,F==null)break e;ne=x({},ne,F);break e;case 2:Bi=!0}}F=T.callback,F!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[F]:Y.push(F))}else Y={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(U=X=Y,N=ne):X=X.next=Y,b|=F;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);X===null&&(N=ne),h.baseState=N,h.firstBaseUpdate=U,h.lastBaseUpdate=X,d===null&&(h.shared.lanes=0),Yi|=b,t.lanes=b,t.memoizedState=ne}}function Sy(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Ay(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Sy(a[t],r)}function gl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,b=a.inst;l=d(),b.destroy=l}a=a.next}while(a!==h)}}catch(T){at(r,r.return,T)}}function Gi(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,h=r;var N=a;try{T()}catch(U){at(h,N,U)}}}l=l.next}while(l!==d)}}catch(U){at(r,r.return,U)}}function xy(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Ay(r,a)}catch(l){at(t,t.return,l)}}}function Ry(t,r,a){a.props=Ks(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){at(t,r,l)}}function Xs(t,r){try{var a=t.ref;if(a!==null){var l=t.stateNode;switch(t.tag){case 26:case 27:case 5:var h=l;break;default:h=l}typeof a=="function"?t.refCleanup=a(h):a.current=h}}catch(d){at(t,r,d)}}function In(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){at(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){at(t,r,h)}else a.current=null}function Cy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){at(t,t.return,h)}}function Ny(t,r,a){try{var l=t.stateNode;lw(l,t.type,a,r),l[kt]=r}catch(h){at(t,t.return,h)}}function Iy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function Wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(t,r):a.insertBefore(t,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(t,a)):(r=a,r.appendChild(t)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=bc));else if(l!==4&&l!==27&&(t=t.child,t!==null))for(Zf(t,r,a),t=t.sibling;t!==null;)Zf(t,r,a),t=t.sibling}function oc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&l!==27&&(t=t.child,t!==null))for(oc(t,r,a),t=t.sibling;t!==null;)oc(t,r,a),t=t.sibling}var ri=!1,yt=!1,Jf=!1,Dy=typeof WeakSet=="function"?WeakSet:Set,Gt=null,Oy=!1;function UT(t,r){if(t=t.containerInfo,Rd=Rc,t=Yp(t),ef(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var b=0,T=-1,N=-1,U=0,X=0,ne=t,F=null;t:for(;;){for(var Y;ne!==a||h!==0&&ne.nodeType!==3||(T=b+h),ne!==d||l!==0&&ne.nodeType!==3||(N=b+l),ne.nodeType===3&&(b+=ne.nodeValue.length),(Y=ne.firstChild)!==null;)F=ne,ne=Y;for(;;){if(ne===t)break t;if(F===a&&++U===h&&(T=b),F===d&&++X===l&&(N=b),(Y=ne.nextSibling)!==null)break;ne=F,F=ne.parentNode}ne=Y}a=T===-1||N===-1?null:{start:T,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cd={focusedElem:t,selectionRange:a},Rc=!1,Gt=r;Gt!==null;)if(r=Gt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Gt=t;else for(;Gt!==null;){switch(r=Gt,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ee=Ks(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ee,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Me){at(a,a.return,Me)}}break;case 3:if(t&1024){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Od(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Od(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Gt=t;break}Gt=r.return}return Ee=Oy,Oy=!1,Ee}function ky(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:si(t,a),l&4&&gl(5,a);break;case 1:if(si(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(T){at(a,a.return,T)}else{var h=Ks(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(T){at(a,a.return,T)}}l&64&&xy(a),l&512&&Xs(a,a.return);break;case 3:if(si(t,a),l&64&&(l=a.updateQueue,l!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ay(l,t)}catch(T){at(a,a.return,T)}}break;case 26:si(t,a),l&512&&Xs(a,a.return);break;case 27:case 5:si(t,a),r===null&&l&4&&Cy(a),l&512&&Xs(a,a.return);break;case 12:si(t,a);break;case 13:si(t,a),l&4&&Py(t,a);break;case 22:if(h=a.memoizedState!==null||ri,!h){r=r!==null&&r.memoizedState!==null||yt;var d=ri,b=yt;ri=h,(yt=r)&&!b?Qi(t,a,(a.subtreeFlags&8772)!==0):si(t,a),ri=d,yt=b}l&512&&(a.memoizedProps.mode==="manual"?Xs(a,a.return):In(a,a.return));break;default:si(t,a)}}function My(t){var r=t.alternate;r!==null&&(t.alternate=null,My(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&xs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Nt=null,Dn=!1;function ii(t,r,a){for(a=a.child;a!==null;)Vy(t,r,a),a=a.sibling}function Vy(t,r,a){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(gr,a)}catch{}switch(a.tag){case 26:yt||In(a,r),ii(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||In(a,r);var l=Nt,h=Dn;for(Nt=a.stateNode,ii(t,r,a),a=a.stateNode,r=a.attributes;r.length;)a.removeAttributeNode(r[0]);xs(a),Nt=l,Dn=h;break;case 5:yt||In(a,r);case 6:h=Nt;var d=Dn;if(Nt=null,ii(t,r,a),Nt=h,Dn=d,Nt!==null)if(Dn)try{t=Nt,l=a.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)}catch(b){at(a,r,b)}else try{Nt.removeChild(a.stateNode)}catch(b){at(a,r,b)}break;case 18:Nt!==null&&(Dn?(r=Nt,a=a.stateNode,r.nodeType===8?Dd(r.parentNode,a):r.nodeType===1&&Dd(r,a),Ml(r)):Dd(Nt,a.stateNode));break;case 4:l=Nt,h=Dn,Nt=a.stateNode.containerInfo,Dn=!0,ii(t,r,a),Nt=l,Dn=h;break;case 0:case 11:case 14:case 15:yt||Gi(2,a,r),yt||Gi(4,a,r),ii(t,r,a);break;case 1:yt||(In(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ry(a,r,l)),ii(t,r,a);break;case 21:ii(t,r,a);break;case 22:yt||In(a,r),yt=(l=yt)||a.memoizedState!==null,ii(t,r,a),yt=l;break;default:ii(t,r,a)}}function Py(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ml(t)}catch(a){at(r,r.return,a)}}function LT(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Dy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Dy),r;default:throw Error(s(435,t.tag))}}function ed(t,r){var a=LT(t);r.forEach(function(l){var h=ZT.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Kn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,b=r,T=b;e:for(;T!==null;){switch(T.tag){case 27:case 5:Nt=T.stateNode,Dn=!1;break e;case 3:Nt=T.stateNode.containerInfo,Dn=!0;break e;case 4:Nt=T.stateNode.containerInfo,Dn=!0;break e}T=T.return}if(Nt===null)throw Error(s(160));Vy(d,b,h),Nt=null,Dn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)jy(r,t),r=r.sibling}var sr=null;function jy(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Kn(r,t),$n(t),l&4&&(Gi(3,t,t.return),gl(3,t),Gi(5,t,t.return));break;case 1:Kn(r,t),$n(t),l&512&&(yt||a===null||In(a,a.return)),l&64&&ri&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=sr;if(Kn(r,t),$n(t),l&512&&(yt||a===null||In(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ci]||d[Ht]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),tn(d,l,a),d[Ht]=t,ht(d),l=d;break e;case"link":var b=Cv("link","href",h).get(l+(a.href||""));if(b){for(var T=0;T<b.length;T++)if(d=b[T],d.getAttribute("href")===(a.href==null?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(T,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;case"meta":if(b=Cv("meta","content",h).get(l+(a.content||""))){for(T=0;T<b.length;T++)if(d=b[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(T,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ht]=t,ht(d),l=d}t.stateNode=l}else Nv(h,t.type,t.stateNode);else t.stateNode=Rv(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Nv(h,t.type,t.stateNode):Rv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ny(t,t.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&t.alternate===null){h=t.stateNode,d=t.memoizedProps;try{for(var N=h.firstChild;N;){var U=N.nextSibling,X=N.nodeName;N[Ci]||X==="HEAD"||X==="BODY"||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&N.rel.toLowerCase()==="stylesheet"||h.removeChild(N),N=U}for(var ne=t.type,F=h.attributes;F.length;)h.removeAttributeNode(F[0]);tn(h,ne,d),h[Ht]=t,h[kt]=d}catch(Ee){at(t,t.return,Ee)}}case 5:if(Kn(r,t),$n(t),l&512&&(yt||a===null||In(a,a.return)),t.flags&32){h=t.stateNode;try{Un(h,"")}catch(Ee){at(t,t.return,Ee)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Ny(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Jf=!0);break;case 6:if(Kn(r,t),$n(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ee){at(t,t.return,Ee)}}break;case 3:if(Sc=null,h=sr,sr=Tc(r.containerInfo),Kn(r,t),sr=h,$n(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ml(r.containerInfo)}catch(Ee){at(t,t.return,Ee)}Jf&&(Jf=!1,Uy(t));break;case 4:l=sr,sr=Tc(t.stateNode.containerInfo),Kn(r,t),$n(t),sr=l;break;case 12:Kn(r,t),$n(t);break;case 13:Kn(r,t),$n(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ud=bt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ed(t,l)));break;case 22:if(l&512&&(yt||a===null||In(a,a.return)),N=t.memoizedState!==null,U=a!==null&&a.memoizedState!==null,X=ri,ne=yt,ri=X||N,yt=ne||U,Kn(r,t),yt=ne,ri=X,$n(t),r=t.stateNode,r._current=t,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,l&8192&&(r._visibility=N?r._visibility&-2:r._visibility|1,N&&(r=ri||yt,a===null||U||r||Ka(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(a=null,r=t;;){if(r.tag===5||r.tag===26||r.tag===27){if(a===null){U=a=r;try{if(h=U.stateNode,N)d=h.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{b=U.stateNode,T=U.memoizedProps.style;var Y=T!=null&&T.hasOwnProperty("display")?T.display:null;b.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Ee){at(U,U.return,Ee)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=N?"":U.memoizedProps}catch(Ee){at(U,U.return,Ee)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ed(t,a))));break;case 19:Kn(r,t),$n(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ed(t,l)));break;case 21:break;default:Kn(r,t),$n(t)}}function $n(t){var r=t.flags;if(r&2){try{if(t.tag!==27){e:{for(var a=t.return;a!==null;){if(Iy(a)){var l=a;break e}a=a.return}throw Error(s(160))}switch(l.tag){case 27:var h=l.stateNode,d=Wf(t);oc(t,d,h);break;case 5:var b=l.stateNode;l.flags&32&&(Un(b,""),l.flags&=-33);var T=Wf(t);oc(t,T,b);break;case 3:case 4:var N=l.stateNode.containerInfo,U=Wf(t);Zf(t,U,N);break;default:throw Error(s(161))}}}catch(X){at(t,t.return,X)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Uy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Uy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function si(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)ky(t,r.alternate,r),r=r.sibling}function Ka(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Gi(4,r,r.return),Ka(r);break;case 1:In(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Ry(r,r.return,a),Ka(r);break;case 26:case 27:case 5:In(r,r.return),Ka(r);break;case 22:In(r,r.return),r.memoizedState===null&&Ka(r);break;default:Ka(r)}t=t.sibling}}function Qi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,b=d.flags;switch(d.tag){case 0:case 11:case 15:Qi(h,d,a),gl(4,d);break;case 1:if(Qi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){at(l,l.return,U)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Sy(N[h],T)}catch(U){at(l,l.return,U)}}a&&b&64&&xy(d),Xs(d,d.return);break;case 26:case 27:case 5:Qi(h,d,a),a&&l===null&&b&4&&Cy(d),Xs(d,d.return);break;case 12:Qi(h,d,a);break;case 13:Qi(h,d,a),a&&b&4&&Py(h,d);break;case 22:d.memoizedState===null&&Qi(h,d,a),Xs(d,d.return);break;default:Qi(h,d,a)}r=r.sibling}}function td(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&al(a))}function nd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&al(t))}function Ki(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ly(t,r,a,l),r=r.sibling}function Ly(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Ki(t,r,a,l),h&2048&&gl(9,r);break;case 3:Ki(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&al(t)));break;case 12:if(h&2048){Ki(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,b=d.id,T=d.onPostCommit;typeof T=="function"&&T(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){at(r,r.return,N)}}else Ki(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,r.memoizedState!==null?d._visibility&4?Ki(t,r,a,l):yl(t,r):d._visibility&4?Ki(t,r,a,l):(d._visibility|=4,$a(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&td(r.alternate,r);break;case 24:Ki(t,r,a,l),h&2048&&nd(r.alternate,r);break;default:Ki(t,r,a,l)}}function $a(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,b=r,T=a,N=l,U=b.flags;switch(b.tag){case 0:case 11:case 15:$a(d,b,T,N,h),gl(8,b);break;case 23:break;case 22:var X=b.stateNode;b.memoizedState!==null?X._visibility&4?$a(d,b,T,N,h):yl(d,b):(X._visibility|=4,$a(d,b,T,N,h)),h&&U&2048&&td(b.alternate,b);break;case 24:$a(d,b,T,N,h),h&&U&2048&&nd(b.alternate,b);break;default:$a(d,b,T,N,h)}r=r.sibling}}function yl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:yl(a,l),h&2048&&td(l.alternate,l);break;case 24:yl(a,l),h&2048&&nd(l.alternate,l);break;default:yl(a,l)}r=r.sibling}}var vl=8192;function Ya(t){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)zy(t),t=t.sibling}function zy(t){switch(t.tag){case 26:Ya(t),t.flags&vl&&t.memoizedState!==null&&Rw(sr,t.memoizedState,t.memoizedProps);break;case 5:Ya(t);break;case 3:case 4:var r=sr;sr=Tc(t.stateNode.containerInfo),Ya(t),sr=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=vl,vl=16777216,Ya(t),vl=r):Ya(t));break;default:Ya(t)}}function Hy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function _l(t){var r=t.deletions;if(t.flags&16){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,qy(l,t)}Hy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)By(t),t=t.sibling}function By(t){switch(t.tag){case 0:case 11:case 15:_l(t),t.flags&2048&&Gi(9,t,t.return);break;case 3:_l(t);break;case 12:_l(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&4&&(t.return===null||t.return.tag!==13)?(r._visibility&=-5,lc(t)):_l(t);break;default:_l(t)}}function lc(t){var r=t.deletions;if(t.flags&16){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,qy(l,t)}Hy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Gi(8,r,r.return),lc(r);break;case 22:a=r.stateNode,a._visibility&4&&(a._visibility&=-5,lc(r));break;default:lc(r)}t=t.sibling}}function qy(t,r){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Gi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:al(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Gt=l;else e:for(a=t;Gt!==null;){l=Gt;var h=l.sibling,d=l.return;if(My(l),l===a){Gt=null;break e}if(h!==null){h.return=d,Gt=h;break e}Gt=d}}}function zT(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,r,a,l){return new zT(t,r,a,l)}function rd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $i(t,r){var a=t.alternate;return a===null?(a=Yn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&31457280,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Fy(t,r){t.flags&=31457282;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function uc(t,r,a,l,h,d){var b=0;if(l=t,typeof t=="function")rd(t)&&(b=1);else if(typeof t=="string")b=Aw(t,a,Fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case p:return Ws(a.children,h,d,r);case y:b=8,h|=24;break;case E:return t=Yn(12,a,r,h|2),t.elementType=E,t.lanes=d,t;case Q:return t=Yn(13,a,r,h),t.elementType=Q,t.lanes=d,t;case z:return t=Yn(19,a,r,h),t.elementType=z,t.lanes=d,t;case W:return Gy(a,h,d,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:case O:b=10;break e;case C:b=9;break e;case P:b=11;break e;case $:b=14;break e;case te:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Yn(b,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function Ws(t,r,a,l){return t=Yn(7,t,l,r),t.lanes=a,t}function Gy(t,r,a,l){t=Yn(22,t,l,r),t.elementType=W,t.lanes=a;var h={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var d=h._current;if(d===null)throw Error(s(456));if(!(h._pendingVisibility&2)){var b=Pi(d,2);b!==null&&(h._pendingVisibility|=2,_n(b,d,2))}},attach:function(){var d=h._current;if(d===null)throw Error(s(456));if(h._pendingVisibility&2){var b=Pi(d,2);b!==null&&(h._pendingVisibility&=-3,_n(b,d,2))}}};return t.stateNode=h,t}function id(t,r,a){return t=Yn(6,t,null,r),t.lanes=a,t}function sd(t,r,a){return r=Yn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function ai(t){t.flags|=4}function Qy(t,r){if(r.type!=="stylesheet"||r.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Iv(r)){if(r=Qn.current,r!==null&&((Xe&4194176)===Xe?Rr!==null:(Xe&62914560)!==Xe&&!(Xe&536870912)||r!==Rr))throw rl=cf,ug;t.flags|=8192}}function cc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Si():536870912,t.lanes|=r,Wa|=r)}function bl(t,r){if(!Je)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ft(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&31457280,l|=h.flags&31457280,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function HT(t,r,a){var l=r.pendingProps;switch(lf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ni(jt),ln(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Jo(r)?ai(r):t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,ir!==null&&(dd(ir),ir=null))),ft(r),null;case 26:return a=r.memoizedState,t===null?(ai(r),a!==null?(ft(r),Qy(r,a)):(ft(r),r.flags&=-16777217)):a?a!==t.memoizedState?(ai(r),ft(r),Qy(r,a)):(ft(r),r.flags&=-16777217):(t.memoizedProps!==l&&ai(r),ft(r),r.flags&=-16777217),null;case 27:En(r),a=Xt.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ai(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ft(r),null}t=Fe.current,Jo(r)?og(r):(t=Tv(h,l,a),r.stateNode=t,ai(r))}return ft(r),null;case 5:if(En(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ai(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ft(r),null}if(t=Fe.current,Jo(r))og(r);else{switch(h=Ec(Xt.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Ht]=r,t[kt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(tn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ai(r)}}return ft(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&ai(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Xt.current,Jo(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=vn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ht]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||gv(t.nodeValue,a)),t||Hs(r)}else t=Ec(t).createTextNode(l),t[Ht]=r,r.stateNode=t}return ft(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Jo(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ht]=r}else el(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;ft(r),h=!1}else ir!==null&&(dd(ir),ir=null),h=!0;if(!h)return r.flags&256?(Zr(r),r):(Zr(r),null)}if(Zr(r),r.flags&128)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),cc(r,r.updateQueue),ft(r),null;case 4:return ln(),t===null&&Sd(r.stateNode.containerInfo),ft(r),null;case 10:return ni(r.type),ft(r),null;case 19:if(Se(Pt),h=r.memoizedState,h===null)return ft(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)bl(h,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(d=Ku(t),d!==null){for(r.flags|=128,bl(h,!1),t=d.updateQueue,r.updateQueue=t,cc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Fy(a,t),a=a.sibling;return Te(Pt,Pt.current&1|2),r.child}t=t.sibling}h.tail!==null&&bt()>hc&&(r.flags|=128,l=!0,bl(h,!1),r.lanes=4194304)}else{if(!l)if(t=Ku(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,cc(r,t),bl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Je)return ft(r),null}else 2*bt()-h.renderingStartTime>hc&&a!==536870912&&(r.flags|=128,l=!0,bl(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=bt(),r.sibling=null,t=Pt.current,Te(Pt,l?t&1|2:t&1),r):(ft(r),null);case 22:case 23:return Zr(r),ff(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?a&536870912&&!(r.flags&128)&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),a=r.updateQueue,a!==null&&cc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&Se(qs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ni(jt),ft(r),null;case 25:return null}throw Error(s(156,r.tag))}function BT(t,r){switch(lf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ni(jt),ln(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return En(r),null;case 13:if(Zr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));el()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Se(Pt),null;case 4:return ln(),null;case 10:return ni(r.type),null;case 22:case 23:return Zr(r),ff(),t!==null&&Se(qs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ni(jt),null;case 25:return null;default:return null}}function Ky(t,r){switch(lf(r),r.tag){case 3:ni(jt),ln();break;case 26:case 27:case 5:En(r);break;case 4:ln();break;case 13:Zr(r);break;case 19:Se(Pt);break;case 10:ni(r.type);break;case 22:case 23:Zr(r),ff(),t!==null&&Se(qs);break;case 24:ni(jt)}}var qT={getCacheForType:function(t){var r=un(jt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},FT=typeof WeakMap=="function"?WeakMap:Map,dt=0,ot=null,ze=null,Xe=0,lt=0,On=null,oi=!1,Xa=!1,ad=!1,li=0,vt=0,Yi=0,Zs=0,od=0,Xn=0,Wa=0,El=null,Nr=null,ld=!1,ud=0,hc=1/0,fc=null,Xi=null,dc=!1,Js=null,Tl=0,cd=0,hd=null,wl=0,fd=null;function kn(){if(dt&2&&Xe!==0)return Xe&-Xe;if(S.T!==null){var t=Ba;return t!==0?t:bd()}return _u()}function $y(){Xn===0&&(Xn=!(Xe&536870912)||Je?Vo():536870912);var t=Qn.current;return t!==null&&(t.flags|=32),Xn}function _n(t,r,a){(t===ot&&lt===2||t.cancelPendingCommit!==null)&&(Za(t,0),ui(t,Xe,Xn,!1)),wt(t,a),(!(dt&2)||t!==ot)&&(t===ot&&(!(dt&2)&&(Zs|=a),vt===4&&ui(t,Xe,Xn,!1)),Ir(t))}function Yy(t,r,a){if(dt&6)throw Error(s(327));var l=!a&&(r&60)===0&&(r&t.expiredLanes)===0||Tt(t,r),h=l?KT(t,r):gd(t,r,!0),d=l;do{if(h===0){Xa&&!l&&ui(t,r,0,!1);break}else if(h===6)ui(t,r,0,!oi);else{if(a=t.current.alternate,d&&!GT(a)){h=gd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var T=t;h=El;var N=T.current.memoizedState.isDehydrated;if(N&&(Za(T,b).flags|=256),b=gd(T,b,!1),b!==2){if(ad&&!N){T.errorRecoveryDisabledLanes|=d,Zs|=d,h=4;break e}d=Nr,Nr=h,d!==null&&dd(d)}h=b}if(d=!1,h!==2)continue}}if(h===1){Za(t,0),ui(t,r,0,!0);break}e:{switch(l=t,h){case 0:case 1:throw Error(s(345));case 4:if((r&4194176)===r){ui(l,r,Xn,!oi);break e}break;case 2:Nr=null;break;case 3:case 5:break;default:throw Error(s(329))}if(l.finishedWork=a,l.finishedLanes=r,(r&62914560)===r&&(d=ud+300-bt(),10<d)){if(ui(l,r,Xn,!oi),Ke(l,0)!==0)break e;l.timeoutHandle=_v(Xy.bind(null,l,a,Nr,fc,ld,r,Xn,Zs,Wa,oi,2,-0,0),d);break e}Xy(l,a,Nr,fc,ld,r,Xn,Zs,Wa,oi,0,-0,0)}}break}while(!0);Ir(t)}function dd(t){Nr===null?Nr=t:Nr.push.apply(Nr,t)}function Xy(t,r,a,l,h,d,b,T,N,U,X,ne,F){var Y=r.subtreeFlags;if((Y&8192||(Y&16785408)===16785408)&&(Nl={stylesheets:null,count:0,unsuspend:xw},zy(r),r=Cw(),r!==null)){t.cancelPendingCommit=r(rv.bind(null,t,a,l,h,b,T,N,1,ne,F)),ui(t,d,b,!U);return}rv(t,a,l,h,b,T,N,X,ne,F)}function GT(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Nn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ui(t,r,a,l){r&=~od,r&=~Zs,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Wt(h),b=1<<d;l[d]=-1,h&=~b}a!==0&&Ai(t,a,r)}function mc(){return dt&6?!0:(Sl(0),!1)}function md(){if(ze!==null){if(lt===0)var t=ze.return;else t=ze,ti=$s=null,bf(t),za=null,il=0,t=ze;for(;t!==null;)Ky(t.alternate,t),t=t.return;ze=null}}function Za(t,r){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,cw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),md(),ot=t,ze=a=$i(t.current,null),Xe=r,lt=0,On=null,oi=!1,Xa=Tt(t,r),ad=!1,Wa=Xn=od=Zs=Yi=vt=0,Nr=El=null,ld=!1,r&8&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Wt(l),d=1<<h;r|=t[h],l&=~d}return li=r,Uu(),a}function Wy(t,r){Ue=null,S.H=Cr,r===nl?(r=fg(),lt=3):r===ug?(r=fg(),lt=4):lt=r===cy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,On=r,ze===null&&(vt=1,ic(t,qn(r,t.current)))}function Zy(){var t=S.H;return S.H=Cr,t===null?Cr:t}function Jy(){var t=S.A;return S.A=qT,t}function pd(){vt=4,oi||(Xe&4194176)!==Xe&&Qn.current!==null||(Xa=!0),!(Yi&134217727)&&!(Zs&134217727)||ot===null||ui(ot,Xe,Xn,!1)}function gd(t,r,a){var l=dt;dt|=2;var h=Zy(),d=Jy();(ot!==t||Xe!==r)&&(fc=null,Za(t,r)),r=!1;var b=vt;e:do try{if(lt!==0&&ze!==null){var T=ze,N=On;switch(lt){case 8:md(),b=6;break e;case 3:case 2:case 6:Qn.current===null&&(r=!0);var U=lt;if(lt=0,On=null,Ja(t,T,N,U),a&&Xa){b=0;break e}break;default:U=lt,lt=0,On=null,Ja(t,T,N,U)}}QT(),b=vt;break}catch(X){Wy(t,X)}while(!0);return r&&t.shellSuspendCounter++,ti=$s=null,dt=l,S.H=h,S.A=d,ze===null&&(ot=null,Xe=0,Uu()),b}function QT(){for(;ze!==null;)ev(ze)}function KT(t,r){var a=dt;dt|=2;var l=Zy(),h=Jy();ot!==t||Xe!==r?(fc=null,hc=bt()+500,Za(t,r)):Xa=Tt(t,r);e:do try{if(lt!==0&&ze!==null){r=ze;var d=On;t:switch(lt){case 1:lt=0,On=null,Ja(t,r,d,1);break;case 2:if(cg(d)){lt=0,On=null,tv(r);break}r=function(){lt===2&&ot===t&&(lt=7),Ir(t)},d.then(r,r);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:cg(d)?(lt=0,On=null,tv(r)):(lt=0,On=null,Ja(t,r,d,7));break;case 5:var b=null;switch(ze.tag){case 26:b=ze.memoizedState;case 5:case 27:var T=ze;if(!b||Iv(b)){lt=0,On=null;var N=T.sibling;if(N!==null)ze=N;else{var U=T.return;U!==null?(ze=U,pc(U)):ze=null}break t}}lt=0,On=null,Ja(t,r,d,5);break;case 6:lt=0,On=null,Ja(t,r,d,6);break;case 8:md(),vt=6;break e;default:throw Error(s(462))}}$T();break}catch(X){Wy(t,X)}while(!0);return ti=$s=null,S.H=l,S.A=h,dt=a,ze!==null?0:(ot=null,Xe=0,Uu(),vt)}function $T(){for(;ze!==null&&!ko();)ev(ze)}function ev(t){var r=Ty(t.alternate,t,li);t.memoizedProps=t.pendingProps,r===null?pc(t):ze=r}function tv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=gy(a,r,r.pendingProps,r.type,void 0,Xe);break;case 11:r=gy(a,r,r.pendingProps,r.type.render,r.ref,Xe);break;case 5:bf(r);default:Ky(a,r),r=ze=Fy(r,li),r=Ty(a,r,li)}t.memoizedProps=t.pendingProps,r===null?pc(t):ze=r}function Ja(t,r,a,l){ti=$s=null,bf(r),za=null,il=0;var h=r.return;try{if(PT(t,h,r,a,Xe)){vt=1,ic(t,qn(a,t.current)),ze=null;return}}catch(d){if(h!==null)throw ze=h,d;vt=1,ic(t,qn(a,t.current)),ze=null;return}r.flags&32768?(Je||l===1?t=!0:Xa||Xe&536870912?t=!1:(oi=t=!0,(l===2||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),nv(r,t)):pc(r)}function pc(t){var r=t;do{if(r.flags&32768){nv(r,oi);return}t=r.return;var a=HT(r.alternate,r,li);if(a!==null){ze=a;return}if(r=r.sibling,r!==null){ze=r;return}ze=r=t}while(r!==null);vt===0&&(vt=5)}function nv(t,r){do{var a=BT(t.alternate,t);if(a!==null){a.flags&=32767,ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){ze=t;return}ze=t=a}while(t!==null);vt=6,ze=null}function rv(t,r,a,l,h,d,b,T,N,U){var X=S.T,ne=de.p;try{de.p=2,S.T=null,YT(t,r,a,l,ne,h,d,b,T,N,U)}finally{S.T=X,de.p=ne}}function YT(t,r,a,l,h,d,b,T){do eo();while(Js!==null);if(dt&6)throw Error(s(327));var N=t.finishedWork;if(l=t.finishedLanes,N===null)return null;if(t.finishedWork=null,t.finishedLanes=0,N===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var U=N.lanes|N.childLanes;if(U|=sf,yu(t,l,U,d,b,T),t===ot&&(ze=ot=null,Xe=0),!(N.subtreeFlags&10256)&&!(N.flags&10256)||dc||(dc=!0,cd=U,hd=a,JT(tr,function(){return eo(),null})),a=(N.flags&15990)!==0,N.subtreeFlags&15990||a?(a=S.T,S.T=null,d=de.p,de.p=2,b=dt,dt|=4,UT(t,N),jy(N,t),_T(Cd,t.containerInfo),Rc=!!Rd,Cd=Rd=null,t.current=N,ky(t,N.alternate,N),Lr(),dt=b,de.p=d,S.T=a):t.current=N,dc?(dc=!1,Js=t,Tl=l):iv(t,U),U=t.pendingLanes,U===0&&(Xi=null),ws(N.stateNode),Ir(t),r!==null)for(h=t.onRecoverableError,N=0;N<r.length;N++)U=r[N],h(U.value,{componentStack:U.stack});return Tl&3&&eo(),U=t.pendingLanes,l&4194218&&U&42?t===fd?wl++:(wl=0,fd=t):wl=0,Sl(0),null}function iv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,al(r)))}function eo(){if(Js!==null){var t=Js,r=cd;cd=0;var a=vu(Tl),l=S.T,h=de.p;try{if(de.p=32>a?32:a,S.T=null,Js===null)var d=!1;else{a=hd,hd=null;var b=Js,T=Tl;if(Js=null,Tl=0,dt&6)throw Error(s(331));var N=dt;if(dt|=4,By(b.current),Ly(b,b.current,T,a),dt=N,Sl(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(gr,b)}catch{}d=!0}return d}finally{de.p=h,S.T=l,iv(t,r)}}return!1}function sv(t,r,a){r=qn(a,r),r=Mf(t.stateNode,r,2),t=Fi(t,r,2),t!==null&&(wt(t,2),Ir(t))}function at(t,r,a){if(t.tag===3)sv(t,t,a);else for(;r!==null;){if(r.tag===3){sv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xi===null||!Xi.has(l))){t=qn(a,t),a=ly(2),l=Fi(r,a,2),l!==null&&(uy(a,l,r,t),wt(l,2),Ir(l));break}}r=r.return}}function yd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new FT;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(ad=!0,h.add(a),t=XT.bind(null,t,r,a),r.then(t,t))}function XT(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ot===t&&(Xe&a)===a&&(vt===4||vt===3&&(Xe&62914560)===Xe&&300>bt()-ud?!(dt&2)&&Za(t,0):od|=a,Wa===Xe&&(Wa=0)),Ir(t)}function av(t,r){r===0&&(r=Si()),t=Pi(t,r),t!==null&&(wt(t,r),Ir(t))}function WT(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),av(t,a)}function ZT(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),av(t,a)}function JT(t,r){return pt(t,r)}var gc=null,to=null,vd=!1,yc=!1,_d=!1,ea=0;function Ir(t){t!==to&&t.next===null&&(to===null?gc=to=t:to=to.next=t),yc=!0,vd||(vd=!0,tw(ew))}function Sl(t,r){if(!_d&&yc){_d=!0;do for(var a=!1,l=gc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var b=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Wt(42|t)+1)-1,d&=h&~(b&~T),d=d&201326677?d&201326677|1:d?d|2:0}d!==0&&(a=!0,uv(l,d))}else d=Xe,d=Ke(l,l===ot?d:0),!(d&3)||Tt(l,d)||(a=!0,uv(l,d));l=l.next}while(a);_d=!1}}function ew(){yc=vd=!1;var t=0;ea!==0&&(uw()&&(t=ea),ea=0);for(var r=bt(),a=null,l=gc;l!==null;){var h=l.next,d=ov(l,r);d===0?(l.next=null,a===null?gc=h:a.next=h,h===null&&(to=a)):(a=l,(t!==0||d&3)&&(yc=!0)),l=h}Sl(t)}function ov(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var b=31-Wt(d),T=1<<b,N=h[b];N===-1?(!(T&a)||T&l)&&(h[b]=_a(T,r)):N<=r&&(t.expiredLanes|=T),d&=~T}if(r=ot,a=Xe,a=Ke(t,t===r?a:0),l=t.callbackNode,a===0||t===r&&lt===2||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ur(l),t.callbackNode=null,t.callbackPriority=0;if(!(a&3)||Tt(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ur(l),vu(a)){case 2:case 8:a=xt;break;case 32:a=tr;break;case 268435456:a=Ts;break;default:a=tr}return l=lv.bind(null,t),a=pt(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ur(l),t.callbackPriority=2,t.callbackNode=null,2}function lv(t,r){var a=t.callbackNode;if(eo()&&t.callbackNode!==a)return null;var l=Xe;return l=Ke(t,t===ot?l:0),l===0?null:(Yy(t,l,r),ov(t,bt()),t.callbackNode!=null&&t.callbackNode===a?lv.bind(null,t):null)}function uv(t,r){if(eo())return null;Yy(t,r,!0)}function tw(t){hw(function(){dt&6?pt(Et,t):t()})}function bd(){return ea===0&&(ea=Vo()),ea}function cv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:_r(""+t)}function hv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function nw(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=cv((h[kt]||null).action),b=l.submitter;b&&(r=(r=b[kt]||null)?cv(r.formAction):b.getAttribute("formAction"),r!==null&&(d=r,b=null));var T=new xa("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ea!==0){var N=b?hv(h,b):new FormData(h);Nf(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(T.preventDefault(),N=b?hv(h,b):new FormData(h),Nf(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var Ed=0;Ed<rg.length;Ed++){var Td=rg[Ed],rw=Td.toLowerCase(),iw=Td[0].toUpperCase()+Td.slice(1);rr(rw,"on"+iw)}rr(Zp,"onAnimationEnd"),rr(Jp,"onAnimationIteration"),rr(eg,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(ET,"onTransitionRun"),rr(TT,"onTransitionStart"),rr(wT,"onTransitionCancel"),rr(tg,"onTransitionEnd"),Tn("onMouseEnter",["mouseout","mouseover"]),Tn("onMouseLeave",["mouseout","mouseover"]),Tn("onPointerEnter",["pointerout","pointerover"]),Tn("onPointerLeave",["pointerout","pointerover"]),Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function fv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var b=l.length-1;0<=b;b--){var T=l[b],N=T.instance,U=T.currentTarget;if(T=T.listener,N!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=U;try{d(h)}catch(X){rc(X)}h.currentTarget=null,d=N}else for(b=0;b<l.length;b++){if(T=l[b],N=T.instance,U=T.currentTarget,T=T.listener,N!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=U;try{d(h)}catch(X){rc(X)}h.currentTarget=null,d=N}}}}function Ge(t,r){var a=r[As];a===void 0&&(a=r[As]=new Set);var l=t+"__bubble";a.has(l)||(dv(r,t,2,!1),a.add(l))}function wd(t,r,a){var l=0;r&&(l|=4),dv(a,t,l,r)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Sd(t){if(!t[vc]){t[vc]=!0,jo.forEach(function(a){a!=="selectionchange"&&(sw.has(a)||wd(a,!1,t),wd(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[vc]||(r[vc]=!0,wd("selectionchange",!1,r))}}function dv(t,r,a,l){switch(Pv(r)){case 2:var h=Dw;break;case 8:h=Ow;break;default:h=jd}a=h.bind(null,r,a,t),h=void 0,!zn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Ad(t,r,a,l,h){var d=l;if(!(r&1)&&!(r&2)&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(b===4)for(b=l.return;b!==null;){var N=b.tag;if((N===3||N===4)&&(N=b.stateNode.containerInfo,N===h||N.nodeType===8&&N.parentNode===h))return;b=b.return}for(;T!==null;){if(b=nr(T),b===null)return;if(N=b.tag,N===5||N===6||N===26||N===27){l=d=b;continue e}T=T.parentNode}}l=l.return}wu(function(){var U=d,X=Aa(a),ne=[];e:{var F=ng.get(t);if(F!==void 0){var Y=xa,Ee=t;switch(t){case"keypress":if(Er(a)===0)break e;case"keydown":case"keyup":Y=Oa;break;case"focusin":Ee="focus",Y=Na;break;case"focusout":Ee="blur",Y=Na;break;case"beforeblur":case"afterblur":Y=Na;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Xh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Du;break;case Zp:case Jp:case eg:Y=Ia;break;case tg:Y=ku;break;case"scroll":case"scrollend":Y=Su;break;case"wheel":Y=ka;break;case"copy":case"cut":case"paste":Y=Da;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Yo;break;case"toggle":case"beforetoggle":Y=Vu}var Me=(r&4)!==0,_t=!Me&&(t==="scroll"||t==="scrollend"),H=Me?F!==null?F+"Capture":null:F;Me=[];for(var j=U,q;j!==null;){var Z=j;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||H===null||(Z=Is(j,H),Z!=null&&Me.push(xl(j,Z,q))),_t)break;j=j.return}0<Me.length&&(F=new Y(F,Ee,null,a,X),ne.push({event:F,listeners:Me}))}}if(!(r&7)){e:{if(F=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",F&&a!==Ln&&(Ee=a.relatedTarget||a.fromElement)&&(nr(Ee)||Ee[Hr]))break e;if((Y||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,Y?(Ee=a.relatedTarget||a.toElement,Y=U,Ee=Ee?nr(Ee):null,Ee!==null&&(_t=ce(Ee),Me=Ee.tag,Ee!==_t||Me!==5&&Me!==27&&Me!==6)&&(Ee=null)):(Y=null,Ee=U),Y!==Ee)){if(Me=Hn,Z="onMouseLeave",H="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(Me=Yo,Z="onPointerLeave",H="onPointerEnter",j="pointer"),_t=Y==null?F:Ni(Y),q=Ee==null?F:Ni(Ee),F=new Me(Z,j+"leave",Y,a,X),F.target=_t,F.relatedTarget=q,Z=null,nr(X)===U&&(Me=new Me(H,j+"enter",Ee,a,X),Me.target=q,Me.relatedTarget=_t,Z=Me),_t=Z,Y&&Ee)t:{for(Me=Y,H=Ee,j=0,q=Me;q;q=no(q))j++;for(q=0,Z=H;Z;Z=no(Z))q++;for(;0<j-q;)Me=no(Me),j--;for(;0<q-j;)H=no(H),q--;for(;j--;){if(Me===H||H!==null&&Me===H.alternate)break t;Me=no(Me),H=no(H)}Me=null}else Me=null;Y!==null&&mv(ne,F,Y,Me,!1),Ee!==null&&_t!==null&&mv(ne,_t,Ee,Me,!0)}}e:{if(F=U?Ni(U):window,Y=F.nodeName&&F.nodeName.toLowerCase(),Y==="select"||Y==="input"&&F.type==="file")var _e=Hp;else if(Vt(F))if(Bp)_e=yT;else{_e=pT;var Le=mT}else Y=F.nodeName,!Y||Y.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?U&&Bo(U.elementType)&&(_e=Hp):_e=gT;if(_e&&(_e=_e(t,U))){Yr(ne,_e,a,X);break e}Le&&Le(t,F,U),t==="focusout"&&U&&F.type==="number"&&U.memoizedProps.value!=null&&Sa(F,"number",F.value)}switch(Le=U?Ni(U):window,t){case"focusin":(Vt(Le)||Le.contentEditable==="true")&&(Ma=Le,tf=U,Zo=null);break;case"focusout":Zo=tf=Ma=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,Xp(ne,a,X);break;case"selectionchange":if(bT)break;case"keydown":case"keyup":Xp(ne,a,X)}var we;if(Sr)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else $e?K(t,a)&&(xe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(_&&a.locale!=="ko"&&($e||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&$e&&(we=Fo()):(br=X,Vi="value"in br?br.value:br.textContent,$e=!0)),Le=_c(U,xe),0<Le.length&&(xe=new Ko(xe,t,null,a,X),ne.push({event:xe,listeners:Le}),we?xe.data=we:(we=ae(a),we!==null&&(xe.data=we)))),(we=g?Mt(t,a):Ye(t,a))&&(xe=_c(U,"onBeforeInput"),0<xe.length&&(Le=new Ko("onBeforeInput","beforeinput",null,a,X),ne.push({event:Le,listeners:xe}),Le.data=we)),nw(ne,t,U,a,X)}fv(ne,r)})}function xl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function _c(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Is(t,a),h!=null&&l.unshift(xl(t,h,d)),h=Is(t,r),h!=null&&l.push(xl(t,h,d))),t=t.return}return l}function no(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function mv(t,r,a,l,h){for(var d=r._reactName,b=[];a!==null&&a!==l;){var T=a,N=T.alternate,U=T.stateNode;if(T=T.tag,N!==null&&N===l)break;T!==5&&T!==26&&T!==27||U===null||(N=U,h?(U=Is(a,d),U!=null&&b.unshift(xl(a,U,N))):h||(U=Is(a,d),U!=null&&b.push(xl(a,U,N)))),a=a.return}b.length!==0&&t.push({event:r,listeners:b})}var aw=/\r\n?/g,ow=/\u0000|\uFFFD/g;function pv(t){return(typeof t=="string"?t:""+t).replace(aw,`
`).replace(ow,"")}function gv(t,r){return r=pv(r),pv(t)===r}function bc(){}function st(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Un(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Un(t,""+l);break;case"className":Oi(t,"class",l);break;case"tabIndex":Oi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Oi(t,a,l);break;case"style":Tu(t,l,d);break;case"data":if(r!=="object"){Oi(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=_r(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&st(t,r,"name",h.name,h,null),st(t,r,"formEncType",h.formEncType,h,null),st(t,r,"formMethod",h.formMethod,h,null),st(t,r,"formTarget",h.formTarget,h,null)):(st(t,r,"encType",h.encType,h,null),st(t,r,"method",h.method,h,null),st(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=_r(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=bc);break;case"onScroll":l!=null&&Ge("scroll",t);break;case"onScrollEnd":l!=null&&Ge("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=_r(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ge("beforetoggle",t),Ge("toggle",t),Di(t,"popover",l);break;case"xlinkActuate":jn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Di(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$h.get(a)||a,Di(t,a,l))}}function xd(t,r,a,l,h,d){switch(a){case"style":Tu(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Un(t,l):(typeof l=="number"||typeof l=="bigint")&&Un(t,""+l);break;case"onScroll":l!=null&&Ge("scroll",t);break;case"onScrollEnd":l!=null&&Ge("scrollend",t);break;case"onClick":l!=null&&(t.onclick=bc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ta.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[kt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Di(t,a,l)}}}function tn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",t),Ge("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];if(b!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:st(t,r,d,b,a,null)}}h&&st(t,r,"srcSet",a.srcSet,a,null),l&&st(t,r,"src",a.src,a,null);return;case"input":Ge("invalid",t);var T=d=b=h=null,N=null,U=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":b=X;break;case"checked":N=X;break;case"defaultChecked":U=X;break;case"value":d=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:st(t,r,l,X,a,null)}}Cs(t,d,T,N,U,b,h,!1),Rs(t);return;case"select":Ge("invalid",t),l=b=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:st(t,r,h,T,a,null)}r=d,a=b,t.multiple=!!l,r!=null?Ze(t,!!l,r,!1):a!=null&&Ze(t,!!l,a,!0);return;case"textarea":Ge("invalid",t),d=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(T=a[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:st(t,r,b,T,a,null)}Mi(t,l,h,d),Rs(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:st(t,r,N,l,a,null)}return;case"dialog":Ge("cancel",t),Ge("close",t);break;case"iframe":case"object":Ge("load",t);break;case"video":case"audio":for(l=0;l<Al.length;l++)Ge(Al[l],t);break;case"image":Ge("error",t),Ge("load",t);break;case"details":Ge("toggle",t);break;case"embed":case"source":case"link":Ge("error",t),Ge("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:st(t,r,U,l,a,null)}return;default:if(Bo(r)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&xd(t,r,X,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&st(t,r,T,l,a,null))}function lw(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,b=null,T=null,N=null,U=null,X=null;for(Y in a){var ne=a[Y];if(a.hasOwnProperty(Y)&&ne!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":N=ne;default:l.hasOwnProperty(Y)||st(t,r,Y,null,l,ne)}}for(var F in l){var Y=l[F];if(ne=a[F],l.hasOwnProperty(F)&&(Y!=null||ne!=null))switch(F){case"type":d=Y;break;case"name":h=Y;break;case"checked":U=Y;break;case"defaultChecked":X=Y;break;case"value":b=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:Y!==ne&&st(t,r,F,Y,l,ne)}}ki(t,b,T,N,U,X,d,h);return;case"select":Y=b=T=F=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":Y=N;default:l.hasOwnProperty(d)||st(t,r,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":F=d;break;case"defaultValue":T=d;break;case"multiple":b=d;default:d!==N&&st(t,r,h,d,l,N)}r=T,a=b,l=Y,F!=null?Ze(t,!!a,F,!1):!!l!=!!a&&(r!=null?Ze(t,!!a,r,!0):Ze(t,!!a,a?[]:"",!1));return;case"textarea":Y=F=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:st(t,r,T,null,l,h)}for(b in l)if(h=l[b],d=a[b],l.hasOwnProperty(b)&&(h!=null||d!=null))switch(b){case"value":F=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&st(t,r,b,h,l,d)}Ns(t,F,Y);return;case"option":for(var Ee in a)if(F=a[Ee],a.hasOwnProperty(Ee)&&F!=null&&!l.hasOwnProperty(Ee))switch(Ee){case"selected":t.selected=!1;break;default:st(t,r,Ee,null,l,F)}for(N in l)if(F=l[N],Y=a[N],l.hasOwnProperty(N)&&F!==Y&&(F!=null||Y!=null))switch(N){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:st(t,r,N,F,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in a)F=a[Me],a.hasOwnProperty(Me)&&F!=null&&!l.hasOwnProperty(Me)&&st(t,r,Me,null,l,F);for(U in l)if(F=l[U],Y=a[U],l.hasOwnProperty(U)&&F!==Y&&(F!=null||Y!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,r));break;default:st(t,r,U,F,l,Y)}return;default:if(Bo(r)){for(var _t in a)F=a[_t],a.hasOwnProperty(_t)&&F!==void 0&&!l.hasOwnProperty(_t)&&xd(t,r,_t,void 0,l,F);for(X in l)F=l[X],Y=a[X],!l.hasOwnProperty(X)||F===Y||F===void 0&&Y===void 0||xd(t,r,X,F,l,Y);return}}for(var H in a)F=a[H],a.hasOwnProperty(H)&&F!=null&&!l.hasOwnProperty(H)&&st(t,r,H,null,l,F);for(ne in l)F=l[ne],Y=a[ne],!l.hasOwnProperty(ne)||F===Y||F==null&&Y==null||st(t,r,ne,F,l,Y)}var Rd=null,Cd=null;function Ec(t){return t.nodeType===9?t:t.ownerDocument}function yv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Nd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Id=null;function uw(){var t=window.event;return t&&t.type==="popstate"?t===Id?!1:(Id=t,!0):(Id=null,!1)}var _v=typeof setTimeout=="function"?setTimeout:void 0,cw=typeof clearTimeout=="function"?clearTimeout:void 0,bv=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof bv<"u"?function(t){return bv.resolve(null).then(t).catch(fw)}:_v;function fw(t){setTimeout(function(){throw t})}function Dd(t,r){var a=r,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(l===0){t.removeChild(h),Ml(r);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=h}while(a);Ml(r)}function Od(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Od(a),xs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function dw(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ci])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ar(t.nextSibling),t===null)break}return null}function mw(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ar(t.nextSibling),t===null))return null;return t}function ar(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}function Ev(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function Tv(t,r,a){switch(r=Ec(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}var Wn=new Map,wv=new Set;function Tc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var ci=de.d;de.d={f:pw,r:gw,D:yw,C:vw,L:_w,m:bw,X:Tw,S:Ew,M:ww};function pw(){var t=ci.f(),r=mc();return t||r}function gw(t){var r=Br(t);r!==null&&r.tag===5&&r.type==="form"?Xg(r):ci.r(t)}var ro=typeof document>"u"?null:document;function Sv(t,r,a){var l=ro;if(l&&typeof r=="string"&&r){var h=gt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),wv.has(h)||(wv.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),tn(r,"link",t),ht(r),l.head.appendChild(r)))}}function yw(t){ci.D(t),Sv("dns-prefetch",t,null)}function vw(t,r){ci.C(t,r),Sv("preconnect",t,r)}function _w(t,r,a){ci.L(t,r,a);var l=ro;if(l&&t&&r){var h='link[rel="preload"][as="'+gt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+gt(a.imageSizes)+'"]')):h+='[href="'+gt(t)+'"]';var d=h;switch(r){case"style":d=io(t);break;case"script":d=so(t)}Wn.has(d)||(t=x({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Wn.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Rl(d))||r==="script"&&l.querySelector(Cl(d))||(r=l.createElement("link"),tn(r,"link",t),ht(r),l.head.appendChild(r)))}}function bw(t,r){ci.m(t,r);var a=ro;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+gt(l)+'"][href="'+gt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=so(t)}if(!Wn.has(d)&&(t=x({rel:"modulepreload",href:t},r),Wn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Cl(d)))return}l=a.createElement("link"),tn(l,"link",t),ht(l),a.head.appendChild(l)}}}function Ew(t,r,a){ci.S(t,r,a);var l=ro;if(l&&t){var h=Ii(l).hoistableStyles,d=io(t);r=r||"default";var b=h.get(d);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(Rl(d)))T.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Wn.get(d))&&kd(t,a);var N=b=l.createElement("link");ht(N),tn(N,"link",t),N._p=new Promise(function(U,X){N.onload=U,N.onerror=X}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,wc(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:T},h.set(d,b)}}}function Tw(t,r){ci.X(t,r);var a=ro;if(a&&t){var l=Ii(a).hoistableScripts,h=so(t),d=l.get(h);d||(d=a.querySelector(Cl(h)),d||(t=x({src:t,async:!0},r),(r=Wn.get(h))&&Md(t,r),d=a.createElement("script"),ht(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function ww(t,r){ci.M(t,r);var a=ro;if(a&&t){var l=Ii(a).hoistableScripts,h=so(t),d=l.get(h);d||(d=a.querySelector(Cl(h)),d||(t=x({src:t,async:!0,type:"module"},r),(r=Wn.get(h))&&Md(t,r),d=a.createElement("script"),ht(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Av(t,r,a,l){var h=(h=Xt.current)?Tc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=io(a.href),a=Ii(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=io(a.href);var d=Ii(h).hoistableStyles,b=d.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,b),(d=h.querySelector(Rl(t)))&&!d._p&&(b.instance=d,b.state.loading=5),Wn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(t,a),d||Sw(h,t,a,b.state))),r&&l===null)throw Error(s(528,""));return b}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=so(a),a=Ii(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function io(t){return'href="'+gt(t)+'"'}function Rl(t){return'link[rel="stylesheet"]['+t+"]"}function xv(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function Sw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),tn(r,"link",a),ht(r),t.head.appendChild(r))}function so(t){return'[src="'+gt(t)+'"]'}function Cl(t){return"script[async]"+t}function Rv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+gt(a.href)+'"]');if(l)return r.instance=l,ht(l),l;var h=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ht(l),tn(l,"style",h),wc(l,a.precedence,t),r.instance=l;case"stylesheet":h=io(a.href);var d=t.querySelector(Rl(h));if(d)return r.state.loading|=4,r.instance=d,ht(d),d;l=xv(a),(h=Wn.get(h))&&kd(l,h),d=(t.ownerDocument||t).createElement("link"),ht(d);var b=d;return b._p=new Promise(function(T,N){b.onload=T,b.onerror=N}),tn(d,"link",l),r.state.loading|=4,wc(d,a.precedence,t),r.instance=d;case"script":return d=so(a.src),(h=t.querySelector(Cl(d)))?(r.instance=h,ht(h),h):(l=a,(h=Wn.get(d))&&(l=x({},a),Md(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ht(h),tn(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&!(r.state.loading&4)&&(l=r.instance,r.state.loading|=4,wc(l,a.precedence,t));return r.instance}function wc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===r)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function kd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Md(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Sc=null;function Cv(t,r,a){if(Sc===null){var l=new Map,h=Sc=new Map;h.set(a,l)}else h=Sc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ci]||d[Ht]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var b=d.getAttribute(r)||"";b=t+b;var T=l.get(b);T?T.push(d):l.set(b,[d])}}return l}function Nv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function Aw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Iv(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Nl=null;function xw(){}function Rw(t,r,a){if(Nl===null)throw Error(s(475));var l=Nl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(r.state.loading&4)){if(r.instance===null){var h=io(a.href),d=t.querySelector(Rl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Ac.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,ht(d);return}d=t.ownerDocument||t,a=xv(a),(h=Wn.get(h))&&kd(a,h),d=d.createElement("link"),ht(d);var b=d;b._p=new Promise(function(T,N){b.onload=T,b.onerror=N}),tn(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&!(r.state.loading&3)&&(l.count++,r=Ac.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function Cw(){if(Nl===null)throw Error(s(475));var t=Nl;return t.stylesheets&&t.count===0&&Vd(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&Vd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Ac(){if(this.count--,this.count===0){if(this.stylesheets)Vd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var xc=null;function Vd(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,xc=new Map,r.forEach(Nw,t),xc=null,Ac.call(t))}function Nw(t,r){if(!(r.state.loading&4)){var a=xc.get(t);if(a)var l=a.get(null);else{a=new Map,xc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var b=h[d];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=r.instance,b=h.getAttribute("data-precedence"),d=a.get(b)||l,d===l&&a.set(null,h),a.set(b,h),this.count++,l=Ac.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Il={$$typeof:O,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function Iw(t,r,a,l,h,d,b,T){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ba(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ba(0),this.hiddenUpdates=ba(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Dv(t,r,a,l,h,d,b,T,N,U,X,ne){return t=new Iw(t,r,a,b,T,N,U,ne),r=1,d===!0&&(r|=24),d=Yn(3,null,null,r),t.current=d,d.stateNode=t,r=df(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Kf(d),t}function Ov(t){return t?(t=ja,t):ja}function kv(t,r,a,l,h,d){h=Ov(h),l.context===null?l.context=h:l.pendingContext=h,l=qi(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Fi(t,l,r),a!==null&&(_n(a,t,r),dl(a,t,r))}function Mv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Pd(t,r){Mv(t,r),(t=t.alternate)&&Mv(t,r)}function Vv(t){if(t.tag===13){var r=Pi(t,67108864);r!==null&&_n(r,t,67108864),Pd(t,67108864)}}var Rc=!0;function Dw(t,r,a,l){var h=S.T;S.T=null;var d=de.p;try{de.p=2,jd(t,r,a,l)}finally{de.p=d,S.T=h}}function Ow(t,r,a,l){var h=S.T;S.T=null;var d=de.p;try{de.p=8,jd(t,r,a,l)}finally{de.p=d,S.T=h}}function jd(t,r,a,l){if(Rc){var h=Ud(l);if(h===null)Ad(t,r,l,Cc,a),jv(t,l);else if(Mw(h,t,r,a,l))l.stopPropagation();else if(jv(t,l),r&4&&-1<kw.indexOf(t)){for(;h!==null;){var d=Br(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var b=Pe(d.pendingLanes);if(b!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var N=1<<31-Wt(b);T.entanglements[1]|=N,b&=~N}Ir(d),!(dt&6)&&(hc=bt()+500,Sl(0))}}break;case 13:T=Pi(d,2),T!==null&&_n(T,d,2),mc(),Pd(d,2)}if(d=Ud(l),d===null&&Ad(t,r,l,Cc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Ad(t,r,l,null,a)}}function Ud(t){return t=Aa(t),Ld(t)}var Cc=null;function Ld(t){if(Cc=null,t=nr(t),t!==null){var r=ce(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=Oe(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Cc=t,null}function Pv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ga()){case Et:return 2;case xt:return 8;case tr:case ya:return 32;case Ts:return 268435456;default:return 32}default:return 32}}var zd=!1,Wi=null,Zi=null,Ji=null,Dl=new Map,Ol=new Map,es=[],kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jv(t,r){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":Dl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(r.pointerId)}}function kl(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=Br(r),r!==null&&Vv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Mw(t,r,a,l,h){switch(r){case"focusin":return Wi=kl(Wi,t,r,a,l,h),!0;case"dragenter":return Zi=kl(Zi,t,r,a,l,h),!0;case"mouseover":return Ji=kl(Ji,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return Dl.set(d,kl(Dl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ol.set(d,kl(Ol.get(d)||null,t,r,a,l,h)),!0}return!1}function Uv(t){var r=nr(t.target);if(r!==null){var a=ce(r);if(a!==null){if(r=a.tag,r===13){if(r=Oe(a),r!==null){t.blockedOn=r,Ri(t.priority,function(){if(a.tag===13){var l=kn(),h=Pi(a,l);h!==null&&_n(h,a,l),Pd(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Ud(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ln=l,a.target.dispatchEvent(l),Ln=null}else return r=Br(a),r!==null&&Vv(r),t.blockedOn=a,!1;r.shift()}return!0}function Lv(t,r,a){Nc(t)&&a.delete(r)}function Vw(){zd=!1,Wi!==null&&Nc(Wi)&&(Wi=null),Zi!==null&&Nc(Zi)&&(Zi=null),Ji!==null&&Nc(Ji)&&(Ji=null),Dl.forEach(Lv),Ol.forEach(Lv)}function Ic(t,r){t.blockedOn===r&&(t.blockedOn=null,zd||(zd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vw)))}var Dc=null;function zv(t){Dc!==t&&(Dc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Dc===t&&(Dc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Ld(l||a)===null)continue;break}var d=Br(a);d!==null&&(t.splice(r,3),r-=3,Nf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ml(t){function r(N){return Ic(N,t)}Wi!==null&&Ic(Wi,t),Zi!==null&&Ic(Zi,t),Ji!==null&&Ic(Ji,t),Dl.forEach(r),Ol.forEach(r);for(var a=0;a<es.length;a++){var l=es[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<es.length&&(a=es[0],a.blockedOn===null);)Uv(a),a.blockedOn===null&&es.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],b=h[kt]||null;if(typeof d=="function")b||zv(a);else if(b){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,b=d[kt]||null)T=b.formAction;else if(Ld(h)!==null)continue}else T=b.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),zv(a)}}}function Hd(t){this._internalRoot=t}Oc.prototype.render=Hd.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=kn();kv(a,l,t,r,null,null)},Oc.prototype.unmount=Hd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;t.tag===0&&eo(),kv(t.current,2,null,t,null,null),mc(),r[Hr]=null}};function Oc(t){this._internalRoot=t}Oc.prototype.unstable_scheduleHydration=function(t){if(t){var r=_u();t={blockedOn:null,target:t,priority:r};for(var a=0;a<es.length&&r!==0&&r<es[a].priority;a++);es.splice(a,0,t),a===0&&Uv(t)}};var Hv=e.version;if(Hv!=="19.0.0")throw Error(s(527,Hv,"19.0.0"));de.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=re(r),t=t!==null?fe(t):null,t=t===null?null:t.stateNode,t};var Pw={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:S,findFiberByHostInstance:nr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{gr=kc.inject(Pw),zt=kc}catch{}}return Pl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=iy,d=sy,b=ay,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=Dv(t,1,!1,null,null,a,l,h,d,b,T,null),t[Hr]=r.current,Sd(t.nodeType===8?t.parentNode:t),new Hd(r)},Pl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=iy,b=sy,T=ay,N=null,U=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(U=a.formState)),r=Dv(t,1,!0,r,a??null,l,h,d,b,T,N,U),r.context=Ov(null),a=r.current,l=kn(),h=qi(l),h.callback=null,Fi(a,h,l),r.current.lanes=l,wt(r,l),Ir(r),t[Hr]=r.current,Sd(t),new Oc(r)},Pl.version="19.0.0",Pl}var Wv;function Kw(){if(Wv)return Fd.exports;Wv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Fd.exports=Qw(),Fd.exports}var $w=Kw();const Yw=I0($w);var jl={},Zv;function Xw(){if(Zv)return jl;Zv=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.parse=f,jl.serialize=y;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const C=function(){};return C.prototype=Object.create(null),C})();function f(C,O){const P=new u,Q=C.length;if(Q<2)return P;const z=(O==null?void 0:O.decode)||E;let $=0;do{const te=C.indexOf("=",$);if(te===-1)break;const W=C.indexOf(";",$),pe=W===-1?Q:W;if(te>pe){$=C.lastIndexOf(";",te-1)+1;continue}const ue=m(C,$,te),be=p(C,te,ue),k=C.slice(ue,be);if(P[k]===void 0){let A=m(C,te+1,pe),S=p(C,pe,A);const x=z(C.slice(A,S));P[k]=x}$=pe+1}while($<Q);return P}function m(C,O,P){do{const Q=C.charCodeAt(O);if(Q!==32&&Q!==9)return O}while(++O<P);return P}function p(C,O,P){for(;O>P;){const Q=C.charCodeAt(--O);if(Q!==32&&Q!==9)return O+1}return P}function y(C,O,P){const Q=(P==null?void 0:P.encode)||encodeURIComponent;if(!i.test(C))throw new TypeError(`argument name is invalid: ${C}`);const z=Q(O);if(!e.test(z))throw new TypeError(`argument val is invalid: ${O}`);let $=C+"="+z;if(!P)return $;if(P.maxAge!==void 0){if(!Number.isInteger(P.maxAge))throw new TypeError(`option maxAge is invalid: ${P.maxAge}`);$+="; Max-Age="+P.maxAge}if(P.domain){if(!n.test(P.domain))throw new TypeError(`option domain is invalid: ${P.domain}`);$+="; Domain="+P.domain}if(P.path){if(!s.test(P.path))throw new TypeError(`option path is invalid: ${P.path}`);$+="; Path="+P.path}if(P.expires){if(!R(P.expires)||!Number.isFinite(P.expires.valueOf()))throw new TypeError(`option expires is invalid: ${P.expires}`);$+="; Expires="+P.expires.toUTCString()}if(P.httpOnly&&($+="; HttpOnly"),P.secure&&($+="; Secure"),P.partitioned&&($+="; Partitioned"),P.priority)switch(typeof P.priority=="string"?P.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${P.priority}`)}if(P.sameSite)switch(typeof P.sameSite=="string"?P.sameSite.toLowerCase():P.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${P.sameSite}`)}return $}function E(C){if(C.indexOf("%")===-1)return C;try{return decodeURIComponent(C)}catch{return C}}function R(C){return o.call(C)==="[object Date]"}return jl}Xw();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Jv="popstate";function Ww(i={}){function e(o,u){let{pathname:f="/",search:m="",hash:p=""}=ua(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),lm("",{pathname:f,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");m=y===-1?p:p.slice(0,y)}return m+"#"+(typeof u=="string"?u:Yl(u))}function s(o,u){Vn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return Jw(e,n,s,i)}function ct(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Vn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zw(){return Math.random().toString(36).substring(2,10)}function e_(i,e){return{usr:i.state,key:i.key,idx:e}}function lm(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?ua(e):e,state:n,key:e&&e.key||s||Zw()}}function Yl({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function ua(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function Jw(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,y=E();y==null&&(y=0,f.replaceState({...f.state,idx:y},""));function E(){return(f.state||{idx:null}).idx}function R(){m="POP";let z=E(),$=z==null?null:z-y;y=z,p&&p({action:m,location:Q.location,delta:$})}function C(z,$){m="PUSH";let te=lm(Q.location,z,$);n&&n(te,z),y=E()+1;let W=e_(te,y),pe=Q.createHref(te);try{f.pushState(W,"",pe)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;o.location.assign(pe)}u&&p&&p({action:m,location:Q.location,delta:1})}function O(z,$){m="REPLACE";let te=lm(Q.location,z,$);n&&n(te,z),y=E();let W=e_(te,y),pe=Q.createHref(te);f.replaceState(W,"",pe),u&&p&&p({action:m,location:Q.location,delta:0})}function P(z){let $=o.location.origin!=="null"?o.location.origin:o.location.href,te=typeof z=="string"?z:Yl(z);return te=te.replace(/ $/,"%20"),ct($,`No window.location.(origin|href) available to create URL for href: ${te}`),new URL(te,$)}let Q={get action(){return m},get location(){return i(o,f)},listen(z){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Jv,R),p=z,()=>{o.removeEventListener(Jv,R),p=null}},createHref(z){return e(o,z)},createURL:P,encodeLocation(z){let $=P(z);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:C,replace:O,go(z){return f.go(z)}};return Q}function D0(i,e,n="/"){return eS(i,e,n,!1)}function eS(i,e,n,s){let o=typeof e=="string"?ua(e):e,u=fs(o.pathname||"/",n);if(u==null)return null;let f=O0(i);tS(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let y=fS(u);m=cS(f[p],y,s)}return m}function O0(i,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(ct(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let y=gi([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(ct(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),O0(u.children,e,E,y)),!(u.path==null&&!u.index)&&e.push({path:y,score:lS(y,u.index),routesMeta:E})};return i.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of k0(u.path))o(u,f,p)}),e}function k0(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=k0(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function tS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:uS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var nS=/^:[\w-]+$/,rS=3,iS=2,sS=1,aS=10,oS=-2,t_=i=>i==="*";function lS(i,e){let n=i.split("/"),s=n.length;return n.some(t_)&&(s+=oS),e&&(s+=iS),n.filter(o=>!t_(o)).reduce((o,u)=>o+(nS.test(u)?rS:u===""?sS:aS),s)}function uS(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function cS(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],y=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",R=Jc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},E),C=p.route;if(!R&&y&&n&&!s[s.length-1].route.index&&(R=Jc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!R)return null;Object.assign(o,R.params),f.push({params:o,pathname:gi([u,R.pathname]),pathnameBase:gS(gi([u,R.pathnameBase])),route:C}),R.pathnameBase!=="/"&&(u=gi([u,R.pathnameBase]))}return f}function Jc(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=hS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:E,isOptional:R},C)=>{if(E==="*"){let P=m[C]||"";f=u.slice(0,u.length-P.length).replace(/(.)\/+$/,"$1")}const O=m[C];return R&&!O?y[E]=void 0:y[E]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:f,pattern:i}}function hS(i,e=!1,n=!0){Vn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function fS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function fs(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function dS(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?ua(i):i;return{pathname:n?n.startsWith("/")?n:mS(n,e):e,search:yS(s),hash:vS(o)}}function mS(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function $d(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jm(i){let e=pS(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Um(i,e,n,s=!1){let o;typeof i=="string"?o=ua(i):(o={...i},ct(!o.pathname||!o.pathname.includes("?"),$d("?","pathname","search",o)),ct(!o.pathname||!o.pathname.includes("#"),$d("#","pathname","hash",o)),ct(!o.search||!o.search.includes("#"),$d("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let R=e.length-1;if(!s&&f.startsWith("..")){let C=f.split("/");for(;C[0]==="..";)C.shift(),R-=1;o.pathname=C.join("/")}m=R>=0?e[R]:"/"}let p=dS(o,m),y=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||E)&&(p.pathname+="/"),p}var gi=i=>i.join("/").replace(/\/\/+/g,"/"),gS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),yS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,vS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function _S(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var M0=["POST","PUT","PATCH","DELETE"];new Set(M0);var bS=["GET",...M0];new Set(bS);var Ao=V.createContext(null);Ao.displayName="DataRouter";var Th=V.createContext(null);Th.displayName="DataRouterState";var V0=V.createContext({isTransitioning:!1});V0.displayName="ViewTransition";var ES=V.createContext(new Map);ES.displayName="Fetchers";var TS=V.createContext(null);TS.displayName="Await";var dr=V.createContext(null);dr.displayName="Navigation";var iu=V.createContext(null);iu.displayName="Location";var mr=V.createContext({outlet:null,matches:[],isDataRoute:!1});mr.displayName="Route";var Lm=V.createContext(null);Lm.displayName="RouteError";function wS(i,{relative:e}={}){ct(xo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=V.useContext(dr),{hash:o,pathname:u,search:f}=su(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:gi([n,u])),s.createHref({pathname:m,search:f,hash:o})}function xo(){return V.useContext(iu)!=null}function Ti(){return ct(xo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(iu).location}var P0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function j0(i){V.useContext(dr).static||V.useLayoutEffect(i)}function jr(){let{isDataRoute:i}=V.useContext(mr);return i?PS():SS()}function SS(){ct(xo(),"useNavigate() may be used only in the context of a <Router> component.");let i=V.useContext(Ao),{basename:e,navigator:n}=V.useContext(dr),{matches:s}=V.useContext(mr),{pathname:o}=Ti(),u=JSON.stringify(jm(s)),f=V.useRef(!1);return j0(()=>{f.current=!0}),V.useCallback((p,y={})=>{if(Vn(f.current,P0),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=Um(p,JSON.parse(u),o,y.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:gi([e,E.pathname])),(y.replace?n.replace:n.push)(E,y.state,y)},[e,n,u,o,i])}V.createContext(null);function zm(){let{matches:i}=V.useContext(mr),e=i[i.length-1];return e?e.params:{}}function su(i,{relative:e}={}){let{matches:n}=V.useContext(mr),{pathname:s}=Ti(),o=JSON.stringify(jm(n));return V.useMemo(()=>Um(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function AS(i,e){return U0(i,e)}function U0(i,e,n,s){var te;ct(xo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=V.useContext(dr),{matches:f}=V.useContext(mr),m=f[f.length-1],p=m?m.params:{},y=m?m.pathname:"/",E=m?m.pathnameBase:"/",R=m&&m.route;{let W=R&&R.path||"";L0(y,!R||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let C=Ti(),O;if(e){let W=typeof e=="string"?ua(e):e;ct(E==="/"||((te=W.pathname)==null?void 0:te.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${W.pathname}" was given in the \`location\` prop.`),O=W}else O=C;let P=O.pathname||"/",Q=P;if(E!=="/"){let W=E.replace(/^\//,"").split("/");Q="/"+P.replace(/^\//,"").split("/").slice(W.length).join("/")}let z=!u&&n&&n.matches&&n.matches.length>0?n.matches:D0(i,{pathname:Q});Vn(R||z!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Vn(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=IS(z&&z.map(W=>Object.assign({},W,{params:Object.assign({},p,W.params),pathname:gi([E,o.encodeLocation?o.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?E:gi([E,o.encodeLocation?o.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),f,n,s);return e&&$?V.createElement(iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},$):$}function xS(){let i=VS(),e=_S(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:u},"ErrorBoundary")," or"," ",V.createElement("code",{style:u},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:o},n):null,f)}var RS=V.createElement(xS,null),CS=class extends V.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?V.createElement(mr.Provider,{value:this.props.routeContext},V.createElement(Lm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NS({routeContext:i,match:e,children:n}){let s=V.useContext(Ao);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(mr.Provider,{value:i},n)}function IS(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);ct(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=p),y.route.id){let{loaderData:E,errors:R}=n,C=y.route.loader&&!E.hasOwnProperty(y.route.id)&&(!R||R[y.route.id]===void 0);if(y.route.lazy||C){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,y,E)=>{let R,C=!1,O=null,P=null;n&&(R=u&&y.route.id?u[y.route.id]:void 0,O=y.route.errorElement||RS,f&&(m<0&&E===0?(L0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,P=null):m===E&&(C=!0,P=y.route.hydrateFallbackElement||null)));let Q=e.concat(o.slice(0,E+1)),z=()=>{let $;return R?$=O:C?$=P:y.route.Component?$=V.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=p,V.createElement(NS,{match:y,routeContext:{outlet:p,matches:Q,isDataRoute:n!=null},children:$})};return n&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?V.createElement(CS,{location:n.location,revalidation:n.revalidation,component:O,error:R,children:z(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):z()},null)}function Hm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DS(i){let e=V.useContext(Ao);return ct(e,Hm(i)),e}function OS(i){let e=V.useContext(Th);return ct(e,Hm(i)),e}function kS(i){let e=V.useContext(mr);return ct(e,Hm(i)),e}function Bm(i){let e=kS(i),n=e.matches[e.matches.length-1];return ct(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function MS(){return Bm("useRouteId")}function VS(){var s;let i=V.useContext(Lm),e=OS("useRouteError"),n=Bm("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function PS(){let{router:i}=DS("useNavigate"),e=Bm("useNavigate"),n=V.useRef(!1);return j0(()=>{n.current=!0}),V.useCallback(async(o,u={})=>{Vn(n.current,P0),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var n_={};function L0(i,e,n){!e&&!n_[i]&&(n_[i]=!0,Vn(!1,n))}V.memo(jS);function jS({routes:i,future:e,state:n}){return U0(i,void 0,n,e)}function US({to:i,replace:e,state:n,relative:s}){ct(xo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(dr);Vn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=V.useContext(mr),{pathname:f}=Ti(),m=jr(),p=Um(i,jm(u),f,s==="path"),y=JSON.stringify(p);return V.useEffect(()=>{m(JSON.parse(y),{replace:e,state:n,relative:s})},[m,y,s,e,n]),null}function hi(i){ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LS({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){ct(!xo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=ua(n));let{pathname:p="/",search:y="",hash:E="",state:R=null,key:C="default"}=n,O=V.useMemo(()=>{let P=fs(p,f);return P==null?null:{location:{pathname:P,search:y,hash:E,state:R,key:C},navigationType:s}},[f,p,y,E,R,C,s]);return Vn(O!=null,`<Router basename="${f}"> is not able to match the URL "${p}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:V.createElement(dr.Provider,{value:m},V.createElement(iu.Provider,{children:e,value:O}))}function zS({children:i,location:e}){return AS(um(i),e)}function um(i,e=[]){let n=[];return V.Children.forEach(i,(s,o)=>{if(!V.isValidElement(s))return;let u=[...e,o];if(s.type===V.Fragment){n.push.apply(n,um(s.props.children,u));return}ct(s.type===hi,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ct(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=um(s.props.children,u)),n.push(f)}),n}var Hc="get",Bc="application/x-www-form-urlencoded";function wh(i){return i!=null&&typeof i.tagName=="string"}function HS(i){return wh(i)&&i.tagName.toLowerCase()==="button"}function BS(i){return wh(i)&&i.tagName.toLowerCase()==="form"}function qS(i){return wh(i)&&i.tagName.toLowerCase()==="input"}function FS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function GS(i,e){return i.button===0&&(!e||e==="_self")&&!FS(i)}function cm(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,n)=>{let s=i[n];return e.concat(Array.isArray(s)?s.map(o=>[n,o]):[[n,s]])},[]))}function QS(i,e){let n=cm(i);return e&&e.forEach((s,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Mc=null;function KS(){if(Mc===null)try{new FormData(document.createElement("form"),0),Mc=!1}catch{Mc=!0}return Mc}var $S=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yd(i){return i!=null&&!$S.has(i)?(Vn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bc}"`),null):i}function YS(i,e){let n,s,o,u,f;if(BS(i)){let m=i.getAttribute("action");s=m?fs(m,e):null,n=i.getAttribute("method")||Hc,o=Yd(i.getAttribute("enctype"))||Bc,u=new FormData(i)}else if(HS(i)||qS(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?fs(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Hc,o=Yd(i.getAttribute("formenctype"))||Yd(m.getAttribute("enctype"))||Bc,u=new FormData(m,i),!KS()){let{name:y,type:E,value:R}=i;if(E==="image"){let C=y?`${y}.`:"";u.append(`${C}x`,"0"),u.append(`${C}y`,"0")}else y&&u.append(y,R)}}else{if(wh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Hc,s=null,o=Bc,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function qm(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function XS(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function ZS(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await XS(u,n);return f.links?f.links():[]}return[]}));return nA(s.flat(1).filter(WS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function r_(i,e,n,s,o,u){let f=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,m=(p,y)=>{var E;return n[y].pathname!==p.pathname||((E=n[y].route.path)==null?void 0:E.endsWith("*"))&&n[y].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,y)=>f(p,y)||m(p,y)):u==="data"?e.filter((p,y)=>{var R;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,y)||m(p,y))return!0;if(p.route.shouldRevalidate){let C=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((R=n[0])==null?void 0:R.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function JS(i,e){return eA(i.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function eA(i){return[...new Set(i)]}function tA(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function nA(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(tA(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function rA(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function iA(){let i=V.useContext(Ao);return qm(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function sA(){let i=V.useContext(Th);return qm(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Fm=V.createContext(void 0);Fm.displayName="FrameworkContext";function z0(){let i=V.useContext(Fm);return qm(i,"You must render this element inside a <HydratedRouter> element"),i}function aA(i,e){let n=V.useContext(Fm),[s,o]=V.useState(!1),[u,f]=V.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:y,onMouseLeave:E,onTouchStart:R}=e,C=V.useRef(null);V.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let Q=$=>{$.forEach(te=>{f(te.isIntersecting)})},z=new IntersectionObserver(Q,{threshold:.5});return C.current&&z.observe(C.current),()=>{z.disconnect()}}},[i]),V.useEffect(()=>{if(s){let Q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(Q)}}},[s]);let O=()=>{o(!0)},P=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,C,{}]:[u,C,{onFocus:Ul(m,O),onBlur:Ul(p,P),onMouseEnter:Ul(y,O),onMouseLeave:Ul(E,P),onTouchStart:Ul(R,O)}]:[!1,C,{}]}function Ul(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function oA({page:i,...e}){let{router:n}=iA(),s=V.useMemo(()=>D0(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?V.createElement(uA,{page:i,matches:s,...e}):null}function lA(i){let{manifest:e,routeModules:n}=z0(),[s,o]=V.useState([]);return V.useEffect(()=>{let u=!1;return ZS(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function uA({page:i,matches:e,...n}){let s=Ti(),{manifest:o,routeModules:u}=z0(),{loaderData:f,matches:m}=sA(),p=V.useMemo(()=>r_(i,e,m,o,s,"data"),[i,e,m,o,s]),y=V.useMemo(()=>r_(i,e,m,o,s,"assets"),[i,e,m,o,s]),E=V.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let O=new Set,P=!1;if(e.forEach(z=>{var te;let $=o.routes[z.route.id];!$||!$.hasLoader||(!p.some(W=>W.route.id===z.route.id)&&z.route.id in f&&((te=u[z.route.id])!=null&&te.shouldRevalidate)||$.hasClientLoader?P=!0:O.add(z.route.id))}),O.size===0)return[];let Q=rA(i);return P&&O.size>0&&Q.searchParams.set("_routes",e.filter(z=>O.has(z.route.id)).map(z=>z.route.id).join(",")),[Q.pathname+Q.search]},[f,s,o,p,e,i,u]),R=V.useMemo(()=>JS(y,o),[y,o]),C=lA(y);return V.createElement(V.Fragment,null,E.map(O=>V.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...n})),R.map(O=>V.createElement("link",{key:O,rel:"modulepreload",href:O,...n})),C.map(({key:O,link:P})=>V.createElement("link",{key:O,...P})))}function cA(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var H0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{H0&&(window.__reactRouterVersion="7.1.5")}catch{}function hA({basename:i,children:e,window:n}){let s=V.useRef();s.current==null&&(s.current=Ww({window:n,v5Compat:!0}));let o=s.current,[u,f]=V.useState({action:o.action,location:o.location}),m=V.useCallback(p=>{V.startTransition(()=>f(p))},[f]);return V.useLayoutEffect(()=>o.listen(m),[o,m]),V.createElement(LS,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var B0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q0=V.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:y,preventScrollReset:E,viewTransition:R,...C},O){let{basename:P}=V.useContext(dr),Q=typeof y=="string"&&B0.test(y),z,$=!1;if(typeof y=="string"&&Q&&(z=y,H0))try{let S=new URL(window.location.href),x=y.startsWith("//")?new URL(S.protocol+y):new URL(y),D=fs(x.pathname,P);x.origin===S.origin&&D!=null?y=D+x.search+x.hash:$=!0}catch{Vn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=wS(y,{relative:o}),[W,pe,ue]=aA(s,C),be=pA(y,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:R});function k(S){e&&e(S),S.defaultPrevented||be(S)}let A=V.createElement("a",{...C,...ue,href:z||te,onClick:$||u?e:k,ref:cA(O,pe),target:p,"data-discover":!Q&&n==="render"?"true":void 0});return W&&!Q?V.createElement(V.Fragment,null,A,V.createElement(oA,{page:te})):A});q0.displayName="Link";var fA=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...y},E){let R=su(f,{relative:y.relative}),C=Ti(),O=V.useContext(Th),{navigator:P,basename:Q}=V.useContext(dr),z=O!=null&&EA(R)&&m===!0,$=P.encodeLocation?P.encodeLocation(R).pathname:R.pathname,te=C.pathname,W=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(te=te.toLowerCase(),W=W?W.toLowerCase():null,$=$.toLowerCase()),W&&Q&&(W=fs(W,Q)||W);const pe=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ue=te===$||!o&&te.startsWith($)&&te.charAt(pe)==="/",be=W!=null&&(W===$||!o&&W.startsWith($)&&W.charAt($.length)==="/"),k={isActive:ue,isPending:be,isTransitioning:z},A=ue?e:void 0,S;typeof s=="function"?S=s(k):S=[s,ue?"active":null,be?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let x=typeof u=="function"?u(k):u;return V.createElement(q0,{...y,"aria-current":A,className:S,ref:E,style:x,to:f,viewTransition:m},typeof p=="function"?p(k):p)});fA.displayName="NavLink";var dA=V.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=Hc,action:m,onSubmit:p,relative:y,preventScrollReset:E,viewTransition:R,...C},O)=>{let P=_A(),Q=bA(m,{relative:y}),z=f.toLowerCase()==="get"?"get":"post",$=typeof m=="string"&&B0.test(m),te=W=>{if(p&&p(W),W.defaultPrevented)return;W.preventDefault();let pe=W.nativeEvent.submitter,ue=(pe==null?void 0:pe.getAttribute("formmethod"))||f;P(pe||W.currentTarget,{fetcherKey:e,method:ue,navigate:n,replace:o,state:u,relative:y,preventScrollReset:E,viewTransition:R})};return V.createElement("form",{ref:O,method:z,action:Q,onSubmit:s?p:te,...C,"data-discover":!$&&i==="render"?"true":void 0})});dA.displayName="Form";function mA(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F0(i){let e=V.useContext(Ao);return ct(e,mA(i)),e}function pA(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=jr(),p=Ti(),y=su(i,{relative:u});return V.useCallback(E=>{if(GS(E,e)){E.preventDefault();let R=n!==void 0?n:Yl(p)===Yl(y);m(i,{replace:R,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,y,n,s,e,i,o,u,f])}function gA(i){Vn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=V.useRef(cm(i)),n=V.useRef(!1),s=Ti(),o=V.useMemo(()=>QS(s.search,n.current?null:e.current),[s.search]),u=jr(),f=V.useCallback((m,p)=>{const y=cm(typeof m=="function"?m(o):m);n.current=!0,u("?"+y,p)},[u,o]);return[o,f]}var yA=0,vA=()=>`__${String(++yA)}__`;function _A(){let{router:i}=F0("useSubmit"),{basename:e}=V.useContext(dr),n=MS();return V.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:y}=YS(s,e);if(o.navigate===!1){let E=o.fetcherKey||vA();await i.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function bA(i,{relative:e}={}){let{basename:n}=V.useContext(dr),s=V.useContext(mr);ct(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...su(i||".",{relative:e})},f=Ti();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(R=>R).forEach(R=>m.append("index",R));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:gi([n,u.pathname])),Yl(u)}function EA(i,e={}){let n=V.useContext(V0);ct(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=F0("useViewTransitionState"),o=su(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=fs(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=fs(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Jc(o.pathname,f)!=null||Jc(o.pathname,u)!=null}new TextEncoder;var i_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},TA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,E=u>>2,R=(u&3)<<4|m>>4;let C=(m&15)<<2|y>>6,O=y&63;p||(O=64,f||(C=64)),s.push(n[E],n[R],n[C],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(G0(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):TA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const R=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||y==null||R==null)throw new wA;const C=u<<2|m>>4;if(s.push(C),y!==64){const O=m<<4&240|y>>2;if(s.push(O),R!==64){const P=y<<6&192|R;s.push(P)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class wA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SA=function(i){const e=G0(i);return Q0.encodeByteArray(e,!0)},eh=function(i){return SA(i).replace(/\./g,"")},K0=function(i){try{return Q0.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=()=>AA().__FIREBASE_DEFAULTS__,RA=()=>{if(typeof process>"u"||typeof i_>"u")return;const i=i_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},CA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&K0(i[1]);return e&&JSON.parse(e)},Sh=()=>{try{return xA()||RA()||CA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},$0=i=>{var e,n;return(n=(e=Sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},NA=i=>{const e=$0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Y0=()=>{var i;return(i=Sh())===null||i===void 0?void 0:i.config},X0=i=>{var e;return(e=Sh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[eh(JSON.stringify(n)),eh(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function kA(){var i;const e=(i=Sh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function PA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jA(){const i=mn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function UA(){return!kA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LA(){try{return typeof indexedDB=="object"}catch{return!1}}function zA(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="FirebaseError";class wi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=HA,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?BA(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new wi(o,m,s)}}function BA(i,e){return i.replace(qA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const qA=/\{\$([^}]+)}/g;function FA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function th(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(s_(u)&&s_(f)){if(!th(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function s_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function GA(i,e){const n=new QA(i,e);return n.subscribe.bind(n)}class QA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");KA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Xd),o.error===void 0&&(o.error=Xd),o.complete===void 0&&(o.complete=Xd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KA(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(i){return i&&i._delegate?i._delegate:i}class sa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new IA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XA(e))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ta){return this.instances.has(e)}getOptions(e=ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:YA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ta){return this.component?this.component.multipleInstances?e:ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YA(i){return i===ta?void 0:i}function XA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $A(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Be||(Be={}));const ZA={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},JA=Be.INFO,ex={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},tx=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=ex[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gm{constructor(e){this.name=e,this._logLevel=JA,this._logHandler=tx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const nx=(i,e)=>e.some(n=>i instanceof n);let a_,o_;function rx(){return a_||(a_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ix(){return o_||(o_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W0=new WeakMap,hm=new WeakMap,Z0=new WeakMap,Wd=new WeakMap,Qm=new WeakMap;function sx(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(os(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&W0.set(n,i)}).catch(()=>{}),Qm.set(e,i),e}function ax(i){if(hm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});hm.set(i,e)}let fm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return hm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Z0.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function ox(i){fm=i(fm)}function lx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Zd(this),e,...n);return Z0.set(s,e.sort?e.sort():[e]),os(s)}:ix().includes(i)?function(...e){return i.apply(Zd(this),e),os(W0.get(this))}:function(...e){return os(i.apply(Zd(this),e))}}function ux(i){return typeof i=="function"?lx(i):(i instanceof IDBTransaction&&ax(i),nx(i,rx())?new Proxy(i,fm):i)}function os(i){if(i instanceof IDBRequest)return sx(i);if(Wd.has(i))return Wd.get(i);const e=ux(i);return e!==i&&(Wd.set(i,e),Qm.set(e,i)),e}const Zd=i=>Qm.get(i);function cx(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=os(f);return s&&f.addEventListener("upgradeneeded",p=>{s(os(f.result),p.oldVersion,p.newVersion,os(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const hx=["get","getKey","getAll","getAllKeys","count"],fx=["put","add","delete","clear"],Jd=new Map;function l_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=fx.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||hx.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return Jd.set(e,u),u}ox(i=>({...i,get:(e,n,s)=>l_(e,n)||i.get(e,n,s),has:(e,n)=>!!l_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function mx(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dm="@firebase/app",u_="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Gm("@firebase/app"),px="@firebase/app-compat",gx="@firebase/analytics-compat",yx="@firebase/analytics",vx="@firebase/app-check-compat",_x="@firebase/app-check",bx="@firebase/auth",Ex="@firebase/auth-compat",Tx="@firebase/database",wx="@firebase/data-connect",Sx="@firebase/database-compat",Ax="@firebase/functions",xx="@firebase/functions-compat",Rx="@firebase/installations",Cx="@firebase/installations-compat",Nx="@firebase/messaging",Ix="@firebase/messaging-compat",Dx="@firebase/performance",Ox="@firebase/performance-compat",kx="@firebase/remote-config",Mx="@firebase/remote-config-compat",Vx="@firebase/storage",Px="@firebase/storage-compat",jx="@firebase/firestore",Ux="@firebase/vertexai",Lx="@firebase/firestore-compat",zx="firebase",Hx="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",Bx={[dm]:"fire-core",[px]:"fire-core-compat",[yx]:"fire-analytics",[gx]:"fire-analytics-compat",[_x]:"fire-app-check",[vx]:"fire-app-check-compat",[bx]:"fire-auth",[Ex]:"fire-auth-compat",[Tx]:"fire-rtdb",[wx]:"fire-data-connect",[Sx]:"fire-rtdb-compat",[Ax]:"fire-fn",[xx]:"fire-fn-compat",[Rx]:"fire-iid",[Cx]:"fire-iid-compat",[Nx]:"fire-fcm",[Ix]:"fire-fcm-compat",[Dx]:"fire-perf",[Ox]:"fire-perf-compat",[kx]:"fire-rc",[Mx]:"fire-rc-compat",[Vx]:"fire-gcs",[Px]:"fire-gcs-compat",[jx]:"fire-fst",[Lx]:"fire-fst-compat",[Ux]:"fire-vertex","fire-js":"fire-js",[zx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Map,qx=new Map,pm=new Map;function c_(i,e){try{i.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function po(i){const e=i.name;if(pm.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;pm.set(e,i);for(const n of nh.values())c_(n,i);for(const n of qx.values())c_(n,i);return!0}function Km(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function or(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new au("app","Firebase",Fx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=Hx;function J0(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:mm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw ls.create("bad-app-name",{appName:String(o)});if(n||(n=Y0()),!n)throw ls.create("no-options");const u=nh.get(o);if(u){if(th(n,u.options)&&th(s,u.config))return u;throw ls.create("duplicate-app",{appName:o})}const f=new WA(o);for(const p of pm.values())f.addComponent(p);const m=new Gx(n,s,f);return nh.set(o,m),m}function eb(i=mm){const e=nh.get(i);if(!e&&i===mm&&Y0())return J0();if(!e)throw ls.create("no-app",{appName:i});return e}function us(i,e,n){var s;let o=(s=Bx[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(m.join(" "));return}po(new sa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="firebase-heartbeat-database",Kx=1,Xl="firebase-heartbeat-store";let em=null;function tb(){return em||(em=cx(Qx,Kx,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Xl)}catch(n){console.warn(n)}}}}).catch(i=>{throw ls.create("idb-open",{originalErrorMessage:i.message})})),em}async function $x(i){try{const n=(await tb()).transaction(Xl),s=await n.objectStore(Xl).get(nb(i));return await n.done,s}catch(e){if(e instanceof wi)vi.warn(e.message);else{const n=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(n.message)}}}async function h_(i,e){try{const s=(await tb()).transaction(Xl,"readwrite");await s.objectStore(Xl).put(e,nb(i)),await s.done}catch(n){if(n instanceof wi)vi.warn(n.message);else{const s=ls.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(s.message)}}}function nb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=1024,Xx=30;class Wx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jx(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=f_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>Xx){const f=eR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){vi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=f_(),{heartbeatsToSend:s,unsentEntries:o}=Zx(this._heartbeatsCache.heartbeats),u=eh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return vi.warn(n),""}}}function f_(){return new Date().toISOString().substring(0,10)}function Zx(i,e=Yx){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),d_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),d_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Jx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LA()?zA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $x(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return h_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return h_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function d_(i){return eh(JSON.stringify({version:2,heartbeats:i})).length}function eR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(i){po(new sa("platform-logger",e=>new dx(e),"PRIVATE")),po(new sa("heartbeat",e=>new Wx(e),"PRIVATE")),us(dm,u_,i),us(dm,u_,"esm2017"),us("fire-js","")}tR("");function $m(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function rb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nR=rb,ib=new au("auth","Firebase",rb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Gm("@firebase/auth");function rR(i,...e){rh.logLevel<=Be.WARN&&rh.warn(`Auth (${Ro}): ${i}`,...e)}function qc(i,...e){rh.logLevel<=Be.ERROR&&rh.error(`Auth (${Ro}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(i,...e){throw Xm(i,...e)}function ur(i,...e){return Xm(i,...e)}function Ym(i,e,n){const s=Object.assign(Object.assign({},nR()),{[e]:n});return new au("auth","Firebase",s).create(e,{appName:i.name})}function ia(i){return Ym(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iR(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Vr(i,"argument-error"),Ym(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return ib.create(i,...e)}function Ie(i,e,...n){if(!i)throw Xm(e,...n)}function di(i){const e="INTERNAL ASSERTION FAILED: "+i;throw qc(e),new Error(e)}function _i(i,e){i||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function sR(){return m_()==="http:"||m_()==="https:"}function m_(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sR()||VA()||"connection"in navigator)?navigator.onLine:!0}function oR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=OA()||PA()}get(){return aR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(i,e){_i(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new lu(3e4,6e4);function Zm(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function ca(i,e,n,s,o={}){return ab(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=ou(Object.assign({key:i.config.apiKey},f)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:p},u);return MA()||(y.referrerPolicy="no-referrer"),sb.fetch()(ob(i,i.config.apiHost,n,m),y)})}async function ab(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},lR),e);try{const o=new hR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Vc(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Vc(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw Vc(i,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Ym(i,E,y);Vr(i,E)}}catch(o){if(o instanceof wi)throw o;Vr(i,"network-request-failed",{message:String(o)})}}async function cR(i,e,n,s,o={}){const u=await ca(i,e,n,s,o);return"mfaPendingCredential"in u&&Vr(i,"multi-factor-auth-required",{_serverResponse:u}),u}function ob(i,e,n,s){const o=`${e}${n}?${s}`;return i.config.emulator?Wm(i.config,o):`${i.config.apiScheme}://${o}`}class hR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ur(this.auth,"network-request-failed")),uR.get())})}}function Vc(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ur(i,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(i,e){return ca(i,"POST","/v1/accounts:delete",e)}async function lb(i,e){return ca(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dR(i,e=!1){const n=an(i),s=await n.getIdToken(e),o=Jm(s);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Fl(tm(o.auth_time)),issuedAtTime:Fl(tm(o.iat)),expirationTime:Fl(tm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function tm(i){return Number(i)*1e3}function Jm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return qc("JWT malformed, contained fewer than 3 sections"),null;try{const o=K0(n);return o?JSON.parse(o):(qc("Failed to decode base64 JWT payload"),null)}catch(o){return qc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function p_(i){const e=Jm(i);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof wi&&mR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function mR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(i){var e;const n=i.auth,s=await i.getIdToken(),o=await go(i,lb(n,{idToken:s}));Ie(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?ub(u.providerUserInfo):[],m=yR(i.providerData,f),p=i.isAnonymous,y=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?y:!1,R={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new ym(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,R)}async function gR(i){const e=an(i);await ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function ub(i){return i.map(e=>{var{providerId:n}=e,s=$m(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(i,e){const n=await ab(i,{},async()=>{const s=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=ob(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",sb.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _R(i,e){return ca(i,"POST","/v2/accounts:revokeToken",Zm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=p_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await vR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new co;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ie(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(i,e){Ie(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class mi{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=$m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new ym(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await go(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dR(this,e)}reload(){return gR(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ih(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await go(this,fR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,y,E;const R=(s=n.displayName)!==null&&s!==void 0?s:void 0,C=(o=n.email)!==null&&o!==void 0?o:void 0,O=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,P=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,z=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,$=(y=n.createdAt)!==null&&y!==void 0?y:void 0,te=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:W,emailVerified:pe,isAnonymous:ue,providerData:be,stsTokenManager:k}=n;Ie(W&&k,e,"internal-error");const A=co.fromJSON(this.name,k);Ie(typeof W=="string",e,"internal-error"),ns(R,e.name),ns(C,e.name),Ie(typeof pe=="boolean",e,"internal-error"),Ie(typeof ue=="boolean",e,"internal-error"),ns(O,e.name),ns(P,e.name),ns(Q,e.name),ns(z,e.name),ns($,e.name),ns(te,e.name);const S=new mi({uid:W,auth:e,email:C,emailVerified:pe,displayName:R,isAnonymous:ue,photoURL:P,phoneNumber:O,tenantId:Q,stsTokenManager:A,createdAt:$,lastLoginAt:te});return be&&Array.isArray(be)&&(S.providerData=be.map(x=>Object.assign({},x))),z&&(S._redirectEventId=z),S}static async _fromIdTokenResponse(e,n,s=!1){const o=new co;o.updateFromServerResponse(n);const u=new mi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ih(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?ub(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new co;m.updateFromIdToken(s);const p=new mi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ym(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;function pi(i){_i(i instanceof Function,"Expected a class definition");let e=g_.get(i);return e?(_i(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,g_.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cb.type="NONE";const y_=cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(i,e,n){return`firebase:${i}:${e}:${n}`}class ho{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Fc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Fc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ho(pi(y_),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||pi(y_);const f=Fc(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const E=await y._get(f);if(E){const R=mi._fromJSON(e,E);y!==u&&(m=R),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new ho(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new ho(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gb(e))return"Blackberry";if(yb(e))return"Webos";if(fb(e))return"Safari";if((e.includes("chrome/")||db(e))&&!e.includes("edge/"))return"Chrome";if(pb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function hb(i=mn()){return/firefox\//i.test(i)}function fb(i=mn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function db(i=mn()){return/crios\//i.test(i)}function mb(i=mn()){return/iemobile/i.test(i)}function pb(i=mn()){return/android/i.test(i)}function gb(i=mn()){return/blackberry/i.test(i)}function yb(i=mn()){return/webos/i.test(i)}function ep(i=mn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function bR(i=mn()){var e;return ep(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ER(){return jA()&&document.documentMode===10}function vb(i=mn()){return ep(i)||pb(i)||yb(i)||gb(i)||/windows phone/i.test(i)||mb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(i,e=[]){let n;switch(i){case"Browser":n=v_(mn());break;case"Worker":n=`${v_(mn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ro}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(i,e={}){return ca(i,"GET","/v2/passwordPolicy",Zm(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=6;class AR{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:SR,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new __(this),this.idTokenSubscription=new __(this),this.beforeStateQueue=new TR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ib,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pi(n)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lb(this,{idToken:e}),s=await mi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(or(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ih(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(ia(this));const n=e?an(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wR(this),n=new AR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await _R(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pi(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_b(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ah(i){return an(i)}class __{constructor(e){this.auth=e,this.observer=null,this.addObserver=GA(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RR(i){tp=i}function CR(i){return tp.loadJS(i)}function NR(){return tp.gapiScript}function IR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(i,e){const n=Km(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(th(u,e??{}))return o;Vr(o,"already-initialized")}return n.initialize({options:e})}function OR(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(pi);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function kR(i,e,n){const s=Ah(i);Ie(s._canInitEmulator,s,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=bb(e),{host:f,port:m}=MR(e),p=m===null?"":`:${m}`;s.config.emulator={url:`${u}//${f}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),VR()}function bb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function MR(i){const e=bb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:b_(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:b_(f)}}}function b_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function VR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,n){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(i,e){return cR(i,"POST","/v1/accounts:signInWithIdp",Zm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="http://localhost";class aa extends Eb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=$m(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new aa(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return fo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,fo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fo(e,n)}buildRequest(){const e={requestUri:PR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ou(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends np{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends uu{constructor(){super("facebook.com")}static credential(e){return aa._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return aa._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fi.credential(n,s)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends uu{constructor(){super("github.com")}static credential(e){return aa._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends uu{constructor(){super("twitter.com")}static credential(e,n){return aa._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ss.credential(n,s)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await mi._fromIdTokenResponse(e,s,o),f=E_(s);return new yo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=E_(s);return new yo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function E_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends wi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,sh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new sh(e,n,s,o)}}function Tb(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?sh._fromErrorAndOperation(i,u,e,s):u})}async function jR(i,e,n=!1){const s=await go(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return yo._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(i,e,n=!1){const{auth:s}=i;if(or(s.app))return Promise.reject(ia(s));const o="reauthenticate";try{const u=await go(i,Tb(s,o,e,i),n);Ie(u.idToken,s,"internal-error");const f=Jm(u.idToken);Ie(f,s,"internal-error");const{sub:m}=f;return Ie(i.uid===m,s,"user-mismatch"),yo._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Vr(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(i,e,n=!1){if(or(i.app))return Promise.reject(ia(i));const s="signIn",o=await Tb(i,s,e),u=await yo._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(i,e){return ca(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=an(i),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},f=await go(s,zR(s.auth,u));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function BR(i,e,n,s){return an(i).onIdTokenChanged(e,n,s)}function qR(i,e,n){return an(i).beforeAuthStateChanged(e,n)}function wb(i){return an(i).signOut()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1e3,GR=10;class Ab extends Sb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);ER()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},FR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ab.type="LOCAL";const QR=Ab;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends Sb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xb.type="SESSION";const Rb=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new xh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),p=await KR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const y=rp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(R){const C=R;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(C.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function YR(i){Or().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function XR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WR(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function ZR(){return Cb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="firebaseLocalStorageDb",JR=1,oh="firebaseLocalStorage",Ib="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rh(i,e){return i.transaction([oh],e?"readwrite":"readonly").objectStore(oh)}function e1(){const i=indexedDB.deleteDatabase(Nb);return new cu(i).toPromise()}function vm(){const i=indexedDB.open(Nb,JR);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(oh,{keyPath:Ib})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(oh)?e(s):(s.close(),await e1(),e(await vm()))})})}async function T_(i,e,n){const s=Rh(i,!0).put({[Ib]:e,value:n});return new cu(s).toPromise()}async function t1(i,e){const n=Rh(i,!1).get(e),s=await new cu(n).toPromise();return s===void 0?null:s.value}function w_(i,e){const n=Rh(i,!0).delete(e);return new cu(n).toPromise()}const n1=800,r1=3;class Db{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>r1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xh._getInstance(ZR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XR(),!this.activeServiceWorker)return;this.sender=new $R(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vm();return await T_(e,ah,"1"),await w_(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>T_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>t1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>w_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Rh(o,!1).getAll();return new cu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Db.type="LOCAL";const i1=Db;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(i,e){return e?pi(e):(Ie(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip extends Eb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function s1(i){return LR(i.auth,new ip(i),i.bypassAuthState)}function a1(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),UR(n,new ip(i),i.bypassAuthState)}async function o1(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),jR(n,new ip(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return s1;case"linkViaPopup":case"linkViaRedirect":return o1;case"reauthViaPopup":case"reauthViaRedirect":return a1;default:Vr(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new lu(2e3,1e4);async function u1(i,e,n){if(or(i.app))return Promise.reject(ur(i,"operation-not-supported-in-this-environment"));const s=Ah(i);iR(i,e,np);const o=Ob(s,n);return new na(s,"signInViaPopup",e,o).executeNotNull()}class na extends kb{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,na.currentPopupAction&&na.currentPopupAction.cancel(),na.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,na.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l1.get())};e()}}na.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="pendingRedirect",Gc=new Map;class h1 extends kb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Gc.get(this.auth._key());if(!e){try{const s=await f1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Gc.set(this.auth._key(),e)}return this.bypassAuthState||Gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f1(i,e){const n=p1(e),s=m1(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function d1(i,e){Gc.set(i._key(),e)}function m1(i){return pi(i._redirectPersistence)}function p1(i){return Fc(c1,i.config.apiKey,i.name)}async function g1(i,e,n=!1){if(or(i.app))return Promise.reject(ia(i));const s=Ah(i),o=Ob(s,e),f=await new h1(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=10*60*1e3;class v1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Mb(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ur(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y1&&this.cachedEventUids.clear(),this.cachedEventUids.has(S_(e))}saveEventToCache(e){this.cachedEventUids.add(S_(e)),this.lastProcessedEventTime=Date.now()}}function S_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Mb({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _1(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(i,e={}){return ca(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T1=/^https?/;async function w1(i){if(i.config.emulator)return;const{authorizedDomains:e}=await b1(i);for(const n of e)try{if(S1(n))return}catch{}Vr(i,"unauthorized-domain")}function S1(i){const e=gm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!T1.test(n))return!1;if(E1.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=new lu(3e4,6e4);function A_(){const i=Or().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function x1(i){return new Promise((e,n)=>{var s,o,u;function f(){A_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A_(),n(ur(i,"network-request-failed"))},timeout:A1.get()})}if(!((o=(s=Or().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Or().gapi)===null||u===void 0)&&u.load)f();else{const m=IR("iframefcb");return Or()[m]=()=>{gapi.load?f():n(ur(i,"network-request-failed"))},CR(`${NR()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Qc=null,e})}let Qc=null;function R1(i){return Qc=Qc||x1(i),Qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=new lu(5e3,15e3),N1="__/auth/iframe",I1="emulator/auth/iframe",D1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k1(i){const e=i.config;Ie(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Wm(e,I1):`https://${i.config.authDomain}/${N1}`,s={apiKey:e.apiKey,appName:i.name,v:Ro},o=O1.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${ou(s).slice(1)}`}async function M1(i){const e=await R1(i),n=Or().gapi;return Ie(n,i,"internal-error"),e.open({where:document.body,url:k1(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D1,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=ur(i,"network-request-failed"),m=Or().setTimeout(()=>{u(f)},C1.get());function p(){Or().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P1=500,j1=600,U1="_blank",L1="http://localhost";class x_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z1(i,e,n,s=P1,o=j1){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},V1),{width:s.toString(),height:o.toString(),top:u,left:f}),y=mn().toLowerCase();n&&(m=db(y)?U1:n),hb(y)&&(e=e||L1,p.scrollbars="yes");const E=Object.entries(p).reduce((C,[O,P])=>`${C}${O}=${P},`,"");if(bR(y)&&m!=="_self")return H1(e||"",m),new x_(null);const R=window.open(e||"",m,E);Ie(R,i,"popup-blocked");try{R.focus()}catch{}return new x_(R)}function H1(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="__/auth/handler",q1="emulator/auth/handler",F1=encodeURIComponent("fac");async function R_(i,e,n,s,o,u){Ie(i.config.authDomain,i,"auth-domain-config-required"),Ie(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Ro,eventId:o};if(e instanceof np){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",FA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,R]of Object.entries({}))f[E]=R}if(e instanceof uu){const E=e.getScopes().filter(R=>R!=="");E.length>0&&(f.scopes=E.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await i._getAppCheckToken(),y=p?`#${F1}=${encodeURIComponent(p)}`:"";return`${G1(i)}?${ou(m).slice(1)}${y}`}function G1({config:i}){return i.emulator?Wm(i,q1):`https://${i.authDomain}/${B1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="webStorageSupport";class Q1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rb,this._completeRedirectFn=g1,this._overrideRedirectResult=d1}async _openPopup(e,n,s,o){var u;_i((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await R_(e,n,s,gm(),o);return z1(e,f,rp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await R_(e,n,s,gm(),o);return YR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(_i(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await M1(e),s=new v1(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nm,{type:nm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[nm];f!==void 0&&n(!!f),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=w1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vb()||fb()||ep()}}const K1=Q1;var C_="@firebase/auth",N_="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X1(i){po(new sa("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Ie(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_b(i)},y=new xR(s,o,u,p);return OR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),po(new sa("auth-internal",e=>{const n=Ah(e.getProvider("auth").getImmediate());return(s=>new $1(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),us(C_,N_,Y1(i)),us(C_,N_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=5*60,Z1=X0("authIdTokenMaxAge")||W1;let I_=null;const J1=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Z1)return;const o=n==null?void 0:n.token;I_!==o&&(I_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _s(i=eb()){const e=Km(i,"auth");if(e.isInitialized())return e.getImmediate();const n=DR(i,{popupRedirectResolver:K1,persistence:[i1,QR,Rb]}),s=X0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=J1(u.toString());qR(n,f,()=>f(n.currentUser)),BR(n,m=>f(m))}}const o=$0("auth");return o&&kR(n,`http://${o}`),n}function eC(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}RR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ur("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",eC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X1("Browser");var D_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,Vb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function S(){}S.prototype=A.prototype,k.D=A.prototype,k.prototype=new S,k.prototype.constructor=k,k.C=function(x,D,L){for(var I=Array(arguments.length-2),he=2;he<arguments.length;he++)I[he-2]=arguments[he];return A.prototype[D].apply(x,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,S){S||(S=0);var x=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)x[D]=A.charCodeAt(S++)|A.charCodeAt(S++)<<8|A.charCodeAt(S++)<<16|A.charCodeAt(S++)<<24;else for(D=0;16>D;++D)x[D]=A[S++]|A[S++]<<8|A[S++]<<16|A[S++]<<24;A=k.g[0],S=k.g[1],D=k.g[2];var L=k.g[3],I=A+(L^S&(D^L))+x[0]+3614090360&4294967295;A=S+(I<<7&4294967295|I>>>25),I=L+(D^A&(S^D))+x[1]+3905402710&4294967295,L=A+(I<<12&4294967295|I>>>20),I=D+(S^L&(A^S))+x[2]+606105819&4294967295,D=L+(I<<17&4294967295|I>>>15),I=S+(A^D&(L^A))+x[3]+3250441966&4294967295,S=D+(I<<22&4294967295|I>>>10),I=A+(L^S&(D^L))+x[4]+4118548399&4294967295,A=S+(I<<7&4294967295|I>>>25),I=L+(D^A&(S^D))+x[5]+1200080426&4294967295,L=A+(I<<12&4294967295|I>>>20),I=D+(S^L&(A^S))+x[6]+2821735955&4294967295,D=L+(I<<17&4294967295|I>>>15),I=S+(A^D&(L^A))+x[7]+4249261313&4294967295,S=D+(I<<22&4294967295|I>>>10),I=A+(L^S&(D^L))+x[8]+1770035416&4294967295,A=S+(I<<7&4294967295|I>>>25),I=L+(D^A&(S^D))+x[9]+2336552879&4294967295,L=A+(I<<12&4294967295|I>>>20),I=D+(S^L&(A^S))+x[10]+4294925233&4294967295,D=L+(I<<17&4294967295|I>>>15),I=S+(A^D&(L^A))+x[11]+2304563134&4294967295,S=D+(I<<22&4294967295|I>>>10),I=A+(L^S&(D^L))+x[12]+1804603682&4294967295,A=S+(I<<7&4294967295|I>>>25),I=L+(D^A&(S^D))+x[13]+4254626195&4294967295,L=A+(I<<12&4294967295|I>>>20),I=D+(S^L&(A^S))+x[14]+2792965006&4294967295,D=L+(I<<17&4294967295|I>>>15),I=S+(A^D&(L^A))+x[15]+1236535329&4294967295,S=D+(I<<22&4294967295|I>>>10),I=A+(D^L&(S^D))+x[1]+4129170786&4294967295,A=S+(I<<5&4294967295|I>>>27),I=L+(S^D&(A^S))+x[6]+3225465664&4294967295,L=A+(I<<9&4294967295|I>>>23),I=D+(A^S&(L^A))+x[11]+643717713&4294967295,D=L+(I<<14&4294967295|I>>>18),I=S+(L^A&(D^L))+x[0]+3921069994&4294967295,S=D+(I<<20&4294967295|I>>>12),I=A+(D^L&(S^D))+x[5]+3593408605&4294967295,A=S+(I<<5&4294967295|I>>>27),I=L+(S^D&(A^S))+x[10]+38016083&4294967295,L=A+(I<<9&4294967295|I>>>23),I=D+(A^S&(L^A))+x[15]+3634488961&4294967295,D=L+(I<<14&4294967295|I>>>18),I=S+(L^A&(D^L))+x[4]+3889429448&4294967295,S=D+(I<<20&4294967295|I>>>12),I=A+(D^L&(S^D))+x[9]+568446438&4294967295,A=S+(I<<5&4294967295|I>>>27),I=L+(S^D&(A^S))+x[14]+3275163606&4294967295,L=A+(I<<9&4294967295|I>>>23),I=D+(A^S&(L^A))+x[3]+4107603335&4294967295,D=L+(I<<14&4294967295|I>>>18),I=S+(L^A&(D^L))+x[8]+1163531501&4294967295,S=D+(I<<20&4294967295|I>>>12),I=A+(D^L&(S^D))+x[13]+2850285829&4294967295,A=S+(I<<5&4294967295|I>>>27),I=L+(S^D&(A^S))+x[2]+4243563512&4294967295,L=A+(I<<9&4294967295|I>>>23),I=D+(A^S&(L^A))+x[7]+1735328473&4294967295,D=L+(I<<14&4294967295|I>>>18),I=S+(L^A&(D^L))+x[12]+2368359562&4294967295,S=D+(I<<20&4294967295|I>>>12),I=A+(S^D^L)+x[5]+4294588738&4294967295,A=S+(I<<4&4294967295|I>>>28),I=L+(A^S^D)+x[8]+2272392833&4294967295,L=A+(I<<11&4294967295|I>>>21),I=D+(L^A^S)+x[11]+1839030562&4294967295,D=L+(I<<16&4294967295|I>>>16),I=S+(D^L^A)+x[14]+4259657740&4294967295,S=D+(I<<23&4294967295|I>>>9),I=A+(S^D^L)+x[1]+2763975236&4294967295,A=S+(I<<4&4294967295|I>>>28),I=L+(A^S^D)+x[4]+1272893353&4294967295,L=A+(I<<11&4294967295|I>>>21),I=D+(L^A^S)+x[7]+4139469664&4294967295,D=L+(I<<16&4294967295|I>>>16),I=S+(D^L^A)+x[10]+3200236656&4294967295,S=D+(I<<23&4294967295|I>>>9),I=A+(S^D^L)+x[13]+681279174&4294967295,A=S+(I<<4&4294967295|I>>>28),I=L+(A^S^D)+x[0]+3936430074&4294967295,L=A+(I<<11&4294967295|I>>>21),I=D+(L^A^S)+x[3]+3572445317&4294967295,D=L+(I<<16&4294967295|I>>>16),I=S+(D^L^A)+x[6]+76029189&4294967295,S=D+(I<<23&4294967295|I>>>9),I=A+(S^D^L)+x[9]+3654602809&4294967295,A=S+(I<<4&4294967295|I>>>28),I=L+(A^S^D)+x[12]+3873151461&4294967295,L=A+(I<<11&4294967295|I>>>21),I=D+(L^A^S)+x[15]+530742520&4294967295,D=L+(I<<16&4294967295|I>>>16),I=S+(D^L^A)+x[2]+3299628645&4294967295,S=D+(I<<23&4294967295|I>>>9),I=A+(D^(S|~L))+x[0]+4096336452&4294967295,A=S+(I<<6&4294967295|I>>>26),I=L+(S^(A|~D))+x[7]+1126891415&4294967295,L=A+(I<<10&4294967295|I>>>22),I=D+(A^(L|~S))+x[14]+2878612391&4294967295,D=L+(I<<15&4294967295|I>>>17),I=S+(L^(D|~A))+x[5]+4237533241&4294967295,S=D+(I<<21&4294967295|I>>>11),I=A+(D^(S|~L))+x[12]+1700485571&4294967295,A=S+(I<<6&4294967295|I>>>26),I=L+(S^(A|~D))+x[3]+2399980690&4294967295,L=A+(I<<10&4294967295|I>>>22),I=D+(A^(L|~S))+x[10]+4293915773&4294967295,D=L+(I<<15&4294967295|I>>>17),I=S+(L^(D|~A))+x[1]+2240044497&4294967295,S=D+(I<<21&4294967295|I>>>11),I=A+(D^(S|~L))+x[8]+1873313359&4294967295,A=S+(I<<6&4294967295|I>>>26),I=L+(S^(A|~D))+x[15]+4264355552&4294967295,L=A+(I<<10&4294967295|I>>>22),I=D+(A^(L|~S))+x[6]+2734768916&4294967295,D=L+(I<<15&4294967295|I>>>17),I=S+(L^(D|~A))+x[13]+1309151649&4294967295,S=D+(I<<21&4294967295|I>>>11),I=A+(D^(S|~L))+x[4]+4149444226&4294967295,A=S+(I<<6&4294967295|I>>>26),I=L+(S^(A|~D))+x[11]+3174756917&4294967295,L=A+(I<<10&4294967295|I>>>22),I=D+(A^(L|~S))+x[2]+718787259&4294967295,D=L+(I<<15&4294967295|I>>>17),I=S+(L^(D|~A))+x[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+L&4294967295}s.prototype.u=function(k,A){A===void 0&&(A=k.length);for(var S=A-this.blockSize,x=this.B,D=this.h,L=0;L<A;){if(D==0)for(;L<=S;)o(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<A;)if(x[D++]=k.charCodeAt(L++),D==this.blockSize){o(this,x),D=0;break}}else for(;L<A;)if(x[D++]=k[L++],D==this.blockSize){o(this,x),D=0;break}}this.h=D,this.o+=A},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;var S=8*this.o;for(A=k.length-8;A<k.length;++A)k[A]=S&255,S/=256;for(this.u(k),k=Array(16),A=S=0;4>A;++A)for(var x=0;32>x;x+=8)k[S++]=this.g[A]>>>x&255;return k};function u(k,A){var S=m;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=A(k)}function f(k,A){this.h=A;for(var S=[],x=!0,D=k.length-1;0<=D;D--){var L=k[D]|0;x&&L==A||(S[D]=L,x=!1)}this.g=S}var m={};function p(k){return-128<=k&&128>k?u(k,function(A){return new f([A|0],0>A?-1:0)}):new f([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return R;if(0>k)return z(y(-k));for(var A=[],S=1,x=0;k>=S;x++)A[x]=k/S|0,S*=4294967296;return new f(A,0)}function E(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return z(E(k.substring(1),A));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=y(Math.pow(A,8)),x=R,D=0;D<k.length;D+=8){var L=Math.min(8,k.length-D),I=parseInt(k.substring(D,D+L),A);8>L?(L=y(Math.pow(A,L)),x=x.j(L).add(y(I))):(x=x.j(S),x=x.add(y(I)))}return x}var R=p(0),C=p(1),O=p(16777216);i=f.prototype,i.m=function(){if(Q(this))return-z(this).m();for(var k=0,A=1,S=0;S<this.g.length;S++){var x=this.i(S);k+=(0<=x?x:4294967296+x)*A,A*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(P(this))return"0";if(Q(this))return"-"+z(this).toString(k);for(var A=y(Math.pow(k,6)),S=this,x="";;){var D=pe(S,A).g;S=$(S,D.j(A));var L=((0<S.g.length?S.g[0]:S.h)>>>0).toString(k);if(S=D,P(S))return L+x;for(;6>L.length;)L="0"+L;x=L+x}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function P(k){if(k.h!=0)return!1;for(var A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function Q(k){return k.h==-1}i.l=function(k){return k=$(this,k),Q(k)?-1:P(k)?0:1};function z(k){for(var A=k.g.length,S=[],x=0;x<A;x++)S[x]=~k.g[x];return new f(S,~k.h).add(C)}i.abs=function(){return Q(this)?z(this):this},i.add=function(k){for(var A=Math.max(this.g.length,k.g.length),S=[],x=0,D=0;D<=A;D++){var L=x+(this.i(D)&65535)+(k.i(D)&65535),I=(L>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);x=I>>>16,L&=65535,I&=65535,S[D]=I<<16|L}return new f(S,S[S.length-1]&-2147483648?-1:0)};function $(k,A){return k.add(z(A))}i.j=function(k){if(P(this)||P(k))return R;if(Q(this))return Q(k)?z(this).j(z(k)):z(z(this).j(k));if(Q(k))return z(this.j(z(k)));if(0>this.l(O)&&0>k.l(O))return y(this.m()*k.m());for(var A=this.g.length+k.g.length,S=[],x=0;x<2*A;x++)S[x]=0;for(x=0;x<this.g.length;x++)for(var D=0;D<k.g.length;D++){var L=this.i(x)>>>16,I=this.i(x)&65535,he=k.i(D)>>>16,Re=k.i(D)&65535;S[2*x+2*D]+=I*Re,te(S,2*x+2*D),S[2*x+2*D+1]+=L*Re,te(S,2*x+2*D+1),S[2*x+2*D+1]+=I*he,te(S,2*x+2*D+1),S[2*x+2*D+2]+=L*he,te(S,2*x+2*D+2)}for(x=0;x<A;x++)S[x]=S[2*x+1]<<16|S[2*x];for(x=A;x<2*A;x++)S[x]=0;return new f(S,0)};function te(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function W(k,A){this.g=k,this.h=A}function pe(k,A){if(P(A))throw Error("division by zero");if(P(k))return new W(R,R);if(Q(k))return A=pe(z(k),A),new W(z(A.g),z(A.h));if(Q(A))return A=pe(k,z(A)),new W(z(A.g),A.h);if(30<k.g.length){if(Q(k)||Q(A))throw Error("slowDivide_ only works with positive integers.");for(var S=C,x=A;0>=x.l(k);)S=ue(S),x=ue(x);var D=be(S,1),L=be(x,1);for(x=be(x,2),S=be(S,2);!P(x);){var I=L.add(x);0>=I.l(k)&&(D=D.add(S),L=I),x=be(x,1),S=be(S,1)}return A=$(k,D.j(A)),new W(D,A)}for(D=R;0<=k.l(A);){for(S=Math.max(1,Math.floor(k.m()/A.m())),x=Math.ceil(Math.log(S)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),L=y(S),I=L.j(A);Q(I)||0<I.l(k);)S-=x,L=y(S),I=L.j(A);P(L)&&(L=C),D=D.add(L),k=$(k,I)}return new W(D,k)}i.A=function(k){return pe(this,k).h},i.and=function(k){for(var A=Math.max(this.g.length,k.g.length),S=[],x=0;x<A;x++)S[x]=this.i(x)&k.i(x);return new f(S,this.h&k.h)},i.or=function(k){for(var A=Math.max(this.g.length,k.g.length),S=[],x=0;x<A;x++)S[x]=this.i(x)|k.i(x);return new f(S,this.h|k.h)},i.xor=function(k){for(var A=Math.max(this.g.length,k.g.length),S=[],x=0;x<A;x++)S[x]=this.i(x)^k.i(x);return new f(S,this.h^k.h)};function ue(k){for(var A=k.g.length+1,S=[],x=0;x<A;x++)S[x]=k.i(x)<<1|k.i(x-1)>>>31;return new f(S,k.h)}function be(k,A){var S=A>>5;A%=32;for(var x=k.g.length-S,D=[],L=0;L<x;L++)D[L]=0<A?k.i(L+S)>>>A|k.i(L+S+1)<<32-A:k.i(L+S);return new f(D,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Vb=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=E,cs=f}).apply(typeof D_<"u"?D_:typeof self<"u"?self:typeof window<"u"?window:{});var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pb,Ll,jb,Kc,_m,Ub,Lb,zb;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var B=c[w];if(!(B in _))break e;_=_[B]}c=c[c.length-1],w=_[c],g=g(w),g!=w&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,w=!1,B={next:function(){if(!w&&_<c.length){var K=_++;return{value:g(K,c[K]),done:!1}}return w=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function E(c,g,_){return c.call.apply(c.bind,arguments)}function R(c,g,_){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,w),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function C(c,g,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:R,C.apply(null,arguments)}function O(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function P(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(w,B,K){for(var ae=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ae[$e-2]=arguments[$e];return g.prototype[B].apply(w,ae)}}function Q(c){const g=c.length;if(0<g){const _=Array(g);for(let w=0;w<g;w++)_[w]=c[w];return _}return[]}function z(c,g){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const B=c.length||0,K=w.length||0;c.length=B+K;for(let ae=0;ae<K;ae++)c[B+ae]=w[ae]}else c.push(w)}}class ${constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function te(c){return/^[\s\xa0]*$/.test(c)}function W(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function pe(c){return pe[" "](c),c}pe[" "]=function(){};var ue=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function be(c,g,_){for(const w in c)g.call(_,c[w],w,c)}function k(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function A(c){const g={};for(const _ in c)g[_]=c[_];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,g){let _,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(_ in w)c[_]=w[_];for(let K=0;K<S.length;K++)_=S[K],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function D(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function L(c){m.setTimeout(()=>{throw c},0)}function I(){var c=Oe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class he{constructor(){this.h=this.g=null}add(g,_){const w=Re.get();w.set(g,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Re=new $(()=>new se,c=>c.reset());class se{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,ce=!1,Oe=new he,M=()=>{const c=m.Promise.resolve(void 0);ge=()=>{c.then(re)}};var re=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(_){L(_)}var g=Re;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ce=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c}();function ke(c,g){if(le.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ue){e:{try{pe(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ce[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ke.aa.h.call(this)}}P(ke,le);var Ce={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),me=0;function Se(c,g,_,w,B){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!w,this.ha=B,this.key=++me,this.da=this.fa=!1}function Te(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Fe(c){this.src=c,this.g={},this.h=0}Fe.prototype.add=function(c,g,_,w,B){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var ae=Xt(c,g,w,B);return-1<ae?(g=c[ae],_||(g.fa=!1)):(g=new Se(g,this.src,K,!!w,B),g.fa=_,c.push(g)),g};function Ot(c,g){var _=g.type;if(_ in c.g){var w=c.g[_],B=Array.prototype.indexOf.call(w,g,void 0),K;(K=0<=B)&&Array.prototype.splice.call(w,B,1),K&&(Te(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Xt(c,g,_,w){for(var B=0;B<c.length;++B){var K=c[B];if(!K.da&&K.listener==g&&K.capture==!!_&&K.ha==w)return B}return-1}var xn="closure_lm_"+(1e6*Math.random()|0),pn={};function ln(c,g,_,w,B){if(Array.isArray(g)){for(var K=0;K<g.length;K++)ln(c,g[K],_,w,B);return null}return _=ga(_),c&&c[ie]?c.K(g,_,y(w)?!!w.capture:!1,B):er(c,g,_,!1,w,B)}function er(c,g,_,w,B,K){if(!g)throw Error("Invalid event type");var ae=y(B)?!!B.capture:!!B,$e=Lr(c);if($e||(c[xn]=$e=new Fe(c)),_=$e.add(g,_,w,ae,K),_.proxy)return _;if(w=En(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)de||(B=ae),B===void 0&&(B=!1),c.addEventListener(g.toString(),w,B);else if(c.attachEvent)c.attachEvent(Ur(g.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function En(){function c(_){return g.call(c.src,c.listener,_)}const g=ko;return c}function pr(c,g,_,w,B){if(Array.isArray(g))for(var K=0;K<g.length;K++)pr(c,g[K],_,w,B);else w=y(w)?!!w.capture:!!w,_=ga(_),c&&c[ie]?(c=c.i,g=String(g).toString(),g in c.g&&(K=c.g[g],_=Xt(K,_,w,B),-1<_&&(Te(K[_]),Array.prototype.splice.call(K,_,1),K.length==0&&(delete c.g[g],c.h--)))):c&&(c=Lr(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Xt(g,_,w,B)),(_=-1<c?g[c]:null)&&pt(_))}function pt(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ie])Ot(g.i,c);else{var _=c.type,w=c.proxy;g.removeEventListener?g.removeEventListener(_,w,c.capture):g.detachEvent?g.detachEvent(Ur(_),w):g.addListener&&g.removeListener&&g.removeListener(w),(_=Lr(g))?(Ot(_,c),_.h==0&&(_.src=null,g[xn]=null)):Te(c)}}}function Ur(c){return c in pn?pn[c]:pn[c]="on"+c}function ko(c,g){if(c.da)c=!0;else{g=new ke(g,this);var _=c.listener,w=c.ha||c.src;c.fa&&pt(c),c=_.call(w,g)}return c}function Lr(c){return c=c[xn],c instanceof Fe?c:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ga(c){return typeof c=="function"?c:(c[bt]||(c[bt]=function(g){return c.handleEvent(g)}),c[bt])}function Et(){fe.call(this),this.i=new Fe(this),this.M=this,this.F=null}P(Et,fe),Et.prototype[ie]=!0,Et.prototype.removeEventListener=function(c,g,_,w){pr(this,c,g,_,w)};function xt(c,g){var _,w=c.F;if(w)for(_=[];w;w=w.F)_.push(w);if(c=c.M,w=g.type||g,typeof g=="string")g=new le(g,c);else if(g instanceof le)g.target=g.target||c;else{var B=g;g=new le(w,c),x(g,B)}if(B=!0,_)for(var K=_.length-1;0<=K;K--){var ae=g.g=_[K];B=tr(ae,w,!0,g)&&B}if(ae=g.g=c,B=tr(ae,w,!0,g)&&B,B=tr(ae,w,!1,g)&&B,_)for(K=0;K<_.length;K++)ae=g.g=_[K],B=tr(ae,w,!1,g)&&B}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],w=0;w<_.length;w++)Te(_[w]);delete c.g[g],c.h--}}this.F=null},Et.prototype.K=function(c,g,_,w){return this.i.add(String(c),g,!1,_,w)},Et.prototype.L=function(c,g,_,w){return this.i.add(String(c),g,!0,_,w)};function tr(c,g,_,w){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,K=0;K<g.length;++K){var ae=g[K];if(ae&&!ae.da&&ae.capture==_){var $e=ae.listener,Mt=ae.ha||ae.src;ae.fa&&Ot(c.i,ae),B=$e.call(Mt,w)!==!1&&B}}return B&&!w.defaultPrevented}function ya(c,g,_){if(typeof c=="function")_&&(c=C(c,_));else if(c&&typeof c.handleEvent=="function")c=C(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function Ts(c){c.g=ya(()=>{c.g=null,c.i&&(c.i=!1,Ts(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Mo extends fe{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ts(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(c){fe.call(this),this.h=c,this.g={}}P(zr,fe);var gr=[];function zt(c){be(c.g,function(g,_){this.g.hasOwnProperty(_)&&pt(g)},c),c.g={}}zr.prototype.N=function(){zr.aa.N.call(this),zt(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ws=m.JSON.stringify,Pn=m.JSON.parse,Wt=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Ss(){}Ss.prototype.h=null;function va(c){return c.h||(c.h=c.i())}function G(){}var oe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function He(){le.call(this,"d")}P(He,le);function Pe(){le.call(this,"c")}P(Pe,le);var Ke={},Tt=null;function _a(){return Tt=Tt||new Et}Ke.La="serverreachability";function Vo(c){le.call(this,Ke.La,c)}P(Vo,le);function Si(c){const g=_a();xt(g,new Vo(g))}Ke.STAT_EVENT="statevent";function ba(c,g){le.call(this,Ke.STAT_EVENT,c),this.stat=g}P(ba,le);function wt(c){const g=_a();xt(g,new ba(g,c))}Ke.Ma="timingevent";function yu(c,g){le.call(this,Ke.Ma,c),this.size=g}P(yu,le);function Ai(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function vu(c,g,_,w,B,K){c.info(function(){if(c.g)if(K)for(var ae="",$e=K.split("&"),Mt=0;Mt<$e.length;Mt++){var Ye=$e[Mt].split("=");if(1<Ye.length){var qt=Ye[0];Ye=Ye[1];var Vt=qt.split("_");ae=2<=Vt.length&&Vt[1]=="type"?ae+(qt+"="+Ye+"&"):ae+(qt+"=redacted&")}}else ae=null;else ae=K;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+g+`
`+_+`
`+ae})}function _u(c,g,_,w,B,K,ae){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+g+`
`+_+`
`+K+" "+ae})}function Ri(c,g,_,w){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ht(c,_)+(w?" "+w:"")})}function yr(c,g){c.info(function(){return"TIMEOUT: "+g})}xi.prototype.info=function(){};function Ht(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var w=_[c];if(!(2>w.length)){var B=w[1];if(Array.isArray(B)&&!(1>B.length)){var K=B[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ae=1;ae<B.length;ae++)B[ae]=""}}}}return ws(_)}catch{return g}}var kt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},As;function Ea(){}P(Ea,Ss),Ea.prototype.g=function(){return new XMLHttpRequest},Ea.prototype.i=function(){return{}},As=new Ea;function vr(c,g,_,w){this.j=c,this.i=g,this.l=_,this.R=w||1,this.U=new zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Po}function Po(){this.i=null,this.g="",this.h=!1}var Ci={},xs={};function nr(c,g,_){c.L=1,c.v=Ns(gt(g)),c.m=_,c.P=!0,Br(c,null)}function Br(c,g){c.F=Date.now(),ht(c),c.A=gt(c.v);var _=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Gr(_.i,"t",w),c.C=0,_=c.j.J,c.h=new Po,c.g=ku(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Mo(C(c.Y,c,c.g),c.O)),g=c.U,_=c.g,w=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(gr[0]=B.toString()),B=gr);for(var K=0;K<B.length;K++){var ae=ln(_,B[K],w||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Si(),vu(c.i,c.u,c.A,c.l,c.R,c.m)}vr.prototype.ca=function(c){c=c.target;const g=this.M;g&&Hn(c)==3?g.j():this.Y(c)},vr.prototype.Y=function(c){try{if(c==this.g)e:{const Vt=Hn(this.g);var g=this.g.Ba();const Yr=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||Au(this.g)))){this.J||Vt!=4||g==7||(g==8||0>=Yr?Si(3):Si(2)),Ta(this);var _=this.g.Z();this.X=_;t:if(Ni(this)){var w=Au(this.g);c="";var B=w.length,K=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),Rn(this);var ae="";break t}this.h.i=new m.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(w[g],{stream:!(K&&g==B-1)});w.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,_u(this.i,this.u,this.A,this.l,this.R,Vt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Mt=this.g;if(($e=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te($e)){var Ye=$e;break t}}Ye=null}if(_=Ye)Ri(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cn(this,_);else{this.o=!1,this.s=3,wt(12),Tn(this),Rn(this);break e}}if(this.P){_=!0;let Zt;for(;!this.J&&this.C<ae.length;)if(Zt=Ii(this,ae),Zt==xs){Vt==4&&(this.s=4,wt(14),_=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==Ci){this.s=4,wt(15),Ri(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else Ri(this.i,this.l,Zt,null),Cn(this,Zt);if(Ni(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||ae.length!=0||this.h.h||(this.s=1,wt(16),_=!1),this.o=this.o&&_,!_)Ri(this.i,this.l,ae,"[Invalid Chunked Response]"),Tn(this),Rn(this);else if(0<ae.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Ps(qt),qt.M=!0,wt(11))}}else Ri(this.i,this.l,ae,null),Cn(this,ae);Vt==4&&Tn(this),this.o&&!this.J&&(Vt==4?Iu(this.j,this):(this.o=!1,ht(this)))}else Xh(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Tn(this),Rn(this)}}}catch{}finally{}};function Ni(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ii(c,g){var _=c.C,w=g.indexOf(`
`,_);return w==-1?xs:(_=Number(g.substring(_,w)),isNaN(_)?Ci:(w+=1,w+_>g.length?xs:(g=g.slice(w,w+_),c.C=w+_,g)))}vr.prototype.cancel=function(){this.J=!0,Tn(this)};function ht(c){c.S=Date.now()+c.I,jo(c,c.I)}function jo(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ai(C(c.ba,c),g)}function Ta(c){c.B&&(m.clearTimeout(c.B),c.B=null)}vr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(yr(this.i,this.A),this.L!=2&&(Si(),wt(17)),Tn(this),this.s=2,Rn(this)):jo(this,this.S-c)};function Rn(c){c.j.G==0||c.J||Iu(c.j,c)}function Tn(c){Ta(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,zt(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Cn(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Di(_.h,c))){if(!c.K&&Di(_.h,c)&&_.G==3){try{var w=_.Da.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Oa(_),Ia(_);else break e;$o(_),wt(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ai(C(_.Za,_),6e3));if(1>=bu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else $r(_,11)}else if((c.K||_.g==c)&&Oa(_),!te(g))for(B=_.Da.g.parse(g),g=0;g<B.length;g++){let Ye=B[g];if(_.T=Ye[0],Ye=Ye[1],_.G==2)if(Ye[0]=="c"){_.K=Ye[1],_.ia=Ye[2];const qt=Ye[3];qt!=null&&(_.la=qt,_.j.info("VER="+_.la));const Vt=Ye[4];Vt!=null&&(_.Aa=Vt,_.j.info("SVER="+_.Aa));const Yr=Ye[5];Yr!=null&&typeof Yr=="number"&&0<Yr&&(w=1.5*Yr,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const Zt=c.g;if(Zt){const Ar=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ar){var K=w.h;K.g||Ar.indexOf("spdy")==-1&&Ar.indexOf("quic")==-1&&Ar.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Oi(K,K.h),K.h=null))}if(w.D){const Xo=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xo&&(w.ya=Xo,Ze(w.I,w.D,Xo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ae=c;if(w.qa=Ou(w,w.J?w.ia:null,w.W),ae.K){jn(w.h,ae);var $e=ae,Mt=w.L;Mt&&($e.I=Mt),$e.B&&(Ta($e),ht($e)),w.g=ae}else Cu(w);0<_.i.length&&Da(_)}else Ye[0]!="stop"&&Ye[0]!="close"||$r(_,7);else _.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?$r(_,7):Qo(_):Ye[0]!="noop"&&_.l&&_.l.ta(Ye),_.v=0)}}Si(4)}catch{}}var Gh=class{constructor(c,g){this.g=c,this.map=g}};function Uo(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function bu(c){return c.h?1:c.g?c.g.size:0}function Di(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Oi(c,g){c.g?c.g.add(g):c.h=g}function jn(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Uo.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function gn(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return Q(c.i)}function Eu(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],_=c.length,w=0;w<_;w++)g.push(c[w]);return g}g=[],_=0;for(w in c)g[_++]=c[w];return g}function Qh(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const w in c)g[_++]=w;return g}}}function Rs(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Qh(c),w=Eu(c),B=w.length,K=0;K<B;K++)g.call(void 0,w[K],_&&_[K],c)}var zo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wa(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var w=c[_].indexOf("="),B=null;if(0<=w){var K=c[_].substring(0,w);B=c[_].substring(w+1)}else K=c[_];g(K,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function qr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof qr){this.h=c.h,ki(this,c.j),this.o=c.o,this.g=c.g,Cs(this,c.s),this.l=c.l;var g=c.i,_=new _r;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Sa(this,_),this.m=c.m}else c&&(g=String(c).match(zo))?(this.h=!1,ki(this,g[1]||"",!0),this.o=Mi(g[2]||""),this.g=Mi(g[3]||"",!0),Cs(this,g[4]),this.l=Mi(g[5]||"",!0),Sa(this,g[6]||"",!0),this.m=Mi(g[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}qr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Un(g,Ho,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Un(g,Ho,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Un(_,_.charAt(0)=="/"?Bo:Tu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Un(_,Yh)),c.join("")};function gt(c){return new qr(c)}function ki(c,g,_){c.j=_?Mi(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Cs(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Sa(c,g,_){g instanceof _r?(c.i=g,qo(c.i,c.h)):(_||(g=Un(g,$h)),c.i=new _r(g,c.h))}function Ze(c,g,_){c.i.set(g,_)}function Ns(c){return Ze(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Mi(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Un(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Kh),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Kh(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ho=/[#\/\?@]/g,Tu=/[#\?:]/g,Bo=/[#\?]/g,$h=/[#\?@]/g,Yh=/#/g;function _r(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Ln(c){c.g||(c.g=new Map,c.h=0,c.i&&wa(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}i=_r.prototype,i.add=function(c,g){Ln(this),this.i=null,c=Qr(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Aa(c,g){Ln(c),g=Qr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Fr(c,g){return Ln(c),g=Qr(c,g),c.g.has(g)}i.forEach=function(c,g){Ln(this),this.g.forEach(function(_,w){_.forEach(function(B){c.call(g,B,w,this)},this)},this)},i.na=function(){Ln(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let w=0;w<g.length;w++){const B=c[w];for(let K=0;K<B.length;K++)_.push(g[w])}return _},i.V=function(c){Ln(this);let g=[];if(typeof c=="string")Fr(this,c)&&(g=g.concat(this.g.get(Qr(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},i.set=function(c,g){return Ln(this),this.i=null,c=Qr(this,c),Fr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},i.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Gr(c,g,_){Aa(c,g),0<_.length&&(c.i=null,c.g.set(Qr(c,g),Q(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var w=g[_];const K=encodeURIComponent(String(w)),ae=this.V(w);for(w=0;w<ae.length;w++){var B=K;ae[w]!==""&&(B+="="+encodeURIComponent(String(ae[w]))),c.push(B)}}return this.i=c.join("&")};function Qr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function qo(c,g){g&&!c.j&&(Ln(c),c.i=null,c.g.forEach(function(_,w){var B=w.toLowerCase();w!=B&&(Aa(this,w),Gr(this,B,_))},c)),c.j=g}function wu(c,g){const _=new xi;if(m.Image){const w=new Image;w.onload=O(zn,_,"TestLoadImage: loaded",!0,g,w),w.onerror=O(zn,_,"TestLoadImage: error",!1,g,w),w.onabort=O(zn,_,"TestLoadImage: abort",!1,g,w),w.ontimeout=O(zn,_,"TestLoadImage: timeout",!1,g,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else g(!1)}function Is(c,g){const _=new xi,w=new AbortController,B=setTimeout(()=>{w.abort(),zn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:w.signal}).then(K=>{clearTimeout(B),K.ok?zn(_,"TestPingServer: ok",!0,g):zn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),zn(_,"TestPingServer: error",!1,g)})}function zn(c,g,_,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(_)}catch{}}function Ds(){this.g=new Wt}function br(c,g,_){const w=_||"";try{Rs(c,function(B,K){let ae=B;y(B)&&(ae=ws(B)),g.push(w+K+"="+encodeURIComponent(ae))})}catch(B){throw g.push(w+"type="+encodeURIComponent("_badmap")),B}}function Vi(c){this.l=c.Ub||null,this.j=c.eb||!1}P(Vi,Ss),Vi.prototype.g=function(){return new Kr(this.l,this.j)},Vi.prototype.i=function(c){return function(){return c}}({});function Kr(c,g){Et.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Kr,Et),i=Kr.prototype,i.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Tr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Er(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Er(this):Tr(this),this.readyState==3&&Fo(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Er(this))},i.Qa=function(c){this.g&&(this.response=c,Er(this))},i.ga=function(){this.g&&Er(this)};function Er(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Tr(c)}i.setRequestHeader=function(c,g){this.u.append(c,g)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Tr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Go(c){let g="";return be(c,function(_,w){g+=w,g+=":",g+=_,g+=`\r
`}),g}function Bt(c,g,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Go(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ze(c,g,_))}function nt(c){Et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(nt,Et);var xa=/^https?$/i,Os=["POST","PUT"];i=nt.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,g,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():As.g(),this.v=this.o?va(this.o):va(As),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){Su(this,K);return}if(c=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)_.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())_.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Os,g,void 0))||w||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ae]of _)this.g.setRequestHeader(K,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ks(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){Su(this,K)}};function Su(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ra(c),wr(c)}function Ra(c){c.A||(c.A=!0,xt(c,"complete"),xt(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,xt(this,"complete"),xt(this,"abort"),wr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),nt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ca(this):this.bb())},i.bb=function(){Ca(this)};function Ca(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)ya(c.Ea,0,c);else if(xt(c,"readystatechange"),Hn(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var w;if(w=ae===0){var B=String(c.D).match(zo)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),w=!xa.test(B?B.toLowerCase():"")}_=w}if(_)xt(c,"complete"),xt(c,"success");else{c.m=6;try{var K=2<Hn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Ra(c)}}finally{wr(c)}}}}function wr(c,g){if(c.g){ks(c);const _=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||xt(c,"ready");try{_.onreadystatechange=w}catch{}}}function ks(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Pn(g)}};function Au(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xh(c){const g={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(te(c[w]))continue;var _=D(c[w]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=g[B]||[];g[B]=K,K.push(_)}k(g,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function Na(c){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,c),this.cb=Ms("retryDelaySeedMs",1e4,c),this.Wa=Ms("forwardChannelMaxRetries",2,c),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Uo(c&&c.concurrentRequestLimit),this.Da=new Ds,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Na.prototype,i.la=8,i.G=1,i.connect=function(c,g,_,w){wt(0),this.W=c,this.H=g||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Ou(this,null,this.W),Da(this)};function Qo(c){if(xu(c),c.G==3){var g=c.U++,_=gt(c.I);if(Ze(_,"SID",c.K),Ze(_,"RID",g),Ze(_,"TYPE","terminate"),Vs(c,_),g=new vr(c,c.j,g),g.L=2,g.v=Ns(gt(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=ku(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ht(g)}Du(c)}function Ia(c){c.g&&(Ps(c),c.g.cancel(),c.g=null)}function xu(c){Ia(c),c.u&&(m.clearTimeout(c.u),c.u=null),Oa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Da(c){if(!Lo(c.h)&&!c.s){c.s=!0;var g=c.Ga;ge||M(),ce||(ge(),ce=!0),Oe.add(g,c),c.B=0}}function Wh(c,g){return bu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ai(C(c.Ga,c,g),Yo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new vr(this,this.j,c);let K=this.o;if(this.S&&(K?(K=A(K),x(K,this.S)):K=this.S),this.m!==null||this.O||(B.H=K,K=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ru(this,B,g),_=gt(this.I),Ze(_,"RID",c),Ze(_,"CVER",22),this.D&&Ze(_,"X-HTTP-Session-Id",this.D),Vs(this,_),K&&(this.O?g="headers="+encodeURIComponent(String(Go(K)))+"&"+g:this.m&&Bt(_,this.m,K)),Oi(this.h,B),this.Ua&&Ze(_,"TYPE","init"),this.P?(Ze(_,"$req",g),Ze(_,"SID","null"),B.T=!0,nr(B,_,null)):nr(B,_,g),this.G=2}}else this.G==3&&(c?Ko(this,c):this.i.length==0||Lo(this.h)||Ko(this))};function Ko(c,g){var _;g?_=g.l:_=c.U++;const w=gt(c.I);Ze(w,"SID",c.K),Ze(w,"RID",_),Ze(w,"AID",c.T),Vs(c,w),c.m&&c.o&&Bt(w,c.m,c.o),_=new vr(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Ru(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Oi(c.h,_),nr(_,w,g)}function Vs(c,g){c.H&&be(c.H,function(_,w){Ze(g,w,_)}),c.l&&Rs({},function(_,w){Ze(g,w,_)})}function Ru(c,g,_){_=Math.min(c.i.length,_);var w=c.l?C(c.l.Na,c.l,c):null;e:{var B=c.i;let K=-1;for(;;){const ae=["count="+_];K==-1?0<_?(K=B[0].g,ae.push("ofs="+K)):K=0:ae.push("ofs="+K);let $e=!0;for(let Mt=0;Mt<_;Mt++){let Ye=B[Mt].g;const qt=B[Mt].map;if(Ye-=K,0>Ye)K=Math.max(0,B[Mt].g-100),$e=!1;else try{br(qt,ae,"req"+Ye+"_")}catch{w&&w(qt)}}if($e){w=ae.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,w}function Cu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ge||M(),ce||(ge(),ce=!0),Oe.add(g,c),c.v=0}}function $o(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ai(C(c.Fa,c),Yo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ai(C(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Ia(this),Nu(this))};function Ps(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Nu(c){c.g=new vr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=gt(c.qa);Ze(g,"RID","rpc"),Ze(g,"SID",c.K),Ze(g,"AID",c.T),Ze(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ze(g,"TO",c.ja),Ze(g,"TYPE","xmlhttp"),Vs(c,g),c.m&&c.o&&Bt(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Ns(gt(g)),_.m=null,_.P=!0,Br(_,c)}i.Za=function(){this.C!=null&&(this.C=null,Ia(this),$o(this),wt(19))};function Oa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Iu(c,g){var _=null;if(c.g==g){Oa(c),Ps(c),c.g=null;var w=2}else if(Di(c.h,g))_=g.D,jn(c.h,g),w=1;else return;if(c.G!=0){if(g.o)if(w==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;w=_a(),xt(w,new yu(w,_)),Da(c)}else Cu(c);else if(B=g.s,B==3||B==0&&0<g.X||!(w==1&&Wh(c,g)||w==2&&$o(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),B){case 1:$r(c,5);break;case 4:$r(c,10);break;case 3:$r(c,6);break;default:$r(c,2)}}}function Yo(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function $r(c,g){if(c.j.info("Error code "+g),g==2){var _=C(c.fb,c),w=c.Xa;const B=!w;w=new qr(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ki(w,"https"),Ns(w),B?wu(w.toString(),_):Is(w.toString(),_)}else wt(2);c.G=0,c.l&&c.l.sa(g),Du(c),xu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Du(c){if(c.G=0,c.ka=[],c.l){const g=gn(c.h);(g.length!=0||c.i.length!=0)&&(z(c.ka,g),z(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function Ou(c,g,_){var w=_ instanceof qr?gt(_):new qr(_);if(w.g!="")g&&(w.g=g+"."+w.g),Cs(w,w.s);else{var B=m.location;w=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var K=new qr(null);w&&ki(K,w),g&&(K.g=g),B&&Cs(K,B),_&&(K.l=_),w=K}return _=c.D,g=c.ya,_&&g&&Ze(w,_,g),Ze(w,"VER",c.la),Vs(c,w),w}function ku(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new nt(new Vi({eb:_})):new nt(c.pa),g.Ha(c.J),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}i=Mu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ka(){}ka.prototype.g=function(c,g){return new yn(c,g)};function yn(c,g){Et.call(this),this.g=new Na(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!te(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!te(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Sr(this)}P(yn,Et),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Qo(this.g)},yn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ws(c),c=_);g.i.push(new Gh(g.Ya++,c)),g.G==3&&Da(g)},yn.prototype.N=function(){this.g.l=null,delete this.j,Qo(this.g),delete this.g,yn.aa.N.call(this)};function Vu(c){He.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}P(Vu,He);function Pu(){Pe.call(this),this.status=1}P(Pu,Pe);function Sr(c){this.g=c}P(Sr,Mu),Sr.prototype.ua=function(){xt(this.g,"a")},Sr.prototype.ta=function(c){xt(this.g,new Vu(c))},Sr.prototype.sa=function(c){xt(this.g,new Pu)},Sr.prototype.ra=function(){xt(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,zb=function(){return new ka},Lb=function(){return _a()},Ub=Ke,_m={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kt.NO_ERROR=0,kt.TIMEOUT=8,kt.HTTP_ERROR=6,Kc=kt,Hr.COMPLETE="complete",jb=Hr,G.EventType=oe,oe.OPEN="a",oe.CLOSE="b",oe.ERROR="c",oe.MESSAGE="d",Et.prototype.listen=Et.prototype.K,Ll=G,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,Pb=nt}).apply(typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{});const O_="@firebase/firestore",k_="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new Gm("@firebase/firestore");function ao(){return oa.logLevel}function ye(i,...e){if(oa.logLevel<=Be.DEBUG){const n=e.map(sp);oa.debug(`Firestore (${Co}): ${i}`,...n)}}function bi(i,...e){if(oa.logLevel<=Be.ERROR){const n=e.map(sp);oa.error(`Firestore (${Co}): ${i}`,...n)}}function vo(i,...e){if(oa.logLevel<=Be.WARN){const n=e.map(sp);oa.warn(`Firestore (${Co}): ${i}`,...n)}}function sp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(i="Unexpected state"){const e=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+i;throw bi(e),new Error(e)}function rt(i,e){i||Ne()}function Ve(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(fn.UNAUTHENTICATED))}shutdown(){}}class nC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rC{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new yi,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new yi)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(rt(typeof s.accessToken=="string"),new Hb(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string"),new fn(e)}}class iC{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class sC{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new iC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class M_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aC{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,or(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0);const s=u=>{u.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,ye("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new M_(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rt(typeof n.token=="string"),this.R=n.token,new M_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=oC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Qe(i,e){return i<e?-1:i>e?1:0}function _o(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=-62135596800,P_=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*P_);return new Ut(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<V_)throw new ve(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P_}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-V_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Ut(0,0))}static max(){return new De(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="__name__";class Dr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ne(),s===void 0?s=e.length-n:s>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Dr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Math.sign(e.length-n.length)}static compareSegments(e,n){const s=Dr.isNumericId(e),o=Dr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Dr.extractNumericId(e).compare(Dr.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class ut extends Dr{construct(e,n,s){return new ut(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ut(n)}static emptyPath(){return new ut([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Dr{construct(e,n,s){return new sn(e,n,s)}static isValidIdentifier(e){return lC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j_}static keyField(){return new sn([j_])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ve(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ve(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ve(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ve(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(n)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(ut.fromString(e))}static fromName(e){return new Ae(ut.fromString(e).popFirst(5))}static empty(){return new Ae(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new ut(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=-1;function uC(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new Ut(n+1,0):new Ut(n,s));return new ds(o,Ae.empty(),e)}function cC(i){return new ds(i.readTime,i.key,Wl)}class ds{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ds(De.min(),Ae.empty(),Wl)}static max(){return new ds(De.max(),Ae.empty(),Wl)}}function hC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(i.documentKey,e.documentKey),n!==0?n:Qe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==fC)throw i;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,s)=>{n(e)})}static reject(e){return new ee((n,s)=>{s(e)})}static waitFor(e){return new ee((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next(o=>o?ee.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ee((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next(E=>{f[y]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(e,n){return new ee((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function mC(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Io(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ch.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap=-1;function Nh(i){return i==null}function lh(i){return i===0&&1/i==-1/0}function pC(i){return typeof i=="number"&&Number.isInteger(i)&&!lh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="";function gC(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=U_(e)),e=yC(i.get(n),e);return U_(e)}function yC(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case qb:n+="";break;default:n+=u}}return n}function U_(i){return i+qb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function bs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Fb(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jc(this.root,e,this.comparator,!0)}}class jc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??rn.RED,this.left=o??rn.EMPTY,this.right=u??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new rn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,s,o,u){return this}insert(e,n,s){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new z_(this.data.getIterator())}getIteratorFrom(e){return new z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class z_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new Mn([])}unionWith(e){let n=new Lt(sn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _o(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Gb("Invalid base64 string: "+u):u}}(e);return new on(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new on(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const vC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(i){if(rt(!!i),typeof i=="string"){let e=0;const n=vC.exec(i);if(rt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(i.seconds),nanos:At(i.nanos)}}function At(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ps(i){return typeof i=="string"?on.fromBase64String(i):on.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="server_timestamp",Kb="__type__",$b="__previous_value__",Yb="__local_write_time__";function op(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Kb])===null||n===void 0?void 0:n.stringValue)===Qb}function Ih(i){const e=i.mapValue.fields[$b];return op(e)?Ih(e):e}function Zl(i){const e=ms(i.mapValue.fields[Yb].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n,s,o,u,f,m,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y}}const uh="(default)";class Jl{constructor(e,n){this.projectId=e,this.database=n||uh}static empty(){return new Jl("","")}get isDefaultDatabase(){return this.database===uh}isEqual(e){return e instanceof Jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="__type__",bC="__max__",Uc={mapValue:{}},Wb="__vector__",ch="value";function gs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?op(i)?4:TC(i)?9007199254740991:EC(i)?10:11:Ne()}function Pr(i,e){if(i===e)return!0;const n=gs(i);if(n!==gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Zl(i).isEqual(Zl(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ms(o.timestampValue),m=ms(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return ps(o.bytesValue).isEqual(ps(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return At(o.geoPointValue.latitude)===At(u.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return At(o.integerValue)===At(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=At(o.doubleValue),m=At(u.doubleValue);return f===m?lh(f)===lh(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return _o(i.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(L_(f)!==L_(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Pr(f[p],m[p])))return!1;return!0}(i,e);default:return Ne()}}function eu(i,e){return(i.values||[]).find(n=>Pr(n,e))!==void 0}function bo(i,e){if(i===e)return 0;const n=gs(i),s=gs(e);if(n!==s)return Qe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(i.booleanValue,e.booleanValue);case 2:return function(u,f){const m=At(u.integerValue||u.doubleValue),p=At(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return H_(i.timestampValue,e.timestampValue);case 4:return H_(Zl(i),Zl(e));case 5:return Qe(i.stringValue,e.stringValue);case 6:return function(u,f){const m=ps(u),p=ps(f);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let y=0;y<m.length&&y<p.length;y++){const E=Qe(m[y],p[y]);if(E!==0)return E}return Qe(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Qe(At(u.latitude),At(f.latitude));return m!==0?m:Qe(At(u.longitude),At(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return B_(i.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,y,E;const R=u.fields||{},C=f.fields||{},O=(m=R[ch])===null||m===void 0?void 0:m.arrayValue,P=(p=C[ch])===null||p===void 0?void 0:p.arrayValue,Q=Qe(((y=O==null?void 0:O.values)===null||y===void 0?void 0:y.length)||0,((E=P==null?void 0:P.values)===null||E===void 0?void 0:E.length)||0);return Q!==0?Q:B_(O,P)}(i.mapValue,e.mapValue);case 11:return function(u,f){if(u===Uc.mapValue&&f===Uc.mapValue)return 0;if(u===Uc.mapValue)return 1;if(f===Uc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=f.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let R=0;R<p.length&&R<E.length;++R){const C=Qe(p[R],E[R]);if(C!==0)return C;const O=bo(m[p[R]],y[E[R]]);if(O!==0)return O}return Qe(p.length,E.length)}(i.mapValue,e.mapValue);default:throw Ne()}}function H_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Qe(i,e);const n=ms(i),s=ms(e),o=Qe(n.seconds,s.seconds);return o!==0?o:Qe(n.nanos,s.nanos)}function B_(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=bo(n[o],s[o]);if(u)return u}return Qe(n.length,s.length)}function Eo(i){return bm(i)}function bm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ms(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ps(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Ae.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=bm(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${bm(n.fields[f])}`;return o+"}"}(i.mapValue):Ne()}function $c(i){switch(gs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ih(i);return e?16+$c(e):16;case 5:return 2*i.stringValue.length;case 6:return ps(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+$c(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return bs(s.fields,(u,f)=>{o+=u.length+$c(f)}),o}(i.mapValue);default:throw Ne()}}function q_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Em(i){return!!i&&"integerValue"in i}function lp(i){return!!i&&"arrayValue"in i}function F_(i){return!!i&&"nullValue"in i}function G_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Yc(i){return!!i&&"mapValue"in i}function EC(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Xb])===null||n===void 0?void 0:n.stringValue)===Wb}function Gl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return bs(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Gl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gl(i.arrayValue.values[n]);return e}return Object.assign({},i)}function TC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===bC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(n)}setAll(e){let n=sn.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Gl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Yc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){bs(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new An(Gl(this.value))}}function Zb(i){const e=[];return bs(i.fields,(n,s)=>{const o=new sn([n]);if(Yc(s)){const u=Zb(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new dn(e,0,De.min(),De.min(),De.min(),An.empty(),0)}static newFoundDocument(e,n,s,o){return new dn(e,1,n,De.min(),s,o,0)}static newNoDocument(e,n){return new dn(e,2,n,De.min(),De.min(),An.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,De.min(),De.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.position=e,this.inclusive=n}}function Q_(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=Ae.comparator(Ae.fromName(f.referenceValue),n.key):s=bo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function K_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Pr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function wC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{}class Dt extends Jb{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new AC(e,n,s):n==="array-contains"?new CC(e,s):n==="in"?new NC(e,s):n==="not-in"?new IC(e,s):n==="array-contains-any"?new DC(e,s):new Dt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new xC(e,s):new RC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(bo(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends Jb{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new cr(e,n)}matches(e){return eE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function eE(i){return i.op==="and"}function tE(i){return SC(i)&&eE(i)}function SC(i){for(const e of i.filters)if(e instanceof cr)return!1;return!0}function Tm(i){if(i instanceof Dt)return i.field.canonicalString()+i.op.toString()+Eo(i.value);if(tE(i))return i.filters.map(e=>Tm(e)).join(",");{const e=i.filters.map(n=>Tm(n)).join(",");return`${i.op}(${e})`}}function nE(i,e){return i instanceof Dt?function(s,o){return o instanceof Dt&&s.op===o.op&&s.field.isEqual(o.field)&&Pr(s.value,o.value)}(i,e):i instanceof cr?function(s,o){return o instanceof cr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&nE(f,o.filters[m]),!0):!1}(i,e):void Ne()}function rE(i){return i instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Eo(n.value)}`}(i):i instanceof cr?function(n){return n.op.toString()+" {"+n.getFilters().map(rE).join(" ,")+"}"}(i):"Filter"}class AC extends Dt{constructor(e,n,s){super(e,n,s),this.key=Ae.fromName(s.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class xC extends Dt{constructor(e,n){super(e,"in",n),this.keys=iE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RC extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=iE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function iE(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ae.fromName(s.referenceValue))}class CC extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lp(n)&&eu(n.arrayValue,this.value)}}class NC extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eu(this.value.arrayValue,n)}}class IC extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!eu(this.value.arrayValue,n)}}class DC extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>eu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function $_(i,e=null,n=[],s=[],o=null,u=null,f=null){return new OC(i,e,n,s,o,u,f)}function up(i){const e=Ve(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Tm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Eo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Eo(s)).join(",")),e.le=n}return e.le}function cp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!wC(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!nE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!K_(i.startAt,e.startAt)&&K_(i.endAt,e.endAt)}function wm(i){return Ae.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function kC(i,e,n,s,o,u,f,m){return new Do(i,e,n,s,o,u,f,m)}function hp(i){return new Do(i)}function Y_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function sE(i){return i.collectionGroup!==null}function Ql(i){const e=Ve(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Lt(sn.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new fh(u,s))}),n.has(sn.keyField().canonicalString())||e.he.push(new fh(sn.keyField(),s))}return e.he}function kr(i){const e=Ve(i);return e.Pe||(e.Pe=MC(e,Ql(i))),e.Pe}function MC(i,e){if(i.limitType==="F")return $_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new fh(o.field,u)});const n=i.endAt?new hh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new hh(i.startAt.position,i.startAt.inclusive):null;return $_(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Sm(i,e){const n=i.filters.concat([e]);return new Do(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Am(i,e,n){return new Do(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Dh(i,e){return cp(kr(i),kr(e))&&i.limitType===e.limitType}function aE(i){return`${up(kr(i))}|lt:${i.limitType}`}function oo(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>rE(o)).join(", ")}]`),Nh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Eo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Eo(o)).join(",")),`Target(${s})`}(kr(i))}; limitType=${i.limitType})`}function Oh(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ae.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of Ql(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const y=Q_(f,m,p);return f.inclusive?y<=0:y<0}(s.startAt,Ql(s),o)||s.endAt&&!function(f,m,p){const y=Q_(f,m,p);return f.inclusive?y>=0:y>0}(s.endAt,Ql(s),o))}(i,e)}function VC(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function oE(i){return(e,n)=>{let s=!1;for(const o of Ql(i)){const u=PC(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function PC(i,e,n){const s=i.field.isKeyField()?Ae.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),y=m.data.field(u);return p!==null&&y!==null?bo(p,y):Ne()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return Fb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new mt(Ae.comparator);function Ei(){return jC}const lE=new mt(Ae.comparator);function zl(...i){let e=lE;for(const n of i)e=e.insert(n.key,n);return e}function uE(i){let e=lE;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ra(){return Kl()}function cE(){return Kl()}function Kl(){return new ha(i=>i.toString(),(i,e)=>i.isEqual(e))}const UC=new mt(Ae.comparator),LC=new Lt(Ae.comparator);function qe(...i){let e=LC;for(const n of i)e=e.add(n);return e}const zC=new Lt(Qe);function HC(){return zC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function hE(i){return{integerValue:""+i}}function BC(i,e){return pC(e)?hE(e):fp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function qC(i,e,n){return i instanceof dh?function(o,u){const f={fields:{[Kb]:{stringValue:Qb},[Yb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&op(u)&&(u=Ih(u)),u&&(f.fields[$b]=u),{mapValue:f}}(n,e):i instanceof tu?dE(i,e):i instanceof nu?mE(i,e):function(o,u){const f=fE(o,u),m=X_(f)+X_(o.Ie);return Em(f)&&Em(o.Ie)?hE(m):fp(o.serializer,m)}(i,e)}function FC(i,e,n){return i instanceof tu?dE(i,e):i instanceof nu?mE(i,e):n}function fE(i,e){return i instanceof mh?function(s){return Em(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class dh extends kh{}class tu extends kh{constructor(e){super(),this.elements=e}}function dE(i,e){const n=pE(e);for(const s of i.elements)n.some(o=>Pr(o,s))||n.push(s);return{arrayValue:{values:n}}}class nu extends kh{constructor(e){super(),this.elements=e}}function mE(i,e){let n=pE(e);for(const s of i.elements)n=n.filter(o=>!Pr(o,s));return{arrayValue:{values:n}}}class mh extends kh{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function X_(i){return At(i.integerValue||i.doubleValue)}function pE(i){return lp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function GC(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof tu&&o instanceof tu||s instanceof nu&&o instanceof nu?_o(s.elements,o.elements,Pr):s instanceof mh&&o instanceof mh?Pr(s.Ie,o.Ie):s instanceof dh&&o instanceof dh}(i.transform,e.transform)}class QC{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Mh{}function gE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new dp(i.key,Zn.none()):new hu(i.key,i.data,Zn.none());{const n=i.data,s=An.empty();let o=new Lt(sn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Es(i.key,s,new Mn(o.toArray()),Zn.none())}}function KC(i,e,n){i instanceof hu?function(o,u,f){const m=o.value.clone(),p=Z_(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Es?function(o,u,f){if(!Xc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Z_(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(yE(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function $l(i,e,n,s){return i instanceof hu?function(u,f,m,p){if(!Xc(u.precondition,f))return m;const y=u.value.clone(),E=J_(u.fieldTransforms,p,f);return y.setAll(E),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(i,e,n,s):i instanceof Es?function(u,f,m,p){if(!Xc(u.precondition,f))return m;const y=J_(u.fieldTransforms,p,f),E=f.data;return E.setAll(yE(u)),E.setAll(y),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(R=>R.field))}(i,e,n,s):function(u,f,m){return Xc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function $C(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=fE(s.transform,o||null);u!=null&&(n===null&&(n=An.empty()),n.set(s.field,u))}return n||null}function W_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&_o(s,o,(u,f)=>GC(u,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class hu extends Mh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Es extends Mh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function yE(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Z_(i,e,n){const s=new Map;rt(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,FC(f,m,n[o]))}return s}function J_(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,qC(u,f,e))}return s}class dp extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YC extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&KC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=$l(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=$l(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=cE();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=gE(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(De.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qe())}isEqual(e){return this.batchId===e.batchId&&_o(this.mutations,e.mutations,(n,s)=>W_(n,s))&&_o(this.baseMutations,e.baseMutations,(n,s)=>W_(n,s))}}class mp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){rt(e.mutations.length===s.length);let o=function(){return UC}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new mp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,We;function JC(i){switch(i){case J.OK:return Ne();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ne()}}function vE(i){if(i===void 0)return bi("GRPC error has no .code"),J.UNKNOWN;switch(i){case It.OK:return J.OK;case It.CANCELLED:return J.CANCELLED;case It.UNKNOWN:return J.UNKNOWN;case It.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case It.INTERNAL:return J.INTERNAL;case It.UNAVAILABLE:return J.UNAVAILABLE;case It.UNAUTHENTICATED:return J.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case It.NOT_FOUND:return J.NOT_FOUND;case It.ALREADY_EXISTS:return J.ALREADY_EXISTS;case It.PERMISSION_DENIED:return J.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case It.ABORTED:return J.ABORTED;case It.OUT_OF_RANGE:return J.OUT_OF_RANGE;case It.UNIMPLEMENTED:return J.UNIMPLEMENTED;case It.DATA_LOSS:return J.DATA_LOSS;default:return Ne()}}(We=It||(It={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new cs([4294967295,4294967295],0);function e0(i){const e=eN().encode(i),n=new Vb;return n.update(e),new Uint8Array(n.digest())}function t0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new cs([n,s],0),new cs([o,u],0)]}class pp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Hl(`Invalid padding: ${n}`);if(s<0)throw new Hl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=cs.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(cs.fromNumber(s)));return o.compare(tN)===1&&(o=new cs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=e0(e),[s,o]=t0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);if(!this.Re(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new pp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const n=e0(e),[s,o]=t0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);this.Ve(f)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Vh(De.min(),o,new mt(Qe),Ei(),qe())}}class fu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new fu(s,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class _E{constructor(e,n){this.targetId=e,this.ge=n}}class bE{constructor(e,n,s=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class n0{constructor(){this.pe=0,this.ye=r0(),this.we=on.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=qe(),n=qe(),s=qe();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ne()}}),new fu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=r0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,rt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class nN{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ei(),this.$e=Lc(),this.Ke=Lc(),this.Ue=new mt(Qe)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(wm(u))if(s===0){const f=new Ae(u.path);this.ze(n,f,dn.newNoDocument(f,De.min()))}else rt(s===1);else{const f=this.et(n);if(f!==s){const m=this.tt(e),p=m?this.nt(m,e,f):1;if(p!==0){this.Ye(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,y)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=ps(s).toUint8Array()}catch(p){if(p instanceof Gb)return vo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new pp(f,o,u)}catch(p){return vo(p instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&wm(m.target)){const p=new Ae(m.target.path);this._t(p).has(f)||this.ut(f,p)||this.ze(f,p,dn.newNoDocument(p,e))}u.ve&&(n.set(f,u.Fe()),u.Me())}});let s=qe();this.Ke.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const y=this.Xe(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(e));const o=new Vh(e,n,this.Ue,this.Qe,s);return this.Qe=Ei(),this.$e=Lc(),this.Ke=Lc(),this.Ue=new mt(Qe),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(e)),this.Ke=this.Ke.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new n0,this.qe.set(e,n)),n}ct(e){let n=this.Ke.get(e);return n||(n=new Lt(Qe),this.Ke=this.Ke.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Lt(Qe),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new n0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Lc(){return new mt(Ae.comparator)}function r0(){return new mt(Ae.comparator)}const rN={asc:"ASCENDING",desc:"DESCENDING"},iN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sN={and:"AND",or:"OR"};class aN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xm(i,e){return i.useProto3Json||Nh(e)?e:{value:e}}function ph(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function oN(i,e){return ph(i,e.toTimestamp())}function Mr(i){return rt(!!i),De.fromTimestamp(function(n){const s=ms(n);return new Ut(s.seconds,s.nanos)}(i))}function gp(i,e){return Rm(i,e).canonicalString()}function Rm(i,e){const n=function(o){return new ut(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function TE(i){const e=ut.fromString(i);return rt(RE(e)),e}function Cm(i,e){return gp(i.databaseId,e.path)}function rm(i,e){const n=TE(e);if(n.get(1)!==i.databaseId.projectId)throw new ve(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ve(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ae(SE(n))}function wE(i,e){return gp(i.databaseId,e)}function lN(i){const e=TE(i);return e.length===4?ut.emptyPath():SE(e)}function Nm(i){return new ut(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function SE(i){return rt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function i0(i,e,n){return{name:Cm(i,e),fields:n.value.mapValue.fields}}function uN(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,E){return y.useProto3Json?(rt(E===void 0||typeof E=="string"),on.fromBase64String(E||"")):(rt(E===void 0||E instanceof Buffer||E instanceof Uint8Array),on.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(y){const E=y.code===void 0?J.UNKNOWN:vE(y.code);return new ve(E,y.message||"")}(f);n=new bE(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=rm(i,s.document.name),u=Mr(s.document.updateTime),f=s.document.createTime?Mr(s.document.createTime):De.min(),m=new An({mapValue:{fields:s.document.fields}}),p=dn.newFoundDocument(o,u,f,m),y=s.targetIds||[],E=s.removedTargetIds||[];n=new Wc(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=rm(i,s.document),u=s.readTime?Mr(s.readTime):De.min(),f=dn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Wc([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=rm(i,s.document),u=s.removedTargetIds||[];n=new Wc([],u,o,null)}else{if(!("filter"in e))return Ne();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new ZC(o,u),m=s.targetId;n=new _E(m,f)}}return n}function cN(i,e){let n;if(e instanceof hu)n={update:i0(i,e.key,e.value)};else if(e instanceof dp)n={delete:Cm(i,e.key)};else if(e instanceof Es)n={update:i0(i,e.key,e.data),updateMask:_N(e.fieldMask)};else{if(!(e instanceof YC))return Ne();n={verify:Cm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof dh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof tu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof nu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof mh)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Ne()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:oN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ne()}(i,e.precondition)),n}function hN(i,e){return i&&i.length>0?(rt(e!==void 0),i.map(n=>function(o,u){let f=o.updateTime?Mr(o.updateTime):Mr(u);return f.isEqual(De.min())&&(f=Mr(u)),new QC(f,o.transformResults||[])}(n,e))):[]}function fN(i,e){return{documents:[wE(i,e.path)]}}function dN(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=wE(i,o);const u=function(y){if(y.length!==0)return xE(cr.create(y,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(y){if(y.length!==0)return y.map(E=>function(C){return{field:lo(C.field),direction:gN(C.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=xm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ht:n,parent:o}}function mN(i){let e=lN(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){rt(s===1);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(R){const C=AE(R);return C instanceof cr&&tE(C)?C.getFilters():[C]}(n.where));let f=[];n.orderBy&&(f=function(R){return R.map(C=>function(P){return new fh(uo(P.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(C))}(n.orderBy));let m=null;n.limit&&(m=function(R){let C;return C=typeof R=="object"?R.value:R,Nh(C)?null:C}(n.limit));let p=null;n.startAt&&(p=function(R){const C=!!R.before,O=R.values||[];return new hh(O,C)}(n.startAt));let y=null;return n.endAt&&(y=function(R){const C=!R.before,O=R.values||[];return new hh(O,C)}(n.endAt)),kC(e,o,f,u,m,"F",p,y)}function pN(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AE(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=uo(n.unaryFilter.field);return Dt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=uo(n.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=uo(n.unaryFilter.field);return Dt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=uo(n.unaryFilter.field);return Dt.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(i):i.fieldFilter!==void 0?function(n){return Dt.create(uo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return cr.create(n.compositeFilter.filters.map(s=>AE(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(i):Ne()}function gN(i){return rN[i]}function yN(i){return iN[i]}function vN(i){return sN[i]}function lo(i){return{fieldPath:i.canonicalString()}}function uo(i){return sn.fromServerFormat(i.fieldPath)}function xE(i){return i instanceof Dt?function(n){if(n.op==="=="){if(G_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NAN"}};if(F_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NAN"}};if(F_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(n.field),op:yN(n.op),value:n.value}}}(i):i instanceof cr?function(n){const s=n.getFilters().map(o=>xE(o));return s.length===1?s[0]:{compositeFilter:{op:vN(n.op),filters:s}}}(i):Ne()}function _N(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,s,o,u=De.min(),f=De.min(),m=on.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.Tt=e}}function EN(i){const e=mN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.Tn=new wN}addToCollectionParentIndex(e,n){return this.Tn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(ds.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class wN{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Lt(ut.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Lt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CE=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(CE,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new To(0)}static Un(){return new To(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="LruGarbageCollector",SN=1048576;function o0([i,e],[n,s]){const o=Qe(i,n);return o===0?Qe(e,s):o}class AN{constructor(e){this.Hn=e,this.buffer=new Lt(o0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();o0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xN{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ye(a0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Io(n)?ye(a0,"Ignoring IndexedDB error during garbage collection: ",n):await No(n)}await this.er(3e5)})}}class RN{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(Ch.ae);const s=new AN(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(s0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,f,m,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,f=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(s=R,m=Date.now(),this.removeTargets(e,s,n))).next(R=>(u=R,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(R=>(y=Date.now(),ao()<=Be.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${R} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}function CN(i,e){return new RN(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.changes=new ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&$l(s.mutation,o,Mn.empty(),Ut.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,qe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=qe()){const o=ra();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=zl();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=ra();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,qe()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=Ei();const f=Kl(),m=function(){return Kl()}();return n.forEach((p,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Es)?u=u.insert(y.key,y):E!==void 0?(f.set(y.key,E.mutation.getFieldMask()),$l(E.mutation,y,E.mutation.getFieldMask(),Ut.now())):f.set(y.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((y,E)=>f.set(y,E)),n.forEach((y,E)=>{var R;return m.set(y,new IN(E,(R=f.get(y))!==null&&R!==void 0?R:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Kl();let o=new mt((f,m)=>f-m),u=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let E=s.get(p)||Mn.empty();E=m.applyToLocalView(y,E),s.set(p,E);const R=(o.get(m.batchId)||qe()).add(p);o=o.insert(m.batchId,R)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,E=p.value,R=cE();E.forEach(C=>{if(!u.has(C)){const O=gE(n.get(C),s.get(C));O!==null&&R.set(C,O),u=u.add(C)}}),f.push(this.documentOverlayCache.saveOverlays(e,y,R))}return ee.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return Ae.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ee.resolve(ra());let m=Wl,p=u;return f.next(y=>ee.forEach(y,(E,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next(C=>{p=p.insert(E,C)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,p,y,qe())).next(E=>({batchId:m,changes:uE(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(s=>{let o=zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=zl();return this.indexManager.getCollectionParents(e,u).next(m=>ee.forEach(m,p=>{const y=function(R,C){return new Do(C,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(E=>{E.forEach((R,C)=>{f=f.insert(R,C)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,y)=>{const E=y.getKey();f.get(E)===null&&(f=f.insert(E,dn.newInvalidDocument(E)))});let m=zl();return f.forEach((p,y)=>{const E=u.get(p);E!==void 0&&$l(E.mutation,y,Mn.empty(),Ut.now()),Oh(n,y)&&(m=m.insert(p,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return ee.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Mr(o.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:EN(o.bundledQuery),readTime:Mr(o.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.overlays=new mt(Ae.comparator),this.Rr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ra();return ee.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),ee.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const o=ra(),u=n.length+1,f=new Ae(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new mt((y,E)=>y-E);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=ra(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=ra(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>m.set(y,E)),!(m.size()>=o)););return ee.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new WC(n,s));let u=this.Rr.get(n);u===void 0&&(u=qe(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.Vr=new Lt(Kt.mr),this.gr=new Lt(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Kt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Kt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new Ae(new ut([])),s=new Kt(n,e),o=new Kt(n,e+1),u=[];return this.gr.forEachInRange([s,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Ae(new ut([])),s=new Kt(n,e),o=new Kt(n,e+1);let u=qe();return this.gr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Kt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Ae.comparator(e.key,n.key)||Qe(e.Cr,n.Cr)}static pr(e,n){return Qe(e.Cr,n.Cr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Lt(Kt.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new XC(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new Kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(f)}lookupMutationBatch(e,n){return ee.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?ap:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],f=>{const m=this.Or(f.Cr);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Lt(Qe);return n.forEach(o=>{const u=new Kt(o,0),f=new Kt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{s=s.add(m.Cr)})}),ee.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Ae.isDocumentKey(u)||(u=u.child(""));const f=new Kt(new Ae(u),0);let m=new Lt(Qe);return this.Mr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Cr)),!0)},f),ee.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){rt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return ee.forEach(n.mutations,o=>{const u=new Kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Kt(n,0),o=this.Mr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.kr=e,this.docs=function(){return new mt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let s=Ei();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():dn.newInvalidDocument(o))}),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Ei();const f=n.path,m=new Ae(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||hC(cC(E),s)<=0||(o.has(E.key)||Oh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ne()}qr(e,n){return ee.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new jN(this)}getSize(e){return ee.resolve(this.size)}}class jN extends NN{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),ee.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.persistence=e,this.Qr=new ha(n=>up(n),cp),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Kr=new yp,this.targetCount=0,this.Ur=To.Kn()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),ee.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ur=new To(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.zn(n),ee.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Kr.br(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ee.waitFor(u).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this.Kr.yr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this.Kr.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Kr.br(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Kr.vr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Ch(0),this.zr=!1,this.zr=!0,this.jr=new MN,this.referenceDelegate=e(this),this.Hr=new UN(this),this.indexManager=new TN,this.remoteDocumentCache=function(o){return new PN(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new bN(n),this.Yr=new ON(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new VN(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){ye("MemoryPersistence","Starting transaction:",e);const o=new LN(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return ee.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class LN extends dC{constructor(e){super(),this.currentSequenceNumber=e}}class vp{constructor(e){this.persistence=e,this.ti=new yp,this.ni=null}static ri(e){return new vp(e)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),ee.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,s=>{const o=Ae.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,De.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return ee.or([()=>ee.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class gh{constructor(e,n){this.persistence=e,this.oi=new ha(s=>gC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=CN(this,n)}static ri(e,n){return new gh(e,n)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return ee.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?ee.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,n).next(m=>{m||(s++,u.removeEntry(f,De.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),ee.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$c(e.data.value)),n}ar(e,n,s){return ee.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=qe(),o=qe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new _p(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return UA()?8:mC(mn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new zN;return this._s(e,n,f).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,f,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(ao()<=Be.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(ao()<=Be.DEBUG&&ye("QueryEngine","Query:",oo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(ao()<=Be.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(n))):ee.resolve())}rs(e,n){if(Y_(n))return ee.resolve(null);let s=kr(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Am(n,null,"F"),s=kr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=qe(...u);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.cs(n,m);return this.ls(n,y,f,p.readTime)?this.rs(e,Am(n,null,"F")):this.hs(e,y,n,p)}))})))}ss(e,n,s,o){return Y_(n)||o.isEqual(De.min())?ee.resolve(null):this.ns.getDocuments(e,s).next(u=>{const f=this.cs(n,u);return this.ls(n,f,s,o)?ee.resolve(null):(ao()<=Be.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oo(n)),this.hs(e,f,n,uC(o,Wl)).next(m=>m))})}cs(e,n){let s=new Lt(oE(e));return n.forEach((o,u)=>{Oh(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return ao()<=Be.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",oo(n)),this.ns.getDocumentsMatchingQuery(e,n,ds.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="LocalStore",BN=3e8;class qN{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new mt(Qe),this.Is=new ha(u=>up(u),cp),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DN(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function FN(i,e,n,s){return new qN(i,e,n,s)}async function IE(i,e){const n=Ve(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=qe();for(const y of o){f.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(y=>({Rs:y,removedBatchIds:f,addedBatchIds:m}))})})}function GN(i,e){const n=Ve(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,y,E){const R=y.batch,C=R.keys();let O=ee.resolve();return C.forEach(P=>{O=O.next(()=>E.getEntry(p,P)).next(Q=>{const z=y.docVersions.get(P);rt(z!==null),Q.version.compareTo(z)<0&&(R.applyToRemoteDocument(Q,y),Q.isValidDocument()&&(Q.setReadTime(y.commitVersion),E.addEntry(Q)))})}),O.next(()=>m.mutationQueue.removeMutationBatch(p,R))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=qe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function DE(i){const e=Ve(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function QN(i,e){const n=Ve(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((E,R)=>{const C=o.get(R);if(!C)return;m.push(n.Hr.removeMatchingKeys(u,E.removedDocuments,R).next(()=>n.Hr.addMatchingKeys(u,E.addedDocuments,R)));let O=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(R)!==null?O=O.withResumeToken(on.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,s)),o=o.insert(R,O),function(Q,z,$){return Q.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=BN?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(C,O,E)&&m.push(n.Hr.updateTargetData(u,O))});let p=Ei(),y=qe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(KN(u,f,e.documentUpdates).next(E=>{p=E.Vs,y=E.fs})),!s.isEqual(De.min())){const E=n.Hr.getLastRemoteSnapshotVersion(u).next(R=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return ee.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,y)).next(()=>p)}).then(u=>(n.Ts=o,u))}function KN(i,e,n){let s=qe(),o=qe();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let f=Ei();return n.forEach((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):ye(bp,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)}),{Vs:f,fs:o}})}function $N(i,e){const n=Ve(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=ap),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function YN(i,e){const n=Ve(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,ee.resolve(o)):n.Hr.allocateTargetId(s).next(f=>(o=new as(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function Im(i,e,n){const s=Ve(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Io(f))throw f;ye(bp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function l0(i,e,n){const s=Ve(i);let o=De.min(),u=qe();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,y,E){const R=Ve(p),C=R.Is.get(E);return C!==void 0?ee.resolve(R.Ts.get(C)):R.Hr.getTargetData(y,E)}(s,f,kr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,e,n?o:De.min(),n?u:qe())).next(m=>(XN(s,VC(e),m),{documents:m,gs:u})))}function XN(i,e,n){let s=i.Es.get(e)||De.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class u0{constructor(){this.activeTargetIds=HC()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WN{constructor(){this.ho=new u0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new u0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="ConnectivityMonitor";class h0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ye(c0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ye(c0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=null;function Dm(){return zc===null?zc=function(){return 268435456+Math.round(2147483648*Math.random())}():zc++,"0x"+zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="RestConnection",JN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e2{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===uh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const f=Dm(),m=this.bo(e,n.toUriEncodedString());ye(im,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(y=>(ye(im,`Received RPC '${e}' ${f}: `,y),y),y=>{throw vo(im,`RPC '${e}' ${f} failed with error: `,y,"url: ",m,"request:",s),y})}Co(e,n,s,o,u,f){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Co}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=JN[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class n2 extends e2{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=Dm();return new Promise((f,m)=>{const p=new Pb;p.setWithCredentials(!0),p.listenOnce(jb.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Kc.NO_ERROR:const E=p.getResponseJson();ye(hn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case Kc.TIMEOUT:ye(hn,`RPC '${e}' ${u} timed out`),m(new ve(J.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const R=p.getStatus();if(ye(hn,`RPC '${e}' ${u} failed with status:`,R,"response text:",p.getResponseText()),R>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const O=C==null?void 0:C.error;if(O&&O.status&&O.message){const P=function(z){const $=z.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf($)>=0?$:J.UNKNOWN}(O.status);m(new ve(P,O.message))}else m(new ve(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ve(J.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ye(hn,`RPC '${e}' ${u} completed.`)}});const y=JSON.stringify(o);ye(hn,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",y,s,15)})}Wo(e,n,s){const o=Dm(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=zb(),m=Lb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ye(hn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const R=f.createWebChannel(E,p);let C=!1,O=!1;const P=new t2({Fo:z=>{O?ye(hn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(C||(ye(hn,`Opening RPC '${e}' stream ${o} transport.`),R.open(),C=!0),ye(hn,`RPC '${e}' stream ${o} sending:`,z),R.send(z))},Mo:()=>R.close()}),Q=(z,$,te)=>{z.listen($,W=>{try{te(W)}catch(pe){setTimeout(()=>{throw pe},0)}})};return Q(R,Ll.EventType.OPEN,()=>{O||(ye(hn,`RPC '${e}' stream ${o} transport opened.`),P.Qo())}),Q(R,Ll.EventType.CLOSE,()=>{O||(O=!0,ye(hn,`RPC '${e}' stream ${o} transport closed`),P.Ko())}),Q(R,Ll.EventType.ERROR,z=>{O||(O=!0,vo(hn,`RPC '${e}' stream ${o} transport errored:`,z),P.Ko(new ve(J.UNAVAILABLE,"The operation could not be completed")))}),Q(R,Ll.EventType.MESSAGE,z=>{var $;if(!O){const te=z.data[0];rt(!!te);const W=te,pe=(W==null?void 0:W.error)||(($=W[0])===null||$===void 0?void 0:$.error);if(pe){ye(hn,`RPC '${e}' stream ${o} received error:`,pe);const ue=pe.status;let be=function(S){const x=It[S];if(x!==void 0)return vE(x)}(ue),k=pe.message;be===void 0&&(be=J.INTERNAL,k="Unknown error status: "+ue+" with message "+pe.message),O=!0,P.Ko(new ve(be,k)),R.close()}else ye(hn,`RPC '${e}' stream ${o} received:`,te),P.Uo(te)}}),Q(m,Ub.STAT_EVENT,z=>{z.stat===_m.PROXY?ye(hn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===_m.NOPROXY&&ye(hn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{P.$o()},0),P}}function sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(i){return new aN(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="PersistentStream";class kE{constructor(e,n,s,o,u,f,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new OE(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(bi(n.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new ve(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ye(f0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(ye(f0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r2 extends kE{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=uN(this.serializer,e),s=function(u){if(!("targetChange"in u))return De.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?De.min():f.readTime?Mr(f.readTime):De.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=Nm(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=wm(p)?{documents:fN(u,p)}:{query:dN(u,p).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=EE(u,f.resumeToken);const y=xm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(De.min())>0){m.readTime=ph(u,f.snapshotVersion.toTimestamp());const y=xm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=pN(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=Nm(this.serializer),n.removeTarget=e,this.I_(n)}}class i2 extends kE{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return rt(!!e.streamToken),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=hN(e.writeResults,e.commitTime),s=Mr(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=Nm(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>cN(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{}class a2 extends s2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new ve(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.So(e,Rm(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ve(J.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,Rm(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ve(J.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class o2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(bi(n),this.N_=!1):ye("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RemoteStore";class l2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{s.enqueueAndForget(async()=>{fa(this)&&(ye(la,"Restarting streams for network reachability change."),await async function(p){const y=Ve(p);y.W_.add(4),await du(y),y.j_.set("Unknown"),y.W_.delete(4),await jh(y)}(this))})}),this.j_=new o2(s,o)}}async function jh(i){if(fa(i))for(const e of i.G_)await e(!0)}async function du(i){for(const e of i.G_)await e(!1)}function ME(i,e){const n=Ve(i);n.U_.has(e.targetId)||(n.U_.set(e.targetId,e),Sp(n)?wp(n):Oo(n).c_()&&Tp(n,e))}function Ep(i,e){const n=Ve(i),s=Oo(n);n.U_.delete(e),s.c_()&&VE(n,e),n.U_.size===0&&(s.c_()?s.P_():fa(n)&&n.j_.set("Unknown"))}function Tp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oo(i).y_(e)}function VE(i,e){i.H_.Ne(e),Oo(i).w_(e)}function wp(i){i.H_=new nN({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.U_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),Oo(i).start(),i.j_.B_()}function Sp(i){return fa(i)&&!Oo(i).u_()&&i.U_.size>0}function fa(i){return Ve(i).W_.size===0}function PE(i){i.H_=void 0}async function u2(i){i.j_.set("Online")}async function c2(i){i.U_.forEach((e,n)=>{Tp(i,e)})}async function h2(i,e){PE(i),Sp(i)?(i.j_.q_(e),wp(i)):i.j_.set("Unknown")}async function f2(i,e,n){if(i.j_.set("Online"),e instanceof bE&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.U_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.U_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){ye(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yh(i,s)}else if(e instanceof Wc?i.H_.We(e):e instanceof _E?i.H_.Ze(e):i.H_.je(e),!n.isEqual(De.min()))try{const s=await DE(i.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.U_.get(y);E&&u.U_.set(y,E.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,y)=>{const E=u.U_.get(p);if(!E)return;u.U_.set(p,E.withResumeToken(on.EMPTY_BYTE_STRING,E.snapshotVersion)),VE(u,p);const R=new as(E.target,p,y,E.sequenceNumber);Tp(u,R)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){ye(la,"Failed to raise snapshot:",s),await yh(i,s)}}async function yh(i,e,n){if(!Io(e))throw e;i.W_.add(1),await du(i),i.j_.set("Offline"),n||(n=()=>DE(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ye(la,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await jh(i)})}function jE(i,e){return e().catch(n=>yh(i,n,e))}async function Uh(i){const e=Ve(i),n=ys(e);let s=e.K_.length>0?e.K_[e.K_.length-1].batchId:ap;for(;d2(e);)try{const o=await $N(e.localStore,s);if(o===null){e.K_.length===0&&n.P_();break}s=o.batchId,m2(e,o)}catch(o){await yh(e,o)}UE(e)&&LE(e)}function d2(i){return fa(i)&&i.K_.length<10}function m2(i,e){i.K_.push(e);const n=ys(i);n.c_()&&n.S_&&n.b_(e.mutations)}function UE(i){return fa(i)&&!ys(i).u_()&&i.K_.length>0}function LE(i){ys(i).start()}async function p2(i){ys(i).C_()}async function g2(i){const e=ys(i);for(const n of i.K_)e.b_(n.mutations)}async function y2(i,e,n){const s=i.K_.shift(),o=mp.from(s,e,n);await jE(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await Uh(i)}async function v2(i,e){e&&ys(i).S_&&await async function(s,o){if(function(f){return JC(f)&&f!==J.ABORTED}(o.code)){const u=s.K_.shift();ys(s).h_(),await jE(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Uh(s)}}(i,e),UE(i)&&LE(i)}async function d0(i,e){const n=Ve(i);n.asyncQueue.verifyOperationInProgress(),ye(la,"RemoteStore received new credentials");const s=fa(n);n.W_.add(3),await du(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await jh(n)}async function _2(i,e){const n=Ve(i);e?(n.W_.delete(2),await jh(n)):e||(n.W_.add(2),await du(n),n.j_.set("Unknown"))}function Oo(i){return i.J_||(i.J_=function(n,s,o){const u=Ve(n);return u.M_(),new r2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:u2.bind(null,i),No:c2.bind(null,i),Lo:h2.bind(null,i),p_:f2.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Sp(i)?wp(i):i.j_.set("Unknown")):(await i.J_.stop(),PE(i))})),i.J_}function ys(i){return i.Y_||(i.Y_=function(n,s,o){const u=Ve(n);return u.M_(),new i2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:p2.bind(null,i),Lo:v2.bind(null,i),D_:g2.bind(null,i),v_:y2.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await Uh(i)):(await i.Y_.stop(),i.K_.length>0&&(ye(la,`Stopping write stream with ${i.K_.length} pending writes`),i.K_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new Ap(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(i,e){if(bi("AsyncQueue",`${e}: ${i}`),Io(i))return new ve(J.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{static emptySet(e){return new mo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ae.comparator(n.key,s.key):(n,s)=>Ae.comparator(n.key,s.key),this.keyedMap=zl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new mo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.Z_=new mt(Ae.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ne():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class wo{constructor(e,n,s,o,u,f,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new wo(e,n,mo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class E2{constructor(){this.queries=p0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=Ve(n),u=o.queries;o.queries=p0(),u.forEach((f,m)=>{for(const p of m.ta)p.onError(s)})})(this,new ve(J.ABORTED,"Firestore shutting down"))}}function p0(){return new ha(i=>aE(i),Dh)}async function zE(i,e){const n=Ve(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new b2,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=xp(f,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Rp(n)}async function HE(i,e){const n=Ve(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ta.indexOf(e);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function T2(i,e){const n=Ve(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(s=!0);f.ea=o}}s&&Rp(n)}function w2(i,e,n){const s=Ve(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Rp(i){i.ia.forEach(e=>{e.next()})}var Om,g0;(g0=Om||(Om={}))._a="default",g0.Cache="cache";class BE{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new wo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.key=e}}class FE{constructor(e){this.key=e}}class S2{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=qe(),this.mutatedKeys=qe(),this.ya=oE(e),this.wa=new mo(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new m0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,R)=>{const C=o.get(E),O=Oh(this.query,R)?R:null,P=!!C&&this.mutatedKeys.has(C.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let z=!1;C&&O?C.data.isEqual(O.data)?P!==Q&&(s.track({type:3,doc:O}),z=!0):this.va(C,O)||(s.track({type:2,doc:O}),z=!0,(p&&this.ya(O,p)>0||y&&this.ya(O,y)<0)&&(m=!0)):!C&&O?(s.track({type:0,doc:O}),z=!0):C&&!O&&(s.track({type:1,doc:C}),z=!0,(p||y)&&(m=!0)),z&&(O?(f=f.add(O),u=Q?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{wa:f,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((E,R)=>function(O,P){const Q=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return Q(O)-Q(P)}(E.type,R.type)||this.ya(E.doc,R.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,y=p!==this.ga;return this.ga=p,f.length!==0||y?{snapshot:new wo(this.query,e.wa,u,f,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new m0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=qe(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new FE(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new qE(s))}),n}Oa(e){this.fa=e.gs,this.pa=qe();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return wo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Cp="SyncEngine";class A2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class x2{constructor(e){this.key=e,this.Ba=!1}}class R2{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new ha(m=>aE(m),Dh),this.qa=new Map,this.Qa=new Set,this.$a=new mt(Ae.comparator),this.Ka=new Map,this.Ua=new yp,this.Wa={},this.Ga=new Map,this.za=To.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function C2(i,e,n=!0){const s=XE(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await GE(s,e,n,!0),o}async function N2(i,e){const n=XE(i);await GE(n,e,!0,!1)}async function GE(i,e,n,s){const o=await YN(i.localStore,kr(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await I2(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&ME(i.remoteStore,o),m}async function I2(i,e,n,s,o){i.Ha=(R,C,O)=>async function(Q,z,$,te){let W=z.view.ba($);W.ls&&(W=await l0(Q.localStore,z.query,!1).then(({documents:k})=>z.view.ba(k,W)));const pe=te&&te.targetChanges.get(z.targetId),ue=te&&te.targetMismatches.get(z.targetId)!=null,be=z.view.applyChanges(W,Q.isPrimaryClient,pe,ue);return v0(Q,z.targetId,be.Ma),be.snapshot}(i,R,C,O);const u=await l0(i.localStore,e,!0),f=new S2(e,u.gs),m=f.ba(u.documents),p=fu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),y=f.applyChanges(m,i.isPrimaryClient,p);v0(i,n,y.Ma);const E=new A2(e,n,f);return i.ka.set(e,E),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),y.snapshot}async function D2(i,e,n){const s=Ve(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(f=>!Dh(f,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Im(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Ep(s.remoteStore,o.targetId),km(s,o.targetId)}).catch(No)):(km(s,o.targetId),await Im(s.localStore,o.targetId,!0))}async function O2(i,e){const n=Ve(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ep(n.remoteStore,s.targetId))}async function k2(i,e,n){const s=z2(i);try{const o=await function(f,m){const p=Ve(f),y=Ut.now(),E=m.reduce((O,P)=>O.add(P.key),qe());let R,C;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let P=Ei(),Q=qe();return p.ds.getEntries(O,E).next(z=>{P=z,P.forEach(($,te)=>{te.isValidDocument()||(Q=Q.add($))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,P)).next(z=>{R=z;const $=[];for(const te of m){const W=$C(te,R.get(te.key).overlayedDocument);W!=null&&$.push(new Es(te.key,W,Zb(W.value.mapValue),Zn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,y,$,m)}).next(z=>{C=z;const $=z.applyToLocalDocumentSet(R,Q);return p.documentOverlayCache.saveOverlays(O,z.batchId,$)})}).then(()=>({batchId:C.batchId,changes:uE(R)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let y=f.Wa[f.currentUser.toKey()];y||(y=new mt(Qe)),y=y.insert(m,p),f.Wa[f.currentUser.toKey()]=y}(s,o.batchId,n),await mu(s,o.changes),await Uh(s.remoteStore)}catch(o){const u=xp(o,"Failed to persist write");n.reject(u)}}async function QE(i,e){const n=Ve(i);try{const s=await QN(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Ka.get(u);f&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?rt(f.Ba):o.removedDocuments.size>0&&(rt(f.Ba),f.Ba=!1))}),await mu(n,s,e)}catch(s){await No(s)}}function y0(i,e,n){const s=Ve(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=Ve(f);p.onlineState=m;let y=!1;p.queries.forEach((E,R)=>{for(const C of R.ta)C.sa(m)&&(y=!0)}),y&&Rp(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function M2(i,e,n){const s=Ve(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ka.get(e),u=o&&o.key;if(u){let f=new mt(Ae.comparator);f=f.insert(u,dn.newNoDocument(u,De.min()));const m=qe().add(u),p=new Vh(De.min(),new Map,new mt(Qe),f,m);await QE(s,p),s.$a=s.$a.remove(u),s.Ka.delete(e),Np(s)}else await Im(s.localStore,e,!1).then(()=>km(s,e,n)).catch(No)}async function V2(i,e){const n=Ve(i),s=e.batch.batchId;try{const o=await GN(n.localStore,e);$E(n,s,null),KE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await mu(n,o)}catch(o){await No(o)}}async function P2(i,e,n){const s=Ve(i);try{const o=await function(f,m){const p=Ve(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,m).next(R=>(rt(R!==null),E=R.keys(),p.mutationQueue.removeMutationBatch(y,R))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(s.localStore,e);$E(s,e,n),KE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await mu(s,o)}catch(o){await No(o)}}function KE(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function $E(i,e,n){const s=Ve(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function km(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ua.br(e).forEach(s=>{i.Ua.containsKey(s)||YE(i,s)})}function YE(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(Ep(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ka.delete(n),Np(i))}function v0(i,e,n){for(const s of n)s instanceof qE?(i.Ua.addReference(s.key,e),j2(i,s)):s instanceof FE?(ye(Cp,"Document no longer in limbo: "+s.key),i.Ua.removeReference(s.key,e),i.Ua.containsKey(s.key)||YE(i,s.key)):Ne()}function j2(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(ye(Cp,"New document in limbo: "+n),i.Qa.add(s),Np(i))}function Np(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new Ae(ut.fromString(e)),s=i.za.next();i.Ka.set(s,new x2(n)),i.$a=i.$a.insert(n,s),ME(i.remoteStore,new as(kr(hp(n.path)),s,"TargetPurposeLimboResolution",Ch.ae))}}async function mu(i,e,n){const s=Ve(i),o=[],u=[],f=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{f.push(s.Ha(p,e,n).then(y=>{var E;if((y||n)&&s.isPrimaryClient){const R=y?!y.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,R?"current":"not-current")}if(y){o.push(y);const R=_p.Yi(p.targetId,y);u.push(R)}}))}),await Promise.all(f),s.La.p_(o),await async function(p,y){const E=Ve(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ee.forEach(y,C=>ee.forEach(C.Hi,O=>E.persistence.referenceDelegate.addReference(R,C.targetId,O)).next(()=>ee.forEach(C.Ji,O=>E.persistence.referenceDelegate.removeReference(R,C.targetId,O)))))}catch(R){if(!Io(R))throw R;ye(bp,"Failed to update sequence numbers: "+R)}for(const R of y){const C=R.targetId;if(!R.fromCache){const O=E.Ts.get(C),P=O.snapshotVersion,Q=O.withLastLimboFreeSnapshotVersion(P);E.Ts=E.Ts.insert(C,Q)}}}(s.localStore,u))}async function U2(i,e){const n=Ve(i);if(!n.currentUser.isEqual(e)){ye(Cp,"User change. New user:",e.toKey());const s=await IE(n.localStore,e);n.currentUser=e,function(u,f){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new ve(J.CANCELLED,f))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await mu(n,s.Rs)}}function L2(i,e){const n=Ve(i),s=n.Ka.get(e);if(s&&s.Ba)return qe().add(s.key);{let o=qe();const u=n.qa.get(e);if(!u)return o;for(const f of u){const m=n.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function XE(i){const e=Ve(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=QE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M2.bind(null,e),e.La.p_=T2.bind(null,e.eventManager),e.La.Ja=w2.bind(null,e.eventManager),e}function z2(i){const e=Ve(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P2.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ph(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return FN(this.persistence,new HN,e.initialUser,this.serializer)}Xa(e){return new NE(vp.ri,this.serializer)}Za(e){return new WN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class H2 extends vh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){rt(this.persistence.referenceDelegate instanceof gh);const s=this.persistence.referenceDelegate.garbageCollector;return new xN(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new NE(s=>gh.ri(s,n),this.serializer)}}class Mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>y0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=U2.bind(null,this.syncEngine),await _2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E2}()}createDatastore(e){const n=Ph(e.databaseInfo.databaseId),s=function(u){return new n2(u)}(e.databaseInfo);return function(u,f,m,p){return new a2(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new l2(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>y0(this.syncEngine,n,0),function(){return h0.D()?new h0:new ZN}())}createSyncEngine(e,n){return function(o,u,f,m,p,y,E){const R=new R2(o,u,f,m,p,y);return E&&(R.ja=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Ve(o);ye(la,"RemoteStore shutting down."),u.W_.add(5),await du(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class B2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=Bb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{ye(vs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ye(vs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=xp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function am(i,e){i.asyncQueue.verifyOperationInProgress(),ye(vs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await IE(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function _0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await q2(i);ye(vs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>d0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>d0(e.remoteStore,o)),i._onlineComponents=e}async function q2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ye(vs,"Using user provided OfflineComponentProvider");try{await am(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;vo("Error using user provided cache. Falling back to memory cache: "+n),await am(i,new vh)}}else ye(vs,"Using default OfflineComponentProvider"),await am(i,new H2(void 0));return i._offlineComponents}async function ZE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ye(vs,"Using user provided OnlineComponentProvider"),await _0(i,i._uninitializedComponentsProvider._online)):(ye(vs,"Using default OnlineComponentProvider"),await _0(i,new Mm))),i._onlineComponents}function F2(i){return ZE(i).then(e=>e.syncEngine)}async function JE(i){const e=await ZE(i),n=e.eventManager;return n.onListen=C2.bind(null,e.syncEngine),n.onUnlisten=D2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=O2.bind(null,e.syncEngine),n}function G2(i,e,n={}){const s=new yi;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,y){const E=new WE({next:C=>{E.su(),f.enqueueAndForget(()=>HE(u,R));const O=C.docs.has(m);!O&&C.fromCache?y.reject(new ve(J.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&C.fromCache&&p&&p.source==="server"?y.reject(new ve(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(C)},error:C=>y.reject(C)}),R=new BE(hp(m.path),E,{includeMetadataChanges:!0,Ta:!0});return zE(u,R)}(await JE(i),i.asyncQueue,e,n,s)),s.promise}function Q2(i,e,n={}){const s=new yi;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,y){const E=new WE({next:C=>{E.su(),f.enqueueAndForget(()=>HE(u,R)),C.fromCache&&p.source==="server"?y.reject(new ve(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(C)},error:C=>y.reject(C)}),R=new BE(m,E,{includeMetadataChanges:!0,Ta:!0});return zE(u,R)}(await JE(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(i,e,n){if(!n)throw new ve(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function K2(i,e,n,s){if(e===!0&&s===!0)throw new ve(J.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function E0(i){if(!Ae.isDocumentKey(i))throw new ve(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function T0(i){if(Ae.isDocumentKey(i))throw new ve(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Lh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ne()}function Jn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ve(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lh(i);throw new ve(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="firestore.googleapis.com",w0=!0;class S0{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tT,this.ssl=w0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:w0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SN)throw new ve(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eT((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ve(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ve(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ve(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pu{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S0(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new tC;switch(s.type){case"firstParty":return new sC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=b0.get(n);s&&(ye("ComponentProvider","Removing Datastore"),b0.delete(n),s.terminate())}(this),Promise.resolve()}}function $2(i,e,n,s={}){var o;const u=(i=Jn(i,pu))._getSettings(),f=`${e}:${n}`;if(u.host!==tT&&u.host!==f&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},u),{host:f,ssl:!1})),s.mockUserToken){let m,p;if(typeof s.mockUserToken=="string")m=s.mockUserToken,p=fn.MOCK_USER;else{m=DA(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new ve(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new fn(y)}i._authCredentials=new nC(new Hb(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new da(this.firestore,e,this._query)}}class bn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class hs extends da{constructor(e,n,s){super(e,n,hp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new Ae(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function $t(i,e,...n){if(i=an(i),Ip("collection","path",e),i instanceof pu){const s=ut.fromString(e,...n);return T0(s),new hs(i,null,s)}{if(!(i instanceof bn||i instanceof hs))throw new ve(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ut.fromString(e,...n));return T0(s),new hs(i.firestore,null,s)}}function Y2(i,e){if(i=Jn(i,pu),Ip("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ve(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new da(i,null,function(s){return new Do(ut.emptyPath(),s)}(e))}function tt(i,e,...n){if(i=an(i),arguments.length===1&&(e=Bb.newId()),Ip("doc","path",e),i instanceof pu){const s=ut.fromString(e,...n);return E0(s),new bn(i,null,new Ae(s))}{if(!(i instanceof bn||i instanceof hs))throw new ve(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ut.fromString(e,...n));return E0(s),new bn(i.firestore,i instanceof hs?i.converter:null,new Ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="AsyncQueue";class x0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new OE(this,"async_queue_retry"),this.Su=()=>{const s=sm();s&&ye(A0,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=sm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=sm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new yi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Io(e))throw e;ye(A0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw bi("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=Ap.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class ma extends pu{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new x0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x0(e),this._firestoreClient=void 0,await e}}}function pa(i,e){const n=typeof i=="object"?i:eb(),s=typeof i=="string"?i:uh,o=Km(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=NA("firestore");u&&$2(o,...u)}return o}function Dp(i){if(i._terminated)throw new ve(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||X2(i),i._firestoreClient}function X2(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,y,E){return new _C(m,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,eT(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new B2(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(on.fromBase64String(e))}catch(n){throw new ve(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new So(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=/^__.*__$/;class Z2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}class nT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class Vp{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Vp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Ku(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return _h(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(rT(this.Lu)&&W2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class J2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ph(e)}ju(e,n,s,o=!1){return new Vp({Lu:e,methodName:n,zu:s,path:sn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hh(i){const e=i._freezeSettings(),n=Ph(i._databaseId);return new J2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function iT(i,e,n,s,o,u={}){const f=i.ju(u.merge||u.mergeFields?2:0,e,n,o);Pp("Data must be an object, but it was:",f,s);const m=sT(s,f);let p,y;if(u.merge)p=new Mn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const R of u.mergeFields){const C=Vm(e,R,n);if(!f.contains(C))throw new ve(J.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);oT(E,C)||E.push(C)}p=new Mn(E),y=f.fieldTransforms.filter(R=>p.covers(R.field))}else p=null,y=f.fieldTransforms;return new Z2(new An(m),p,y)}class Bh extends Op{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}function eI(i,e,n,s){const o=i.ju(1,e,n);Pp("Data must be an object, but it was:",o,s);const u=[],f=An.empty();bs(s,(p,y)=>{const E=jp(e,p,n);y=an(y);const R=o.Ku(E);if(y instanceof Bh)u.push(E);else{const C=gu(y,R);C!=null&&(u.push(E),f.set(E,C))}});const m=new Mn(u);return new nT(f,m,o.fieldTransforms)}function tI(i,e,n,s,o,u){const f=i.ju(1,e,n),m=[Vm(e,s,n)],p=[o];if(u.length%2!=0)throw new ve(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<u.length;C+=2)m.push(Vm(e,u[C])),p.push(u[C+1]);const y=[],E=An.empty();for(let C=m.length-1;C>=0;--C)if(!oT(y,m[C])){const O=m[C];let P=p[C];P=an(P);const Q=f.Ku(O);if(P instanceof Bh)y.push(O);else{const z=gu(P,Q);z!=null&&(y.push(O),E.set(O,z))}}const R=new Mn(y);return new nT(E,R,f.fieldTransforms)}function nI(i,e,n,s=!1){return gu(n,i.ju(s?4:3,e))}function gu(i,e){if(aT(i=an(i)))return Pp("Unsupported field value:",e,i),sT(i,e);if(i instanceof Op)return function(s,o){if(!rT(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=gu(m,o.Uu(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=an(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return BC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ut.fromDate(s);return{timestampValue:ph(o.serializer,u)}}if(s instanceof Ut){const u=new Ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ph(o.serializer,u)}}if(s instanceof kp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof So)return{bytesValue:EE(o.serializer,s._byteString)};if(s instanceof bn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:gp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Mp)return function(f,m){return{mapValue:{fields:{[Xb]:{stringValue:Wb},[ch]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw m.Wu("VectorValues must only contain numeric values.");return fp(m.serializer,y)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${Lh(s)}`)}(i,e)}function sT(i,e){const n={};return Fb(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(i,(s,o)=>{const u=gu(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function aT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ut||i instanceof kp||i instanceof So||i instanceof bn||i instanceof Op||i instanceof Mp)}function Pp(i,e,n){if(!aT(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=Lh(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function Vm(i,e,n){if((e=an(e))instanceof zh)return e._internalPath;if(typeof e=="string")return jp(i,e);throw _h("Field path arguments must be of type string or ",i,!1,void 0,n)}const rI=new RegExp("[~\\*/\\[\\]]");function jp(i,e,n){if(e.search(rI)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new zh(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function _h(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new ve(J.INVALID_ARGUMENT,m+i+p)}function oT(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Up("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iI extends lT{data(){return super.data()}}function Up(i,e){return typeof e=="string"?jp(i,e):e instanceof zh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ve(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lp{}class aI extends Lp{}function bh(i,e,...n){let s=[];e instanceof Lp&&s.push(e),s=s.concat(n),function(u){const f=u.filter(p=>p instanceof zp).length,m=u.filter(p=>p instanceof qh).length;if(f>1||f>0&&m>0)throw new ve(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class qh extends aI{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new qh(e,n,s)}_apply(e){const n=this._parse(e);return uT(e._query,n),new da(e.firestore,e.converter,Sm(e._query,n))}_parse(e){const n=Hh(e.firestore);return function(u,f,m,p,y,E,R){let C;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ve(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){C0(R,E);const P=[];for(const Q of R)P.push(R0(p,u,Q));C={arrayValue:{values:P}}}else C=R0(p,u,R)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||C0(R,E),C=nI(m,f,R,E==="in"||E==="not-in");return Dt.create(y,E,C)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Eh(i,e,n){const s=e,o=Up("where",i);return qh._create(o,s,n)}class zp extends Lp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zp(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)uT(f,p),f=Sm(f,p)}(e._query,n),new da(e.firestore,e.converter,Sm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function R0(i,e,n){if(typeof(n=an(n))=="string"){if(n==="")throw new ve(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sE(e)&&n.indexOf("/")!==-1)throw new ve(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ut.fromString(n));if(!Ae.isDocumentKey(s))throw new ve(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return q_(i,new Ae(s))}if(n instanceof bn)return q_(i,n._key);throw new ve(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lh(n)}.`)}function C0(i,e){if(!Array.isArray(i)||i.length===0)throw new ve(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uT(i,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ve(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oI{convertValue(e,n="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return bs(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[ch].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>At(f.doubleValue));return new Mp(u)}convertGeoPoint(e){return new kp(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ih(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=ms(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ut.fromString(e);rt(RE(s));const o=new Jl(s.get(1),s.get(3)),u=new Ae(s.popFirst(5));return o.isEqual(n)||bi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hT extends lT{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Up("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Zc extends hT{data(e={}){return super.data(e)}}class lI{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Bl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Zc(this._firestore,this._userDataWriter,s.key,s,new Bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new Zc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new Zc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:uI(m.type),doc:p,oldIndex:y,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function uI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(i){i=Jn(i,bn);const e=Jn(i.firestore,ma);return G2(Dp(e),i._key).then(n=>hI(e,i,n))}class fT extends oI{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,n)}}function Yt(i){i=Jn(i,da);const e=Jn(i.firestore,ma),n=Dp(e),s=new fT(e);return sI(i._query),Q2(n,i._query).then(o=>new lI(e,s,i,o))}function lr(i,e,n){i=Jn(i,bn);const s=Jn(i.firestore,ma),o=cT(i.converter,e,n);return Fh(s,[iT(Hh(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Zn.none())])}function ru(i,e,n,...s){i=Jn(i,bn);const o=Jn(i.firestore,ma),u=Hh(o);let f;return f=typeof(e=an(e))=="string"||e instanceof zh?tI(u,"updateDoc",i._key,e,n,s):eI(u,"updateDoc",i._key,e),Fh(o,[f.toMutation(i._key,Zn.exists(!0))])}function ql(i){return Fh(Jn(i.firestore,ma),[new dp(i._key,Zn.none())])}function cI(i,e){const n=Jn(i.firestore,ma),s=tt(i),o=cT(i.converter,e);return Fh(n,[iT(Hh(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Zn.exists(!1))]).then(()=>s)}function Fh(i,e){return function(s,o){const u=new yi;return s.asyncQueue.enqueueAndForget(async()=>k2(await F2(s),o,u)),u.promise}(Dp(i),e)}function hI(i,e,n){const s=n.docs.get(e._key),o=new fT(i);return new hT(i,o,e._key,s,new Bl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Co=o})(Ro),po(new sa("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new ma(new rC(s.getProvider("auth-internal")),new aC(f,s.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ve(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(y.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),us(O_,k_,e),us(O_,k_,"esm2017")})();var fI="firebase",dI="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(fI,dI,"app");const mI={apiKey:"AIzaSyC1K4kZk4TwvPBhndVCffuw5P4MqAC_AFM",authDomain:"web2024-9dc04.firebaseapp.com",projectId:"web2024-9dc04",storageBucket:"web2024-9dc04.firebasestorage.app",messagingSenderId:"533756221690",appId:"1:533756221690:web:7553ac87b46090dab99143",measurementId:"G-1EEGB1LPBS"},fr=J0(mI);_s(fr);function pI(){const[i,e]=V.useState(""),n=jr(),s=_s(fr),o=new fi,u=pa(fr),f=async()=>{var m,p;try{const E=(await u1(s,o)).user,R=tt(u,"users",E.uid);(await hr(R)).exists()||await lr(R,{name:E.displayName,email:E.email,photo:E.photoURL,classroom:{cid:"",status:2}});const P=(p=(m=(await hr(R)).data())==null?void 0:m.classroom)==null?void 0:p.status;console.log("User status:",P),n(P===1?"/dashboard":P===2?"/student-dashboard":"/dashboard")}catch(y){console.error(y),e("ไม่สามารถเข้าสู่ระบบด้วย Google ได้: "+y.message)}};return v.jsxs("div",{className:"min-h-screen flex",children:[v.jsx("div",{className:"w-1/2 bg-gradient-to-br from-blue-200 to-blue-500 flex items-center justify-center p-6",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h1",{className:"text-5xl font-ChakraPetchTH text-white mb-4",children:"ยินดีต้อนรับสู่"}),v.jsx("h2",{className:"text-4xl font-ChakraPetchTH text-white mb-2",children:"ระบบจัดการห้องเรียน"}),v.jsx("h3",{className:"text-3xl font-InterEN text-white",children:"Classroom Management System"})]})}),v.jsx("div",{className:"w-1/2 bg-white flex items-center justify-center p-6",children:v.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-md",children:[v.jsx("h2",{className:"text-3xl font-ChakraPetchTH text-gray-800 mb-8",children:"เข้าสู่ระบบ"}),i&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-800 px-4 py-3 rounded mb-6 w-full",children:i}),v.jsxs("button",{onClick:f,className:"w-80 h-16 flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-700 text-xl font-ChakraPetchTH rounded-xl transition duration-300 shadow-lg border-2 border-gray-200 hover:border-blue-500 group mx-auto",children:[v.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-7 h-7"}),v.jsx("span",{className:"group-hover:text-blue-600",children:"เข้าสู่ระบบด้วย Google"})]}),v.jsx("h3",{className:"p-6 text-red-500 font-ChakraPetchTH",children:"ลงทะเบียนครั้งแรกสำหรับอาจารย์ โปรดติดต่อแอดมิน"})]})})]})}const nn=[];for(let i=0;i<256;++i)nn.push((i+256).toString(16).slice(1));function gI(i,e=0){return(nn[i[e+0]]+nn[i[e+1]]+nn[i[e+2]]+nn[i[e+3]]+"-"+nn[i[e+4]]+nn[i[e+5]]+"-"+nn[i[e+6]]+nn[i[e+7]]+"-"+nn[i[e+8]]+nn[i[e+9]]+"-"+nn[i[e+10]]+nn[i[e+11]]+nn[i[e+12]]+nn[i[e+13]]+nn[i[e+14]]+nn[i[e+15]]).toLowerCase()}let om;const yI=new Uint8Array(16);function vI(){if(!om){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");om=crypto.getRandomValues.bind(crypto)}return om(yI)}const _I=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),N0={randomUUID:_I};function dT(i,e,n){var o;if(N0.randomUUID&&!i)return N0.randomUUID();i=i||{};const s=i.random??((o=i.rng)==null?void 0:o.call(i))??vI();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,gI(s)}function bI(){const i=jr(),e=_s(),n=pa(fr),s=e.currentUser,[o,u]=V.useState(null),[f,m]=V.useState([]),[p,y]=V.useState(!1),[E,R]=V.useState(null),[C,O]=V.useState(!1),[P,Q]=V.useState(""),[z,$]=V.useState(""),[te,W]=V.useState(""),[pe,ue]=V.useState(""),[be,k]=V.useState(!1),[A,S]=V.useState(!1),[x,D]=V.useState(null),[L,I]=V.useState(""),[he,Re]=V.useState(""),[se,ge]=V.useState(""),[ce,Oe]=V.useState(""),[M,re]=V.useState(""),[fe,le]=V.useState([]),[de,ke]=V.useState([]),[Ce,ie]=V.useState(""),[me,Se]=V.useState(!1),[Te,Fe]=V.useState(!1),[Ot,Xt]=V.useState(!1),[xn,pn]=V.useState([]),[ln,er]=V.useState(""),[En,pr]=V.useState(""),[pt,Ur]=V.useState(null),[ko,Lr]=V.useState(!1),[bt,ga]=V.useState(null);V.useEffect(()=>{if(s){const G=tt(n,"users",s.uid);hr(G).then(oe=>{oe.exists()&&u(oe.data())}).catch(oe=>{console.error("Error fetching user profile:",oe)})}},[s,n]),V.useEffect(()=>{if(s){const G=bh($t(n,"classroom"),Eh("owner","==",s.uid));Yt(G).then(oe=>{const He=[];oe.forEach(Pe=>{He.push({id:Pe.id,...Pe.data()})}),m(He)}).catch(oe=>{console.error("Error fetching classrooms:",oe)})}},[s,n]),V.useEffect(()=>{x&&(async()=>{try{const oe=$t(n,"classroom",x.id,"students"),He=await Yt(oe),Pe=[];He.forEach(Ke=>{Pe.push({id:Ke.id,checked:!1,...Ke.data()})}),le(Pe)}catch(oe){console.error("Error fetching students for inline edit:",oe)}})()},[x,n]),V.useEffect(()=>{(async()=>{try{const oe=$t(n,"users"),He=bh(oe,Eh("classroom.status","==",2)),Pe=await Yt(He),Ke=[];Pe.forEach(Tt=>{Ke.push({id:Tt.id,...Tt.data()})}),ke(Ke)}catch(oe){console.error("Error fetching available users:",oe)}})()},[n]),V.useEffect(()=>{x&&(async()=>{try{const oe=$t(n,"classroom",x.id,"checkin"),He=await Yt(oe),Pe=[];He.forEach(Ke=>{Pe.push({id:Ke.id,...Ke.data()})}),pn(Pe)}catch(oe){console.error("Error fetching check-in records:",oe)}})()},[x,n]),V.useEffect(()=>{(async()=>{if(!(!x||!pt))try{const oe=$t(n,"classroom",x.id,"checkin",pt.id,"students"),Pe=(await Yt(oe)).docs.map(Tt=>Tt.id),Ke=fe.map(Tt=>Pe.includes(Tt.id)?{...Tt,checked:!0}:{...Tt,checked:!1});le(Ke)}catch(oe){console.error("Error loading checked status:",oe)}})()},[x,pt,n,fe]);const Et=async()=>{if(Ce){if(fe.some(G=>G.id===Ce)){alert("This student is already added.");return}try{const G=de.find(He=>He.id===Ce);if(!G)return;const oe=tt(n,"classroom",x.id,"students",G.id);await lr(oe,{stdid:G.id,name:G.name,status:1}),le([...fe,{id:G.id,stdid:G.id,name:G.name,status:1}]),alert("Student added successfully."),ie("")}catch(G){console.error("Error adding student inline:",G),alert("Failed to add student.")}}},xt=async()=>{try{await wb(e),i("/")}catch(G){console.error("Error signing out:",G)}},tr=G=>{R(oe=>oe===G?null:G)},ya=async G=>{if(window.confirm("Are you sure you want to delete this classroom?"))try{await ql(tt(n,"classroom",G)),m(oe=>oe.filter(He=>He.id!==G))}catch(oe){console.error("Error deleting classroom:",oe)}},Ts=async G=>{G.preventDefault(),k(!0);try{const oe=dT(),He=tt(n,"classroom",oe);await lr(He,{owner:s.uid,info:{code:P,name:z,photo:pe||"",room:te}}),m(Pe=>[...Pe,{id:oe,owner:s.uid,info:{code:P,name:z,photo:pe,room:te}}]),Q(""),$(""),W(""),ue(""),O(!1),A&&S(!1),alert("Classroom created successfully!")}catch(oe){console.error("Error creating classroom:",oe),alert("Error creating classroom.")}k(!1)},Mo=G=>{S(!0),D(G),I(G.info.code),Re(G.info.name),ge(G.info.photo),Oe(G.info.room),re(""),R(null),Se(!1),le([]),ie("")},zr=async G=>{G.preventDefault(),k(!0),re("");try{const oe=tt(n,"classroom",x.id);await ru(oe,{"info.code":L,"info.name":he,"info.photo":se,"info.room":ce}),m(He=>He.map(Pe=>Pe.id===x.id?{...Pe,info:{code:L,name:he,photo:se,room:ce}}:Pe)),re("Classroom updated successfully.")}catch(oe){console.error("Error updating classroom:",oe),re("Failed to update classroom.")}k(!1)},gr=async()=>{if(!ln||!En){alert("Please provide check-in code and date/time.");return}try{const G=await cI($t(n,"classroom",x.id,"checkin"),{code:ln,date:En,status:0});Ur({id:G.id,code:ln,date:En,status:0}),er(""),pr("")}catch(G){console.error("Error creating check-in record:",G),alert("Failed to create check-in record.")}},zt=async G=>{try{const oe=fe.find(Pe=>Pe.id===G);if(!oe)return;const He=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await lr(tt(n,"classroom",x.id,"checkin",pt.id,"students",G),{stdid:oe.stdid,name:oe.name,remark:"",date:He}),await lr(tt(n,"classroom",x.id,"checkin",pt.id,"scores",oe.stdid),{uid:G,stdid:oe.stdid,name:oe.name,remark:"",dates:He,score:1,status:1}),le(Pe=>Pe.map(Ke=>Ke.id===G?{...Ke,checked:!0}:Ke))}catch(oe){console.error("Error storing student check-in:",oe),alert("Failed to check in student.")}},ws=async()=>{if(pt)try{const G=tt(n,"classroom",x.id,"checkin",pt.id);await ru(G,{status:2}),alert("Check-in process has been finalized.");const oe=$t(n,"classroom",x.id,"checkin"),He=await Yt(oe),Pe=[];He.forEach(Ke=>{Pe.push({id:Ke.id,...Ke.data()})}),pn(Pe),Ur(null)}catch(G){console.error("Error finishing check-in:",G),alert("Error finalizing check-in.")}},Pn=async G=>{ga(G),Lr(!0);try{const oe=$t(n,"classroom",x.id,"checkin",G.id,"students"),Pe=(await Yt(oe)).docs.map(Ke=>Ke.id);le(Ke=>Ke.map(Tt=>Pe.includes(Tt.id)?{...Tt,checked:!0}:{...Tt,checked:!1}))}catch(oe){console.error("Error viewing check-in details:",oe)}},Wt=async()=>{if(!(!x||!bt)&&window.confirm("Are you sure you want to delete this check-in record?"))try{await ql(tt(n,"classroom",x.id,"checkin",bt.id)),pn(G=>G.filter(oe=>oe.id!==bt.id)),alert("Check-in record deleted successfully."),Lr(!1)}catch(G){console.error("Error deleting check-in record:",G),alert("Failed to delete check-in record.")}},Ss=G=>{i(`/create-quiz/${x.id}?checkinId=${G.id}`)},va=async G=>{try{const oe=fe.find(He=>He.id===G);if(!oe)return;await ql(tt(n,"classroom",x.id,"checkin",pt.id,"students",G)),await ql(tt(n,"classroom",x.id,"checkin",pt.id,"scores",oe.stdid)),le(He=>He.map(Pe=>Pe.id===G?{...Pe,checked:!1}:Pe))}catch(oe){console.error("Error undoing student check-in:",oe),alert("Failed to undo check-in for student.")}};return v.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[v.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-4xl --font-InterEN mb-8",children:"Classroom Management System"}),v.jsxs("ul",{className:"space-y-4",children:[v.jsx("li",{children:v.jsx("button",{onClick:()=>{S(!1),O(!1),D(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"ห้องเรียนของฉัน"})}),v.jsx("li",{children:v.jsx("button",{onClick:()=>{S(!0),O(!0),D(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"สร้างห้องเรียน"})})]})]}),v.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",onClick:()=>i("/edit-profile"),children:[o&&o.photo?v.jsx("img",{src:o.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):v.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:v.jsx("span",{className:"text-lg text-white",children:"N/A"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-white font-InterEN font-bold",children:(o==null?void 0:o.name)||(s==null?void 0:s.email)||"User"}),s&&v.jsx("p",{className:"text-blue-200 font-InterEN text-sm",children:s.email})]})]})]}),v.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"แดชบอร์ด"}),v.jsx("button",{onClick:()=>y(!0),className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),v.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[v.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["ยินดีต้อนรับสู่ระบบจัดการห้องเรียน Classroom Management System, ",(o==null?void 0:o.name)||(s==null?void 0:s.email)||"User","😊"]}),v.jsx("p",{className:"text-blue-700 font-ChakraPetchTH mb-4",children:"จัดการห้องเรียนของคุณที่มหาวิทยาลัยขอนแก่น"}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:A?x?"แก้ไขห้องเรียน":"สร้างห้องเรียน":"ห้องเรียนของคุณ"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:A?x?v.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-ChakraPetchTH text-blue-900",children:me?`แก้ไขรายละเอียดห้องเรียน : ${x.info.name}`:`จัดการนักเรียน : ${x.info.name}`}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{onClick:()=>Fe(G=>!G),className:"p-2 focus:outline-none",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),Te&&v.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md z-10",children:[v.jsx("button",{onClick:()=>{Se(!0),Fe(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"แก้ไขห้องเรียน"}),v.jsx("button",{onClick:()=>{Se(!1),Fe(!1)},className:"block w-full font-ChakraPetchTH text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"จัดการนักเรียน"})]})]})]}),me?v.jsxs("form",{onSubmit:zr,className:"space-y-6",children:[v.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:L,onChange:G=>I(G.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),v.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:he,onChange:G=>Re(G.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),v.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:se,onChange:G=>ge(G.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),v.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:ce,onChange:G=>Oe(G.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),M&&v.jsx("p",{className:"text-green-600 text-center",children:M}),v.jsxs("div",{className:"flex justify-end space-x-4",children:[v.jsx("button",{type:"button",onClick:()=>{D(null),S(!1),O(!1)},className:"px-4 py-2 rounded border border-gray-300 hover:bg-gray-100 transition",children:"ยกเลิก"}),v.jsx("button",{type:"submit",disabled:be,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:be?"กำลังอัพเดท...":"บันทึก"})]})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"mt-4",children:[v.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"นักเรียนที่ลงทะเบียน"}),fe.length>0?v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full border",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-blue-100",children:[v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"สถานะ"})]})}),v.jsx("tbody",{children:fe.map(G=>v.jsxs("tr",{className:"hover:bg-blue-50",children:[v.jsx("td",{className:"border p-2",children:G.stdid}),v.jsx("td",{className:"border p-2",children:G.name}),v.jsx("td",{className:"border p-2",children:G.status===0?"ยังไม่ตรวจสอบ":"ตรวจสอบแล้ว"})]},G.id))})]})}):v.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนในห้องเรียนนี้"})]}),v.jsxs("div",{className:"mt-8",children:[v.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"เพิ่มนักเรียน"}),v.jsx("div",{className:"mb-4",children:v.jsxs("select",{value:Ce,onChange:G=>ie(G.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:[v.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),de.map(G=>v.jsxs("option",{value:G.id,children:[G.name," (",G.email,")"]},G.id))]})}),v.jsxs("div",{className:"flex space-x-4",children:[v.jsx("button",{type:"button",onClick:Et,className:"w-full font-ChakraPetchTH bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"เพิ่มนักเรียน"}),v.jsx("button",{type:"button",onClick:()=>Xt(G=>!G),className:"w-full font-ChakraPetchTH bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:pt?"แสดงตารางเช็คชื่อ":"สร้างการเช็คชื่อ"})]}),Ot&&!pt&&v.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:v.jsxs("div",{className:"space-y-4",children:[v.jsx("input",{type:"text",placeholder:"รหัสเช็คชื่อ (e.g., ABC123456)",value:ln,onChange:G=>er(G.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),v.jsx("input",{type:"datetime-local",value:En,onChange:G=>pr(G.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),v.jsx("button",{type:"button",onClick:gr,className:"w-full bg-blue-600 text-white font-ChakraPetchTH px-4 py-2 rounded hover:bg-blue-700 transition",children:"สร้างการเช็คชื่อ"})]})}),Ot&&pt&&v.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:v.jsxs("div",{className:"space-y-4",children:[v.jsxs("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["Check-in Table (Code: ",pt.code,", Time: ",pt.date,")"]}),fe.length>0?v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full border",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-blue-100",children:[v.jsx("th",{className:"border p-2 text-left",children:"ลำดับ"}),v.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),v.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),v.jsx("th",{className:"border p-2 text-left",children:"สถานะ"}),v.jsx("th",{className:"border p-2 text-left",children:"การปฏิบัติ"})]})}),v.jsx("tbody",{children:fe.map((G,oe)=>v.jsxs("tr",{className:"hover:bg-blue-50",children:[v.jsx("td",{className:"border p-2",children:oe+1}),v.jsx("td",{className:"border p-2",children:G.stdid}),v.jsx("td",{className:"border p-2",children:G.name}),v.jsx("td",{className:"border p-2",children:G.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็ค"}),v.jsx("td",{className:"border p-2",children:v.jsx("button",{type:"button",onClick:()=>{G.checked?va(G.id):zt(G.id)},className:`px-3 py-1 rounded ${G.checked?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:G.checked?"ยกเลิกเช็คชื่อ":"เช็คชื่อ"})})]},G.id))})]})}):v.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีนักเรียนในห้องเรียนนี้"}),v.jsx("button",{type:"button",onClick:ws,className:"w-full bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition mt-4",children:"สิ้นสุดการเช็คชื่อ"})]})})]}),v.jsxs("div",{className:"mt-8",children:[v.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"บันทึกการเช็คชื่อ"}),xn.length>0?v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full border",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-blue-100",children:[v.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),v.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสเช็คชื่อ"}),v.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"วัน/เวลา"}),v.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"}),v.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รายละเอียด"})]})}),v.jsx("tbody",{children:xn.map((G,oe)=>v.jsxs("tr",{className:"hover:bg-blue-50",children:[v.jsx("td",{className:"border font-ChakraPetchTH p-2",children:oe+1}),v.jsx("td",{className:"border font-ChakraPetchTH p-2",children:G.code}),v.jsx("td",{className:"border font-ChakraPetchTH p-2",children:G.date}),v.jsx("td",{className:"border font-ChakraPetchTH p-2",children:G.status===0?"ยังไม่เริ่ม":G.status===1?"กำลังดำเนินการ":"เสร็จสิ้น"}),v.jsxs("td",{className:"border p-2",children:[v.jsx("button",{type:"button",onClick:()=>Pn(G),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition",children:"รายละเอียด"}),v.jsx("button",{type:"button",onClick:()=>Ss(G),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition m-2",children:"ควิซ"})]})]},G.id))})]})}):v.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีบันทึกการเช็คชื่อในห้องเรียนนี้"})]})]})]}):C?v.jsx("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:v.jsxs("form",{onSubmit:Ts,className:"space-y-6",children:[v.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:P,onChange:G=>Q(G.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),v.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:z,onChange:G=>$(G.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),v.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:te,onChange:G=>W(G.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),v.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:pe,onChange:G=>ue(G.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),v.jsxs("div",{className:"flex justify-end space-x-4",children:[v.jsx("button",{type:"button",onClick:()=>{O(!1),S(!1)},className:"px-6 py-3 rounded border border-gray-300 hover:bg-gray-100 transition",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:be,className:"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 transition shadow-md",children:be?"Creating...":"Create"})]})]})}):v.jsxs("div",{onClick:()=>O(!0),className:"col-span-1 md:col-span-2 relative flex flex-col items-center justify-center border-4 border-dashed border-blue-400 rounded-xl h-60 cursor-pointer hover:bg-blue-100 transition duration-300",children:[v.jsx("span",{className:"text-6xl text-blue-500",children:"+"}),v.jsx("span",{className:"mt-4 text-2xl text-blue-700 font-bold",children:"Create New Classroom"})]}):v.jsx(v.Fragment,{children:f.map(G=>v.jsxs("div",{className:"relative flex flex-col items-center border border-gray-200 rounded-lg shadow-md bg-white transition transform hover:-translate-y-1 hover:shadow-xl duration-300",children:[v.jsx("button",{onClick:()=>tr(G.id),className:"absolute top-2 right-2 bg-white border border-gray-300 rounded-full p-2 transition duration-200 active:scale-95 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),E===G.id&&v.jsxs("div",{className:"absolute top-10 right-2 w-32 bg-white shadow-lg rounded py-1 z-20",children:[v.jsx("button",{onClick:()=>Mo(G),className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"จัดการนักเรียน"}),v.jsx("button",{onClick:()=>{ya(G.id),R(null)},className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"ลบห้องเรียน"})]}),G.info.photo?v.jsx("img",{src:G.info.photo,alt:G.info.name,className:"w-full h-48 object-cover rounded-t-lg border-b border-gray-200"}):v.jsx("div",{className:"w-full h-48 bg-blue-300 flex items-center justify-center rounded-t-lg border-b border-gray-200",children:v.jsx("span",{className:"text-lg text-white",children:"No Image"})}),v.jsxs("div",{className:"p-4 text-center",children:[v.jsx("p",{className:"font-semibold font-InterEN text-blue-900 text-xl mb-1",children:G.info.name}),v.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Code : ",G.info.code]}),v.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Room : ",G.info.room]})]})]},G.id))})})]})]})]}),ko&&bt&&v.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-10 z-50",children:v.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50 w-11/12 md:w-1/2",children:[v.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"รายละเอียดการเช็คชื่อ"}),v.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["รหัสเช็คชื่อ: ",bt.code]}),v.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["วัน/เวลา: ",bt.date]}),v.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH",children:["จำนวนนักเรียนที่เช็คชื่อ : ",fe.filter(G=>G.checked).length," / ",fe.length]}),v.jsx("div",{className:"mt-4 overflow-x-auto",children:v.jsxs("table",{className:"w-full border",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-blue-100",children:[v.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),v.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสนักเรียน"}),v.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ชื่อ"}),v.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"})]})}),v.jsx("tbody",{children:fe.map((G,oe)=>v.jsxs("tr",{className:"hover:bg-blue-50",children:[v.jsx("td",{className:"border font-ChakraPetchTH p-2",children:oe+1}),v.jsx("td",{className:"border font-ChakraPetchTH p-2",children:G.stdid}),v.jsx("td",{className:"border font-ChakraPetchTH p-2",children:G.name}),v.jsx("td",{className:"border font-ChakraPetchTH p-2",children:G.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็คชื่อ"})]},G.id))})]})}),v.jsxs("div",{className:"flex justify-end mt-4 space-x-4",children:[v.jsx("button",{type:"button",onClick:Wt,className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 shadow-xs transition",children:"ลบบันทึกการเช็คชื่อ"}),v.jsx("button",{type:"button",onClick:()=>Lr(!1),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 shadow-xs transition",children:"ปิด"})]})]})}),p&&v.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[v.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),v.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:v.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:v.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[v.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:v.jsxs("div",{className:"sm:flex sm:items-start",children:[v.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:v.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),v.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[v.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),v.jsx("div",{className:"mt-2",children:v.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),v.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[v.jsx("button",{type:"button",onClick:()=>{y(!1),xt()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),v.jsx("button",{type:"button",onClick:()=>y(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]})]})}function EI(){const i=_s(),e=pa(fr),n=jr(),[s,o]=V.useState(i.currentUser),[u,f]=V.useState(""),[m,p]=V.useState(""),[y,E]=V.useState(!1),[R,C]=V.useState(""),[O,P]=V.useState(!1);V.useEffect(()=>{(async()=>{if(s)try{const $=tt(e,"users",s.uid),te=await hr($);if(te.exists()){const W=te.data();f(W.name||""),p(W.photo||""),P(!1)}}catch($){console.error("Error loading profile:",$)}})()},[s,e]);const Q=async z=>{if(z.preventDefault(),!!s){E(!0),C("");try{await HR(s,{displayName:u,photoURL:m});const $=tt(e,"users",s.uid);await lr($,{name:u,photo:m,email:s.email,classroom:{status:1}},{merge:!0}),C("อัปเดตโปรไฟล์สำเร็จแล้ว"),P(!1)}catch($){console.error("Error updating profile:",$),C("เกิดข้อผิดพลาดในการอัปเดตโปรไฟล์")}E(!1)}};return s?v.jsxs("div",{className:"relative min-h-screen bg-gray-100 p-8",children:[v.jsx("button",{type:"button",onClick:()=>n("/dashboard"),className:"absolute top-4 left-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:"ไปที่แดชบอร์ด"}),v.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded-lg shadow-lg",children:[v.jsx("h1",{className:"text-2xl font-bold mb-4",children:"แก้ไขโปรไฟล์"}),m?v.jsx("img",{src:m,alt:"Profile",className:"w-32 h-32 rounded-full mx-auto mb-4"}):v.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-300 flex items-center justify-center mx-auto mb-4",children:v.jsx("span",{className:"text-2xl text-white",children:"N/A"})}),O?v.jsxs("form",{onSubmit:Q,children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),v.jsx("input",{type:"email",value:s.email||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-200 cursor-not-allowed"})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),v.jsx("input",{type:"text",value:u,onChange:z=>f(z.target.value),placeholder:"กรอกชื่อของคุณ",className:"w-full px-3 py-2 border rounded-lg",required:!0})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),v.jsx("input",{type:"text",value:m,onChange:z=>p(z.target.value),placeholder:"กรอก URL รูปโปรไฟล์",className:"w-full px-3 py-2 border rounded-lg"})]}),R&&v.jsx("div",{className:"mb-4 text-green-500",children:R}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("button",{type:"submit",disabled:y,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:y?"กำลังบันทึก...":"บันทึกการเปลี่ยนแปลง"}),v.jsx("button",{type:"button",onClick:()=>{P(!1),C("")},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-300",children:"ยกเลิก"})]})]}):v.jsxs("div",{children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),v.jsx("p",{className:"px-3 py-2 border rounded-lg bg-gray-200",children:s.email})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),v.jsx("p",{className:"px-3 py-2 border rounded-lg",children:u})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),v.jsx("p",{className:"px-3 py-2 border rounded-lg",children:m})]}),v.jsx("button",{type:"button",onClick:()=>{P(!0),C("")},className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition duration-300",children:"แก้ไขโปรไฟล์"})]})]})]}):v.jsx("div",{className:"min-h-screen flex items-center justify-center",children:v.jsx("p",{children:"ผู้ใช้ยังไม่ได้เข้าสู่ระบบ."})})}function TI(){const{cid:i}=zm(),e=jr(),n=_s(),s=pa(fr),o=n.currentUser,[u,f]=V.useState(null),[m,p]=V.useState(""),[y,E]=V.useState(""),[R,C]=V.useState(""),[O,P]=V.useState(""),[Q,z]=V.useState([]),[$,te]=V.useState([]),[W,pe]=V.useState(!1),[ue,be]=V.useState(""),[k,A]=V.useState(""),[S,x]=V.useState([]),[D,L]=V.useState("");V.useEffect(()=>{if(i){const he=tt(s,"classroom",i);hr(he).then(ge=>{if(ge.exists()){const ce=ge.data();if(ce.owner!==o.uid){be("สิทธิ์ไม่พอ คุณไม่ใช่เจ้าของห้องเรียนนี้.");return}f(ce),p(ce.info.code),E(ce.info.name),C(ce.info.photo),P(ce.info.room)}else be("ไม่พบห้องเรียน.")}).catch(ge=>{console.error(ge),be("เกิดข้อผิดพลาดในการดึงข้อมูลห้องเรียน.")});const Re=$t(s,"classroom",i,"students");Yt(Re).then(ge=>{const ce=[];ge.forEach(Oe=>{ce.push({id:Oe.id,...Oe.data()})}),z(ce)}).catch(ge=>console.error("เกิดข้อผิดพลาดในการดึงนักเรียน: ",ge));const se=$t(s,"classroom",i,"checkin");Yt(se).then(ge=>{const ce=[];ge.forEach(Oe=>{ce.push({id:Oe.id,...Oe.data()})}),te(ce)}).catch(ge=>console.error("เกิดข้อผิดพลาดในการดึงกิจกรรมเช็คอิน: ",ge))}},[i,o.uid,s]),V.useEffect(()=>{(async()=>{try{const Re=$t(s,"users"),se=bh(Re,Eh("classroom.status","==",2)),ge=await Yt(se),ce=[];ge.forEach(Oe=>{ce.push({id:Oe.id,...Oe.data()})}),x(ce)}catch(Re){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลผู้ใช้: ",Re)}})()},[s]);const I=async he=>{he.preventDefault(),pe(!0),A("");try{const Re=tt(s,"classroom",i);await ru(Re,{"info.code":m,"info.name":y,"info.photo":R,"info.room":O}),A("แก้ไขห้องเรียนสำเร็จแล้ว.")}catch(Re){console.error("เกิดข้อผิดพลาดในการแก้ไขห้องเรียน: ",Re),A("แก้ไขห้องเรียนไม่สำเร็จ.")}pe(!1)};return ue?v.jsx("div",{className:"p-6 text-red-600 text-center",children:ue}):u?v.jsxs("div",{className:"min-h-screen bg-blue-50 p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน: ",u.info.name]}),v.jsx("button",{onClick:()=>e("/dashboard"),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition",children:"กลับไปที่แดชบอร์ด"})]}),v.jsxs("div",{className:"mb-8",children:[v.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"นักเรียนที่ลงทะเบียน"}),Q.length>0?v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full border",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-blue-100",children:[v.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),v.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),v.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),v.jsx("tbody",{children:Q.map(he=>v.jsxs("tr",{className:"hover:bg-blue-50",children:[v.jsx("td",{className:"border p-2",children:he.stdid}),v.jsx("td",{className:"border p-2",children:he.name}),v.jsx("td",{className:"border p-2",children:he.status===0?"รออนุมัติ":"ตรวจสอบแล้ว"})]},he.id))})]})}):v.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนที่ลงทะเบียน"})]}),v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-8",children:[v.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"เพิ่มนักเรียน"}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-1",children:"เลือกนักเรียน"}),v.jsxs("select",{value:D,onChange:he=>L(he.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:[v.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),S.map(he=>v.jsxs("option",{value:he.id,children:[he.name," (",he.email,")"]},he.id))]})]}),v.jsx("button",{onClick:async()=>{if(!D)return;const he=S.find(Re=>Re.id===D);if(he)try{const Re=tt(s,"classroom",i,"students",he.id);await lr(Re,{stdid:he.id,name:he.name,status:1}),z([...Q,{id:he.id,stdid:he.id,name:he.name,status:1}]),A("เพิ่มนักเรียนสำเร็จแล้ว."),L("")}catch(Re){console.error("เกิดข้อผิดพลาดในการเพิ่มนักเรียน: ",Re),A("เพิ่มนักเรียนไม่สำเร็จ.")}},className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"เพิ่มนักเรียน"})]}),v.jsxs("div",{className:"mb-8",children:[v.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"กิจกรรมเช็คอิน"}),$.length>0?v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full border",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-blue-100",children:[v.jsx("th",{className:"border p-2 text-left",children:"หมายเลขเช็คอิน"}),v.jsx("th",{className:"border p-2 text-left",children:"รหัส"}),v.jsx("th",{className:"border p-2 text-left",children:"วันที่"}),v.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),v.jsx("tbody",{children:$.map(he=>v.jsxs("tr",{className:"hover:bg-blue-50",children:[v.jsx("td",{className:"border p-2",children:he.id}),v.jsx("td",{className:"border p-2",children:he.code}),v.jsx("td",{className:"border p-2",children:he.date}),v.jsx("td",{className:"border p-2",children:he.status===0?"ยังไม่เริ่ม":he.status===1?"กำลังดำเนินการ":"เสร็จสิ้น"})]},he.id))})]})}):v.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีกิจกรรมเช็คอิน"})]}),v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[v.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"แก้ไขรายละเอียดห้องเรียน"}),v.jsxs("form",{onSubmit:I,children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-1",children:"รหัสวิชา"}),v.jsx("input",{type:"text",value:m,onChange:he=>p(he.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อวิชา"}),v.jsx("input",{type:"text",value:y,onChange:he=>E(he.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-1",children:"URL รูปภาพ"}),v.jsx("input",{type:"text",value:R,onChange:he=>C(he.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อห้องเรียน"}),v.jsx("input",{type:"text",value:O,onChange:he=>P(he.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),v.jsx("button",{type:"submit",disabled:W,className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:W?"กำลังแก้ไข...":"บันทึกการแก้ไข"}),k&&v.jsx("p",{className:"mt-4 text-green-600 text-center",children:k})]})]})]}):v.jsx("div",{className:"p-6 text-center",children:"กำลังโหลดข้อมูลห้องเรียน..."})}function wI(){var k;const i=_s(fr),e=pa(fr),n=i.currentUser,s=jr(),[o,u]=V.useState([]),[f,m]=V.useState(null),[p,y]=V.useState(!0),[E,R]=V.useState(null),[C,O]=V.useState([]),[P,Q]=V.useState({}),[z,$]=V.useState(!1);V.useEffect(()=>{if(!n){s("/");return}const A=async()=>{try{const x=tt(e,"users",n.uid),D=await hr(x);D.exists()&&m(D.data())}catch(x){console.error("Error loading user profile:",x)}},S=async()=>{try{y(!0);const x=bh(Y2(e,"students"),Eh("stdid","==",n.uid)),D=await Yt(x),L=[];D.forEach(Re=>{const se=Re.ref.parent.parent;se&&L.push(hr(se))});const he=(await Promise.all(L)).map(Re=>({id:Re.id,...Re.data()}));u(he)}catch(x){console.error("Error loading classrooms:",x)}finally{y(!1)}};A(),S()},[n,e,s]);const te=async()=>{try{await i.signOut(),s("/")}catch(A){console.error("Error signing out:",A)}},W=async A=>{y(!0);try{R(A),Q({});const S=await Yt($t(e,"classroom",A.id,"checkin"));let x=[];for(const D of S.docs){const L=D.data(),I=$t(e,"classroom",A.id,"checkin",D.id,"question");(await Yt(I)).forEach(Re=>{const se=Re.data();se.question_show&&x.push({checkinId:D.id,checkinCode:L.code||"-",questionDocId:Re.id,...se})})}x.sort((D,L)=>(D.question_no||0)-(L.question_no||0)),O(x)}catch(S){console.error("Error loading quiz:",S)}finally{y(!1)}},pe=()=>{R(null),O([]),Q({})},ue=(A,S)=>{Q(x=>({...x,[A]:S}))},be=async A=>{const S=P[A.questionDocId]||"";if(!S.trim()){alert("Please enter an answer or select a choice");return}try{const x=tt(e,"classroom",E.id,"checkin",A.checkinId,"answers",String(A.question_no));await lr(x,{text:A.question_text},{merge:!0});const D=tt(x,"students",n.uid),L=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await lr(D,{time:L,answer:S}),alert("Answer submitted!")}catch(x){console.error("Error submitting answer:",x),alert("Failed to submit answer.")}};return n?v.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[v.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-3xl font-bold mb-6",children:"Student Classroom"}),v.jsx("div",{className:"mb-4",children:E?v.jsx("button",{onClick:pe,className:"hover:text-blue-300 transition",children:"กลับสู่รายการห้องเรียน"}):v.jsx("button",{onClick:()=>s("/student-dashboard"),className:"hover:text-blue-300 transition",children:"ห้องเรียนของฉัน"})})]}),v.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700",children:[f&&f.photo?v.jsx("img",{src:f.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):v.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:v.jsx("span",{className:"text-lg text-white",children:"N/A"})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-bold",children:(f==null?void 0:f.name)||n.email}),v.jsx("p",{className:"text-sm",children:"Status : Student"})]})]})]}),v.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[E?v.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน : ",((k=E.info)==null?void 0:k.name)||"Unknown"]}):v.jsx("h1",{className:"text-3xl font-bold text-blue-900",children:"ห้องเรียนของฉัน"}),v.jsx("button",{onClick:()=>$(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),p&&v.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"Loading..."}),!p&&!E&&v.jsx(v.Fragment,{children:o.length===0?v.jsx("p",{className:"text-center text-gray-600",children:"คุณยังไม่ได้อยู่ในห้องเรียนใด ๆ"}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(A=>{const S=A.info||{};return v.jsxs("div",{className:"border rounded-lg shadow-md p-4 bg-white hover:shadow-xl transition cursor-pointer",onClick:()=>W(A),children:[S.photo?v.jsx("img",{src:S.photo,alt:S.name,className:"w-full h-40 object-cover rounded-md mb-4"}):v.jsx("div",{className:"w-full h-40 bg-blue-300 flex items-center justify-center rounded-md mb-4",children:v.jsx("span",{className:"text-white",children:"No Image"})}),v.jsx("h2",{className:"text-xl font-bold text-blue-900",children:S.name}),v.jsxs("p",{className:"text-blue-700 text-lg",children:["Code : ",S.code]}),v.jsxs("p",{className:"text-blue-700 text-lg",children:["Room : ",S.room]})]},A.id)})})}),!p&&E&&v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-blue-900",children:"แบบทดสอบ (Quiz)"}),C.length===0?v.jsx("p",{className:"text-gray-600",children:"ยังไม่มีควิซ (question_show = true)"}):v.jsx("div",{className:"space-y-6",children:C.map(A=>{const S=P[A.questionDocId]||"";return v.jsxs("div",{className:"border p-4 rounded-md hover:bg-blue-50 transition",children:[v.jsxs("p",{className:"font-semibold mb-2 text-blue-900",children:["คำถาม #",A.question_no," [",A.checkinCode||"-","] : ",A.question_text]}),A.question_type==="objective"&&Array.isArray(A.choices)&&A.choices.length>0?v.jsx("div",{className:"flex flex-col space-y-2 mb-2",children:A.choices.map((x,D)=>v.jsxs("label",{className:"flex items-center space-x-2",children:[v.jsx("input",{type:"radio",name:`q_${A.questionDocId}`,value:x,checked:S===x,onChange:L=>ue(A.questionDocId,L.target.value)}),v.jsx("span",{children:x})]},D))}):v.jsx("input",{type:"text",placeholder:"Type your answer here...",className:"w-full p-2 border rounded mb-2",value:S,onChange:x=>ue(A.questionDocId,x.target.value)}),v.jsx("button",{onClick:()=>be(A),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"ส่งคำตอบ"})]},A.questionDocId)})})]}),z&&v.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[v.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),v.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:v.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:v.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[v.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:v.jsxs("div",{className:"sm:flex sm:items-start",children:[v.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:v.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),v.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[v.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),v.jsx("div",{className:"mt-2",children:v.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),v.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[v.jsx("button",{type:"button",onClick:()=>{$(!1),te()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),v.jsx("button",{type:"button",onClick:()=>$(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]})]})]}):null}function SI(){const i=jr(),e=_s(),n=pa(fr),{classroomId:s}=zm(),[o]=gA(),u=o.get("checkinId")||"",[f,m]=V.useState(null),[p,y]=V.useState([]),[E,R]=V.useState(""),[C,O]=V.useState(""),[P,Q]=V.useState(!1),[z,$]=V.useState("subjective"),[te,W]=V.useState([""]),[pe,ue]=V.useState(null),[be,k]=V.useState(null),[A,S]=V.useState([]),[x,D]=V.useState(!1),[L,I]=V.useState(!1),he=e.currentUser;V.useEffect(()=>{async function ie(){if(he){const me=tt(n,"users",he.uid),Se=await hr(me);Se.exists()&&m(Se.data())}}ie()},[he,n]),V.useEffect(()=>{async function ie(){if(!(!s||!u))try{const me=$t(n,"classroom",s,"checkin",u,"question"),Se=await Yt(me),Te=[];Se.forEach(Fe=>{Te.push({id:Fe.id,...Fe.data()})}),Te.sort((Fe,Ot)=>Fe.question_no-Ot.question_no),y(Te)}catch(me){console.error("Error loading questions:",me)}}ie()},[n,s,u]);const Re=async()=>{if(!s||!u){alert("ไม่พบ classroomId หรือ checkinId");return}if(!E||!C){alert("กรุณากรอกหมายเลขและข้อความคำถาม");return}try{const ie=pe||dT(),me=tt(n,"classroom",s,"checkin",u,"question",ie);await lr(me,{question_no:parseInt(E,10),question_text:C,question_show:P,question_type:z,choices:z==="objective"?te.filter(Fe=>Fe.trim()!==""):[]}),alert(pe?"แก้ไขคำถามสำเร็จ":"สร้างคำถามสำเร็จ"),R(""),O(""),Q(!1),$("subjective"),W([""]),ue(null);const Se=await Yt($t(n,"classroom",s,"checkin",u,"question")),Te=[];Se.forEach(Fe=>{Te.push({id:Fe.id,...Fe.data()})}),Te.sort((Fe,Ot)=>Fe.question_no-Ot.question_no),y(Te)}catch(ie){console.error("Error saving question:",ie),alert("เกิดข้อผิดพลาดในการบันทึกคำถาม")}},se=ie=>{ue(ie.id),R(ie.question_no),O(ie.question_text),Q(ie.question_show),$(ie.question_type||"subjective"),ie.choices&&Array.isArray(ie.choices)?W(ie.choices):W([""])},ge=async ie=>{if(window.confirm("คุณแน่ใจหรือไม่ที่จะลบคำถามนี้?"))try{await ql(tt(n,"classroom",s,"checkin",u,"question",ie)),alert("ลบคำถามสำเร็จ"),y(me=>me.filter(Se=>Se.id!==ie))}catch(me){console.error("Error deleting question:",me),alert("ไม่สามารถลบคำถามได้")}},ce=async ie=>{try{const me=tt(n,"classroom",s,"checkin",u,"question",ie.id);await ru(me,{question_show:!ie.question_show}),y(Se=>Se.map(Te=>Te.id===ie.id?{...Te,question_show:!ie.question_show}:Te))}catch(me){console.error("Error toggling question_show:",me)}},Oe=()=>{W(ie=>[...ie,""])},M=(ie,me)=>{W(Se=>{const Te=[...Se];return Te[ie]=me,Te})},re=ie=>{W(me=>{const Se=[...me];return Se.splice(ie,1),Se})},fe=async ie=>{if(!s||!u){alert("ไม่พบ classroomId หรือ checkinId");return}const me=String(ie.question_no);k(ie),S([]),D(!0);try{const Se=tt(n,"classroom",s,"checkin",u,"answers",me);await lr(Se,{text:ie.question_text},{merge:!0});const Te=$t(Se,"students"),Fe=await Yt(Te),Ot=[];for(const Xt of Fe.docs){const xn=Xt.data(),pn=Xt.id,ln=tt(n,"classroom",s,"checkin",u,"students",pn),er=await hr(ln);let En="(ไม่มีชื่อ)";er.exists()&&(En=er.data().name||"(ไม่มีชื่อ)"),Ot.push({studentDocId:pn,name:En,...xn})}S(Ot)}catch(Se){console.error("Error loading student answers:",Se),alert("ไม่สามารถโหลดคำตอบนักเรียนได้")}finally{D(!1)}},le=()=>{k(null),S([])},de=(ie,me)=>{S(Se=>{const Te=[...Se];return Te[ie]={...Te[ie],score:me},Te})},ke=async ie=>{if(!be)return;const me=A[ie],Se=String(be.question_no);if(me.score==null||me.score===""){alert("กรุณากรอกคะแนนให้ถูกต้อง");return}try{const Te=tt(n,"classroom",s,"checkin",u,"answers",Se),Fe=tt(Te,"students",me.studentDocId);await ru(Fe,{score:Number(me.score)}),alert(`บันทึกคะแนนสำเร็จสำหรับนักเรียน: ${me.studentDocId}`)}catch(Te){console.error("Error saving score:",Te),alert("ไม่สามารถบันทึกคะแนนได้")}},Ce=async()=>{try{await wb(e),i("/")}catch(ie){console.error("Error signing out:",ie)}};return v.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[v.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-4xl font-ChakraPetchTH mb-8",children:"สร้างควิซ"}),v.jsx("ul",{className:"space-y-4",children:v.jsx("li",{children:v.jsx("button",{onClick:()=>i("/dashboard"),className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"กลับไปแดชบอร์ด"})})})]}),v.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",onClick:()=>i("/edit-profile"),children:[f&&f.photo?v.jsx("img",{src:f.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):v.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:v.jsx("span",{className:"text-lg text-white",children:"N/A"})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-bold font-ChakraPetchTH",children:(f==null?void 0:f.name)||(he==null?void 0:he.email)||"User"}),he&&v.jsx("p",{className:"text-blue-200 text-sm font-ChakraPetchTH",children:he.email})]})]})]}),v.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"สร้าง/จัดการควิซ"}),v.jsx("button",{onClick:()=>I(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition font-ChakraPetchTH",children:"ออกจากระบบ"})]}),v.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[v.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["รหัสห้องเรียน: ",s||"N/A"," | รหัสเช็คอิน: ",u||"N/A"]}),v.jsxs("div",{className:"mb-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[v.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:pe?`แก้ไขคำถาม (ID: ${pe})`:"สร้างคำถามใหม่"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"หมายเลขคำถาม"}),v.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:E,onChange:ie=>R(ie.target.value)})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"แสดงคำถาม?"}),v.jsx("input",{type:"checkbox",checked:P,onChange:ie=>Q(ie.target.checked),className:"h-5 w-5 text-blue-600"})]})]}),v.jsxs("div",{className:"mt-4",children:[v.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ประเภทคำถาม"}),v.jsxs("select",{className:"p-2 border rounded",value:z,onChange:ie=>$(ie.target.value),children:[v.jsx("option",{value:"subjective",children:"อัตนัย"}),v.jsx("option",{value:"objective",children:"ปรนัย"})]})]}),v.jsxs("div",{className:"mt-4",children:[v.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ข้อความคำถาม"}),v.jsx("textarea",{className:"w-full p-2 border rounded",rows:2,value:C,onChange:ie=>O(ie.target.value)})]}),z==="objective"&&v.jsxs("div",{className:"mt-4",children:[v.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ตัวเลือก"}),te.map((ie,me)=>v.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[v.jsx("input",{type:"text",className:"flex-1 p-2 border rounded",value:ie,onChange:Se=>M(me,Se.target.value),placeholder:`ตัวเลือกที่ ${me+1}`}),te.length>1&&v.jsx("button",{onClick:()=>re(me),className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition",children:"X"})]},me)),v.jsx("button",{onClick:Oe,className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH",children:"เพิ่มตัวเลือก"})]}),v.jsxs("div",{className:"mt-4",children:[v.jsx("button",{onClick:Re,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH mr-2",children:pe?"อัปเดตคำถาม":"บันทึกคำถาม"}),pe&&v.jsx("button",{onClick:()=>{ue(null),R(""),O(""),Q(!1),$("subjective"),W([""])},className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH",children:"ยกเลิก"})]})]}),v.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-2 text-blue-900",children:"รายการคำถาม"}),p.length===0?v.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำถาม"}):v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full border",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-blue-100",children:[v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ลำดับ"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ข้อความคำถาม"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ประเภท"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"แสดง?"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"การดำเนินการ"})]})}),v.jsx("tbody",{children:p.map(ie=>v.jsxs("tr",{className:"hover:bg-blue-50",children:[v.jsx("td",{className:"border p-2",children:ie.question_no}),v.jsx("td",{className:"border p-2",children:ie.question_text}),v.jsx("td",{className:"border p-2",children:ie.question_type==="objective"?"ปรนัย":"อัตนัย"}),v.jsx("td",{className:"border p-2",children:ie.question_show?"ใช่":"ไม่ใช่"}),v.jsxs("td",{className:"border p-2",children:[v.jsx("button",{onClick:()=>se(ie),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition font-ChakraPetchTH mr-2",children:"แก้ไข"}),v.jsx("button",{onClick:()=>ce(ie),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition font-ChakraPetchTH mr-2",children:"สลับแสดง"}),v.jsx("button",{onClick:()=>ge(ie.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition font-ChakraPetchTH mr-2",children:"ลบ"}),v.jsx("button",{onClick:()=>fe(ie),className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition font-ChakraPetchTH",children:"ให้คะแนน"})]})]},ie.id))})]})}),be&&v.jsxs("div",{className:"mt-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h3",{className:"text-lg font-ChakraPetchTH",children:["คำตอบนักเรียนสำหรับคำถามที่ #",be.question_no]}),v.jsx("button",{onClick:le,className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH",children:"ปิด"})]}),x?v.jsx("p",{className:"font-ChakraPetchTH",children:"กำลังโหลดคำตอบ..."}):A.length===0?v.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำตอบนักเรียน"}):v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full border",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-blue-100",children:[v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คำตอบ"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"เวลา"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คะแนน"}),v.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ดำเนินการ"})]})}),v.jsx("tbody",{children:A.map((ie,me)=>v.jsxs("tr",{className:"hover:bg-blue-50",children:[v.jsx("td",{className:"border p-2",children:ie.studentDocId}),v.jsx("td",{className:"border p-2",children:ie.name}),v.jsx("td",{className:"border p-2",children:ie.answer||"-"}),v.jsx("td",{className:"border p-2",children:ie.time||"-"}),v.jsx("td",{className:"border p-2",children:v.jsx("input",{type:"number",className:"w-20 p-1 border rounded",value:ie.score||"",onChange:Se=>de(me,Se.target.value)})}),v.jsx("td",{className:"border p-2",children:v.jsx("button",{onClick:()=>ke(me),className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH",children:"บันทึก"})})]},ie.studentDocId))})]})})]})]})]}),L&&v.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[v.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),v.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:v.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:v.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[v.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:v.jsxs("div",{className:"sm:flex sm:items-start",children:[v.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:v.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),v.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[v.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),v.jsx("div",{className:"mt-2",children:v.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),v.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[v.jsx("button",{type:"button",onClick:()=>{I(!1),Ce()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),v.jsx("button",{type:"button",onClick:()=>I(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]})]})}function AI(){const i=pa(fr),e=_s(fr),n=e.currentUser,s=jr(),{classroomId:o}=zm(),[u,f]=V.useState(null),[m,p]=V.useState(null),[y,E]=V.useState([]),[R,C]=V.useState(!0);V.useEffect(()=>{if(!n){s("/");return}(async()=>{try{const Q=tt(i,"users",n.uid),z=await hr(Q);z.exists()&&f(z.data());const $=tt(i,"classroom",o),te=await hr($);te.exists()&&p(te.data().info||{});const W=$t(i,"classroom",o,"checkin"),pe=await Yt(W);let ue=[];for(const be of pe.docs){const k=be.id,A=$t(i,"classroom",o,"checkin",k,"question");(await Yt(A)).forEach(x=>{const D=x.data();D.question_show===!0&&ue.push({checkinId:k,id:x.id,question_no:D.question_no,question_text:D.question_text,question_show:D.question_show})})}ue.sort((be,k)=>be.question_no-k.question_no),E(ue)}catch(Q){console.error("Error loading data for student detail:",Q)}finally{C(!1)}})()},[i,n,s,o]);const O=async()=>{try{await e.signOut(),s("/")}catch(P){console.error("Error signing out:",P)}};return n?R?v.jsx("div",{children:"Loading..."}):v.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[v.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-2xl mb-6",children:"Student Classroom"}),v.jsx("button",{onClick:()=>s("/student-dashboard"),className:"hover:text-blue-300 transition",children:"Back to My Classes"})]}),v.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",children:[u&&u.photo?v.jsx("img",{src:u.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):v.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:v.jsx("span",{className:"text-lg text-white",children:"N/A"})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-bold",children:(u==null?void 0:u.name)||n.email}),v.jsx("p",{className:"text-sm",children:"Status: Student"})]})]})]}),v.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h1",{className:"text-3xl",children:[(m==null?void 0:m.name)||"Unknown"," - Quiz"]}),v.jsx("button",{onClick:O,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Sign Out"})]}),v.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[v.jsx("h2",{className:"text-xl font-bold mb-4",children:"Questions (ที่ question_show = true)"}),y.length===0?v.jsx("p",{children:"No questions yet."}):v.jsx("ul",{className:"space-y-2",children:y.map(P=>v.jsxs("li",{className:"border p-2 rounded hover:bg-blue-50",children:[v.jsxs("span",{className:"font-semibold",children:["Question #",P.question_no,":"]})," ",P.question_text,v.jsxs("span",{className:"ml-4 italic text-sm text-gray-500",children:["(Checkin: ",P.checkinId,")"]})]},`${P.checkinId}-${P.id}`))})]})]})]}):null}function xI(){return v.jsx(hA,{children:v.jsxs(zS,{children:[v.jsx(hi,{path:"/",element:v.jsx(pI,{})}),v.jsx(hi,{path:"/dashboard",element:v.jsx(bI,{})}),v.jsx(hi,{path:"/student-dashboard",element:v.jsx(wI,{})}),v.jsx(hi,{path:"/edit-profile",element:v.jsx(EI,{})}),v.jsx(hi,{path:"/edit-classroom/:cid",element:v.jsx(TI,{})}),v.jsx(hi,{path:"/create-quiz/:classroomId",element:v.jsx(SI,{})}),v.jsx(hi,{path:"/student-classroom/:classroomId",element:v.jsx(AI,{})}),v.jsx(hi,{path:"*",element:v.jsx(US,{to:"/",replace:!0})})]})})}Yw.createRoot(document.getElementById("root")).render(v.jsx(Hw.StrictMode,{children:v.jsx(xI,{})}));
