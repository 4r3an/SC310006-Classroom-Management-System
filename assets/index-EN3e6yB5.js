function WA(i,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in i)){const f=Object.getOwnPropertyDescriptor(a,c);f&&Object.defineProperty(i,c,f.get?f:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function t(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=t(c);fetch(c.href,f)}})();var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var U0={exports:{}},su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2;function KA(){if(S2)return su;S2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,c,f){var x=null;if(f!==void 0&&(x=""+f),c.key!==void 0&&(x=""+c.key),"key"in c){f={};for(var v in c)v!=="key"&&(f[v]=c[v])}else f=c;return c=f.ref,{$$typeof:i,type:a,key:x,ref:c!==void 0?c:null,props:f}}return su.Fragment=e,su.jsx=t,su.jsxs=t,su}var I2;function ZA(){return I2||(I2=1,U0.exports=KA()),U0.exports}var I=ZA(),V0={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2;function $A(){if(N2)return St;N2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),x=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.iterator;function k(K){return K===null||typeof K!="object"?null:(K=R&&K[R]||K["@@iterator"],typeof K=="function"?K:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,J={};function W(K,ve,Fe){this.props=K,this.context=ve,this.refs=J,this.updater=Fe||j}W.prototype.isReactComponent={},W.prototype.setState=function(K,ve){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ve,"setState")},W.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function he(){}he.prototype=W.prototype;function fe(K,ve,Fe){this.props=K,this.context=ve,this.refs=J,this.updater=Fe||j}var re=fe.prototype=new he;re.constructor=fe,G(re,W.prototype),re.isPureReactComponent=!0;var _e=Array.isArray,je={H:null,A:null,T:null,S:null},Ue=Object.prototype.hasOwnProperty;function z(K,ve,Fe,Ge,Oe,ot){return Fe=ot.ref,{$$typeof:i,type:K,key:ve,ref:Fe!==void 0?Fe:null,props:ot}}function F(K,ve){return z(K.type,ve,void 0,void 0,void 0,K.props)}function P(K){return typeof K=="object"&&K!==null&&K.$$typeof===i}function Y(K){var ve={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Fe){return ve[Fe]})}var Z=/\/+/g;function $(K,ve){return typeof K=="object"&&K!==null&&K.key!=null?Y(""+K.key):ve.toString(36)}function X(){}function Me(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(X,X):(K.status="pending",K.then(function(ve){K.status==="pending"&&(K.status="fulfilled",K.value=ve)},function(ve){K.status==="pending"&&(K.status="rejected",K.reason=ve)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function ae(K,ve,Fe,Ge,Oe){var ot=typeof K;(ot==="undefined"||ot==="boolean")&&(K=null);var Le=!1;if(K===null)Le=!0;else switch(ot){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(K.$$typeof){case i:case e:Le=!0;break;case C:return Le=K._init,ae(Le(K._payload),ve,Fe,Ge,Oe)}}if(Le)return Oe=Oe(K),Le=Ge===""?"."+$(K,0):Ge,_e(Oe)?(Fe="",Le!=null&&(Fe=Le.replace(Z,"$&/")+"/"),ae(Oe,ve,Fe,"",function(nt){return nt})):Oe!=null&&(P(Oe)&&(Oe=F(Oe,Fe+(Oe.key==null||K&&K.key===Oe.key?"":(""+Oe.key).replace(Z,"$&/")+"/")+Le)),ve.push(Oe)),1;Le=0;var ke=Ge===""?".":Ge+":";if(_e(K))for(var He=0;He<K.length;He++)Ge=K[He],ot=ke+$(Ge,He),Le+=ae(Ge,ve,Fe,ot,Oe);else if(He=k(K),typeof He=="function")for(K=He.call(K),He=0;!(Ge=K.next()).done;)Ge=Ge.value,ot=ke+$(Ge,He++),Le+=ae(Ge,ve,Fe,ot,Oe);else if(ot==="object"){if(typeof K.then=="function")return ae(Me(K),ve,Fe,Ge,Oe);throw ve=String(K),Error("Objects are not valid as a React child (found: "+(ve==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ve)+"). If you meant to render a collection of children, use an array instead.")}return Le}function Ne(K,ve,Fe){if(K==null)return K;var Ge=[],Oe=0;return ae(K,Ge,"","",function(ot){return ve.call(Fe,ot,Oe++)}),Ge}function me(K){if(K._status===-1){var ve=K._result;ve=ve(),ve.then(function(Fe){(K._status===0||K._status===-1)&&(K._status=1,K._result=Fe)},function(Fe){(K._status===0||K._status===-1)&&(K._status=2,K._result=Fe)}),K._status===-1&&(K._status=0,K._result=ve)}if(K._status===1)return K._result.default;throw K._result}var be=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ve=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ve))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Xe(){}return St.Children={map:Ne,forEach:function(K,ve,Fe){Ne(K,function(){ve.apply(this,arguments)},Fe)},count:function(K){var ve=0;return Ne(K,function(){ve++}),ve},toArray:function(K){return Ne(K,function(ve){return ve})||[]},only:function(K){if(!P(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},St.Component=W,St.Fragment=t,St.Profiler=c,St.PureComponent=fe,St.StrictMode=a,St.Suspense=_,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=je,St.act=function(){throw Error("act(...) is not supported in production builds of React.")},St.cache=function(K){return function(){return K.apply(null,arguments)}},St.cloneElement=function(K,ve,Fe){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Ge=G({},K.props),Oe=K.key,ot=void 0;if(ve!=null)for(Le in ve.ref!==void 0&&(ot=void 0),ve.key!==void 0&&(Oe=""+ve.key),ve)!Ue.call(ve,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&ve.ref===void 0||(Ge[Le]=ve[Le]);var Le=arguments.length-2;if(Le===1)Ge.children=Fe;else if(1<Le){for(var ke=Array(Le),He=0;He<Le;He++)ke[He]=arguments[He+2];Ge.children=ke}return z(K.type,Oe,void 0,void 0,ot,Ge)},St.createContext=function(K){return K={$$typeof:x,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:f,_context:K},K},St.createElement=function(K,ve,Fe){var Ge,Oe={},ot=null;if(ve!=null)for(Ge in ve.key!==void 0&&(ot=""+ve.key),ve)Ue.call(ve,Ge)&&Ge!=="key"&&Ge!=="__self"&&Ge!=="__source"&&(Oe[Ge]=ve[Ge]);var Le=arguments.length-2;if(Le===1)Oe.children=Fe;else if(1<Le){for(var ke=Array(Le),He=0;He<Le;He++)ke[He]=arguments[He+2];Oe.children=ke}if(K&&K.defaultProps)for(Ge in Le=K.defaultProps,Le)Oe[Ge]===void 0&&(Oe[Ge]=Le[Ge]);return z(K,ot,void 0,void 0,null,Oe)},St.createRef=function(){return{current:null}},St.forwardRef=function(K){return{$$typeof:v,render:K}},St.isValidElement=P,St.lazy=function(K){return{$$typeof:C,_payload:{_status:-1,_result:K},_init:me}},St.memo=function(K,ve){return{$$typeof:E,type:K,compare:ve===void 0?null:ve}},St.startTransition=function(K){var ve=je.T,Fe={};je.T=Fe;try{var Ge=K(),Oe=je.S;Oe!==null&&Oe(Fe,Ge),typeof Ge=="object"&&Ge!==null&&typeof Ge.then=="function"&&Ge.then(Xe,be)}catch(ot){be(ot)}finally{je.T=ve}},St.unstable_useCacheRefresh=function(){return je.H.useCacheRefresh()},St.use=function(K){return je.H.use(K)},St.useActionState=function(K,ve,Fe){return je.H.useActionState(K,ve,Fe)},St.useCallback=function(K,ve){return je.H.useCallback(K,ve)},St.useContext=function(K){return je.H.useContext(K)},St.useDebugValue=function(){},St.useDeferredValue=function(K,ve){return je.H.useDeferredValue(K,ve)},St.useEffect=function(K,ve){return je.H.useEffect(K,ve)},St.useId=function(){return je.H.useId()},St.useImperativeHandle=function(K,ve,Fe){return je.H.useImperativeHandle(K,ve,Fe)},St.useInsertionEffect=function(K,ve){return je.H.useInsertionEffect(K,ve)},St.useLayoutEffect=function(K,ve){return je.H.useLayoutEffect(K,ve)},St.useMemo=function(K,ve){return je.H.useMemo(K,ve)},St.useOptimistic=function(K,ve){return je.H.useOptimistic(K,ve)},St.useReducer=function(K,ve,Fe){return je.H.useReducer(K,ve,Fe)},St.useRef=function(K){return je.H.useRef(K)},St.useState=function(K){return je.H.useState(K)},St.useSyncExternalStore=function(K,ve,Fe){return je.H.useSyncExternalStore(K,ve,Fe)},St.useTransition=function(){return je.H.useTransition()},St.version="19.0.0",St}var R2;function P1(){return R2||(R2=1,V0.exports=$A()),V0.exports}var ne=P1();const pr=k1(ne);var j0={exports:{}},au={},F0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function JA(){return D2||(D2=1,function(i){function e(Ne,me){var be=Ne.length;Ne.push(me);e:for(;0<be;){var Xe=be-1>>>1,K=Ne[Xe];if(0<c(K,me))Ne[Xe]=me,Ne[be]=K,be=Xe;else break e}}function t(Ne){return Ne.length===0?null:Ne[0]}function a(Ne){if(Ne.length===0)return null;var me=Ne[0],be=Ne.pop();if(be!==me){Ne[0]=be;e:for(var Xe=0,K=Ne.length,ve=K>>>1;Xe<ve;){var Fe=2*(Xe+1)-1,Ge=Ne[Fe],Oe=Fe+1,ot=Ne[Oe];if(0>c(Ge,be))Oe<K&&0>c(ot,Ge)?(Ne[Xe]=ot,Ne[Oe]=be,Xe=Oe):(Ne[Xe]=Ge,Ne[Fe]=be,Xe=Fe);else if(Oe<K&&0>c(ot,be))Ne[Xe]=ot,Ne[Oe]=be,Xe=Oe;else break e}}return me}function c(Ne,me){var be=Ne.sortIndex-me.sortIndex;return be!==0?be:Ne.id-me.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;i.unstable_now=function(){return f.now()}}else{var x=Date,v=x.now();i.unstable_now=function(){return x.now()-v}}var _=[],E=[],C=1,R=null,k=3,j=!1,G=!1,J=!1,W=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function re(Ne){for(var me=t(E);me!==null;){if(me.callback===null)a(E);else if(me.startTime<=Ne)a(E),me.sortIndex=me.expirationTime,e(_,me);else break;me=t(E)}}function _e(Ne){if(J=!1,re(Ne),!G)if(t(_)!==null)G=!0,Me();else{var me=t(E);me!==null&&ae(_e,me.startTime-Ne)}}var je=!1,Ue=-1,z=5,F=-1;function P(){return!(i.unstable_now()-F<z)}function Y(){if(je){var Ne=i.unstable_now();F=Ne;var me=!0;try{e:{G=!1,J&&(J=!1,he(Ue),Ue=-1),j=!0;var be=k;try{t:{for(re(Ne),R=t(_);R!==null&&!(R.expirationTime>Ne&&P());){var Xe=R.callback;if(typeof Xe=="function"){R.callback=null,k=R.priorityLevel;var K=Xe(R.expirationTime<=Ne);if(Ne=i.unstable_now(),typeof K=="function"){R.callback=K,re(Ne),me=!0;break t}R===t(_)&&a(_),re(Ne)}else a(_);R=t(_)}if(R!==null)me=!0;else{var ve=t(E);ve!==null&&ae(_e,ve.startTime-Ne),me=!1}}break e}finally{R=null,k=be,j=!1}me=void 0}}finally{me?Z():je=!1}}}var Z;if(typeof fe=="function")Z=function(){fe(Y)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,X=$.port2;$.port1.onmessage=Y,Z=function(){X.postMessage(null)}}else Z=function(){W(Y,0)};function Me(){je||(je=!0,Z())}function ae(Ne,me){Ue=W(function(){Ne(i.unstable_now())},me)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ne){Ne.callback=null},i.unstable_continueExecution=function(){G||j||(G=!0,Me())},i.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<Ne?Math.floor(1e3/Ne):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_getFirstCallbackNode=function(){return t(_)},i.unstable_next=function(Ne){switch(k){case 1:case 2:case 3:var me=3;break;default:me=k}var be=k;k=me;try{return Ne()}finally{k=be}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Ne,me){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var be=k;k=Ne;try{return me()}finally{k=be}},i.unstable_scheduleCallback=function(Ne,me,be){var Xe=i.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Xe+be:Xe):be=Xe,Ne){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=be+K,Ne={id:C++,callback:me,priorityLevel:Ne,startTime:be,expirationTime:K,sortIndex:-1},be>Xe?(Ne.sortIndex=be,e(E,Ne),t(_)===null&&Ne===t(E)&&(J?(he(Ue),Ue=-1):J=!0,ae(_e,be-Xe))):(Ne.sortIndex=K,e(_,Ne),G||j||(G=!0,Me())),Ne},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(Ne){var me=k;return function(){var be=k;k=me;try{return Ne.apply(this,arguments)}finally{k=be}}}}(z0)),z0}var M2;function ev(){return M2||(M2=1,F0.exports=JA()),F0.exports}var H0={exports:{}},Jr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2;function tv(){if(O2)return Jr;O2=1;var i=P1();function e(_){var E="https://react.dev/errors/"+_;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)E+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+_+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(_,E,C){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:R==null?null:""+R,children:_,containerInfo:E,implementation:C}}var x=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(_,E){if(_==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return Jr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Jr.createPortal=function(_,E){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(e(299));return f(_,E,null,C)},Jr.flushSync=function(_){var E=x.T,C=a.p;try{if(x.T=null,a.p=2,_)return _()}finally{x.T=E,a.p=C,a.d.f()}},Jr.preconnect=function(_,E){typeof _=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,a.d.C(_,E))},Jr.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},Jr.preinit=function(_,E){if(typeof _=="string"&&E&&typeof E.as=="string"){var C=E.as,R=v(C,E.crossOrigin),k=typeof E.integrity=="string"?E.integrity:void 0,j=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;C==="style"?a.d.S(_,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:R,integrity:k,fetchPriority:j}):C==="script"&&a.d.X(_,{crossOrigin:R,integrity:k,fetchPriority:j,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},Jr.preinitModule=function(_,E){if(typeof _=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var C=v(E.as,E.crossOrigin);a.d.M(_,{crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&a.d.M(_)},Jr.preload=function(_,E){if(typeof _=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var C=E.as,R=v(C,E.crossOrigin);a.d.L(_,C,{crossOrigin:R,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},Jr.preloadModule=function(_,E){if(typeof _=="string")if(E){var C=v(E.as,E.crossOrigin);a.d.m(_,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else a.d.m(_)},Jr.requestFormReset=function(_){a.d.r(_)},Jr.unstable_batchedUpdates=function(_,E){return _(E)},Jr.useFormState=function(_,E,C){return x.H.useFormState(_,E,C)},Jr.useFormStatus=function(){return x.H.useHostTransitionStatus()},Jr.version="19.0.0",Jr}var L2;function nv(){if(L2)return H0.exports;L2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),H0.exports=tv(),H0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2;function rv(){if(k2)return au;k2=1;var i=ev(),e=P1(),t=nv();function a(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var f=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),j=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),_e=Symbol.for("react.memo_cache_sentinel"),je=Symbol.iterator;function Ue(n){return n===null||typeof n!="object"?null:(n=je&&n[je]||n["@@iterator"],typeof n=="function"?n:null)}var z=Symbol.for("react.client.reference");function F(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case v:return"Portal";case C:return"Profiler";case E:return"StrictMode";case J:return"Suspense";case W:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case j:return(n.displayName||"Context")+".Provider";case k:return(n._context.displayName||"Context")+".Consumer";case G:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case he:return s=n.displayName||null,s!==null?s:F(n.type)||"Memo";case fe:s=n._payload,n=n._init;try{return F(n(s))}catch{}}return null}var P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=Object.assign,Z,$;function X(n){if(Z===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);Z=s&&s[1]||"",$=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Z+n+$}var Me=!1;function ae(n,s){if(!n||Me)return"";Me=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(we){var pe=we}Reflect.construct(n,[],De)}else{try{De.call()}catch(we){pe=we}n.call(De.prototype)}}else{try{throw Error()}catch(we){pe=we}(De=n())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(we){if(we&&pe&&typeof we.stack=="string")return[we.stack,pe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=g.DetermineComponentFrameRoot(),M=b[0],U=b[1];if(M&&U){var Q=M.split(`
`),se=U.split(`
`);for(w=g=0;g<Q.length&&!Q[g].includes("DetermineComponentFrameRoot");)g++;for(;w<se.length&&!se[w].includes("DetermineComponentFrameRoot");)w++;if(g===Q.length||w===se.length)for(g=Q.length-1,w=se.length-1;1<=g&&0<=w&&Q[g]!==se[w];)w--;for(;1<=g&&0<=w;g--,w--)if(Q[g]!==se[w]){if(g!==1||w!==1)do if(g--,w--,0>w||Q[g]!==se[w]){var Ae=`
`+Q[g].replace(" at new "," at ");return n.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",n.displayName)),Ae}while(1<=g&&0<=w);break}}}finally{Me=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?X(u):""}function Ne(n){switch(n.tag){case 26:case 27:case 5:return X(n.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return n=ae(n.type,!1),n;case 11:return n=ae(n.type.render,!1),n;case 1:return n=ae(n.type,!0),n;default:return""}}function me(n){try{var s="";do s+=Ne(n),n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function be(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function Xe(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function K(n){if(be(n)!==n)throw Error(a(188))}function ve(n){var s=n.alternate;if(!s){if(s=be(n),s===null)throw Error(a(188));return s!==n?null:n}for(var u=n,g=s;;){var w=u.return;if(w===null)break;var b=w.alternate;if(b===null){if(g=w.return,g!==null){u=g;continue}break}if(w.child===b.child){for(b=w.child;b;){if(b===u)return K(w),n;if(b===g)return K(w),s;b=b.sibling}throw Error(a(188))}if(u.return!==g.return)u=w,g=b;else{for(var M=!1,U=w.child;U;){if(U===u){M=!0,u=w,g=b;break}if(U===g){M=!0,g=w,u=b;break}U=U.sibling}if(!M){for(U=b.child;U;){if(U===u){M=!0,u=b,g=w;break}if(U===g){M=!0,g=b,u=w;break}U=U.sibling}if(!M)throw Error(a(189))}}if(u.alternate!==g)throw Error(a(190))}if(u.tag!==3)throw Error(a(188));return u.stateNode.current===u?n:s}function Fe(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=Fe(n),s!==null)return s;n=n.sibling}return null}var Ge=Array.isArray,Oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},Le=[],ke=-1;function He(n){return{current:n}}function nt(n){0>ke||(n.current=Le[ke],Le[ke]=null,ke--)}function tt(n,s){ke++,Le[ke]=n.current,n.current=s}var ht=He(null),Pn=He(null),gt=He(null),cr=He(null);function vn(n,s){switch(tt(gt,s),tt(Pn,n),tt(ht,null),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?n2(s):0;break;default:if(n=n===8?s.parentNode:s,s=n.tagName,n=n.namespaceURI)n=n2(n),s=r2(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}nt(ht),tt(ht,s)}function Yn(){nt(ht),nt(Pn),nt(gt)}function cn(n){n.memoizedState!==null&&tt(cr,n);var s=ht.current,u=r2(s,n.type);s!==u&&(tt(Pn,n),tt(ht,u))}function Ct(n){Pn.current===n&&(nt(ht),nt(Pn)),cr.current===n&&(nt(cr),eu._currentValue=ot)}var At=Object.prototype.hasOwnProperty,yn=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Is=i.unstable_shouldYield,zi=i.unstable_requestPaint,sn=i.unstable_now,Ns=i.unstable_getCurrentPriorityLevel,Kt=i.unstable_ImmediatePriority,In=i.unstable_UserBlockingPriority,Nn=i.unstable_NormalPriority,Xn=i.unstable_LowPriority,Rs=i.unstable_IdlePriority,Ds=i.log,hs=i.unstable_setDisableYieldValue,an=null,Ve=null;function xn(n){if(Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(an,n,void 0,(n.current.flags&128)===128)}catch{}}function It(n){if(typeof Ds=="function"&&hs(n),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(an,n)}catch{}}var Nt=Math.clz32?Math.clz32:Js,Si=Math.log,Ms=Math.LN2;function Js(n){return n>>>=0,n===0?32:31-(Si(n)/Ms|0)|0}var vt=128,Cr=4194304;function Yr(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Or(n,s){var u=n.pendingLanes;if(u===0)return 0;var g=0,w=n.suspendedLanes,b=n.pingedLanes,M=n.warmLanes;n=n.finishedLanes!==0;var U=u&134217727;return U!==0?(u=U&~w,u!==0?g=Yr(u):(b&=U,b!==0?g=Yr(b):n||(M=U&~M,M!==0&&(g=Yr(M))))):(U=u&~w,U!==0?g=Yr(U):b!==0?g=Yr(b):n||(M=u&~M,M!==0&&(g=Yr(M)))),g===0?0:s!==0&&s!==g&&!(s&w)&&(w=g&-g,M=s&-s,w>=M||w===32&&(M&4194176)!==0)?s:g}function Qn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function de(n,s){switch(n){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var n=vt;return vt<<=1,!(vt&4194176)&&(vt=128),n}function pt(){var n=Cr;return Cr<<=1,!(Cr&62914560)&&(Cr=4194304),n}function xt(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function Je(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function En(n,s,u,g,w,b){var M=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var U=n.entanglements,Q=n.expirationTimes,se=n.hiddenUpdates;for(u=M&~u;0<u;){var Ae=31-Nt(u),De=1<<Ae;U[Ae]=0,Q[Ae]=-1;var pe=se[Ae];if(pe!==null)for(se[Ae]=null,Ae=0;Ae<pe.length;Ae++){var we=pe[Ae];we!==null&&(we.lane&=-536870913)}u&=~De}g!==0&&Xr(n,g,0),b!==0&&w===0&&n.tag!==0&&(n.suspendedLanes|=b&~(M&~s))}function Xr(n,s,u){n.pendingLanes|=s,n.suspendedLanes&=~s;var g=31-Nt(s);n.entangledLanes|=s,n.entanglements[g]=n.entanglements[g]|1073741824|u&4194218}function Hi(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var g=31-Nt(u),w=1<<g;w&s|n[g]&s&&(n[g]|=s),u&=~w}}function xr(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function Gi(){var n=Oe.p;return n!==0?n:(n=window.event,n===void 0?32:_2(n.type))}function rr(n,s){var u=Oe.p;try{return Oe.p=n,s()}finally{Oe.p=u}}var Qe=Math.random().toString(36).slice(2),Rn="__reactFiber$"+Qe,zn="__reactProps$"+Qe,Bn="__reactContainer$"+Qe,fi="__reactEvents$"+Qe,fs="__reactListeners$"+Qe,ii="__reactHandles$"+Qe,Qr="__reactResources$"+Qe,Os="__reactMarker$"+Qe;function ea(n){delete n[Rn],delete n[zn],delete n[fi],delete n[fs],delete n[ii]}function Wn(n){var s=n[Rn];if(s)return s;for(var u=n.parentNode;u;){if(s=u[Bn]||u[Rn]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=a2(n);n!==null;){if(u=n[Rn])return u;n=a2(n)}return s}n=u,u=n.parentNode}return null}function Dn(n){if(n=n[Rn]||n[Bn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Zt(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(a(33))}function ds(n){var s=n[Qr];return s||(s=n[Qr]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Jt(n){n[Os]=!0}var ta=new Set,Te={};function si(n,s){Lt(n,s),Lt(n+"Capture",s)}function Lt(n,s){for(Te[n]=s,n=0;n<s.length;n++)ta.add(s[n])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},kt={};function Rt(n){return At.call(kt,n)?!0:At.call(Ut,n)?!1:xc.test(n)?kt[n]=!0:(Ut[n]=!0,!1)}function qi(n,s,u){if(Rt(s))if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+u)}}function Yi(n,s,u){if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+u)}}function Wr(n,s,u,g){if(g===null)n.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(s,u,""+g)}}function Gt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ii(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ec(n){var s=Ii(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),g=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var w=u.get,b=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return w.call(this)},set:function(M){g=""+M,b.call(this,M)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function un(n){n._valueTracker||(n._valueTracker=Ec(n))}function di(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),g="";return n&&(g=Ii(n)?n.checked?"true":"false":n.value),n=g,n!==u?(s.setValue(n),!0):!1}function Ba(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Kr=/[\n"\\]/g;function mt(n){return n.replace(Kr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Mn(n,s,u,g,w,b,M,U){n.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.type=M:n.removeAttribute("type"),s!=null?M==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Gt(s)):n.value!==""+Gt(s)&&(n.value=""+Gt(s)):M!=="submit"&&M!=="reset"||n.removeAttribute("value"),s!=null?H(n,M,Gt(s)):u!=null?H(n,M,Gt(u)):g!=null&&n.removeAttribute("value"),w==null&&b!=null&&(n.defaultChecked=!!b),w!=null&&(n.checked=w&&typeof w!="function"&&typeof w!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?n.name=""+Gt(U):n.removeAttribute("name")}function ce(n,s,u,g,w,b,M,U){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.type=b),s!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||s!=null))return;u=u!=null?""+Gt(u):"",s=s!=null?""+Gt(s):u,U||s===n.value||(n.value=s),n.defaultValue=s}g=g??w,g=typeof g!="function"&&typeof g!="symbol"&&!!g,n.checked=U?n.checked:!!g,n.defaultChecked=!!g,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(n.name=M)}function H(n,s,u){s==="number"&&Ba(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function qe(n,s,u,g){if(n=n.options,s){s={};for(var w=0;w<u.length;w++)s["$"+u[w]]=!0;for(u=0;u<n.length;u++)w=s.hasOwnProperty("$"+n[u].value),n[u].selected!==w&&(n[u].selected=w),w&&g&&(n[u].defaultSelected=!0)}else{for(u=""+Gt(u),s=null,w=0;w<n.length;w++){if(n[w].value===u){n[w].selected=!0,g&&(n[w].defaultSelected=!0);return}s!==null||n[w].disabled||(s=n[w])}s!==null&&(s.selected=!0)}}function bn(n,s,u){if(s!=null&&(s=""+Gt(s),s!==n.value&&(n.value=s),u==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=u!=null?""+Gt(u):""}function ir(n,s,u,g){if(s==null){if(g!=null){if(u!=null)throw Error(a(92));if(Ge(g)){if(1<g.length)throw Error(a(93));g=g[0]}u=g}u==null&&(u=""),s=u}u=Gt(s),n.defaultValue=u,g=n.textContent,g===u&&g!==""&&g!==null&&(n.value=g)}function gi(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var Ro=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sr(n,s,u){var g=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":g?n.setProperty(s,u):typeof u!="number"||u===0||Ro.has(s)?s==="float"?n.cssFloat=u:n[s]=(""+u).trim():n[s]=u+"px"}function it(n,s,u){if(s!=null&&typeof s!="object")throw Error(a(62));if(n=n.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?n.setProperty(g,""):g==="float"?n.cssFloat="":n[g]="");for(var w in s)g=s[w],s.hasOwnProperty(w)&&u[w]!==g&&Sr(n,w,g)}else for(var b in s)s.hasOwnProperty(b)&&Sr(n,b,s[b])}function hn(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mi(n){return wc.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Lr=null;function Ls(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var gs=null,gn=null;function ai(n){var s=Dn(n);if(s&&(n=s.stateNode)){var u=n[zn]||null;e:switch(n=s.stateNode,s.type){case"input":if(Mn(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+mt(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var g=u[s];if(g!==n&&g.form===n.form){var w=g[zn]||null;if(!w)throw Error(a(90));Mn(g,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(s=0;s<u.length;s++)g=u[s],g.form===n.form&&di(g)}break e;case"textarea":bn(n,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&qe(n,!!u.multiple,s,!1)}}}var pi=!1;function lt(n,s,u){if(pi)return n(s,u);pi=!0;try{var g=n(s);return g}finally{if(pi=!1,(gs!==null||gn!==null)&&(_h(),gs&&(s=gs,n=gn,gn=gs=null,ai(s),n)))for(s=0;s<n.length;s++)ai(n[s])}}function na(n,s){var u=n.stateNode;if(u===null)return null;var g=u[zn]||null;if(g===null)return null;u=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(a(231,s,typeof u));return u}var ut=!1;if(ur)try{var On={};Object.defineProperty(On,"passive",{get:function(){ut=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{ut=!1}var Xi=null,Qi=null,Wi=null;function Ni(){if(Wi)return Wi;var n,s=Qi,u=s.length,g,w="value"in Xi?Xi.value:Xi.textContent,b=w.length;for(n=0;n<u&&s[n]===w[n];n++);var M=u-n;for(g=1;g<=M&&s[u-g]===w[b-g];g++);return Wi=w.slice(n,1<g?1-g:void 0)}function Ki(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zr(){return!0}function ms(){return!1}function Un(n){function s(u,g,w,b,M){this._reactName=u,this._targetInst=w,this.type=g,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var U in n)n.hasOwnProperty(U)&&(u=n[U],this[U]=u?u(b):b[U]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Zr:ms,this.isPropagationStopped=ms,this}return Y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),s}var $t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=Un($t),Ri=Y({},$t,{view:0,detail:0}),Er=Un(Ri),ra,ia,Di,sa=Y({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Di&&(Di&&n.type==="mousemove"?(ra=n.screenX-Di.screenX,ia=n.screenY-Di.screenY):ia=ra=0,Di=n),ra)},movementY:function(n){return"movementY"in n?n.movementY:ia}}),yi=Un(sa),fl=Y({},sa,{dataTransfer:0}),en=Un(fl),ks=Y({},Ri,{relatedTarget:0}),ps=Un(ks),xi=Y({},$t,{animationName:0,elapsedTime:0,pseudoElement:0}),Ua=Un(xi),ye=Y({},$t,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Et=Un(ye),sr=Y({},$t,{data:0}),Ps=Un(sr),Bs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Do(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=gl[n])?!!s[n]:!1}function ys(){return Do}var Vn=Y({},Ri,{key:function(n){if(n.key){var s=Bs[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ki(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?dl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(n){return n.type==="keypress"?Ki(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ki(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Us=Un(Vn),wn=Y({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vs=Un(wn),kr=Y({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),tn=Un(kr),st=Y({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0}),ml=Un(st),on=Y({},sa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ei=Un(on),Kn=Y({},$t,{newState:0,oldState:0}),pl=Un(Kn),oi=[9,13,27,32],wi=ur&&"CompositionEvent"in window,y=null;ur&&"documentMode"in document&&(y=document.documentMode);var S=ur&&"TextEvent"in window&&!y,D=ur&&(!wi||y&&8<y&&11>=y),V=" ",le=!1;function xe(n,s){switch(n){case"keyup":return oi.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ye(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Vt=!1;function Ln(n,s){switch(n){case"compositionend":return Ye(s);case"keypress":return s.which!==32?null:(le=!0,V);case"textInput":return n=s.data,n===V&&le?null:n;default:return null}}function jt(n,s){if(Vt)return n==="compositionend"||!wi&&xe(n,s)?(n=Ni(),Wi=Qi=Xi=null,Vt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return D&&s.locale!=="ko"?null:s.data;default:return null}}var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!_n[n.type]:s==="textarea"}function Zn(n,s,u,g){gs?gn?gn.push(g):gn=[g]:gs=g,s=Ch(s,"onChange"),0<s.length&&(u=new Zi("onChange","change",null,u,g),n.push({event:u,listeners:s}))}var hr=null,ar=null;function Mo(n){Zp(n,0)}function Va(n){var s=Zt(n);if(di(s))return n}function Hu(n,s){if(n==="change")return s}var _c=!1;if(ur){var _i;if(ur){var Ac="oninput"in document;if(!Ac){var yl=document.createElement("div");yl.setAttribute("oninput","return;"),Ac=typeof yl.oninput=="function"}_i=Ac}else _i=!1;_c=_i&&(!document.documentMode||9<document.documentMode)}function ja(){hr&&(hr.detachEvent("onpropertychange",Ft),ar=hr=null)}function Ft(n){if(n.propertyName==="value"&&Va(ar)){var s=[];Zn(s,ar,n,Ls(n)),lt(Mo,s)}}function xl(n,s,u){n==="focusin"?(ja(),hr=s,ar=u,hr.attachEvent("onpropertychange",Ft)):n==="focusout"&&ja()}function O(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Va(ar)}function r(n,s){if(n==="click")return Va(s)}function o(n,s){if(n==="input"||n==="change")return Va(s)}function l(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var h=typeof Object.is=="function"?Object.is:l;function d(n,s){if(h(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),g=Object.keys(s);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var w=u[g];if(!At.call(s,w)||!h(n[w],s[w]))return!1}return!0}function m(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function p(n,s){var u=m(n);n=0;for(var g;u;){if(u.nodeType===3){if(g=n+u.textContent.length,n<=s&&g>=s)return{node:u,offset:s-n};n=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=m(u)}}function A(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?A(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function T(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Ba(n.document);s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=Ba(n.document)}return s}function N(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function L(n,s){var u=T(s);s=n.focusedElem;var g=n.selectionRange;if(u!==s&&s&&s.ownerDocument&&A(s.ownerDocument.documentElement,s)){if(g!==null&&N(s)){if(n=g.start,u=g.end,u===void 0&&(u=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(u,s.value.length);else if(u=(n=s.ownerDocument||document)&&n.defaultView||window,u.getSelection){u=u.getSelection();var w=s.textContent.length,b=Math.min(g.start,w);g=g.end===void 0?b:Math.min(g.end,w),!u.extend&&b>g&&(w=g,g=b,b=w),w=p(s,b);var M=p(s,g);w&&M&&(u.rangeCount!==1||u.anchorNode!==w.node||u.anchorOffset!==w.offset||u.focusNode!==M.node||u.focusOffset!==M.offset)&&(n=n.createRange(),n.setStart(w.node,w.offset),u.removeAllRanges(),b>g?(u.addRange(n),u.extend(M.node,M.offset)):(n.setEnd(M.node,M.offset),u.addRange(n)))}}for(n=[],u=s;u=u.parentNode;)u.nodeType===1&&n.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)u=n[s],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var B=ur&&"documentMode"in document&&11>=document.documentMode,q=null,ee=null,te=null,ue=!1;function Ee(n,s,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ue||q==null||q!==Ba(g)||(g=q,"selectionStart"in g&&N(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),te&&d(te,g)||(te=g,g=Ch(ee,"onSelect"),0<g.length&&(s=new Zi("onSelect","select",null,s,u),n.push({event:s,listeners:g}),s.target=q)))}function Be(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var ze={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionrun:Be("Transition","TransitionRun"),transitionstart:Be("Transition","TransitionStart"),transitioncancel:Be("Transition","TransitionCancel"),transitionend:Be("Transition","TransitionEnd")},Re={},Dt={};ur&&(Dt=document.createElement("div").style,"AnimationEvent"in window||(delete ze.animationend.animation,delete ze.animationiteration.animation,delete ze.animationstart.animation),"TransitionEvent"in window||delete ze.transitionend.transition);function ft(n){if(Re[n])return Re[n];if(!ze[n])return n;var s=ze[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in Dt)return Re[n]=s[u];return n}var Pr=ft("animationend"),Ai=ft("animationiteration"),Br=ft("animationstart"),fn=ft("transitionrun"),wr=ft("transitionstart"),li=ft("transitioncancel"),aa=ft("transitionend"),oa=new Map,Gu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Mi(n,s){oa.set(n,s),si(s,[n])}var $i=[],El=0,td=0;function qu(){for(var n=El,s=td=El=0;s<n;){var u=$i[s];$i[s++]=null;var g=$i[s];$i[s++]=null;var w=$i[s];$i[s++]=null;var b=$i[s];if($i[s++]=null,g!==null&&w!==null){var M=g.pending;M===null?w.next=w:(w.next=M.next,M.next=w),g.pending=w}b!==0&&Hg(u,w,b)}}function Yu(n,s,u,g){$i[El++]=n,$i[El++]=s,$i[El++]=u,$i[El++]=g,td|=g,n.lanes|=g,n=n.alternate,n!==null&&(n.lanes|=g)}function nd(n,s,u,g){return Yu(n,s,u,g),Xu(n)}function Fa(n,s){return Yu(n,null,null,s),Xu(n)}function Hg(n,s,u){n.lanes|=u;var g=n.alternate;g!==null&&(g.lanes|=u);for(var w=!1,b=n.return;b!==null;)b.childLanes|=u,g=b.alternate,g!==null&&(g.childLanes|=u),b.tag===22&&(n=b.stateNode,n===null||n._visibility&1||(w=!0)),n=b,b=b.return;w&&s!==null&&n.tag===3&&(b=n.stateNode,w=31-Nt(u),b=b.hiddenUpdates,n=b[w],n===null?b[w]=[s]:n.push(s),s.lane=u|536870912)}function Xu(n){if(50<Xc)throw Xc=0,l0=null,Error(a(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var wl={},Gg=new WeakMap;function Ji(n,s){if(typeof n=="object"&&n!==null){var u=Gg.get(n);return u!==void 0?u:(s={value:n,source:s,stack:me(s)},Gg.set(n,s),s)}return{value:n,source:s,stack:me(s)}}var _l=[],Al=0,Qu=null,Wu=0,es=[],ts=0,Oo=null,la=1,ca="";function Lo(n,s){_l[Al++]=Wu,_l[Al++]=Qu,Qu=n,Wu=s}function qg(n,s,u){es[ts++]=la,es[ts++]=ca,es[ts++]=Oo,Oo=n;var g=la;n=ca;var w=32-Nt(g)-1;g&=~(1<<w),u+=1;var b=32-Nt(s)+w;if(30<b){var M=w-w%5;b=(g&(1<<M)-1).toString(32),g>>=M,w-=M,la=1<<32-Nt(s)+w|u<<w|g,ca=b+n}else la=1<<b|u<<w|g,ca=n}function rd(n){n.return!==null&&(Lo(n,1),qg(n,1,0))}function id(n){for(;n===Qu;)Qu=_l[--Al],_l[Al]=null,Wu=_l[--Al],_l[Al]=null;for(;n===Oo;)Oo=es[--ts],es[ts]=null,ca=es[--ts],es[ts]=null,la=es[--ts],es[ts]=null}var ci=null,Ur=null,nn=!1,xs=null,js=!1,sd=Error(a(519));function ko(n){var s=Error(a(418,""));throw Tc(Ji(s,n)),sd}function Yg(n){var s=n.stateNode,u=n.type,g=n.memoizedProps;switch(s[Rn]=n,s[zn]=g,u){case"dialog":qt("cancel",s),qt("close",s);break;case"iframe":case"object":case"embed":qt("load",s);break;case"video":case"audio":for(u=0;u<Wc.length;u++)qt(Wc[u],s);break;case"source":qt("error",s);break;case"img":case"image":case"link":qt("error",s),qt("load",s);break;case"details":qt("toggle",s);break;case"input":qt("invalid",s),ce(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),un(s);break;case"select":qt("invalid",s);break;case"textarea":qt("invalid",s),ir(s,g.value,g.defaultValue,g.children),un(s)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||g.suppressHydrationWarning===!0||t2(s.textContent,u)?(g.popover!=null&&(qt("beforetoggle",s),qt("toggle",s)),g.onScroll!=null&&qt("scroll",s),g.onScrollEnd!=null&&qt("scrollend",s),g.onClick!=null&&(s.onclick=Sh),s=!0):s=!1,s||ko(n)}function Xg(n){for(ci=n.return;ci;)switch(ci.tag){case 3:case 27:js=!0;return;case 5:case 13:js=!1;return;default:ci=ci.return}}function vc(n){if(n!==ci)return!1;if(!nn)return Xg(n),nn=!0,!1;var s=!1,u;if((u=n.tag!==3&&n.tag!==27)&&((u=n.tag===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||T0(n.type,n.memoizedProps)),u=!u),u&&(s=!0),s&&Ur&&ko(n),Xg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(u=n.data,u==="/$"){if(s===0){Ur=ws(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++;n=n.nextSibling}Ur=null}}else Ur=ci?ws(n.stateNode.nextSibling):null;return!0}function bc(){Ur=ci=null,nn=!1}function Tc(n){xs===null?xs=[n]:xs.push(n)}var Cc=Error(a(460)),Qg=Error(a(474)),ad={then:function(){}};function Wg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ku(){}function Kg(n,s,u){switch(u=n[u],u===void 0?n.push(s):u!==s&&(s.then(Ku,Ku),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Cc?Error(a(483)):n;default:if(typeof s.status=="string")s.then(Ku,Ku);else{if(n=Tn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=s,n.status="pending",n.then(function(g){if(s.status==="pending"){var w=s;w.status="fulfilled",w.value=g}},function(g){if(s.status==="pending"){var w=s;w.status="rejected",w.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Cc?Error(a(483)):n}throw Sc=s,Cc}}var Sc=null;function Zg(){if(Sc===null)throw Error(a(459));var n=Sc;return Sc=null,n}var vl=null,Ic=0;function Zu(n){var s=Ic;return Ic+=1,vl===null&&(vl=[]),Kg(vl,n,s)}function Nc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function $u(n,s){throw s.$$typeof===f?Error(a(525)):(n=Object.prototype.toString.call(s),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function $g(n){var s=n._init;return s(n._payload)}function Jg(n){function s(oe,ie){if(n){var ge=oe.deletions;ge===null?(oe.deletions=[ie],oe.flags|=16):ge.push(ie)}}function u(oe,ie){if(!n)return null;for(;ie!==null;)s(oe,ie),ie=ie.sibling;return null}function g(oe){for(var ie=new Map;oe!==null;)oe.key!==null?ie.set(oe.key,oe):ie.set(oe.index,oe),oe=oe.sibling;return ie}function w(oe,ie){return oe=Ja(oe,ie),oe.index=0,oe.sibling=null,oe}function b(oe,ie,ge){return oe.index=ge,n?(ge=oe.alternate,ge!==null?(ge=ge.index,ge<ie?(oe.flags|=33554434,ie):ge):(oe.flags|=33554434,ie)):(oe.flags|=1048576,ie)}function M(oe){return n&&oe.alternate===null&&(oe.flags|=33554434),oe}function U(oe,ie,ge,Ce){return ie===null||ie.tag!==6?(ie=e0(ge,oe.mode,Ce),ie.return=oe,ie):(ie=w(ie,ge),ie.return=oe,ie)}function Q(oe,ie,ge,Ce){var et=ge.type;return et===_?Ae(oe,ie,ge.props.children,Ce,ge.key):ie!==null&&(ie.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===fe&&$g(et)===ie.type)?(ie=w(ie,ge.props),Nc(ie,ge),ie.return=oe,ie):(ie=ph(ge.type,ge.key,ge.props,null,oe.mode,Ce),Nc(ie,ge),ie.return=oe,ie)}function se(oe,ie,ge,Ce){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ge.containerInfo||ie.stateNode.implementation!==ge.implementation?(ie=t0(ge,oe.mode,Ce),ie.return=oe,ie):(ie=w(ie,ge.children||[]),ie.return=oe,ie)}function Ae(oe,ie,ge,Ce,et){return ie===null||ie.tag!==7?(ie=qo(ge,oe.mode,Ce,et),ie.return=oe,ie):(ie=w(ie,ge),ie.return=oe,ie)}function De(oe,ie,ge){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=e0(""+ie,oe.mode,ge),ie.return=oe,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case x:return ge=ph(ie.type,ie.key,ie.props,null,oe.mode,ge),Nc(ge,ie),ge.return=oe,ge;case v:return ie=t0(ie,oe.mode,ge),ie.return=oe,ie;case fe:var Ce=ie._init;return ie=Ce(ie._payload),De(oe,ie,ge)}if(Ge(ie)||Ue(ie))return ie=qo(ie,oe.mode,ge,null),ie.return=oe,ie;if(typeof ie.then=="function")return De(oe,Zu(ie),ge);if(ie.$$typeof===j)return De(oe,dh(oe,ie),ge);$u(oe,ie)}return null}function pe(oe,ie,ge,Ce){var et=ie!==null?ie.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return et!==null?null:U(oe,ie,""+ge,Ce);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case x:return ge.key===et?Q(oe,ie,ge,Ce):null;case v:return ge.key===et?se(oe,ie,ge,Ce):null;case fe:return et=ge._init,ge=et(ge._payload),pe(oe,ie,ge,Ce)}if(Ge(ge)||Ue(ge))return et!==null?null:Ae(oe,ie,ge,Ce,null);if(typeof ge.then=="function")return pe(oe,ie,Zu(ge),Ce);if(ge.$$typeof===j)return pe(oe,ie,dh(oe,ge),Ce);$u(oe,ge)}return null}function we(oe,ie,ge,Ce,et){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return oe=oe.get(ge)||null,U(ie,oe,""+Ce,et);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case x:return oe=oe.get(Ce.key===null?ge:Ce.key)||null,Q(ie,oe,Ce,et);case v:return oe=oe.get(Ce.key===null?ge:Ce.key)||null,se(ie,oe,Ce,et);case fe:var Ot=Ce._init;return Ce=Ot(Ce._payload),we(oe,ie,ge,Ce,et)}if(Ge(Ce)||Ue(Ce))return oe=oe.get(ge)||null,Ae(ie,oe,Ce,et,null);if(typeof Ce.then=="function")return we(oe,ie,ge,Zu(Ce),et);if(Ce.$$typeof===j)return we(oe,ie,ge,dh(ie,Ce),et);$u(ie,Ce)}return null}function rt(oe,ie,ge,Ce){for(var et=null,Ot=null,at=ie,dt=ie=0,Rr=null;at!==null&&dt<ge.length;dt++){at.index>dt?(Rr=at,at=null):Rr=at.sibling;var rn=pe(oe,at,ge[dt],Ce);if(rn===null){at===null&&(at=Rr);break}n&&at&&rn.alternate===null&&s(oe,at),ie=b(rn,ie,dt),Ot===null?et=rn:Ot.sibling=rn,Ot=rn,at=Rr}if(dt===ge.length)return u(oe,at),nn&&Lo(oe,dt),et;if(at===null){for(;dt<ge.length;dt++)at=De(oe,ge[dt],Ce),at!==null&&(ie=b(at,ie,dt),Ot===null?et=at:Ot.sibling=at,Ot=at);return nn&&Lo(oe,dt),et}for(at=g(at);dt<ge.length;dt++)Rr=we(at,oe,dt,ge[dt],Ce),Rr!==null&&(n&&Rr.alternate!==null&&at.delete(Rr.key===null?dt:Rr.key),ie=b(Rr,ie,dt),Ot===null?et=Rr:Ot.sibling=Rr,Ot=Rr);return n&&at.forEach(function(ao){return s(oe,ao)}),nn&&Lo(oe,dt),et}function bt(oe,ie,ge,Ce){if(ge==null)throw Error(a(151));for(var et=null,Ot=null,at=ie,dt=ie=0,Rr=null,rn=ge.next();at!==null&&!rn.done;dt++,rn=ge.next()){at.index>dt?(Rr=at,at=null):Rr=at.sibling;var ao=pe(oe,at,rn.value,Ce);if(ao===null){at===null&&(at=Rr);break}n&&at&&ao.alternate===null&&s(oe,at),ie=b(ao,ie,dt),Ot===null?et=ao:Ot.sibling=ao,Ot=ao,at=Rr}if(rn.done)return u(oe,at),nn&&Lo(oe,dt),et;if(at===null){for(;!rn.done;dt++,rn=ge.next())rn=De(oe,rn.value,Ce),rn!==null&&(ie=b(rn,ie,dt),Ot===null?et=rn:Ot.sibling=rn,Ot=rn);return nn&&Lo(oe,dt),et}for(at=g(at);!rn.done;dt++,rn=ge.next())rn=we(at,oe,dt,rn.value,Ce),rn!==null&&(n&&rn.alternate!==null&&at.delete(rn.key===null?dt:rn.key),ie=b(rn,ie,dt),Ot===null?et=rn:Ot.sibling=rn,Ot=rn);return n&&at.forEach(function(QA){return s(oe,QA)}),nn&&Lo(oe,dt),et}function er(oe,ie,ge,Ce){if(typeof ge=="object"&&ge!==null&&ge.type===_&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case x:e:{for(var et=ge.key;ie!==null;){if(ie.key===et){if(et=ge.type,et===_){if(ie.tag===7){u(oe,ie.sibling),Ce=w(ie,ge.props.children),Ce.return=oe,oe=Ce;break e}}else if(ie.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===fe&&$g(et)===ie.type){u(oe,ie.sibling),Ce=w(ie,ge.props),Nc(Ce,ge),Ce.return=oe,oe=Ce;break e}u(oe,ie);break}else s(oe,ie);ie=ie.sibling}ge.type===_?(Ce=qo(ge.props.children,oe.mode,Ce,ge.key),Ce.return=oe,oe=Ce):(Ce=ph(ge.type,ge.key,ge.props,null,oe.mode,Ce),Nc(Ce,ge),Ce.return=oe,oe=Ce)}return M(oe);case v:e:{for(et=ge.key;ie!==null;){if(ie.key===et)if(ie.tag===4&&ie.stateNode.containerInfo===ge.containerInfo&&ie.stateNode.implementation===ge.implementation){u(oe,ie.sibling),Ce=w(ie,ge.children||[]),Ce.return=oe,oe=Ce;break e}else{u(oe,ie);break}else s(oe,ie);ie=ie.sibling}Ce=t0(ge,oe.mode,Ce),Ce.return=oe,oe=Ce}return M(oe);case fe:return et=ge._init,ge=et(ge._payload),er(oe,ie,ge,Ce)}if(Ge(ge))return rt(oe,ie,ge,Ce);if(Ue(ge)){if(et=Ue(ge),typeof et!="function")throw Error(a(150));return ge=et.call(ge),bt(oe,ie,ge,Ce)}if(typeof ge.then=="function")return er(oe,ie,Zu(ge),Ce);if(ge.$$typeof===j)return er(oe,ie,dh(oe,ge),Ce);$u(oe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ie!==null&&ie.tag===6?(u(oe,ie.sibling),Ce=w(ie,ge),Ce.return=oe,oe=Ce):(u(oe,ie),Ce=e0(ge,oe.mode,Ce),Ce.return=oe,oe=Ce),M(oe)):u(oe,ie)}return function(oe,ie,ge,Ce){try{Ic=0;var et=er(oe,ie,ge,Ce);return vl=null,et}catch(at){if(at===Cc)throw at;var Ot=ss(29,at,null,oe.mode);return Ot.lanes=Ce,Ot.return=oe,Ot}finally{}}}var Po=Jg(!0),em=Jg(!1),bl=He(null),Ju=He(0);function tm(n,s){n=wa,tt(Ju,n),tt(bl,s),wa=n|s.baseLanes}function od(){tt(Ju,wa),tt(bl,bl.current)}function ld(){wa=Ju.current,nt(bl),nt(Ju)}var ns=He(null),Fs=null;function za(n){var s=n.alternate;tt(_r,_r.current&1),tt(ns,n),Fs===null&&(s===null||bl.current!==null||s.memoizedState!==null)&&(Fs=n)}function nm(n){if(n.tag===22){if(tt(_r,_r.current),tt(ns,n),Fs===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Fs=n)}}else Ha()}function Ha(){tt(_r,_r.current),tt(ns,ns.current)}function ua(n){nt(ns),Fs===n&&(Fs=null),nt(_r)}var _r=He(0);function eh(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var k_=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(u,g){n.push(g)}};this.abort=function(){s.aborted=!0,n.forEach(function(u){return u()})}},P_=i.unstable_scheduleCallback,B_=i.unstable_NormalPriority,Ar={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cd(){return{controller:new k_,data:new Map,refCount:0}}function Rc(n){n.refCount--,n.refCount===0&&P_(B_,function(){n.controller.abort()})}var Dc=null,ud=0,Tl=0,Cl=null;function U_(n,s){if(Dc===null){var u=Dc=[];ud=0,Tl=p0(),Cl={status:"pending",value:void 0,then:function(g){u.push(g)}}}return ud++,s.then(rm,rm),s}function rm(){if(--ud===0&&Dc!==null){Cl!==null&&(Cl.status="fulfilled");var n=Dc;Dc=null,Tl=0,Cl=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function V_(n,s){var u=[],g={status:"pending",value:null,reason:null,then:function(w){u.push(w)}};return n.then(function(){g.status="fulfilled",g.value=s;for(var w=0;w<u.length;w++)(0,u[w])(s)},function(w){for(g.status="rejected",g.reason=w,w=0;w<u.length;w++)(0,u[w])(void 0)}),g}var im=P.S;P.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&U_(n,s),im!==null&&im(n,s)};var Bo=He(null);function hd(){var n=Bo.current;return n!==null?n:Tn.pooledCache}function th(n,s){s===null?tt(Bo,Bo.current):tt(Bo,s.pool)}function sm(){var n=hd();return n===null?null:{parent:Ar._currentValue,pool:n}}var Ga=0,Mt=null,mn=null,fr=null,nh=!1,Sl=!1,Uo=!1,rh=0,Mc=0,Il=null,j_=0;function or(){throw Error(a(321))}function fd(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!h(n[u],s[u]))return!1;return!0}function dd(n,s,u,g,w,b){return Ga=b,Mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=n===null||n.memoizedState===null?Vo:qa,Uo=!1,b=u(g,w),Uo=!1,Sl&&(b=om(s,u,g,w)),am(n),b}function am(n){P.H=zs;var s=mn!==null&&mn.next!==null;if(Ga=0,fr=mn=Mt=null,nh=!1,Mc=0,Il=null,s)throw Error(a(300));n===null||Ir||(n=n.dependencies,n!==null&&fh(n)&&(Ir=!0))}function om(n,s,u,g){Mt=n;var w=0;do{if(Sl&&(Il=null),Mc=0,Sl=!1,25<=w)throw Error(a(301));if(w+=1,fr=mn=null,n.updateQueue!=null){var b=n.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=jo,b=s(u,g)}while(Sl);return b}function F_(){var n=P.H,s=n.useState()[0];return s=typeof s.then=="function"?Oc(s):s,n=n.useState()[0],(mn!==null?mn.memoizedState:null)!==n&&(Mt.flags|=1024),s}function gd(){var n=rh!==0;return rh=0,n}function md(n,s,u){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~u}function pd(n){if(nh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}nh=!1}Ga=0,fr=mn=Mt=null,Sl=!1,Mc=rh=0,Il=null}function vi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Mt.memoizedState=fr=n:fr=fr.next=n,fr}function dr(){if(mn===null){var n=Mt.alternate;n=n!==null?n.memoizedState:null}else n=mn.next;var s=fr===null?Mt.memoizedState:fr.next;if(s!==null)fr=s,mn=n;else{if(n===null)throw Mt.alternate===null?Error(a(467)):Error(a(310));mn=n,n={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},fr===null?Mt.memoizedState=fr=n:fr=fr.next=n}return fr}var ih;ih=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Oc(n){var s=Mc;return Mc+=1,Il===null&&(Il=[]),n=Kg(Il,n,s),s=Mt,(fr===null?s.memoizedState:fr.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?Vo:qa),n}function sh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Oc(n);if(n.$$typeof===j)return $r(n)}throw Error(a(438,String(n)))}function yd(n){var s=null,u=Mt.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var g=Mt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(w){return w.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=ih(),Mt.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(n),g=0;g<n;g++)u[g]=_e;return s.index++,u}function ha(n,s){return typeof s=="function"?s(n):s}function ah(n){var s=dr();return xd(s,mn,n)}function xd(n,s,u){var g=n.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=u;var w=n.baseQueue,b=g.pending;if(b!==null){if(w!==null){var M=w.next;w.next=b.next,b.next=M}s.baseQueue=w=b,g.pending=null}if(b=n.baseState,w===null)n.memoizedState=b;else{s=w.next;var U=M=null,Q=null,se=s,Ae=!1;do{var De=se.lane&-536870913;if(De!==se.lane?(Xt&De)===De:(Ga&De)===De){var pe=se.revertLane;if(pe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),De===Tl&&(Ae=!0);else if((Ga&pe)===pe){se=se.next,pe===Tl&&(Ae=!0);continue}else De={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},Q===null?(U=Q=De,M=b):Q=Q.next=De,Mt.lanes|=pe,eo|=pe;De=se.action,Uo&&u(b,De),b=se.hasEagerState?se.eagerState:u(b,De)}else pe={lane:De,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},Q===null?(U=Q=pe,M=b):Q=Q.next=pe,Mt.lanes|=De,eo|=De;se=se.next}while(se!==null&&se!==s);if(Q===null?M=b:Q.next=U,!h(b,n.memoizedState)&&(Ir=!0,Ae&&(u=Cl,u!==null)))throw u;n.memoizedState=b,n.baseState=M,n.baseQueue=Q,g.lastRenderedState=b}return w===null&&(g.lanes=0),[n.memoizedState,g.dispatch]}function Ed(n){var s=dr(),u=s.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=n;var g=u.dispatch,w=u.pending,b=s.memoizedState;if(w!==null){u.pending=null;var M=w=w.next;do b=n(b,M.action),M=M.next;while(M!==w);h(b,s.memoizedState)||(Ir=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),u.lastRenderedState=b}return[b,g]}function lm(n,s,u){var g=Mt,w=dr(),b=nn;if(b){if(u===void 0)throw Error(a(407));u=u()}else u=s();var M=!h((mn||w).memoizedState,u);if(M&&(w.memoizedState=u,Ir=!0),w=w.queue,Ad(hm.bind(null,g,w,n),[n]),w.getSnapshot!==s||M||fr!==null&&fr.memoizedState.tag&1){if(g.flags|=2048,Nl(9,um.bind(null,g,w,u,s),{destroy:void 0},null),Tn===null)throw Error(a(349));b||Ga&60||cm(g,s,u)}return u}function cm(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=Mt.updateQueue,s===null?(s=ih(),Mt.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function um(n,s,u,g){s.value=u,s.getSnapshot=g,fm(s)&&dm(n)}function hm(n,s,u){return u(function(){fm(s)&&dm(n)})}function fm(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!h(n,u)}catch{return!0}}function dm(n){var s=Fa(n,2);s!==null&&ui(s,n,2)}function wd(n){var s=vi();if(typeof n=="function"){var u=n;if(n=u(),Uo){It(!0);try{u()}finally{It(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:n},s}function gm(n,s,u,g){return n.baseState=u,xd(n,mn,typeof g=="function"?g:ha)}function z_(n,s,u,g,w){if(ch(n))throw Error(a(485));if(n=s.action,n!==null){var b={payload:w,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){b.listeners.push(M)}};P.T!==null?u(!0):b.isTransition=!1,g(b),u=s.pending,u===null?(b.next=s.pending=b,mm(s,b)):(b.next=u.next,s.pending=u.next=b)}}function mm(n,s){var u=s.action,g=s.payload,w=n.state;if(s.isTransition){var b=P.T,M={};P.T=M;try{var U=u(w,g),Q=P.S;Q!==null&&Q(M,U),pm(n,s,U)}catch(se){_d(n,s,se)}finally{P.T=b}}else try{b=u(w,g),pm(n,s,b)}catch(se){_d(n,s,se)}}function pm(n,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){ym(n,s,g)},function(g){return _d(n,s,g)}):ym(n,s,u)}function ym(n,s,u){s.status="fulfilled",s.value=u,xm(s),n.state=u,s=n.pending,s!==null&&(u=s.next,u===s?n.pending=null:(u=u.next,s.next=u,mm(n,u)))}function _d(n,s,u){var g=n.pending;if(n.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=u,xm(s),s=s.next;while(s!==g)}n.action=null}function xm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Em(n,s){return s}function wm(n,s){if(nn){var u=Tn.formState;if(u!==null){e:{var g=Mt;if(nn){if(Ur){t:{for(var w=Ur,b=js;w.nodeType!==8;){if(!b){w=null;break t}if(w=ws(w.nextSibling),w===null){w=null;break t}}b=w.data,w=b==="F!"||b==="F"?w:null}if(w){Ur=ws(w.nextSibling),g=w.data==="F!";break e}}ko(g)}g=!1}g&&(s=u[0])}}return u=vi(),u.memoizedState=u.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Em,lastRenderedState:s},u.queue=g,u=Um.bind(null,Mt,g),g.dispatch=u,g=wd(!1),b=Sd.bind(null,Mt,!1,g.queue),g=vi(),w={state:s,dispatch:null,action:n,pending:null},g.queue=w,u=z_.bind(null,Mt,w,b,u),w.dispatch=u,g.memoizedState=n,[s,u,!1]}function _m(n){var s=dr();return Am(s,mn,n)}function Am(n,s,u){s=xd(n,s,Em)[0],n=ah(ha)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Oc(s):s;var g=dr(),w=g.queue,b=w.dispatch;return u!==g.memoizedState&&(Mt.flags|=2048,Nl(9,H_.bind(null,w,u),{destroy:void 0},null)),[s,b,n]}function H_(n,s){n.action=s}function vm(n){var s=dr(),u=mn;if(u!==null)return Am(s,u,n);dr(),s=s.memoizedState,u=dr();var g=u.queue.dispatch;return u.memoizedState=n,[s,g,!1]}function Nl(n,s,u,g){return n={tag:n,create:s,inst:u,deps:g,next:null},s=Mt.updateQueue,s===null&&(s=ih(),Mt.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=n.next=n:(g=u.next,u.next=n,n.next=g,s.lastEffect=n),n}function bm(){return dr().memoizedState}function oh(n,s,u,g){var w=vi();Mt.flags|=n,w.memoizedState=Nl(1|s,u,{destroy:void 0},g===void 0?null:g)}function lh(n,s,u,g){var w=dr();g=g===void 0?null:g;var b=w.memoizedState.inst;mn!==null&&g!==null&&fd(g,mn.memoizedState.deps)?w.memoizedState=Nl(s,u,b,g):(Mt.flags|=n,w.memoizedState=Nl(1|s,u,b,g))}function Tm(n,s){oh(8390656,8,n,s)}function Ad(n,s){lh(2048,8,n,s)}function Cm(n,s){return lh(4,2,n,s)}function Sm(n,s){return lh(4,4,n,s)}function Im(n,s){if(typeof s=="function"){n=n();var u=s(n);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Nm(n,s,u){u=u!=null?u.concat([n]):null,lh(4,4,Im.bind(null,s,n),u)}function vd(){}function Rm(n,s){var u=dr();s=s===void 0?null:s;var g=u.memoizedState;return s!==null&&fd(s,g[1])?g[0]:(u.memoizedState=[n,s],n)}function Dm(n,s){var u=dr();s=s===void 0?null:s;var g=u.memoizedState;if(s!==null&&fd(s,g[1]))return g[0];if(g=n(),Uo){It(!0);try{n()}finally{It(!1)}}return u.memoizedState=[g,s],g}function bd(n,s,u){return u===void 0||Ga&1073741824?n.memoizedState=s:(n.memoizedState=u,n=Op(),Mt.lanes|=n,eo|=n,u)}function Mm(n,s,u,g){return h(u,s)?u:bl.current!==null?(n=bd(n,u,g),h(n,s)||(Ir=!0),n):Ga&42?(n=Op(),Mt.lanes|=n,eo|=n,s):(Ir=!0,n.memoizedState=u)}function Om(n,s,u,g,w){var b=Oe.p;Oe.p=b!==0&&8>b?b:8;var M=P.T,U={};P.T=U,Sd(n,!1,s,u);try{var Q=w(),se=P.S;if(se!==null&&se(U,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Ae=V_(Q,g);Lc(n,s,Ae,Pi(n))}else Lc(n,s,g,Pi(n))}catch(De){Lc(n,s,{then:function(){},status:"rejected",reason:De},Pi())}finally{Oe.p=b,P.T=M}}function G_(){}function Td(n,s,u,g){if(n.tag!==5)throw Error(a(476));var w=Lm(n).queue;Om(n,w,s,ot,u===null?G_:function(){return km(n),u(g)})}function Lm(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:ot},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:u},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function km(n){var s=Lm(n).next.queue;Lc(n,s,{},Pi())}function Cd(){return $r(eu)}function Pm(){return dr().memoizedState}function Bm(){return dr().memoizedState}function q_(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var u=Pi();n=Qa(u);var g=Wa(s,n,u);g!==null&&(ui(g,s,u),Bc(g,s,u)),s={cache:cd()},n.payload=s;return}s=s.return}}function Y_(n,s,u){var g=Pi();u={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},ch(n)?Vm(s,u):(u=nd(n,s,u,g),u!==null&&(ui(u,n,g),jm(u,s,g)))}function Um(n,s,u){var g=Pi();Lc(n,s,u,g)}function Lc(n,s,u,g){var w={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(ch(n))Vm(s,w);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var M=s.lastRenderedState,U=b(M,u);if(w.hasEagerState=!0,w.eagerState=U,h(U,M))return Yu(n,s,w,0),Tn===null&&qu(),!1}catch{}finally{}if(u=nd(n,s,w,g),u!==null)return ui(u,n,g),jm(u,s,g),!0}return!1}function Sd(n,s,u,g){if(g={lane:2,revertLane:p0(),action:g,hasEagerState:!1,eagerState:null,next:null},ch(n)){if(s)throw Error(a(479))}else s=nd(n,u,g,2),s!==null&&ui(s,n,2)}function ch(n){var s=n.alternate;return n===Mt||s!==null&&s===Mt}function Vm(n,s){Sl=nh=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function jm(n,s,u){if(u&4194176){var g=s.lanes;g&=n.pendingLanes,u|=g,s.lanes=u,Hi(n,u)}}var zs={readContext:$r,use:sh,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useLayoutEffect:or,useInsertionEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useSyncExternalStore:or,useId:or};zs.useCacheRefresh=or,zs.useMemoCache=or,zs.useHostTransitionStatus=or,zs.useFormState=or,zs.useActionState=or,zs.useOptimistic=or;var Vo={readContext:$r,use:sh,useCallback:function(n,s){return vi().memoizedState=[n,s===void 0?null:s],n},useContext:$r,useEffect:Tm,useImperativeHandle:function(n,s,u){u=u!=null?u.concat([n]):null,oh(4194308,4,Im.bind(null,s,n),u)},useLayoutEffect:function(n,s){return oh(4194308,4,n,s)},useInsertionEffect:function(n,s){oh(4,2,n,s)},useMemo:function(n,s){var u=vi();s=s===void 0?null:s;var g=n();if(Uo){It(!0);try{n()}finally{It(!1)}}return u.memoizedState=[g,s],g},useReducer:function(n,s,u){var g=vi();if(u!==void 0){var w=u(s);if(Uo){It(!0);try{u(s)}finally{It(!1)}}}else w=s;return g.memoizedState=g.baseState=w,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:w},g.queue=n,n=n.dispatch=Y_.bind(null,Mt,n),[g.memoizedState,n]},useRef:function(n){var s=vi();return n={current:n},s.memoizedState=n},useState:function(n){n=wd(n);var s=n.queue,u=Um.bind(null,Mt,s);return s.dispatch=u,[n.memoizedState,u]},useDebugValue:vd,useDeferredValue:function(n,s){var u=vi();return bd(u,n,s)},useTransition:function(){var n=wd(!1);return n=Om.bind(null,Mt,n.queue,!0,!1),vi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,u){var g=Mt,w=vi();if(nn){if(u===void 0)throw Error(a(407));u=u()}else{if(u=s(),Tn===null)throw Error(a(349));Xt&60||cm(g,s,u)}w.memoizedState=u;var b={value:u,getSnapshot:s};return w.queue=b,Tm(hm.bind(null,g,b,n),[n]),g.flags|=2048,Nl(9,um.bind(null,g,b,u,s),{destroy:void 0},null),u},useId:function(){var n=vi(),s=Tn.identifierPrefix;if(nn){var u=ca,g=la;u=(g&~(1<<32-Nt(g)-1)).toString(32)+u,s=":"+s+"R"+u,u=rh++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=j_++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},useCacheRefresh:function(){return vi().memoizedState=q_.bind(null,Mt)}};Vo.useMemoCache=yd,Vo.useHostTransitionStatus=Cd,Vo.useFormState=wm,Vo.useActionState=wm,Vo.useOptimistic=function(n){var s=vi();s.memoizedState=s.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Sd.bind(null,Mt,!0,u),u.dispatch=s,[n,s]};var qa={readContext:$r,use:sh,useCallback:Rm,useContext:$r,useEffect:Ad,useImperativeHandle:Nm,useInsertionEffect:Cm,useLayoutEffect:Sm,useMemo:Dm,useReducer:ah,useRef:bm,useState:function(){return ah(ha)},useDebugValue:vd,useDeferredValue:function(n,s){var u=dr();return Mm(u,mn.memoizedState,n,s)},useTransition:function(){var n=ah(ha)[0],s=dr().memoizedState;return[typeof n=="boolean"?n:Oc(n),s]},useSyncExternalStore:lm,useId:Pm};qa.useCacheRefresh=Bm,qa.useMemoCache=yd,qa.useHostTransitionStatus=Cd,qa.useFormState=_m,qa.useActionState=_m,qa.useOptimistic=function(n,s){var u=dr();return gm(u,mn,n,s)};var jo={readContext:$r,use:sh,useCallback:Rm,useContext:$r,useEffect:Ad,useImperativeHandle:Nm,useInsertionEffect:Cm,useLayoutEffect:Sm,useMemo:Dm,useReducer:Ed,useRef:bm,useState:function(){return Ed(ha)},useDebugValue:vd,useDeferredValue:function(n,s){var u=dr();return mn===null?bd(u,n,s):Mm(u,mn.memoizedState,n,s)},useTransition:function(){var n=Ed(ha)[0],s=dr().memoizedState;return[typeof n=="boolean"?n:Oc(n),s]},useSyncExternalStore:lm,useId:Pm};jo.useCacheRefresh=Bm,jo.useMemoCache=yd,jo.useHostTransitionStatus=Cd,jo.useFormState=vm,jo.useActionState=vm,jo.useOptimistic=function(n,s){var u=dr();return mn!==null?gm(u,mn,n,s):(u.baseState=n,[n,u.queue.dispatch])};function Id(n,s,u,g){s=n.memoizedState,u=u(g,s),u=u==null?s:Y({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Nd={isMounted:function(n){return(n=n._reactInternals)?be(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var g=Pi(),w=Qa(g);w.payload=s,u!=null&&(w.callback=u),s=Wa(n,w,g),s!==null&&(ui(s,n,g),Bc(s,n,g))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var g=Pi(),w=Qa(g);w.tag=1,w.payload=s,u!=null&&(w.callback=u),s=Wa(n,w,g),s!==null&&(ui(s,n,g),Bc(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=Pi(),g=Qa(u);g.tag=2,s!=null&&(g.callback=s),s=Wa(n,g,u),s!==null&&(ui(s,n,u),Bc(s,n,u))}};function Fm(n,s,u,g,w,b,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,b,M):s.prototype&&s.prototype.isPureReactComponent?!d(u,g)||!d(w,b):!0}function zm(n,s,u,g){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,g),s.state!==n&&Nd.enqueueReplaceState(s,s.state,null)}function Fo(n,s){var u=s;if("ref"in s){u={};for(var g in s)g!=="ref"&&(u[g]=s[g])}if(n=n.defaultProps){u===s&&(u=Y({},u));for(var w in n)u[w]===void 0&&(u[w]=n[w])}return u}var uh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Hm(n){uh(n)}function Gm(n){console.error(n)}function qm(n){uh(n)}function hh(n,s){try{var u=n.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function Ym(n,s,u){try{var g=n.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Rd(n,s,u){return u=Qa(u),u.tag=3,u.payload={element:null},u.callback=function(){hh(n,s)},u}function Xm(n){return n=Qa(n),n.tag=3,n}function Qm(n,s,u,g){var w=u.type.getDerivedStateFromError;if(typeof w=="function"){var b=g.value;n.payload=function(){return w(b)},n.callback=function(){Ym(s,u,g)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(n.callback=function(){Ym(s,u,g),typeof w!="function"&&(to===null?to=new Set([this]):to.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function X_(n,s,u,g,w){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=u.alternate,s!==null&&Pc(s,u,w,!0),u=ns.current,u!==null){switch(u.tag){case 13:return Fs===null?h0():u.alternate===null&&Jn===0&&(Jn=3),u.flags&=-257,u.flags|=65536,u.lanes=w,g===ad?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([g]):s.add(g),d0(n,g,w)),!1;case 22:return u.flags|=65536,g===ad?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([g]):u.add(g)),d0(n,g,w)),!1}throw Error(a(435,u.tag))}return d0(n,g,w),h0(),!1}if(nn)return s=ns.current,s!==null?(!(s.flags&65536)&&(s.flags|=256),s.flags|=65536,s.lanes=w,g!==sd&&(n=Error(a(422),{cause:g}),Tc(Ji(n,u)))):(g!==sd&&(s=Error(a(423),{cause:g}),Tc(Ji(s,u))),n=n.current.alternate,n.flags|=65536,w&=-w,n.lanes|=w,g=Ji(g,u),w=Rd(n.stateNode,g,w),qd(n,w),Jn!==4&&(Jn=2)),!1;var b=Error(a(520),{cause:g});if(b=Ji(b,u),qc===null?qc=[b]:qc.push(b),Jn!==4&&(Jn=2),s===null)return!0;g=Ji(g,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,n=w&-w,u.lanes|=n,n=Rd(u.stateNode,g,n),qd(u,n),!1;case 1:if(s=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(to===null||!to.has(b))))return u.flags|=65536,w&=-w,u.lanes|=w,w=Xm(w),Qm(w,n,u,g),qd(u,w),!1}u=u.return}while(u!==null);return!1}var Wm=Error(a(461)),Ir=!1;function Vr(n,s,u,g){s.child=n===null?em(s,null,u,g):Po(s,n.child,u,g)}function Km(n,s,u,g,w){u=u.render;var b=s.ref;if("ref"in g){var M={};for(var U in g)U!=="ref"&&(M[U]=g[U])}else M=g;return Ho(s),g=dd(n,s,u,M,b,w),U=gd(),n!==null&&!Ir?(md(n,s,w),fa(n,s,w)):(nn&&U&&rd(s),s.flags|=1,Vr(n,s,g,w),s.child)}function Zm(n,s,u,g,w){if(n===null){var b=u.type;return typeof b=="function"&&!Jd(b)&&b.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=b,$m(n,s,b,g,w)):(n=ph(u.type,null,g,s,s.mode,w),n.ref=s.ref,n.return=s,s.child=n)}if(b=n.child,!Vd(n,w)){var M=b.memoizedProps;if(u=u.compare,u=u!==null?u:d,u(M,g)&&n.ref===s.ref)return fa(n,s,w)}return s.flags|=1,n=Ja(b,g),n.ref=s.ref,n.return=s,s.child=n}function $m(n,s,u,g,w){if(n!==null){var b=n.memoizedProps;if(d(b,g)&&n.ref===s.ref)if(Ir=!1,s.pendingProps=g=b,Vd(n,w))n.flags&131072&&(Ir=!0);else return s.lanes=n.lanes,fa(n,s,w)}return Dd(n,s,u,g,w)}function Jm(n,s,u){var g=s.pendingProps,w=g.children,b=(s.stateNode._pendingVisibility&2)!==0,M=n!==null?n.memoizedState:null;if(kc(n,s),g.mode==="hidden"||b){if(s.flags&128){if(g=M!==null?M.baseLanes|u:u,n!==null){for(w=s.child=n.child,b=0;w!==null;)b=b|w.lanes|w.childLanes,w=w.sibling;s.childLanes=b&~g}else s.childLanes=0,s.child=null;return ep(n,s,g,u)}if(u&536870912)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&th(s,M!==null?M.cachePool:null),M!==null?tm(s,M):od(),nm(s);else return s.lanes=s.childLanes=536870912,ep(n,s,M!==null?M.baseLanes|u:u,u)}else M!==null?(th(s,M.cachePool),tm(s,M),Ha(),s.memoizedState=null):(n!==null&&th(s,null),od(),Ha());return Vr(n,s,w,u),s.child}function ep(n,s,u,g){var w=hd();return w=w===null?null:{parent:Ar._currentValue,pool:w},s.memoizedState={baseLanes:u,cachePool:w},n!==null&&th(s,null),od(),nm(s),n!==null&&Pc(n,s,g,!0),null}function kc(n,s){var u=s.ref;if(u===null)n!==null&&n.ref!==null&&(s.flags|=2097664);else{if(typeof u!="function"&&typeof u!="object")throw Error(a(284));(n===null||n.ref!==u)&&(s.flags|=2097664)}}function Dd(n,s,u,g,w){return Ho(s),u=dd(n,s,u,g,void 0,w),g=gd(),n!==null&&!Ir?(md(n,s,w),fa(n,s,w)):(nn&&g&&rd(s),s.flags|=1,Vr(n,s,u,w),s.child)}function tp(n,s,u,g,w,b){return Ho(s),s.updateQueue=null,u=om(s,g,u,w),am(n),g=gd(),n!==null&&!Ir?(md(n,s,b),fa(n,s,b)):(nn&&g&&rd(s),s.flags|=1,Vr(n,s,u,b),s.child)}function np(n,s,u,g,w){if(Ho(s),s.stateNode===null){var b=wl,M=u.contextType;typeof M=="object"&&M!==null&&(b=$r(M)),b=new u(g,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Nd,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=g,b.state=s.memoizedState,b.refs={},Hd(s),M=u.contextType,b.context=typeof M=="object"&&M!==null?$r(M):wl,b.state=s.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(Id(s,u,M,g),b.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(M=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),M!==b.state&&Nd.enqueueReplaceState(b,b.state,null),Vc(s,g,b,w),Uc(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(n===null){b=s.stateNode;var U=s.memoizedProps,Q=Fo(u,U);b.props=Q;var se=b.context,Ae=u.contextType;M=wl,typeof Ae=="object"&&Ae!==null&&(M=$r(Ae));var De=u.getDerivedStateFromProps;Ae=typeof De=="function"||typeof b.getSnapshotBeforeUpdate=="function",U=s.pendingProps!==U,Ae||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(U||se!==M)&&zm(s,b,g,M),Xa=!1;var pe=s.memoizedState;b.state=pe,Vc(s,g,b,w),Uc(),se=s.memoizedState,U||pe!==se||Xa?(typeof De=="function"&&(Id(s,u,De,g),se=s.memoizedState),(Q=Xa||Fm(s,u,Q,g,pe,se,M))?(Ae||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=se),b.props=g,b.state=se,b.context=M,g=Q):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{b=s.stateNode,Gd(n,s),M=s.memoizedProps,Ae=Fo(u,M),b.props=Ae,De=s.pendingProps,pe=b.context,se=u.contextType,Q=wl,typeof se=="object"&&se!==null&&(Q=$r(se)),U=u.getDerivedStateFromProps,(se=typeof U=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M!==De||pe!==Q)&&zm(s,b,g,Q),Xa=!1,pe=s.memoizedState,b.state=pe,Vc(s,g,b,w),Uc();var we=s.memoizedState;M!==De||pe!==we||Xa||n!==null&&n.dependencies!==null&&fh(n.dependencies)?(typeof U=="function"&&(Id(s,u,U,g),we=s.memoizedState),(Ae=Xa||Fm(s,u,Ae,g,pe,we,Q)||n!==null&&n.dependencies!==null&&fh(n.dependencies))?(se||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(g,we,Q),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(g,we,Q)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=we),b.props=g,b.state=we,b.context=Q,g=Ae):(typeof b.componentDidUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=1024),g=!1)}return b=g,kc(n,s),g=(s.flags&128)!==0,b||g?(b=s.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,n!==null&&g?(s.child=Po(s,n.child,null,w),s.child=Po(s,null,u,w)):Vr(n,s,u,w),s.memoizedState=b.state,n=s.child):n=fa(n,s,w),n}function rp(n,s,u,g){return bc(),s.flags|=256,Vr(n,s,u,g),s.child}var Md={dehydrated:null,treeContext:null,retryLane:0};function Od(n){return{baseLanes:n,cachePool:sm()}}function Ld(n,s,u){return n=n!==null?n.childLanes&~u:0,s&&(n|=as),n}function ip(n,s,u){var g=s.pendingProps,w=!1,b=(s.flags&128)!==0,M;if((M=b)||(M=n!==null&&n.memoizedState===null?!1:(_r.current&2)!==0),M&&(w=!0,s.flags&=-129),M=(s.flags&32)!==0,s.flags&=-33,n===null){if(nn){if(w?za(s):Ha(),nn){var U=Ur,Q;if(Q=U){e:{for(Q=U,U=js;Q.nodeType!==8;){if(!U){U=null;break e}if(Q=ws(Q.nextSibling),Q===null){U=null;break e}}U=Q}U!==null?(s.memoizedState={dehydrated:U,treeContext:Oo!==null?{id:la,overflow:ca}:null,retryLane:536870912},Q=ss(18,null,null,0),Q.stateNode=U,Q.return=s,s.child=Q,ci=s,Ur=null,Q=!0):Q=!1}Q||ko(s)}if(U=s.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return U.data==="$!"?s.lanes=16:s.lanes=536870912,null;ua(s)}return U=g.children,g=g.fallback,w?(Ha(),w=s.mode,U=Pd({mode:"hidden",children:U},w),g=qo(g,w,u,null),U.return=s,g.return=s,U.sibling=g,s.child=U,w=s.child,w.memoizedState=Od(u),w.childLanes=Ld(n,M,u),s.memoizedState=Md,g):(za(s),kd(s,U))}if(Q=n.memoizedState,Q!==null&&(U=Q.dehydrated,U!==null)){if(b)s.flags&256?(za(s),s.flags&=-257,s=Bd(n,s,u)):s.memoizedState!==null?(Ha(),s.child=n.child,s.flags|=128,s=null):(Ha(),w=g.fallback,U=s.mode,g=Pd({mode:"visible",children:g.children},U),w=qo(w,U,u,null),w.flags|=2,g.return=s,w.return=s,g.sibling=w,s.child=g,Po(s,n.child,null,u),g=s.child,g.memoizedState=Od(u),g.childLanes=Ld(n,M,u),s.memoizedState=Md,s=w);else if(za(s),U.data==="$!"){if(M=U.nextSibling&&U.nextSibling.dataset,M)var se=M.dgst;M=se,g=Error(a(419)),g.stack="",g.digest=M,Tc({value:g,source:null,stack:null}),s=Bd(n,s,u)}else if(Ir||Pc(n,s,u,!1),M=(u&n.childLanes)!==0,Ir||M){if(M=Tn,M!==null){if(g=u&-u,g&42)g=1;else switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=64;break;case 268435456:g=134217728;break;default:g=0}if(g=g&(M.suspendedLanes|u)?0:g,g!==0&&g!==Q.retryLane)throw Q.retryLane=g,Fa(n,g),ui(M,n,g),Wm}U.data==="$?"||h0(),s=Bd(n,s,u)}else U.data==="$?"?(s.flags|=128,s.child=n.child,s=lA.bind(null,n),U._reactRetry=s,s=null):(n=Q.treeContext,Ur=ws(U.nextSibling),ci=s,nn=!0,xs=null,js=!1,n!==null&&(es[ts++]=la,es[ts++]=ca,es[ts++]=Oo,la=n.id,ca=n.overflow,Oo=s),s=kd(s,g.children),s.flags|=4096);return s}return w?(Ha(),w=g.fallback,U=s.mode,Q=n.child,se=Q.sibling,g=Ja(Q,{mode:"hidden",children:g.children}),g.subtreeFlags=Q.subtreeFlags&31457280,se!==null?w=Ja(se,w):(w=qo(w,U,u,null),w.flags|=2),w.return=s,g.return=s,g.sibling=w,s.child=g,g=w,w=s.child,U=n.child.memoizedState,U===null?U=Od(u):(Q=U.cachePool,Q!==null?(se=Ar._currentValue,Q=Q.parent!==se?{parent:se,pool:se}:Q):Q=sm(),U={baseLanes:U.baseLanes|u,cachePool:Q}),w.memoizedState=U,w.childLanes=Ld(n,M,u),s.memoizedState=Md,g):(za(s),u=n.child,n=u.sibling,u=Ja(u,{mode:"visible",children:g.children}),u.return=s,u.sibling=null,n!==null&&(M=s.deletions,M===null?(s.deletions=[n],s.flags|=16):M.push(n)),s.child=u,s.memoizedState=null,u)}function kd(n,s){return s=Pd({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Pd(n,s){return Rp(n,s,0,null)}function Bd(n,s,u){return Po(s,n.child,null,u),n=kd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function sp(n,s,u){n.lanes|=s;var g=n.alternate;g!==null&&(g.lanes|=s),Fd(n.return,s,u)}function Ud(n,s,u,g,w){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:w}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=u,b.tailMode=w)}function ap(n,s,u){var g=s.pendingProps,w=g.revealOrder,b=g.tail;if(Vr(n,s,g.children,u),g=_r.current,g&2)g=g&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sp(n,u,s);else if(n.tag===19)sp(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}switch(tt(_r,g),w){case"forwards":for(u=s.child,w=null;u!==null;)n=u.alternate,n!==null&&eh(n)===null&&(w=u),u=u.sibling;u=w,u===null?(w=s.child,s.child=null):(w=u.sibling,u.sibling=null),Ud(s,!1,w,u,b);break;case"backwards":for(u=null,w=s.child,s.child=null;w!==null;){if(n=w.alternate,n!==null&&eh(n)===null){s.child=w;break}n=w.sibling,w.sibling=u,u=w,w=n}Ud(s,!0,u,null,b);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function fa(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),eo|=s.lanes,!(u&s.childLanes))if(n!==null){if(Pc(n,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(a(153));if(s.child!==null){for(n=s.child,u=Ja(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=Ja(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function Vd(n,s){return n.lanes&s?!0:(n=n.dependencies,!!(n!==null&&fh(n)))}function Q_(n,s,u){switch(s.tag){case 3:vn(s,s.stateNode.containerInfo),Ya(s,Ar,n.memoizedState.cache),bc();break;case 27:case 5:cn(s);break;case 4:vn(s,s.stateNode.containerInfo);break;case 10:Ya(s,s.type,s.memoizedProps.value);break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(za(s),s.flags|=128,null):u&s.child.childLanes?ip(n,s,u):(za(s),n=fa(n,s,u),n!==null?n.sibling:null);za(s);break;case 19:var w=(n.flags&128)!==0;if(g=(u&s.childLanes)!==0,g||(Pc(n,s,u,!1),g=(u&s.childLanes)!==0),w){if(g)return ap(n,s,u);s.flags|=128}if(w=s.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),tt(_r,_r.current),g)break;return null;case 22:case 23:return s.lanes=0,Jm(n,s,u);case 24:Ya(s,Ar,n.memoizedState.cache)}return fa(n,s,u)}function op(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps)Ir=!0;else{if(!Vd(n,u)&&!(s.flags&128))return Ir=!1,Q_(n,s,u);Ir=!!(n.flags&131072)}else Ir=!1,nn&&s.flags&1048576&&qg(s,Wu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var g=s.elementType,w=g._init;if(g=w(g._payload),s.type=g,typeof g=="function")Jd(g)?(n=Fo(g,n),s.tag=1,s=np(null,s,g,n,u)):(s.tag=0,s=Dd(null,s,g,n,u));else{if(g!=null){if(w=g.$$typeof,w===G){s.tag=11,s=Km(null,s,g,n,u);break e}else if(w===he){s.tag=14,s=Zm(null,s,g,n,u);break e}}throw s=F(g)||g,Error(a(306,s,""))}}return s;case 0:return Dd(n,s,s.type,s.pendingProps,u);case 1:return g=s.type,w=Fo(g,s.pendingProps),np(n,s,g,w,u);case 3:e:{if(vn(s,s.stateNode.containerInfo),n===null)throw Error(a(387));var b=s.pendingProps;w=s.memoizedState,g=w.element,Gd(n,s),Vc(s,b,null,u);var M=s.memoizedState;if(b=M.cache,Ya(s,Ar,b),b!==w.cache&&zd(s,[Ar],u,!0),Uc(),b=M.element,w.isDehydrated)if(w={element:b,isDehydrated:!1,cache:M.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=rp(n,s,b,u);break e}else if(b!==g){g=Ji(Error(a(424)),s),Tc(g),s=rp(n,s,b,u);break e}else for(Ur=ws(s.stateNode.containerInfo.firstChild),ci=s,nn=!0,xs=null,js=!0,u=em(s,null,b,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(bc(),b===g){s=fa(n,s,u);break e}Vr(n,s,b,u)}s=s.child}return s;case 26:return kc(n,s),n===null?(u=u2(s.type,null,s.pendingProps,null))?s.memoizedState=u:nn||(u=s.type,n=s.pendingProps,g=Ih(gt.current).createElement(u),g[Rn]=s,g[zn]=n,jr(g,u,n),Jt(g),s.stateNode=g):s.memoizedState=u2(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return cn(s),n===null&&nn&&(g=s.stateNode=o2(s.type,s.pendingProps,gt.current),ci=s,js=!0,Ur=ws(g.firstChild)),g=s.pendingProps.children,n!==null||nn?Vr(n,s,g,u):s.child=Po(s,null,g,u),kc(n,s),s.child;case 5:return n===null&&nn&&((w=g=Ur)&&(g=bA(g,s.type,s.pendingProps,js),g!==null?(s.stateNode=g,ci=s,Ur=ws(g.firstChild),js=!1,w=!0):w=!1),w||ko(s)),cn(s),w=s.type,b=s.pendingProps,M=n!==null?n.memoizedProps:null,g=b.children,T0(w,b)?g=null:M!==null&&T0(w,M)&&(s.flags|=32),s.memoizedState!==null&&(w=dd(n,s,F_,null,null,u),eu._currentValue=w),kc(n,s),Vr(n,s,g,u),s.child;case 6:return n===null&&nn&&((n=u=Ur)&&(u=TA(u,s.pendingProps,js),u!==null?(s.stateNode=u,ci=s,Ur=null,n=!0):n=!1),n||ko(s)),null;case 13:return ip(n,s,u);case 4:return vn(s,s.stateNode.containerInfo),g=s.pendingProps,n===null?s.child=Po(s,null,g,u):Vr(n,s,g,u),s.child;case 11:return Km(n,s,s.type,s.pendingProps,u);case 7:return Vr(n,s,s.pendingProps,u),s.child;case 8:return Vr(n,s,s.pendingProps.children,u),s.child;case 12:return Vr(n,s,s.pendingProps.children,u),s.child;case 10:return g=s.pendingProps,Ya(s,s.type,g.value),Vr(n,s,g.children,u),s.child;case 9:return w=s.type._context,g=s.pendingProps.children,Ho(s),w=$r(w),g=g(w),s.flags|=1,Vr(n,s,g,u),s.child;case 14:return Zm(n,s,s.type,s.pendingProps,u);case 15:return $m(n,s,s.type,s.pendingProps,u);case 19:return ap(n,s,u);case 22:return Jm(n,s,u);case 24:return Ho(s),g=$r(Ar),n===null?(w=hd(),w===null&&(w=Tn,b=cd(),w.pooledCache=b,b.refCount++,b!==null&&(w.pooledCacheLanes|=u),w=b),s.memoizedState={parent:g,cache:w},Hd(s),Ya(s,Ar,w)):(n.lanes&u&&(Gd(n,s),Vc(s,null,null,u),Uc()),w=n.memoizedState,b=s.memoizedState,w.parent!==g?(w={parent:g,cache:g},s.memoizedState=w,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=w),Ya(s,Ar,g)):(g=b.cache,Ya(s,Ar,g),g!==w.cache&&zd(s,[Ar],u,!0))),Vr(n,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}var jd=He(null),zo=null,da=null;function Ya(n,s,u){tt(jd,s._currentValue),s._currentValue=u}function ga(n){n._currentValue=jd.current,nt(jd)}function Fd(n,s,u){for(;n!==null;){var g=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),n===u)break;n=n.return}}function zd(n,s,u,g){var w=n.child;for(w!==null&&(w.return=n);w!==null;){var b=w.dependencies;if(b!==null){var M=w.child;b=b.firstContext;e:for(;b!==null;){var U=b;b=w;for(var Q=0;Q<s.length;Q++)if(U.context===s[Q]){b.lanes|=u,U=b.alternate,U!==null&&(U.lanes|=u),Fd(b.return,u,n),g||(M=null);break e}b=U.next}}else if(w.tag===18){if(M=w.return,M===null)throw Error(a(341));M.lanes|=u,b=M.alternate,b!==null&&(b.lanes|=u),Fd(M,u,n),M=null}else M=w.child;if(M!==null)M.return=w;else for(M=w;M!==null;){if(M===n){M=null;break}if(w=M.sibling,w!==null){w.return=M.return,M=w;break}M=M.return}w=M}}function Pc(n,s,u,g){n=null;for(var w=s,b=!1;w!==null;){if(!b){if(w.flags&524288)b=!0;else if(w.flags&262144)break}if(w.tag===10){var M=w.alternate;if(M===null)throw Error(a(387));if(M=M.memoizedProps,M!==null){var U=w.type;h(w.pendingProps.value,M.value)||(n!==null?n.push(U):n=[U])}}else if(w===cr.current){if(M=w.alternate,M===null)throw Error(a(387));M.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(n!==null?n.push(eu):n=[eu])}w=w.return}n!==null&&zd(s,n,u,g),s.flags|=262144}function fh(n){for(n=n.firstContext;n!==null;){if(!h(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ho(n){zo=n,da=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function $r(n){return lp(zo,n)}function dh(n,s){return zo===null&&Ho(n),lp(n,s)}function lp(n,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},da===null){if(n===null)throw Error(a(308));da=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else da=da.next=s;return u}var Xa=!1;function Hd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Qa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Wa(n,s,u){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,Gn&2){var w=g.pending;return w===null?s.next=s:(s.next=w.next,w.next=s),g.pending=s,s=Xu(n),Hg(n,null,u),s}return Yu(n,g,s,u),Xu(n)}function Bc(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194176)!==0)){var g=s.lanes;g&=n.pendingLanes,u|=g,s.lanes=u,Hi(n,u)}}function qd(n,s){var u=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var w=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?w=b=M:b=b.next=M,u=u.next}while(u!==null);b===null?w=b=s:b=b.next=s}else w=b=s;u={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:b,shared:g.shared,callbacks:g.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}var Yd=!1;function Uc(){if(Yd){var n=Cl;if(n!==null)throw n}}function Vc(n,s,u,g){Yd=!1;var w=n.updateQueue;Xa=!1;var b=w.firstBaseUpdate,M=w.lastBaseUpdate,U=w.shared.pending;if(U!==null){w.shared.pending=null;var Q=U,se=Q.next;Q.next=null,M===null?b=se:M.next=se,M=Q;var Ae=n.alternate;Ae!==null&&(Ae=Ae.updateQueue,U=Ae.lastBaseUpdate,U!==M&&(U===null?Ae.firstBaseUpdate=se:U.next=se,Ae.lastBaseUpdate=Q))}if(b!==null){var De=w.baseState;M=0,Ae=se=Q=null,U=b;do{var pe=U.lane&-536870913,we=pe!==U.lane;if(we?(Xt&pe)===pe:(g&pe)===pe){pe!==0&&pe===Tl&&(Yd=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var rt=n,bt=U;pe=s;var er=u;switch(bt.tag){case 1:if(rt=bt.payload,typeof rt=="function"){De=rt.call(er,De,pe);break e}De=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=bt.payload,pe=typeof rt=="function"?rt.call(er,De,pe):rt,pe==null)break e;De=Y({},De,pe);break e;case 2:Xa=!0}}pe=U.callback,pe!==null&&(n.flags|=64,we&&(n.flags|=8192),we=w.callbacks,we===null?w.callbacks=[pe]:we.push(pe))}else we={lane:pe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Ae===null?(se=Ae=we,Q=De):Ae=Ae.next=we,M|=pe;if(U=U.next,U===null){if(U=w.shared.pending,U===null)break;we=U,U=we.next,we.next=null,w.lastBaseUpdate=we,w.shared.pending=null}}while(!0);Ae===null&&(Q=De),w.baseState=Q,w.firstBaseUpdate=se,w.lastBaseUpdate=Ae,b===null&&(w.shared.lanes=0),eo|=M,n.lanes=M,n.memoizedState=De}}function cp(n,s){if(typeof n!="function")throw Error(a(191,n));n.call(s)}function up(n,s){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)cp(u[n],s)}function jc(n,s){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var w=g.next;u=w;do{if((u.tag&n)===n){g=void 0;var b=u.create,M=u.inst;g=b(),M.destroy=g}u=u.next}while(u!==w)}}catch(U){An(s,s.return,U)}}function Ka(n,s,u){try{var g=s.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var b=w.next;g=b;do{if((g.tag&n)===n){var M=g.inst,U=M.destroy;if(U!==void 0){M.destroy=void 0,w=s;var Q=u;try{U()}catch(se){An(w,Q,se)}}}g=g.next}while(g!==b)}}catch(se){An(s,s.return,se)}}function hp(n){var s=n.updateQueue;if(s!==null){var u=n.stateNode;try{up(s,u)}catch(g){An(n,n.return,g)}}}function fp(n,s,u){u.props=Fo(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(g){An(n,s,g)}}function Go(n,s){try{var u=n.ref;if(u!==null){var g=n.stateNode;switch(n.tag){case 26:case 27:case 5:var w=g;break;default:w=g}typeof u=="function"?n.refCleanup=u(w):u.current=w}}catch(b){An(n,s,b)}}function Oi(n,s){var u=n.ref,g=n.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(w){An(n,s,w)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(w){An(n,s,w)}else u.current=null}function dp(n){var s=n.type,u=n.memoizedProps,g=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(w){An(n,n.return,w)}}function gp(n,s,u){try{var g=n.stateNode;EA(g,n.type,u,s),g[zn]=s}catch(w){An(n,n.return,w)}}function mp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Xd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qd(n,s,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Sh));else if(g!==4&&g!==27&&(n=n.child,n!==null))for(Qd(n,s,u),n=n.sibling;n!==null;)Qd(n,s,u),n=n.sibling}function gh(n,s,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(g!==4&&g!==27&&(n=n.child,n!==null))for(gh(n,s,u),n=n.sibling;n!==null;)gh(n,s,u),n=n.sibling}var ma=!1,$n=!1,Wd=!1,pp=typeof WeakSet=="function"?WeakSet:Set,Nr=null,yp=!1;function W_(n,s){if(n=n.containerInfo,v0=Lh,n=T(n),N(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var w=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var M=0,U=-1,Q=-1,se=0,Ae=0,De=n,pe=null;t:for(;;){for(var we;De!==u||w!==0&&De.nodeType!==3||(U=M+w),De!==b||g!==0&&De.nodeType!==3||(Q=M+g),De.nodeType===3&&(M+=De.nodeValue.length),(we=De.firstChild)!==null;)pe=De,De=we;for(;;){if(De===n)break t;if(pe===u&&++se===w&&(U=M),pe===b&&++Ae===g&&(Q=M),(we=De.nextSibling)!==null)break;De=pe,pe=De.parentNode}De=we}u=U===-1||Q===-1?null:{start:U,end:Q}}else u=null}u=u||{start:0,end:0}}else u=null;for(b0={focusedElem:n,selectionRange:u},Lh=!1,Nr=s;Nr!==null;)if(s=Nr,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Nr=n;else for(;Nr!==null;){switch(s=Nr,b=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&b!==null){n=void 0,u=s,w=b.memoizedProps,b=b.memoizedState,g=u.stateNode;try{var rt=Fo(u.type,w,u.elementType===u.type);n=g.getSnapshotBeforeUpdate(rt,b),g.__reactInternalSnapshotBeforeUpdate=n}catch(bt){An(u,u.return,bt)}}break;case 3:if(n&1024){if(n=s.stateNode.containerInfo,u=n.nodeType,u===9)I0(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":I0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(a(163))}if(n=s.sibling,n!==null){n.return=s.return,Nr=n;break}Nr=s.return}return rt=yp,yp=!1,rt}function xp(n,s,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:ya(n,u),g&4&&jc(5,u);break;case 1:if(ya(n,u),g&4)if(n=u.stateNode,s===null)try{n.componentDidMount()}catch(U){An(u,u.return,U)}else{var w=Fo(u.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(w,s,n.__reactInternalSnapshotBeforeUpdate)}catch(U){An(u,u.return,U)}}g&64&&hp(u),g&512&&Go(u,u.return);break;case 3:if(ya(n,u),g&64&&(g=u.updateQueue,g!==null)){if(n=null,u.child!==null)switch(u.child.tag){case 27:case 5:n=u.child.stateNode;break;case 1:n=u.child.stateNode}try{up(g,n)}catch(U){An(u,u.return,U)}}break;case 26:ya(n,u),g&512&&Go(u,u.return);break;case 27:case 5:ya(n,u),s===null&&g&4&&dp(u),g&512&&Go(u,u.return);break;case 12:ya(n,u);break;case 13:ya(n,u),g&4&&_p(n,u);break;case 22:if(w=u.memoizedState!==null||ma,!w){s=s!==null&&s.memoizedState!==null||$n;var b=ma,M=$n;ma=w,($n=s)&&!M?Za(n,u,(u.subtreeFlags&8772)!==0):ya(n,u),ma=b,$n=M}g&512&&(u.memoizedProps.mode==="manual"?Go(u,u.return):Oi(u,u.return));break;default:ya(n,u)}}function Ep(n){var s=n.alternate;s!==null&&(n.alternate=null,Ep(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ea(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var gr=null,Li=!1;function pa(n,s,u){for(u=u.child;u!==null;)wp(n,s,u),u=u.sibling}function wp(n,s,u){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(an,u)}catch{}switch(u.tag){case 26:$n||Oi(u,s),pa(n,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:$n||Oi(u,s);var g=gr,w=Li;for(gr=u.stateNode,pa(n,s,u),u=u.stateNode,s=u.attributes;s.length;)u.removeAttributeNode(s[0]);ea(u),gr=g,Li=w;break;case 5:$n||Oi(u,s);case 6:w=gr;var b=Li;if(gr=null,pa(n,s,u),gr=w,Li=b,gr!==null)if(Li)try{n=gr,g=u.stateNode,n.nodeType===8?n.parentNode.removeChild(g):n.removeChild(g)}catch(M){An(u,s,M)}else try{gr.removeChild(u.stateNode)}catch(M){An(u,s,M)}break;case 18:gr!==null&&(Li?(s=gr,u=u.stateNode,s.nodeType===8?S0(s.parentNode,u):s.nodeType===1&&S0(s,u),iu(s)):S0(gr,u.stateNode));break;case 4:g=gr,w=Li,gr=u.stateNode.containerInfo,Li=!0,pa(n,s,u),gr=g,Li=w;break;case 0:case 11:case 14:case 15:$n||Ka(2,u,s),$n||Ka(4,u,s),pa(n,s,u);break;case 1:$n||(Oi(u,s),g=u.stateNode,typeof g.componentWillUnmount=="function"&&fp(u,s,g)),pa(n,s,u);break;case 21:pa(n,s,u);break;case 22:$n||Oi(u,s),$n=(g=$n)||u.memoizedState!==null,pa(n,s,u),$n=g;break;default:pa(n,s,u)}}function _p(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{iu(n)}catch(u){An(s,s.return,u)}}function K_(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new pp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new pp),s;default:throw Error(a(435,n.tag))}}function Kd(n,s){var u=K_(n);s.forEach(function(g){var w=cA.bind(null,n,g);u.has(g)||(u.add(g),g.then(w,w))})}function rs(n,s){var u=s.deletions;if(u!==null)for(var g=0;g<u.length;g++){var w=u[g],b=n,M=s,U=M;e:for(;U!==null;){switch(U.tag){case 27:case 5:gr=U.stateNode,Li=!1;break e;case 3:gr=U.stateNode.containerInfo,Li=!0;break e;case 4:gr=U.stateNode.containerInfo,Li=!0;break e}U=U.return}if(gr===null)throw Error(a(160));wp(b,M,w),gr=null,Li=!1,b=w.alternate,b!==null&&(b.return=null),w.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Ap(s,n),s=s.sibling}var Es=null;function Ap(n,s){var u=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:rs(s,n),is(n),g&4&&(Ka(3,n,n.return),jc(3,n),Ka(5,n,n.return));break;case 1:rs(s,n),is(n),g&512&&($n||u===null||Oi(u,u.return)),g&64&&ma&&(n=n.updateQueue,n!==null&&(g=n.callbacks,g!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var w=Es;if(rs(s,n),is(n),g&512&&($n||u===null||Oi(u,u.return)),g&4){var b=u!==null?u.memoizedState:null;if(g=n.memoizedState,u===null)if(g===null)if(n.stateNode===null){e:{g=n.type,u=n.memoizedProps,w=w.ownerDocument||w;t:switch(g){case"title":b=w.getElementsByTagName("title")[0],(!b||b[Os]||b[Rn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=w.createElement(g),w.head.insertBefore(b,w.querySelector("head > title"))),jr(b,g,u),b[Rn]=n,Jt(b),g=b;break e;case"link":var M=d2("link","href",w).get(g+(u.href||""));if(M){for(var U=0;U<M.length;U++)if(b=M[U],b.getAttribute("href")===(u.href==null?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(U,1);break t}}b=w.createElement(g),jr(b,g,u),w.head.appendChild(b);break;case"meta":if(M=d2("meta","content",w).get(g+(u.content||""))){for(U=0;U<M.length;U++)if(b=M[U],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(U,1);break t}}b=w.createElement(g),jr(b,g,u),w.head.appendChild(b);break;default:throw Error(a(468,g))}b[Rn]=n,Jt(b),g=b}n.stateNode=g}else g2(w,n.type,n.stateNode);else n.stateNode=f2(w,g,n.memoizedProps);else b!==g?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,g===null?g2(w,n.type,n.stateNode):f2(w,g,n.memoizedProps)):g===null&&n.stateNode!==null&&gp(n,n.memoizedProps,u.memoizedProps)}break;case 27:if(g&4&&n.alternate===null){w=n.stateNode,b=n.memoizedProps;try{for(var Q=w.firstChild;Q;){var se=Q.nextSibling,Ae=Q.nodeName;Q[Os]||Ae==="HEAD"||Ae==="BODY"||Ae==="SCRIPT"||Ae==="STYLE"||Ae==="LINK"&&Q.rel.toLowerCase()==="stylesheet"||w.removeChild(Q),Q=se}for(var De=n.type,pe=w.attributes;pe.length;)w.removeAttributeNode(pe[0]);jr(w,De,b),w[Rn]=n,w[zn]=b}catch(rt){An(n,n.return,rt)}}case 5:if(rs(s,n),is(n),g&512&&($n||u===null||Oi(u,u.return)),n.flags&32){w=n.stateNode;try{gi(w,"")}catch(rt){An(n,n.return,rt)}}g&4&&n.stateNode!=null&&(w=n.memoizedProps,gp(n,w,u!==null?u.memoizedProps:w)),g&1024&&(Wd=!0);break;case 6:if(rs(s,n),is(n),g&4){if(n.stateNode===null)throw Error(a(162));g=n.memoizedProps,u=n.stateNode;try{u.nodeValue=g}catch(rt){An(n,n.return,rt)}}break;case 3:if(Dh=null,w=Es,Es=Nh(s.containerInfo),rs(s,n),Es=w,is(n),g&4&&u!==null&&u.memoizedState.isDehydrated)try{iu(s.containerInfo)}catch(rt){An(n,n.return,rt)}Wd&&(Wd=!1,vp(n));break;case 4:g=Es,Es=Nh(n.stateNode.containerInfo),rs(s,n),is(n),Es=g;break;case 12:rs(s,n),is(n);break;case 13:rs(s,n),is(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(s0=sn()),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Kd(n,g)));break;case 22:if(g&512&&($n||u===null||Oi(u,u.return)),Q=n.memoizedState!==null,se=u!==null&&u.memoizedState!==null,Ae=ma,De=$n,ma=Ae||Q,$n=De||se,rs(s,n),$n=De,ma=Ae,is(n),s=n.stateNode,s._current=n,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,g&8192&&(s._visibility=Q?s._visibility&-2:s._visibility|1,Q&&(s=ma||$n,u===null||se||s||Rl(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(u=null,s=n;;){if(s.tag===5||s.tag===26||s.tag===27){if(u===null){se=u=s;try{if(w=se.stateNode,Q)b=w.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{M=se.stateNode,U=se.memoizedProps.style;var we=U!=null&&U.hasOwnProperty("display")?U.display:null;M.style.display=we==null||typeof we=="boolean"?"":(""+we).trim()}}catch(rt){An(se,se.return,rt)}}}else if(s.tag===6){if(u===null){se=s;try{se.stateNode.nodeValue=Q?"":se.memoizedProps}catch(rt){An(se,se.return,rt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=n.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Kd(n,u))));break;case 19:rs(s,n),is(n),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Kd(n,g)));break;case 21:break;default:rs(s,n),is(n)}}function is(n){var s=n.flags;if(s&2){try{if(n.tag!==27){e:{for(var u=n.return;u!==null;){if(mp(u)){var g=u;break e}u=u.return}throw Error(a(160))}switch(g.tag){case 27:var w=g.stateNode,b=Xd(n);gh(n,b,w);break;case 5:var M=g.stateNode;g.flags&32&&(gi(M,""),g.flags&=-33);var U=Xd(n);gh(n,U,M);break;case 3:case 4:var Q=g.stateNode.containerInfo,se=Xd(n);Qd(n,se,Q);break;default:throw Error(a(161))}}}catch(Ae){An(n,n.return,Ae)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function vp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;vp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ya(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)xp(n,s.alternate,s),s=s.sibling}function Rl(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ka(4,s,s.return),Rl(s);break;case 1:Oi(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&fp(s,s.return,u),Rl(s);break;case 26:case 27:case 5:Oi(s,s.return),Rl(s);break;case 22:Oi(s,s.return),s.memoizedState===null&&Rl(s);break;default:Rl(s)}n=n.sibling}}function Za(n,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,w=n,b=s,M=b.flags;switch(b.tag){case 0:case 11:case 15:Za(w,b,u),jc(4,b);break;case 1:if(Za(w,b,u),g=b,w=g.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(se){An(g,g.return,se)}if(g=b,w=g.updateQueue,w!==null){var U=g.stateNode;try{var Q=w.shared.hiddenCallbacks;if(Q!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Q.length;w++)cp(Q[w],U)}catch(se){An(g,g.return,se)}}u&&M&64&&hp(b),Go(b,b.return);break;case 26:case 27:case 5:Za(w,b,u),u&&g===null&&M&4&&dp(b),Go(b,b.return);break;case 12:Za(w,b,u);break;case 13:Za(w,b,u),u&&M&4&&_p(w,b);break;case 22:b.memoizedState===null&&Za(w,b,u),Go(b,b.return);break;default:Za(w,b,u)}s=s.sibling}}function Zd(n,s){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&Rc(u))}function $d(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Rc(n))}function $a(n,s,u,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)bp(n,s,u,g),s=s.sibling}function bp(n,s,u,g){var w=s.flags;switch(s.tag){case 0:case 11:case 15:$a(n,s,u,g),w&2048&&jc(9,s);break;case 3:$a(n,s,u,g),w&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Rc(n)));break;case 12:if(w&2048){$a(n,s,u,g),n=s.stateNode;try{var b=s.memoizedProps,M=b.id,U=b.onPostCommit;typeof U=="function"&&U(M,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Q){An(s,s.return,Q)}}else $a(n,s,u,g);break;case 23:break;case 22:b=s.stateNode,s.memoizedState!==null?b._visibility&4?$a(n,s,u,g):Fc(n,s):b._visibility&4?$a(n,s,u,g):(b._visibility|=4,Dl(n,s,u,g,(s.subtreeFlags&10256)!==0)),w&2048&&Zd(s.alternate,s);break;case 24:$a(n,s,u,g),w&2048&&$d(s.alternate,s);break;default:$a(n,s,u,g)}}function Dl(n,s,u,g,w){for(w=w&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var b=n,M=s,U=u,Q=g,se=M.flags;switch(M.tag){case 0:case 11:case 15:Dl(b,M,U,Q,w),jc(8,M);break;case 23:break;case 22:var Ae=M.stateNode;M.memoizedState!==null?Ae._visibility&4?Dl(b,M,U,Q,w):Fc(b,M):(Ae._visibility|=4,Dl(b,M,U,Q,w)),w&&se&2048&&Zd(M.alternate,M);break;case 24:Dl(b,M,U,Q,w),w&&se&2048&&$d(M.alternate,M);break;default:Dl(b,M,U,Q,w)}s=s.sibling}}function Fc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=n,g=s,w=g.flags;switch(g.tag){case 22:Fc(u,g),w&2048&&Zd(g.alternate,g);break;case 24:Fc(u,g),w&2048&&$d(g.alternate,g);break;default:Fc(u,g)}s=s.sibling}}var zc=8192;function Ml(n){if(n.subtreeFlags&zc)for(n=n.child;n!==null;)Tp(n),n=n.sibling}function Tp(n){switch(n.tag){case 26:Ml(n),n.flags&zc&&n.memoizedState!==null&&UA(Es,n.memoizedState,n.memoizedProps);break;case 5:Ml(n);break;case 3:case 4:var s=Es;Es=Nh(n.stateNode.containerInfo),Ml(n),Es=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=zc,zc=16777216,Ml(n),zc=s):Ml(n));break;default:Ml(n)}}function Cp(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Hc(n){var s=n.deletions;if(n.flags&16){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Nr=g,Ip(g,n)}Cp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Sp(n),n=n.sibling}function Sp(n){switch(n.tag){case 0:case 11:case 15:Hc(n),n.flags&2048&&Ka(9,n,n.return);break;case 3:Hc(n);break;case 12:Hc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&4&&(n.return===null||n.return.tag!==13)?(s._visibility&=-5,mh(n)):Hc(n);break;default:Hc(n)}}function mh(n){var s=n.deletions;if(n.flags&16){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Nr=g,Ip(g,n)}Cp(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ka(8,s,s.return),mh(s);break;case 22:u=s.stateNode,u._visibility&4&&(u._visibility&=-5,mh(s));break;default:mh(s)}n=n.sibling}}function Ip(n,s){for(;Nr!==null;){var u=Nr;switch(u.tag){case 0:case 11:case 15:Ka(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Rc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Nr=g;else e:for(u=n;Nr!==null;){g=Nr;var w=g.sibling,b=g.return;if(Ep(g),g===u){Nr=null;break e}if(w!==null){w.return=b,Nr=w;break e}Nr=b}}}function Z_(n,s,u,g){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(n,s,u,g){return new Z_(n,s,u,g)}function Jd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ja(n,s){var u=n.alternate;return u===null?(u=ss(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&31457280,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function Np(n,s){n.flags&=31457282;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,s=u.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ph(n,s,u,g,w,b){var M=0;if(g=n,typeof n=="function")Jd(n)&&(M=1);else if(typeof n=="string")M=PA(n,u,ht.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case _:return qo(u.children,w,b,s);case E:M=8,w|=24;break;case C:return n=ss(12,u,s,w|2),n.elementType=C,n.lanes=b,n;case J:return n=ss(13,u,s,w),n.elementType=J,n.lanes=b,n;case W:return n=ss(19,u,s,w),n.elementType=W,n.lanes=b,n;case re:return Rp(u,w,b,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:case j:M=10;break e;case k:M=9;break e;case G:M=11;break e;case he:M=14;break e;case fe:M=16,g=null;break e}M=29,u=Error(a(130,n===null?"null":typeof n,"")),g=null}return s=ss(M,u,s,w),s.elementType=n,s.type=g,s.lanes=b,s}function qo(n,s,u,g){return n=ss(7,n,g,s),n.lanes=u,n}function Rp(n,s,u,g){n=ss(22,n,g,s),n.elementType=re,n.lanes=u;var w={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var b=w._current;if(b===null)throw Error(a(456));if(!(w._pendingVisibility&2)){var M=Fa(b,2);M!==null&&(w._pendingVisibility|=2,ui(M,b,2))}},attach:function(){var b=w._current;if(b===null)throw Error(a(456));if(w._pendingVisibility&2){var M=Fa(b,2);M!==null&&(w._pendingVisibility&=-3,ui(M,b,2))}}};return n.stateNode=w,n}function e0(n,s,u){return n=ss(6,n,null,s),n.lanes=u,n}function t0(n,s,u){return s=ss(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function xa(n){n.flags|=4}function Dp(n,s){if(s.type!=="stylesheet"||s.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!m2(s)){if(s=ns.current,s!==null&&((Xt&4194176)===Xt?Fs!==null:(Xt&62914560)!==Xt&&!(Xt&536870912)||s!==Fs))throw Sc=ad,Qg;n.flags|=8192}}function yh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?pt():536870912,n.lanes|=s,Ll|=s)}function Gc(n,s){if(!nn)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function Hn(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,g=0;if(s)for(var w=n.child;w!==null;)u|=w.lanes|w.childLanes,g|=w.subtreeFlags&31457280,g|=w.flags&31457280,w.return=n,w=w.sibling;else for(w=n.child;w!==null;)u|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=n,w=w.sibling;return n.subtreeFlags|=g,n.childLanes=u,s}function $_(n,s,u){var g=s.pendingProps;switch(id(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(s),null;case 1:return Hn(s),null;case 3:return u=s.stateNode,g=null,n!==null&&(g=n.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),ga(Ar),Yn(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(vc(s)?xa(s):n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,xs!==null&&(c0(xs),xs=null))),Hn(s),null;case 26:return u=s.memoizedState,n===null?(xa(s),u!==null?(Hn(s),Dp(s,u)):(Hn(s),s.flags&=-16777217)):u?u!==n.memoizedState?(xa(s),Hn(s),Dp(s,u)):(Hn(s),s.flags&=-16777217):(n.memoizedProps!==g&&xa(s),Hn(s),s.flags&=-16777217),null;case 27:Ct(s),u=gt.current;var w=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==g&&xa(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Hn(s),null}n=ht.current,vc(s)?Yg(s):(n=o2(w,g,u),s.stateNode=n,xa(s))}return Hn(s),null;case 5:if(Ct(s),u=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==g&&xa(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Hn(s),null}if(n=ht.current,vc(s))Yg(s);else{switch(w=Ih(gt.current),n){case 1:n=w.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:n=w.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":n=w.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":n=w.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof g.is=="string"?w.createElement("select",{is:g.is}):w.createElement("select"),g.multiple?n.multiple=!0:g.size&&(n.size=g.size);break;default:n=typeof g.is=="string"?w.createElement(u,{is:g.is}):w.createElement(u)}}n[Rn]=s,n[zn]=g;e:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)n.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break e;for(;w.sibling===null;){if(w.return===null||w.return===s)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=n;e:switch(jr(n,u,g),u){case"button":case"input":case"select":case"textarea":n=!!g.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&xa(s)}}return Hn(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==g&&xa(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(n=gt.current,vc(s)){if(n=s.stateNode,u=s.memoizedProps,g=null,w=ci,w!==null)switch(w.tag){case 27:case 5:g=w.memoizedProps}n[Rn]=s,n=!!(n.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||t2(n.nodeValue,u)),n||ko(s)}else n=Ih(n).createTextNode(g),n[Rn]=s,s.stateNode=n}return Hn(s),null;case 13:if(g=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(w=vc(s),g!==null&&g.dehydrated!==null){if(n===null){if(!w)throw Error(a(318));if(w=s.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));w[Rn]=s}else bc(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Hn(s),w=!1}else xs!==null&&(c0(xs),xs=null),w=!0;if(!w)return s.flags&256?(ua(s),s):(ua(s),null)}if(ua(s),s.flags&128)return s.lanes=u,s;if(u=g!==null,n=n!==null&&n.memoizedState!==null,u){g=s.child,w=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(w=g.alternate.memoizedState.cachePool.pool);var b=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(b=g.memoizedState.cachePool.pool),b!==w&&(g.flags|=2048)}return u!==n&&u&&(s.child.flags|=8192),yh(s,s.updateQueue),Hn(s),null;case 4:return Yn(),n===null&&w0(s.stateNode.containerInfo),Hn(s),null;case 10:return ga(s.type),Hn(s),null;case 19:if(nt(_r),w=s.memoizedState,w===null)return Hn(s),null;if(g=(s.flags&128)!==0,b=w.rendering,b===null)if(g)Gc(w,!1);else{if(Jn!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(b=eh(n),b!==null){for(s.flags|=128,Gc(w,!1),n=b.updateQueue,s.updateQueue=n,yh(s,n),s.subtreeFlags=0,n=u,u=s.child;u!==null;)Np(u,n),u=u.sibling;return tt(_r,_r.current&1|2),s.child}n=n.sibling}w.tail!==null&&sn()>xh&&(s.flags|=128,g=!0,Gc(w,!1),s.lanes=4194304)}else{if(!g)if(n=eh(b),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,yh(s,n),Gc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!b.alternate&&!nn)return Hn(s),null}else 2*sn()-w.renderingStartTime>xh&&u!==536870912&&(s.flags|=128,g=!0,Gc(w,!1),s.lanes=4194304);w.isBackwards?(b.sibling=s.child,s.child=b):(n=w.last,n!==null?n.sibling=b:s.child=b,w.last=b)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=sn(),s.sibling=null,n=_r.current,tt(_r,g?n&1|2:n&1),s):(Hn(s),null);case 22:case 23:return ua(s),ld(),g=s.memoizedState!==null,n!==null?n.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?u&536870912&&!(s.flags&128)&&(Hn(s),s.subtreeFlags&6&&(s.flags|=8192)):Hn(s),u=s.updateQueue,u!==null&&yh(s,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==u&&(s.flags|=2048),n!==null&&nt(Bo),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ga(Ar),Hn(s),null;case 25:return null}throw Error(a(156,s.tag))}function J_(n,s){switch(id(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ga(Ar),Yn(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ct(s),null;case 13:if(ua(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(a(340));bc()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return nt(_r),null;case 4:return Yn(),null;case 10:return ga(s.type),null;case 22:case 23:return ua(s),ld(),n!==null&&nt(Bo),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ga(Ar),null;case 25:return null;default:return null}}function Mp(n,s){switch(id(s),s.tag){case 3:ga(Ar),Yn();break;case 26:case 27:case 5:Ct(s);break;case 4:Yn();break;case 13:ua(s);break;case 19:nt(_r);break;case 10:ga(s.type);break;case 22:case 23:ua(s),ld(),n!==null&&nt(Bo);break;case 24:ga(Ar)}}var eA={getCacheForType:function(n){var s=$r(Ar),u=s.data.get(n);return u===void 0&&(u=n(),s.data.set(n,u)),u}},tA=typeof WeakMap=="function"?WeakMap:Map,Gn=0,Tn=null,Pt=null,Xt=0,Cn=0,ki=null,Ea=!1,Ol=!1,n0=!1,wa=0,Jn=0,eo=0,Yo=0,r0=0,as=0,Ll=0,qc=null,Hs=null,i0=!1,s0=0,xh=1/0,Eh=null,to=null,wh=!1,Xo=null,Yc=0,a0=0,o0=null,Xc=0,l0=null;function Pi(){if(Gn&2&&Xt!==0)return Xt&-Xt;if(P.T!==null){var n=Tl;return n!==0?n:p0()}return Gi()}function Op(){as===0&&(as=!(Xt&536870912)||nn?Pe():536870912);var n=ns.current;return n!==null&&(n.flags|=32),as}function ui(n,s,u){(n===Tn&&Cn===2||n.cancelPendingCommit!==null)&&(kl(n,0),_a(n,Xt,as,!1)),Je(n,u),(!(Gn&2)||n!==Tn)&&(n===Tn&&(!(Gn&2)&&(Yo|=u),Jn===4&&_a(n,Xt,as,!1)),Gs(n))}function Lp(n,s,u){if(Gn&6)throw Error(a(327));var g=!u&&(s&60)===0&&(s&n.expiredLanes)===0||Qn(n,s),w=g?iA(n,s):f0(n,s,!0),b=g;do{if(w===0){Ol&&!g&&_a(n,s,0,!1);break}else if(w===6)_a(n,s,0,!Ea);else{if(u=n.current.alternate,b&&!nA(u)){w=f0(n,s,!1),b=!1;continue}if(w===2){if(b=s,n.errorRecoveryDisabledLanes&b)var M=0;else M=n.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){s=M;e:{var U=n;w=qc;var Q=U.current.memoizedState.isDehydrated;if(Q&&(kl(U,M).flags|=256),M=f0(U,M,!1),M!==2){if(n0&&!Q){U.errorRecoveryDisabledLanes|=b,Yo|=b,w=4;break e}b=Hs,Hs=w,b!==null&&c0(b)}w=M}if(b=!1,w!==2)continue}}if(w===1){kl(n,0),_a(n,s,0,!0);break}e:{switch(g=n,w){case 0:case 1:throw Error(a(345));case 4:if((s&4194176)===s){_a(g,s,as,!Ea);break e}break;case 2:Hs=null;break;case 3:case 5:break;default:throw Error(a(329))}if(g.finishedWork=u,g.finishedLanes=s,(s&62914560)===s&&(b=s0+300-sn(),10<b)){if(_a(g,s,as,!Ea),Or(g,0)!==0)break e;g.timeoutHandle=i2(kp.bind(null,g,u,Hs,Eh,i0,s,as,Yo,Ll,Ea,2,-0,0),b);break e}kp(g,u,Hs,Eh,i0,s,as,Yo,Ll,Ea,0,-0,0)}}break}while(!0);Gs(n)}function c0(n){Hs===null?Hs=n:Hs.push.apply(Hs,n)}function kp(n,s,u,g,w,b,M,U,Q,se,Ae,De,pe){var we=s.subtreeFlags;if((we&8192||(we&16785408)===16785408)&&(Jc={stylesheets:null,count:0,unsuspend:BA},Tp(s),s=VA(),s!==null)){n.cancelPendingCommit=s(zp.bind(null,n,u,g,w,M,U,Q,1,De,pe)),_a(n,b,M,!se);return}zp(n,u,g,w,M,U,Q,Ae,De,pe)}function nA(n){for(var s=n;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var w=u[g],b=w.getSnapshot;w=w.value;try{if(!h(b(),w))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _a(n,s,u,g){s&=~r0,s&=~Yo,n.suspendedLanes|=s,n.pingedLanes&=~s,g&&(n.warmLanes|=s),g=n.expirationTimes;for(var w=s;0<w;){var b=31-Nt(w),M=1<<b;g[b]=-1,w&=~M}u!==0&&Xr(n,u,s)}function _h(){return Gn&6?!0:(Qc(0),!1)}function u0(){if(Pt!==null){if(Cn===0)var n=Pt.return;else n=Pt,da=zo=null,pd(n),vl=null,Ic=0,n=Pt;for(;n!==null;)Mp(n.alternate,n),n=n.return;Pt=null}}function kl(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,_A(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),u0(),Tn=n,Pt=u=Ja(n.current,null),Xt=s,Cn=0,ki=null,Ea=!1,Ol=Qn(n,s),n0=!1,Ll=as=r0=Yo=eo=Jn=0,Hs=qc=null,i0=!1,s&8&&(s|=s&32);var g=n.entangledLanes;if(g!==0)for(n=n.entanglements,g&=s;0<g;){var w=31-Nt(g),b=1<<w;s|=n[w],g&=~b}return wa=s,qu(),u}function Pp(n,s){Mt=null,P.H=zs,s===Cc?(s=Zg(),Cn=3):s===Qg?(s=Zg(),Cn=4):Cn=s===Wm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ki=s,Pt===null&&(Jn=1,hh(n,Ji(s,n.current)))}function Bp(){var n=P.H;return P.H=zs,n===null?zs:n}function Up(){var n=P.A;return P.A=eA,n}function h0(){Jn=4,Ea||(Xt&4194176)!==Xt&&ns.current!==null||(Ol=!0),!(eo&134217727)&&!(Yo&134217727)||Tn===null||_a(Tn,Xt,as,!1)}function f0(n,s,u){var g=Gn;Gn|=2;var w=Bp(),b=Up();(Tn!==n||Xt!==s)&&(Eh=null,kl(n,s)),s=!1;var M=Jn;e:do try{if(Cn!==0&&Pt!==null){var U=Pt,Q=ki;switch(Cn){case 8:u0(),M=6;break e;case 3:case 2:case 6:ns.current===null&&(s=!0);var se=Cn;if(Cn=0,ki=null,Pl(n,U,Q,se),u&&Ol){M=0;break e}break;default:se=Cn,Cn=0,ki=null,Pl(n,U,Q,se)}}rA(),M=Jn;break}catch(Ae){Pp(n,Ae)}while(!0);return s&&n.shellSuspendCounter++,da=zo=null,Gn=g,P.H=w,P.A=b,Pt===null&&(Tn=null,Xt=0,qu()),M}function rA(){for(;Pt!==null;)Vp(Pt)}function iA(n,s){var u=Gn;Gn|=2;var g=Bp(),w=Up();Tn!==n||Xt!==s?(Eh=null,xh=sn()+500,kl(n,s)):Ol=Qn(n,s);e:do try{if(Cn!==0&&Pt!==null){s=Pt;var b=ki;t:switch(Cn){case 1:Cn=0,ki=null,Pl(n,s,b,1);break;case 2:if(Wg(b)){Cn=0,ki=null,jp(s);break}s=function(){Cn===2&&Tn===n&&(Cn=7),Gs(n)},b.then(s,s);break e;case 3:Cn=7;break e;case 4:Cn=5;break e;case 7:Wg(b)?(Cn=0,ki=null,jp(s)):(Cn=0,ki=null,Pl(n,s,b,7));break;case 5:var M=null;switch(Pt.tag){case 26:M=Pt.memoizedState;case 5:case 27:var U=Pt;if(!M||m2(M)){Cn=0,ki=null;var Q=U.sibling;if(Q!==null)Pt=Q;else{var se=U.return;se!==null?(Pt=se,Ah(se)):Pt=null}break t}}Cn=0,ki=null,Pl(n,s,b,5);break;case 6:Cn=0,ki=null,Pl(n,s,b,6);break;case 8:u0(),Jn=6;break e;default:throw Error(a(462))}}sA();break}catch(Ae){Pp(n,Ae)}while(!0);return da=zo=null,P.H=g,P.A=w,Gn=u,Pt!==null?0:(Tn=null,Xt=0,qu(),Jn)}function sA(){for(;Pt!==null&&!Is();)Vp(Pt)}function Vp(n){var s=op(n.alternate,n,wa);n.memoizedProps=n.pendingProps,s===null?Ah(n):Pt=s}function jp(n){var s=n,u=s.alternate;switch(s.tag){case 15:case 0:s=tp(u,s,s.pendingProps,s.type,void 0,Xt);break;case 11:s=tp(u,s,s.pendingProps,s.type.render,s.ref,Xt);break;case 5:pd(s);default:Mp(u,s),s=Pt=Np(s,wa),s=op(u,s,wa)}n.memoizedProps=n.pendingProps,s===null?Ah(n):Pt=s}function Pl(n,s,u,g){da=zo=null,pd(s),vl=null,Ic=0;var w=s.return;try{if(X_(n,w,s,u,Xt)){Jn=1,hh(n,Ji(u,n.current)),Pt=null;return}}catch(b){if(w!==null)throw Pt=w,b;Jn=1,hh(n,Ji(u,n.current)),Pt=null;return}s.flags&32768?(nn||g===1?n=!0:Ol||Xt&536870912?n=!1:(Ea=n=!0,(g===2||g===3||g===6)&&(g=ns.current,g!==null&&g.tag===13&&(g.flags|=16384))),Fp(s,n)):Ah(s)}function Ah(n){var s=n;do{if(s.flags&32768){Fp(s,Ea);return}n=s.return;var u=$_(s.alternate,s,wa);if(u!==null){Pt=u;return}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=n}while(s!==null);Jn===0&&(Jn=5)}function Fp(n,s){do{var u=J_(n.alternate,n);if(u!==null){u.flags&=32767,Pt=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(n=n.sibling,n!==null)){Pt=n;return}Pt=n=u}while(n!==null);Jn=6,Pt=null}function zp(n,s,u,g,w,b,M,U,Q,se){var Ae=P.T,De=Oe.p;try{Oe.p=2,P.T=null,aA(n,s,u,g,De,w,b,M,U,Q,se)}finally{P.T=Ae,Oe.p=De}}function aA(n,s,u,g,w,b,M,U){do Bl();while(Xo!==null);if(Gn&6)throw Error(a(327));var Q=n.finishedWork;if(g=n.finishedLanes,Q===null)return null;if(n.finishedWork=null,n.finishedLanes=0,Q===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var se=Q.lanes|Q.childLanes;if(se|=td,En(n,g,se,b,M,U),n===Tn&&(Pt=Tn=null,Xt=0),!(Q.subtreeFlags&10256)&&!(Q.flags&10256)||wh||(wh=!0,a0=se,o0=u,uA(Nn,function(){return Bl(),null})),u=(Q.flags&15990)!==0,Q.subtreeFlags&15990||u?(u=P.T,P.T=null,b=Oe.p,Oe.p=2,M=Gn,Gn|=4,W_(n,Q),Ap(Q,n),L(b0,n.containerInfo),Lh=!!v0,b0=v0=null,n.current=Q,xp(n,Q.alternate,Q),zi(),Gn=M,Oe.p=b,P.T=u):n.current=Q,wh?(wh=!1,Xo=n,Yc=g):Hp(n,se),se=n.pendingLanes,se===0&&(to=null),xn(Q.stateNode),Gs(n),s!==null)for(w=n.onRecoverableError,Q=0;Q<s.length;Q++)se=s[Q],w(se.value,{componentStack:se.stack});return Yc&3&&Bl(),se=n.pendingLanes,g&4194218&&se&42?n===l0?Xc++:(Xc=0,l0=n):Xc=0,Qc(0),null}function Hp(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Rc(s)))}function Bl(){if(Xo!==null){var n=Xo,s=a0;a0=0;var u=xr(Yc),g=P.T,w=Oe.p;try{if(Oe.p=32>u?32:u,P.T=null,Xo===null)var b=!1;else{u=o0,o0=null;var M=Xo,U=Yc;if(Xo=null,Yc=0,Gn&6)throw Error(a(331));var Q=Gn;if(Gn|=4,Sp(M.current),bp(M,M.current,U,u),Gn=Q,Qc(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(an,M)}catch{}b=!0}return b}finally{Oe.p=w,P.T=g,Hp(n,s)}}return!1}function Gp(n,s,u){s=Ji(u,s),s=Rd(n.stateNode,s,2),n=Wa(n,s,2),n!==null&&(Je(n,2),Gs(n))}function An(n,s,u){if(n.tag===3)Gp(n,n,u);else for(;s!==null;){if(s.tag===3){Gp(s,n,u);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(to===null||!to.has(g))){n=Ji(u,n),u=Xm(2),g=Wa(s,u,2),g!==null&&(Qm(u,g,s,n),Je(g,2),Gs(g));break}}s=s.return}}function d0(n,s,u){var g=n.pingCache;if(g===null){g=n.pingCache=new tA;var w=new Set;g.set(s,w)}else w=g.get(s),w===void 0&&(w=new Set,g.set(s,w));w.has(u)||(n0=!0,w.add(u),n=oA.bind(null,n,s,u),s.then(n,n))}function oA(n,s,u){var g=n.pingCache;g!==null&&g.delete(s),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,Tn===n&&(Xt&u)===u&&(Jn===4||Jn===3&&(Xt&62914560)===Xt&&300>sn()-s0?!(Gn&2)&&kl(n,0):r0|=u,Ll===Xt&&(Ll=0)),Gs(n)}function qp(n,s){s===0&&(s=pt()),n=Fa(n,s),n!==null&&(Je(n,s),Gs(n))}function lA(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),qp(n,u)}function cA(n,s){var u=0;switch(n.tag){case 13:var g=n.stateNode,w=n.memoizedState;w!==null&&(u=w.retryLane);break;case 19:g=n.stateNode;break;case 22:g=n.stateNode._retryCache;break;default:throw Error(a(314))}g!==null&&g.delete(s),qp(n,u)}function uA(n,s){return yn(n,s)}var vh=null,Ul=null,g0=!1,bh=!1,m0=!1,Qo=0;function Gs(n){n!==Ul&&n.next===null&&(Ul===null?vh=Ul=n:Ul=Ul.next=n),bh=!0,g0||(g0=!0,fA(hA))}function Qc(n,s){if(!m0&&bh){m0=!0;do for(var u=!1,g=vh;g!==null;){if(n!==0){var w=g.pendingLanes;if(w===0)var b=0;else{var M=g.suspendedLanes,U=g.pingedLanes;b=(1<<31-Nt(42|n)+1)-1,b&=w&~(M&~U),b=b&201326677?b&201326677|1:b?b|2:0}b!==0&&(u=!0,Qp(g,b))}else b=Xt,b=Or(g,g===Tn?b:0),!(b&3)||Qn(g,b)||(u=!0,Qp(g,b));g=g.next}while(u);m0=!1}}function hA(){bh=g0=!1;var n=0;Qo!==0&&(wA()&&(n=Qo),Qo=0);for(var s=sn(),u=null,g=vh;g!==null;){var w=g.next,b=Yp(g,s);b===0?(g.next=null,u===null?vh=w:u.next=w,w===null&&(Ul=u)):(u=g,(n!==0||b&3)&&(bh=!0)),g=w}Qc(n)}function Yp(n,s){for(var u=n.suspendedLanes,g=n.pingedLanes,w=n.expirationTimes,b=n.pendingLanes&-62914561;0<b;){var M=31-Nt(b),U=1<<M,Q=w[M];Q===-1?(!(U&u)||U&g)&&(w[M]=de(U,s)):Q<=s&&(n.expiredLanes|=U),b&=~U}if(s=Tn,u=Xt,u=Or(n,n===s?u:0),g=n.callbackNode,u===0||n===s&&Cn===2||n.cancelPendingCommit!==null)return g!==null&&g!==null&&We(g),n.callbackNode=null,n.callbackPriority=0;if(!(u&3)||Qn(n,u)){if(s=u&-u,s===n.callbackPriority)return s;switch(g!==null&&We(g),xr(u)){case 2:case 8:u=In;break;case 32:u=Nn;break;case 268435456:u=Rs;break;default:u=Nn}return g=Xp.bind(null,n),u=yn(u,g),n.callbackPriority=s,n.callbackNode=u,s}return g!==null&&g!==null&&We(g),n.callbackPriority=2,n.callbackNode=null,2}function Xp(n,s){var u=n.callbackNode;if(Bl()&&n.callbackNode!==u)return null;var g=Xt;return g=Or(n,n===Tn?g:0),g===0?null:(Lp(n,g,s),Yp(n,sn()),n.callbackNode!=null&&n.callbackNode===u?Xp.bind(null,n):null)}function Qp(n,s){if(Bl())return null;Lp(n,s,!0)}function fA(n){AA(function(){Gn&6?yn(Kt,n):n()})}function p0(){return Qo===0&&(Qo=Pe()),Qo}function Wp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:mi(""+n)}function Kp(n,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,n.id&&u.setAttribute("form",n.id),s.parentNode.insertBefore(u,s),n=new FormData(n),u.parentNode.removeChild(u),n}function dA(n,s,u,g,w){if(s==="submit"&&u&&u.stateNode===w){var b=Wp((w[zn]||null).action),M=g.submitter;M&&(s=(s=M[zn]||null)?Wp(s.formAction):M.getAttribute("formAction"),s!==null&&(b=s,M=null));var U=new Zi("action","action",null,g,w);n.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Qo!==0){var Q=M?Kp(w,M):new FormData(w);Td(u,{pending:!0,data:Q,method:w.method,action:b},null,Q)}}else typeof b=="function"&&(U.preventDefault(),Q=M?Kp(w,M):new FormData(w),Td(u,{pending:!0,data:Q,method:w.method,action:b},b,Q))},currentTarget:w}]})}}for(var y0=0;y0<Gu.length;y0++){var x0=Gu[y0],gA=x0.toLowerCase(),mA=x0[0].toUpperCase()+x0.slice(1);Mi(gA,"on"+mA)}Mi(Pr,"onAnimationEnd"),Mi(Ai,"onAnimationIteration"),Mi(Br,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(fn,"onTransitionRun"),Mi(wr,"onTransitionStart"),Mi(li,"onTransitionCancel"),Mi(aa,"onTransitionEnd"),Lt("onMouseEnter",["mouseout","mouseover"]),Lt("onMouseLeave",["mouseout","mouseover"]),Lt("onPointerEnter",["pointerout","pointerover"]),Lt("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function Zp(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var g=n[u],w=g.event;g=g.listeners;e:{var b=void 0;if(s)for(var M=g.length-1;0<=M;M--){var U=g[M],Q=U.instance,se=U.currentTarget;if(U=U.listener,Q!==b&&w.isPropagationStopped())break e;b=U,w.currentTarget=se;try{b(w)}catch(Ae){uh(Ae)}w.currentTarget=null,b=Q}else for(M=0;M<g.length;M++){if(U=g[M],Q=U.instance,se=U.currentTarget,U=U.listener,Q!==b&&w.isPropagationStopped())break e;b=U,w.currentTarget=se;try{b(w)}catch(Ae){uh(Ae)}w.currentTarget=null,b=Q}}}}function qt(n,s){var u=s[fi];u===void 0&&(u=s[fi]=new Set);var g=n+"__bubble";u.has(g)||($p(s,n,2,!1),u.add(g))}function E0(n,s,u){var g=0;s&&(g|=4),$p(u,n,g,s)}var Th="_reactListening"+Math.random().toString(36).slice(2);function w0(n){if(!n[Th]){n[Th]=!0,ta.forEach(function(u){u!=="selectionchange"&&(pA.has(u)||E0(u,!1,n),E0(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Th]||(s[Th]=!0,E0("selectionchange",!1,s))}}function $p(n,s,u,g){switch(_2(s)){case 2:var w=zA;break;case 8:w=HA;break;default:w=O0}u=w.bind(null,s,u,n),w=void 0,!ut||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(w=!0),g?w!==void 0?n.addEventListener(s,u,{capture:!0,passive:w}):n.addEventListener(s,u,!0):w!==void 0?n.addEventListener(s,u,{passive:w}):n.addEventListener(s,u,!1)}function _0(n,s,u,g,w){var b=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var U=g.stateNode.containerInfo;if(U===w||U.nodeType===8&&U.parentNode===w)break;if(M===4)for(M=g.return;M!==null;){var Q=M.tag;if((Q===3||Q===4)&&(Q=M.stateNode.containerInfo,Q===w||Q.nodeType===8&&Q.parentNode===w))return;M=M.return}for(;U!==null;){if(M=Wn(U),M===null)return;if(Q=M.tag,Q===5||Q===6||Q===26||Q===27){g=b=M;continue e}U=U.parentNode}}g=g.return}lt(function(){var se=b,Ae=Ls(u),De=[];e:{var pe=oa.get(n);if(pe!==void 0){var we=Zi,rt=n;switch(n){case"keypress":if(Ki(u)===0)break e;case"keydown":case"keyup":we=Us;break;case"focusin":rt="focus",we=ps;break;case"focusout":rt="blur",we=ps;break;case"beforeblur":case"afterblur":we=ps;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=yi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=en;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=tn;break;case Pr:case Ai:case Br:we=Ua;break;case aa:we=ml;break;case"scroll":case"scrollend":we=Er;break;case"wheel":we=Ei;break;case"copy":case"cut":case"paste":we=Et;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Vs;break;case"toggle":case"beforetoggle":we=pl}var bt=(s&4)!==0,er=!bt&&(n==="scroll"||n==="scrollend"),oe=bt?pe!==null?pe+"Capture":null:pe;bt=[];for(var ie=se,ge;ie!==null;){var Ce=ie;if(ge=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||ge===null||oe===null||(Ce=na(ie,oe),Ce!=null&&bt.push(Kc(ie,Ce,ge))),er)break;ie=ie.return}0<bt.length&&(pe=new we(pe,rt,null,u,Ae),De.push({event:pe,listeners:bt}))}}if(!(s&7)){e:{if(pe=n==="mouseover"||n==="pointerover",we=n==="mouseout"||n==="pointerout",pe&&u!==Lr&&(rt=u.relatedTarget||u.fromElement)&&(Wn(rt)||rt[Bn]))break e;if((we||pe)&&(pe=Ae.window===Ae?Ae:(pe=Ae.ownerDocument)?pe.defaultView||pe.parentWindow:window,we?(rt=u.relatedTarget||u.toElement,we=se,rt=rt?Wn(rt):null,rt!==null&&(er=be(rt),bt=rt.tag,rt!==er||bt!==5&&bt!==27&&bt!==6)&&(rt=null)):(we=null,rt=se),we!==rt)){if(bt=yi,Ce="onMouseLeave",oe="onMouseEnter",ie="mouse",(n==="pointerout"||n==="pointerover")&&(bt=Vs,Ce="onPointerLeave",oe="onPointerEnter",ie="pointer"),er=we==null?pe:Zt(we),ge=rt==null?pe:Zt(rt),pe=new bt(Ce,ie+"leave",we,u,Ae),pe.target=er,pe.relatedTarget=ge,Ce=null,Wn(Ae)===se&&(bt=new bt(oe,ie+"enter",rt,u,Ae),bt.target=ge,bt.relatedTarget=er,Ce=bt),er=Ce,we&&rt)t:{for(bt=we,oe=rt,ie=0,ge=bt;ge;ge=Vl(ge))ie++;for(ge=0,Ce=oe;Ce;Ce=Vl(Ce))ge++;for(;0<ie-ge;)bt=Vl(bt),ie--;for(;0<ge-ie;)oe=Vl(oe),ge--;for(;ie--;){if(bt===oe||oe!==null&&bt===oe.alternate)break t;bt=Vl(bt),oe=Vl(oe)}bt=null}else bt=null;we!==null&&Jp(De,pe,we,bt,!1),rt!==null&&er!==null&&Jp(De,er,rt,bt,!0)}}e:{if(pe=se?Zt(se):window,we=pe.nodeName&&pe.nodeName.toLowerCase(),we==="select"||we==="input"&&pe.type==="file")var et=Hu;else if(jn(pe))if(_c)et=o;else{et=O;var Ot=xl}else we=pe.nodeName,!we||we.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?se&&hn(se.elementType)&&(et=Hu):et=r;if(et&&(et=et(n,se))){Zn(De,et,u,Ae);break e}Ot&&Ot(n,pe,se),n==="focusout"&&se&&pe.type==="number"&&se.memoizedProps.value!=null&&H(pe,"number",pe.value)}switch(Ot=se?Zt(se):window,n){case"focusin":(jn(Ot)||Ot.contentEditable==="true")&&(q=Ot,ee=se,te=null);break;case"focusout":te=ee=q=null;break;case"mousedown":ue=!0;break;case"contextmenu":case"mouseup":case"dragend":ue=!1,Ee(De,u,Ae);break;case"selectionchange":if(B)break;case"keydown":case"keyup":Ee(De,u,Ae)}var at;if(wi)e:{switch(n){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Vt?xe(n,u)&&(dt="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(dt="onCompositionStart");dt&&(D&&u.locale!=="ko"&&(Vt||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Vt&&(at=Ni()):(Xi=Ae,Qi="value"in Xi?Xi.value:Xi.textContent,Vt=!0)),Ot=Ch(se,dt),0<Ot.length&&(dt=new Ps(dt,n,null,u,Ae),De.push({event:dt,listeners:Ot}),at?dt.data=at:(at=Ye(u),at!==null&&(dt.data=at)))),(at=S?Ln(n,u):jt(n,u))&&(dt=Ch(se,"onBeforeInput"),0<dt.length&&(Ot=new Ps("onBeforeInput","beforeinput",null,u,Ae),De.push({event:Ot,listeners:dt}),Ot.data=at)),dA(De,n,se,u,Ae)}Zp(De,s)})}function Kc(n,s,u){return{instance:n,listener:s,currentTarget:u}}function Ch(n,s){for(var u=s+"Capture",g=[];n!==null;){var w=n,b=w.stateNode;w=w.tag,w!==5&&w!==26&&w!==27||b===null||(w=na(n,u),w!=null&&g.unshift(Kc(n,w,b)),w=na(n,s),w!=null&&g.push(Kc(n,w,b))),n=n.return}return g}function Vl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Jp(n,s,u,g,w){for(var b=s._reactName,M=[];u!==null&&u!==g;){var U=u,Q=U.alternate,se=U.stateNode;if(U=U.tag,Q!==null&&Q===g)break;U!==5&&U!==26&&U!==27||se===null||(Q=se,w?(se=na(u,b),se!=null&&M.unshift(Kc(u,se,Q))):w||(se=na(u,b),se!=null&&M.push(Kc(u,se,Q)))),u=u.return}M.length!==0&&n.push({event:s,listeners:M})}var yA=/\r\n?/g,xA=/\u0000|\uFFFD/g;function e2(n){return(typeof n=="string"?n:""+n).replace(yA,`
`).replace(xA,"")}function t2(n,s){return s=e2(s),e2(n)===s}function Sh(){}function pn(n,s,u,g,w,b){switch(u){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||gi(n,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&gi(n,""+g);break;case"className":Yi(n,"class",g);break;case"tabIndex":Yi(n,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Yi(n,u,g);break;case"style":it(n,g,b);break;case"data":if(s!=="object"){Yi(n,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||u!=="href")){n.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=mi(""+g),n.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(s!=="input"&&pn(n,s,"name",w.name,w,null),pn(n,s,"formEncType",w.formEncType,w,null),pn(n,s,"formMethod",w.formMethod,w,null),pn(n,s,"formTarget",w.formTarget,w,null)):(pn(n,s,"encType",w.encType,w,null),pn(n,s,"method",w.method,w,null),pn(n,s,"target",w.target,w,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=mi(""+g),n.setAttribute(u,g);break;case"onClick":g!=null&&(n.onclick=Sh);break;case"onScroll":g!=null&&qt("scroll",n);break;case"onScrollEnd":g!=null&&qt("scrollend",n);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(u=g.__html,u!=null){if(w.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"multiple":n.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":n.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){n.removeAttribute("xlink:href");break}u=mi(""+g),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""+g):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":g===!0?n.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,g):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?n.setAttribute(u,g):n.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?n.removeAttribute(u):n.setAttribute(u,g);break;case"popover":qt("beforetoggle",n),qt("toggle",n),qi(n,"popover",g);break;case"xlinkActuate":Wr(n,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Wr(n,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Wr(n,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Wr(n,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Wr(n,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Wr(n,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Wr(n,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Wr(n,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Wr(n,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":qi(n,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=hl.get(u)||u,qi(n,u,g))}}function A0(n,s,u,g,w,b){switch(u){case"style":it(n,g,b);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(u=g.__html,u!=null){if(w.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"children":typeof g=="string"?gi(n,g):(typeof g=="number"||typeof g=="bigint")&&gi(n,""+g);break;case"onScroll":g!=null&&qt("scroll",n);break;case"onScrollEnd":g!=null&&qt("scrollend",n);break;case"onClick":g!=null&&(n.onclick=Sh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Te.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(w=u.endsWith("Capture"),s=u.slice(2,w?u.length-7:void 0),b=n[zn]||null,b=b!=null?b[u]:null,typeof b=="function"&&n.removeEventListener(s,b,w),typeof g=="function")){typeof b!="function"&&b!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(s,g,w);break e}u in n?n[u]=g:g===!0?n.setAttribute(u,""):qi(n,u,g)}}}function jr(n,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",n),qt("load",n);var g=!1,w=!1,b;for(b in u)if(u.hasOwnProperty(b)){var M=u[b];if(M!=null)switch(b){case"src":g=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:pn(n,s,b,M,u,null)}}w&&pn(n,s,"srcSet",u.srcSet,u,null),g&&pn(n,s,"src",u.src,u,null);return;case"input":qt("invalid",n);var U=b=M=w=null,Q=null,se=null;for(g in u)if(u.hasOwnProperty(g)){var Ae=u[g];if(Ae!=null)switch(g){case"name":w=Ae;break;case"type":M=Ae;break;case"checked":Q=Ae;break;case"defaultChecked":se=Ae;break;case"value":b=Ae;break;case"defaultValue":U=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(a(137,s));break;default:pn(n,s,g,Ae,u,null)}}ce(n,b,U,Q,se,M,w,!1),un(n);return;case"select":qt("invalid",n),g=M=b=null;for(w in u)if(u.hasOwnProperty(w)&&(U=u[w],U!=null))switch(w){case"value":b=U;break;case"defaultValue":M=U;break;case"multiple":g=U;default:pn(n,s,w,U,u,null)}s=b,u=M,n.multiple=!!g,s!=null?qe(n,!!g,s,!1):u!=null&&qe(n,!!g,u,!0);return;case"textarea":qt("invalid",n),b=w=g=null;for(M in u)if(u.hasOwnProperty(M)&&(U=u[M],U!=null))switch(M){case"value":g=U;break;case"defaultValue":w=U;break;case"children":b=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(a(91));break;default:pn(n,s,M,U,u,null)}ir(n,g,w,b),un(n);return;case"option":for(Q in u)if(u.hasOwnProperty(Q)&&(g=u[Q],g!=null))switch(Q){case"selected":n.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:pn(n,s,Q,g,u,null)}return;case"dialog":qt("cancel",n),qt("close",n);break;case"iframe":case"object":qt("load",n);break;case"video":case"audio":for(g=0;g<Wc.length;g++)qt(Wc[g],n);break;case"image":qt("error",n),qt("load",n);break;case"details":qt("toggle",n);break;case"embed":case"source":case"link":qt("error",n),qt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in u)if(u.hasOwnProperty(se)&&(g=u[se],g!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:pn(n,s,se,g,u,null)}return;default:if(hn(s)){for(Ae in u)u.hasOwnProperty(Ae)&&(g=u[Ae],g!==void 0&&A0(n,s,Ae,g,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(g=u[U],g!=null&&pn(n,s,U,g,u,null))}function EA(n,s,u,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,b=null,M=null,U=null,Q=null,se=null,Ae=null;for(we in u){var De=u[we];if(u.hasOwnProperty(we)&&De!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":Q=De;default:g.hasOwnProperty(we)||pn(n,s,we,null,g,De)}}for(var pe in g){var we=g[pe];if(De=u[pe],g.hasOwnProperty(pe)&&(we!=null||De!=null))switch(pe){case"type":b=we;break;case"name":w=we;break;case"checked":se=we;break;case"defaultChecked":Ae=we;break;case"value":M=we;break;case"defaultValue":U=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(a(137,s));break;default:we!==De&&pn(n,s,pe,we,g,De)}}Mn(n,M,U,Q,se,Ae,b,w);return;case"select":we=M=U=pe=null;for(b in u)if(Q=u[b],u.hasOwnProperty(b)&&Q!=null)switch(b){case"value":break;case"multiple":we=Q;default:g.hasOwnProperty(b)||pn(n,s,b,null,g,Q)}for(w in g)if(b=g[w],Q=u[w],g.hasOwnProperty(w)&&(b!=null||Q!=null))switch(w){case"value":pe=b;break;case"defaultValue":U=b;break;case"multiple":M=b;default:b!==Q&&pn(n,s,w,b,g,Q)}s=U,u=M,g=we,pe!=null?qe(n,!!u,pe,!1):!!g!=!!u&&(s!=null?qe(n,!!u,s,!0):qe(n,!!u,u?[]:"",!1));return;case"textarea":we=pe=null;for(U in u)if(w=u[U],u.hasOwnProperty(U)&&w!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:pn(n,s,U,null,g,w)}for(M in g)if(w=g[M],b=u[M],g.hasOwnProperty(M)&&(w!=null||b!=null))switch(M){case"value":pe=w;break;case"defaultValue":we=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:w!==b&&pn(n,s,M,w,g,b)}bn(n,pe,we);return;case"option":for(var rt in u)if(pe=u[rt],u.hasOwnProperty(rt)&&pe!=null&&!g.hasOwnProperty(rt))switch(rt){case"selected":n.selected=!1;break;default:pn(n,s,rt,null,g,pe)}for(Q in g)if(pe=g[Q],we=u[Q],g.hasOwnProperty(Q)&&pe!==we&&(pe!=null||we!=null))switch(Q){case"selected":n.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:pn(n,s,Q,pe,g,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in u)pe=u[bt],u.hasOwnProperty(bt)&&pe!=null&&!g.hasOwnProperty(bt)&&pn(n,s,bt,null,g,pe);for(se in g)if(pe=g[se],we=u[se],g.hasOwnProperty(se)&&pe!==we&&(pe!=null||we!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(137,s));break;default:pn(n,s,se,pe,g,we)}return;default:if(hn(s)){for(var er in u)pe=u[er],u.hasOwnProperty(er)&&pe!==void 0&&!g.hasOwnProperty(er)&&A0(n,s,er,void 0,g,pe);for(Ae in g)pe=g[Ae],we=u[Ae],!g.hasOwnProperty(Ae)||pe===we||pe===void 0&&we===void 0||A0(n,s,Ae,pe,g,we);return}}for(var oe in u)pe=u[oe],u.hasOwnProperty(oe)&&pe!=null&&!g.hasOwnProperty(oe)&&pn(n,s,oe,null,g,pe);for(De in g)pe=g[De],we=u[De],!g.hasOwnProperty(De)||pe===we||pe==null&&we==null||pn(n,s,De,pe,g,we)}var v0=null,b0=null;function Ih(n){return n.nodeType===9?n:n.ownerDocument}function n2(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r2(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function T0(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var C0=null;function wA(){var n=window.event;return n&&n.type==="popstate"?n===C0?!1:(C0=n,!0):(C0=null,!1)}var i2=typeof setTimeout=="function"?setTimeout:void 0,_A=typeof clearTimeout=="function"?clearTimeout:void 0,s2=typeof Promise=="function"?Promise:void 0,AA=typeof queueMicrotask=="function"?queueMicrotask:typeof s2<"u"?function(n){return s2.resolve(null).then(n).catch(vA)}:i2;function vA(n){setTimeout(function(){throw n})}function S0(n,s){var u=s,g=0;do{var w=u.nextSibling;if(n.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"){if(g===0){n.removeChild(w),iu(s);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=w}while(u);iu(s)}function I0(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":I0(u),ea(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function bA(n,s,u,g){for(;n.nodeType===1;){var w=u;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(g){if(!n[Os])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(b=n.getAttribute("rel"),b==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(b!==w.rel||n.getAttribute("href")!==(w.href==null?null:w.href)||n.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||n.getAttribute("title")!==(w.title==null?null:w.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(b=n.getAttribute("src"),(b!==(w.src==null?null:w.src)||n.getAttribute("type")!==(w.type==null?null:w.type)||n.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&b&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var b=w.name==null?null:""+w.name;if(w.type==="hidden"&&n.getAttribute("name")===b)return n}else return n;if(n=ws(n.nextSibling),n===null)break}return null}function TA(n,s,u){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=ws(n.nextSibling),n===null))return null;return n}function ws(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}function a2(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}function o2(n,s,u){switch(s=Ih(u),n){case"html":if(n=s.documentElement,!n)throw Error(a(452));return n;case"head":if(n=s.head,!n)throw Error(a(453));return n;case"body":if(n=s.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}var os=new Map,l2=new Set;function Nh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var Aa=Oe.d;Oe.d={f:CA,r:SA,D:IA,C:NA,L:RA,m:DA,X:OA,S:MA,M:LA};function CA(){var n=Aa.f(),s=_h();return n||s}function SA(n){var s=Dn(n);s!==null&&s.tag===5&&s.type==="form"?km(s):Aa.r(n)}var jl=typeof document>"u"?null:document;function c2(n,s,u){var g=jl;if(g&&typeof s=="string"&&s){var w=mt(s);w='link[rel="'+n+'"][href="'+w+'"]',typeof u=="string"&&(w+='[crossorigin="'+u+'"]'),l2.has(w)||(l2.add(w),n={rel:n,crossOrigin:u,href:s},g.querySelector(w)===null&&(s=g.createElement("link"),jr(s,"link",n),Jt(s),g.head.appendChild(s)))}}function IA(n){Aa.D(n),c2("dns-prefetch",n,null)}function NA(n,s){Aa.C(n,s),c2("preconnect",n,s)}function RA(n,s,u){Aa.L(n,s,u);var g=jl;if(g&&n&&s){var w='link[rel="preload"][as="'+mt(s)+'"]';s==="image"&&u&&u.imageSrcSet?(w+='[imagesrcset="'+mt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(w+='[imagesizes="'+mt(u.imageSizes)+'"]')):w+='[href="'+mt(n)+'"]';var b=w;switch(s){case"style":b=Fl(n);break;case"script":b=zl(n)}os.has(b)||(n=Y({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:n,as:s},u),os.set(b,n),g.querySelector(w)!==null||s==="style"&&g.querySelector(Zc(b))||s==="script"&&g.querySelector($c(b))||(s=g.createElement("link"),jr(s,"link",n),Jt(s),g.head.appendChild(s)))}}function DA(n,s){Aa.m(n,s);var u=jl;if(u&&n){var g=s&&typeof s.as=="string"?s.as:"script",w='link[rel="modulepreload"][as="'+mt(g)+'"][href="'+mt(n)+'"]',b=w;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=zl(n)}if(!os.has(b)&&(n=Y({rel:"modulepreload",href:n},s),os.set(b,n),u.querySelector(w)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($c(b)))return}g=u.createElement("link"),jr(g,"link",n),Jt(g),u.head.appendChild(g)}}}function MA(n,s,u){Aa.S(n,s,u);var g=jl;if(g&&n){var w=ds(g).hoistableStyles,b=Fl(n);s=s||"default";var M=w.get(b);if(!M){var U={loading:0,preload:null};if(M=g.querySelector(Zc(b)))U.loading=5;else{n=Y({rel:"stylesheet",href:n,"data-precedence":s},u),(u=os.get(b))&&N0(n,u);var Q=M=g.createElement("link");Jt(Q),jr(Q,"link",n),Q._p=new Promise(function(se,Ae){Q.onload=se,Q.onerror=Ae}),Q.addEventListener("load",function(){U.loading|=1}),Q.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Rh(M,s,g)}M={type:"stylesheet",instance:M,count:1,state:U},w.set(b,M)}}}function OA(n,s){Aa.X(n,s);var u=jl;if(u&&n){var g=ds(u).hoistableScripts,w=zl(n),b=g.get(w);b||(b=u.querySelector($c(w)),b||(n=Y({src:n,async:!0},s),(s=os.get(w))&&R0(n,s),b=u.createElement("script"),Jt(b),jr(b,"link",n),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(w,b))}}function LA(n,s){Aa.M(n,s);var u=jl;if(u&&n){var g=ds(u).hoistableScripts,w=zl(n),b=g.get(w);b||(b=u.querySelector($c(w)),b||(n=Y({src:n,async:!0,type:"module"},s),(s=os.get(w))&&R0(n,s),b=u.createElement("script"),Jt(b),jr(b,"link",n),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(w,b))}}function u2(n,s,u,g){var w=(w=gt.current)?Nh(w):null;if(!w)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Fl(u.href),u=ds(w).hoistableStyles,g=u.get(s),g||(g={type:"style",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=Fl(u.href);var b=ds(w).hoistableStyles,M=b.get(n);if(M||(w=w.ownerDocument||w,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(n,M),(b=w.querySelector(Zc(n)))&&!b._p&&(M.instance=b,M.state.loading=5),os.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},os.set(n,u),b||kA(w,n,u,M.state))),s&&g===null)throw Error(a(528,""));return M}if(s&&g!==null)throw Error(a(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=zl(u),u=ds(w).hoistableScripts,g=u.get(s),g||(g={type:"script",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Fl(n){return'href="'+mt(n)+'"'}function Zc(n){return'link[rel="stylesheet"]['+n+"]"}function h2(n){return Y({},n,{"data-precedence":n.precedence,precedence:null})}function kA(n,s,u,g){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=n.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),jr(s,"link",u),Jt(s),n.head.appendChild(s))}function zl(n){return'[src="'+mt(n)+'"]'}function $c(n){return"script[async]"+n}function f2(n,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var g=n.querySelector('style[data-href~="'+mt(u.href)+'"]');if(g)return s.instance=g,Jt(g),g;var w=Y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(n.ownerDocument||n).createElement("style"),Jt(g),jr(g,"style",w),Rh(g,u.precedence,n),s.instance=g;case"stylesheet":w=Fl(u.href);var b=n.querySelector(Zc(w));if(b)return s.state.loading|=4,s.instance=b,Jt(b),b;g=h2(u),(w=os.get(w))&&N0(g,w),b=(n.ownerDocument||n).createElement("link"),Jt(b);var M=b;return M._p=new Promise(function(U,Q){M.onload=U,M.onerror=Q}),jr(b,"link",g),s.state.loading|=4,Rh(b,u.precedence,n),s.instance=b;case"script":return b=zl(u.src),(w=n.querySelector($c(b)))?(s.instance=w,Jt(w),w):(g=u,(w=os.get(b))&&(g=Y({},u),R0(g,w)),n=n.ownerDocument||n,w=n.createElement("script"),Jt(w),jr(w,"link",g),n.head.appendChild(w),s.instance=w);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&!(s.state.loading&4)&&(g=s.instance,s.state.loading|=4,Rh(g,u.precedence,n));return s.instance}function Rh(n,s,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=g.length?g[g.length-1]:null,b=w,M=0;M<g.length;M++){var U=g[M];if(U.dataset.precedence===s)b=U;else if(b!==w)break}b?b.parentNode.insertBefore(n,b.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(n,s.firstChild))}function N0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function R0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Dh=null;function d2(n,s,u){if(Dh===null){var g=new Map,w=Dh=new Map;w.set(u,g)}else w=Dh,g=w.get(u),g||(g=new Map,w.set(u,g));if(g.has(n))return g;for(g.set(n,null),u=u.getElementsByTagName(n),w=0;w<u.length;w++){var b=u[w];if(!(b[Os]||b[Rn]||n==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var M=b.getAttribute(s)||"";M=n+M;var U=g.get(M);U?U.push(b):g.set(M,[b])}}return g}function g2(n,s,u){n=n.ownerDocument||n,n.head.insertBefore(u,s==="title"?n.querySelector("head > title"):null)}function PA(n,s,u){if(u===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function m2(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var Jc=null;function BA(){}function UA(n,s,u){if(Jc===null)throw Error(a(475));var g=Jc;if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&!(s.state.loading&4)){if(s.instance===null){var w=Fl(u.href),b=n.querySelector(Zc(w));if(b){n=b._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(g.count++,g=Mh.bind(g),n.then(g,g)),s.state.loading|=4,s.instance=b,Jt(b);return}b=n.ownerDocument||n,u=h2(u),(w=os.get(w))&&N0(u,w),b=b.createElement("link"),Jt(b);var M=b;M._p=new Promise(function(U,Q){M.onload=U,M.onerror=Q}),jr(b,"link",u),s.instance=b}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(s,n),(n=s.state.preload)&&!(s.state.loading&3)&&(g.count++,s=Mh.bind(g),n.addEventListener("load",s),n.addEventListener("error",s))}}function VA(){if(Jc===null)throw Error(a(475));var n=Jc;return n.stylesheets&&n.count===0&&D0(n,n.stylesheets),0<n.count?function(s){var u=setTimeout(function(){if(n.stylesheets&&D0(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(u)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)D0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Oh=null;function D0(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Oh=new Map,s.forEach(jA,n),Oh=null,Mh.call(n))}function jA(n,s){if(!(s.state.loading&4)){var u=Oh.get(n);if(u)var g=u.get(null);else{u=new Map,Oh.set(n,u);for(var w=n.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<w.length;b++){var M=w[b];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),g=M)}g&&u.set(null,g)}w=s.instance,M=w.getAttribute("data-precedence"),b=u.get(M)||g,b===g&&u.set(null,w),u.set(M,w),this.count++,g=Mh.bind(this),w.addEventListener("load",g),w.addEventListener("error",g),b?b.parentNode.insertBefore(w,b.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(w,n.firstChild)),s.state.loading|=4}}var eu={$$typeof:j,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function FA(n,s,u,g,w,b,M,U){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.hiddenUpdates=xt(null),this.identifierPrefix=g,this.onUncaughtError=w,this.onCaughtError=b,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function p2(n,s,u,g,w,b,M,U,Q,se,Ae,De){return n=new FA(n,s,u,M,U,Q,se,De),s=1,b===!0&&(s|=24),b=ss(3,null,null,s),n.current=b,b.stateNode=n,s=cd(),s.refCount++,n.pooledCache=s,s.refCount++,b.memoizedState={element:g,isDehydrated:u,cache:s},Hd(b),n}function y2(n){return n?(n=wl,n):wl}function x2(n,s,u,g,w,b){w=y2(w),g.context===null?g.context=w:g.pendingContext=w,g=Qa(s),g.payload={element:u},b=b===void 0?null:b,b!==null&&(g.callback=b),u=Wa(n,g,s),u!==null&&(ui(u,n,s),Bc(u,n,s))}function E2(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function M0(n,s){E2(n,s),(n=n.alternate)&&E2(n,s)}function w2(n){if(n.tag===13){var s=Fa(n,67108864);s!==null&&ui(s,n,67108864),M0(n,67108864)}}var Lh=!0;function zA(n,s,u,g){var w=P.T;P.T=null;var b=Oe.p;try{Oe.p=2,O0(n,s,u,g)}finally{Oe.p=b,P.T=w}}function HA(n,s,u,g){var w=P.T;P.T=null;var b=Oe.p;try{Oe.p=8,O0(n,s,u,g)}finally{Oe.p=b,P.T=w}}function O0(n,s,u,g){if(Lh){var w=L0(g);if(w===null)_0(n,s,g,kh,u),A2(n,g);else if(qA(w,n,s,u,g))g.stopPropagation();else if(A2(n,g),s&4&&-1<GA.indexOf(n)){for(;w!==null;){var b=Dn(w);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var M=Yr(b.pendingLanes);if(M!==0){var U=b;for(U.pendingLanes|=2,U.entangledLanes|=2;M;){var Q=1<<31-Nt(M);U.entanglements[1]|=Q,M&=~Q}Gs(b),!(Gn&6)&&(xh=sn()+500,Qc(0))}}break;case 13:U=Fa(b,2),U!==null&&ui(U,b,2),_h(),M0(b,2)}if(b=L0(g),b===null&&_0(n,s,g,kh,u),b===w)break;w=b}w!==null&&g.stopPropagation()}else _0(n,s,g,null,u)}}function L0(n){return n=Ls(n),k0(n)}var kh=null;function k0(n){if(kh=null,n=Wn(n),n!==null){var s=be(n);if(s===null)n=null;else{var u=s.tag;if(u===13){if(n=Xe(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return kh=n,null}function _2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ns()){case Kt:return 2;case In:return 8;case Nn:case Xn:return 32;case Rs:return 268435456;default:return 32}default:return 32}}var P0=!1,no=null,ro=null,io=null,tu=new Map,nu=new Map,so=[],GA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A2(n,s){switch(n){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":tu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(s.pointerId)}}function ru(n,s,u,g,w,b){return n===null||n.nativeEvent!==b?(n={blockedOn:s,domEventName:u,eventSystemFlags:g,nativeEvent:b,targetContainers:[w]},s!==null&&(s=Dn(s),s!==null&&w2(s)),n):(n.eventSystemFlags|=g,s=n.targetContainers,w!==null&&s.indexOf(w)===-1&&s.push(w),n)}function qA(n,s,u,g,w){switch(s){case"focusin":return no=ru(no,n,s,u,g,w),!0;case"dragenter":return ro=ru(ro,n,s,u,g,w),!0;case"mouseover":return io=ru(io,n,s,u,g,w),!0;case"pointerover":var b=w.pointerId;return tu.set(b,ru(tu.get(b)||null,n,s,u,g,w)),!0;case"gotpointercapture":return b=w.pointerId,nu.set(b,ru(nu.get(b)||null,n,s,u,g,w)),!0}return!1}function v2(n){var s=Wn(n.target);if(s!==null){var u=be(s);if(u!==null){if(s=u.tag,s===13){if(s=Xe(u),s!==null){n.blockedOn=s,rr(n.priority,function(){if(u.tag===13){var g=Pi(),w=Fa(u,g);w!==null&&ui(w,u,g),M0(u,g)}});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ph(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=L0(n.nativeEvent);if(u===null){u=n.nativeEvent;var g=new u.constructor(u.type,u);Lr=g,u.target.dispatchEvent(g),Lr=null}else return s=Dn(u),s!==null&&w2(s),n.blockedOn=u,!1;s.shift()}return!0}function b2(n,s,u){Ph(n)&&u.delete(s)}function YA(){P0=!1,no!==null&&Ph(no)&&(no=null),ro!==null&&Ph(ro)&&(ro=null),io!==null&&Ph(io)&&(io=null),tu.forEach(b2),nu.forEach(b2)}function Bh(n,s){n.blockedOn===s&&(n.blockedOn=null,P0||(P0=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,YA)))}var Uh=null;function T2(n){Uh!==n&&(Uh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Uh===n&&(Uh=null);for(var s=0;s<n.length;s+=3){var u=n[s],g=n[s+1],w=n[s+2];if(typeof g!="function"){if(k0(g||u)===null)continue;break}var b=Dn(u);b!==null&&(n.splice(s,3),s-=3,Td(b,{pending:!0,data:w,method:u.method,action:g},g,w))}}))}function iu(n){function s(Q){return Bh(Q,n)}no!==null&&Bh(no,n),ro!==null&&Bh(ro,n),io!==null&&Bh(io,n),tu.forEach(s),nu.forEach(s);for(var u=0;u<so.length;u++){var g=so[u];g.blockedOn===n&&(g.blockedOn=null)}for(;0<so.length&&(u=so[0],u.blockedOn===null);)v2(u),u.blockedOn===null&&so.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var w=u[g],b=u[g+1],M=w[zn]||null;if(typeof b=="function")M||T2(u);else if(M){var U=null;if(b&&b.hasAttribute("formAction")){if(w=b,M=b[zn]||null)U=M.formAction;else if(k0(w)!==null)continue}else U=M.action;typeof U=="function"?u[g+1]=U:(u.splice(g,3),g-=3),T2(u)}}}function B0(n){this._internalRoot=n}Vh.prototype.render=B0.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(a(409));var u=s.current,g=Pi();x2(u,g,n,s,null,null)},Vh.prototype.unmount=B0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;n.tag===0&&Bl(),x2(n.current,2,null,n,null,null),_h(),s[Bn]=null}};function Vh(n){this._internalRoot=n}Vh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Gi();n={blockedOn:null,target:n,priority:s};for(var u=0;u<so.length&&s!==0&&s<so[u].priority;u++);so.splice(u,0,n),u===0&&v2(n)}};var C2=e.version;if(C2!=="19.0.0")throw Error(a(527,C2,"19.0.0"));Oe.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=ve(s),n=n!==null?Fe(n):null,n=n===null?null:n.stateNode,n};var XA={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:P,findFiberByHostInstance:Wn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{an=jh.inject(XA),Ve=jh}catch{}}return au.createRoot=function(n,s){if(!c(n))throw Error(a(299));var u=!1,g="",w=Hm,b=Gm,M=qm,U=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(w=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(M=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(U=s.unstable_transitionCallbacks)),s=p2(n,1,!1,null,null,u,g,w,b,M,U,null),n[Bn]=s.current,w0(n.nodeType===8?n.parentNode:n),new B0(s)},au.hydrateRoot=function(n,s,u){if(!c(n))throw Error(a(299));var g=!1,w="",b=Hm,M=Gm,U=qm,Q=null,se=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Q=u.unstable_transitionCallbacks),u.formState!==void 0&&(se=u.formState)),s=p2(n,1,!0,s,u??null,g,w,b,M,U,Q,se),s.context=y2(null),u=s.current,g=Pi(),w=Qa(g),w.callback=null,Wa(u,w,g),s.current.lanes=g,Je(s,g),Gs(s),n[Bn]=s.current,w0(n),new Vh(s)},au.version="19.0.0",au}var P2;function iv(){if(P2)return j0.exports;P2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),j0.exports=rv(),j0.exports}var sv=iv();const av=k1(sv);var ou={},B2;function ov(){if(B2)return ou;B2=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.parse=x,ou.serialize=E;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,c=Object.prototype.toString,f=(()=>{const k=function(){};return k.prototype=Object.create(null),k})();function x(k,j){const G=new f,J=k.length;if(J<2)return G;const W=(j==null?void 0:j.decode)||C;let he=0;do{const fe=k.indexOf("=",he);if(fe===-1)break;const re=k.indexOf(";",he),_e=re===-1?J:re;if(fe>_e){he=k.lastIndexOf(";",fe-1)+1;continue}const je=v(k,he,fe),Ue=_(k,fe,je),z=k.slice(je,Ue);if(G[z]===void 0){let F=v(k,fe+1,_e),P=_(k,_e,F);const Y=W(k.slice(F,P));G[z]=Y}he=_e+1}while(he<J);return G}function v(k,j,G){do{const J=k.charCodeAt(j);if(J!==32&&J!==9)return j}while(++j<G);return G}function _(k,j,G){for(;j>G;){const J=k.charCodeAt(--j);if(J!==32&&J!==9)return j+1}return G}function E(k,j,G){const J=(G==null?void 0:G.encode)||encodeURIComponent;if(!i.test(k))throw new TypeError(`argument name is invalid: ${k}`);const W=J(j);if(!e.test(W))throw new TypeError(`argument val is invalid: ${j}`);let he=k+"="+W;if(!G)return he;if(G.maxAge!==void 0){if(!Number.isInteger(G.maxAge))throw new TypeError(`option maxAge is invalid: ${G.maxAge}`);he+="; Max-Age="+G.maxAge}if(G.domain){if(!t.test(G.domain))throw new TypeError(`option domain is invalid: ${G.domain}`);he+="; Domain="+G.domain}if(G.path){if(!a.test(G.path))throw new TypeError(`option path is invalid: ${G.path}`);he+="; Path="+G.path}if(G.expires){if(!R(G.expires)||!Number.isFinite(G.expires.valueOf()))throw new TypeError(`option expires is invalid: ${G.expires}`);he+="; Expires="+G.expires.toUTCString()}if(G.httpOnly&&(he+="; HttpOnly"),G.secure&&(he+="; Secure"),G.partitioned&&(he+="; Partitioned"),G.priority)switch(typeof G.priority=="string"?G.priority.toLowerCase():void 0){case"low":he+="; Priority=Low";break;case"medium":he+="; Priority=Medium";break;case"high":he+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${G.priority}`)}if(G.sameSite)switch(typeof G.sameSite=="string"?G.sameSite.toLowerCase():G.sameSite){case!0:case"strict":he+="; SameSite=Strict";break;case"lax":he+="; SameSite=Lax";break;case"none":he+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${G.sameSite}`)}return he}function C(k){if(k.indexOf("%")===-1)return k;try{return decodeURIComponent(k)}catch{return k}}function R(k){return c.call(k)==="[object Date]"}return ou}ov();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var U2="popstate";function lv(i={}){function e(c,f){let{pathname:x="/",search:v="",hash:_=""}=il(c.location.hash.substring(1));return!x.startsWith("/")&&!x.startsWith(".")&&(x="/"+x),i1("",{pathname:x,search:v,hash:_},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function t(c,f){let x=c.document.querySelector("base"),v="";if(x&&x.getAttribute("href")){let _=c.location.href,E=_.indexOf("#");v=E===-1?_:_.slice(0,E)}return v+"#"+(typeof f=="string"?f:wu(f))}function a(c,f){Fi(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return uv(e,t,a,i)}function Fn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Fi(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cv(){return Math.random().toString(36).substring(2,10)}function V2(i,e){return{usr:i.state,key:i.key,idx:e}}function i1(i,e,t=null,a){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?il(e):e,state:t,key:e&&e.key||a||cv()}}function wu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function il(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let a=i.indexOf("?");a>=0&&(e.search=i.substring(a),i=i.substring(0,a)),i&&(e.pathname=i)}return e}function uv(i,e,t,a={}){let{window:c=document.defaultView,v5Compat:f=!1}=a,x=c.history,v="POP",_=null,E=C();E==null&&(E=0,x.replaceState({...x.state,idx:E},""));function C(){return(x.state||{idx:null}).idx}function R(){v="POP";let W=C(),he=W==null?null:W-E;E=W,_&&_({action:v,location:J.location,delta:he})}function k(W,he){v="PUSH";let fe=i1(J.location,W,he);t&&t(fe,W),E=C()+1;let re=V2(fe,E),_e=J.createHref(fe);try{x.pushState(re,"",_e)}catch(je){if(je instanceof DOMException&&je.name==="DataCloneError")throw je;c.location.assign(_e)}f&&_&&_({action:v,location:J.location,delta:1})}function j(W,he){v="REPLACE";let fe=i1(J.location,W,he);t&&t(fe,W),E=C();let re=V2(fe,E),_e=J.createHref(fe);x.replaceState(re,"",_e),f&&_&&_({action:v,location:J.location,delta:0})}function G(W){let he=c.location.origin!=="null"?c.location.origin:c.location.href,fe=typeof W=="string"?W:wu(W);return fe=fe.replace(/ $/,"%20"),Fn(he,`No window.location.(origin|href) available to create URL for href: ${fe}`),new URL(fe,he)}let J={get action(){return v},get location(){return i(c,x)},listen(W){if(_)throw new Error("A history only accepts one active listener");return c.addEventListener(U2,R),_=W,()=>{c.removeEventListener(U2,R),_=null}},createHref(W){return e(c,W)},createURL:G,encodeLocation(W){let he=G(W);return{pathname:he.pathname,search:he.search,hash:he.hash}},push:k,replace:j,go(W){return x.go(W)}};return J}function Ox(i,e,t="/"){return hv(i,e,t,!1)}function hv(i,e,t,a){let c=typeof e=="string"?il(e):e,f=Eo(c.pathname||"/",t);if(f==null)return null;let x=Lx(i);fv(x);let v=null;for(let _=0;v==null&&_<x.length;++_){let E=vv(f);v=_v(x[_],E,a)}return v}function Lx(i,e=[],t=[],a=""){let c=(f,x,v)=>{let _={relativePath:v===void 0?f.path||"":v,caseSensitive:f.caseSensitive===!0,childrenIndex:x,route:f};_.relativePath.startsWith("/")&&(Fn(_.relativePath.startsWith(a),`Absolute route path "${_.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(a.length));let E=Na([a,_.relativePath]),C=t.concat(_);f.children&&f.children.length>0&&(Fn(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Lx(f.children,e,C,E)),!(f.path==null&&!f.index)&&e.push({path:E,score:Ev(E,f.index),routesMeta:C})};return i.forEach((f,x)=>{var v;if(f.path===""||!((v=f.path)!=null&&v.includes("?")))c(f,x);else for(let _ of kx(f.path))c(f,x,_)}),e}function kx(i){let e=i.split("/");if(e.length===0)return[];let[t,...a]=e,c=t.endsWith("?"),f=t.replace(/\?$/,"");if(a.length===0)return c?[f,""]:[f];let x=kx(a.join("/")),v=[];return v.push(...x.map(_=>_===""?f:[f,_].join("/"))),c&&v.push(...x),v.map(_=>i.startsWith("/")&&_===""?"/":_)}function fv(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:wv(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var dv=/^:[\w-]+$/,gv=3,mv=2,pv=1,yv=10,xv=-2,j2=i=>i==="*";function Ev(i,e){let t=i.split("/"),a=t.length;return t.some(j2)&&(a+=xv),e&&(a+=mv),t.filter(c=>!j2(c)).reduce((c,f)=>c+(dv.test(f)?gv:f===""?pv:yv),a)}function wv(i,e){return i.length===e.length&&i.slice(0,-1).every((a,c)=>a===e[c])?i[i.length-1]-e[e.length-1]:0}function _v(i,e,t=!1){let{routesMeta:a}=i,c={},f="/",x=[];for(let v=0;v<a.length;++v){let _=a[v],E=v===a.length-1,C=f==="/"?e:e.slice(f.length)||"/",R=lf({path:_.relativePath,caseSensitive:_.caseSensitive,end:E},C),k=_.route;if(!R&&E&&t&&!a[a.length-1].route.index&&(R=lf({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},C)),!R)return null;Object.assign(c,R.params),x.push({params:c,pathname:Na([f,R.pathname]),pathnameBase:Sv(Na([f,R.pathnameBase])),route:k}),R.pathnameBase!=="/"&&(f=Na([f,R.pathnameBase]))}return x}function lf(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,a]=Av(i.path,i.caseSensitive,i.end),c=e.match(t);if(!c)return null;let f=c[0],x=f.replace(/(.)\/+$/,"$1"),v=c.slice(1);return{params:a.reduce((E,{paramName:C,isOptional:R},k)=>{if(C==="*"){let G=v[k]||"";x=f.slice(0,f.length-G.length).replace(/(.)\/+$/,"$1")}const j=v[k];return R&&!j?E[C]=void 0:E[C]=(j||"").replace(/%2F/g,"/"),E},{}),pathname:f,pathnameBase:x,pattern:i}}function Av(i,e=!1,t=!0){Fi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let a=[],c="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,v,_)=>(a.push({paramName:v,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(a.push({paramName:"*"}),c+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":i!==""&&i!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),a]}function vv(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fi(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Eo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=i.charAt(t);return a&&a!=="/"?null:i.slice(t)||"/"}function bv(i,e="/"){let{pathname:t,search:a="",hash:c=""}=typeof i=="string"?il(i):i;return{pathname:t?t.startsWith("/")?t:Tv(t,e):e,search:Iv(a),hash:Nv(c)}}function Tv(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function G0(i,e,t,a){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Cv(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function B1(i){let e=Cv(i);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function U1(i,e,t,a=!1){let c;typeof i=="string"?c=il(i):(c={...i},Fn(!c.pathname||!c.pathname.includes("?"),G0("?","pathname","search",c)),Fn(!c.pathname||!c.pathname.includes("#"),G0("#","pathname","hash",c)),Fn(!c.search||!c.search.includes("#"),G0("#","search","hash",c)));let f=i===""||c.pathname==="",x=f?"/":c.pathname,v;if(x==null)v=t;else{let R=e.length-1;if(!a&&x.startsWith("..")){let k=x.split("/");for(;k[0]==="..";)k.shift(),R-=1;c.pathname=k.join("/")}v=R>=0?e[R]:"/"}let _=bv(c,v),E=x&&x!=="/"&&x.endsWith("/"),C=(f||x===".")&&t.endsWith("/");return!_.pathname.endsWith("/")&&(E||C)&&(_.pathname+="/"),_}var Na=i=>i.join("/").replace(/\/\/+/g,"/"),Sv=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Iv=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Nv=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Rv(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Px=["POST","PUT","PATCH","DELETE"];new Set(Px);var Dv=["GET",...Px];new Set(Dv);var uc=ne.createContext(null);uc.displayName="DataRouter";var Mf=ne.createContext(null);Mf.displayName="DataRouterState";var Bx=ne.createContext({isTransitioning:!1});Bx.displayName="ViewTransition";var Mv=ne.createContext(new Map);Mv.displayName="Fetchers";var Ov=ne.createContext(null);Ov.displayName="Await";var Cs=ne.createContext(null);Cs.displayName="Navigation";var Ru=ne.createContext(null);Ru.displayName="Location";var Ss=ne.createContext({outlet:null,matches:[],isDataRoute:!1});Ss.displayName="Route";var V1=ne.createContext(null);V1.displayName="RouteError";function Lv(i,{relative:e}={}){Fn(hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=ne.useContext(Cs),{hash:c,pathname:f,search:x}=Du(i,{relative:e}),v=f;return t!=="/"&&(v=f==="/"?t:Na([t,f])),a.createHref({pathname:v,search:x,hash:c})}function hc(){return ne.useContext(Ru)!=null}function ka(){return Fn(hc(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(Ru).location}var Ux="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vx(i){ne.useContext(Cs).static||ne.useLayoutEffect(i)}function $s(){let{isDataRoute:i}=ne.useContext(Ss);return i?Xv():kv()}function kv(){Fn(hc(),"useNavigate() may be used only in the context of a <Router> component.");let i=ne.useContext(uc),{basename:e,navigator:t}=ne.useContext(Cs),{matches:a}=ne.useContext(Ss),{pathname:c}=ka(),f=JSON.stringify(B1(a)),x=ne.useRef(!1);return Vx(()=>{x.current=!0}),ne.useCallback((_,E={})=>{if(Fi(x.current,Ux),!x.current)return;if(typeof _=="number"){t.go(_);return}let C=U1(_,JSON.parse(f),c,E.relative==="path");i==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Na([e,C.pathname])),(E.replace?t.replace:t.push)(C,E.state,E)},[e,t,f,c,i])}ne.createContext(null);function j1(){let{matches:i}=ne.useContext(Ss),e=i[i.length-1];return e?e.params:{}}function Du(i,{relative:e}={}){let{matches:t}=ne.useContext(Ss),{pathname:a}=ka(),c=JSON.stringify(B1(t));return ne.useMemo(()=>U1(i,JSON.parse(c),a,e==="path"),[i,c,a,e])}function Pv(i,e){return jx(i,e)}function jx(i,e,t,a){var fe;Fn(hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c,static:f}=ne.useContext(Cs),{matches:x}=ne.useContext(Ss),v=x[x.length-1],_=v?v.params:{},E=v?v.pathname:"/",C=v?v.pathnameBase:"/",R=v&&v.route;{let re=R&&R.path||"";Fx(E,!R||re.endsWith("*")||re.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${re}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${re}"> to <Route path="${re==="/"?"*":`${re}/*`}">.`)}let k=ka(),j;if(e){let re=typeof e=="string"?il(e):e;Fn(C==="/"||((fe=re.pathname)==null?void 0:fe.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${re.pathname}" was given in the \`location\` prop.`),j=re}else j=k;let G=j.pathname||"/",J=G;if(C!=="/"){let re=C.replace(/^\//,"").split("/");J="/"+G.replace(/^\//,"").split("/").slice(re.length).join("/")}let W=!f&&t&&t.matches&&t.matches.length>0?t.matches:Ox(i,{pathname:J});Fi(R||W!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Fi(W==null||W[W.length-1].route.element!==void 0||W[W.length-1].route.Component!==void 0||W[W.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let he=Fv(W&&W.map(re=>Object.assign({},re,{params:Object.assign({},_,re.params),pathname:Na([C,c.encodeLocation?c.encodeLocation(re.pathname).pathname:re.pathname]),pathnameBase:re.pathnameBase==="/"?C:Na([C,c.encodeLocation?c.encodeLocation(re.pathnameBase).pathname:re.pathnameBase])})),x,t,a);return e&&he?ne.createElement(Ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},he):he}function Bv(){let i=Yv(),e=Rv(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,a="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:a},f={padding:"2px 4px",backgroundColor:a},x=null;return console.error("Error handled by React Router default ErrorBoundary:",i),x=ne.createElement(ne.Fragment,null,ne.createElement("p",null,"💿 Hey developer 👋"),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:f},"ErrorBoundary")," or"," ",ne.createElement("code",{style:f},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),t?ne.createElement("pre",{style:c},t):null,x)}var Uv=ne.createElement(Bv,null),Vv=class extends ne.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?ne.createElement(Ss.Provider,{value:this.props.routeContext},ne.createElement(V1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jv({routeContext:i,match:e,children:t}){let a=ne.useContext(uc);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),ne.createElement(Ss.Provider,{value:i},t)}function Fv(i,e=[],t=null,a=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let c=i,f=t==null?void 0:t.errors;if(f!=null){let _=c.findIndex(E=>E.route.id&&(f==null?void 0:f[E.route.id])!==void 0);Fn(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),c=c.slice(0,Math.min(c.length,_+1))}let x=!1,v=-1;if(t)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(v=_),E.route.id){let{loaderData:C,errors:R}=t,k=E.route.loader&&!C.hasOwnProperty(E.route.id)&&(!R||R[E.route.id]===void 0);if(E.route.lazy||k){x=!0,v>=0?c=c.slice(0,v+1):c=[c[0]];break}}}return c.reduceRight((_,E,C)=>{let R,k=!1,j=null,G=null;t&&(R=f&&E.route.id?f[E.route.id]:void 0,j=E.route.errorElement||Uv,x&&(v<0&&C===0?(Fx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,G=null):v===C&&(k=!0,G=E.route.hydrateFallbackElement||null)));let J=e.concat(c.slice(0,C+1)),W=()=>{let he;return R?he=j:k?he=G:E.route.Component?he=ne.createElement(E.route.Component,null):E.route.element?he=E.route.element:he=_,ne.createElement(jv,{match:E,routeContext:{outlet:_,matches:J,isDataRoute:t!=null},children:he})};return t&&(E.route.ErrorBoundary||E.route.errorElement||C===0)?ne.createElement(Vv,{location:t.location,revalidation:t.revalidation,component:j,error:R,children:W(),routeContext:{outlet:null,matches:J,isDataRoute:!0}}):W()},null)}function F1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zv(i){let e=ne.useContext(uc);return Fn(e,F1(i)),e}function Hv(i){let e=ne.useContext(Mf);return Fn(e,F1(i)),e}function Gv(i){let e=ne.useContext(Ss);return Fn(e,F1(i)),e}function z1(i){let e=Gv(i),t=e.matches[e.matches.length-1];return Fn(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function qv(){return z1("useRouteId")}function Yv(){var a;let i=ne.useContext(V1),e=Hv("useRouteError"),t=z1("useRouteError");return i!==void 0?i:(a=e.errors)==null?void 0:a[t]}function Xv(){let{router:i}=zv("useNavigate"),e=z1("useNavigate"),t=ne.useRef(!1);return Vx(()=>{t.current=!0}),ne.useCallback(async(c,f={})=>{Fi(t.current,Ux),t.current&&(typeof c=="number"?i.navigate(c):await i.navigate(c,{fromRouteId:e,...f}))},[i,e])}var F2={};function Fx(i,e,t){!e&&!F2[i]&&(F2[i]=!0,Fi(!1,t))}ne.memo(Qv);function Qv({routes:i,future:e,state:t}){return jx(i,void 0,t,e)}function Wv({to:i,replace:e,state:t,relative:a}){Fn(hc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=ne.useContext(Cs);Fi(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=ne.useContext(Ss),{pathname:x}=ka(),v=$s(),_=U1(i,B1(f),x,a==="path"),E=JSON.stringify(_);return ne.useEffect(()=>{v(JSON.parse(E),{replace:e,state:t,relative:a})},[v,E,a,e,t]),null}function va(i){Fn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Kv({basename:i="/",children:e=null,location:t,navigationType:a="POP",navigator:c,static:f=!1}){Fn(!hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let x=i.replace(/^\/*/,"/"),v=ne.useMemo(()=>({basename:x,navigator:c,static:f,future:{}}),[x,c,f]);typeof t=="string"&&(t=il(t));let{pathname:_="/",search:E="",hash:C="",state:R=null,key:k="default"}=t,j=ne.useMemo(()=>{let G=Eo(_,x);return G==null?null:{location:{pathname:G,search:E,hash:C,state:R,key:k},navigationType:a}},[x,_,E,C,R,k,a]);return Fi(j!=null,`<Router basename="${x}"> is not able to match the URL "${_}${E}${C}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:ne.createElement(Cs.Provider,{value:v},ne.createElement(Ru.Provider,{children:e,value:j}))}function Zv({children:i,location:e}){return Pv(s1(i),e)}function s1(i,e=[]){let t=[];return ne.Children.forEach(i,(a,c)=>{if(!ne.isValidElement(a))return;let f=[...e,c];if(a.type===ne.Fragment){t.push.apply(t,s1(a.props.children,f));return}Fn(a.type===va,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let x={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(x.children=s1(a.props.children,f)),t.push(x)}),t}var Wh="get",Kh="application/x-www-form-urlencoded";function Of(i){return i!=null&&typeof i.tagName=="string"}function $v(i){return Of(i)&&i.tagName.toLowerCase()==="button"}function Jv(i){return Of(i)&&i.tagName.toLowerCase()==="form"}function eb(i){return Of(i)&&i.tagName.toLowerCase()==="input"}function tb(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function nb(i,e){return i.button===0&&(!e||e==="_self")&&!tb(i)}function a1(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let a=i[t];return e.concat(Array.isArray(a)?a.map(c=>[t,c]):[[t,a]])},[]))}function rb(i,e){let t=a1(i);return e&&e.forEach((a,c)=>{t.has(c)||e.getAll(c).forEach(f=>{t.append(c,f)})}),t}var zh=null;function ib(){if(zh===null)try{new FormData(document.createElement("form"),0),zh=!1}catch{zh=!0}return zh}var sb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function q0(i){return i!=null&&!sb.has(i)?(Fi(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kh}"`),null):i}function ab(i,e){let t,a,c,f,x;if(Jv(i)){let v=i.getAttribute("action");a=v?Eo(v,e):null,t=i.getAttribute("method")||Wh,c=q0(i.getAttribute("enctype"))||Kh,f=new FormData(i)}else if($v(i)||eb(i)&&(i.type==="submit"||i.type==="image")){let v=i.form;if(v==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=i.getAttribute("formaction")||v.getAttribute("action");if(a=_?Eo(_,e):null,t=i.getAttribute("formmethod")||v.getAttribute("method")||Wh,c=q0(i.getAttribute("formenctype"))||q0(v.getAttribute("enctype"))||Kh,f=new FormData(v,i),!ib()){let{name:E,type:C,value:R}=i;if(C==="image"){let k=E?`${E}.`:"";f.append(`${k}x`,"0"),f.append(`${k}y`,"0")}else E&&f.append(E,R)}}else{if(Of(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wh,a=null,c=Kh,x=i}return f&&c==="text/plain"&&(x=f,f=void 0),{action:a,method:t.toLowerCase(),encType:c,formData:f,body:x}}function H1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function ob(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lb(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function cb(i,e,t){let a=await Promise.all(i.map(async c=>{let f=e.routes[c.route.id];if(f){let x=await ob(f,t);return x.links?x.links():[]}return[]}));return db(a.flat(1).filter(lb).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function z2(i,e,t,a,c,f){let x=(_,E)=>t[E]?_.route.id!==t[E].route.id:!0,v=(_,E)=>{var C;return t[E].pathname!==_.pathname||((C=t[E].route.path)==null?void 0:C.endsWith("*"))&&t[E].params["*"]!==_.params["*"]};return f==="assets"?e.filter((_,E)=>x(_,E)||v(_,E)):f==="data"?e.filter((_,E)=>{var R;let C=a.routes[_.route.id];if(!C||!C.hasLoader)return!1;if(x(_,E)||v(_,E))return!0;if(_.route.shouldRevalidate){let k=_.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((R=t[0])==null?void 0:R.params)||{},nextUrl:new URL(i,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function ub(i,e){return hb(i.map(t=>{let a=e.routes[t.route.id];if(!a)return[];let c=[a.module];return a.imports&&(c=c.concat(a.imports)),c}).flat(1))}function hb(i){return[...new Set(i)]}function fb(i){let e={},t=Object.keys(i).sort();for(let a of t)e[a]=i[a];return e}function db(i,e){let t=new Set;return new Set(e),i.reduce((a,c)=>{let f=JSON.stringify(fb(c));return t.has(f)||(t.add(f),a.push({key:f,link:c})),a},[])}function gb(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function mb(){let i=ne.useContext(uc);return H1(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function pb(){let i=ne.useContext(Mf);return H1(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var G1=ne.createContext(void 0);G1.displayName="FrameworkContext";function zx(){let i=ne.useContext(G1);return H1(i,"You must render this element inside a <HydratedRouter> element"),i}function yb(i,e){let t=ne.useContext(G1),[a,c]=ne.useState(!1),[f,x]=ne.useState(!1),{onFocus:v,onBlur:_,onMouseEnter:E,onMouseLeave:C,onTouchStart:R}=e,k=ne.useRef(null);ne.useEffect(()=>{if(i==="render"&&x(!0),i==="viewport"){let J=he=>{he.forEach(fe=>{x(fe.isIntersecting)})},W=new IntersectionObserver(J,{threshold:.5});return k.current&&W.observe(k.current),()=>{W.disconnect()}}},[i]),ne.useEffect(()=>{if(a){let J=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(J)}}},[a]);let j=()=>{c(!0)},G=()=>{c(!1),x(!1)};return t?i!=="intent"?[f,k,{}]:[f,k,{onFocus:lu(v,j),onBlur:lu(_,G),onMouseEnter:lu(E,j),onMouseLeave:lu(C,G),onTouchStart:lu(R,j)}]:[!1,k,{}]}function lu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function xb({page:i,...e}){let{router:t}=mb(),a=ne.useMemo(()=>Ox(t.routes,i,t.basename),[t.routes,i,t.basename]);return a?ne.createElement(wb,{page:i,matches:a,...e}):null}function Eb(i){let{manifest:e,routeModules:t}=zx(),[a,c]=ne.useState([]);return ne.useEffect(()=>{let f=!1;return cb(i,e,t).then(x=>{f||c(x)}),()=>{f=!0}},[i,e,t]),a}function wb({page:i,matches:e,...t}){let a=ka(),{manifest:c,routeModules:f}=zx(),{loaderData:x,matches:v}=pb(),_=ne.useMemo(()=>z2(i,e,v,c,a,"data"),[i,e,v,c,a]),E=ne.useMemo(()=>z2(i,e,v,c,a,"assets"),[i,e,v,c,a]),C=ne.useMemo(()=>{if(i===a.pathname+a.search+a.hash)return[];let j=new Set,G=!1;if(e.forEach(W=>{var fe;let he=c.routes[W.route.id];!he||!he.hasLoader||(!_.some(re=>re.route.id===W.route.id)&&W.route.id in x&&((fe=f[W.route.id])!=null&&fe.shouldRevalidate)||he.hasClientLoader?G=!0:j.add(W.route.id))}),j.size===0)return[];let J=gb(i);return G&&j.size>0&&J.searchParams.set("_routes",e.filter(W=>j.has(W.route.id)).map(W=>W.route.id).join(",")),[J.pathname+J.search]},[x,a,c,_,e,i,f]),R=ne.useMemo(()=>ub(E,c),[E,c]),k=Eb(E);return ne.createElement(ne.Fragment,null,C.map(j=>ne.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...t})),R.map(j=>ne.createElement("link",{key:j,rel:"modulepreload",href:j,...t})),k.map(({key:j,link:G})=>ne.createElement("link",{key:j,...G})))}function _b(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Hx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Hx&&(window.__reactRouterVersion="7.1.5")}catch{}function Ab({basename:i,children:e,window:t}){let a=ne.useRef();a.current==null&&(a.current=lv({window:t,v5Compat:!0}));let c=a.current,[f,x]=ne.useState({action:c.action,location:c.location}),v=ne.useCallback(_=>{ne.startTransition(()=>x(_))},[x]);return ne.useLayoutEffect(()=>c.listen(v),[c,v]),ne.createElement(Kv,{basename:i,children:e,location:f.location,navigationType:f.action,navigator:c})}var Gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qx=ne.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:c,reloadDocument:f,replace:x,state:v,target:_,to:E,preventScrollReset:C,viewTransition:R,...k},j){let{basename:G}=ne.useContext(Cs),J=typeof E=="string"&&Gx.test(E),W,he=!1;if(typeof E=="string"&&J&&(W=E,Hx))try{let P=new URL(window.location.href),Y=E.startsWith("//")?new URL(P.protocol+E):new URL(E),Z=Eo(Y.pathname,G);Y.origin===P.origin&&Z!=null?E=Z+Y.search+Y.hash:he=!0}catch{Fi(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let fe=Lv(E,{relative:c}),[re,_e,je]=yb(a,k),Ue=Cb(E,{replace:x,state:v,target:_,preventScrollReset:C,relative:c,viewTransition:R});function z(P){e&&e(P),P.defaultPrevented||Ue(P)}let F=ne.createElement("a",{...k,...je,href:W||fe,onClick:he||f?e:z,ref:_b(j,_e),target:_,"data-discover":!J&&t==="render"?"true":void 0});return re&&!J?ne.createElement(ne.Fragment,null,F,ne.createElement(xb,{page:fe})):F});qx.displayName="Link";var vb=ne.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:c=!1,style:f,to:x,viewTransition:v,children:_,...E},C){let R=Du(x,{relative:E.relative}),k=ka(),j=ne.useContext(Mf),{navigator:G,basename:J}=ne.useContext(Cs),W=j!=null&&Mb(R)&&v===!0,he=G.encodeLocation?G.encodeLocation(R).pathname:R.pathname,fe=k.pathname,re=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;t||(fe=fe.toLowerCase(),re=re?re.toLowerCase():null,he=he.toLowerCase()),re&&J&&(re=Eo(re,J)||re);const _e=he!=="/"&&he.endsWith("/")?he.length-1:he.length;let je=fe===he||!c&&fe.startsWith(he)&&fe.charAt(_e)==="/",Ue=re!=null&&(re===he||!c&&re.startsWith(he)&&re.charAt(he.length)==="/"),z={isActive:je,isPending:Ue,isTransitioning:W},F=je?e:void 0,P;typeof a=="function"?P=a(z):P=[a,je?"active":null,Ue?"pending":null,W?"transitioning":null].filter(Boolean).join(" ");let Y=typeof f=="function"?f(z):f;return ne.createElement(qx,{...E,"aria-current":F,className:P,ref:C,style:Y,to:x,viewTransition:v},typeof _=="function"?_(z):_)});vb.displayName="NavLink";var bb=ne.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:c,state:f,method:x=Wh,action:v,onSubmit:_,relative:E,preventScrollReset:C,viewTransition:R,...k},j)=>{let G=Rb(),J=Db(v,{relative:E}),W=x.toLowerCase()==="get"?"get":"post",he=typeof v=="string"&&Gx.test(v),fe=re=>{if(_&&_(re),re.defaultPrevented)return;re.preventDefault();let _e=re.nativeEvent.submitter,je=(_e==null?void 0:_e.getAttribute("formmethod"))||x;G(_e||re.currentTarget,{fetcherKey:e,method:je,navigate:t,replace:c,state:f,relative:E,preventScrollReset:C,viewTransition:R})};return ne.createElement("form",{ref:j,method:W,action:J,onSubmit:a?_:fe,...k,"data-discover":!he&&i==="render"?"true":void 0})});bb.displayName="Form";function Tb(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yx(i){let e=ne.useContext(uc);return Fn(e,Tb(i)),e}function Cb(i,{target:e,replace:t,state:a,preventScrollReset:c,relative:f,viewTransition:x}={}){let v=$s(),_=ka(),E=Du(i,{relative:f});return ne.useCallback(C=>{if(nb(C,e)){C.preventDefault();let R=t!==void 0?t:wu(_)===wu(E);v(i,{replace:R,state:a,preventScrollReset:c,relative:f,viewTransition:x})}},[_,v,E,t,a,e,i,c,f,x])}function Sb(i){Fi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=ne.useRef(a1(i)),t=ne.useRef(!1),a=ka(),c=ne.useMemo(()=>rb(a.search,t.current?null:e.current),[a.search]),f=$s(),x=ne.useCallback((v,_)=>{const E=a1(typeof v=="function"?v(c):v);t.current=!0,f("?"+E,_)},[f,c]);return[c,x]}var Ib=0,Nb=()=>`__${String(++Ib)}__`;function Rb(){let{router:i}=Yx("useSubmit"),{basename:e}=ne.useContext(Cs),t=qv();return ne.useCallback(async(a,c={})=>{let{action:f,method:x,encType:v,formData:_,body:E}=ab(a,e);if(c.navigate===!1){let C=c.fetcherKey||Nb();await i.fetch(C,t,c.action||f,{preventScrollReset:c.preventScrollReset,formData:_,body:E,formMethod:c.method||x,formEncType:c.encType||v,flushSync:c.flushSync})}else await i.navigate(c.action||f,{preventScrollReset:c.preventScrollReset,formData:_,body:E,formMethod:c.method||x,formEncType:c.encType||v,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,e,t])}function Db(i,{relative:e}={}){let{basename:t}=ne.useContext(Cs),a=ne.useContext(Ss);Fn(a,"useFormAction must be used inside a RouteContext");let[c]=a.matches.slice(-1),f={...Du(i||".",{relative:e})},x=ka();if(i==null){f.search=x.search;let v=new URLSearchParams(f.search),_=v.getAll("index");if(_.some(C=>C==="")){v.delete("index"),_.filter(R=>R).forEach(R=>v.append("index",R));let C=v.toString();f.search=C?`?${C}`:""}}return(!i||i===".")&&c.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(f.pathname=f.pathname==="/"?t:Na([t,f.pathname])),wu(f)}function Mb(i,e={}){let t=ne.useContext(Bx);Fn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Yx("useViewTransitionState"),c=Du(i,{relative:e.relative});if(!t.isTransitioning)return!1;let f=Eo(t.currentLocation.pathname,a)||t.currentLocation.pathname,x=Eo(t.nextLocation.pathname,a)||t.nextLocation.pathname;return lf(c.pathname,x)!=null||lf(c.pathname,f)!=null}new TextEncoder;var H2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=function(i){const e=[];let t=0;for(let a=0;a<i.length;a++){let c=i.charCodeAt(a);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(c=65536+((c&1023)<<10)+(i.charCodeAt(++a)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},Ob=function(i){const e=[];let t=0,a=0;for(;t<i.length;){const c=i[t++];if(c<128)e[a++]=String.fromCharCode(c);else if(c>191&&c<224){const f=i[t++];e[a++]=String.fromCharCode((c&31)<<6|f&63)}else if(c>239&&c<365){const f=i[t++],x=i[t++],v=i[t++],_=((c&7)<<18|(f&63)<<12|(x&63)<<6|v&63)-65536;e[a++]=String.fromCharCode(55296+(_>>10)),e[a++]=String.fromCharCode(56320+(_&1023))}else{const f=i[t++],x=i[t++];e[a++]=String.fromCharCode((c&15)<<12|(f&63)<<6|x&63)}}return e.join("")},Qx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let c=0;c<i.length;c+=3){const f=i[c],x=c+1<i.length,v=x?i[c+1]:0,_=c+2<i.length,E=_?i[c+2]:0,C=f>>2,R=(f&3)<<4|v>>4;let k=(v&15)<<2|E>>6,j=E&63;_||(j=64,x||(k=64)),a.push(t[C],t[R],t[k],t[j])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Xx(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Ob(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let c=0;c<i.length;){const f=t[i.charAt(c++)],v=c<i.length?t[i.charAt(c)]:0;++c;const E=c<i.length?t[i.charAt(c)]:64;++c;const R=c<i.length?t[i.charAt(c)]:64;if(++c,f==null||v==null||E==null||R==null)throw new Lb;const k=f<<2|v>>4;if(a.push(k),E!==64){const j=v<<4&240|E>>2;if(a.push(j),R!==64){const G=E<<6&192|R;a.push(G)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Lb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kb=function(i){const e=Xx(i);return Qx.encodeByteArray(e,!0)},cf=function(i){return kb(i).replace(/\./g,"")},Wx=function(i){try{return Qx.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=()=>Pb().__FIREBASE_DEFAULTS__,Ub=()=>{if(typeof process>"u"||typeof H2>"u")return;const i=H2.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Vb=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Wx(i[1]);return e&&JSON.parse(e)},Lf=()=>{try{return Bb()||Ub()||Vb()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Kx=i=>{var e,t;return(t=(e=Lf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},jb=i=>{const e=Kx(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},Zx=()=>{var i;return(i=Lf())===null||i===void 0?void 0:i.config},$x=i=>{var e;return(e=Lf())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",c=i.iat||0,f=i.sub||i.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const x=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:c,exp:c+3600,auth_time:c,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}}},i);return[cf(JSON.stringify(t)),cf(JSON.stringify(x)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ri())}function Gb(){var i;const e=(i=Lf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yb(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Xb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qb(){const i=ri();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Wb(){return!Gb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kb(){try{return typeof indexedDB=="object"}catch{return!1}}function Zb(){return new Promise((i,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(a);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(a),i(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{var f;e(((f=c.error)===null||f===void 0?void 0:f.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="FirebaseError";class Pa extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=$b,Object.setPrototypeOf(this,Pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mu.prototype.create)}}class Mu{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},c=`${this.service}/${e}`,f=this.errors[e],x=f?Jb(f,a):"Error",v=`${this.serviceName}: ${x} (${c}).`;return new Pa(c,v,a)}}function Jb(i,e){return i.replace(eT,(t,a)=>{const c=e[a];return c!=null?String(c):`<${a}?>`})}const eT=/\{\$([^}]+)}/g;function tT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function uf(i,e){if(i===e)return!0;const t=Object.keys(i),a=Object.keys(e);for(const c of t){if(!a.includes(c))return!1;const f=i[c],x=e[c];if(G2(f)&&G2(x)){if(!uf(f,x))return!1}else if(f!==x)return!1}for(const c of a)if(!t.includes(c))return!1;return!0}function G2(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(i){const e=[];for(const[t,a]of Object.entries(i))Array.isArray(a)?a.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function nT(i,e){const t=new rT(i,e);return t.subscribe.bind(t)}class rT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let c;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");iT(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:a},c.next===void 0&&(c.next=Y0),c.error===void 0&&(c.error=Y0),c.complete===void 0&&(c.complete=Y0);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),f}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iT(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Y0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(i){return i&&i._delegate?i._delegate:i}class Jo{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new Fb;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&a.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),c=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(f){if(c)return null;throw f}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oT(e))try{this.getOrInitializeService({instanceIdentifier:Wo})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const f=this.getOrInitializeService({instanceIdentifier:c});a.resolve(f)}catch{}}}}clearInstance(e=Wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wo){return this.instances.has(e)}getOptions(e=Wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[f,x]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(f);a===v&&x.resolve(c)}return c}onInit(e,t){var a;const c=this.normalizeInstanceIdentifier(t),f=(a=this.onInitCallbacks.get(c))!==null&&a!==void 0?a:new Set;f.add(e),this.onInitCallbacks.set(c,f);const x=this.instances.get(c);return x&&e(x,c),()=>{f.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const c of a)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:aT(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Wo){return this.component?this.component.multipleInstances?e:Wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aT(i){return i===Wo?void 0:i}function oT(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(zt||(zt={}));const cT={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},uT=zt.INFO,hT={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},fT=(i,e,...t)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),c=hT[e];if(c)console[c](`[${a}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class q1{constructor(e){this.name=e,this._logLevel=uT,this._logHandler=fT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...e),this._logHandler(this,zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...e),this._logHandler(this,zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...e),this._logHandler(this,zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...e),this._logHandler(this,zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...e),this._logHandler(this,zt.ERROR,...e)}}const dT=(i,e)=>e.some(t=>i instanceof t);let q2,Y2;function gT(){return q2||(q2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mT(){return Y2||(Y2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jx=new WeakMap,o1=new WeakMap,eE=new WeakMap,X0=new WeakMap,Y1=new WeakMap;function pT(i){const e=new Promise((t,a)=>{const c=()=>{i.removeEventListener("success",f),i.removeEventListener("error",x)},f=()=>{t(go(i.result)),c()},x=()=>{a(i.error),c()};i.addEventListener("success",f),i.addEventListener("error",x)});return e.then(t=>{t instanceof IDBCursor&&Jx.set(t,i)}).catch(()=>{}),Y1.set(e,i),e}function yT(i){if(o1.has(i))return;const e=new Promise((t,a)=>{const c=()=>{i.removeEventListener("complete",f),i.removeEventListener("error",x),i.removeEventListener("abort",x)},f=()=>{t(),c()},x=()=>{a(i.error||new DOMException("AbortError","AbortError")),c()};i.addEventListener("complete",f),i.addEventListener("error",x),i.addEventListener("abort",x)});o1.set(i,e)}let l1={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return o1.get(i);if(e==="objectStoreNames")return i.objectStoreNames||eE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return go(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function xT(i){l1=i(l1)}function ET(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=i.call(Q0(this),e,...t);return eE.set(a,e.sort?e.sort():[e]),go(a)}:mT().includes(i)?function(...e){return i.apply(Q0(this),e),go(Jx.get(this))}:function(...e){return go(i.apply(Q0(this),e))}}function wT(i){return typeof i=="function"?ET(i):(i instanceof IDBTransaction&&yT(i),dT(i,gT())?new Proxy(i,l1):i)}function go(i){if(i instanceof IDBRequest)return pT(i);if(X0.has(i))return X0.get(i);const e=wT(i);return e!==i&&(X0.set(i,e),Y1.set(e,i)),e}const Q0=i=>Y1.get(i);function _T(i,e,{blocked:t,upgrade:a,blocking:c,terminated:f}={}){const x=indexedDB.open(i,e),v=go(x);return a&&x.addEventListener("upgradeneeded",_=>{a(go(x.result),_.oldVersion,_.newVersion,go(x.transaction),_)}),t&&x.addEventListener("blocked",_=>t(_.oldVersion,_.newVersion,_)),v.then(_=>{f&&_.addEventListener("close",()=>f()),c&&_.addEventListener("versionchange",E=>c(E.oldVersion,E.newVersion,E))}).catch(()=>{}),v}const AT=["get","getKey","getAll","getAllKeys","count"],vT=["put","add","delete","clear"],W0=new Map;function X2(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(W0.get(e))return W0.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,c=vT.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(c||AT.includes(t)))return;const f=async function(x,...v){const _=this.transaction(x,c?"readwrite":"readonly");let E=_.store;return a&&(E=E.index(v.shift())),(await Promise.all([E[t](...v),c&&_.done]))[0]};return W0.set(e,f),f}xT(i=>({...i,get:(e,t,a)=>X2(e,t)||i.get(e,t,a),has:(e,t)=>!!X2(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TT(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function TT(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const c1="@firebase/app",Q2="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new q1("@firebase/app"),CT="@firebase/app-compat",ST="@firebase/analytics-compat",IT="@firebase/analytics",NT="@firebase/app-check-compat",RT="@firebase/app-check",DT="@firebase/auth",MT="@firebase/auth-compat",OT="@firebase/database",LT="@firebase/data-connect",kT="@firebase/database-compat",PT="@firebase/functions",BT="@firebase/functions-compat",UT="@firebase/installations",VT="@firebase/installations-compat",jT="@firebase/messaging",FT="@firebase/messaging-compat",zT="@firebase/performance",HT="@firebase/performance-compat",GT="@firebase/remote-config",qT="@firebase/remote-config-compat",YT="@firebase/storage",XT="@firebase/storage-compat",QT="@firebase/firestore",WT="@firebase/vertexai",KT="@firebase/firestore-compat",ZT="firebase",$T="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="[DEFAULT]",JT={[c1]:"fire-core",[CT]:"fire-core-compat",[IT]:"fire-analytics",[ST]:"fire-analytics-compat",[RT]:"fire-app-check",[NT]:"fire-app-check-compat",[DT]:"fire-auth",[MT]:"fire-auth-compat",[OT]:"fire-rtdb",[LT]:"fire-data-connect",[kT]:"fire-rtdb-compat",[PT]:"fire-fn",[BT]:"fire-fn-compat",[UT]:"fire-iid",[VT]:"fire-iid-compat",[jT]:"fire-fcm",[FT]:"fire-fcm-compat",[zT]:"fire-perf",[HT]:"fire-perf-compat",[GT]:"fire-rc",[qT]:"fire-rc-compat",[YT]:"fire-gcs",[XT]:"fire-gcs-compat",[QT]:"fire-fst",[KT]:"fire-fst-compat",[WT]:"fire-vertex","fire-js":"fire-js",[ZT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Map,eC=new Map,h1=new Map;function W2(i,e){try{i.container.addComponent(e)}catch(t){Da.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ec(i){const e=i.name;if(h1.has(e))return Da.debug(`There were multiple attempts to register component ${e}.`),!1;h1.set(e,i);for(const t of hf.values())W2(t,i);for(const t of eC.values())W2(t,i);return!0}function X1(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function As(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mo=new Mu("app","Firebase",tC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=$T;function tE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const a=Object.assign({name:u1,automaticDataCollectionEnabled:!1},e),c=a.name;if(typeof c!="string"||!c)throw mo.create("bad-app-name",{appName:String(c)});if(t||(t=Zx()),!t)throw mo.create("no-options");const f=hf.get(c);if(f){if(uf(t,f.options)&&uf(a,f.config))return f;throw mo.create("duplicate-app",{appName:c})}const x=new lT(c);for(const _ of h1.values())x.addComponent(_);const v=new nC(t,a,x);return hf.set(c,v),v}function nE(i=u1){const e=hf.get(i);if(!e&&i===u1&&Zx())return tE();if(!e)throw mo.create("no-app",{appName:i});return e}function po(i,e,t){var a;let c=(a=JT[i])!==null&&a!==void 0?a:i;t&&(c+=`-${t}`);const f=c.match(/\s|\//),x=e.match(/\s|\//);if(f||x){const v=[`Unable to register library "${c}" with version "${e}":`];f&&v.push(`library name "${c}" contains illegal characters (whitespace or "/")`),f&&x&&v.push("and"),x&&v.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Da.warn(v.join(" "));return}ec(new Jo(`${c}-version`,()=>({library:c,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="firebase-heartbeat-database",iC=1,_u="firebase-heartbeat-store";let K0=null;function rE(){return K0||(K0=_T(rC,iC,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(_u)}catch(t){console.warn(t)}}}}).catch(i=>{throw mo.create("idb-open",{originalErrorMessage:i.message})})),K0}async function sC(i){try{const t=(await rE()).transaction(_u),a=await t.objectStore(_u).get(iE(i));return await t.done,a}catch(e){if(e instanceof Pa)Da.warn(e.message);else{const t=mo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Da.warn(t.message)}}}async function K2(i,e){try{const a=(await rE()).transaction(_u,"readwrite");await a.objectStore(_u).put(e,iE(i)),await a.done}catch(t){if(t instanceof Pa)Da.warn(t.message);else{const a=mo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Da.warn(a.message)}}}function iE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=1024,oC=30;class lC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uC(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=Z2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(x=>x.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:c}),this._heartbeatsCache.heartbeats.length>oC){const x=hC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(x,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Da.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Z2(),{heartbeatsToSend:a,unsentEntries:c}=cC(this._heartbeatsCache.heartbeats),f=cf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(t){return Da.warn(t),""}}}function Z2(){return new Date().toISOString().substring(0,10)}function cC(i,e=aC){const t=[];let a=i.slice();for(const c of i){const f=t.find(x=>x.agent===c.agent);if(f){if(f.dates.push(c.date),$2(t)>e){f.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),$2(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class uC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kb()?Zb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return K2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return K2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...e.heartbeats]})}else return}}function $2(i){return cf(JSON.stringify({version:2,heartbeats:i})).length}function hC(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let a=1;a<i.length;a++)i[a].date<t&&(t=i[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(i){ec(new Jo("platform-logger",e=>new bT(e),"PRIVATE")),ec(new Jo("heartbeat",e=>new lC(e),"PRIVATE")),po(c1,Q2,i),po(c1,Q2,"esm2017"),po("fire-js","")}fC("");function Q1(i,e){var t={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(i);c<a.length;c++)e.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(i,a[c])&&(t[a[c]]=i[a[c]]);return t}function sE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dC=sE,aE=new Mu("auth","Firebase",sE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new q1("@firebase/auth");function gC(i,...e){ff.logLevel<=zt.WARN&&ff.warn(`Auth (${fc}): ${i}`,...e)}function Zh(i,...e){ff.logLevel<=zt.ERROR&&ff.error(`Auth (${fc}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(i,...e){throw K1(i,...e)}function vs(i,...e){return K1(i,...e)}function W1(i,e,t){const a=Object.assign(Object.assign({},dC()),{[e]:t});return new Mu("auth","Firebase",a).create(e,{appName:i.name})}function $o(i){return W1(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mC(i,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Ks(i,"argument-error"),W1(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function K1(i,...e){if(typeof i!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(t,...a)}return aE.create(i,...e)}function wt(i,e,...t){if(!i)throw K1(e,...t)}function Ta(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Zh(e),new Error(e)}function Ma(i,e){i||Ta(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function pC(){return J2()==="http:"||J2()==="https:"}function J2(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pC()||Yb()||"connection"in navigator)?navigator.onLine:!0}function xC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ma(t>e,"Short delay should be less than long delay!"),this.isMobile=Hb()||Xb()}get(){return yC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(i,e){Ma(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new Lu(3e4,6e4);function $1(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function sl(i,e,t,a,c={}){return lE(i,c,async()=>{let f={},x={};a&&(e==="GET"?x=a:f={body:JSON.stringify(a)});const v=Ou(Object.assign({key:i.config.apiKey},x)).slice(1),_=await i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);const E=Object.assign({method:e,headers:_},f);return qb()||(E.referrerPolicy="no-referrer"),oE.fetch()(cE(i,i.config.apiHost,t,v),E)})}async function lE(i,e,t){i._canInitEmulator=!1;const a=Object.assign(Object.assign({},EC),e);try{const c=new AC(i),f=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const x=await f.json();if("needConfirmation"in x)throw Hh(i,"account-exists-with-different-credential",x);if(f.ok&&!("errorMessage"in x))return x;{const v=f.ok?x.errorMessage:x.error.message,[_,E]=v.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(i,"credential-already-in-use",x);if(_==="EMAIL_EXISTS")throw Hh(i,"email-already-in-use",x);if(_==="USER_DISABLED")throw Hh(i,"user-disabled",x);const C=a[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw W1(i,C,E);Ks(i,C)}}catch(c){if(c instanceof Pa)throw c;Ks(i,"network-request-failed",{message:String(c)})}}async function _C(i,e,t,a,c={}){const f=await sl(i,e,t,a,c);return"mfaPendingCredential"in f&&Ks(i,"multi-factor-auth-required",{_serverResponse:f}),f}function cE(i,e,t,a){const c=`${e}${t}?${a}`;return i.config.emulator?Z1(i.config,c):`${i.config.apiScheme}://${c}`}class AC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(vs(this.auth,"network-request-failed")),wC.get())})}}function Hh(i,e,t){const a={appName:i.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const c=vs(i,e,a);return c.customData._tokenResponse=t,c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(i,e){return sl(i,"POST","/v1/accounts:delete",e)}async function uE(i,e){return sl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bC(i,e=!1){const t=Gr(i),a=await t.getIdToken(e),c=J1(a);wt(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const f=typeof c.firebase=="object"?c.firebase:void 0,x=f==null?void 0:f.sign_in_provider;return{claims:c,token:a,authTime:mu(Z0(c.auth_time)),issuedAtTime:mu(Z0(c.iat)),expirationTime:mu(Z0(c.exp)),signInProvider:x||null,signInSecondFactor:(f==null?void 0:f.sign_in_second_factor)||null}}function Z0(i){return Number(i)*1e3}function J1(i){const[e,t,a]=i.split(".");if(e===void 0||t===void 0||a===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const c=Wx(t);return c?JSON.parse(c):(Zh("Failed to decode base64 JWT payload"),null)}catch(c){return Zh("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function ey(i){const e=J1(i);return wt(e,"internal-error"),wt(typeof e.exp<"u","internal-error"),wt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(i,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Pa&&TC(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function TC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const c=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,c)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function df(i){var e;const t=i.auth,a=await i.getIdToken(),c=await tc(i,uE(t,{idToken:a}));wt(c==null?void 0:c.users.length,t,"internal-error");const f=c.users[0];i._notifyReloadListener(f);const x=!((e=f.providerUserInfo)===null||e===void 0)&&e.length?hE(f.providerUserInfo):[],v=IC(i.providerData,x),_=i.isAnonymous,E=!(i.email&&f.passwordHash)&&!(v!=null&&v.length),C=_?E:!1,R={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:v,metadata:new d1(f.createdAt,f.lastLoginAt),isAnonymous:C};Object.assign(i,R)}async function SC(i){const e=Gr(i);await df(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IC(i,e){return[...i.filter(a=>!e.some(c=>c.providerId===a.providerId)),...e]}function hE(i){return i.map(e=>{var{providerId:t}=e,a=Q1(e,["providerId"]);return{providerId:t,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(i,e){const t=await lE(i,{},async()=>{const a=Ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:f}=i.config,x=cE(i,c,"/v1/token",`key=${f}`),v=await i._getAdditionalHeaders();return v["Content-Type"]="application/x-www-form-urlencoded",oE.fetch()(x,{method:"POST",headers:v,body:a})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RC(i,e){return sl(i,"POST","/v2/accounts:revokeToken",$1(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){wt(e.idToken,"internal-error"),wt(typeof e.idToken<"u","internal-error"),wt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ey(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){wt(e.length!==0,"internal-error");const t=ey(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(wt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:c,expiresIn:f}=await NC(e,t);this.updateTokensAndExpiration(a,c,Number(f))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:c,expirationTime:f}=t,x=new Wl;return a&&(wt(typeof a=="string","internal-error",{appName:e}),x.refreshToken=a),c&&(wt(typeof c=="string","internal-error",{appName:e}),x.accessToken=c),f&&(wt(typeof f=="number","internal-error",{appName:e}),x.expirationTime=f),x}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return Ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(i,e){wt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ca{constructor(e){var{uid:t,auth:a,stsTokenManager:c}=e,f=Q1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=a,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new d1(f.createdAt||void 0,f.lastLoginAt||void 0)}async getIdToken(e){const t=await tc(this,this.stsTokenManager.getToken(this.auth,e));return wt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bC(this,e)}reload(){return SC(this)}_assign(e){this!==e&&(wt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ca(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await df(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(As(this.auth.app))return Promise.reject($o(this.auth));const e=await this.getIdToken();return await tc(this,vC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var a,c,f,x,v,_,E,C;const R=(a=t.displayName)!==null&&a!==void 0?a:void 0,k=(c=t.email)!==null&&c!==void 0?c:void 0,j=(f=t.phoneNumber)!==null&&f!==void 0?f:void 0,G=(x=t.photoURL)!==null&&x!==void 0?x:void 0,J=(v=t.tenantId)!==null&&v!==void 0?v:void 0,W=(_=t._redirectEventId)!==null&&_!==void 0?_:void 0,he=(E=t.createdAt)!==null&&E!==void 0?E:void 0,fe=(C=t.lastLoginAt)!==null&&C!==void 0?C:void 0,{uid:re,emailVerified:_e,isAnonymous:je,providerData:Ue,stsTokenManager:z}=t;wt(re&&z,e,"internal-error");const F=Wl.fromJSON(this.name,z);wt(typeof re=="string",e,"internal-error"),oo(R,e.name),oo(k,e.name),wt(typeof _e=="boolean",e,"internal-error"),wt(typeof je=="boolean",e,"internal-error"),oo(j,e.name),oo(G,e.name),oo(J,e.name),oo(W,e.name),oo(he,e.name),oo(fe,e.name);const P=new Ca({uid:re,auth:e,email:k,emailVerified:_e,displayName:R,isAnonymous:je,photoURL:G,phoneNumber:j,tenantId:J,stsTokenManager:F,createdAt:he,lastLoginAt:fe});return Ue&&Array.isArray(Ue)&&(P.providerData=Ue.map(Y=>Object.assign({},Y))),W&&(P._redirectEventId=W),P}static async _fromIdTokenResponse(e,t,a=!1){const c=new Wl;c.updateFromServerResponse(t);const f=new Ca({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:a});return await df(f),f}static async _fromGetAccountInfoResponse(e,t,a){const c=t.users[0];wt(c.localId!==void 0,"internal-error");const f=c.providerUserInfo!==void 0?hE(c.providerUserInfo):[],x=!(c.email&&c.passwordHash)&&!(f!=null&&f.length),v=new Wl;v.updateFromIdToken(a);const _=new Ca({uid:c.localId,auth:e,stsTokenManager:v,isAnonymous:x}),E={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new d1(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(f!=null&&f.length)};return Object.assign(_,E),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new Map;function Sa(i){Ma(i instanceof Function,"Expected a class definition");let e=ty.get(i);return e?(Ma(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,ty.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fE.type="NONE";const ny=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(i,e,t){return`firebase:${i}:${e}:${t}`}class Kl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:c,name:f}=this.auth;this.fullUserKey=$h(this.userKey,c.apiKey,f),this.fullPersistenceKey=$h("persistence",c.apiKey,f),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ca._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Kl(Sa(ny),e,a);const c=(await Promise.all(t.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let f=c[0]||Sa(ny);const x=$h(a,e.config.apiKey,e.name);let v=null;for(const E of t)try{const C=await E._get(x);if(C){const R=Ca._fromJSON(e,C);E!==f&&(v=R),f=E;break}}catch{}const _=c.filter(E=>E._shouldAllowMigration);return!f._shouldAllowMigration||!_.length?new Kl(f,e,a):(f=_[0],v&&await f._set(x,v.toJSON()),await Promise.all(t.map(async E=>{if(E!==f)try{await E._remove(x)}catch{}})),new Kl(f,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xE(e))return"Blackberry";if(EE(e))return"Webos";if(gE(e))return"Safari";if((e.includes("chrome/")||mE(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function dE(i=ri()){return/firefox\//i.test(i)}function gE(i=ri()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mE(i=ri()){return/crios\//i.test(i)}function pE(i=ri()){return/iemobile/i.test(i)}function yE(i=ri()){return/android/i.test(i)}function xE(i=ri()){return/blackberry/i.test(i)}function EE(i=ri()){return/webos/i.test(i)}function eg(i=ri()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function DC(i=ri()){var e;return eg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MC(){return Qb()&&document.documentMode===10}function wE(i=ri()){return eg(i)||yE(i)||EE(i)||xE(i)||/windows phone/i.test(i)||pE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(i,e=[]){let t;switch(i){case"Browser":t=ry(ri());break;case"Worker":t=`${ry(ri())}-${i}`;break;default:t=i}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fc}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=f=>new Promise((x,v)=>{try{const _=e(f);x(_)}catch(_){v(_)}});a.onAbort=t,this.queue.push(a);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(i,e={}){return sl(i,"GET","/v2/passwordPolicy",$1(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=6;class PC{constructor(e){var t,a,c,f;const x=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=x.minPasswordLength)!==null&&t!==void 0?t:kC,x.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=x.maxPasswordLength),x.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=x.containsLowercaseCharacter),x.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=x.containsUppercaseCharacter),x.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=x.containsNumericCharacter),x.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=x.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(c=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&c!==void 0?c:"",this.forceUpgradeOnSignin=(f=e.forceUpgradeOnSignin)!==null&&f!==void 0?f:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,a,c,f,x,v;const _={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,_),this.validatePasswordCharacterOptions(e,_),_.isValid&&(_.isValid=(t=_.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),_.isValid&&(_.isValid=(a=_.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),_.isValid&&(_.isValid=(c=_.containsLowercaseLetter)!==null&&c!==void 0?c:!0),_.isValid&&(_.isValid=(f=_.containsUppercaseLetter)!==null&&f!==void 0?f:!0),_.isValid&&(_.isValid=(x=_.containsNumericCharacter)!==null&&x!==void 0?x:!0),_.isValid&&(_.isValid=(v=_.containsNonAlphanumericCharacter)!==null&&v!==void 0?v:!0),_}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let c=0;c<e.length;c++)a=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,c,f){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t,a,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iy(this),this.idTokenSubscription=new iy(this),this.beforeStateQueue=new OC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sa(t)),this._initializationPromise=this.queue(async()=>{var a,c;if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uE(this,{idToken:e}),a=await Ca._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(As(this.app)){const x=this.app.settings.authIdToken;return x?new Promise(v=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(x).then(v,v))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let c=a,f=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const x=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,v=c==null?void 0:c._redirectEventId,_=await this.tryRedirectSignIn(e);(!x||x===v)&&(_!=null&&_.user)&&(c=_.user,f=!0)}if(!c)return this.directlySetCurrentUser(null);if(!c._redirectEventId){if(f)try{await this.beforeStateQueue.runMiddleware(c)}catch(x){c=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(x))}return c?this.reloadAndSetCurrentUserOrClear(c):this.directlySetCurrentUser(null)}return wt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===c._redirectEventId?this.directlySetCurrentUser(c):this.reloadAndSetCurrentUserOrClear(c)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await df(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(As(this.app))return Promise.reject($o(this));const t=e?Gr(e):null;return t&&wt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&wt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return As(this.app)?Promise.reject($o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return As(this.app)?Promise.reject($o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LC(this),t=new PC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mu("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await RC(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sa(e)||this._popupRedirectResolver;wt(t,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[Sa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,c){if(this._deleted)return()=>{};const f=typeof t=="function"?t:t.next.bind(t);let x=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(wt(v,this,"internal-error"),v.then(()=>{x||f(this.currentUser)}),typeof t=="function"){const _=e.addObserver(t,a,c);return()=>{x=!0,_()}}else{const _=e.addObserver(t);return()=>{x=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_E(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(t["X-Firebase-Client"]=a);const c=await this._getAppCheckToken();return c&&(t["X-Firebase-AppCheck"]=c),t}async _getAppCheckToken(){var e;if(As(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&gC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function kf(i){return Gr(i)}class iy{constructor(e){this.auth=e,this.observer=null,this.addObserver=nT(t=>this.observer=t)}get next(){return wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UC(i){tg=i}function VC(i){return tg.loadJS(i)}function jC(){return tg.gapiScript}function FC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(i,e){const t=X1(i,"auth");if(t.isInitialized()){const c=t.getImmediate(),f=t.getOptions();if(uf(f,e??{}))return c;Ks(c,"already-initialized")}return t.initialize({options:e})}function HC(i,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(Sa);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function GC(i,e,t){const a=kf(i);wt(a._canInitEmulator,a,"emulator-config-failed"),wt(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const c=!1,f=AE(e),{host:x,port:v}=qC(e),_=v===null?"":`:${v}`;a.config.emulator={url:`${f}//${x}${_}/`},a.settings.appVerificationDisabledForTesting=!0,a.emulatorConfig=Object.freeze({host:x,port:v,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:c})}),YC()}function AE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function qC(i){const e=AE(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(a);if(c){const f=c[1];return{host:f,port:sy(a.substr(f.length+1))}}else{const[f,x]=a.split(":");return{host:f,port:sy(x)}}}function sy(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function YC(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ta("not implemented")}_getIdTokenResponse(e){return Ta("not implemented")}_linkToIdToken(e,t){return Ta("not implemented")}_getReauthenticationResolver(e){return Ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(i,e){return _C(i,"POST","/v1/accounts:signInWithIdp",$1(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="http://localhost";class el extends vE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ks("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:c}=t,f=Q1(t,["providerId","signInMethod"]);if(!a||!c)return null;const x=new el(a,c);return x.idToken=f.idToken||void 0,x.accessToken=f.accessToken||void 0,x.secret=f.secret,x.nonce=f.nonce,x.pendingToken=f.pendingToken||null,x}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Zl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:XC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends ng{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends ku{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.FACEBOOK_SIGN_IN_METHOD="facebook.com";co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return el._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ba.credential(t,a)}catch{return null}}}ba.GOOGLE_SIGN_IN_METHOD="google.com";ba.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends ku{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.GITHUB_SIGN_IN_METHOD="github.com";uo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends ku{constructor(){super("twitter.com")}static credential(e,t){return el._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ho.credential(t,a)}catch{return null}}}ho.TWITTER_SIGN_IN_METHOD="twitter.com";ho.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,c=!1){const f=await Ca._fromIdTokenResponse(e,a,c),x=ay(a);return new nc({user:f,providerId:x,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const c=ay(a);return new nc({user:e,providerId:c,_tokenResponse:a,operationType:t})}}function ay(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends Pa{constructor(e,t,a,c){var f;super(t.code,t.message),this.operationType=a,this.user=c,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:e.name,tenantId:(f=e.tenantId)!==null&&f!==void 0?f:void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,c){return new gf(e,t,a,c)}}function bE(i,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(i,f,e,a):f})}async function QC(i,e,t=!1){const a=await tc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return nc._forOperation(i,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(i,e,t=!1){const{auth:a}=i;if(As(a.app))return Promise.reject($o(a));const c="reauthenticate";try{const f=await tc(i,bE(a,c,e,i),t);wt(f.idToken,a,"internal-error");const x=J1(f.idToken);wt(x,a,"internal-error");const{sub:v}=x;return wt(i.uid===v,a,"user-mismatch"),nc._forOperation(i,c,f)}catch(f){throw(f==null?void 0:f.code)==="auth/user-not-found"&&Ks(a,"user-mismatch"),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(i,e,t=!1){if(As(i.app))return Promise.reject($o(i));const a="signIn",c=await bE(i,a,e),f=await nc._fromIdTokenResponse(i,a,c);return t||await i._updateCurrentUser(f.user),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(i,e){return sl(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const a=Gr(i),f={idToken:await a.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},x=await tc(a,ZC(a.auth,f));a.displayName=x.displayName||null,a.photoURL=x.photoUrl||null;const v=a.providerData.find(({providerId:_})=>_==="password");v&&(v.displayName=a.displayName,v.photoURL=a.photoURL),await a._updateTokensIfNecessary(x)}function JC(i,e,t,a){return Gr(i).onIdTokenChanged(e,t,a)}function eS(i,e,t){return Gr(i).beforeAuthStateChanged(e,t)}function TE(i){return Gr(i).signOut()}const mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mf,"1"),this.storage.removeItem(mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=1e3,nS=10;class SE extends CE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),c=this.localCache[t];a!==c&&e(t,c,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((x,v,_)=>{this.notifyListeners(x,_)});return}const a=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const x=this.storage.getItem(a);!t&&this.localCache[a]===x||this.notifyListeners(a,x)},f=this.storage.getItem(a);MC()&&f!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,nS):c()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const c of Array.from(a))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},tS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}SE.type="LOCAL";const rS=SE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE extends CE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}IE.type="SESSION";const NE=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const a=new Pf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:c,data:f}=t.data,x=this.handlersMap[c];if(!(x!=null&&x.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:c});const v=Array.from(x).map(async E=>E(t.origin,f)),_=await iS(v);t.ports[0].postMessage({status:"done",eventId:a,eventType:c,response:_})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(i="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let f,x;return new Promise((v,_)=>{const E=rg("",20);c.port1.start();const C=setTimeout(()=>{_(new Error("unsupported_event"))},a);x={messageChannel:c,onMessage(R){const k=R;if(k.data.eventId===E)switch(k.data.status){case"ack":clearTimeout(C),f=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),v(k.data.response);break;default:clearTimeout(C),clearTimeout(f),_(new Error("invalid_response"));break}}},this.handlers.add(x),c.port1.addEventListener("message",x.onMessage),this.target.postMessage({eventType:e,eventId:E,data:t},[c.port2])}).finally(()=>{x&&this.removeMessageHandler(x)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(){return window}function aS(i){Xs().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(){return typeof Xs().WorkerGlobalScope<"u"&&typeof Xs().importScripts=="function"}async function oS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lS(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function cS(){return RE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="firebaseLocalStorageDb",uS=1,pf="firebaseLocalStorage",ME="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bf(i,e){return i.transaction([pf],e?"readwrite":"readonly").objectStore(pf)}function hS(){const i=indexedDB.deleteDatabase(DE);return new Pu(i).toPromise()}function g1(){const i=indexedDB.open(DE,uS);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(pf,{keyPath:ME})}catch(c){t(c)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(pf)?e(a):(a.close(),await hS(),e(await g1()))})})}async function oy(i,e,t){const a=Bf(i,!0).put({[ME]:e,value:t});return new Pu(a).toPromise()}async function fS(i,e){const t=Bf(i,!1).get(e),a=await new Pu(t).toPromise();return a===void 0?null:a.value}function ly(i,e){const t=Bf(i,!0).delete(e);return new Pu(t).toPromise()}const dS=800,gS=3;class OE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await g1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>gS)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pf._getInstance(cS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await oS(),!this.activeServiceWorker)return;this.sender=new sS(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((t=a[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await g1();return await oy(e,mf,"1"),await ly(e,mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>oy(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>fS(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ly(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const f=Bf(c,!1).getAll();return new Pu(f).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:c,value:f}of e)a.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(f)&&(this.notifyListeners(c,f),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!a.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const c of Array.from(a))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OE.type="LOCAL";const mS=OE;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(i,e){return e?Sa(e):(wt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends vE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pS(i){return KC(i.auth,new ig(i),i.bypassAuthState)}function yS(i){const{auth:e,user:t}=i;return wt(t,e,"internal-error"),WC(t,new ig(i),i.bypassAuthState)}async function xS(i){const{auth:e,user:t}=i;return wt(t,e,"internal-error"),QC(t,new ig(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t,a,c,f=!1){this.auth=e,this.resolver=a,this.user=c,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:c,tenantId:f,error:x,type:v}=e;if(x){this.reject(x);return}const _={auth:this.auth,requestUri:t,sessionId:a,tenantId:f||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(_))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pS;case"linkViaPopup":case"linkViaRedirect":return xS;case"reauthViaPopup":case"reauthViaRedirect":return yS;default:Ks(this.auth,"internal-error")}}resolve(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new Lu(2e3,1e4);async function wS(i,e,t){if(As(i.app))return Promise.reject(vs(i,"operation-not-supported-in-this-environment"));const a=kf(i);mC(i,e,ng);const c=LE(a,t);return new Ko(a,"signInViaPopup",e,c).executeNotNull()}class Ko extends kE{constructor(e,t,a,c,f){super(e,t,c,f),this.provider=a,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return wt(e,this.auth,"internal-error"),e}async onExecution(){Ma(this.filter.length===1,"Popup operations only handle one event");const e=rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if(!((a=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ES.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="pendingRedirect",Jh=new Map;class AS extends kE{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const a=await vS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vS(i,e){const t=CS(e),a=TS(i);if(!await a._isAvailable())return!1;const c=await a._get(t)==="true";return await a._remove(t),c}function bS(i,e){Jh.set(i._key(),e)}function TS(i){return Sa(i._redirectPersistence)}function CS(i){return $h(_S,i.config.apiKey,i.name)}async function SS(i,e,t=!1){if(As(i.app))return Promise.reject($o(i));const a=kf(i),c=LE(a,e),x=await new AS(a,c,t).execute();return x&&!t&&(delete x.user._redirectEventId,await a._persistUserIfCurrent(x.user),await a._setRedirectUser(null,e)),x}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=10*60*1e3;class NS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!PE(e)){const c=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";t.onError(vs(this.auth,c))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IS&&this.cachedEventUids.clear(),this.cachedEventUids.has(cy(e))}saveEventToCache(e){this.cachedEventUids.add(cy(e)),this.lastProcessedEventTime=Date.now()}}function cy(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function PE({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PE(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(i,e={}){return sl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OS=/^https?/;async function LS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await DS(i);for(const t of e)try{if(kS(t))return}catch{}Ks(i,"unauthorized-domain")}function kS(i){const e=f1(),{protocol:t,hostname:a}=new URL(e);if(i.startsWith("chrome-extension://")){const x=new URL(i);return x.hostname===""&&a===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&x.hostname===a}if(!OS.test(t))return!1;if(MS.test(i))return a===i;const c=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new Lu(3e4,6e4);function uy(){const i=Xs().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function BS(i){return new Promise((e,t)=>{var a,c,f;function x(){uy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uy(),t(vs(i,"network-request-failed"))},timeout:PS.get()})}if(!((c=(a=Xs().gapi)===null||a===void 0?void 0:a.iframes)===null||c===void 0)&&c.Iframe)e(gapi.iframes.getContext());else if(!((f=Xs().gapi)===null||f===void 0)&&f.load)x();else{const v=FC("iframefcb");return Xs()[v]=()=>{gapi.load?x():t(vs(i,"network-request-failed"))},VC(`${jC()}?onload=${v}`).catch(_=>t(_))}}).catch(e=>{throw ef=null,e})}let ef=null;function US(i){return ef=ef||BS(i),ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new Lu(5e3,15e3),jS="__/auth/iframe",FS="emulator/auth/iframe",zS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GS(i){const e=i.config;wt(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Z1(e,FS):`https://${i.config.authDomain}/${jS}`,a={apiKey:e.apiKey,appName:i.name,v:fc},c=HS.get(i.config.apiHost);c&&(a.eid=c);const f=i._getFrameworks();return f.length&&(a.fw=f.join(",")),`${t}?${Ou(a).slice(1)}`}async function qS(i){const e=await US(i),t=Xs().gapi;return wt(t,i,"internal-error"),e.open({where:document.body,url:GS(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zS,dontclear:!0},a=>new Promise(async(c,f)=>{await a.restyle({setHideOnLeave:!1});const x=vs(i,"network-request-failed"),v=Xs().setTimeout(()=>{f(x)},VS.get());function _(){Xs().clearTimeout(v),c(a)}a.ping(_).then(_,()=>{f(x)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XS=500,QS=600,WS="_blank",KS="http://localhost";class hy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZS(i,e,t,a=XS,c=QS){const f=Math.max((window.screen.availHeight-c)/2,0).toString(),x=Math.max((window.screen.availWidth-a)/2,0).toString();let v="";const _=Object.assign(Object.assign({},YS),{width:a.toString(),height:c.toString(),top:f,left:x}),E=ri().toLowerCase();t&&(v=mE(E)?WS:t),dE(E)&&(e=e||KS,_.scrollbars="yes");const C=Object.entries(_).reduce((k,[j,G])=>`${k}${j}=${G},`,"");if(DC(E)&&v!=="_self")return $S(e||"",v),new hy(null);const R=window.open(e||"",v,C);wt(R,i,"popup-blocked");try{R.focus()}catch{}return new hy(R)}function $S(i,e){const t=document.createElement("a");t.href=i,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="__/auth/handler",e3="emulator/auth/handler",t3=encodeURIComponent("fac");async function fy(i,e,t,a,c,f){wt(i.config.authDomain,i,"auth-domain-config-required"),wt(i.config.apiKey,i,"invalid-api-key");const x={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:a,v:fc,eventId:c};if(e instanceof ng){e.setDefaultLanguage(i.languageCode),x.providerId=e.providerId||"",tT(e.getCustomParameters())||(x.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,R]of Object.entries({}))x[C]=R}if(e instanceof ku){const C=e.getScopes().filter(R=>R!=="");C.length>0&&(x.scopes=C.join(","))}i.tenantId&&(x.tid=i.tenantId);const v=x;for(const C of Object.keys(v))v[C]===void 0&&delete v[C];const _=await i._getAppCheckToken(),E=_?`#${t3}=${encodeURIComponent(_)}`:"";return`${n3(i)}?${Ou(v).slice(1)}${E}`}function n3({config:i}){return i.emulator?Z1(i,e3):`https://${i.authDomain}/${JS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="webStorageSupport";class r3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NE,this._completeRedirectFn=SS,this._overrideRedirectResult=bS}async _openPopup(e,t,a,c){var f;Ma((f=this.eventManagers[e._key()])===null||f===void 0?void 0:f.manager,"_initialize() not called before _openPopup()");const x=await fy(e,t,a,f1(),c);return ZS(e,x,rg())}async _openRedirect(e,t,a,c){await this._originValidation(e);const f=await fy(e,t,a,f1(),c);return aS(f),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:f}=this.eventManagers[t];return c?Promise.resolve(c):(Ma(f,"If manager is not set, promise should be"),f)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await qS(e),a=new NS(e);return t.register("authEvent",c=>(wt(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:a.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($0,{type:$0},c=>{var f;const x=(f=c==null?void 0:c[0])===null||f===void 0?void 0:f[$0];x!==void 0&&t(!!x),Ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wE()||gE()||eg()}}const i3=r3;var dy="@firebase/auth",gy="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o3(i){ec(new Jo("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),f=e.getProvider("app-check-internal"),{apiKey:x,authDomain:v}=a.options;wt(x&&!x.includes(":"),"invalid-api-key",{appName:a.name});const _={apiKey:x,authDomain:v,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_E(i)},E=new BC(a,c,f,_);return HC(E,t),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),ec(new Jo("auth-internal",e=>{const t=kf(e.getProvider("auth").getImmediate());return(a=>new s3(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),po(dy,gy,a3(i)),po(dy,gy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=5*60,c3=$x("authIdTokenMaxAge")||l3;let my=null;const u3=i=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>c3)return;const c=t==null?void 0:t.token;my!==c&&(my=c,await fetch(i,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function So(i=nE()){const e=X1(i,"auth");if(e.isInitialized())return e.getImmediate();const t=zC(i,{popupRedirectResolver:i3,persistence:[mS,rS,NE]}),a=$x("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const f=new URL(a,location.origin);if(location.origin===f.origin){const x=u3(f.toString());eS(t,x,()=>x(t.currentUser)),JC(t,v=>x(v))}}const c=Kx("auth");return c&&GC(t,`http://${c}`),t}function h3(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}UC({loadJS(i){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=e,a.onerror=c=>{const f=vs("internal-error");f.customData=c,t(f)},a.type="text/javascript",a.charset="UTF-8",h3().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o3("Browser");var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,BE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(z,F){function P(){}P.prototype=F.prototype,z.D=F.prototype,z.prototype=new P,z.prototype.constructor=z,z.C=function(Y,Z,$){for(var X=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)X[Me-2]=arguments[Me];return F.prototype[Z].apply(Y,X)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(z,F,P){P||(P=0);var Y=Array(16);if(typeof F=="string")for(var Z=0;16>Z;++Z)Y[Z]=F.charCodeAt(P++)|F.charCodeAt(P++)<<8|F.charCodeAt(P++)<<16|F.charCodeAt(P++)<<24;else for(Z=0;16>Z;++Z)Y[Z]=F[P++]|F[P++]<<8|F[P++]<<16|F[P++]<<24;F=z.g[0],P=z.g[1],Z=z.g[2];var $=z.g[3],X=F+($^P&(Z^$))+Y[0]+3614090360&4294967295;F=P+(X<<7&4294967295|X>>>25),X=$+(Z^F&(P^Z))+Y[1]+3905402710&4294967295,$=F+(X<<12&4294967295|X>>>20),X=Z+(P^$&(F^P))+Y[2]+606105819&4294967295,Z=$+(X<<17&4294967295|X>>>15),X=P+(F^Z&($^F))+Y[3]+3250441966&4294967295,P=Z+(X<<22&4294967295|X>>>10),X=F+($^P&(Z^$))+Y[4]+4118548399&4294967295,F=P+(X<<7&4294967295|X>>>25),X=$+(Z^F&(P^Z))+Y[5]+1200080426&4294967295,$=F+(X<<12&4294967295|X>>>20),X=Z+(P^$&(F^P))+Y[6]+2821735955&4294967295,Z=$+(X<<17&4294967295|X>>>15),X=P+(F^Z&($^F))+Y[7]+4249261313&4294967295,P=Z+(X<<22&4294967295|X>>>10),X=F+($^P&(Z^$))+Y[8]+1770035416&4294967295,F=P+(X<<7&4294967295|X>>>25),X=$+(Z^F&(P^Z))+Y[9]+2336552879&4294967295,$=F+(X<<12&4294967295|X>>>20),X=Z+(P^$&(F^P))+Y[10]+4294925233&4294967295,Z=$+(X<<17&4294967295|X>>>15),X=P+(F^Z&($^F))+Y[11]+2304563134&4294967295,P=Z+(X<<22&4294967295|X>>>10),X=F+($^P&(Z^$))+Y[12]+1804603682&4294967295,F=P+(X<<7&4294967295|X>>>25),X=$+(Z^F&(P^Z))+Y[13]+4254626195&4294967295,$=F+(X<<12&4294967295|X>>>20),X=Z+(P^$&(F^P))+Y[14]+2792965006&4294967295,Z=$+(X<<17&4294967295|X>>>15),X=P+(F^Z&($^F))+Y[15]+1236535329&4294967295,P=Z+(X<<22&4294967295|X>>>10),X=F+(Z^$&(P^Z))+Y[1]+4129170786&4294967295,F=P+(X<<5&4294967295|X>>>27),X=$+(P^Z&(F^P))+Y[6]+3225465664&4294967295,$=F+(X<<9&4294967295|X>>>23),X=Z+(F^P&($^F))+Y[11]+643717713&4294967295,Z=$+(X<<14&4294967295|X>>>18),X=P+($^F&(Z^$))+Y[0]+3921069994&4294967295,P=Z+(X<<20&4294967295|X>>>12),X=F+(Z^$&(P^Z))+Y[5]+3593408605&4294967295,F=P+(X<<5&4294967295|X>>>27),X=$+(P^Z&(F^P))+Y[10]+38016083&4294967295,$=F+(X<<9&4294967295|X>>>23),X=Z+(F^P&($^F))+Y[15]+3634488961&4294967295,Z=$+(X<<14&4294967295|X>>>18),X=P+($^F&(Z^$))+Y[4]+3889429448&4294967295,P=Z+(X<<20&4294967295|X>>>12),X=F+(Z^$&(P^Z))+Y[9]+568446438&4294967295,F=P+(X<<5&4294967295|X>>>27),X=$+(P^Z&(F^P))+Y[14]+3275163606&4294967295,$=F+(X<<9&4294967295|X>>>23),X=Z+(F^P&($^F))+Y[3]+4107603335&4294967295,Z=$+(X<<14&4294967295|X>>>18),X=P+($^F&(Z^$))+Y[8]+1163531501&4294967295,P=Z+(X<<20&4294967295|X>>>12),X=F+(Z^$&(P^Z))+Y[13]+2850285829&4294967295,F=P+(X<<5&4294967295|X>>>27),X=$+(P^Z&(F^P))+Y[2]+4243563512&4294967295,$=F+(X<<9&4294967295|X>>>23),X=Z+(F^P&($^F))+Y[7]+1735328473&4294967295,Z=$+(X<<14&4294967295|X>>>18),X=P+($^F&(Z^$))+Y[12]+2368359562&4294967295,P=Z+(X<<20&4294967295|X>>>12),X=F+(P^Z^$)+Y[5]+4294588738&4294967295,F=P+(X<<4&4294967295|X>>>28),X=$+(F^P^Z)+Y[8]+2272392833&4294967295,$=F+(X<<11&4294967295|X>>>21),X=Z+($^F^P)+Y[11]+1839030562&4294967295,Z=$+(X<<16&4294967295|X>>>16),X=P+(Z^$^F)+Y[14]+4259657740&4294967295,P=Z+(X<<23&4294967295|X>>>9),X=F+(P^Z^$)+Y[1]+2763975236&4294967295,F=P+(X<<4&4294967295|X>>>28),X=$+(F^P^Z)+Y[4]+1272893353&4294967295,$=F+(X<<11&4294967295|X>>>21),X=Z+($^F^P)+Y[7]+4139469664&4294967295,Z=$+(X<<16&4294967295|X>>>16),X=P+(Z^$^F)+Y[10]+3200236656&4294967295,P=Z+(X<<23&4294967295|X>>>9),X=F+(P^Z^$)+Y[13]+681279174&4294967295,F=P+(X<<4&4294967295|X>>>28),X=$+(F^P^Z)+Y[0]+3936430074&4294967295,$=F+(X<<11&4294967295|X>>>21),X=Z+($^F^P)+Y[3]+3572445317&4294967295,Z=$+(X<<16&4294967295|X>>>16),X=P+(Z^$^F)+Y[6]+76029189&4294967295,P=Z+(X<<23&4294967295|X>>>9),X=F+(P^Z^$)+Y[9]+3654602809&4294967295,F=P+(X<<4&4294967295|X>>>28),X=$+(F^P^Z)+Y[12]+3873151461&4294967295,$=F+(X<<11&4294967295|X>>>21),X=Z+($^F^P)+Y[15]+530742520&4294967295,Z=$+(X<<16&4294967295|X>>>16),X=P+(Z^$^F)+Y[2]+3299628645&4294967295,P=Z+(X<<23&4294967295|X>>>9),X=F+(Z^(P|~$))+Y[0]+4096336452&4294967295,F=P+(X<<6&4294967295|X>>>26),X=$+(P^(F|~Z))+Y[7]+1126891415&4294967295,$=F+(X<<10&4294967295|X>>>22),X=Z+(F^($|~P))+Y[14]+2878612391&4294967295,Z=$+(X<<15&4294967295|X>>>17),X=P+($^(Z|~F))+Y[5]+4237533241&4294967295,P=Z+(X<<21&4294967295|X>>>11),X=F+(Z^(P|~$))+Y[12]+1700485571&4294967295,F=P+(X<<6&4294967295|X>>>26),X=$+(P^(F|~Z))+Y[3]+2399980690&4294967295,$=F+(X<<10&4294967295|X>>>22),X=Z+(F^($|~P))+Y[10]+4293915773&4294967295,Z=$+(X<<15&4294967295|X>>>17),X=P+($^(Z|~F))+Y[1]+2240044497&4294967295,P=Z+(X<<21&4294967295|X>>>11),X=F+(Z^(P|~$))+Y[8]+1873313359&4294967295,F=P+(X<<6&4294967295|X>>>26),X=$+(P^(F|~Z))+Y[15]+4264355552&4294967295,$=F+(X<<10&4294967295|X>>>22),X=Z+(F^($|~P))+Y[6]+2734768916&4294967295,Z=$+(X<<15&4294967295|X>>>17),X=P+($^(Z|~F))+Y[13]+1309151649&4294967295,P=Z+(X<<21&4294967295|X>>>11),X=F+(Z^(P|~$))+Y[4]+4149444226&4294967295,F=P+(X<<6&4294967295|X>>>26),X=$+(P^(F|~Z))+Y[11]+3174756917&4294967295,$=F+(X<<10&4294967295|X>>>22),X=Z+(F^($|~P))+Y[2]+718787259&4294967295,Z=$+(X<<15&4294967295|X>>>17),X=P+($^(Z|~F))+Y[9]+3951481745&4294967295,z.g[0]=z.g[0]+F&4294967295,z.g[1]=z.g[1]+(Z+(X<<21&4294967295|X>>>11))&4294967295,z.g[2]=z.g[2]+Z&4294967295,z.g[3]=z.g[3]+$&4294967295}a.prototype.u=function(z,F){F===void 0&&(F=z.length);for(var P=F-this.blockSize,Y=this.B,Z=this.h,$=0;$<F;){if(Z==0)for(;$<=P;)c(this,z,$),$+=this.blockSize;if(typeof z=="string"){for(;$<F;)if(Y[Z++]=z.charCodeAt($++),Z==this.blockSize){c(this,Y),Z=0;break}}else for(;$<F;)if(Y[Z++]=z[$++],Z==this.blockSize){c(this,Y),Z=0;break}}this.h=Z,this.o+=F},a.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var F=1;F<z.length-8;++F)z[F]=0;var P=8*this.o;for(F=z.length-8;F<z.length;++F)z[F]=P&255,P/=256;for(this.u(z),z=Array(16),F=P=0;4>F;++F)for(var Y=0;32>Y;Y+=8)z[P++]=this.g[F]>>>Y&255;return z};function f(z,F){var P=v;return Object.prototype.hasOwnProperty.call(P,z)?P[z]:P[z]=F(z)}function x(z,F){this.h=F;for(var P=[],Y=!0,Z=z.length-1;0<=Z;Z--){var $=z[Z]|0;Y&&$==F||(P[Z]=$,Y=!1)}this.g=P}var v={};function _(z){return-128<=z&&128>z?f(z,function(F){return new x([F|0],0>F?-1:0)}):new x([z|0],0>z?-1:0)}function E(z){if(isNaN(z)||!isFinite(z))return R;if(0>z)return W(E(-z));for(var F=[],P=1,Y=0;z>=P;Y++)F[Y]=z/P|0,P*=4294967296;return new x(F,0)}function C(z,F){if(z.length==0)throw Error("number format error: empty string");if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(z.charAt(0)=="-")return W(C(z.substring(1),F));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=E(Math.pow(F,8)),Y=R,Z=0;Z<z.length;Z+=8){var $=Math.min(8,z.length-Z),X=parseInt(z.substring(Z,Z+$),F);8>$?($=E(Math.pow(F,$)),Y=Y.j($).add(E(X))):(Y=Y.j(P),Y=Y.add(E(X)))}return Y}var R=_(0),k=_(1),j=_(16777216);i=x.prototype,i.m=function(){if(J(this))return-W(this).m();for(var z=0,F=1,P=0;P<this.g.length;P++){var Y=this.i(P);z+=(0<=Y?Y:4294967296+Y)*F,F*=4294967296}return z},i.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(G(this))return"0";if(J(this))return"-"+W(this).toString(z);for(var F=E(Math.pow(z,6)),P=this,Y="";;){var Z=_e(P,F).g;P=he(P,Z.j(F));var $=((0<P.g.length?P.g[0]:P.h)>>>0).toString(z);if(P=Z,G(P))return $+Y;for(;6>$.length;)$="0"+$;Y=$+Y}},i.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function G(z){if(z.h!=0)return!1;for(var F=0;F<z.g.length;F++)if(z.g[F]!=0)return!1;return!0}function J(z){return z.h==-1}i.l=function(z){return z=he(this,z),J(z)?-1:G(z)?0:1};function W(z){for(var F=z.g.length,P=[],Y=0;Y<F;Y++)P[Y]=~z.g[Y];return new x(P,~z.h).add(k)}i.abs=function(){return J(this)?W(this):this},i.add=function(z){for(var F=Math.max(this.g.length,z.g.length),P=[],Y=0,Z=0;Z<=F;Z++){var $=Y+(this.i(Z)&65535)+(z.i(Z)&65535),X=($>>>16)+(this.i(Z)>>>16)+(z.i(Z)>>>16);Y=X>>>16,$&=65535,X&=65535,P[Z]=X<<16|$}return new x(P,P[P.length-1]&-2147483648?-1:0)};function he(z,F){return z.add(W(F))}i.j=function(z){if(G(this)||G(z))return R;if(J(this))return J(z)?W(this).j(W(z)):W(W(this).j(z));if(J(z))return W(this.j(W(z)));if(0>this.l(j)&&0>z.l(j))return E(this.m()*z.m());for(var F=this.g.length+z.g.length,P=[],Y=0;Y<2*F;Y++)P[Y]=0;for(Y=0;Y<this.g.length;Y++)for(var Z=0;Z<z.g.length;Z++){var $=this.i(Y)>>>16,X=this.i(Y)&65535,Me=z.i(Z)>>>16,ae=z.i(Z)&65535;P[2*Y+2*Z]+=X*ae,fe(P,2*Y+2*Z),P[2*Y+2*Z+1]+=$*ae,fe(P,2*Y+2*Z+1),P[2*Y+2*Z+1]+=X*Me,fe(P,2*Y+2*Z+1),P[2*Y+2*Z+2]+=$*Me,fe(P,2*Y+2*Z+2)}for(Y=0;Y<F;Y++)P[Y]=P[2*Y+1]<<16|P[2*Y];for(Y=F;Y<2*F;Y++)P[Y]=0;return new x(P,0)};function fe(z,F){for(;(z[F]&65535)!=z[F];)z[F+1]+=z[F]>>>16,z[F]&=65535,F++}function re(z,F){this.g=z,this.h=F}function _e(z,F){if(G(F))throw Error("division by zero");if(G(z))return new re(R,R);if(J(z))return F=_e(W(z),F),new re(W(F.g),W(F.h));if(J(F))return F=_e(z,W(F)),new re(W(F.g),F.h);if(30<z.g.length){if(J(z)||J(F))throw Error("slowDivide_ only works with positive integers.");for(var P=k,Y=F;0>=Y.l(z);)P=je(P),Y=je(Y);var Z=Ue(P,1),$=Ue(Y,1);for(Y=Ue(Y,2),P=Ue(P,2);!G(Y);){var X=$.add(Y);0>=X.l(z)&&(Z=Z.add(P),$=X),Y=Ue(Y,1),P=Ue(P,1)}return F=he(z,Z.j(F)),new re(Z,F)}for(Z=R;0<=z.l(F);){for(P=Math.max(1,Math.floor(z.m()/F.m())),Y=Math.ceil(Math.log(P)/Math.LN2),Y=48>=Y?1:Math.pow(2,Y-48),$=E(P),X=$.j(F);J(X)||0<X.l(z);)P-=Y,$=E(P),X=$.j(F);G($)&&($=k),Z=Z.add($),z=he(z,X)}return new re(Z,z)}i.A=function(z){return _e(this,z).h},i.and=function(z){for(var F=Math.max(this.g.length,z.g.length),P=[],Y=0;Y<F;Y++)P[Y]=this.i(Y)&z.i(Y);return new x(P,this.h&z.h)},i.or=function(z){for(var F=Math.max(this.g.length,z.g.length),P=[],Y=0;Y<F;Y++)P[Y]=this.i(Y)|z.i(Y);return new x(P,this.h|z.h)},i.xor=function(z){for(var F=Math.max(this.g.length,z.g.length),P=[],Y=0;Y<F;Y++)P[Y]=this.i(Y)^z.i(Y);return new x(P,this.h^z.h)};function je(z){for(var F=z.g.length+1,P=[],Y=0;Y<F;Y++)P[Y]=z.i(Y)<<1|z.i(Y-1)>>>31;return new x(P,z.h)}function Ue(z,F){var P=F>>5;F%=32;for(var Y=z.g.length-P,Z=[],$=0;$<Y;$++)Z[$]=0<F?z.i($+P)>>>F|z.i($+P+1)<<32-F:z.i($+P);return new x(Z,z.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,BE=a,x.prototype.add=x.prototype.add,x.prototype.multiply=x.prototype.j,x.prototype.modulo=x.prototype.A,x.prototype.compare=x.prototype.l,x.prototype.toNumber=x.prototype.m,x.prototype.toString=x.prototype.toString,x.prototype.getBits=x.prototype.i,x.fromNumber=E,x.fromString=C,yo=x}).apply(typeof py<"u"?py:typeof self<"u"?self:typeof window<"u"?window:{});var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UE,cu,VE,tf,m1,jE,FE,zE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,S,D){return y==Array.prototype||y==Object.prototype||(y[S]=D.value),y};function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gh=="object"&&Gh];for(var S=0;S<y.length;++S){var D=y[S];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var a=t(this);function c(y,S){if(S)e:{var D=a;y=y.split(".");for(var V=0;V<y.length-1;V++){var le=y[V];if(!(le in D))break e;D=D[le]}y=y[y.length-1],V=D[y],S=S(V),S!=V&&S!=null&&e(D,y,{configurable:!0,writable:!0,value:S})}}function f(y,S){y instanceof String&&(y+="");var D=0,V=!1,le={next:function(){if(!V&&D<y.length){var xe=D++;return{value:S(xe,y[xe]),done:!1}}return V=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}c("Array.prototype.values",function(y){return y||function(){return f(this,function(S,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var x=x||{},v=this||self;function _(y){var S=typeof y;return S=S!="object"?S:y?Array.isArray(y)?"array":S:"null",S=="array"||S=="object"&&typeof y.length=="number"}function E(y){var S=typeof y;return S=="object"&&y!=null||S=="function"}function C(y,S,D){return y.call.apply(y.bind,arguments)}function R(y,S,D){if(!y)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,V),y.apply(S,le)}}return function(){return y.apply(S,arguments)}}function k(y,S,D){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?C:R,k.apply(null,arguments)}function j(y,S){var D=Array.prototype.slice.call(arguments,1);return function(){var V=D.slice();return V.push.apply(V,arguments),y.apply(this,V)}}function G(y,S){function D(){}D.prototype=S.prototype,y.aa=S.prototype,y.prototype=new D,y.prototype.constructor=y,y.Qb=function(V,le,xe){for(var Ye=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)Ye[Vt-2]=arguments[Vt];return S.prototype[le].apply(V,Ye)}}function J(y){const S=y.length;if(0<S){const D=Array(S);for(let V=0;V<S;V++)D[V]=y[V];return D}return[]}function W(y,S){for(let D=1;D<arguments.length;D++){const V=arguments[D];if(_(V)){const le=y.length||0,xe=V.length||0;y.length=le+xe;for(let Ye=0;Ye<xe;Ye++)y[le+Ye]=V[Ye]}else y.push(V)}}class he{constructor(S,D){this.i=S,this.j=D,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function fe(y){return/^[\s\xa0]*$/.test(y)}function re(){var y=v.navigator;return y&&(y=y.userAgent)?y:""}function _e(y){return _e[" "](y),y}_e[" "]=function(){};var je=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Ue(y,S,D){for(const V in y)S.call(D,y[V],V,y)}function z(y,S){for(const D in y)S.call(void 0,y[D],D,y)}function F(y){const S={};for(const D in y)S[D]=y[D];return S}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(y,S){let D,V;for(let le=1;le<arguments.length;le++){V=arguments[le];for(D in V)y[D]=V[D];for(let xe=0;xe<P.length;xe++)D=P[xe],Object.prototype.hasOwnProperty.call(V,D)&&(y[D]=V[D])}}function Z(y){var S=1;y=y.split(":");const D=[];for(;0<S&&y.length;)D.push(y.shift()),S--;return y.length&&D.push(y.join(":")),D}function $(y){v.setTimeout(()=>{throw y},0)}function X(){var y=Xe;let S=null;return y.g&&(S=y.g,y.g=y.g.next,y.g||(y.h=null),S.next=null),S}class Me{constructor(){this.h=this.g=null}add(S,D){const V=ae.get();V.set(S,D),this.h?this.h.next=V:this.g=V,this.h=V}}var ae=new he(()=>new Ne,y=>y.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(S,D){this.h=S,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let me,be=!1,Xe=new Me,K=()=>{const y=v.Promise.resolve(void 0);me=()=>{y.then(ve)}};var ve=()=>{for(var y;y=X();){try{y.h.call(y.g)}catch(D){$(D)}var S=ae;S.j(y),100>S.h&&(S.h++,y.next=S.g,S.g=y)}be=!1};function Fe(){this.s=this.s,this.C=this.C}Fe.prototype.s=!1,Fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(y,S){this.type=y,this.g=this.target=S,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var Oe=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var y=!1,S=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const D=()=>{};v.addEventListener("test",D,S),v.removeEventListener("test",D,S)}catch{}return y}();function ot(y,S){if(Ge.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var D=this.type=y.type,V=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=S,S=y.relatedTarget){if(je){e:{try{_e(S.nodeName);var le=!0;break e}catch{}le=!1}le||(S=null)}}else D=="mouseover"?S=y.fromElement:D=="mouseout"&&(S=y.toElement);this.relatedTarget=S,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Le[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&ot.aa.h.call(this)}}G(ot,Ge);var Le={2:"touch",3:"pen",4:"mouse"};ot.prototype.h=function(){ot.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),He=0;function nt(y,S,D,V,le){this.listener=y,this.proxy=null,this.src=S,this.type=D,this.capture=!!V,this.ha=le,this.key=++He,this.da=this.fa=!1}function tt(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function ht(y){this.src=y,this.g={},this.h=0}ht.prototype.add=function(y,S,D,V,le){var xe=y.toString();y=this.g[xe],y||(y=this.g[xe]=[],this.h++);var Ye=gt(y,S,V,le);return-1<Ye?(S=y[Ye],D||(S.fa=!1)):(S=new nt(S,this.src,xe,!!V,le),S.fa=D,y.push(S)),S};function Pn(y,S){var D=S.type;if(D in y.g){var V=y.g[D],le=Array.prototype.indexOf.call(V,S,void 0),xe;(xe=0<=le)&&Array.prototype.splice.call(V,le,1),xe&&(tt(S),y.g[D].length==0&&(delete y.g[D],y.h--))}}function gt(y,S,D,V){for(var le=0;le<y.length;++le){var xe=y[le];if(!xe.da&&xe.listener==S&&xe.capture==!!D&&xe.ha==V)return le}return-1}var cr="closure_lm_"+(1e6*Math.random()|0),vn={};function Yn(y,S,D,V,le){if(Array.isArray(S)){for(var xe=0;xe<S.length;xe++)Yn(y,S[xe],D,V,le);return null}return D=Ns(D),y&&y[ke]?y.K(S,D,E(V)?!!V.capture:!1,le):cn(y,S,D,!1,V,le)}function cn(y,S,D,V,le,xe){if(!S)throw Error("Invalid event type");var Ye=E(le)?!!le.capture:!!le,Vt=zi(y);if(Vt||(y[cr]=Vt=new ht(y)),D=Vt.add(S,D,V,Ye,xe),D.proxy)return D;if(V=Ct(),D.proxy=V,V.src=y,V.listener=D,y.addEventListener)Oe||(le=Ye),le===void 0&&(le=!1),y.addEventListener(S.toString(),V,le);else if(y.attachEvent)y.attachEvent(We(S.toString()),V);else if(y.addListener&&y.removeListener)y.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Ct(){function y(D){return S.call(y.src,y.listener,D)}const S=Is;return y}function At(y,S,D,V,le){if(Array.isArray(S))for(var xe=0;xe<S.length;xe++)At(y,S[xe],D,V,le);else V=E(V)?!!V.capture:!!V,D=Ns(D),y&&y[ke]?(y=y.i,S=String(S).toString(),S in y.g&&(xe=y.g[S],D=gt(xe,D,V,le),-1<D&&(tt(xe[D]),Array.prototype.splice.call(xe,D,1),xe.length==0&&(delete y.g[S],y.h--)))):y&&(y=zi(y))&&(S=y.g[S.toString()],y=-1,S&&(y=gt(S,D,V,le)),(D=-1<y?S[y]:null)&&yn(D))}function yn(y){if(typeof y!="number"&&y&&!y.da){var S=y.src;if(S&&S[ke])Pn(S.i,y);else{var D=y.type,V=y.proxy;S.removeEventListener?S.removeEventListener(D,V,y.capture):S.detachEvent?S.detachEvent(We(D),V):S.addListener&&S.removeListener&&S.removeListener(V),(D=zi(S))?(Pn(D,y),D.h==0&&(D.src=null,S[cr]=null)):tt(y)}}}function We(y){return y in vn?vn[y]:vn[y]="on"+y}function Is(y,S){if(y.da)y=!0;else{S=new ot(S,this);var D=y.listener,V=y.ha||y.src;y.fa&&yn(y),y=D.call(V,S)}return y}function zi(y){return y=y[cr],y instanceof ht?y:null}var sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ns(y){return typeof y=="function"?y:(y[sn]||(y[sn]=function(S){return y.handleEvent(S)}),y[sn])}function Kt(){Fe.call(this),this.i=new ht(this),this.M=this,this.F=null}G(Kt,Fe),Kt.prototype[ke]=!0,Kt.prototype.removeEventListener=function(y,S,D,V){At(this,y,S,D,V)};function In(y,S){var D,V=y.F;if(V)for(D=[];V;V=V.F)D.push(V);if(y=y.M,V=S.type||S,typeof S=="string")S=new Ge(S,y);else if(S instanceof Ge)S.target=S.target||y;else{var le=S;S=new Ge(V,y),Y(S,le)}if(le=!0,D)for(var xe=D.length-1;0<=xe;xe--){var Ye=S.g=D[xe];le=Nn(Ye,V,!0,S)&&le}if(Ye=S.g=y,le=Nn(Ye,V,!0,S)&&le,le=Nn(Ye,V,!1,S)&&le,D)for(xe=0;xe<D.length;xe++)Ye=S.g=D[xe],le=Nn(Ye,V,!1,S)&&le}Kt.prototype.N=function(){if(Kt.aa.N.call(this),this.i){var y=this.i,S;for(S in y.g){for(var D=y.g[S],V=0;V<D.length;V++)tt(D[V]);delete y.g[S],y.h--}}this.F=null},Kt.prototype.K=function(y,S,D,V){return this.i.add(String(y),S,!1,D,V)},Kt.prototype.L=function(y,S,D,V){return this.i.add(String(y),S,!0,D,V)};function Nn(y,S,D,V){if(S=y.i.g[String(S)],!S)return!0;S=S.concat();for(var le=!0,xe=0;xe<S.length;++xe){var Ye=S[xe];if(Ye&&!Ye.da&&Ye.capture==D){var Vt=Ye.listener,Ln=Ye.ha||Ye.src;Ye.fa&&Pn(y.i,Ye),le=Vt.call(Ln,V)!==!1&&le}}return le&&!V.defaultPrevented}function Xn(y,S,D){if(typeof y=="function")D&&(y=k(y,D));else if(y&&typeof y.handleEvent=="function")y=k(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:v.setTimeout(y,S||0)}function Rs(y){y.g=Xn(()=>{y.g=null,y.i&&(y.i=!1,Rs(y))},y.l);const S=y.h;y.h=null,y.m.apply(null,S)}class Ds extends Fe{constructor(S,D){super(),this.m=S,this.l=D,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Rs(this)}N(){super.N(),this.g&&(v.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hs(y){Fe.call(this),this.h=y,this.g={}}G(hs,Fe);var an=[];function Ve(y){Ue(y.g,function(S,D){this.g.hasOwnProperty(D)&&yn(S)},y),y.g={}}hs.prototype.N=function(){hs.aa.N.call(this),Ve(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=v.JSON.stringify,It=v.JSON.parse,Nt=class{stringify(y){return v.JSON.stringify(y,void 0)}parse(y){return v.JSON.parse(y,void 0)}};function Si(){}Si.prototype.h=null;function Ms(y){return y.h||(y.h=y.i())}function Js(){}var vt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cr(){Ge.call(this,"d")}G(Cr,Ge);function Yr(){Ge.call(this,"c")}G(Yr,Ge);var Or={},Qn=null;function de(){return Qn=Qn||new Kt}Or.La="serverreachability";function Pe(y){Ge.call(this,Or.La,y)}G(Pe,Ge);function pt(y){const S=de();In(S,new Pe(S))}Or.STAT_EVENT="statevent";function xt(y,S){Ge.call(this,Or.STAT_EVENT,y),this.stat=S}G(xt,Ge);function Je(y){const S=de();In(S,new xt(S,y))}Or.Ma="timingevent";function En(y,S){Ge.call(this,Or.Ma,y),this.size=S}G(En,Ge);function Xr(y,S){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return v.setTimeout(function(){y()},S)}function Hi(){this.g=!0}Hi.prototype.xa=function(){this.g=!1};function xr(y,S,D,V,le,xe){y.info(function(){if(y.g)if(xe)for(var Ye="",Vt=xe.split("&"),Ln=0;Ln<Vt.length;Ln++){var jt=Vt[Ln].split("=");if(1<jt.length){var _n=jt[0];jt=jt[1];var jn=_n.split("_");Ye=2<=jn.length&&jn[1]=="type"?Ye+(_n+"="+jt+"&"):Ye+(_n+"=redacted&")}}else Ye=null;else Ye=xe;return"XMLHTTP REQ ("+V+") [attempt "+le+"]: "+S+`
`+D+`
`+Ye})}function Gi(y,S,D,V,le,xe,Ye){y.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+le+"]: "+S+`
`+D+`
`+xe+" "+Ye})}function rr(y,S,D,V){y.info(function(){return"XMLHTTP TEXT ("+S+"): "+Rn(y,D)+(V?" "+V:"")})}function Qe(y,S){y.info(function(){return"TIMEOUT: "+S})}Hi.prototype.info=function(){};function Rn(y,S){if(!y.g)return S;if(!S)return null;try{var D=JSON.parse(S);if(D){for(y=0;y<D.length;y++)if(Array.isArray(D[y])){var V=D[y];if(!(2>V.length)){var le=V[1];if(Array.isArray(le)&&!(1>le.length)){var xe=le[0];if(xe!="noop"&&xe!="stop"&&xe!="close")for(var Ye=1;Ye<le.length;Ye++)le[Ye]=""}}}}return xn(D)}catch{return S}}var zn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fi;function fs(){}G(fs,Si),fs.prototype.g=function(){return new XMLHttpRequest},fs.prototype.i=function(){return{}},fi=new fs;function ii(y,S,D,V){this.j=y,this.i=S,this.l=D,this.R=V||1,this.U=new hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qr}function Qr(){this.i=null,this.g="",this.h=!1}var Os={},ea={};function Wn(y,S,D){y.L=1,y.v=bn(mt(S)),y.m=D,y.P=!0,Dn(y,null)}function Dn(y,S){y.F=Date.now(),Jt(y),y.A=mt(y.v);var D=y.A,V=y.R;Array.isArray(V)||(V=[String(V)]),gn(D.i,"t",V),y.C=0,D=y.j.J,y.h=new Qr,y.g=ml(y.j,D?S:null,!y.m),0<y.O&&(y.M=new Ds(k(y.Y,y,y.g),y.O)),S=y.U,D=y.g,V=y.ca;var le="readystatechange";Array.isArray(le)||(le&&(an[0]=le.toString()),le=an);for(var xe=0;xe<le.length;xe++){var Ye=Yn(D,le[xe],V||S.handleEvent,!1,S.h||S);if(!Ye)break;S.g[Ye.key]=Ye}S=y.H?F(y.H):{},y.m?(y.u||(y.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,S)):(y.u="GET",y.g.ea(y.A,y.u,null,S)),pt(),xr(y.i,y.u,y.A,y.l,y.R,y.m)}ii.prototype.ca=function(y){y=y.target;const S=this.M;S&&yi(y)==3?S.j():this.Y(y)},ii.prototype.Y=function(y){try{if(y==this.g)e:{const jn=yi(this.g);var S=this.g.Ba();const Zn=this.g.Z();if(!(3>jn)&&(jn!=3||this.g&&(this.h.h||this.g.oa()||fl(this.g)))){this.J||jn!=4||S==7||(S==8||0>=Zn?pt(3):pt(2)),Te(this);var D=this.g.Z();this.X=D;t:if(Zt(this)){var V=fl(this.g);y="";var le=V.length,xe=yi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lt(this),si(this);var Ye="";break t}this.h.i=new v.TextDecoder}for(S=0;S<le;S++)this.h.h=!0,y+=this.h.i.decode(V[S],{stream:!(xe&&S==le-1)});V.length=0,this.h.g+=y,this.C=0,Ye=this.h.g}else Ye=this.g.oa();if(this.o=D==200,Gi(this.i,this.u,this.A,this.l,this.R,jn,D),this.o){if(this.T&&!this.K){t:{if(this.g){var Vt,Ln=this.g;if((Vt=Ln.g?Ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fe(Vt)){var jt=Vt;break t}}jt=null}if(D=jt)rr(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ur(this,D);else{this.o=!1,this.s=3,Je(12),Lt(this),si(this);break e}}if(this.P){D=!0;let hr;for(;!this.J&&this.C<Ye.length;)if(hr=ds(this,Ye),hr==ea){jn==4&&(this.s=4,Je(14),D=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(hr==Os){this.s=4,Je(15),rr(this.i,this.l,Ye,"[Invalid Chunk]"),D=!1;break}else rr(this.i,this.l,hr,null),ur(this,hr);if(Zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jn!=4||Ye.length!=0||this.h.h||(this.s=1,Je(16),D=!1),this.o=this.o&&D,!D)rr(this.i,this.l,Ye,"[Invalid Chunked Response]"),Lt(this),si(this);else if(0<Ye.length&&!this.W){this.W=!0;var _n=this.j;_n.g==this&&_n.ba&&!_n.M&&(_n.j.info("Great, no buffering proxy detected. Bytes received: "+Ye.length),ys(_n),_n.M=!0,Je(11))}}else rr(this.i,this.l,Ye,null),ur(this,Ye);jn==4&&Lt(this),this.o&&!this.J&&(jn==4?wn(this.j,this):(this.o=!1,Jt(this)))}else en(this.g),D==400&&0<Ye.indexOf("Unknown SID")?(this.s=3,Je(12)):(this.s=0,Je(13)),Lt(this),si(this)}}}catch{}finally{}};function Zt(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function ds(y,S){var D=y.C,V=S.indexOf(`
`,D);return V==-1?ea:(D=Number(S.substring(D,V)),isNaN(D)?Os:(V+=1,V+D>S.length?ea:(S=S.slice(V,V+D),y.C=V+D,S)))}ii.prototype.cancel=function(){this.J=!0,Lt(this)};function Jt(y){y.S=Date.now()+y.I,ta(y,y.I)}function ta(y,S){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Xr(k(y.ba,y),S)}function Te(y){y.B&&(v.clearTimeout(y.B),y.B=null)}ii.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Qe(this.i,this.A),this.L!=2&&(pt(),Je(17)),Lt(this),this.s=2,si(this)):ta(this,this.S-y)};function si(y){y.j.G==0||y.J||wn(y.j,y)}function Lt(y){Te(y);var S=y.M;S&&typeof S.ma=="function"&&S.ma(),y.M=null,Ve(y.U),y.g&&(S=y.g,y.g=null,S.abort(),S.ma())}function ur(y,S){try{var D=y.j;if(D.G!=0&&(D.g==y||qi(D.h,y))){if(!y.K&&qi(D.h,y)&&D.G==3){try{var V=D.Da.g.parse(S)}catch{V=null}if(Array.isArray(V)&&V.length==3){var le=V;if(le[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<y.F)Us(D),Ua(D);else break e;Do(D),Je(18)}}else D.za=le[1],0<D.za-D.T&&37500>le[2]&&D.F&&D.v==0&&!D.C&&(D.C=Xr(k(D.Za,D),6e3));if(1>=Rt(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else kr(D,11)}else if((y.K||D.g==y)&&Us(D),!fe(S))for(le=D.Da.g.parse(S),S=0;S<le.length;S++){let jt=le[S];if(D.T=jt[0],jt=jt[1],D.G==2)if(jt[0]=="c"){D.K=jt[1],D.ia=jt[2];const _n=jt[3];_n!=null&&(D.la=_n,D.j.info("VER="+D.la));const jn=jt[4];jn!=null&&(D.Aa=jn,D.j.info("SVER="+D.Aa));const Zn=jt[5];Zn!=null&&typeof Zn=="number"&&0<Zn&&(V=1.5*Zn,D.L=V,D.j.info("backChannelRequestTimeoutMs_="+V)),V=D;const hr=y.g;if(hr){const ar=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ar){var xe=V.h;xe.g||ar.indexOf("spdy")==-1&&ar.indexOf("quic")==-1&&ar.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(Yi(xe,xe.h),xe.h=null))}if(V.D){const Mo=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(V.ya=Mo,qe(V.I,V.D,Mo))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-y.F,D.j.info("Handshake RTT: "+D.R+"ms")),V=D;var Ye=y;if(V.qa=st(V,V.J?V.ia:null,V.W),Ye.K){Wr(V.h,Ye);var Vt=Ye,Ln=V.L;Ln&&(Vt.I=Ln),Vt.B&&(Te(Vt),Jt(Vt)),V.g=Ye}else gl(V);0<D.i.length&&Et(D)}else jt[0]!="stop"&&jt[0]!="close"||kr(D,7);else D.G==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?kr(D,7):xi(D):jt[0]!="noop"&&D.l&&D.l.ta(jt),D.v=0)}}pt(4)}catch{}}var xc=class{constructor(y,S){this.g=y,this.map=S}};function Ut(y){this.l=y||10,v.PerformanceNavigationTiming?(y=v.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(v.chrome&&v.chrome.loadTimes&&v.chrome.loadTimes()&&v.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kt(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Rt(y){return y.h?1:y.g?y.g.size:0}function qi(y,S){return y.h?y.h==S:y.g?y.g.has(S):!1}function Yi(y,S){y.g?y.g.add(S):y.h=S}function Wr(y,S){y.h&&y.h==S?y.h=null:y.g&&y.g.has(S)&&y.g.delete(S)}Ut.prototype.cancel=function(){if(this.i=Gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Gt(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let S=y.i;for(const D of y.g.values())S=S.concat(D.D);return S}return J(y.i)}function Ii(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(_(y)){for(var S=[],D=y.length,V=0;V<D;V++)S.push(y[V]);return S}S=[],D=0;for(V in y)S[D++]=y[V];return S}function Ec(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(_(y)||typeof y=="string"){var S=[];y=y.length;for(var D=0;D<y;D++)S.push(D);return S}S=[],D=0;for(const V in y)S[D++]=V;return S}}}function un(y,S){if(y.forEach&&typeof y.forEach=="function")y.forEach(S,void 0);else if(_(y)||typeof y=="string")Array.prototype.forEach.call(y,S,void 0);else for(var D=Ec(y),V=Ii(y),le=V.length,xe=0;xe<le;xe++)S.call(void 0,V[xe],D&&D[xe],y)}var di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(y,S){if(y){y=y.split("&");for(var D=0;D<y.length;D++){var V=y[D].indexOf("="),le=null;if(0<=V){var xe=y[D].substring(0,V);le=y[D].substring(V+1)}else xe=y[D];S(xe,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Kr(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Kr){this.h=y.h,Mn(this,y.j),this.o=y.o,this.g=y.g,ce(this,y.s),this.l=y.l;var S=y.i,D=new mi;D.i=S.i,S.g&&(D.g=new Map(S.g),D.h=S.h),H(this,D),this.m=y.m}else y&&(S=String(y).match(di))?(this.h=!1,Mn(this,S[1]||"",!0),this.o=ir(S[2]||""),this.g=ir(S[3]||"",!0),ce(this,S[4]),this.l=ir(S[5]||"",!0),H(this,S[6]||"",!0),this.m=ir(S[7]||"")):(this.h=!1,this.i=new mi(null,this.h))}Kr.prototype.toString=function(){var y=[],S=this.j;S&&y.push(gi(S,Sr,!0),":");var D=this.g;return(D||S=="file")&&(y.push("//"),(S=this.o)&&y.push(gi(S,Sr,!0),"@"),y.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&y.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&y.push("/"),y.push(gi(D,D.charAt(0)=="/"?hn:it,!0))),(D=this.i.toString())&&y.push("?",D),(D=this.m)&&y.push("#",gi(D,wc)),y.join("")};function mt(y){return new Kr(y)}function Mn(y,S,D){y.j=D?ir(S,!0):S,y.j&&(y.j=y.j.replace(/:$/,""))}function ce(y,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);y.s=S}else y.s=null}function H(y,S,D){S instanceof mi?(y.i=S,pi(y.i,y.h)):(D||(S=gi(S,hl)),y.i=new mi(S,y.h))}function qe(y,S,D){y.i.set(S,D)}function bn(y){return qe(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function ir(y,S){return y?S?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function gi(y,S,D){return typeof y=="string"?(y=encodeURI(y).replace(S,Ro),D&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Ro(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var Sr=/[#\/\?@]/g,it=/[#\?:]/g,hn=/[#\?]/g,hl=/[#\?@]/g,wc=/#/g;function mi(y,S){this.h=this.g=null,this.i=y||null,this.j=!!S}function Lr(y){y.g||(y.g=new Map,y.h=0,y.i&&Ba(y.i,function(S,D){y.add(decodeURIComponent(S.replace(/\+/g," ")),D)}))}i=mi.prototype,i.add=function(y,S){Lr(this),this.i=null,y=ai(this,y);var D=this.g.get(y);return D||this.g.set(y,D=[]),D.push(S),this.h+=1,this};function Ls(y,S){Lr(y),S=ai(y,S),y.g.has(S)&&(y.i=null,y.h-=y.g.get(S).length,y.g.delete(S))}function gs(y,S){return Lr(y),S=ai(y,S),y.g.has(S)}i.forEach=function(y,S){Lr(this),this.g.forEach(function(D,V){D.forEach(function(le){y.call(S,le,V,this)},this)},this)},i.na=function(){Lr(this);const y=Array.from(this.g.values()),S=Array.from(this.g.keys()),D=[];for(let V=0;V<S.length;V++){const le=y[V];for(let xe=0;xe<le.length;xe++)D.push(S[V])}return D},i.V=function(y){Lr(this);let S=[];if(typeof y=="string")gs(this,y)&&(S=S.concat(this.g.get(ai(this,y))));else{y=Array.from(this.g.values());for(let D=0;D<y.length;D++)S=S.concat(y[D])}return S},i.set=function(y,S){return Lr(this),this.i=null,y=ai(this,y),gs(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[S]),this.h+=1,this},i.get=function(y,S){return y?(y=this.V(y),0<y.length?String(y[0]):S):S};function gn(y,S,D){Ls(y,S),0<D.length&&(y.i=null,y.g.set(ai(y,S),J(D)),y.h+=D.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],S=Array.from(this.g.keys());for(var D=0;D<S.length;D++){var V=S[D];const xe=encodeURIComponent(String(V)),Ye=this.V(V);for(V=0;V<Ye.length;V++){var le=xe;Ye[V]!==""&&(le+="="+encodeURIComponent(String(Ye[V]))),y.push(le)}}return this.i=y.join("&")};function ai(y,S){return S=String(S),y.j&&(S=S.toLowerCase()),S}function pi(y,S){S&&!y.j&&(Lr(y),y.i=null,y.g.forEach(function(D,V){var le=V.toLowerCase();V!=le&&(Ls(this,V),gn(this,le,D))},y)),y.j=S}function lt(y,S){const D=new Hi;if(v.Image){const V=new Image;V.onload=j(ut,D,"TestLoadImage: loaded",!0,S,V),V.onerror=j(ut,D,"TestLoadImage: error",!1,S,V),V.onabort=j(ut,D,"TestLoadImage: abort",!1,S,V),V.ontimeout=j(ut,D,"TestLoadImage: timeout",!1,S,V),v.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=y}else S(!1)}function na(y,S){const D=new Hi,V=new AbortController,le=setTimeout(()=>{V.abort(),ut(D,"TestPingServer: timeout",!1,S)},1e4);fetch(y,{signal:V.signal}).then(xe=>{clearTimeout(le),xe.ok?ut(D,"TestPingServer: ok",!0,S):ut(D,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(le),ut(D,"TestPingServer: error",!1,S)})}function ut(y,S,D,V,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),V(D)}catch{}}function On(){this.g=new Nt}function Xi(y,S,D){const V=D||"";try{un(y,function(le,xe){let Ye=le;E(le)&&(Ye=xn(le)),S.push(V+xe+"="+encodeURIComponent(Ye))})}catch(le){throw S.push(V+"type="+encodeURIComponent("_badmap")),le}}function Qi(y){this.l=y.Ub||null,this.j=y.eb||!1}G(Qi,Si),Qi.prototype.g=function(){return new Wi(this.l,this.j)},Qi.prototype.i=function(y){return function(){return y}}({});function Wi(y,S){Kt.call(this),this.D=y,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(Wi,Kt),i=Wi.prototype,i.open=function(y,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=S,this.readyState=1,Zr(this)},i.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(S.body=y),(this.D||v).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ki(this)),this.readyState=0},i.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof v.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ni(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ni(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}i.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var S=y.value?y.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!y.done}))&&(this.response=this.responseText+=S)}y.done?Ki(this):Zr(this),this.readyState==3&&Ni(this)}},i.Ra=function(y){this.g&&(this.response=this.responseText=y,Ki(this))},i.Qa=function(y){this.g&&(this.response=y,Ki(this))},i.ga=function(){this.g&&Ki(this)};function Ki(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Zr(y)}i.setRequestHeader=function(y,S){this.u.append(y,S)},i.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],S=this.h.entries();for(var D=S.next();!D.done;)D=D.value,y.push(D[0]+": "+D[1]),D=S.next();return y.join(`\r
`)};function Zr(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ms(y){let S="";return Ue(y,function(D,V){S+=V,S+=":",S+=D,S+=`\r
`}),S}function Un(y,S,D){e:{for(V in D){var V=!1;break e}V=!0}V||(D=ms(D),typeof y=="string"?D!=null&&encodeURIComponent(String(D)):qe(y,S,D))}function $t(y){Kt.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G($t,Kt);var Zi=/^https?$/i,Ri=["POST","PUT"];i=$t.prototype,i.Ha=function(y){this.J=y},i.ea=function(y,S,D,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);S=S?S.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fi.g(),this.v=this.o?Ms(this.o):Ms(fi),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(S,String(y),!0),this.B=!1}catch(xe){Er(this,xe);return}if(y=D||"",D=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var le in V)D.set(le,V[le]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const xe of V.keys())D.set(xe,V.get(xe));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(D.keys()).find(xe=>xe.toLowerCase()=="content-type"),le=v.FormData&&y instanceof v.FormData,!(0<=Array.prototype.indexOf.call(Ri,S,void 0))||V||le||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,Ye]of D)this.g.setRequestHeader(xe,Ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(y),this.u=!1}catch(xe){Er(this,xe)}};function Er(y,S){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=S,y.m=5,ra(y),Di(y)}function ra(y){y.A||(y.A=!0,In(y,"complete"),In(y,"error"))}i.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,In(this,"complete"),In(this,"abort"),Di(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),$t.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ia(this):this.bb())},i.bb=function(){ia(this)};function ia(y){if(y.h&&typeof x<"u"&&(!y.v[1]||yi(y)!=4||y.Z()!=2)){if(y.u&&yi(y)==4)Xn(y.Ea,0,y);else if(In(y,"readystatechange"),yi(y)==4){y.h=!1;try{const Ye=y.Z();e:switch(Ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var D;if(!(D=S)){var V;if(V=Ye===0){var le=String(y.D).match(di)[1]||null;!le&&v.self&&v.self.location&&(le=v.self.location.protocol.slice(0,-1)),V=!Zi.test(le?le.toLowerCase():"")}D=V}if(D)In(y,"complete"),In(y,"success");else{y.m=6;try{var xe=2<yi(y)?y.g.statusText:""}catch{xe=""}y.l=xe+" ["+y.Z()+"]",ra(y)}}finally{Di(y)}}}}function Di(y,S){if(y.g){sa(y);const D=y.g,V=y.v[0]?()=>{}:null;y.g=null,y.v=null,S||In(y,"ready");try{D.onreadystatechange=V}catch{}}}function sa(y){y.I&&(v.clearTimeout(y.I),y.I=null)}i.isActive=function(){return!!this.g};function yi(y){return y.g?y.g.readyState:0}i.Z=function(){try{return 2<yi(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(y){if(this.g){var S=this.g.responseText;return y&&S.indexOf(y)==0&&(S=S.substring(y.length)),It(S)}};function fl(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function en(y){const S={};y=(y.g&&2<=yi(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<y.length;V++){if(fe(y[V]))continue;var D=Z(y[V]);const le=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const xe=S[le]||[];S[le]=xe,xe.push(D)}z(S,function(V){return V.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(y,S,D){return D&&D.internalChannelParams&&D.internalChannelParams[y]||S}function ps(y){this.Aa=0,this.i=[],this.j=new Hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,y),this.cb=ks("retryDelaySeedMs",1e4,y),this.Wa=ks("forwardChannelMaxRetries",2,y),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Ut(y&&y.concurrentRequestLimit),this.Da=new On,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ps.prototype,i.la=8,i.G=1,i.connect=function(y,S,D,V){Je(0),this.W=y,this.H=S||{},D&&V!==void 0&&(this.H.OSID=D,this.H.OAID=V),this.F=this.X,this.I=st(this,null,this.W),Et(this)};function xi(y){if(ye(y),y.G==3){var S=y.U++,D=mt(y.I);if(qe(D,"SID",y.K),qe(D,"RID",S),qe(D,"TYPE","terminate"),Bs(y,D),S=new ii(y,y.j,S),S.L=2,S.v=bn(mt(D)),D=!1,v.navigator&&v.navigator.sendBeacon)try{D=v.navigator.sendBeacon(S.v.toString(),"")}catch{}!D&&v.Image&&(new Image().src=S.v,D=!0),D||(S.g=ml(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Jt(S)}tn(y)}function Ua(y){y.g&&(ys(y),y.g.cancel(),y.g=null)}function ye(y){Ua(y),y.u&&(v.clearTimeout(y.u),y.u=null),Us(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&v.clearTimeout(y.s),y.s=null)}function Et(y){if(!kt(y.h)&&!y.s){y.s=!0;var S=y.Ga;me||K(),be||(me(),be=!0),Xe.add(S,y),y.B=0}}function sr(y,S){return Rt(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=S.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Xr(k(y.Ga,y,S),Vs(y,y.B)),y.B++,!0)}i.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const le=new ii(this,this.j,y);let xe=this.o;if(this.S&&(xe?(xe=F(xe),Y(xe,this.S)):xe=this.S),this.m!==null||this.O||(le.H=xe,xe=null),this.P)e:{for(var S=0,D=0;D<this.i.length;D++){t:{var V=this.i[D];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(S+=V,4096<S){S=D;break e}if(S===4096||D===this.i.length-1){S=D+1;break e}}S=1e3}else S=1e3;S=dl(this,le,S),D=mt(this.I),qe(D,"RID",y),qe(D,"CVER",22),this.D&&qe(D,"X-HTTP-Session-Id",this.D),Bs(this,D),xe&&(this.O?S="headers="+encodeURIComponent(String(ms(xe)))+"&"+S:this.m&&Un(D,this.m,xe)),Yi(this.h,le),this.Ua&&qe(D,"TYPE","init"),this.P?(qe(D,"$req",S),qe(D,"SID","null"),le.T=!0,Wn(le,D,null)):Wn(le,D,S),this.G=2}}else this.G==3&&(y?Ps(this,y):this.i.length==0||kt(this.h)||Ps(this))};function Ps(y,S){var D;S?D=S.l:D=y.U++;const V=mt(y.I);qe(V,"SID",y.K),qe(V,"RID",D),qe(V,"AID",y.T),Bs(y,V),y.m&&y.o&&Un(V,y.m,y.o),D=new ii(y,y.j,D,y.B+1),y.m===null&&(D.H=y.o),S&&(y.i=S.D.concat(y.i)),S=dl(y,D,1e3),D.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Yi(y.h,D),Wn(D,V,S)}function Bs(y,S){y.H&&Ue(y.H,function(D,V){qe(S,V,D)}),y.l&&un({},function(D,V){qe(S,V,D)})}function dl(y,S,D){D=Math.min(y.i.length,D);var V=y.l?k(y.l.Na,y.l,y):null;e:{var le=y.i;let xe=-1;for(;;){const Ye=["count="+D];xe==-1?0<D?(xe=le[0].g,Ye.push("ofs="+xe)):xe=0:Ye.push("ofs="+xe);let Vt=!0;for(let Ln=0;Ln<D;Ln++){let jt=le[Ln].g;const _n=le[Ln].map;if(jt-=xe,0>jt)xe=Math.max(0,le[Ln].g-100),Vt=!1;else try{Xi(_n,Ye,"req"+jt+"_")}catch{V&&V(_n)}}if(Vt){V=Ye.join("&");break e}}}return y=y.i.splice(0,D),S.D=y,V}function gl(y){if(!y.g&&!y.u){y.Y=1;var S=y.Fa;me||K(),be||(me(),be=!0),Xe.add(S,y),y.v=0}}function Do(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Xr(k(y.Fa,y),Vs(y,y.v)),y.v++,!0)}i.Fa=function(){if(this.u=null,Vn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Xr(k(this.ab,this),y)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Je(10),Ua(this),Vn(this))};function ys(y){y.A!=null&&(v.clearTimeout(y.A),y.A=null)}function Vn(y){y.g=new ii(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var S=mt(y.qa);qe(S,"RID","rpc"),qe(S,"SID",y.K),qe(S,"AID",y.T),qe(S,"CI",y.F?"0":"1"),!y.F&&y.ja&&qe(S,"TO",y.ja),qe(S,"TYPE","xmlhttp"),Bs(y,S),y.m&&y.o&&Un(S,y.m,y.o),y.L&&(y.g.I=y.L);var D=y.g;y=y.ia,D.L=1,D.v=bn(mt(S)),D.m=null,D.P=!0,Dn(D,y)}i.Za=function(){this.C!=null&&(this.C=null,Ua(this),Do(this),Je(19))};function Us(y){y.C!=null&&(v.clearTimeout(y.C),y.C=null)}function wn(y,S){var D=null;if(y.g==S){Us(y),ys(y),y.g=null;var V=2}else if(qi(y.h,S))D=S.D,Wr(y.h,S),V=1;else return;if(y.G!=0){if(S.o)if(V==1){D=S.m?S.m.length:0,S=Date.now()-S.F;var le=y.B;V=de(),In(V,new En(V,D)),Et(y)}else gl(y);else if(le=S.s,le==3||le==0&&0<S.X||!(V==1&&sr(y,S)||V==2&&Do(y)))switch(D&&0<D.length&&(S=y.h,S.i=S.i.concat(D)),le){case 1:kr(y,5);break;case 4:kr(y,10);break;case 3:kr(y,6);break;default:kr(y,2)}}}function Vs(y,S){let D=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(D*=2),D*S}function kr(y,S){if(y.j.info("Error code "+S),S==2){var D=k(y.fb,y),V=y.Xa;const le=!V;V=new Kr(V||"//www.google.com/images/cleardot.gif"),v.location&&v.location.protocol=="http"||Mn(V,"https"),bn(V),le?lt(V.toString(),D):na(V.toString(),D)}else Je(2);y.G=0,y.l&&y.l.sa(S),tn(y),ye(y)}i.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function tn(y){if(y.G=0,y.ka=[],y.l){const S=Gt(y.h);(S.length!=0||y.i.length!=0)&&(W(y.ka,S),W(y.ka,y.i),y.h.i.length=0,J(y.i),y.i.length=0),y.l.ra()}}function st(y,S,D){var V=D instanceof Kr?mt(D):new Kr(D);if(V.g!="")S&&(V.g=S+"."+V.g),ce(V,V.s);else{var le=v.location;V=le.protocol,S=S?S+"."+le.hostname:le.hostname,le=+le.port;var xe=new Kr(null);V&&Mn(xe,V),S&&(xe.g=S),le&&ce(xe,le),D&&(xe.l=D),V=xe}return D=y.D,S=y.ya,D&&S&&qe(V,D,S),qe(V,"VER",y.la),Bs(y,V),V}function ml(y,S,D){if(S&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=y.Ca&&!y.pa?new $t(new Qi({eb:D})):new $t(y.pa),S.Ha(y.J),S}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function on(){}i=on.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ei(){}Ei.prototype.g=function(y,S){return new Kn(y,S)};function Kn(y,S){Kt.call(this),this.g=new ps(S),this.l=y,this.h=S&&S.messageUrlParams||null,y=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(y?y["X-WebChannel-Content-Type"]=S.messageContentType:y={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(y?y["X-WebChannel-Client-Profile"]=S.va:y={"X-WebChannel-Client-Profile":S.va}),this.g.S=y,(y=S&&S.Sb)&&!fe(y)&&(this.g.m=y),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!fe(S)&&(this.g.D=S,y=this.h,y!==null&&S in y&&(y=this.h,S in y&&delete y[S])),this.j=new wi(this)}G(Kn,Kt),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){xi(this.g)},Kn.prototype.o=function(y){var S=this.g;if(typeof y=="string"){var D={};D.__data__=y,y=D}else this.u&&(D={},D.__data__=xn(y),y=D);S.i.push(new xc(S.Ya++,y)),S.G==3&&Et(S)},Kn.prototype.N=function(){this.g.l=null,delete this.j,xi(this.g),delete this.g,Kn.aa.N.call(this)};function pl(y){Cr.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var S=y.__sm__;if(S){e:{for(const D in S){y=D;break e}y=void 0}(this.i=y)&&(y=this.i,S=S!==null&&y in S?S[y]:void 0),this.data=S}else this.data=y}G(pl,Cr);function oi(){Yr.call(this),this.status=1}G(oi,Yr);function wi(y){this.g=y}G(wi,on),wi.prototype.ua=function(){In(this.g,"a")},wi.prototype.ta=function(y){In(this.g,new pl(y))},wi.prototype.sa=function(y){In(this.g,new oi)},wi.prototype.ra=function(){In(this.g,"b")},Ei.prototype.createWebChannel=Ei.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,zE=function(){return new Ei},FE=function(){return de()},jE=Or,m1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zn.NO_ERROR=0,zn.TIMEOUT=8,zn.HTTP_ERROR=6,tf=zn,Bn.COMPLETE="complete",VE=Bn,Js.EventType=vt,vt.OPEN="a",vt.CLOSE="b",vt.ERROR="c",vt.MESSAGE="d",Kt.prototype.listen=Kt.prototype.K,cu=Js,$t.prototype.listenOnce=$t.prototype.L,$t.prototype.getLastError=$t.prototype.Ka,$t.prototype.getLastErrorCode=$t.prototype.Ba,$t.prototype.getStatus=$t.prototype.Z,$t.prototype.getResponseJson=$t.prototype.Oa,$t.prototype.getResponseText=$t.prototype.oa,$t.prototype.send=$t.prototype.ea,$t.prototype.setWithCredentials=$t.prototype.Ha,UE=$t}).apply(typeof Gh<"u"?Gh:typeof self<"u"?self:typeof window<"u"?window:{});const yy="@firebase/firestore",xy="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new q1("@firebase/firestore");function Hl(){return tl.logLevel}function Ke(i,...e){if(tl.logLevel<=zt.DEBUG){const t=e.map(sg);tl.debug(`Firestore (${dc}): ${i}`,...t)}}function Oa(i,...e){if(tl.logLevel<=zt.ERROR){const t=e.map(sg);tl.error(`Firestore (${dc}): ${i}`,...t)}}function rc(i,...e){if(tl.logLevel<=zt.WARN){const t=e.map(sg);tl.warn(`Firestore (${dc}): ${i}`,...t)}}function sg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(i="Unexpected state"){const e=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: `+i;throw Oa(e),new Error(e)}function ln(i,e){i||yt()}function Tt(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends Pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class d3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class g3{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ln(this.o===void 0);let a=this.i;const c=_=>this.i!==a?(a=this.i,t(_)):Promise.resolve();let f=new Ra;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Ra,e.enqueueRetryable(()=>c(this.currentUser))};const x=()=>{const _=f;e.enqueueRetryable(async()=>{await _.promise,await c(this.currentUser)})},v=_=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),x())};this.t.onInit(_=>v(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?v(_):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Ra)}},0),x()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ln(typeof a.accessToken=="string"),new HE(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ln(e===null||typeof e=="string"),new ti(e)}}class m3{constructor(e,t,a){this.l=e,this.h=t,this.P=a,this.type="FirstParty",this.user=ti.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class p3{constructor(e,t,a){this.l=e,this.h=t,this.P=a}getToken(){return Promise.resolve(new m3(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y3{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,As(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){ln(this.o===void 0);const a=f=>{f.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const x=f.token!==this.R;return this.R=f.token,Ke("FirebaseAppCheckTokenProvider",`Received ${x?"new":"existing"} token.`),x?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>a(f))};const c=f=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.A.getImmediate({optional:!0});f?c(f):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Ey(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ln(typeof t.token=="string"),this.R=t.token,new Ey(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const c=x3(40);for(let f=0;f<c.length;++f)a.length<20&&c[f]<t&&(a+=e.charAt(c[f]%62))}return a}}function Yt(i,e){return i<e?-1:i>e?1:0}function ic(i,e,t){return i.length===e.length&&i.every((a,c)=>t(a,e[c]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=-62135596800,_y=1e6;class br{static now(){return br.fromMillis(Date.now())}static fromDate(e){return br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*_y);return new br(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $e(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $e(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wy)throw new $e(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_y}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-wy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static fromTimestamp(e){return new _t(e)}static min(){return new _t(new br(0,0))}static max(){return new _t(new br(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="__name__";class Ys{constructor(e,t,a){t===void 0?t=0:t>e.length&&yt(),a===void 0?a=e.length-t:a>e.length-t&&yt(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Ys.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let c=0;c<a;c++){const f=Ys.compareSegments(e.get(c),t.get(c));if(f!==0)return f}return Math.sign(e.length-t.length)}static compareSegments(e,t){const a=Ys.isNumericId(e),c=Ys.isNumericId(t);return a&&!c?-1:!a&&c?1:a&&c?Ys.extractNumericId(e).compare(Ys.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yo.fromString(e.substring(4,e.length-2))}}class Sn extends Ys{construct(e,t,a){return new Sn(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new $e(Se.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(c=>c.length>0))}return new Sn(t)}static emptyPath(){return new Sn([])}}const E3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hr extends Ys{construct(e,t,a){return new Hr(e,t,a)}static isValidIdentifier(e){return E3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ay}static keyField(){return new Hr([Ay])}static fromServerFormat(e){const t=[];let a="",c=0;const f=()=>{if(a.length===0)throw new $e(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let x=!1;for(;c<e.length;){const v=e[c];if(v==="\\"){if(c+1===e.length)throw new $e(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[c+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new $e(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=_,c+=2}else v==="`"?(x=!x,c++):v!=="."||x?(a+=v,c++):(f(),c++)}if(f(),x)throw new $e(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hr(t)}static emptyPath(){return new Hr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.path=e}static fromPath(e){return new ct(Sn.fromString(e))}static fromName(e){return new ct(Sn.fromString(e).popFirst(5))}static empty(){return new ct(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new Sn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=-1;function w3(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,c=_t.fromTimestamp(a===1e9?new br(t+1,0):new br(t,a));return new wo(c,ct.empty(),e)}function _3(i){return new wo(i.readTime,i.key,Au)}class wo{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new wo(_t.min(),ct.empty(),Au)}static max(){return new wo(_t.max(),ct.empty(),Au)}}function A3(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ct.comparator(i.documentKey,e.documentKey),t!==0?t:Yt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(i){if(i.code!==Se.FAILED_PRECONDITION||i.message!==v3)throw i;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ie((a,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(a,c)},this.catchCallback=f=>{this.wrapFailure(t,f).next(a,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ie?t:Ie.resolve(t)}catch(t){return Ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.reject(t)}static resolve(e){return new Ie((t,a)=>{t(e)})}static reject(e){return new Ie((t,a)=>{a(e)})}static waitFor(e){return new Ie((t,a)=>{let c=0,f=0,x=!1;e.forEach(v=>{++c,v.next(()=>{++f,x&&f===c&&t()},_=>a(_))}),x=!0,f===c&&t()})}static or(e){let t=Ie.resolve(!1);for(const a of e)t=t.next(c=>c?Ie.resolve(c):a());return t}static forEach(e,t){const a=[];return e.forEach((c,f)=>{a.push(t.call(this,c,f))}),this.waitFor(a)}static mapArray(e,t){return new Ie((a,c)=>{const f=e.length,x=new Array(f);let v=0;for(let _=0;_<f;_++){const E=_;t(e[E]).next(C=>{x[E]=C,++v,v===f&&a(x)},C=>c(C))}})}static doWhile(e,t){return new Ie((a,c)=>{const f=()=>{e()===!0?t().next(()=>{f()},c):a()};f()})}}function T3(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mc(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.oe(a),this._e=a=>t.writeSequenceNumber(a))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Uf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=-1;function Vf(i){return i==null}function yf(i){return i===0&&1/i==-1/0}function C3(i){return typeof i=="number"&&Number.isInteger(i)&&!yf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="";function S3(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=vy(e)),e=I3(i.get(t),e);return vy(e)}function I3(i,e){let t=e;const a=i.length;for(let c=0;c<a;c++){const f=i.charAt(c);switch(f){case"\0":t+="";break;case qE:t+="";break;default:t+=f}}return t}function vy(i){return i+qE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Io(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function YE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t){this.comparator=e,this.root=t||zr.EMPTY}insert(e,t){return new qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const c=this.comparator(e,a.key);if(c===0)return t+a.left.size;c<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,a,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?a(e.key,t):1,t&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zr{constructor(e,t,a,c,f){this.key=e,this.value=t,this.color=a??zr.RED,this.left=c??zr.EMPTY,this.right=f??zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,c,f){return new zr(e??this.key,t??this.value,a??this.color,c??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let c=this;const f=a(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,t,a),null):f===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,a)),c.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return zr.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const e=this.left.check();if(e!==this.right.check())throw yt();return e+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1;zr.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(e,t,a,c,f){return this}insert(e,t,a){return new zr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const c=a.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ty(this.data.getIterator())}getIteratorFrom(e){return new Ty(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof Tr)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(this.comparator(c,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tr(this.comparator);return t.data=e,t}}class Ty{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.fields=e,e.sort(Hr.comparator)}static empty(){return new ji([])}unionWith(e){let t=new Tr(Hr.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(t,a)=>t.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(c){try{return atob(c)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new XE("Invalid base64 string: "+f):f}}(e);return new qr(t)}static fromUint8Array(e){const t=function(c){let f="";for(let x=0;x<c.length;++x)f+=String.fromCharCode(c[x]);return f}(e);return new qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const a=new Uint8Array(t.length);for(let c=0;c<t.length;c++)a[c]=t.charCodeAt(c);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qr.EMPTY_BYTE_STRING=new qr("");const N3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(i){if(ln(!!i),typeof i=="string"){let e=0;const t=N3.exec(i);if(ln(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:lr(i.seconds),nanos:lr(i.nanos)}}function lr(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ao(i){return typeof i=="string"?qr.fromBase64String(i):qr.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="server_timestamp",WE="__type__",KE="__previous_value__",ZE="__local_write_time__";function og(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[WE])===null||t===void 0?void 0:t.stringValue)===QE}function jf(i){const e=i.mapValue.fields[KE];return og(e)?jf(e):e}function vu(i){const e=_o(i.mapValue.fields[ZE].timestampValue);return new br(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,t,a,c,f,x,v,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=c,this.ssl=f,this.forceLongPolling=x,this.autoDetectLongPolling=v,this.longPollingOptions=_,this.useFetchStreams=E}}const xf="(default)";class bu{constructor(e,t){this.projectId=e,this.database=t||xf}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database===xf}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="__type__",D3="__max__",Yh={mapValue:{}},JE="__vector__",Ef="value";function vo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?og(i)?4:O3(i)?9007199254740991:M3(i)?10:11:yt()}function Zs(i,e){if(i===e)return!0;const t=vo(i);if(t!==vo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return vu(i).isEqual(vu(e));case 3:return function(c,f){if(typeof c.timestampValue=="string"&&typeof f.timestampValue=="string"&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const x=_o(c.timestampValue),v=_o(f.timestampValue);return x.seconds===v.seconds&&x.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(c,f){return Ao(c.bytesValue).isEqual(Ao(f.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(c,f){return lr(c.geoPointValue.latitude)===lr(f.geoPointValue.latitude)&&lr(c.geoPointValue.longitude)===lr(f.geoPointValue.longitude)}(i,e);case 2:return function(c,f){if("integerValue"in c&&"integerValue"in f)return lr(c.integerValue)===lr(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const x=lr(c.doubleValue),v=lr(f.doubleValue);return x===v?yf(x)===yf(v):isNaN(x)&&isNaN(v)}return!1}(i,e);case 9:return ic(i.arrayValue.values||[],e.arrayValue.values||[],Zs);case 10:case 11:return function(c,f){const x=c.mapValue.fields||{},v=f.mapValue.fields||{};if(by(x)!==by(v))return!1;for(const _ in x)if(x.hasOwnProperty(_)&&(v[_]===void 0||!Zs(x[_],v[_])))return!1;return!0}(i,e);default:return yt()}}function Tu(i,e){return(i.values||[]).find(t=>Zs(t,e))!==void 0}function sc(i,e){if(i===e)return 0;const t=vo(i),a=vo(e);if(t!==a)return Yt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(i.booleanValue,e.booleanValue);case 2:return function(f,x){const v=lr(f.integerValue||f.doubleValue),_=lr(x.integerValue||x.doubleValue);return v<_?-1:v>_?1:v===_?0:isNaN(v)?isNaN(_)?0:-1:1}(i,e);case 3:return Cy(i.timestampValue,e.timestampValue);case 4:return Cy(vu(i),vu(e));case 5:return Yt(i.stringValue,e.stringValue);case 6:return function(f,x){const v=Ao(f),_=Ao(x);return v.compareTo(_)}(i.bytesValue,e.bytesValue);case 7:return function(f,x){const v=f.split("/"),_=x.split("/");for(let E=0;E<v.length&&E<_.length;E++){const C=Yt(v[E],_[E]);if(C!==0)return C}return Yt(v.length,_.length)}(i.referenceValue,e.referenceValue);case 8:return function(f,x){const v=Yt(lr(f.latitude),lr(x.latitude));return v!==0?v:Yt(lr(f.longitude),lr(x.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Sy(i.arrayValue,e.arrayValue);case 10:return function(f,x){var v,_,E,C;const R=f.fields||{},k=x.fields||{},j=(v=R[Ef])===null||v===void 0?void 0:v.arrayValue,G=(_=k[Ef])===null||_===void 0?void 0:_.arrayValue,J=Yt(((E=j==null?void 0:j.values)===null||E===void 0?void 0:E.length)||0,((C=G==null?void 0:G.values)===null||C===void 0?void 0:C.length)||0);return J!==0?J:Sy(j,G)}(i.mapValue,e.mapValue);case 11:return function(f,x){if(f===Yh.mapValue&&x===Yh.mapValue)return 0;if(f===Yh.mapValue)return 1;if(x===Yh.mapValue)return-1;const v=f.fields||{},_=Object.keys(v),E=x.fields||{},C=Object.keys(E);_.sort(),C.sort();for(let R=0;R<_.length&&R<C.length;++R){const k=Yt(_[R],C[R]);if(k!==0)return k;const j=sc(v[_[R]],E[C[R]]);if(j!==0)return j}return Yt(_.length,C.length)}(i.mapValue,e.mapValue);default:throw yt()}}function Cy(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Yt(i,e);const t=_o(i),a=_o(e),c=Yt(t.seconds,a.seconds);return c!==0?c:Yt(t.nanos,a.nanos)}function Sy(i,e){const t=i.values||[],a=e.values||[];for(let c=0;c<t.length&&c<a.length;++c){const f=sc(t[c],a[c]);if(f)return f}return Yt(t.length,a.length)}function ac(i){return p1(i)}function p1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const a=_o(t);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Ao(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ct.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let a="[",c=!0;for(const f of t.values||[])c?c=!1:a+=",",a+=p1(f);return a+"]"}(i.arrayValue):"mapValue"in i?function(t){const a=Object.keys(t.fields||{}).sort();let c="{",f=!0;for(const x of a)f?f=!1:c+=",",c+=`${x}:${p1(t.fields[x])}`;return c+"}"}(i.mapValue):yt()}function nf(i){switch(vo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jf(i);return e?16+nf(e):16;case 5:return 2*i.stringValue.length;case 6:return Ao(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((c,f)=>c+nf(f),0)}(i.arrayValue);case 10:case 11:return function(a){let c=0;return Io(a.fields,(f,x)=>{c+=f.length+nf(x)}),c}(i.mapValue);default:throw yt()}}function Iy(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function y1(i){return!!i&&"integerValue"in i}function lg(i){return!!i&&"arrayValue"in i}function Ny(i){return!!i&&"nullValue"in i}function Ry(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function rf(i){return!!i&&"mapValue"in i}function M3(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[$E])===null||t===void 0?void 0:t.stringValue)===JE}function pu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Io(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=pu(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function O3(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===D3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(t)}setAll(e){let t=Hr.emptyPath(),a={},c=[];e.forEach((x,v)=>{if(!t.isImmediateParentOf(v)){const _=this.getFieldsMap(t);this.applyChanges(_,a,c),a={},c=[],t=v.popLast()}x?a[v.lastSegment()]=pu(x):c.push(v.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,a,c)}delete(e){const t=this.field(e.popLast());rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let c=t.mapValue.fields[e.get(a)];rf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,a){Io(t,(c,f)=>e[c]=f);for(const c of a)delete e[c]}clone(){return new Ti(pu(this.value))}}function ew(i){const e=[];return Io(i.fields,(t,a)=>{const c=new Hr([t]);if(rf(a)){const f=ew(a.mapValue).fields;if(f.length===0)e.push(c);else for(const x of f)e.push(c.child(x))}else e.push(c)}),new ji(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t,a,c,f,x,v){this.key=e,this.documentType=t,this.version=a,this.readTime=c,this.createTime=f,this.data=x,this.documentState=v}static newInvalidDocument(e){return new ni(e,0,_t.min(),_t.min(),_t.min(),Ti.empty(),0)}static newFoundDocument(e,t,a,c){return new ni(e,1,t,_t.min(),a,c,0)}static newNoDocument(e,t){return new ni(e,2,t,_t.min(),_t.min(),Ti.empty(),0)}static newUnknownDocument(e,t){return new ni(e,3,t,_t.min(),_t.min(),Ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ni(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.position=e,this.inclusive=t}}function Dy(i,e,t){let a=0;for(let c=0;c<i.position.length;c++){const f=e[c],x=i.position[c];if(f.field.isKeyField()?a=ct.comparator(ct.fromName(x.referenceValue),t.key):a=sc(x,t.data.field(f.field)),f.dir==="desc"&&(a*=-1),a!==0)break}return a}function My(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Zs(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t="asc"){this.field=e,this.dir=t}}function L3(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{}class yr extends tw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new P3(e,t,a):t==="array-contains"?new V3(e,a):t==="in"?new j3(e,a):t==="not-in"?new F3(e,a):t==="array-contains-any"?new z3(e,a):new yr(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new B3(e,a):new U3(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(sc(t,this.value)):t!==null&&vo(this.value)===vo(t)&&this.matchesComparison(sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bs extends tw{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new bs(e,t)}matches(e){return nw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function nw(i){return i.op==="and"}function rw(i){return k3(i)&&nw(i)}function k3(i){for(const e of i.filters)if(e instanceof bs)return!1;return!0}function x1(i){if(i instanceof yr)return i.field.canonicalString()+i.op.toString()+ac(i.value);if(rw(i))return i.filters.map(e=>x1(e)).join(",");{const e=i.filters.map(t=>x1(t)).join(",");return`${i.op}(${e})`}}function iw(i,e){return i instanceof yr?function(a,c){return c instanceof yr&&a.op===c.op&&a.field.isEqual(c.field)&&Zs(a.value,c.value)}(i,e):i instanceof bs?function(a,c){return c instanceof bs&&a.op===c.op&&a.filters.length===c.filters.length?a.filters.reduce((f,x,v)=>f&&iw(x,c.filters[v]),!0):!1}(i,e):void yt()}function sw(i){return i instanceof yr?function(t){return`${t.field.canonicalString()} ${t.op} ${ac(t.value)}`}(i):i instanceof bs?function(t){return t.op.toString()+" {"+t.getFilters().map(sw).join(" ,")+"}"}(i):"Filter"}class P3 extends yr{constructor(e,t,a){super(e,t,a),this.key=ct.fromName(a.referenceValue)}matches(e){const t=ct.comparator(e.key,this.key);return this.matchesComparison(t)}}class B3 extends yr{constructor(e,t){super(e,"in",t),this.keys=aw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class U3 extends yr{constructor(e,t){super(e,"not-in",t),this.keys=aw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aw(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(a=>ct.fromName(a.referenceValue))}class V3 extends yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lg(t)&&Tu(t.arrayValue,this.value)}}class j3 extends yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tu(this.value.arrayValue,t)}}class F3 extends yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Tu(this.value.arrayValue,t)}}class z3 extends yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Tu(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t=null,a=[],c=[],f=null,x=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=c,this.limit=f,this.startAt=x,this.endAt=v,this.le=null}}function Oy(i,e=null,t=[],a=[],c=null,f=null,x=null){return new H3(i,e,t,a,c,f,x)}function cg(i){const e=Tt(i);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>x1(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>function(f){return f.field.canonicalString()+f.dir}(a)).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>ac(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>ac(a)).join(",")),e.le=t}return e.le}function ug(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!L3(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!iw(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!My(i.startAt,e.startAt)&&My(i.endAt,e.endAt)}function E1(i){return ct.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t=null,a=[],c=[],f=null,x="F",v=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=c,this.limit=f,this.limitType=x,this.startAt=v,this.endAt=_,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function G3(i,e,t,a,c,f,x,v){return new pc(i,e,t,a,c,f,x,v)}function hg(i){return new pc(i)}function Ly(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function ow(i){return i.collectionGroup!==null}function yu(i){const e=Tt(i);if(e.he===null){e.he=[];const t=new Set;for(const f of e.explicitOrderBy)e.he.push(f),t.add(f.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(x){let v=new Tr(Hr.comparator);return x.filters.forEach(_=>{_.getFlattenedFilters().forEach(E=>{E.isInequality()&&(v=v.add(E.field))})}),v})(e).forEach(f=>{t.has(f.canonicalString())||f.isKeyField()||e.he.push(new _f(f,a))}),t.has(Hr.keyField().canonicalString())||e.he.push(new _f(Hr.keyField(),a))}return e.he}function Qs(i){const e=Tt(i);return e.Pe||(e.Pe=q3(e,yu(i))),e.Pe}function q3(i,e){if(i.limitType==="F")return Oy(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(c=>{const f=c.dir==="desc"?"asc":"desc";return new _f(c.field,f)});const t=i.endAt?new wf(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new wf(i.startAt.position,i.startAt.inclusive):null;return Oy(i.path,i.collectionGroup,e,i.filters,i.limit,t,a)}}function w1(i,e){const t=i.filters.concat([e]);return new pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function _1(i,e,t){return new pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Ff(i,e){return ug(Qs(i),Qs(e))&&i.limitType===e.limitType}function lw(i){return`${cg(Qs(i))}|lt:${i.limitType}`}function Gl(i){return`Query(target=${function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map(c=>sw(c)).join(", ")}]`),Vf(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map(c=>function(x){return`${x.field.canonicalString()} (${x.dir})`}(c)).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map(c=>ac(c)).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map(c=>ac(c)).join(",")),`Target(${a})`}(Qs(i))}; limitType=${i.limitType})`}function zf(i,e){return e.isFoundDocument()&&function(a,c){const f=c.key.path;return a.collectionGroup!==null?c.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(f):ct.isDocumentKey(a.path)?a.path.isEqual(f):a.path.isImmediateParentOf(f)}(i,e)&&function(a,c){for(const f of yu(a))if(!f.field.isKeyField()&&c.data.field(f.field)===null)return!1;return!0}(i,e)&&function(a,c){for(const f of a.filters)if(!f.matches(c))return!1;return!0}(i,e)&&function(a,c){return!(a.startAt&&!function(x,v,_){const E=Dy(x,v,_);return x.inclusive?E<=0:E<0}(a.startAt,yu(a),c)||a.endAt&&!function(x,v,_){const E=Dy(x,v,_);return x.inclusive?E>=0:E>0}(a.endAt,yu(a),c))}(i,e)}function Y3(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function cw(i){return(e,t)=>{let a=!1;for(const c of yu(i)){const f=X3(c,e,t);if(f!==0)return f;a=a||c.field.isKeyField()}return 0}}function X3(i,e,t){const a=i.field.isKeyField()?ct.comparator(e.key,t.key):function(f,x,v){const _=x.data.field(f),E=v.data.field(f);return _!==null&&E!==null?sc(_,E):yt()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[c,f]of a)if(this.equalsFn(c,e))return f}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),c=this.inner[a];if(c===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return a.length===1?delete this.inner[t]:a.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(t,a)=>{for(const[c,f]of a)e(c,f)})}isEmpty(){return YE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new qn(ct.comparator);function La(){return Q3}const uw=new qn(ct.comparator);function uu(...i){let e=uw;for(const t of i)e=e.insert(t.key,t);return e}function hw(i){let e=uw;return i.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Zo(){return xu()}function fw(){return xu()}function xu(){return new al(i=>i.toString(),(i,e)=>i.isEqual(e))}const W3=new qn(ct.comparator),K3=new Tr(ct.comparator);function Ht(...i){let e=K3;for(const t of i)e=e.add(t);return e}const Z3=new Tr(Yt);function $3(){return Z3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function dw(i){return{integerValue:""+i}}function J3(i,e){return C3(e)?dw(e):fg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this._=void 0}}function eI(i,e,t){return i instanceof Af?function(c,f){const x={fields:{[WE]:{stringValue:QE},[ZE]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&og(f)&&(f=jf(f)),f&&(x.fields[KE]=f),{mapValue:x}}(t,e):i instanceof Cu?mw(i,e):i instanceof Su?pw(i,e):function(c,f){const x=gw(c,f),v=ky(x)+ky(c.Ie);return y1(x)&&y1(c.Ie)?dw(v):fg(c.serializer,v)}(i,e)}function tI(i,e,t){return i instanceof Cu?mw(i,e):i instanceof Su?pw(i,e):t}function gw(i,e){return i instanceof vf?function(a){return y1(a)||function(f){return!!f&&"doubleValue"in f}(a)}(e)?e:{integerValue:0}:null}class Af extends Hf{}class Cu extends Hf{constructor(e){super(),this.elements=e}}function mw(i,e){const t=yw(e);for(const a of i.elements)t.some(c=>Zs(c,a))||t.push(a);return{arrayValue:{values:t}}}class Su extends Hf{constructor(e){super(),this.elements=e}}function pw(i,e){let t=yw(e);for(const a of i.elements)t=t.filter(c=>!Zs(c,a));return{arrayValue:{values:t}}}class vf extends Hf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ky(i){return lr(i.integerValue||i.doubleValue)}function yw(i){return lg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function nI(i,e){return i.field.isEqual(e.field)&&function(a,c){return a instanceof Cu&&c instanceof Cu||a instanceof Su&&c instanceof Su?ic(a.elements,c.elements,Zs):a instanceof vf&&c instanceof vf?Zs(a.Ie,c.Ie):a instanceof Af&&c instanceof Af}(i.transform,e.transform)}class rI{constructor(e,t){this.version=e,this.transformResults=t}}class cs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cs}static exists(e){return new cs(void 0,e)}static updateTime(e){return new cs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Gf{}function xw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new dg(i.key,cs.none()):new Bu(i.key,i.data,cs.none());{const t=i.data,a=Ti.empty();let c=new Tr(Hr.comparator);for(let f of e.fields)if(!c.has(f)){let x=t.field(f);x===null&&f.length>1&&(f=f.popLast(),x=t.field(f)),x===null?a.delete(f):a.set(f,x),c=c.add(f)}return new No(i.key,a,new ji(c.toArray()),cs.none())}}function iI(i,e,t){i instanceof Bu?function(c,f,x){const v=c.value.clone(),_=By(c.fieldTransforms,f,x.transformResults);v.setAll(_),f.convertToFoundDocument(x.version,v).setHasCommittedMutations()}(i,e,t):i instanceof No?function(c,f,x){if(!sf(c.precondition,f))return void f.convertToUnknownDocument(x.version);const v=By(c.fieldTransforms,f,x.transformResults),_=f.data;_.setAll(Ew(c)),_.setAll(v),f.convertToFoundDocument(x.version,_).setHasCommittedMutations()}(i,e,t):function(c,f,x){f.convertToNoDocument(x.version).setHasCommittedMutations()}(0,e,t)}function Eu(i,e,t,a){return i instanceof Bu?function(f,x,v,_){if(!sf(f.precondition,x))return v;const E=f.value.clone(),C=Uy(f.fieldTransforms,_,x);return E.setAll(C),x.convertToFoundDocument(x.version,E).setHasLocalMutations(),null}(i,e,t,a):i instanceof No?function(f,x,v,_){if(!sf(f.precondition,x))return v;const E=Uy(f.fieldTransforms,_,x),C=x.data;return C.setAll(Ew(f)),C.setAll(E),x.convertToFoundDocument(x.version,C).setHasLocalMutations(),v===null?null:v.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(R=>R.field))}(i,e,t,a):function(f,x,v){return sf(f.precondition,x)?(x.convertToNoDocument(x.version).setHasLocalMutations(),null):v}(i,e,t)}function sI(i,e){let t=null;for(const a of i.fieldTransforms){const c=e.data.field(a.field),f=gw(a.transform,c||null);f!=null&&(t===null&&(t=Ti.empty()),t.set(a.field,f))}return t||null}function Py(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(a,c){return a===void 0&&c===void 0||!(!a||!c)&&ic(a,c,(f,x)=>nI(f,x))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Bu extends Gf{constructor(e,t,a,c=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class No extends Gf{constructor(e,t,a,c,f=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function Ew(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function By(i,e,t){const a=new Map;ln(i.length===t.length);for(let c=0;c<t.length;c++){const f=i[c],x=f.transform,v=e.data.field(f.field);a.set(f.field,tI(x,v,t[c]))}return a}function Uy(i,e,t){const a=new Map;for(const c of i){const f=c.transform,x=t.data.field(c.field);a.set(c.field,eI(f,x,e))}return a}class dg extends Gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aI extends Gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t,a,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=c}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&iI(f,e,a[c])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Eu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Eu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=fw();return this.mutations.forEach(c=>{const f=e.get(c.key),x=f.overlayedDocument;let v=this.applyToLocalView(x,f.mutatedFields);v=t.has(c.key)?null:v;const _=xw(x,v);_!==null&&a.set(c.key,_),x.isValidDocument()||x.convertToNoDocument(_t.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(t,a)=>Py(t,a))&&ic(this.baseMutations,e.baseMutations,(t,a)=>Py(t,a))}}class gg{constructor(e,t,a,c){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=c}static from(e,t,a){ln(e.mutations.length===a.length);let c=function(){return W3}();const f=e.mutations;for(let x=0;x<f.length;x++)c=c.insert(f[x].key,a[x].version);return new gg(e,t,a,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr,Qt;function uI(i){switch(i){case Se.OK:return yt();case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return yt()}}function ww(i){if(i===void 0)return Oa("GRPC error has no .code"),Se.UNKNOWN;switch(i){case mr.OK:return Se.OK;case mr.CANCELLED:return Se.CANCELLED;case mr.UNKNOWN:return Se.UNKNOWN;case mr.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case mr.INTERNAL:return Se.INTERNAL;case mr.UNAVAILABLE:return Se.UNAVAILABLE;case mr.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case mr.NOT_FOUND:return Se.NOT_FOUND;case mr.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case mr.ABORTED:return Se.ABORTED;case mr.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case mr.DATA_LOSS:return Se.DATA_LOSS;default:return yt()}}(Qt=mr||(mr={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=new yo([4294967295,4294967295],0);function Vy(i){const e=hI().encode(i),t=new BE;return t.update(e),new Uint8Array(t.digest())}function jy(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new yo([t,a],0),new yo([c,f],0)]}class mg{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new hu(`Invalid padding: ${t}`);if(a<0)throw new hu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new hu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new hu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=yo.fromNumber(this.Ee)}Ae(e,t,a){let c=e.add(t.multiply(yo.fromNumber(a)));return c.compare(fI)===1&&(c=new yo([c.getBits(0),c.getBits(1)],0)),c.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Vy(e),[a,c]=jy(t);for(let f=0;f<this.hashCount;f++){const x=this.Ae(a,c,f);if(!this.Re(x))return!1}return!0}static create(e,t,a){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),x=new mg(f,c,t);return a.forEach(v=>x.insert(v)),x}insert(e){if(this.Ee===0)return;const t=Vy(e),[a,c]=jy(t);for(let f=0;f<this.hashCount;f++){const x=this.Ae(a,c,f);this.Ve(x)}}Ve(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,a,c,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const c=new Map;return c.set(e,Uu.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new qf(_t.min(),c,new qn(Yt),La(),Ht())}}class Uu{constructor(e,t,a,c,f){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Uu(a,t,Ht(),Ht(),Ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,a,c){this.me=e,this.removedTargetIds=t,this.key=a,this.fe=c}}class _w{constructor(e,t){this.targetId=e,this.ge=t}}class Aw{constructor(e,t,a=qr.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=c}}class Fy{constructor(){this.pe=0,this.ye=zy(),this.we=qr.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ht(),t=Ht(),a=Ht();return this.ye.forEach((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:a=a.add(c);break;default:yt()}}),new Uu(this.we,this.Se,e,t,a)}Me(){this.be=!1,this.ye=zy()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ln(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class dI{constructor(e){this.ke=e,this.qe=new Map,this.Qe=La(),this.$e=Xh(),this.Ke=Xh(),this.Ue=new qn(Yt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const a=this.He(t);switch(e.state){case 0:this.Je(t)&&a.Ce(e.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(e.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(t);break;case 3:this.Je(t)&&(a.Le(),a.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),a.Ce(e.resumeToken));break;default:yt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((a,c)=>{this.Je(c)&&t(c)})}Ze(e){const t=e.targetId,a=e.ge.count,c=this.Xe(t);if(c){const f=c.target;if(E1(f))if(a===0){const x=new ct(f.path);this.ze(t,x,ni.newNoDocument(x,_t.min()))}else ln(a===1);else{const x=this.et(t);if(x!==a){const v=this.tt(e),_=v?this.nt(v,e,x):1;if(_!==0){this.Ye(t);const E=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,E)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=t;let x,v;try{x=Ao(a).toUint8Array()}catch(_){if(_ instanceof XE)return rc("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{v=new mg(x,c,f)}catch(_){return rc(_ instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return v.Ee===0?null:v}nt(e,t,a){return t.ge.count===a-this.st(e,t.targetId)?0:2}st(e,t){const a=this.ke.getRemoteKeysForTarget(t);let c=0;return a.forEach(f=>{const x=this.ke.it(),v=`projects/${x.projectId}/databases/${x.database}/documents/${f.path.canonicalString()}`;e.mightContain(v)||(this.ze(t,f,null),c++)}),c}ot(e){const t=new Map;this.qe.forEach((f,x)=>{const v=this.Xe(x);if(v){if(f.current&&E1(v.target)){const _=new ct(v.target.path);this._t(_).has(x)||this.ut(x,_)||this.ze(x,_,ni.newNoDocument(_,e))}f.ve&&(t.set(x,f.Fe()),f.Me())}});let a=Ht();this.Ke.forEach((f,x)=>{let v=!0;x.forEachWhile(_=>{const E=this.Xe(_);return!E||E.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)}),v&&(a=a.add(f))}),this.Qe.forEach((f,x)=>x.setReadTime(e));const c=new qf(e,t,this.Ue,this.Qe,a);return this.Qe=La(),this.$e=Xh(),this.Ke=Xh(),this.Ue=new qn(Yt),c}Ge(e,t){if(!this.Je(e))return;const a=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,a),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,a){if(!this.Je(e))return;const c=this.He(e);this.ut(e,t)?c.xe(t,1):c.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),a&&(this.Qe=this.Qe.insert(t,a))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Fy,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Tr(Yt),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Tr(Yt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Fy),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Xh(){return new qn(ct.comparator)}function zy(){return new qn(ct.comparator)}const gI={asc:"ASCENDING",desc:"DESCENDING"},mI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pI={and:"AND",or:"OR"};class yI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function A1(i,e){return i.useProto3Json||Vf(e)?e:{value:e}}function bf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function xI(i,e){return bf(i,e.toTimestamp())}function Ws(i){return ln(!!i),_t.fromTimestamp(function(t){const a=_o(t);return new br(a.seconds,a.nanos)}(i))}function pg(i,e){return v1(i,e).canonicalString()}function v1(i,e){const t=function(c){return new Sn(["projects",c.projectId,"databases",c.database])}(i).child("documents");return e===void 0?t:t.child(e)}function bw(i){const e=Sn.fromString(i);return ln(Nw(e)),e}function b1(i,e){return pg(i.databaseId,e.path)}function J0(i,e){const t=bw(e);if(t.get(1)!==i.databaseId.projectId)throw new $e(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new $e(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ct(Cw(t))}function Tw(i,e){return pg(i.databaseId,e)}function EI(i){const e=bw(i);return e.length===4?Sn.emptyPath():Cw(e)}function T1(i){return new Sn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Cw(i){return ln(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Hy(i,e,t){return{name:b1(i,e),fields:t.value.mapValue.fields}}function wI(i,e){let t;if("targetChange"in e){e.targetChange;const a=function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:yt()}(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],f=function(E,C){return E.useProto3Json?(ln(C===void 0||typeof C=="string"),qr.fromBase64String(C||"")):(ln(C===void 0||C instanceof Buffer||C instanceof Uint8Array),qr.fromUint8Array(C||new Uint8Array))}(i,e.targetChange.resumeToken),x=e.targetChange.cause,v=x&&function(E){const C=E.code===void 0?Se.UNKNOWN:ww(E.code);return new $e(C,E.message||"")}(x);t=new Aw(a,c,f,v||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const c=J0(i,a.document.name),f=Ws(a.document.updateTime),x=a.document.createTime?Ws(a.document.createTime):_t.min(),v=new Ti({mapValue:{fields:a.document.fields}}),_=ni.newFoundDocument(c,f,x,v),E=a.targetIds||[],C=a.removedTargetIds||[];t=new af(E,C,_.key,_)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const c=J0(i,a.document),f=a.readTime?Ws(a.readTime):_t.min(),x=ni.newNoDocument(c,f),v=a.removedTargetIds||[];t=new af([],v,x.key,x)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const c=J0(i,a.document),f=a.removedTargetIds||[];t=new af([],f,c,null)}else{if(!("filter"in e))return yt();{e.filter;const a=e.filter;a.targetId;const{count:c=0,unchangedNames:f}=a,x=new cI(c,f),v=a.targetId;t=new _w(v,x)}}return t}function _I(i,e){let t;if(e instanceof Bu)t={update:Hy(i,e.key,e.value)};else if(e instanceof dg)t={delete:b1(i,e.key)};else if(e instanceof No)t={update:Hy(i,e.key,e.data),updateMask:RI(e.fieldMask)};else{if(!(e instanceof aI))return yt();t={verify:b1(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(f,x){const v=x.transform;if(v instanceof Af)return{fieldPath:x.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Cu)return{fieldPath:x.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Su)return{fieldPath:x.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof vf)return{fieldPath:x.field.canonicalString(),increment:v.Ie};throw yt()}(0,a))),e.precondition.isNone||(t.currentDocument=function(c,f){return f.updateTime!==void 0?{updateTime:xI(c,f.updateTime)}:f.exists!==void 0?{exists:f.exists}:yt()}(i,e.precondition)),t}function AI(i,e){return i&&i.length>0?(ln(e!==void 0),i.map(t=>function(c,f){let x=c.updateTime?Ws(c.updateTime):Ws(f);return x.isEqual(_t.min())&&(x=Ws(f)),new rI(x,c.transformResults||[])}(t,e))):[]}function vI(i,e){return{documents:[Tw(i,e.path)]}}function bI(i,e){const t={structuredQuery:{}},a=e.path;let c;e.collectionGroup!==null?(c=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=Tw(i,c);const f=function(E){if(E.length!==0)return Iw(bs.create(E,"and"))}(e.filters);f&&(t.structuredQuery.where=f);const x=function(E){if(E.length!==0)return E.map(C=>function(k){return{field:ql(k.field),direction:SI(k.dir)}}(C))}(e.orderBy);x&&(t.structuredQuery.orderBy=x);const v=A1(i,e.limit);return v!==null&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt=function(E){return{before:E.inclusive,values:E.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(e.endAt)),{ht:t,parent:c}}function TI(i){let e=EI(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let c=null;if(a>0){ln(a===1);const C=t.from[0];C.allDescendants?c=C.collectionId:e=e.child(C.collectionId)}let f=[];t.where&&(f=function(R){const k=Sw(R);return k instanceof bs&&rw(k)?k.getFilters():[k]}(t.where));let x=[];t.orderBy&&(x=function(R){return R.map(k=>function(G){return new _f(Yl(G.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(k))}(t.orderBy));let v=null;t.limit&&(v=function(R){let k;return k=typeof R=="object"?R.value:R,Vf(k)?null:k}(t.limit));let _=null;t.startAt&&(_=function(R){const k=!!R.before,j=R.values||[];return new wf(j,k)}(t.startAt));let E=null;return t.endAt&&(E=function(R){const k=!R.before,j=R.values||[];return new wf(j,k)}(t.endAt)),G3(e,c,x,f,v,"F",_,E)}function CI(i,e){const t=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Sw(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Yl(t.unaryFilter.field);return yr.create(a,"==",{doubleValue:NaN});case"IS_NULL":const c=Yl(t.unaryFilter.field);return yr.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Yl(t.unaryFilter.field);return yr.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const x=Yl(t.unaryFilter.field);return yr.create(x,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}(i):i.fieldFilter!==void 0?function(t){return yr.create(Yl(t.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return bs.create(t.compositeFilter.filters.map(a=>Sw(a)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return yt()}}(t.compositeFilter.op))}(i):yt()}function SI(i){return gI[i]}function II(i){return mI[i]}function NI(i){return pI[i]}function ql(i){return{fieldPath:i.canonicalString()}}function Yl(i){return Hr.fromServerFormat(i.fieldPath)}function Iw(i){return i instanceof yr?function(t){if(t.op==="=="){if(Ry(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(Ny(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ry(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(Ny(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:II(t.op),value:t.value}}}(i):i instanceof bs?function(t){const a=t.getFilters().map(c=>Iw(c));return a.length===1?a[0]:{compositeFilter:{op:NI(t.op),filters:a}}}(i):yt()}function RI(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,a,c,f=_t.min(),x=_t.min(),v=qr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=x,this.resumeToken=v,this.expectedCount=_}withSequenceNumber(e){return new fo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.Tt=e}}function MI(i){const e=TI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?_1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.Tn=new LI}addToCollectionParentIndex(e,t){return this.Tn.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getIndexType(e,t){return Ie.resolve(0)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,t){return Ie.resolve(wo.min())}getMinOffsetFromCollectionGroup(e,t){return Ie.resolve(wo.min())}updateCollectionGroup(e,t,a){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}}class LI{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t]||new Tr(Sn.comparator),f=!c.has(a);return this.index[t]=c.add(a),f}has(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t];return c&&c.has(a)}getEntries(e){return(this.index[e]||new Tr(Sn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rw=41943040;class bi{static withCacheSize(e){return new bi(e,bi.DEFAULT_COLLECTION_PERCENTILE,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi.DEFAULT_COLLECTION_PERCENTILE=10,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bi.DEFAULT=new bi(Rw,bi.DEFAULT_COLLECTION_PERCENTILE,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bi.DISABLED=new bi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new oc(0)}static Un(){return new oc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="LruGarbageCollector",kI=1048576;function Yy([i,e],[t,a]){const c=Yt(i,t);return c===0?Yt(e,a):c}class PI{constructor(e){this.Hn=e,this.buffer=new Tr(Yy),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Yy(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BI{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Ke(qy,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){mc(t)?Ke(qy,"Ignoring IndexedDB error during garbage collection: ",t):await gc(t)}await this.er(3e5)})}}class UI{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(t===0)return Ie.resolve(Uf.ae);const a=new PI(t);return this.tr.forEachTarget(e,c=>a.Zn(c.sequenceNumber)).next(()=>this.tr.rr(e,c=>a.Zn(c))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.tr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(Gy)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let a,c,f,x,v,_,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),c=this.params.maximumSequenceNumbersToCollect):c=R,x=Date.now(),this.nthSequenceNumber(e,c))).next(R=>(a=R,v=Date.now(),this.removeTargets(e,a,t))).next(R=>(f=R,_=Date.now(),this.removeOrphanedDocuments(e,a))).next(R=>(E=Date.now(),Hl()<=zt.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${x-C}ms
	Determined least recently used ${c} in `+(v-x)+`ms
	Removed ${f} targets in `+(_-v)+`ms
	Removed ${R} documents in `+(E-_)+`ms
Total Duration: ${E-C}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:R})))}}function VI(i,e){return new UI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.changes=new al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ni.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?Ie.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t,a,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=c}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(a=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(a!==null&&Eu(a.mutation,c,ji.empty(),br.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Ht()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Ht()){const c=Zo();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,a).next(f=>{let x=uu();return f.forEach((v,_)=>{x=x.insert(v,_.overlayedDocument)}),x}))}getOverlayedDocuments(e,t){const a=Zo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Ht()))}populateOverlays(e,t,a){const c=[];return a.forEach(f=>{t.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(e,c).next(f=>{f.forEach((x,v)=>{t.set(x,v)})})}computeViews(e,t,a,c){let f=La();const x=xu(),v=function(){return xu()}();return t.forEach((_,E)=>{const C=a.get(E.key);c.has(E.key)&&(C===void 0||C.mutation instanceof No)?f=f.insert(E.key,E):C!==void 0?(x.set(E.key,C.mutation.getFieldMask()),Eu(C.mutation,E,C.mutation.getFieldMask(),br.now())):x.set(E.key,ji.empty())}),this.recalculateAndSaveOverlays(e,f).next(_=>(_.forEach((E,C)=>x.set(E,C)),t.forEach((E,C)=>{var R;return v.set(E,new FI(C,(R=x.get(E))!==null&&R!==void 0?R:null))}),v))}recalculateAndSaveOverlays(e,t){const a=xu();let c=new qn((x,v)=>x-v),f=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(x=>{for(const v of x)v.keys().forEach(_=>{const E=t.get(_);if(E===null)return;let C=a.get(_)||ji.empty();C=v.applyToLocalView(E,C),a.set(_,C);const R=(c.get(v.batchId)||Ht()).add(_);c=c.insert(v.batchId,R)})}).next(()=>{const x=[],v=c.getReverseIterator();for(;v.hasNext();){const _=v.getNext(),E=_.key,C=_.value,R=fw();C.forEach(k=>{if(!f.has(k)){const j=xw(t.get(k),a.get(k));j!==null&&R.set(k,j),f=f.add(k)}}),x.push(this.documentOverlayCache.saveOverlays(e,E,R))}return Ie.waitFor(x)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a,c){return function(x){return ct.isDocumentKey(x.path)&&x.collectionGroup===null&&x.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,c):this.getDocumentsMatchingCollectionQuery(e,t,a,c)}getNextDocuments(e,t,a,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,c).next(f=>{const x=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,c-f.size):Ie.resolve(Zo());let v=Au,_=f;return x.next(E=>Ie.forEach(E,(C,R)=>(v<R.largestBatchId&&(v=R.largestBatchId),f.get(C)?Ie.resolve():this.remoteDocumentCache.getEntry(e,C).next(k=>{_=_.insert(C,k)}))).next(()=>this.populateOverlays(e,E,f)).next(()=>this.computeViews(e,_,E,Ht())).next(C=>({batchId:v,changes:hw(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ct(t)).next(a=>{let c=uu();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,a,c){const f=t.collectionGroup;let x=uu();return this.indexManager.getCollectionParents(e,f).next(v=>Ie.forEach(v,_=>{const E=function(R,k){return new pc(k,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(t,_.child(f));return this.getDocumentsMatchingCollectionQuery(e,E,a,c).next(C=>{C.forEach((R,k)=>{x=x.insert(R,k)})})}).next(()=>x))}getDocumentsMatchingCollectionQuery(e,t,a,c){let f;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(x=>(f=x,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,f,c))).next(x=>{f.forEach((_,E)=>{const C=E.getKey();x.get(C)===null&&(x=x.insert(C,ni.newInvalidDocument(C)))});let v=uu();return x.forEach((_,E)=>{const C=f.get(_);C!==void 0&&Eu(C.mutation,E,ji.empty(),br.now()),zf(t,E)&&(v=v.insert(_,E))}),v})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Ie.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(c){return{id:c.id,version:c.version,createTime:Ws(c.createTime)}}(t)),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(c){return{name:c.name,query:MI(c.bundledQuery),readTime:Ws(c.readTime)}}(t)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.overlays=new qn(ct.comparator),this.Rr=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Zo();return Ie.forEach(t,c=>this.getOverlay(e,c).next(f=>{f!==null&&a.set(c,f)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((c,f)=>{this.Et(e,t,f)}),Ie.resolve()}removeOverlaysForBatchId(e,t,a){const c=this.Rr.get(a);return c!==void 0&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.Rr.delete(a)),Ie.resolve()}getOverlaysForCollection(e,t,a){const c=Zo(),f=t.length+1,x=new ct(t.child("")),v=this.overlays.getIteratorFrom(x);for(;v.hasNext();){const _=v.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===f&&_.largestBatchId>a&&c.set(_.getKey(),_)}return Ie.resolve(c)}getOverlaysForCollectionGroup(e,t,a,c){let f=new qn((E,C)=>E-C);const x=this.overlays.getIterator();for(;x.hasNext();){const E=x.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>a){let C=f.get(E.largestBatchId);C===null&&(C=Zo(),f=f.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const v=Zo(),_=f.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,C)=>v.set(E,C)),!(v.size()>=c)););return Ie.resolve(v)}Et(e,t,a){const c=this.overlays.get(a.key);if(c!==null){const x=this.Rr.get(c.largestBatchId).delete(a.key);this.Rr.set(c.largestBatchId,x)}this.overlays=this.overlays.insert(a.key,new lI(t,a));let f=this.Rr.get(t);f===void 0&&(f=Ht(),this.Rr.set(t,f)),this.Rr.set(t,f.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.sessionToken=qr.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.Vr=new Tr(Dr.mr),this.gr=new Tr(Dr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const a=new Dr(e,t);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.wr(new Dr(e,t))}Sr(e,t){e.forEach(a=>this.removeReference(a,t))}br(e){const t=new ct(new Sn([])),a=new Dr(t,e),c=new Dr(t,e+1),f=[];return this.gr.forEachInRange([a,c],x=>{this.wr(x),f.push(x.key)}),f}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ct(new Sn([])),a=new Dr(t,e),c=new Dr(t,e+1);let f=Ht();return this.gr.forEachInRange([a,c],x=>{f=f.add(x.key)}),f}containsKey(e){const t=new Dr(e,0),a=this.Vr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Dr{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ct.comparator(e.key,t.key)||Yt(e.Cr,t.Cr)}static pr(e,t){return Yt(e.Cr,t.Cr)||ct.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Tr(Dr.mr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,c){const f=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const x=new oI(f,t,a,c);this.mutationQueue.push(x);for(const v of c)this.Mr=this.Mr.add(new Dr(v.key,f)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return Ie.resolve(x)}lookupMutationBatch(e,t){return Ie.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,c=this.Nr(a),f=c<0?0:c;return Ie.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?ag:this.Fr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Dr(t,0),c=new Dr(t,Number.POSITIVE_INFINITY),f=[];return this.Mr.forEachInRange([a,c],x=>{const v=this.Or(x.Cr);f.push(v)}),Ie.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Tr(Yt);return t.forEach(c=>{const f=new Dr(c,0),x=new Dr(c,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([f,x],v=>{a=a.add(v.Cr)})}),Ie.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,c=a.length+1;let f=a;ct.isDocumentKey(f)||(f=f.child(""));const x=new Dr(new ct(f),0);let v=new Tr(Yt);return this.Mr.forEachWhile(_=>{const E=_.key.path;return!!a.isPrefixOf(E)&&(E.length===c&&(v=v.add(_.Cr)),!0)},x),Ie.resolve(this.Br(v))}Br(e){const t=[];return e.forEach(a=>{const c=this.Or(a);c!==null&&t.push(c)}),t}removeMutationBatch(e,t){ln(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Ie.forEach(t.mutations,c=>{const f=new Dr(c.key,t.batchId);return a=a.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Mr=a})}qn(e){}containsKey(e,t){const a=new Dr(t,0),c=this.Mr.firstAfterOrEqual(a);return Ie.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.kr=e,this.docs=function(){return new qn(ct.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,c=this.docs.get(a),f=c?c.size:0,x=this.kr(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:x}),this.size+=x-f,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return Ie.resolve(a?a.document.mutableCopy():ni.newInvalidDocument(t))}getEntries(e,t){let a=La();return t.forEach(c=>{const f=this.docs.get(c);a=a.insert(c,f?f.document.mutableCopy():ni.newInvalidDocument(c))}),Ie.resolve(a)}getDocumentsMatchingQuery(e,t,a,c){let f=La();const x=t.path,v=new ct(x.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(v);for(;_.hasNext();){const{key:E,value:{document:C}}=_.getNext();if(!x.isPrefixOf(E.path))break;E.path.length>x.length+1||A3(_3(C),a)<=0||(c.has(C.key)||zf(t,C))&&(f=f.insert(C.key,C.mutableCopy()))}return Ie.resolve(f)}getAllFromCollectionGroup(e,t,a,c){yt()}qr(e,t){return Ie.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new QI(this)}getSize(e){return Ie.resolve(this.size)}}class QI extends jI{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((a,c)=>{c.isValidDocument()?t.push(this.Ir.addEntry(e,c)):this.Ir.removeEntry(a)}),Ie.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.persistence=e,this.Qr=new al(t=>cg(t),ug),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.$r=0,this.Kr=new yg,this.targetCount=0,this.Ur=oc.Kn()}forEachTarget(e,t){return this.Qr.forEach((a,c)=>t(c)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.$r&&(this.$r=t),Ie.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new oc(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.zn(t),Ie.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,a){let c=0;const f=[];return this.Qr.forEach((x,v)=>{v.sequenceNumber<=t&&a.get(v.targetId)===null&&(this.Qr.delete(x),f.push(this.removeMatchingKeysForTargetId(e,v.targetId)),c++)}),Ie.waitFor(f).next(()=>c)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){const a=this.Qr.get(t)||null;return Ie.resolve(a)}addMatchingKeys(e,t,a){return this.Kr.yr(t,a),Ie.resolve()}removeMatchingKeys(e,t,a){this.Kr.Sr(t,a);const c=this.persistence.referenceDelegate,f=[];return c&&t.forEach(x=>{f.push(c.markPotentiallyOrphaned(e,x))}),Ie.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){const a=this.Kr.vr(t);return Ie.resolve(a)}containsKey(e,t){return Ie.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Uf(0),this.zr=!1,this.zr=!0,this.jr=new qI,this.referenceDelegate=e(this),this.Hr=new WI(this),this.indexManager=new OI,this.remoteDocumentCache=function(c){return new XI(c)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new DI(t),this.Yr=new HI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Wr[e.toKey()];return a||(a=new YI(t,this.referenceDelegate),this.Wr[e.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,a){Ke("MemoryPersistence","Starting transaction:",e);const c=new KI(this.Gr.next());return this.referenceDelegate.Zr(),a(c).next(f=>this.referenceDelegate.Xr(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}ei(e,t){return Ie.or(Object.values(this.Wr).map(a=>()=>a.containsKey(e,t)))}}class KI extends b3{constructor(e){super(),this.currentSequenceNumber=e}}class xg{constructor(e){this.persistence=e,this.ti=new yg,this.ni=null}static ri(e){return new xg(e)}get ii(){if(this.ni)return this.ni;throw yt()}addReference(e,t,a){return this.ti.addReference(a,t),this.ii.delete(a.toString()),Ie.resolve()}removeReference(e,t,a){return this.ti.removeReference(a,t),this.ii.add(a.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(c=>this.ii.add(c.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(f=>this.ii.add(f.toString()))}).next(()=>a.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.ii,a=>{const c=ct.fromPath(a);return this.si(e,c).next(f=>{f||t.removeEntry(c,_t.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(a=>{a?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Ie.or([()=>Ie.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Tf{constructor(e,t){this.persistence=e,this.oi=new al(a=>S3(a.path),(a,c)=>a.isEqual(c)),this.garbageCollector=VI(this,t)}static ri(e,t){return new Tf(e,t)}Zr(){}Xr(e){return Ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>t.next(c=>a+c))}sr(e){let t=0;return this.rr(e,a=>{t++}).next(()=>t)}rr(e,t){return Ie.forEach(this.oi,(a,c)=>this.ar(e,a,c).next(f=>f?Ie.resolve():t(c)))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const c=this.persistence.getRemoteDocumentCache(),f=c.newChangeBuffer();return c.qr(e,x=>this.ar(e,x,t).next(v=>{v||(a++,f.removeEntry(x,_t.min()))})).next(()=>f.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),Ie.resolve()}removeReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Ie.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nf(e.data.value)),t}ar(e,t,a){return Ie.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.oi.get(t);return Ie.resolve(c!==void 0&&c>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t,a,c){this.targetId=e,this.fromCache=t,this.Hi=a,this.Ji=c}static Yi(e,t){let a=Ht(),c=Ht();for(const f of t.docChanges)switch(f.type){case 0:a=a.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new Eg(e,t.fromCache,a,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Wb()?8:T3(ri())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,a,c){const f={result:null};return this.rs(e,t).next(x=>{f.result=x}).next(()=>{if(!f.result)return this.ss(e,t,c,a).next(x=>{f.result=x})}).next(()=>{if(f.result)return;const x=new ZI;return this._s(e,t,x).next(v=>{if(f.result=v,this.Xi)return this.us(e,t,x,v.size)})}).next(()=>f.result)}us(e,t,a,c){return a.documentReadCount<this.es?(Hl()<=zt.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",Gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ie.resolve()):(Hl()<=zt.DEBUG&&Ke("QueryEngine","Query:",Gl(t),"scans",a.documentReadCount,"local documents and returns",c,"documents as results."),a.documentReadCount>this.ts*c?(Hl()<=zt.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",Gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qs(t))):Ie.resolve())}rs(e,t){if(Ly(t))return Ie.resolve(null);let a=Qs(t);return this.indexManager.getIndexType(e,a).next(c=>c===0?null:(t.limit!==null&&c===1&&(t=_1(t,null,"F"),a=Qs(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(f=>{const x=Ht(...f);return this.ns.getDocuments(e,x).next(v=>this.indexManager.getMinOffset(e,a).next(_=>{const E=this.cs(t,v);return this.ls(t,E,x,_.readTime)?this.rs(e,_1(t,null,"F")):this.hs(e,E,t,_)}))})))}ss(e,t,a,c){return Ly(t)||c.isEqual(_t.min())?Ie.resolve(null):this.ns.getDocuments(e,a).next(f=>{const x=this.cs(t,f);return this.ls(t,x,a,c)?Ie.resolve(null):(Hl()<=zt.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Gl(t)),this.hs(e,x,t,w3(c,Au)).next(v=>v))})}cs(e,t){let a=new Tr(cw(e));return t.forEach((c,f)=>{zf(e,f)&&(a=a.add(f))}),a}ls(e,t,a,c){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const f=e.limitType==="F"?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}_s(e,t,a){return Hl()<=zt.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",Gl(t)),this.ns.getDocumentsMatchingQuery(e,t,wo.min(),a)}hs(e,t,a,c){return this.ns.getDocumentsMatchingQuery(e,a,c).next(f=>(t.forEach(x=>{f=f.insert(x.key,x)}),f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="LocalStore",JI=3e8;class e4{constructor(e,t,a,c){this.persistence=e,this.Ps=t,this.serializer=c,this.Ts=new qn(Yt),this.Is=new al(f=>cg(f),ug),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(a)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function t4(i,e,t,a){return new e4(i,e,t,a)}async function Mw(i,e){const t=Tt(i);return await t.persistence.runTransaction("Handle user change","readonly",a=>{let c;return t.mutationQueue.getAllMutationBatches(a).next(f=>(c=f,t.As(e),t.mutationQueue.getAllMutationBatches(a))).next(f=>{const x=[],v=[];let _=Ht();for(const E of c){x.push(E.batchId);for(const C of E.mutations)_=_.add(C.key)}for(const E of f){v.push(E.batchId);for(const C of E.mutations)_=_.add(C.key)}return t.localDocuments.getDocuments(a,_).next(E=>({Rs:E,removedBatchIds:x,addedBatchIds:v}))})})}function n4(i,e){const t=Tt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const c=e.batch.keys(),f=t.ds.newChangeBuffer({trackRemovals:!0});return function(v,_,E,C){const R=E.batch,k=R.keys();let j=Ie.resolve();return k.forEach(G=>{j=j.next(()=>C.getEntry(_,G)).next(J=>{const W=E.docVersions.get(G);ln(W!==null),J.version.compareTo(W)<0&&(R.applyToRemoteDocument(J,E),J.isValidDocument()&&(J.setReadTime(E.commitVersion),C.addEntry(J)))})}),j.next(()=>v.mutationQueue.removeMutationBatch(_,R))}(t,a,e,f).next(()=>f.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(v){let _=Ht();for(let E=0;E<v.mutationResults.length;++E)v.mutationResults[E].transformResults.length>0&&(_=_.add(v.batch.mutations[E].key));return _}(e))).next(()=>t.localDocuments.getDocuments(a,c))})}function Ow(i){const e=Tt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function r4(i,e){const t=Tt(i),a=e.snapshotVersion;let c=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const x=t.ds.newChangeBuffer({trackRemovals:!0});c=t.Ts;const v=[];e.targetChanges.forEach((C,R)=>{const k=c.get(R);if(!k)return;v.push(t.Hr.removeMatchingKeys(f,C.removedDocuments,R).next(()=>t.Hr.addMatchingKeys(f,C.addedDocuments,R)));let j=k.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(R)!==null?j=j.withResumeToken(qr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):C.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(C.resumeToken,a)),c=c.insert(R,j),function(J,W,he){return J.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=JI?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0}(k,j,C)&&v.push(t.Hr.updateTargetData(f,j))});let _=La(),E=Ht();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(f,C))}),v.push(i4(f,x,e.documentUpdates).next(C=>{_=C.Vs,E=C.fs})),!a.isEqual(_t.min())){const C=t.Hr.getLastRemoteSnapshotVersion(f).next(R=>t.Hr.setTargetsMetadata(f,f.currentSequenceNumber,a));v.push(C)}return Ie.waitFor(v).next(()=>x.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,_,E)).next(()=>_)}).then(f=>(t.Ts=c,f))}function i4(i,e,t){let a=Ht(),c=Ht();return t.forEach(f=>a=a.add(f)),e.getEntries(i,a).next(f=>{let x=La();return t.forEach((v,_)=>{const E=f.get(v);_.isFoundDocument()!==E.isFoundDocument()&&(c=c.add(v)),_.isNoDocument()&&_.version.isEqual(_t.min())?(e.removeEntry(v,_.readTime),x=x.insert(v,_)):!E.isValidDocument()||_.version.compareTo(E.version)>0||_.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(_),x=x.insert(v,_)):Ke(wg,"Ignoring outdated watch update for ",v,". Current version:",E.version," Watch version:",_.version)}),{Vs:x,fs:c}})}function s4(i,e){const t=Tt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=ag),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function a4(i,e){const t=Tt(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let c;return t.Hr.getTargetData(a,e).next(f=>f?(c=f,Ie.resolve(c)):t.Hr.allocateTargetId(a).next(x=>(c=new fo(e,x,"TargetPurposeListen",a.currentSequenceNumber),t.Hr.addTargetData(a,c).next(()=>c))))}).then(a=>{const c=t.Ts.get(a.targetId);return(c===null||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(a.targetId,a),t.Is.set(e,a.targetId)),a})}async function C1(i,e,t){const a=Tt(i),c=a.Ts.get(e),f=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",f,x=>a.persistence.referenceDelegate.removeTarget(x,c))}catch(x){if(!mc(x))throw x;Ke(wg,`Failed to update sequence numbers for target ${e}: ${x}`)}a.Ts=a.Ts.remove(e),a.Is.delete(c.target)}function Xy(i,e,t){const a=Tt(i);let c=_t.min(),f=Ht();return a.persistence.runTransaction("Execute query","readwrite",x=>function(_,E,C){const R=Tt(_),k=R.Is.get(C);return k!==void 0?Ie.resolve(R.Ts.get(k)):R.Hr.getTargetData(E,C)}(a,x,Qs(e)).next(v=>{if(v)return c=v.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(x,v.targetId).next(_=>{f=_})}).next(()=>a.Ps.getDocumentsMatchingQuery(x,e,t?c:_t.min(),t?f:Ht())).next(v=>(o4(a,Y3(e),v),{documents:v,gs:f})))}function o4(i,e,t){let a=i.Es.get(e)||_t.min();t.forEach((c,f)=>{f.readTime.compareTo(a)>0&&(a=f.readTime)}),i.Es.set(e,a)}class Qy{constructor(){this.activeTargetIds=$3()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l4{constructor(){this.ho=new Qy,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,a){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Qy,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="ConnectivityMonitor";class Ky{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ke(Wy,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ke(Wy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function S1(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="RestConnection",u4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class h4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${a}/databases/${c}`,this.wo=this.databaseId.database===xf?`project_id=${a}`:`project_id=${a}&database_id=${c}`}So(e,t,a,c,f){const x=S1(),v=this.bo(e,t.toUriEncodedString());Ke(e1,`Sending RPC '${e}' ${x}:`,v,a);const _={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(_,c,f),this.vo(e,v,_,a).then(E=>(Ke(e1,`Received RPC '${e}' ${x}: `,E),E),E=>{throw rc(e1,`RPC '${e}' ${x} failed with error: `,E,"url: ",v,"request:",a),E})}Co(e,t,a,c,f,x){return this.So(e,t,a,c,f)}Do(e,t,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,f)=>e[f]=c),a&&a.headers.forEach((c,f)=>e[f]=c)}bo(e,t){const a=u4[e];return`${this.po}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="WebChannelConnection";class d4 extends h4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,a,c){const f=S1();return new Promise((x,v)=>{const _=new UE;_.setWithCredentials(!0),_.listenOnce(VE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case tf.NO_ERROR:const C=_.getResponseJson();Ke(ei,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(C)),x(C);break;case tf.TIMEOUT:Ke(ei,`RPC '${e}' ${f} timed out`),v(new $e(Se.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const R=_.getStatus();if(Ke(ei,`RPC '${e}' ${f} failed with status:`,R,"response text:",_.getResponseText()),R>0){let k=_.getResponseJson();Array.isArray(k)&&(k=k[0]);const j=k==null?void 0:k.error;if(j&&j.status&&j.message){const G=function(W){const he=W.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(he)>=0?he:Se.UNKNOWN}(j.status);v(new $e(G,j.message))}else v(new $e(Se.UNKNOWN,"Server responded with status "+_.getStatus()))}else v(new $e(Se.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{Ke(ei,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(c);Ke(ei,`RPC '${e}' ${f} sending request:`,c),_.send(t,"POST",E,a,15)})}Wo(e,t,a){const c=S1(),f=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],x=zE(),v=FE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(_.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Do(_.initMessageHeaders,t,a),_.encodeInitMessageHeaders=!0;const C=f.join("");Ke(ei,`Creating RPC '${e}' stream ${c}: ${C}`,_);const R=x.createWebChannel(C,_);let k=!1,j=!1;const G=new f4({Fo:W=>{j?Ke(ei,`Not sending because RPC '${e}' stream ${c} is closed:`,W):(k||(Ke(ei,`Opening RPC '${e}' stream ${c} transport.`),R.open(),k=!0),Ke(ei,`RPC '${e}' stream ${c} sending:`,W),R.send(W))},Mo:()=>R.close()}),J=(W,he,fe)=>{W.listen(he,re=>{try{fe(re)}catch(_e){setTimeout(()=>{throw _e},0)}})};return J(R,cu.EventType.OPEN,()=>{j||(Ke(ei,`RPC '${e}' stream ${c} transport opened.`),G.Qo())}),J(R,cu.EventType.CLOSE,()=>{j||(j=!0,Ke(ei,`RPC '${e}' stream ${c} transport closed`),G.Ko())}),J(R,cu.EventType.ERROR,W=>{j||(j=!0,rc(ei,`RPC '${e}' stream ${c} transport errored:`,W),G.Ko(new $e(Se.UNAVAILABLE,"The operation could not be completed")))}),J(R,cu.EventType.MESSAGE,W=>{var he;if(!j){const fe=W.data[0];ln(!!fe);const re=fe,_e=(re==null?void 0:re.error)||((he=re[0])===null||he===void 0?void 0:he.error);if(_e){Ke(ei,`RPC '${e}' stream ${c} received error:`,_e);const je=_e.status;let Ue=function(P){const Y=mr[P];if(Y!==void 0)return ww(Y)}(je),z=_e.message;Ue===void 0&&(Ue=Se.INTERNAL,z="Unknown error status: "+je+" with message "+_e.message),j=!0,G.Ko(new $e(Ue,z)),R.close()}else Ke(ei,`RPC '${e}' stream ${c} received:`,fe),G.Uo(fe)}}),J(v,jE.STAT_EVENT,W=>{W.stat===m1.PROXY?Ke(ei,`RPC '${e}' stream ${c} detected buffering proxy`):W.stat===m1.NOPROXY&&Ke(ei,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{G.$o()},0),G}}function t1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(i){return new yI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,t,a=1e3,c=1.5,f=6e4){this.Ti=e,this.timerId=t,this.Go=a,this.zo=c,this.jo=f,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),c=Math.max(0,t-a);c>0&&Ke("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,c,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="PersistentStream";class kw{constructor(e,t,a,c,f,x,v,_){this.Ti=e,this.n_=a,this.r_=c,this.connection=f,this.authCredentialsProvider=x,this.appCheckCredentialsProvider=v,this.listener=_,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Lw(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(Oa(t.toString()),Oa("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,c])=>{this.i_===t&&this.V_(a,c)},a=>{e(()=>{const c=new $e(Se.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(c)})})}V_(e,t){const a=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(c=>{a(()=>this.m_(c))}),this.stream.onMessage(c=>{a(()=>++this.__==1?this.g_(c):this.onNext(c))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Ke(Zy,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(Ke(Zy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class g4 extends kw{constructor(e,t,a,c,f,x){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,c,x),this.serializer=f}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=wI(this.serializer,e),a=function(f){if(!("targetChange"in f))return _t.min();const x=f.targetChange;return x.targetIds&&x.targetIds.length?_t.min():x.readTime?Ws(x.readTime):_t.min()}(e);return this.listener.p_(t,a)}y_(e){const t={};t.database=T1(this.serializer),t.addTarget=function(f,x){let v;const _=x.target;if(v=E1(_)?{documents:vI(f,_)}:{query:bI(f,_).ht},v.targetId=x.targetId,x.resumeToken.approximateByteSize()>0){v.resumeToken=vw(f,x.resumeToken);const E=A1(f,x.expectedCount);E!==null&&(v.expectedCount=E)}else if(x.snapshotVersion.compareTo(_t.min())>0){v.readTime=bf(f,x.snapshotVersion.toTimestamp());const E=A1(f,x.expectedCount);E!==null&&(v.expectedCount=E)}return v}(this.serializer,e);const a=CI(this.serializer,e);a&&(t.labels=a),this.I_(t)}w_(e){const t={};t.database=T1(this.serializer),t.removeTarget=e,this.I_(t)}}class m4 extends kw{constructor(e,t,a,c,f,x){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,c,x),this.serializer=f}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return ln(!!e.streamToken),this.lastStreamToken=e.streamToken,ln(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ln(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=AI(e.writeResults,e.commitTime),a=Ws(e.commitTime);return this.listener.v_(a,t)}C_(){const e={};e.database=T1(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>_I(this.serializer,a))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{}class y4 extends p4{constructor(e,t,a,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=c,this.F_=!1}M_(){if(this.F_)throw new $e(Se.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,a,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,x])=>this.connection.So(e,v1(t,a),c,f,x)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new $e(Se.UNKNOWN,f.toString())})}Co(e,t,a,c,f){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([x,v])=>this.connection.Co(e,v1(t,a),c,x,v,f)).catch(x=>{throw x.name==="FirebaseError"?(x.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),x):new $e(Se.UNKNOWN,x.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class x4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Oa(t),this.N_=!1):Ke("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class E4{constructor(e,t,a,c,f){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=f,this.z_.To(x=>{a.enqueueAndForget(async()=>{ol(this)&&(Ke(nl,"Restarting streams for network reachability change."),await async function(_){const E=Tt(_);E.W_.add(4),await Vu(E),E.j_.set("Unknown"),E.W_.delete(4),await Xf(E)}(this))})}),this.j_=new x4(a,c)}}async function Xf(i){if(ol(i))for(const e of i.G_)await e(!0)}async function Vu(i){for(const e of i.G_)await e(!1)}function Pw(i,e){const t=Tt(i);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),bg(t)?vg(t):yc(t).c_()&&Ag(t,e))}function _g(i,e){const t=Tt(i),a=yc(t);t.U_.delete(e),a.c_()&&Bw(t,e),t.U_.size===0&&(a.c_()?a.P_():ol(t)&&t.j_.set("Unknown"))}function Ag(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yc(i).y_(e)}function Bw(i,e){i.H_.Ne(e),yc(i).w_(e)}function vg(i){i.H_=new dI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.U_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),yc(i).start(),i.j_.B_()}function bg(i){return ol(i)&&!yc(i).u_()&&i.U_.size>0}function ol(i){return Tt(i).W_.size===0}function Uw(i){i.H_=void 0}async function w4(i){i.j_.set("Online")}async function _4(i){i.U_.forEach((e,t)=>{Ag(i,e)})}async function A4(i,e){Uw(i),bg(i)?(i.j_.q_(e),vg(i)):i.j_.set("Unknown")}async function v4(i,e,t){if(i.j_.set("Online"),e instanceof Aw&&e.state===2&&e.cause)try{await async function(c,f){const x=f.cause;for(const v of f.targetIds)c.U_.has(v)&&(await c.remoteSyncer.rejectListen(v,x),c.U_.delete(v),c.H_.removeTarget(v))}(i,e)}catch(a){Ke(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Cf(i,a)}else if(e instanceof af?i.H_.We(e):e instanceof _w?i.H_.Ze(e):i.H_.je(e),!t.isEqual(_t.min()))try{const a=await Ow(i.localStore);t.compareTo(a)>=0&&await function(f,x){const v=f.H_.ot(x);return v.targetChanges.forEach((_,E)=>{if(_.resumeToken.approximateByteSize()>0){const C=f.U_.get(E);C&&f.U_.set(E,C.withResumeToken(_.resumeToken,x))}}),v.targetMismatches.forEach((_,E)=>{const C=f.U_.get(_);if(!C)return;f.U_.set(_,C.withResumeToken(qr.EMPTY_BYTE_STRING,C.snapshotVersion)),Bw(f,_);const R=new fo(C.target,_,E,C.sequenceNumber);Ag(f,R)}),f.remoteSyncer.applyRemoteEvent(v)}(i,t)}catch(a){Ke(nl,"Failed to raise snapshot:",a),await Cf(i,a)}}async function Cf(i,e,t){if(!mc(e))throw e;i.W_.add(1),await Vu(i),i.j_.set("Offline"),t||(t=()=>Ow(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ke(nl,"Retrying IndexedDB access"),await t(),i.W_.delete(1),await Xf(i)})}function Vw(i,e){return e().catch(t=>Cf(i,t,e))}async function Qf(i){const e=Tt(i),t=bo(e);let a=e.K_.length>0?e.K_[e.K_.length-1].batchId:ag;for(;b4(e);)try{const c=await s4(e.localStore,a);if(c===null){e.K_.length===0&&t.P_();break}a=c.batchId,T4(e,c)}catch(c){await Cf(e,c)}jw(e)&&Fw(e)}function b4(i){return ol(i)&&i.K_.length<10}function T4(i,e){i.K_.push(e);const t=bo(i);t.c_()&&t.S_&&t.b_(e.mutations)}function jw(i){return ol(i)&&!bo(i).u_()&&i.K_.length>0}function Fw(i){bo(i).start()}async function C4(i){bo(i).C_()}async function S4(i){const e=bo(i);for(const t of i.K_)e.b_(t.mutations)}async function I4(i,e,t){const a=i.K_.shift(),c=gg.from(a,e,t);await Vw(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),await Qf(i)}async function N4(i,e){e&&bo(i).S_&&await async function(a,c){if(function(x){return uI(x)&&x!==Se.ABORTED}(c.code)){const f=a.K_.shift();bo(a).h_(),await Vw(a,()=>a.remoteSyncer.rejectFailedWrite(f.batchId,c)),await Qf(a)}}(i,e),jw(i)&&Fw(i)}async function $y(i,e){const t=Tt(i);t.asyncQueue.verifyOperationInProgress(),Ke(nl,"RemoteStore received new credentials");const a=ol(t);t.W_.add(3),await Vu(t),a&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Xf(t)}async function R4(i,e){const t=Tt(i);e?(t.W_.delete(2),await Xf(t)):e||(t.W_.add(2),await Vu(t),t.j_.set("Unknown"))}function yc(i){return i.J_||(i.J_=function(t,a,c){const f=Tt(t);return f.M_(),new g4(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{xo:w4.bind(null,i),No:_4.bind(null,i),Lo:A4.bind(null,i),p_:v4.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),bg(i)?vg(i):i.j_.set("Unknown")):(await i.J_.stop(),Uw(i))})),i.J_}function bo(i){return i.Y_||(i.Y_=function(t,a,c){const f=Tt(t);return f.M_(),new m4(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:C4.bind(null,i),Lo:N4.bind(null,i),D_:S4.bind(null,i),v_:I4.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await Qf(i)):(await i.Y_.stop(),i.K_.length>0&&(Ke(nl,`Stopping write stream with ${i.K_.length} pending writes`),i.K_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,a,c,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=c,this.removalCallback=f,this.deferred=new Ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(x=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,c,f){const x=Date.now()+a,v=new Tg(e,t,x,c,f);return v.start(a),v}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $e(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(i,e){if(Oa("AsyncQueue",`${e}: ${i}`),mc(i))return new $e(Se.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{static emptySet(e){return new $l(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||ct.comparator(t.key,a.key):(t,a)=>ct.comparator(t.key,a.key),this.keyedMap=uu(),this.sortedSet=new qn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $l)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new $l;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.Z_=new qn(ct.comparator)}track(e){const t=e.doc.key,a=this.Z_.get(t);a?e.type!==0&&a.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&a.type!==1?this.Z_=this.Z_.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Z_=this.Z_.remove(t):e.type===1&&a.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):yt():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,a)=>{e.push(a)}),e}}class lc{constructor(e,t,a,c,f,x,v,_,E){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=f,this.fromCache=x,this.syncStateChanged=v,this.excludesMetadataChanges=_,this.hasCachedResults=E}static fromInitialDocuments(e,t,a,c,f){const x=[];return t.forEach(v=>{x.push({type:0,doc:v})}),new lc(e,t,$l.emptySet(t),x,a,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==a[c].type||!t[c].doc.isEqual(a[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class M4{constructor(){this.queries=ex(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,a){const c=Tt(t),f=c.queries;c.queries=ex(),f.forEach((x,v)=>{for(const _ of v.ta)_.onError(a)})})(this,new $e(Se.ABORTED,"Firestore shutting down"))}}function ex(){return new al(i=>lw(i),Ff)}async function zw(i,e){const t=Tt(i);let a=3;const c=e.query;let f=t.queries.get(c);f?!f.na()&&e.ra()&&(a=2):(f=new D4,a=e.ra()?0:1);try{switch(a){case 0:f.ea=await t.onListen(c,!0);break;case 1:f.ea=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(x){const v=Cg(x,`Initialization of query '${Gl(e.query)}' failed`);return void e.onError(v)}t.queries.set(c,f),f.ta.push(e),e.sa(t.onlineState),f.ea&&e.oa(f.ea)&&Sg(t)}async function Hw(i,e){const t=Tt(i),a=e.query;let c=3;const f=t.queries.get(a);if(f){const x=f.ta.indexOf(e);x>=0&&(f.ta.splice(x,1),f.ta.length===0?c=e.ra()?0:1:!f.na()&&e.ra()&&(c=2))}switch(c){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function O4(i,e){const t=Tt(i);let a=!1;for(const c of e){const f=c.query,x=t.queries.get(f);if(x){for(const v of x.ta)v.oa(c)&&(a=!0);x.ea=c}}a&&Sg(t)}function L4(i,e,t){const a=Tt(i),c=a.queries.get(e);if(c)for(const f of c.ta)f.onError(t);a.queries.delete(e)}function Sg(i){i.ia.forEach(e=>{e.next()})}var I1,tx;(tx=I1||(I1={}))._a="default",tx.Cache="cache";class Gw{constructor(e,t,a){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(e){if(!this.options.includeMetadataChanges){const a=[];for(const c of e.docChanges)c.type!==3&&a.push(c);e=new lc(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const a=t!=="Offline";return(!this.options.Ta||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==I1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.key=e}}class Yw{constructor(e){this.key=e}}class k4{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ht(),this.mutatedKeys=Ht(),this.ya=cw(e),this.wa=new $l(this.ya)}get Sa(){return this.fa}ba(e,t){const a=t?t.Da:new Jy,c=t?t.wa:this.wa;let f=t?t.mutatedKeys:this.mutatedKeys,x=c,v=!1;const _=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,E=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((C,R)=>{const k=c.get(C),j=zf(this.query,R)?R:null,G=!!k&&this.mutatedKeys.has(k.key),J=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let W=!1;k&&j?k.data.isEqual(j.data)?G!==J&&(a.track({type:3,doc:j}),W=!0):this.va(k,j)||(a.track({type:2,doc:j}),W=!0,(_&&this.ya(j,_)>0||E&&this.ya(j,E)<0)&&(v=!0)):!k&&j?(a.track({type:0,doc:j}),W=!0):k&&!j&&(a.track({type:1,doc:k}),W=!0,(_||E)&&(v=!0)),W&&(j?(x=x.add(j),f=J?f.add(C):f.delete(C)):(x=x.delete(C),f=f.delete(C)))}),this.query.limit!==null)for(;x.size>this.query.limit;){const C=this.query.limitType==="F"?x.last():x.first();x=x.delete(C.key),f=f.delete(C.key),a.track({type:1,doc:C})}return{wa:x,Da:a,ls:v,mutatedKeys:f}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,c){const f=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const x=e.Da.X_();x.sort((C,R)=>function(j,G){const J=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return J(j)-J(G)}(C.type,R.type)||this.ya(C.doc,R.doc)),this.Ca(a),c=c!=null&&c;const v=t&&!c?this.Fa():[],_=this.pa.size===0&&this.current&&!c?1:0,E=_!==this.ga;return this.ga=_,x.length!==0||E?{snapshot:new lc(this.query,e.wa,f,x,e.mutatedKeys,_===0,E,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:v}:{Ma:v}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Jy,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ht(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const t=[];return e.forEach(a=>{this.pa.has(a)||t.push(new Yw(a))}),this.pa.forEach(a=>{e.has(a)||t.push(new qw(a))}),t}Oa(e){this.fa=e.gs,this.pa=Ht();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return lc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ig="SyncEngine";class P4{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class B4{constructor(e){this.key=e,this.Ba=!1}}class U4{constructor(e,t,a,c,f,x){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=x,this.La={},this.ka=new al(v=>lw(v),Ff),this.qa=new Map,this.Qa=new Set,this.$a=new qn(ct.comparator),this.Ka=new Map,this.Ua=new yg,this.Wa={},this.Ga=new Map,this.za=oc.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function V4(i,e,t=!0){const a=$w(i);let c;const f=a.ka.get(e);return f?(a.sharedClientState.addLocalQueryTarget(f.targetId),c=f.view.Na()):c=await Xw(a,e,t,!0),c}async function j4(i,e){const t=$w(i);await Xw(t,e,!0,!1)}async function Xw(i,e,t,a){const c=await a4(i.localStore,Qs(e)),f=c.targetId,x=i.sharedClientState.addLocalQueryTarget(f,t);let v;return a&&(v=await F4(i,e,f,x==="current",c.resumeToken)),i.isPrimaryClient&&t&&Pw(i.remoteStore,c),v}async function F4(i,e,t,a,c){i.Ha=(R,k,j)=>async function(J,W,he,fe){let re=W.view.ba(he);re.ls&&(re=await Xy(J.localStore,W.query,!1).then(({documents:z})=>W.view.ba(z,re)));const _e=fe&&fe.targetChanges.get(W.targetId),je=fe&&fe.targetMismatches.get(W.targetId)!=null,Ue=W.view.applyChanges(re,J.isPrimaryClient,_e,je);return rx(J,W.targetId,Ue.Ma),Ue.snapshot}(i,R,k,j);const f=await Xy(i.localStore,e,!0),x=new k4(e,f.gs),v=x.ba(f.documents),_=Uu.createSynthesizedTargetChangeForCurrentChange(t,a&&i.onlineState!=="Offline",c),E=x.applyChanges(v,i.isPrimaryClient,_);rx(i,t,E.Ma);const C=new P4(e,t,x);return i.ka.set(e,C),i.qa.has(t)?i.qa.get(t).push(e):i.qa.set(t,[e]),E.snapshot}async function z4(i,e,t){const a=Tt(i),c=a.ka.get(e),f=a.qa.get(c.targetId);if(f.length>1)return a.qa.set(c.targetId,f.filter(x=>!Ff(x,e))),void a.ka.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(c.targetId),a.sharedClientState.isActiveQueryTarget(c.targetId)||await C1(a.localStore,c.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(c.targetId),t&&_g(a.remoteStore,c.targetId),N1(a,c.targetId)}).catch(gc)):(N1(a,c.targetId),await C1(a.localStore,c.targetId,!0))}async function H4(i,e){const t=Tt(i),a=t.ka.get(e),c=t.qa.get(a.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),_g(t.remoteStore,a.targetId))}async function G4(i,e,t){const a=Z4(i);try{const c=await function(x,v){const _=Tt(x),E=br.now(),C=v.reduce((j,G)=>j.add(G.key),Ht());let R,k;return _.persistence.runTransaction("Locally write mutations","readwrite",j=>{let G=La(),J=Ht();return _.ds.getEntries(j,C).next(W=>{G=W,G.forEach((he,fe)=>{fe.isValidDocument()||(J=J.add(he))})}).next(()=>_.localDocuments.getOverlayedDocuments(j,G)).next(W=>{R=W;const he=[];for(const fe of v){const re=sI(fe,R.get(fe.key).overlayedDocument);re!=null&&he.push(new No(fe.key,re,ew(re.value.mapValue),cs.exists(!0)))}return _.mutationQueue.addMutationBatch(j,E,he,v)}).next(W=>{k=W;const he=W.applyToLocalDocumentSet(R,J);return _.documentOverlayCache.saveOverlays(j,W.batchId,he)})}).then(()=>({batchId:k.batchId,changes:hw(R)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(c.batchId),function(x,v,_){let E=x.Wa[x.currentUser.toKey()];E||(E=new qn(Yt)),E=E.insert(v,_),x.Wa[x.currentUser.toKey()]=E}(a,c.batchId,t),await ju(a,c.changes),await Qf(a.remoteStore)}catch(c){const f=Cg(c,"Failed to persist write");t.reject(f)}}async function Qw(i,e){const t=Tt(i);try{const a=await r4(t.localStore,e);e.targetChanges.forEach((c,f)=>{const x=t.Ka.get(f);x&&(ln(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?x.Ba=!0:c.modifiedDocuments.size>0?ln(x.Ba):c.removedDocuments.size>0&&(ln(x.Ba),x.Ba=!1))}),await ju(t,a,e)}catch(a){await gc(a)}}function nx(i,e,t){const a=Tt(i);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const c=[];a.ka.forEach((f,x)=>{const v=x.view.sa(e);v.snapshot&&c.push(v.snapshot)}),function(x,v){const _=Tt(x);_.onlineState=v;let E=!1;_.queries.forEach((C,R)=>{for(const k of R.ta)k.sa(v)&&(E=!0)}),E&&Sg(_)}(a.eventManager,e),c.length&&a.La.p_(c),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function q4(i,e,t){const a=Tt(i);a.sharedClientState.updateQueryState(e,"rejected",t);const c=a.Ka.get(e),f=c&&c.key;if(f){let x=new qn(ct.comparator);x=x.insert(f,ni.newNoDocument(f,_t.min()));const v=Ht().add(f),_=new qf(_t.min(),new Map,new qn(Yt),x,v);await Qw(a,_),a.$a=a.$a.remove(f),a.Ka.delete(e),Ng(a)}else await C1(a.localStore,e,!1).then(()=>N1(a,e,t)).catch(gc)}async function Y4(i,e){const t=Tt(i),a=e.batch.batchId;try{const c=await n4(t.localStore,e);Kw(t,a,null),Ww(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await ju(t,c)}catch(c){await gc(c)}}async function X4(i,e,t){const a=Tt(i);try{const c=await function(x,v){const _=Tt(x);return _.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return _.mutationQueue.lookupMutationBatch(E,v).next(R=>(ln(R!==null),C=R.keys(),_.mutationQueue.removeMutationBatch(E,R))).next(()=>_.mutationQueue.performConsistencyCheck(E)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(E,C,v)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,C)).next(()=>_.localDocuments.getDocuments(E,C))})}(a.localStore,e);Kw(a,e,t),Ww(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await ju(a,c)}catch(c){await gc(c)}}function Ww(i,e){(i.Ga.get(e)||[]).forEach(t=>{t.resolve()}),i.Ga.delete(e)}function Kw(i,e,t){const a=Tt(i);let c=a.Wa[a.currentUser.toKey()];if(c){const f=c.get(e);f&&(t?f.reject(t):f.resolve(),c=c.remove(e)),a.Wa[a.currentUser.toKey()]=c}}function N1(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.qa.get(e))i.ka.delete(a),t&&i.La.Ja(a,t);i.qa.delete(e),i.isPrimaryClient&&i.Ua.br(e).forEach(a=>{i.Ua.containsKey(a)||Zw(i,a)})}function Zw(i,e){i.Qa.delete(e.path.canonicalString());const t=i.$a.get(e);t!==null&&(_g(i.remoteStore,t),i.$a=i.$a.remove(e),i.Ka.delete(t),Ng(i))}function rx(i,e,t){for(const a of t)a instanceof qw?(i.Ua.addReference(a.key,e),Q4(i,a)):a instanceof Yw?(Ke(Ig,"Document no longer in limbo: "+a.key),i.Ua.removeReference(a.key,e),i.Ua.containsKey(a.key)||Zw(i,a.key)):yt()}function Q4(i,e){const t=e.key,a=t.path.canonicalString();i.$a.get(t)||i.Qa.has(a)||(Ke(Ig,"New document in limbo: "+t),i.Qa.add(a),Ng(i))}function Ng(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const t=new ct(Sn.fromString(e)),a=i.za.next();i.Ka.set(a,new B4(t)),i.$a=i.$a.insert(t,a),Pw(i.remoteStore,new fo(Qs(hg(t.path)),a,"TargetPurposeLimboResolution",Uf.ae))}}async function ju(i,e,t){const a=Tt(i),c=[],f=[],x=[];a.ka.isEmpty()||(a.ka.forEach((v,_)=>{x.push(a.Ha(_,e,t).then(E=>{var C;if((E||t)&&a.isPrimaryClient){const R=E?!E.fromCache:(C=t==null?void 0:t.targetChanges.get(_.targetId))===null||C===void 0?void 0:C.current;a.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(E){c.push(E);const R=Eg.Yi(_.targetId,E);f.push(R)}}))}),await Promise.all(x),a.La.p_(c),await async function(_,E){const C=Tt(_);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>Ie.forEach(E,k=>Ie.forEach(k.Hi,j=>C.persistence.referenceDelegate.addReference(R,k.targetId,j)).next(()=>Ie.forEach(k.Ji,j=>C.persistence.referenceDelegate.removeReference(R,k.targetId,j)))))}catch(R){if(!mc(R))throw R;Ke(wg,"Failed to update sequence numbers: "+R)}for(const R of E){const k=R.targetId;if(!R.fromCache){const j=C.Ts.get(k),G=j.snapshotVersion,J=j.withLastLimboFreeSnapshotVersion(G);C.Ts=C.Ts.insert(k,J)}}}(a.localStore,f))}async function W4(i,e){const t=Tt(i);if(!t.currentUser.isEqual(e)){Ke(Ig,"User change. New user:",e.toKey());const a=await Mw(t.localStore,e);t.currentUser=e,function(f,x){f.Ga.forEach(v=>{v.forEach(_=>{_.reject(new $e(Se.CANCELLED,x))})}),f.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await ju(t,a.Rs)}}function K4(i,e){const t=Tt(i),a=t.Ka.get(e);if(a&&a.Ba)return Ht().add(a.key);{let c=Ht();const f=t.qa.get(e);if(!f)return c;for(const x of f){const v=t.ka.get(x);c=c.unionWith(v.view.Sa)}return c}}function $w(i){const e=Tt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q4.bind(null,e),e.La.p_=O4.bind(null,e.eventManager),e.La.Ja=L4.bind(null,e.eventManager),e}function Z4(i){const e=Tt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X4.bind(null,e),e}class Sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return t4(this.persistence,new $I,e.initialUser,this.serializer)}Xa(e){return new Dw(xg.ri,this.serializer)}Za(e){return new l4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sf.provider={build:()=>new Sf};class $4 extends Sf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){ln(this.persistence.referenceDelegate instanceof Tf);const a=this.persistence.referenceDelegate.garbageCollector;return new BI(a,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?bi.withCacheSize(this.cacheSizeBytes):bi.DEFAULT;return new Dw(a=>Tf.ri(a,t),this.serializer)}}class R1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>nx(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=W4.bind(null,this.syncEngine),await R4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M4}()}createDatastore(e){const t=Yf(e.databaseInfo.databaseId),a=function(f){return new d4(f)}(e.databaseInfo);return function(f,x,v,_){return new y4(f,x,v,_)}(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return function(a,c,f,x,v){return new E4(a,c,f,x,v)}(this.localStore,this.datastore,e.asyncQueue,t=>nx(this.syncEngine,t,0),function(){return Ky.D()?new Ky:new c4}())}createSyncEngine(e,t){return function(c,f,x,v,_,E,C){const R=new U4(c,f,x,v,_,E);return C&&(R.ja=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(c){const f=Tt(c);Ke(nl,"RemoteStore shutting down."),f.W_.add(5),await Vu(f),f.z_.shutdown(),f.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}R1.provider={build:()=>new R1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Oa("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="FirestoreClient";class J4{constructor(e,t,a,c,f){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=c,this.user=ti.UNAUTHENTICATED,this.clientId=GE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(a,async x=>{Ke(To,"Received user=",x.uid),await this.authCredentialListener(x),this.user=x}),this.appCheckCredentials.start(a,x=>(Ke(To,"Received new app check token=",x),this.appCheckCredentialListener(x,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Cg(t,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function n1(i,e){i.asyncQueue.verifyOperationInProgress(),Ke(To,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(async c=>{a.isEqual(c)||(await Mw(e.localStore,c),a=c)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function ix(i,e){i.asyncQueue.verifyOperationInProgress();const t=await eN(i);Ke(To,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(a=>$y(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,c)=>$y(e.remoteStore,c)),i._onlineComponents=e}async function eN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ke(To,"Using user provided OfflineComponentProvider");try{await n1(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(c){return c.name==="FirebaseError"?c.code===Se.FAILED_PRECONDITION||c.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(t))throw t;rc("Error using user provided cache. Falling back to memory cache: "+t),await n1(i,new Sf)}}else Ke(To,"Using default OfflineComponentProvider"),await n1(i,new $4(void 0));return i._offlineComponents}async function e_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ke(To,"Using user provided OnlineComponentProvider"),await ix(i,i._uninitializedComponentsProvider._online)):(Ke(To,"Using default OnlineComponentProvider"),await ix(i,new R1))),i._onlineComponents}function tN(i){return e_(i).then(e=>e.syncEngine)}async function t_(i){const e=await e_(i),t=e.eventManager;return t.onListen=V4.bind(null,e.syncEngine),t.onUnlisten=z4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=j4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=H4.bind(null,e.syncEngine),t}function nN(i,e,t={}){const a=new Ra;return i.asyncQueue.enqueueAndForget(async()=>function(f,x,v,_,E){const C=new Jw({next:k=>{C.su(),x.enqueueAndForget(()=>Hw(f,R));const j=k.docs.has(v);!j&&k.fromCache?E.reject(new $e(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&k.fromCache&&_&&_.source==="server"?E.reject(new $e(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(k)},error:k=>E.reject(k)}),R=new Gw(hg(v.path),C,{includeMetadataChanges:!0,Ta:!0});return zw(f,R)}(await t_(i),i.asyncQueue,e,t,a)),a.promise}function rN(i,e,t={}){const a=new Ra;return i.asyncQueue.enqueueAndForget(async()=>function(f,x,v,_,E){const C=new Jw({next:k=>{C.su(),x.enqueueAndForget(()=>Hw(f,R)),k.fromCache&&_.source==="server"?E.reject(new $e(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(k)},error:k=>E.reject(k)}),R=new Gw(v,C,{includeMetadataChanges:!0,Ta:!0});return zw(f,R)}(await t_(i),i.asyncQueue,e,t,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(i,e,t){if(!t)throw new $e(Se.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function iN(i,e,t,a){if(e===!0&&a===!0)throw new $e(Se.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ax(i){if(!ct.isDocumentKey(i))throw new $e(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ox(i){if(ct.isDocumentKey(i))throw new $e(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Wf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":yt()}function us(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new $e(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wf(i);throw new $e(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="firestore.googleapis.com",lx=!0;class cx{constructor(e){var t,a;if(e.host===void 0){if(e.ssl!==void 0)throw new $e(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=r_,this.ssl=lx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:lx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kI)throw new $e(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n_((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new $e(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new $e(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new $e(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,c){return a.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,t,a,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $e(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $e(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cx(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new f3;switch(a.type){case"firstParty":return new p3(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new $e(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const a=sx.get(t);a&&(Ke("ComponentProvider","Removing Datastore"),sx.delete(t),a.terminate())}(this),Promise.resolve()}}function sN(i,e,t,a={}){var c;const f=(i=us(i,Fu))._getSettings(),x=`${e}:${t}`;if(f.host!==r_&&f.host!==x&&rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},f),{host:x,ssl:!1})),a.mockUserToken){let v,_;if(typeof a.mockUserToken=="string")v=a.mockUserToken,_=ti.MOCK_USER;else{v=zb(a.mockUserToken,(c=i._app)===null||c===void 0?void 0:c.options.projectId);const E=a.mockUserToken.sub||a.mockUserToken.user_id;if(!E)throw new $e(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ti(E)}i._authCredentials=new d3(new HE(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ll(this.firestore,e,this._query)}}class hi{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hi(this.firestore,e,this._key)}}class xo extends ll{constructor(e,t,a){super(e,t,hg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hi(this.firestore,null,new ct(e))}withConverter(e){return new xo(this.firestore,e,this._path)}}function Mr(i,e,...t){if(i=Gr(i),Rg("collection","path",e),i instanceof Fu){const a=Sn.fromString(e,...t);return ox(a),new xo(i,null,a)}{if(!(i instanceof hi||i instanceof xo))throw new $e(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Sn.fromString(e,...t));return ox(a),new xo(i.firestore,null,a)}}function ux(i,e){if(i=us(i,Fu),Rg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $e(Se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ll(i,null,function(a){return new pc(Sn.emptyPath(),a)}(e))}function Wt(i,e,...t){if(i=Gr(i),arguments.length===1&&(e=GE.newId()),Rg("doc","path",e),i instanceof Fu){const a=Sn.fromString(e,...t);return ax(a),new hi(i,null,new ct(a))}{if(!(i instanceof hi||i instanceof xo))throw new $e(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Sn.fromString(e,...t));return ax(a),new hi(i.firestore,i instanceof xo?i.converter:null,new ct(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="AsyncQueue";class fx{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Lw(this,"async_queue_retry"),this.Su=()=>{const a=t1();a&&Ke(hx,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=e;const t=t1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=t1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ra;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!mc(e))throw e;Ke(hx,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(a=>{this.gu=a,this.pu=!1;const c=function(x){let v=x.message||"";return x.stack&&(v=x.stack.includes(x.message)?x.stack:x.message+`
`+x.stack),v}(a);throw Oa("INTERNAL UNHANDLED ERROR: ",c),a}).then(a=>(this.pu=!1,a))));return this.bu=t,t}enqueueAfterDelay(e,t,a){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const c=Tg.createAndSchedule(this,e,t,a,f=>this.Fu(f));return this.fu.push(c),c}Du(){this.gu&&yt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class cl extends Fu{constructor(e,t,a,c){super(e,t,a,c),this.type="firestore",this._queue=new fx,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fx(e),this._firestoreClient=void 0,await e}}}function ul(i,e){const t=typeof i=="object"?i:nE(),a=typeof i=="string"?i:xf,c=X1(t,"firestore").getImmediate({identifier:a});if(!c._initialized){const f=jb("firestore");f&&sN(c,...f)}return c}function Dg(i){if(i._terminated)throw new $e(Se.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||aN(i),i._firestoreClient}function aN(i){var e,t,a;const c=i._freezeSettings(),f=function(v,_,E,C){return new R3(v,_,E,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,n_(C.experimentalLongPollingOptions),C.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,c);i._componentsProvider||!((t=c.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((a=c.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(i._componentsProvider={_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider}),i._firestoreClient=new J4(i._authCredentials,i._appCheckCredentials,i._queue,f,i._componentsProvider&&function(v){const _=v==null?void 0:v._online.build();return{_offline:v==null?void 0:v._offline.build(_),_online:_}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cc(qr.fromBase64String(e))}catch(t){throw new $e(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cc(qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $e(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $e(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $e(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,c){if(a.length!==c.length)return!1;for(let f=0;f<a.length;++f)if(a[f]!==c[f])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=/^__.*__$/;class lN{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bu(e,this.data,t,this.fieldTransforms)}}class i_{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new No(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function s_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class kg{constructor(e,t,a,c,f,x){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=c,f===void 0&&this.Bu(),this.fieldTransforms=f||[],this.fieldMask=x||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new kg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:a,Qu:!1});return c.$u(e),c}Ku(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:a,Qu:!1});return c.Bu(),c}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return If(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(s_(this.Lu)&&oN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class cN{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Yf(e)}ju(e,t,a,c=!1){return new kg({Lu:e,methodName:t,zu:a,path:Hr.emptyPath(),Qu:!1,Gu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(i){const e=i._freezeSettings(),t=Yf(i._databaseId);return new cN(i._databaseId,!!e.ignoreUndefinedProperties,t)}function a_(i,e,t,a,c,f={}){const x=i.ju(f.merge||f.mergeFields?2:0,e,t,c);Pg("Data must be an object, but it was:",x,a);const v=o_(a,x);let _,E;if(f.merge)_=new ji(x.fieldMask),E=x.fieldTransforms;else if(f.mergeFields){const C=[];for(const R of f.mergeFields){const k=D1(e,R,t);if(!x.contains(k))throw new $e(Se.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);c_(C,k)||C.push(k)}_=new ji(C),E=x.fieldTransforms.filter(R=>_.covers(R.field))}else _=null,E=x.fieldTransforms;return new lN(new Ti(v),_,E)}class $f extends Mg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}function uN(i,e,t,a){const c=i.ju(1,e,t);Pg("Data must be an object, but it was:",c,a);const f=[],x=Ti.empty();Io(a,(_,E)=>{const C=Bg(e,_,t);E=Gr(E);const R=c.Ku(C);if(E instanceof $f)f.push(C);else{const k=zu(E,R);k!=null&&(f.push(C),x.set(C,k))}});const v=new ji(f);return new i_(x,v,c.fieldTransforms)}function hN(i,e,t,a,c,f){const x=i.ju(1,e,t),v=[D1(e,a,t)],_=[c];if(f.length%2!=0)throw new $e(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<f.length;k+=2)v.push(D1(e,f[k])),_.push(f[k+1]);const E=[],C=Ti.empty();for(let k=v.length-1;k>=0;--k)if(!c_(E,v[k])){const j=v[k];let G=_[k];G=Gr(G);const J=x.Ku(j);if(G instanceof $f)E.push(j);else{const W=zu(G,J);W!=null&&(E.push(j),C.set(j,W))}}const R=new ji(E);return new i_(C,R,x.fieldTransforms)}function fN(i,e,t,a=!1){return zu(t,i.ju(a?4:3,e))}function zu(i,e){if(l_(i=Gr(i)))return Pg("Unsupported field value:",e,i),o_(i,e);if(i instanceof Mg)return function(a,c){if(!s_(c.Lu))throw c.Wu(`${a._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Wu(`${a._methodName}() is not currently supported inside arrays`);const f=a._toFieldTransform(c);f&&c.fieldTransforms.push(f)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(a,c){const f=[];let x=0;for(const v of a){let _=zu(v,c.Uu(x));_==null&&(_={nullValue:"NULL_VALUE"}),f.push(_),x++}return{arrayValue:{values:f}}}(i,e)}return function(a,c){if((a=Gr(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return J3(c.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const f=br.fromDate(a);return{timestampValue:bf(c.serializer,f)}}if(a instanceof br){const f=new br(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:bf(c.serializer,f)}}if(a instanceof Og)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof cc)return{bytesValue:vw(c.serializer,a._byteString)};if(a instanceof hi){const f=c.databaseId,x=a.firestore._databaseId;if(!x.isEqual(f))throw c.Wu(`Document reference is for database ${x.projectId}/${x.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:pg(a.firestore._databaseId||c.databaseId,a._key.path)}}if(a instanceof Lg)return function(x,v){return{mapValue:{fields:{[$E]:{stringValue:JE},[Ef]:{arrayValue:{values:x.toArray().map(E=>{if(typeof E!="number")throw v.Wu("VectorValues must only contain numeric values.");return fg(v.serializer,E)})}}}}}}(a,c);throw c.Wu(`Unsupported field value: ${Wf(a)}`)}(i,e)}function o_(i,e){const t={};return YE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(i,(a,c)=>{const f=zu(c,e.qu(a));f!=null&&(t[a]=f)}),{mapValue:{fields:t}}}function l_(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof br||i instanceof Og||i instanceof cc||i instanceof hi||i instanceof Mg||i instanceof Lg)}function Pg(i,e,t){if(!l_(t)||!function(c){return typeof c=="object"&&c!==null&&(Object.getPrototypeOf(c)===Object.prototype||Object.getPrototypeOf(c)===null)}(t)){const a=Wf(t);throw a==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+a)}}function D1(i,e,t){if((e=Gr(e))instanceof Kf)return e._internalPath;if(typeof e=="string")return Bg(i,e);throw If("Field path arguments must be of type string or ",i,!1,void 0,t)}const dN=new RegExp("[~\\*/\\[\\]]");function Bg(i,e,t){if(e.search(dN)>=0)throw If(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Kf(...e.split("."))._internalPath}catch{throw If(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function If(i,e,t,a,c){const f=a&&!a.isEmpty(),x=c!==void 0;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let _="";return(f||x)&&(_+=" (found",f&&(_+=` in field ${a}`),x&&(_+=` in document ${c}`),_+=")"),new $e(Se.INVALID_ARGUMENT,v+i+_)}function c_(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t,a,c,f){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new hi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ug("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gN extends u_{data(){return super.data()}}function Ug(i,e){return typeof e=="string"?Bg(i,e):e instanceof Kf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new $e(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vg{}class pN extends Vg{}function Iu(i,e,...t){let a=[];e instanceof Vg&&a.push(e),a=a.concat(t),function(f){const x=f.filter(_=>_ instanceof jg).length,v=f.filter(_=>_ instanceof Jf).length;if(x>1||x>0&&v>0)throw new $e(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const c of a)i=c._apply(i);return i}class Jf extends pN{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Jf(e,t,a)}_apply(e){const t=this._parse(e);return h_(e._query,t),new ll(e.firestore,e.converter,w1(e._query,t))}_parse(e){const t=Zf(e.firestore);return function(f,x,v,_,E,C,R){let k;if(E.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new $e(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){gx(R,C);const G=[];for(const J of R)G.push(dx(_,f,J));k={arrayValue:{values:G}}}else k=dx(_,f,R)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||gx(R,C),k=fN(v,x,R,C==="in"||C==="not-in");return yr.create(E,C,k)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Nu(i,e,t){const a=e,c=Ug("where",i);return Jf._create(c,a,t)}class jg extends Vg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jg(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return t.length===1?t[0]:bs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(c,f){let x=c;const v=f.getFlattenedFilters();for(const _ of v)h_(x,_),x=w1(x,_)}(e._query,t),new ll(e.firestore,e.converter,w1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dx(i,e,t){if(typeof(t=Gr(t))=="string"){if(t==="")throw new $e(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ow(e)&&t.indexOf("/")!==-1)throw new $e(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Sn.fromString(t));if(!ct.isDocumentKey(a))throw new $e(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Iy(i,new ct(a))}if(t instanceof hi)return Iy(i,t._key);throw new $e(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(t)}.`)}function gx(i,e){if(!Array.isArray(i)||i.length===0)throw new $e(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h_(i,e){const t=function(c,f){for(const x of c)for(const v of x.getFlattenedFilters())if(f.indexOf(v.op)>=0)return v.op;return null}(i.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $e(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $e(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class yN{convertValue(e,t="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw yt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Io(e,(c,f)=>{a[c]=this.convertValue(f,t)}),a}convertVectorValue(e){var t,a,c;const f=(c=(a=(t=e.fields)===null||t===void 0?void 0:t[Ef].arrayValue)===null||a===void 0?void 0:a.values)===null||c===void 0?void 0:c.map(x=>lr(x.doubleValue));return new Lg(f)}convertGeoPoint(e){return new Og(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=jf(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=_o(e);return new br(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Sn.fromString(e);ln(Nw(a));const c=new bu(a.get(1),a.get(3)),f=new ct(a.popFirst(5));return c.isEqual(t)||Oa(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class d_ extends u_{constructor(e,t,a,c,f,x){super(e,t,a,c,x),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Ug("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class of extends d_{data(e={}){return super.data(e)}}class xN{constructor(e,t,a,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new fu(c.hasPendingWrites,c.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new of(this._firestore,this._userDataWriter,a.key,a,new fu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $e(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(c,f){if(c._snapshot.oldDocs.isEmpty()){let x=0;return c._snapshot.docChanges.map(v=>{const _=new of(c._firestore,c._userDataWriter,v.doc.key,v.doc,new fu(c._snapshot.mutatedKeys.has(v.doc.key),c._snapshot.fromCache),c.query.converter);return v.doc,{type:"added",doc:_,oldIndex:-1,newIndex:x++}})}{let x=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(v=>f||v.type!==3).map(v=>{const _=new of(c._firestore,c._userDataWriter,v.doc.key,v.doc,new fu(c._snapshot.mutatedKeys.has(v.doc.key),c._snapshot.fromCache),c.query.converter);let E=-1,C=-1;return v.type!==0&&(E=x.indexOf(v.doc.key),x=x.delete(v.doc.key)),v.type!==1&&(x=x.add(v.doc),C=x.indexOf(v.doc.key)),{type:EN(v.type),doc:_,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function EN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(i){i=us(i,hi);const e=us(i.firestore,cl);return nN(Dg(e),i._key).then(t=>_N(e,i,t))}class g_ extends yN{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hi(this.firestore,null,t)}}function vr(i){i=us(i,ll);const e=us(i.firestore,cl),t=Dg(e),a=new g_(e);return mN(i._query),rN(t,i._query).then(c=>new xN(e,a,i,c))}function ls(i,e,t){i=us(i,hi);const a=us(i.firestore,cl),c=f_(i.converter,e,t);return ed(a,[a_(Zf(a),"setDoc",i._key,c,i.converter!==null,t).toMutation(i._key,cs.none())])}function Jl(i,e,t,...a){i=us(i,hi);const c=us(i.firestore,cl),f=Zf(c);let x;return x=typeof(e=Gr(e))=="string"||e instanceof Kf?hN(f,"updateDoc",i._key,e,t,a):uN(f,"updateDoc",i._key,e),ed(c,[x.toMutation(i._key,cs.exists(!0))])}function du(i){return ed(us(i.firestore,cl),[new dg(i._key,cs.none())])}function wN(i,e){const t=us(i.firestore,cl),a=Wt(i),c=f_(i.converter,e);return ed(t,[a_(Zf(i.firestore),"addDoc",a._key,c,i.converter!==null,{}).toMutation(a._key,cs.exists(!1))]).then(()=>a)}function ed(i,e){return function(a,c){const f=new Ra;return a.asyncQueue.enqueueAndForget(async()=>G4(await tN(a),c,f)),f.promise}(Dg(i),e)}function _N(i,e,t){const a=t.docs.get(e._key),c=new g_(i);return new d_(i,c,e._key,a,new fu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(c){dc=c})(fc),ec(new Jo("firestore",(a,{instanceIdentifier:c,options:f})=>{const x=a.getProvider("app").getImmediate(),v=new cl(new g3(a.getProvider("auth-internal")),new y3(x,a.getProvider("app-check-internal")),function(E,C){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new $e(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(E.options.projectId,C)}(x,c),x);return f=Object.assign({useFetchStreams:t},f),v._setSettings(f),v},"PUBLIC").setMultipleInstances(!0)),po(yy,xy,e),po(yy,xy,"esm2017")})();var AN="firebase",vN="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */po(AN,vN,"app");const bN={apiKey:"AIzaSyC1K4kZk4TwvPBhndVCffuw5P4MqAC_AFM",authDomain:"web2024-9dc04.firebaseapp.com",projectId:"web2024-9dc04",storageBucket:"web2024-9dc04.firebasestorage.app",messagingSenderId:"533756221690",appId:"1:533756221690:web:7553ac87b46090dab99143",measurementId:"G-1EEGB1LPBS"},Ts=tE(bN);So(Ts);function TN(){const[i,e]=ne.useState(""),t=$s(),a=So(Ts),c=new ba,f=ul(Ts),x=async()=>{var v,_;try{const C=(await wS(a,c)).user,R=Wt(f,"users",C.uid);(await Ci(R)).exists()||await ls(R,{name:C.displayName,email:C.email,photo:C.photoURL,classroom:{cid:"",status:2}});const G=(_=(v=(await Ci(R)).data())==null?void 0:v.classroom)==null?void 0:_.status;console.log("User status:",G),t(G===1?"/dashboard":G===2?"/student-dashboard":"/dashboard")}catch(E){console.error(E),e("ไม่สามารถเข้าสู่ระบบด้วย Google ได้: "+E.message)}};return I.jsxs("div",{className:"min-h-screen flex",children:[I.jsx("div",{className:"w-1/2 bg-gradient-to-br from-blue-200 to-blue-500 flex items-center justify-center p-6",children:I.jsxs("div",{className:"text-center",children:[I.jsx("h1",{className:"text-5xl font-ChakraPetchTH text-white mb-4",children:"ยินดีต้อนรับสู่"}),I.jsx("h2",{className:"text-4xl font-ChakraPetchTH text-white mb-2",children:"ระบบจัดการห้องเรียน"}),I.jsx("h3",{className:"text-3xl font-InterEN text-white",children:"Classroom Management System"})]})}),I.jsx("div",{className:"w-1/2 bg-white flex items-center justify-center p-6",children:I.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-md",children:[I.jsx("h2",{className:"text-3xl font-ChakraPetchTH text-gray-800 mb-8",children:"เข้าสู่ระบบ"}),i&&I.jsx("div",{className:"bg-red-100 border border-red-400 text-red-800 px-4 py-3 rounded mb-6 w-full",children:i}),I.jsxs("button",{onClick:x,className:"w-80 h-16 flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-700 text-xl font-ChakraPetchTH rounded-xl transition duration-300 shadow-lg border-2 border-gray-200 hover:border-blue-500 group mx-auto",children:[I.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-7 h-7"}),I.jsx("span",{className:"group-hover:text-blue-600",children:"เข้าสู่ระบบด้วย Google"})]}),I.jsx("h3",{className:"p-6 text-red-500 font-ChakraPetchTH",children:"ลงทะเบียนครั้งแรกสำหรับอาจารย์ โปรดติดต่อแอดมิน"})]})})]})}const Fr=[];for(let i=0;i<256;++i)Fr.push((i+256).toString(16).slice(1));function CN(i,e=0){return(Fr[i[e+0]]+Fr[i[e+1]]+Fr[i[e+2]]+Fr[i[e+3]]+"-"+Fr[i[e+4]]+Fr[i[e+5]]+"-"+Fr[i[e+6]]+Fr[i[e+7]]+"-"+Fr[i[e+8]]+Fr[i[e+9]]+"-"+Fr[i[e+10]]+Fr[i[e+11]]+Fr[i[e+12]]+Fr[i[e+13]]+Fr[i[e+14]]+Fr[i[e+15]]).toLowerCase()}let r1;const SN=new Uint8Array(16);function IN(){if(!r1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r1=crypto.getRandomValues.bind(crypto)}return r1(SN)}const NN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mx={randomUUID:NN};function m_(i,e,t){var c;if(mx.randomUUID&&!i)return mx.randomUUID();i=i||{};const a=i.random??((c=i.rng)==null?void 0:c.call(i))??IN();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,CN(a)}var RN=Object.defineProperty,Nf=Object.getOwnPropertySymbols,p_=Object.prototype.hasOwnProperty,y_=Object.prototype.propertyIsEnumerable,px=(i,e,t)=>e in i?RN(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,M1=(i,e)=>{for(var t in e||(e={}))p_.call(e,t)&&px(i,t,e[t]);if(Nf)for(var t of Nf(e))y_.call(e,t)&&px(i,t,e[t]);return i},O1=(i,e)=>{var t={};for(var a in i)p_.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(i!=null&&Nf)for(var a of Nf(i))e.indexOf(a)<0&&y_.call(i,a)&&(t[a]=i[a]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var rl;(i=>{const e=class Bt{constructor(_,E,C,R){if(this.version=_,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],_<Bt.MIN_VERSION||_>Bt.MAX_VERSION)throw new RangeError("Version value out of range");if(R<-1||R>7)throw new RangeError("Mask value out of range");this.size=_*4+17;let k=[];for(let G=0;G<this.size;G++)k.push(!1);for(let G=0;G<this.size;G++)this.modules.push(k.slice()),this.isFunction.push(k.slice());this.drawFunctionPatterns();const j=this.addEccAndInterleave(C);if(this.drawCodewords(j),R==-1){let G=1e9;for(let J=0;J<8;J++){this.applyMask(J),this.drawFormatBits(J);const W=this.getPenaltyScore();W<G&&(R=J,G=W),this.applyMask(J)}}c(0<=R&&R<=7),this.mask=R,this.applyMask(R),this.drawFormatBits(R),this.isFunction=[]}static encodeText(_,E){const C=i.QrSegment.makeSegments(_);return Bt.encodeSegments(C,E)}static encodeBinary(_,E){const C=i.QrSegment.makeBytes(_);return Bt.encodeSegments([C],E)}static encodeSegments(_,E,C=1,R=40,k=-1,j=!0){if(!(Bt.MIN_VERSION<=C&&C<=R&&R<=Bt.MAX_VERSION)||k<-1||k>7)throw new RangeError("Invalid value");let G,J;for(G=C;;G++){const re=Bt.getNumDataCodewords(G,E)*8,_e=x.getTotalBits(_,G);if(_e<=re){J=_e;break}if(G>=R)throw new RangeError("Data too long")}for(const re of[Bt.Ecc.MEDIUM,Bt.Ecc.QUARTILE,Bt.Ecc.HIGH])j&&J<=Bt.getNumDataCodewords(G,re)*8&&(E=re);let W=[];for(const re of _){t(re.mode.modeBits,4,W),t(re.numChars,re.mode.numCharCountBits(G),W);for(const _e of re.getData())W.push(_e)}c(W.length==J);const he=Bt.getNumDataCodewords(G,E)*8;c(W.length<=he),t(0,Math.min(4,he-W.length),W),t(0,(8-W.length%8)%8,W),c(W.length%8==0);for(let re=236;W.length<he;re^=253)t(re,8,W);let fe=[];for(;fe.length*8<W.length;)fe.push(0);return W.forEach((re,_e)=>fe[_e>>>3]|=re<<7-(_e&7)),new Bt(G,E,fe,k)}getModule(_,E){return 0<=_&&_<this.size&&0<=E&&E<this.size&&this.modules[E][_]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const _=this.getAlignmentPatternPositions(),E=_.length;for(let C=0;C<E;C++)for(let R=0;R<E;R++)C==0&&R==0||C==0&&R==E-1||C==E-1&&R==0||this.drawAlignmentPattern(_[C],_[R]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(_){const E=this.errorCorrectionLevel.formatBits<<3|_;let C=E;for(let k=0;k<10;k++)C=C<<1^(C>>>9)*1335;const R=(E<<10|C)^21522;c(R>>>15==0);for(let k=0;k<=5;k++)this.setFunctionModule(8,k,a(R,k));this.setFunctionModule(8,7,a(R,6)),this.setFunctionModule(8,8,a(R,7)),this.setFunctionModule(7,8,a(R,8));for(let k=9;k<15;k++)this.setFunctionModule(14-k,8,a(R,k));for(let k=0;k<8;k++)this.setFunctionModule(this.size-1-k,8,a(R,k));for(let k=8;k<15;k++)this.setFunctionModule(8,this.size-15+k,a(R,k));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let _=this.version;for(let C=0;C<12;C++)_=_<<1^(_>>>11)*7973;const E=this.version<<12|_;c(E>>>18==0);for(let C=0;C<18;C++){const R=a(E,C),k=this.size-11+C%3,j=Math.floor(C/3);this.setFunctionModule(k,j,R),this.setFunctionModule(j,k,R)}}drawFinderPattern(_,E){for(let C=-4;C<=4;C++)for(let R=-4;R<=4;R++){const k=Math.max(Math.abs(R),Math.abs(C)),j=_+R,G=E+C;0<=j&&j<this.size&&0<=G&&G<this.size&&this.setFunctionModule(j,G,k!=2&&k!=4)}}drawAlignmentPattern(_,E){for(let C=-2;C<=2;C++)for(let R=-2;R<=2;R++)this.setFunctionModule(_+R,E+C,Math.max(Math.abs(R),Math.abs(C))!=1)}setFunctionModule(_,E,C){this.modules[E][_]=C,this.isFunction[E][_]=!0}addEccAndInterleave(_){const E=this.version,C=this.errorCorrectionLevel;if(_.length!=Bt.getNumDataCodewords(E,C))throw new RangeError("Invalid argument");const R=Bt.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][E],k=Bt.ECC_CODEWORDS_PER_BLOCK[C.ordinal][E],j=Math.floor(Bt.getNumRawDataModules(E)/8),G=R-j%R,J=Math.floor(j/R);let W=[];const he=Bt.reedSolomonComputeDivisor(k);for(let re=0,_e=0;re<R;re++){let je=_.slice(_e,_e+J-k+(re<G?0:1));_e+=je.length;const Ue=Bt.reedSolomonComputeRemainder(je,he);re<G&&je.push(0),W.push(je.concat(Ue))}let fe=[];for(let re=0;re<W[0].length;re++)W.forEach((_e,je)=>{(re!=J-k||je>=G)&&fe.push(_e[re])});return c(fe.length==j),fe}drawCodewords(_){if(_.length!=Math.floor(Bt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let R=0;R<this.size;R++)for(let k=0;k<2;k++){const j=C-k,J=(C+1&2)==0?this.size-1-R:R;!this.isFunction[J][j]&&E<_.length*8&&(this.modules[J][j]=a(_[E>>>3],7-(E&7)),E++)}}c(E==_.length*8)}applyMask(_){if(_<0||_>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let C=0;C<this.size;C++){let R;switch(_){case 0:R=(C+E)%2==0;break;case 1:R=E%2==0;break;case 2:R=C%3==0;break;case 3:R=(C+E)%3==0;break;case 4:R=(Math.floor(C/3)+Math.floor(E/2))%2==0;break;case 5:R=C*E%2+C*E%3==0;break;case 6:R=(C*E%2+C*E%3)%2==0;break;case 7:R=((C+E)%2+C*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][C]&&R&&(this.modules[E][C]=!this.modules[E][C])}}getPenaltyScore(){let _=0;for(let k=0;k<this.size;k++){let j=!1,G=0,J=[0,0,0,0,0,0,0];for(let W=0;W<this.size;W++)this.modules[k][W]==j?(G++,G==5?_+=Bt.PENALTY_N1:G>5&&_++):(this.finderPenaltyAddHistory(G,J),j||(_+=this.finderPenaltyCountPatterns(J)*Bt.PENALTY_N3),j=this.modules[k][W],G=1);_+=this.finderPenaltyTerminateAndCount(j,G,J)*Bt.PENALTY_N3}for(let k=0;k<this.size;k++){let j=!1,G=0,J=[0,0,0,0,0,0,0];for(let W=0;W<this.size;W++)this.modules[W][k]==j?(G++,G==5?_+=Bt.PENALTY_N1:G>5&&_++):(this.finderPenaltyAddHistory(G,J),j||(_+=this.finderPenaltyCountPatterns(J)*Bt.PENALTY_N3),j=this.modules[W][k],G=1);_+=this.finderPenaltyTerminateAndCount(j,G,J)*Bt.PENALTY_N3}for(let k=0;k<this.size-1;k++)for(let j=0;j<this.size-1;j++){const G=this.modules[k][j];G==this.modules[k][j+1]&&G==this.modules[k+1][j]&&G==this.modules[k+1][j+1]&&(_+=Bt.PENALTY_N2)}let E=0;for(const k of this.modules)E=k.reduce((j,G)=>j+(G?1:0),E);const C=this.size*this.size,R=Math.ceil(Math.abs(E*20-C*10)/C)-1;return c(0<=R&&R<=9),_+=R*Bt.PENALTY_N4,c(0<=_&&_<=2568888),_}getAlignmentPatternPositions(){if(this.version==1)return[];{const _=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(_*2-2))*2;let C=[6];for(let R=this.size-7;C.length<_;R-=E)C.splice(1,0,R);return C}}static getNumRawDataModules(_){if(_<Bt.MIN_VERSION||_>Bt.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*_+128)*_+64;if(_>=2){const C=Math.floor(_/7)+2;E-=(25*C-10)*C-55,_>=7&&(E-=36)}return c(208<=E&&E<=29648),E}static getNumDataCodewords(_,E){return Math.floor(Bt.getNumRawDataModules(_)/8)-Bt.ECC_CODEWORDS_PER_BLOCK[E.ordinal][_]*Bt.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][_]}static reedSolomonComputeDivisor(_){if(_<1||_>255)throw new RangeError("Degree out of range");let E=[];for(let R=0;R<_-1;R++)E.push(0);E.push(1);let C=1;for(let R=0;R<_;R++){for(let k=0;k<E.length;k++)E[k]=Bt.reedSolomonMultiply(E[k],C),k+1<E.length&&(E[k]^=E[k+1]);C=Bt.reedSolomonMultiply(C,2)}return E}static reedSolomonComputeRemainder(_,E){let C=E.map(R=>0);for(const R of _){const k=R^C.shift();C.push(0),E.forEach((j,G)=>C[G]^=Bt.reedSolomonMultiply(j,k))}return C}static reedSolomonMultiply(_,E){if(_>>>8||E>>>8)throw new RangeError("Byte out of range");let C=0;for(let R=7;R>=0;R--)C=C<<1^(C>>>7)*285,C^=(E>>>R&1)*_;return c(C>>>8==0),C}finderPenaltyCountPatterns(_){const E=_[1];c(E<=this.size*3);const C=E>0&&_[2]==E&&_[3]==E*3&&_[4]==E&&_[5]==E;return(C&&_[0]>=E*4&&_[6]>=E?1:0)+(C&&_[6]>=E*4&&_[0]>=E?1:0)}finderPenaltyTerminateAndCount(_,E,C){return _&&(this.finderPenaltyAddHistory(E,C),E=0),E+=this.size,this.finderPenaltyAddHistory(E,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(_,E){E[0]==0&&(_+=this.size),E.pop(),E.unshift(_)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function t(v,_,E){if(_<0||_>31||v>>>_)throw new RangeError("Value out of range");for(let C=_-1;C>=0;C--)E.push(v>>>C&1)}function a(v,_){return(v>>>_&1)!=0}function c(v){if(!v)throw new Error("Assertion error")}const f=class tr{constructor(_,E,C){if(this.mode=_,this.numChars=E,this.bitData=C,E<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(_){let E=[];for(const C of _)t(C,8,E);return new tr(tr.Mode.BYTE,_.length,E)}static makeNumeric(_){if(!tr.isNumeric(_))throw new RangeError("String contains non-numeric characters");let E=[];for(let C=0;C<_.length;){const R=Math.min(_.length-C,3);t(parseInt(_.substring(C,C+R),10),R*3+1,E),C+=R}return new tr(tr.Mode.NUMERIC,_.length,E)}static makeAlphanumeric(_){if(!tr.isAlphanumeric(_))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],C;for(C=0;C+2<=_.length;C+=2){let R=tr.ALPHANUMERIC_CHARSET.indexOf(_.charAt(C))*45;R+=tr.ALPHANUMERIC_CHARSET.indexOf(_.charAt(C+1)),t(R,11,E)}return C<_.length&&t(tr.ALPHANUMERIC_CHARSET.indexOf(_.charAt(C)),6,E),new tr(tr.Mode.ALPHANUMERIC,_.length,E)}static makeSegments(_){return _==""?[]:tr.isNumeric(_)?[tr.makeNumeric(_)]:tr.isAlphanumeric(_)?[tr.makeAlphanumeric(_)]:[tr.makeBytes(tr.toUtf8ByteArray(_))]}static makeEci(_){let E=[];if(_<0)throw new RangeError("ECI assignment value out of range");if(_<128)t(_,8,E);else if(_<16384)t(2,2,E),t(_,14,E);else if(_<1e6)t(6,3,E),t(_,21,E);else throw new RangeError("ECI assignment value out of range");return new tr(tr.Mode.ECI,0,E)}static isNumeric(_){return tr.NUMERIC_REGEX.test(_)}static isAlphanumeric(_){return tr.ALPHANUMERIC_REGEX.test(_)}getData(){return this.bitData.slice()}static getTotalBits(_,E){let C=0;for(const R of _){const k=R.mode.numCharCountBits(E);if(R.numChars>=1<<k)return 1/0;C+=4+k+R.bitData.length}return C}static toUtf8ByteArray(_){_=encodeURI(_);let E=[];for(let C=0;C<_.length;C++)_.charAt(C)!="%"?E.push(_.charCodeAt(C)):(E.push(parseInt(_.substring(C+1,C+3),16)),C+=2);return E}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let x=f;i.QrSegment=f})(rl||(rl={}));(i=>{(e=>{const t=class{constructor(c,f){this.ordinal=c,this.formatBits=f}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(i.QrCode||(i.QrCode={}))})(rl||(rl={}));(i=>{(e=>{const t=class{constructor(c,f){this.modeBits=c,this.numBitsCharCount=f}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(i.QrSegment||(i.QrSegment={}))})(rl||(rl={}));var Xl=rl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var DN={L:Xl.QrCode.Ecc.LOW,M:Xl.QrCode.Ecc.MEDIUM,Q:Xl.QrCode.Ecc.QUARTILE,H:Xl.QrCode.Ecc.HIGH},x_=128,E_="L",w_="#FFFFFF",__="#000000",A_=!1,v_=1,MN=4,ON=0,LN=.1;function b_(i,e=0){const t=[];return i.forEach(function(a,c){let f=null;a.forEach(function(x,v){if(!x&&f!==null){t.push(`M${f+e} ${c+e}h${v-f}v1H${f+e}z`),f=null;return}if(v===a.length-1){if(!x)return;f===null?t.push(`M${v+e},${c+e} h1v1H${v+e}z`):t.push(`M${f+e},${c+e} h${v+1-f}v1H${f+e}z`);return}x&&f===null&&(f=v)})}),t.join("")}function T_(i,e){return i.slice().map((t,a)=>a<e.y||a>=e.y+e.h?t:t.map((c,f)=>f<e.x||f>=e.x+e.w?c:!1))}function kN(i,e,t,a){if(a==null)return null;const c=i.length+t*2,f=Math.floor(e*LN),x=c/e,v=(a.width||f)*x,_=(a.height||f)*x,E=a.x==null?i.length/2-v/2:a.x*x,C=a.y==null?i.length/2-_/2:a.y*x,R=a.opacity==null?1:a.opacity;let k=null;if(a.excavate){let G=Math.floor(E),J=Math.floor(C),W=Math.ceil(v+E-G),he=Math.ceil(_+C-J);k={x:G,y:J,w:W,h:he}}const j=a.crossOrigin;return{x:E,y:C,h:_,w:v,excavation:k,opacity:R,crossOrigin:j}}function PN(i,e){return e!=null?Math.max(Math.floor(e),0):i?MN:ON}function C_({value:i,level:e,minVersion:t,includeMargin:a,marginSize:c,imageSettings:f,size:x,boostLevel:v}){let _=pr.useMemo(()=>{const G=(Array.isArray(i)?i:[i]).reduce((J,W)=>(J.push(...Xl.QrSegment.makeSegments(W)),J),[]);return Xl.QrCode.encodeSegments(G,DN[e],t,void 0,void 0,v)},[i,e,t,v]);const{cells:E,margin:C,numCells:R,calculatedImageSettings:k}=pr.useMemo(()=>{let j=_.getModules();const G=PN(a,c),J=j.length+G*2,W=kN(j,x,G,f);return{cells:j,margin:G,numCells:J,calculatedImageSettings:W}},[_,x,f,a,c]);return{qrcode:_,margin:C,cells:E,numCells:R,calculatedImageSettings:k}}var BN=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),UN=pr.forwardRef(function(e,t){const a=e,{value:c,size:f=x_,level:x=E_,bgColor:v=w_,fgColor:_=__,includeMargin:E=A_,minVersion:C=v_,boostLevel:R,marginSize:k,imageSettings:j}=a,J=O1(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:W}=J,he=O1(J,["style"]),fe=j==null?void 0:j.src,re=pr.useRef(null),_e=pr.useRef(null),je=pr.useCallback(Me=>{re.current=Me,typeof t=="function"?t(Me):t&&(t.current=Me)},[t]),[Ue,z]=pr.useState(!1),{margin:F,cells:P,numCells:Y,calculatedImageSettings:Z}=C_({value:c,level:x,minVersion:C,boostLevel:R,includeMargin:E,marginSize:k,imageSettings:j,size:f});pr.useEffect(()=>{if(re.current!=null){const Me=re.current,ae=Me.getContext("2d");if(!ae)return;let Ne=P;const me=_e.current,be=Z!=null&&me!==null&&me.complete&&me.naturalHeight!==0&&me.naturalWidth!==0;be&&Z.excavation!=null&&(Ne=T_(P,Z.excavation));const Xe=window.devicePixelRatio||1;Me.height=Me.width=f*Xe;const K=f/Y*Xe;ae.scale(K,K),ae.fillStyle=v,ae.fillRect(0,0,Y,Y),ae.fillStyle=_,BN?ae.fill(new Path2D(b_(Ne,F))):P.forEach(function(ve,Fe){ve.forEach(function(Ge,Oe){Ge&&ae.fillRect(Oe+F,Fe+F,1,1)})}),Z&&(ae.globalAlpha=Z.opacity),be&&ae.drawImage(me,Z.x+F,Z.y+F,Z.w,Z.h)}}),pr.useEffect(()=>{z(!1)},[fe]);const $=M1({height:f,width:f},W);let X=null;return fe!=null&&(X=pr.createElement("img",{src:fe,key:fe,style:{display:"none"},onLoad:()=>{z(!0)},ref:_e,crossOrigin:Z==null?void 0:Z.crossOrigin})),pr.createElement(pr.Fragment,null,pr.createElement("canvas",M1({style:$,height:f,width:f,ref:je,role:"img"},he)),X)});UN.displayName="QRCodeCanvas";var S_=pr.forwardRef(function(e,t){const a=e,{value:c,size:f=x_,level:x=E_,bgColor:v=w_,fgColor:_=__,includeMargin:E=A_,minVersion:C=v_,boostLevel:R,title:k,marginSize:j,imageSettings:G}=a,J=O1(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:W,cells:he,numCells:fe,calculatedImageSettings:re}=C_({value:c,level:x,minVersion:C,boostLevel:R,includeMargin:E,marginSize:j,imageSettings:G,size:f});let _e=he,je=null;G!=null&&re!=null&&(re.excavation!=null&&(_e=T_(he,re.excavation)),je=pr.createElement("image",{href:G.src,height:re.h,width:re.w,x:re.x+W,y:re.y+W,preserveAspectRatio:"none",opacity:re.opacity,crossOrigin:re.crossOrigin}));const Ue=b_(_e,W);return pr.createElement("svg",M1({height:f,width:f,viewBox:`0 0 ${fe} ${fe}`,ref:t,role:"img"},J),!!k&&pr.createElement("title",null,k),pr.createElement("path",{fill:v,d:`M0,0 h${fe}v${fe}H0z`,shapeRendering:"crispEdges"}),pr.createElement("path",{fill:_,d:Ue,shapeRendering:"crispEdges"}),je)});S_.displayName="QRCodeSVG";function VN(){const i=$s(),e=So(),t=ul(Ts),a=e.currentUser,[c,f]=ne.useState(null),[x,v]=ne.useState([]),[_,E]=ne.useState(!1),[C,R]=ne.useState(null),[k,j]=ne.useState(!1),[G,J]=ne.useState(""),[W,he]=ne.useState(""),[fe,re]=ne.useState(""),[_e,je]=ne.useState(""),[Ue,z]=ne.useState(!1),[F,P]=ne.useState(!1),[Y,Z]=ne.useState(null),[$,X]=ne.useState(""),[Me,ae]=ne.useState(""),[Ne,me]=ne.useState(""),[be,Xe]=ne.useState(""),[K,ve]=ne.useState(""),[Fe,Ge]=ne.useState([]),[Oe,ot]=ne.useState([]),[Le,ke]=ne.useState(""),[He,nt]=ne.useState(!1),[tt,ht]=ne.useState(!1),[Pn,gt]=ne.useState(!1),[cr,vn]=ne.useState([]),[Yn,cn]=ne.useState(""),[Ct,At]=ne.useState(""),[yn,We]=ne.useState(null),[Is,zi]=ne.useState(!1),[sn,Ns]=ne.useState(null),[Kt,In]=ne.useState(!1),[Nn,Xn]=ne.useState(null);ne.useEffect(()=>{if(a){const de=Wt(t,"users",a.uid);Ci(de).then(Pe=>{Pe.exists()&&f(Pe.data())}).catch(Pe=>{console.error("Error fetching user profile:",Pe)})}},[a,t]),ne.useEffect(()=>{if(a){const de=Iu(Mr(t,"classroom"),Nu("owner","==",a.uid));vr(de).then(Pe=>{const pt=[];Pe.forEach(xt=>{pt.push({id:xt.id,...xt.data()})}),v(pt)}).catch(Pe=>{console.error("Error fetching classrooms:",Pe)})}},[a,t]),ne.useEffect(()=>{Y&&(async()=>{try{const Pe=Mr(t,"classroom",Y.id,"students"),pt=await vr(Pe),xt=[];pt.forEach(Je=>{xt.push({id:Je.id,checked:!1,...Je.data()})}),Ge(xt)}catch(Pe){console.error("Error fetching students for inline edit:",Pe)}})()},[Y,t]),ne.useEffect(()=>{(async()=>{try{const Pe=Mr(t,"users"),pt=Iu(Pe,Nu("classroom.status","==",2)),xt=await vr(pt),Je=[];xt.forEach(En=>{Je.push({id:En.id,...En.data()})}),ot(Je)}catch(Pe){console.error("Error fetching available users:",Pe)}})()},[t]),ne.useEffect(()=>{Y&&(async()=>{try{const Pe=Mr(t,"classroom",Y.id,"checkin"),pt=await vr(Pe),xt=[];pt.forEach(Je=>{xt.push({id:Je.id,...Je.data()})}),vn(xt)}catch(Pe){console.error("Error fetching check-in records:",Pe)}})()},[Y,t]),ne.useEffect(()=>{(async()=>{if(!(!Y||!yn))try{const Pe=Mr(t,"classroom",Y.id,"checkin",yn.id,"students"),xt=(await vr(Pe)).docs.map(En=>En.id),Je=Fe.map(En=>xt.includes(En.id)?{...En,checked:!0}:{...En,checked:!1});Ge(Je)}catch(Pe){console.error("Error loading checked status:",Pe)}})()},[Y,yn,t,Fe]);const Rs=async()=>{if(Le){if(Fe.some(de=>de.id===Le)){alert("This student is already added.");return}try{const de=Oe.find(pt=>pt.id===Le);if(!de)return;const Pe=Wt(t,"classroom",Y.id,"students",de.id);await ls(Pe,{stdid:de.id,name:de.name,status:1}),Ge([...Fe,{id:de.id,stdid:de.id,name:de.name,status:1}]),alert("Student added successfully."),ke("")}catch(de){console.error("Error adding student inline:",de),alert("Failed to add student.")}}},Ds=async()=>{try{await TE(e),i("/")}catch(de){console.error("Error signing out:",de)}},hs=de=>{R(Pe=>Pe===de?null:de)},an=async de=>{if(window.confirm("Are you sure you want to delete this classroom?"))try{await du(Wt(t,"classroom",de)),v(Pe=>Pe.filter(pt=>pt.id!==de))}catch(Pe){console.error("Error deleting classroom:",Pe)}},Ve=async de=>{de.preventDefault(),z(!0);try{const Pe=m_(),pt=Wt(t,"classroom",Pe);await ls(pt,{owner:a.uid,info:{code:G,name:W,photo:_e||"",room:fe}}),v(xt=>[...xt,{id:Pe,owner:a.uid,info:{code:G,name:W,photo:_e,room:fe}}]),J(""),he(""),re(""),je(""),j(!1),F&&P(!1),alert("Classroom created successfully!")}catch(Pe){console.error("Error creating classroom:",Pe),alert("Error creating classroom.")}z(!1)},xn=de=>{P(!0),Z(de),X(de.info.code),ae(de.info.name),me(de.info.photo),Xe(de.info.room),ve(""),R(null),nt(!1),Ge([]),ke("")},It=async de=>{de.preventDefault(),z(!0),ve("");try{const Pe=Wt(t,"classroom",Y.id);await Jl(Pe,{"info.code":$,"info.name":Me,"info.photo":Ne,"info.room":be}),v(pt=>pt.map(xt=>xt.id===Y.id?{...xt,info:{code:$,name:Me,photo:Ne,room:be}}:xt)),ve("Classroom updated successfully.")}catch(Pe){console.error("Error updating classroom:",Pe),ve("Failed to update classroom.")}z(!1)},Nt=async()=>{if(!Yn||!Ct){alert("Please provide check-in code and date/time.");return}try{const de=await wN(Mr(t,"classroom",Y.id,"checkin"),{code:Yn,date:Ct,status:0});We({id:de.id,code:Yn,date:Ct,status:0}),cn(""),At("")}catch(de){console.error("Error creating check-in record:",de),alert("Failed to create check-in record.")}},Si=async de=>{try{const Pe=Fe.find(xt=>xt.id===de);if(!Pe)return;const pt=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await ls(Wt(t,"classroom",Y.id,"checkin",yn.id,"students",de),{stdid:Pe.stdid,name:Pe.name,remark:"",date:pt}),await ls(Wt(t,"classroom",Y.id,"checkin",yn.id,"scores",Pe.stdid),{uid:de,stdid:Pe.stdid,name:Pe.name,remark:"",dates:pt,score:1,status:1}),Ge(xt=>xt.map(Je=>Je.id===de?{...Je,checked:!0}:Je))}catch(Pe){console.error("Error storing student check-in:",Pe),alert("Failed to check in student.")}},Ms=async()=>{if(yn)try{const de=Wt(t,"classroom",Y.id,"checkin",yn.id);await Jl(de,{status:2}),alert("Check-in process has been finalized.");const Pe=Mr(t,"classroom",Y.id,"checkin"),pt=await vr(Pe),xt=[];pt.forEach(Je=>{xt.push({id:Je.id,...Je.data()})}),vn(xt),We(null)}catch(de){console.error("Error finishing check-in:",de),alert("Error finalizing check-in.")}},Js=async de=>{Ns(de),zi(!0);try{const Pe=Mr(t,"classroom",Y.id,"checkin",de.id,"students"),xt=(await vr(Pe)).docs.map(Je=>Je.id);Ge(Je=>Je.map(En=>xt.includes(En.id)?{...En,checked:!0}:{...En,checked:!1}))}catch(Pe){console.error("Error viewing check-in details:",Pe)}},vt=async()=>{if(!(!Y||!sn)&&window.confirm("Are you sure you want to delete this check-in record?"))try{await du(Wt(t,"classroom",Y.id,"checkin",sn.id)),vn(de=>de.filter(Pe=>Pe.id!==sn.id)),alert("Check-in record deleted successfully."),zi(!1)}catch(de){console.error("Error deleting check-in record:",de),alert("Failed to delete check-in record.")}},Cr=de=>{i(`/create-quiz/${Y.id}?checkinId=${de.id}`)},Yr=async de=>{try{const Pe=Fe.find(pt=>pt.id===de);if(!Pe)return;await du(Wt(t,"classroom",Y.id,"checkin",yn.id,"students",de)),await du(Wt(t,"classroom",Y.id,"checkin",yn.id,"scores",Pe.stdid)),Ge(pt=>pt.map(xt=>xt.id===de?{...xt,checked:!1}:xt))}catch(Pe){console.error("Error undoing student check-in:",Pe),alert("Failed to undo check-in for student.")}},Or=de=>{Xn(de),In(!0),R(null)},Qn=async de=>{try{const Pe=Fe.find(Je=>Je.id===de);if(!Pe)return;const pt=Pe.status===0?1:0,xt=Wt(t,"classroom",Y.id,"students",de);await Jl(xt,{status:pt}),Ge(Je=>Je.map(En=>En.id===de?{...En,status:pt}:En))}catch(Pe){console.error("Error toggling student verification:",Pe),alert("เกิดข้อผิดพลาดในการอัปเดตสถานะนักเรียน")}};return I.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[I.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[I.jsxs("div",{children:[I.jsx("div",{className:"text-4xl --font-InterEN mb-8",children:"Classroom Management System"}),I.jsxs("ul",{className:"space-y-4",children:[I.jsx("li",{children:I.jsx("button",{onClick:()=>{P(!1),j(!1),Z(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"ห้องเรียนของฉัน"})}),I.jsx("li",{children:I.jsx("button",{onClick:()=>{P(!0),j(!0),Z(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"สร้างห้องเรียน"})})]})]}),I.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",onClick:()=>i("/edit-profile"),children:[c&&c.photo?I.jsx("img",{src:c.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):I.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:I.jsx("span",{className:"text-lg text-white",children:"N/A"})}),I.jsxs("div",{children:[I.jsx("p",{className:"text-white font-InterEN font-bold",children:(c==null?void 0:c.name)||(a==null?void 0:a.email)||"User"}),a&&I.jsx("p",{className:"text-blue-200 font-InterEN text-sm",children:a.email})]})]})]}),I.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[I.jsxs("div",{className:"flex justify-between items-center mb-8",children:[I.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"แดชบอร์ด"}),I.jsx("button",{onClick:()=>E(!0),className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),I.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[I.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["ยินดีต้อนรับสู่ระบบจัดการห้องเรียน Classroom Management System, ",(c==null?void 0:c.name)||(a==null?void 0:a.email)||"User","😊"]}),I.jsx("p",{className:"text-blue-700 font-ChakraPetchTH mb-4",children:"จัดการห้องเรียนของคุณที่มหาวิทยาลัยขอนแก่น"}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:F?Y?"แก้ไขห้องเรียน":"สร้างห้องเรียน":"ห้องเรียนของคุณ"}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:F?Y?I.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:[I.jsxs("div",{className:"flex justify-between items-center mb-4",children:[I.jsx("h2",{className:"text-xl font-ChakraPetchTH text-blue-900",children:He?`แก้ไขรายละเอียดห้องเรียน : ${Y.info.name}`:`จัดการนักเรียน : ${Y.info.name}`}),I.jsxs("div",{className:"relative",children:[I.jsx("button",{onClick:()=>ht(de=>!de),className:"p-2 focus:outline-none",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:I.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),tt&&I.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md z-10",children:[I.jsx("button",{onClick:()=>{nt(!0),ht(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"แก้ไขห้องเรียน"}),I.jsx("button",{onClick:()=>{nt(!1),ht(!1)},className:"block w-full font-ChakraPetchTH text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"จัดการนักเรียน"})]})]})]}),He?I.jsxs("form",{onSubmit:It,className:"space-y-6",children:[I.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:$,onChange:de=>X(de.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),I.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:Me,onChange:de=>ae(de.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),I.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:Ne,onChange:de=>me(de.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),I.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:be,onChange:de=>Xe(de.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),K&&I.jsx("p",{className:"text-green-600 text-center",children:K}),I.jsxs("div",{className:"flex justify-end space-x-4",children:[I.jsx("button",{type:"button",onClick:()=>{Z(null),P(!1),j(!1)},className:"px-4 py-2 rounded border border-gray-300 hover:bg-gray-100 transition",children:"ยกเลิก"}),I.jsx("button",{type:"submit",disabled:Ue,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:Ue?"กำลังอัพเดท...":"บันทึก"})]})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"mt-4",children:[I.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"นักเรียนที่ลงทะเบียน"}),Fe.length>0?I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full border",children:[I.jsx("thead",{children:I.jsxs("tr",{className:"bg-blue-100",children:[I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"สถานะ"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"การปฏิบัติ"})]})}),I.jsx("tbody",{children:Fe.map(de=>I.jsxs("tr",{className:"hover:bg-blue-50",children:[I.jsx("td",{className:"border p-2",children:de.stdid}),I.jsx("td",{className:"border p-2",children:de.name}),I.jsx("td",{className:"border p-2",children:de.status===0?"ยังไม่ตรวจสอบ":"ตรวจสอบแล้ว"}),I.jsx("td",{className:"border p-2",children:I.jsx("button",{onClick:()=>Qn(de.id),className:`px-3 py-1 rounded ${de.status===1?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:de.status===1?"ยกเลิกการยืนยัน":"ยืนยันนักเรียน"})})]},de.id))})]})}):I.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนในห้องเรียนนี้"})]}),I.jsxs("div",{className:"mt-8",children:[I.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"เพิ่มนักเรียน"}),I.jsx("div",{className:"mb-4",children:I.jsxs("select",{value:Le,onChange:de=>ke(de.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:[I.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),Oe.map(de=>I.jsxs("option",{value:de.id,children:[de.name," (",de.email,")"]},de.id))]})}),I.jsxs("div",{className:"flex space-x-4",children:[I.jsx("button",{type:"button",onClick:Rs,className:"w-full font-ChakraPetchTH bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"เพิ่มนักเรียน"}),I.jsx("button",{type:"button",onClick:()=>gt(de=>!de),className:"w-full font-ChakraPetchTH bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:yn?"แสดงตารางเช็คชื่อ":"สร้างการเช็คชื่อ"})]}),Pn&&!yn&&I.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:I.jsxs("div",{className:"space-y-4",children:[I.jsx("input",{type:"text",placeholder:"รหัสเช็คชื่อ (e.g., ABC123456)",value:Yn,onChange:de=>cn(de.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),I.jsx("input",{type:"datetime-local",value:Ct,onChange:de=>At(de.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),I.jsx("button",{type:"button",onClick:Nt,className:"w-full bg-blue-600 text-white font-ChakraPetchTH px-4 py-2 rounded hover:bg-blue-700 transition",children:"สร้างการเช็คชื่อ"})]})}),Pn&&yn&&I.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:I.jsxs("div",{className:"space-y-4",children:[I.jsxs("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["Check-in Table (Code: ",yn.code,", Time: ",yn.date,")"]}),Fe.length>0?I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full border",children:[I.jsx("thead",{children:I.jsxs("tr",{className:"bg-blue-100",children:[I.jsx("th",{className:"border p-2 text-left",children:"ลำดับ"}),I.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),I.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),I.jsx("th",{className:"border p-2 text-left",children:"สถานะ"}),I.jsx("th",{className:"border p-2 text-left",children:"การปฏิบัติ"})]})}),I.jsx("tbody",{children:Fe.map((de,Pe)=>I.jsxs("tr",{className:"hover:bg-blue-50",children:[I.jsx("td",{className:"border p-2",children:Pe+1}),I.jsx("td",{className:"border p-2",children:de.stdid}),I.jsx("td",{className:"border p-2",children:de.name}),I.jsx("td",{className:"border p-2",children:de.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็ค"}),I.jsx("td",{className:"border p-2",children:I.jsx("button",{type:"button",onClick:()=>{de.checked?Yr(de.id):Si(de.id)},className:`px-3 py-1 rounded ${de.checked?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:de.checked?"ยกเลิกเช็คชื่อ":"เช็คชื่อ"})})]},de.id))})]})}):I.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีนักเรียนในห้องเรียนนี้"}),I.jsx("button",{type:"button",onClick:Ms,className:"w-full bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition mt-4",children:"สิ้นสุดการเช็คชื่อ"})]})})]}),I.jsxs("div",{className:"mt-8",children:[I.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"บันทึกการเช็คชื่อ"}),cr.length>0?I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full border",children:[I.jsx("thead",{children:I.jsxs("tr",{className:"bg-blue-100",children:[I.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),I.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสเช็คชื่อ"}),I.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"วัน/เวลา"}),I.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"}),I.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รายละเอียด"})]})}),I.jsx("tbody",{children:cr.map((de,Pe)=>I.jsxs("tr",{className:"hover:bg-blue-50",children:[I.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Pe+1}),I.jsx("td",{className:"border font-ChakraPetchTH p-2",children:de.code}),I.jsx("td",{className:"border font-ChakraPetchTH p-2",children:de.date}),I.jsx("td",{className:"border font-ChakraPetchTH p-2",children:de.status===0?"ยังไม่เริ่ม":de.status===1?"กำลังดำเนินการ":"เสร็จสิ้น"}),I.jsxs("td",{className:"border p-2",children:[I.jsx("button",{type:"button",onClick:()=>Js(de),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition",children:"รายละเอียด"}),I.jsx("button",{type:"button",onClick:()=>Cr(de),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition m-2",children:"ควิซ"})]})]},de.id))})]})}):I.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีบันทึกการเช็คชื่อในห้องเรียนนี้"})]})]})]}):k?I.jsx("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:I.jsxs("form",{onSubmit:Ve,className:"space-y-6",children:[I.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:G,onChange:de=>J(de.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),I.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:W,onChange:de=>he(de.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),I.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:fe,onChange:de=>re(de.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),I.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:_e,onChange:de=>je(de.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),I.jsxs("div",{className:"flex justify-end space-x-4",children:[I.jsx("button",{type:"button",onClick:()=>{j(!1),P(!1)},className:"px-6 py-3 rounded border border-gray-300 hover:bg-gray-100 transition",children:"Cancel"}),I.jsx("button",{type:"submit",disabled:Ue,className:"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 transition shadow-md",children:Ue?"Creating...":"Create"})]})]})}):I.jsxs("div",{onClick:()=>j(!0),className:"col-span-1 md:col-span-2 relative flex flex-col items-center justify-center border-4 border-dashed border-blue-400 rounded-xl h-60 cursor-pointer hover:bg-blue-100 transition duration-300",children:[I.jsx("span",{className:"text-6xl text-blue-500",children:"+"}),I.jsx("span",{className:"mt-4 text-2xl text-blue-700 font-bold",children:"Create New Classroom"})]}):I.jsx(I.Fragment,{children:x.map(de=>I.jsxs("div",{className:"relative flex flex-col items-center border border-gray-200 rounded-lg shadow-md bg-white transition transform hover:-translate-y-1 hover:shadow-xl duration-300",children:[I.jsx("button",{onClick:()=>hs(de.id),className:"absolute top-2 right-2 bg-white border border-gray-300 rounded-full p-2 transition duration-200 active:scale-95 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:I.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),C===de.id&&I.jsxs("div",{className:"absolute top-10 right-2 w-36 bg-white shadow-lg rounded py-1 z-20",children:[I.jsx("button",{onClick:()=>xn(de),className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"จัดการนักเรียน"}),I.jsx("button",{onClick:()=>Or(de),className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"สร้าง QR Code"}),I.jsx("button",{onClick:()=>{an(de.id),R(null)},className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"ลบห้องเรียน"})]}),de.info.photo?I.jsx("img",{src:de.info.photo,alt:de.info.name,className:"w-full h-48 object-cover rounded-t-lg border-b border-gray-200"}):I.jsx("div",{className:"w-full h-48 bg-blue-300 flex items-center justify-center rounded-t-lg border-b border-gray-200",children:I.jsx("span",{className:"text-lg text-white",children:"No Image"})}),I.jsxs("div",{className:"p-4 text-center",children:[I.jsx("p",{className:"font-semibold font-InterEN text-blue-900 text-xl mb-1",children:de.info.name}),I.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Code : ",de.info.code]}),I.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Room : ",de.info.room]})]})]},de.id))})})]})]})]}),Is&&sn&&I.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-10 z-50",children:I.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50 w-11/12 md:w-1/2",children:[I.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"รายละเอียดการเช็คชื่อ"}),I.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["รหัสเช็คชื่อ: ",sn.code]}),I.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["วัน/เวลา: ",sn.date]}),I.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH",children:["จำนวนนักเรียนที่เช็คชื่อ : ",Fe.filter(de=>de.checked).length," / ",Fe.length]}),I.jsx("div",{className:"mt-4 overflow-x-auto",children:I.jsxs("table",{className:"w-full border",children:[I.jsx("thead",{children:I.jsxs("tr",{className:"bg-blue-100",children:[I.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),I.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสนักเรียน"}),I.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ชื่อ"}),I.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"})]})}),I.jsx("tbody",{children:Fe.map((de,Pe)=>I.jsxs("tr",{className:"hover:bg-blue-50",children:[I.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Pe+1}),I.jsx("td",{className:"border font-ChakraPetchTH p-2",children:de.stdid}),I.jsx("td",{className:"border font-ChakraPetchTH p-2",children:de.name}),I.jsx("td",{className:"border font-ChakraPetchTH p-2",children:de.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็คชื่อ"})]},de.id))})]})}),I.jsxs("div",{className:"flex justify-end mt-4 space-x-4",children:[I.jsx("button",{type:"button",onClick:vt,className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 shadow-xs transition",children:"ลบบันทึกการเช็คชื่อ"}),I.jsx("button",{type:"button",onClick:()=>zi(!1),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 shadow-xs transition",children:"ปิด"})]})]})}),_&&I.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[I.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),I.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:I.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:I.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[I.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:I.jsxs("div",{className:"sm:flex sm:items-start",children:[I.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:I.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),I.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[I.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),I.jsx("div",{className:"mt-2",children:I.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),I.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[I.jsx("button",{type:"button",onClick:()=>{E(!1),Ds()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),I.jsx("button",{type:"button",onClick:()=>E(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]}),Kt&&Nn&&I.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-50 z-50",children:I.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-xl w-11/12 md:w-96 relative",children:[I.jsx("button",{onClick:()=>In(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),I.jsx("h3",{className:"text-xl font-ChakraPetchTH text-center mb-4 text-blue-900",children:"QR Code ลงทะเบียนห้องเรียน"}),I.jsxs("div",{className:"flex flex-col items-center",children:[I.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:I.jsx(S_,{id:"classroom-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/register-classroom/${Nn.id}`,size:200,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),I.jsxs("div",{className:"mt-4 text-center",children:[I.jsx("p",{className:"font-ChakraPetchTH text-lg font-bold text-blue-900",children:Nn.info.name}),I.jsxs("p",{className:"font-InterEN text-gray-600",children:["Code: ",Nn.info.code]}),I.jsxs("p",{className:"font-InterEN text-gray-600",children:["Room: ",Nn.info.room]})]}),I.jsxs("div",{className:"mt-6",children:[I.jsx("button",{onClick:()=>In(!1),className:"bg-blue-600 text-white px-6 py-2 m-2 rounded-lg hover:bg-blue-700 transition font-ChakraPetchTH",children:"ปิด"}),I.jsx("button",{onClick:()=>{const de=document.getElementById("classroom-qr-code"),Pe=document.createElement("canvas"),pt=Pe.getContext("2d"),xt=new XMLSerializer().serializeToString(de),Je=new Image;Je.onload=()=>{Pe.width=Je.width,Pe.height=Je.height,pt.drawImage(Je,0,0);const En=document.createElement("a");En.download=`classroom-${Nn.info.code}.png`,En.href=Pe.toDataURL("image/png"),En.click()},Je.src=`data:image/svg+xml;base64,${btoa(xt)}`},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH mr-2",children:"ดาวน์โหลด QR"})]})]})]})})]})}function jN(){const i=So(),e=ul(Ts),t=$s(),[a,c]=ne.useState(i.currentUser),[f,x]=ne.useState(""),[v,_]=ne.useState(""),[E,C]=ne.useState(!1),[R,k]=ne.useState(""),[j,G]=ne.useState(!1);ne.useEffect(()=>{(async()=>{if(a)try{const he=Wt(e,"users",a.uid),fe=await Ci(he);if(fe.exists()){const re=fe.data();x(re.name||""),_(re.photo||""),G(!1)}}catch(he){console.error("Error loading profile:",he)}})()},[a,e]);const J=async W=>{if(W.preventDefault(),!!a){C(!0),k("");try{await $C(a,{displayName:f,photoURL:v});const he=Wt(e,"users",a.uid);await ls(he,{name:f,photo:v,email:a.email,classroom:{status:1}},{merge:!0}),k("อัปเดตโปรไฟล์สำเร็จแล้ว"),G(!1)}catch(he){console.error("Error updating profile:",he),k("เกิดข้อผิดพลาดในการอัปเดตโปรไฟล์")}C(!1)}};return a?I.jsxs("div",{className:"relative min-h-screen bg-gray-100 p-8",children:[I.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"absolute top-4 left-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:"ไปที่แดชบอร์ด"}),I.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded-lg shadow-lg",children:[I.jsx("h1",{className:"text-2xl font-bold mb-4",children:"แก้ไขโปรไฟล์"}),v?I.jsx("img",{src:v,alt:"Profile",className:"w-32 h-32 rounded-full mx-auto mb-4"}):I.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-300 flex items-center justify-center mx-auto mb-4",children:I.jsx("span",{className:"text-2xl text-white",children:"N/A"})}),j?I.jsxs("form",{onSubmit:J,children:[I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),I.jsx("input",{type:"email",value:a.email||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-200 cursor-not-allowed"})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),I.jsx("input",{type:"text",value:f,onChange:W=>x(W.target.value),placeholder:"กรอกชื่อของคุณ",className:"w-full px-3 py-2 border rounded-lg",required:!0})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),I.jsx("input",{type:"text",value:v,onChange:W=>_(W.target.value),placeholder:"กรอก URL รูปโปรไฟล์",className:"w-full px-3 py-2 border rounded-lg"})]}),R&&I.jsx("div",{className:"mb-4 text-green-500",children:R}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("button",{type:"submit",disabled:E,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:E?"กำลังบันทึก...":"บันทึกการเปลี่ยนแปลง"}),I.jsx("button",{type:"button",onClick:()=>{G(!1),k("")},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-300",children:"ยกเลิก"})]})]}):I.jsxs("div",{children:[I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),I.jsx("p",{className:"px-3 py-2 border rounded-lg bg-gray-200",children:a.email})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),I.jsx("p",{className:"px-3 py-2 border rounded-lg",children:f})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),I.jsx("p",{className:"px-3 py-2 border rounded-lg",children:v})]}),I.jsx("button",{type:"button",onClick:()=>{G(!0),k("")},className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition duration-300",children:"แก้ไขโปรไฟล์"})]})]})]}):I.jsx("div",{className:"min-h-screen flex items-center justify-center",children:I.jsx("p",{children:"ผู้ใช้ยังไม่ได้เข้าสู่ระบบ."})})}function FN(){const{cid:i}=j1(),e=$s(),t=So(),a=ul(Ts),c=t.currentUser,[f,x]=ne.useState(null),[v,_]=ne.useState(""),[E,C]=ne.useState(""),[R,k]=ne.useState(""),[j,G]=ne.useState(""),[J,W]=ne.useState([]),[he,fe]=ne.useState([]),[re,_e]=ne.useState(!1),[je,Ue]=ne.useState(""),[z,F]=ne.useState(""),[P,Y]=ne.useState([]),[Z,$]=ne.useState("");ne.useEffect(()=>{if(i){const Me=Wt(a,"classroom",i);Ci(Me).then(me=>{if(me.exists()){const be=me.data();if(be.owner!==c.uid){Ue("สิทธิ์ไม่พอ คุณไม่ใช่เจ้าของห้องเรียนนี้.");return}x(be),_(be.info.code),C(be.info.name),k(be.info.photo),G(be.info.room)}else Ue("ไม่พบห้องเรียน.")}).catch(me=>{console.error(me),Ue("เกิดข้อผิดพลาดในการดึงข้อมูลห้องเรียน.")});const ae=Mr(a,"classroom",i,"students");vr(ae).then(me=>{const be=[];me.forEach(Xe=>{be.push({id:Xe.id,...Xe.data()})}),W(be)}).catch(me=>console.error("เกิดข้อผิดพลาดในการดึงนักเรียน: ",me));const Ne=Mr(a,"classroom",i,"checkin");vr(Ne).then(me=>{const be=[];me.forEach(Xe=>{be.push({id:Xe.id,...Xe.data()})}),fe(be)}).catch(me=>console.error("เกิดข้อผิดพลาดในการดึงกิจกรรมเช็คอิน: ",me))}},[i,c.uid,a]),ne.useEffect(()=>{(async()=>{try{const ae=Mr(a,"users"),Ne=Iu(ae,Nu("classroom.status","==",2)),me=await vr(Ne),be=[];me.forEach(Xe=>{be.push({id:Xe.id,...Xe.data()})}),Y(be)}catch(ae){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลผู้ใช้: ",ae)}})()},[a]);const X=async Me=>{Me.preventDefault(),_e(!0),F("");try{const ae=Wt(a,"classroom",i);await Jl(ae,{"info.code":v,"info.name":E,"info.photo":R,"info.room":j}),F("แก้ไขห้องเรียนสำเร็จแล้ว.")}catch(ae){console.error("เกิดข้อผิดพลาดในการแก้ไขห้องเรียน: ",ae),F("แก้ไขห้องเรียนไม่สำเร็จ.")}_e(!1)};return je?I.jsx("div",{className:"p-6 text-red-600 text-center",children:je}):f?I.jsxs("div",{className:"min-h-screen bg-blue-50 p-6",children:[I.jsxs("div",{className:"flex items-center justify-between mb-8",children:[I.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน: ",f.info.name]}),I.jsx("button",{onClick:()=>e("/dashboard"),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition",children:"กลับไปที่แดชบอร์ด"})]}),I.jsxs("div",{className:"mb-8",children:[I.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"นักเรียนที่ลงทะเบียน"}),J.length>0?I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full border",children:[I.jsx("thead",{children:I.jsxs("tr",{className:"bg-blue-100",children:[I.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),I.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),I.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),I.jsx("tbody",{children:J.map(Me=>I.jsxs("tr",{className:"hover:bg-blue-50",children:[I.jsx("td",{className:"border p-2",children:Me.stdid}),I.jsx("td",{className:"border p-2",children:Me.name}),I.jsx("td",{className:"border p-2",children:Me.status===0?"รออนุมัติ":"ตรวจสอบแล้ว"})]},Me.id))})]})}):I.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนที่ลงทะเบียน"})]}),I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-8",children:[I.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"เพิ่มนักเรียน"}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-1",children:"เลือกนักเรียน"}),I.jsxs("select",{value:Z,onChange:Me=>$(Me.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:[I.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),P.map(Me=>I.jsxs("option",{value:Me.id,children:[Me.name," (",Me.email,")"]},Me.id))]})]}),I.jsx("button",{onClick:async()=>{if(!Z)return;const Me=P.find(ae=>ae.id===Z);if(Me)try{const ae=Wt(a,"classroom",i,"students",Me.id);await ls(ae,{stdid:Me.id,name:Me.name,status:1}),W([...J,{id:Me.id,stdid:Me.id,name:Me.name,status:1}]),F("เพิ่มนักเรียนสำเร็จแล้ว."),$("")}catch(ae){console.error("เกิดข้อผิดพลาดในการเพิ่มนักเรียน: ",ae),F("เพิ่มนักเรียนไม่สำเร็จ.")}},className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"เพิ่มนักเรียน"})]}),I.jsxs("div",{className:"mb-8",children:[I.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"กิจกรรมเช็คอิน"}),he.length>0?I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full border",children:[I.jsx("thead",{children:I.jsxs("tr",{className:"bg-blue-100",children:[I.jsx("th",{className:"border p-2 text-left",children:"หมายเลขเช็คอิน"}),I.jsx("th",{className:"border p-2 text-left",children:"รหัส"}),I.jsx("th",{className:"border p-2 text-left",children:"วันที่"}),I.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),I.jsx("tbody",{children:he.map(Me=>I.jsxs("tr",{className:"hover:bg-blue-50",children:[I.jsx("td",{className:"border p-2",children:Me.id}),I.jsx("td",{className:"border p-2",children:Me.code}),I.jsx("td",{className:"border p-2",children:Me.date}),I.jsx("td",{className:"border p-2",children:Me.status===0?"ยังไม่เริ่ม":Me.status===1?"กำลังดำเนินการ":"เสร็จสิ้น"})]},Me.id))})]})}):I.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีกิจกรรมเช็คอิน"})]}),I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[I.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"แก้ไขรายละเอียดห้องเรียน"}),I.jsxs("form",{onSubmit:X,children:[I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-1",children:"รหัสวิชา"}),I.jsx("input",{type:"text",value:v,onChange:Me=>_(Me.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อวิชา"}),I.jsx("input",{type:"text",value:E,onChange:Me=>C(Me.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-1",children:"URL รูปภาพ"}),I.jsx("input",{type:"text",value:R,onChange:Me=>k(Me.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),I.jsxs("div",{className:"mb-4",children:[I.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อห้องเรียน"}),I.jsx("input",{type:"text",value:j,onChange:Me=>G(Me.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),I.jsx("button",{type:"submit",disabled:re,className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:re?"กำลังแก้ไข...":"บันทึกการแก้ไข"}),z&&I.jsx("p",{className:"mt-4 text-green-600 text-center",children:z})]})]})]}):I.jsx("div",{className:"p-6 text-center",children:"กำลังโหลดข้อมูลห้องเรียน..."})}var Ze;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ze||(Ze={}));var yx=new Map([[Ze.QR_CODE,"QR_CODE"],[Ze.AZTEC,"AZTEC"],[Ze.CODABAR,"CODABAR"],[Ze.CODE_39,"CODE_39"],[Ze.CODE_93,"CODE_93"],[Ze.CODE_128,"CODE_128"],[Ze.DATA_MATRIX,"DATA_MATRIX"],[Ze.MAXICODE,"MAXICODE"],[Ze.ITF,"ITF"],[Ze.EAN_13,"EAN_13"],[Ze.EAN_8,"EAN_8"],[Ze.PDF_417,"PDF_417"],[Ze.RSS_14,"RSS_14"],[Ze.RSS_EXPANDED,"RSS_EXPANDED"],[Ze.UPC_A,"UPC_A"],[Ze.UPC_E,"UPC_E"],[Ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),xx;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(xx||(xx={}));function zN(i){return Object.values(Ze).includes(i)}var Co;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Co||(Co={}));var _s=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[Co.SCAN_TYPE_CAMERA,Co.SCAN_TYPE_FILE],i}(),I_=function(){function i(e,t){this.format=e,this.formatName=t}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!yx.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,yx.get(e))},i}(),Ex=function(){function i(){}return i.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i}(),L1;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(L1||(L1={}));var N_=function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:L1.UNKWOWN_ERROR}},i}(),R_=function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i}();function qs(i){return typeof i>"u"||i===null}function HN(i,e,t){return i>t?t:i<e?e:i}var Ql=function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}(),dn=function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(e){return"Last Match: ".concat(e)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i}(),wx=function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i}(),D_=function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var a=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(c),x=Object.keys(e),v=0,_=x;v<_.length;v++){var E=_[v];if(f.has(E))return t.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},i}(),gu={exports:{}},GN=gu.exports,_x;function qN(){return _x||(_x=1,function(i,e){(function(t,a){a(e)})(GN,function(t){function a(O){return O==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,r){O.__proto__=r}||function(O,r){for(var o in r)r.hasOwnProperty(o)&&(O[o]=r[o])};function f(O,r){c(O,r);function o(){this.constructor=O}O.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}function x(O,r){var o=Object.setPrototypeOf;o?o(O,r):O.__proto__=r}function v(O,r){r===void 0&&(r=O.constructor);var o=Error.captureStackTrace;o&&o(O,r)}var _=function(O){f(r,O);function r(o){var l=this.constructor,h=O.call(this,o)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),x(h,l.prototype),v(h),h}return r}(Error);class E extends _{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}E.kind="Exception";class C extends E{}C.kind="ArgumentException";class R extends E{}R.kind="IllegalArgumentException";class k{constructor(r){if(this.binarizer=r,r===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,o){return this.binarizer.getBlackRow(r,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,o,l,h){const d=this.binarizer.getLuminanceSource().crop(r,o,l,h);return new k(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends E{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class G{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class J{static arraycopy(r,o,l,h,d){for(;d--;)l[h++]=r[o++]}static currentTimeMillis(){return Date.now()}}class W extends E{}W.kind="IndexOutOfBoundsException";class he extends W{constructor(r=void 0,o=void 0){super(o),this.index=r,this.message=o}}he.kind="ArrayIndexOutOfBoundsException";class fe{static fill(r,o){for(let l=0,h=r.length;l<h;l++)r[l]=o}static fillWithin(r,o,l,h){fe.rangeCheck(r.length,o,l);for(let d=o;d<l;d++)r[d]=h}static rangeCheck(r,o,l){if(o>l)throw new R("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new he(o);if(l>r)throw new he(l)}static asList(...r){return r}static create(r,o,l){return Array.from({length:r}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(r,o,l){return Array.from({length:r}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(r,o){if(!r||!o||!r.length||!o.length||r.length!==o.length)return!1;for(let l=0,h=r.length;l<h;l++)if(r[l]!==o[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let o=1;for(const l of r)o=31*o+l;return o}static fillUint8Array(r,o){for(let l=0;l!==r.length;l++)r[l]=o}static copyOf(r,o){return r.slice(0,o)}static copyOfUint8Array(r,o){if(r.length<=o){const l=new Uint8Array(o);return l.set(r),l}return r.slice(0,o)}static copyOfRange(r,o,l){const h=l-o,d=new Int32Array(h);return J.arraycopy(r,o,d,0,h),d}static binarySearch(r,o,l){l===void 0&&(l=fe.numberComparator);let h=0,d=r.length-1;for(;h<=d;){const m=d+h>>1,p=l(o,r[m]);if(p>0)h=m+1;else if(p<0)d=m-1;else return m}return-h-1}static numberComparator(r,o){return r-o}}class re{static numberOfTrailingZeros(r){let o;if(r===0)return 32;let l=31;return o=r<<16,o!==0&&(l-=16,r=o),o=r<<8,o!==0&&(l-=8,r=o),o=r<<4,o!==0&&(l-=4,r=o),o=r<<2,o!==0&&(l-=2,r=o),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let o=1;return r>>>16||(o+=16,r<<=16),r>>>24||(o+=8,r<<=8),r>>>28||(o+=4,r<<=4),r>>>30||(o+=2,r<<=2),o-=r>>>31,o}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,o){return Math.trunc(r/o)}static parseInt(r,o=void 0){return parseInt(r,o)}}re.MIN_VALUE_32_BITS=-2147483648,re.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _e{constructor(r,o){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,o==null?this.bits=_e.makeArray(r):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const o=_e.makeArray(r);J.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=l[h]}const p=h*32+re.numberOfTrailingZeros(d);return p>o?o:p}getNextUnset(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=~l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=~l[h]}const p=h*32+re.numberOfTrailingZeros(d);return p>o?o:p}setBulk(r,o){this.bits[Math.floor(r/32)]=o}setRange(r,o){if(o<r||r<0||o>this.size)throw new R;if(o===r)return;o--;const l=Math.floor(r/32),h=Math.floor(o/32),d=this.bits;for(let m=l;m<=h;m++){const p=m>l?0:r&31,T=(2<<(m<h?31:o&31))-(1<<p);d[m]|=T}}clear(){const r=this.bits.length,o=this.bits;for(let l=0;l<r;l++)o[l]=0}isRange(r,o,l){if(o<r||r<0||o>this.size)throw new R;if(o===r)return!0;o--;const h=Math.floor(r/32),d=Math.floor(o/32),m=this.bits;for(let p=h;p<=d;p++){const A=p>h?0:r&31,N=(2<<(p<d?31:o&31))-(1<<A)&4294967295;if((m[p]&N)!==(l?N:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,o){if(o<0||o>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const o=r.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new R("Sizes don't match");const o=this.bits;for(let l=0,h=o.length;l<h;l++)o[l]^=r.bits[l]}toBytes(r,o,l,h){for(let d=0;d<h;d++){let m=0;for(let p=0;p<8;p++)this.get(r)&&(m|=1<<7-p),r++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,h=this.bits;for(let d=0;d<l;d++){let m=h[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=r[0]>>>d;for(let p=1;p<l;p++){const A=r[p];m|=A<<32-d,r[p-1]=m,m=A>>>d}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof _e))return!1;const o=r;return this.size===o.size&&fe.equals(this.bits,o.bits)}hashCode(){return 31*this.size+fe.hashCode(this.bits)}toString(){let r="";for(let o=0,l=this.size;o<l;o++)o&7||(r+=" "),r+=this.get(o)?"X":".";return r}clone(){return new _e(this.size,this.bits.slice())}}var je;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(je||(je={}));var Ue=je;class z extends E{static getFormatInstance(){return new z}}z.kind="FormatException";var F;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(F||(F={}));class P{constructor(r,o,l,...h){this.valueIdentifier=r,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=h,P.VALUE_IDENTIFIER_TO_ECI.set(r,this),P.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,p=d.length;m!==p;m++){const A=d[m];P.VALUES_TO_ECI.set(A,this)}for(const m of h)P.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new z("incorect value");const o=P.VALUES_TO_ECI.get(r);if(o===void 0)throw new z("incorect value");return o}static getCharacterSetECIByName(r){const o=P.NAME_TO_ECI.get(r);if(o===void 0)throw new z("incorect value");return o}equals(r){if(!(r instanceof P))return!1;const o=r;return this.getName()===o.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(F.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(F.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(F.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(F.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(F.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(F.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(F.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(F.Big5,28,"Big5"),P.GB18030=new P(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(F.EUC_KR,30,"EUC_KR","EUC-KR");class Y extends E{}Y.kind="UnsupportedOperationException";class Z{static decode(r,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!Z.isBrowser()&&r==="ISO-8859-1"}static encode(r,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof P?r:P.getCharacterSetECIByName(r)}static decodeFallback(r,o){const l=this.encodingCharacterSet(o);if(Z.isDecodeFallbackSupported(l)){let h="";for(let d=0,m=r.length;d<m;d++){let p=r[d].toString(16);p.length<2&&(p="0"+p),h+="%"+p}return decodeURIComponent(h)}if(l.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new Y(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(P.UTF8)||r.equals(P.ISO8859_1)||r.equals(P.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),h=[];for(let d=0;d<l.length;d++)h.push(l[d].charCodeAt(0));return new Uint8Array(h)}}class ${static castAsNonUtf8Char(r,o=null){const l=o?o.getName():this.ISO88591;return Z.decode(new Uint8Array([r]),l)}static guessEncoding(r,o){if(o!=null&&o.get(Ue.CHARACTER_SET)!==void 0)return o.get(Ue.CHARACTER_SET).toString();const l=r.length;let h=!0,d=!0,m=!0,p=0,A=0,T=0,N=0,L=0,B=0,q=0,ee=0,te=0,ue=0,Ee=0;const Be=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ze=0;ze<l&&(h||d||m);ze++){const Re=r[ze]&255;m&&(p>0?Re&128?p--:m=!1:Re&128&&(Re&64?(p++,Re&32?(p++,Re&16?(p++,Re&8?m=!1:N++):T++):A++):m=!1)),h&&(Re>127&&Re<160?h=!1:Re>159&&(Re<192||Re===215||Re===247)&&Ee++),d&&(L>0?Re<64||Re===127||Re>252?d=!1:L--:Re===128||Re===160||Re>239?d=!1:Re>160&&Re<224?(B++,ee=0,q++,q>te&&(te=q)):Re>127?(L++,q=0,ee++,ee>ue&&(ue=ee)):(q=0,ee=0))}return m&&p>0&&(m=!1),d&&L>0&&(d=!1),m&&(Be||A+T+N>0)?$.UTF8:d&&($.ASSUME_SHIFT_JIS||te>=3||ue>=3)?$.SHIFT_JIS:h&&d?te===2&&B===2||Ee*10>=l?$.SHIFT_JIS:$.ISO88591:h?$.ISO88591:d?$.SHIFT_JIS:m?$.UTF8:$.PLATFORM_DEFAULT_ENCODING}static format(r,...o){let l=-1;function h(m,p,A,T,N,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let B=N?parseInt(N.substr(1)):void 0,q;switch(L){case"s":q=o[l];break;case"c":q=o[l][0];break;case"f":q=parseFloat(o[l]).toFixed(m);break;case"p":q=parseFloat(o[l]).toPrecision(m);break;case"e":q=parseFloat(o[l]).toExponential(m);break;case"x":q=parseInt(o[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(o[l],B||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let ee=parseInt(A),te=A&&A[0]+""=="0"?"0":" ";for(;q.length<ee;)q=p!==void 0?q+te:te+q;return q}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}static getBytes(r,o){return Z.encode(r,o)}static getCharCode(r,o=0){return r.charCodeAt(o)}static getCharAt(r){return String.fromCharCode(r)}}$.SHIFT_JIS=P.SJIS.getName(),$.GB2312="GB2312",$.ISO88591=P.ISO8859_1.getName(),$.EUC_JP="EUC_JP",$.UTF8=P.UTF8.getName(),$.PLATFORM_DEFAULT_ENCODING=$.UTF8,$.ASSUME_SHIFT_JIS=!1;class X{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=$.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,o,l){for(let h=o;o<o+l;h++)this.append(r[h]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+1)}substring(r,o){return this.value.substring(r,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+o.length)}}class Me{constructor(r,o,l,h){if(this.width=r,this.height=o,this.rowSize=l,this.bits=h,o==null&&(o=r),this.height=o,r<1||o<1)throw new R("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const o=r.length,l=r[0].length,h=new Me(l,o);for(let d=0;d<o;d++){const m=r[d];for(let p=0;p<l;p++)m[p]&&h.set(p,d)}return h}static parseFromString(r,o,l){if(r===null)throw new R("stringRepresentation cannot be null");const h=new Array(r.length);let d=0,m=0,p=-1,A=0,T=0;for(;T<r.length;)if(r.charAt(T)===`
`||r.charAt(T)==="\r"){if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new R("row lengths do not match");m=d,A++}T++}else if(r.substring(T,T+o.length)===o)T+=o.length,h[d]=!0,d++;else if(r.substring(T,T+l.length)===l)T+=l.length,h[d]=!1,d++;else throw new R("illegal character encountered: "+r.substring(T));if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new R("row lengths do not match");A++}const N=new Me(p,A);for(let L=0;L<d;L++)h[L]&&N.set(Math.floor(L%p),Math.floor(L/p));return N}get(r,o){const l=o*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new R("input matrix dimensions do not match");const o=new _e(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let d=0,m=this.height;d<m;d++){const p=d*l,A=r.getRow(d,o).getBitArray();for(let T=0;T<l;T++)h[p+T]^=A[T]}}clear(){const r=this.bits,o=r.length;for(let l=0;l<o;l++)r[l]=0}setRegion(r,o,l,h){if(o<0||r<0)throw new R("Left and top must be nonnegative");if(h<1||l<1)throw new R("Height and width must be at least 1");const d=r+l,m=o+h;if(m>this.height||d>this.width)throw new R("The region must fit inside the matrix");const p=this.rowSize,A=this.bits;for(let T=o;T<m;T++){const N=T*p;for(let L=r;L<d;L++)A[N+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(r,o){o==null||o.getSize()<this.width?o=new _e(this.width):o.clear();const l=this.rowSize,h=this.bits,d=r*l;for(let m=0;m<l;m++)o.setBulk(m*32,h[d+m]);return o}setRow(r,o){J.arraycopy(o.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),o=this.getHeight();let l=new _e(r),h=new _e(r);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),h=this.getRow(o-1-d,h),l.reverse(),h.reverse(),this.setRow(d,h),this.setRow(o-1-d,l)}getEnclosingRectangle(){const r=this.width,o=this.height,l=this.rowSize,h=this.bits;let d=r,m=o,p=-1,A=-1;for(let T=0;T<o;T++)for(let N=0;N<l;N++){const L=h[T*l+N];if(L!==0){if(T<m&&(m=T),T>A&&(A=T),N*32<d){let B=0;for(;!(L<<31-B&4294967295);)B++;N*32+B<d&&(d=N*32+B)}if(N*32+31>p){let B=31;for(;!(L>>>B);)B--;N*32+B>p&&(p=N*32+B)}}}return p<d||A<m?null:Int32Array.from([d,m,p-d+1,A-m+1])}getTopLeftOnBit(){const r=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const h=l/r;let d=l%r*32;const m=o[l];let p=0;for(;!(m<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,h])}getBottomRightOnBit(){const r=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/r);let d=Math.floor(l%r)*32;const m=o[l];let p=31;for(;!(m>>>p);)p--;return d+=p,Int32Array.from([d,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Me))return!1;const o=r;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&fe.equals(this.bits,o.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+fe.hashCode(this.bits),r}toString(r="X ",o="  ",l=`
`){return this.buildToString(r,o,l)}buildToString(r,o,l){let h=new X;for(let d=0,m=this.height;d<m;d++){for(let p=0,A=this.width;p<A;p++)h.append(this.get(p,d)?r:o);h.append(l)}return h.toString()}clone(){return new Me(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends E{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class Ne extends G{constructor(r){super(r),this.luminances=Ne.EMPTY,this.buckets=new Int32Array(Ne.LUMINANCE_BUCKETS)}getBlackRow(r,o){const l=this.getLuminanceSource(),h=l.getWidth();o==null||o.getSize()<h?o=new _e(h):o.clear(),this.initArrays(h);const d=l.getRow(r,this.luminances),m=this.buckets;for(let A=0;A<h;A++)m[(d[A]&255)>>Ne.LUMINANCE_SHIFT]++;const p=Ne.estimateBlackPoint(m);if(h<3)for(let A=0;A<h;A++)(d[A]&255)<p&&o.set(A);else{let A=d[0]&255,T=d[1]&255;for(let N=1;N<h-1;N++){const L=d[N+1]&255;(T*4-A-L)/2<p&&o.set(N),A=T,T=L}}return o}getBlackMatrix(){const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight(),h=new Me(o,l);this.initArrays(o);const d=this.buckets;for(let A=1;A<5;A++){const T=Math.floor(l*A/5),N=r.getRow(T,this.luminances),L=Math.floor(o*4/5);for(let B=Math.floor(o/5);B<L;B++){const q=N[B]&255;d[q>>Ne.LUMINANCE_SHIFT]++}}const m=Ne.estimateBlackPoint(d),p=r.getMatrix();for(let A=0;A<l;A++){const T=A*o;for(let N=0;N<o;N++)(p[T+N]&255)<m&&h.set(N,A)}return h}createBinarizer(r){return new Ne(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const o=this.buckets;for(let l=0;l<Ne.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(r){const o=r.length;let l=0,h=0,d=0;for(let N=0;N<o;N++)r[N]>d&&(h=N,d=r[N]),r[N]>l&&(l=r[N]);let m=0,p=0;for(let N=0;N<o;N++){const L=N-h,B=r[N]*L*L;B>p&&(m=N,p=B)}if(h>m){const N=h;h=m,m=N}if(m-h<=o/16)throw new ae;let A=m-1,T=-1;for(let N=m-1;N>h;N--){const L=N-h,B=L*L*(m-N)*(l-r[N]);B>T&&(A=N,T=B)}return A<<Ne.LUMINANCE_SHIFT}}Ne.LUMINANCE_BITS=5,Ne.LUMINANCE_SHIFT=8-Ne.LUMINANCE_BITS,Ne.LUMINANCE_BUCKETS=1<<Ne.LUMINANCE_BITS,Ne.EMPTY=Uint8ClampedArray.from([0]);class me extends Ne{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight();if(o>=me.MINIMUM_DIMENSION&&l>=me.MINIMUM_DIMENSION){const h=r.getMatrix();let d=o>>me.BLOCK_SIZE_POWER;o&me.BLOCK_SIZE_MASK&&d++;let m=l>>me.BLOCK_SIZE_POWER;l&me.BLOCK_SIZE_MASK&&m++;const p=me.calculateBlackPoints(h,d,m,o,l),A=new Me(o,l);me.calculateThresholdForBlock(h,d,m,o,l,p,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new me(r)}static calculateThresholdForBlock(r,o,l,h,d,m,p){const A=d-me.BLOCK_SIZE,T=h-me.BLOCK_SIZE;for(let N=0;N<l;N++){let L=N<<me.BLOCK_SIZE_POWER;L>A&&(L=A);const B=me.cap(N,2,l-3);for(let q=0;q<o;q++){let ee=q<<me.BLOCK_SIZE_POWER;ee>T&&(ee=T);const te=me.cap(q,2,o-3);let ue=0;for(let Be=-2;Be<=2;Be++){const ze=m[B+Be];ue+=ze[te-2]+ze[te-1]+ze[te]+ze[te+1]+ze[te+2]}const Ee=ue/25;me.thresholdBlock(r,ee,L,Ee,h,p)}}}static cap(r,o,l){return r<o?o:r>l?l:r}static thresholdBlock(r,o,l,h,d,m){for(let p=0,A=l*d+o;p<me.BLOCK_SIZE;p++,A+=d)for(let T=0;T<me.BLOCK_SIZE;T++)(r[A+T]&255)<=h&&m.set(o+T,l+p)}static calculateBlackPoints(r,o,l,h,d){const m=d-me.BLOCK_SIZE,p=h-me.BLOCK_SIZE,A=new Array(l);for(let T=0;T<l;T++){A[T]=new Int32Array(o);let N=T<<me.BLOCK_SIZE_POWER;N>m&&(N=m);for(let L=0;L<o;L++){let B=L<<me.BLOCK_SIZE_POWER;B>p&&(B=p);let q=0,ee=255,te=0;for(let Ee=0,Be=N*h+B;Ee<me.BLOCK_SIZE;Ee++,Be+=h){for(let ze=0;ze<me.BLOCK_SIZE;ze++){const Re=r[Be+ze]&255;q+=Re,Re<ee&&(ee=Re),Re>te&&(te=Re)}if(te-ee>me.MIN_DYNAMIC_RANGE)for(Ee++,Be+=h;Ee<me.BLOCK_SIZE;Ee++,Be+=h)for(let ze=0;ze<me.BLOCK_SIZE;ze++)q+=r[Be+ze]&255}let ue=q>>me.BLOCK_SIZE_POWER*2;if(te-ee<=me.MIN_DYNAMIC_RANGE&&(ue=ee/2,T>0&&L>0)){const Ee=(A[T-1][L]+2*A[T][L-1]+A[T-1][L-1])/4;ee<Ee&&(ue=Ee)}A[T][L]=ue}}return A}}me.BLOCK_SIZE_POWER=3,me.BLOCK_SIZE=1<<me.BLOCK_SIZE_POWER,me.BLOCK_SIZE_MASK=me.BLOCK_SIZE-1,me.MINIMUM_DIMENSION=me.BLOCK_SIZE*5,me.MIN_DYNAMIC_RANGE=24;class be{constructor(r,o){this.width=r,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,o,l,h){throw new Y("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Y("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Y("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let o=new X;for(let l=0;l<this.height;l++){const h=this.getRow(l,r);for(let d=0;d<this.width;d++){const m=h[d]&255;let p;m<64?p="#":m<128?p="+":m<192?p=".":p=" ",o.append(p)}o.append(`
`)}return o.toString()}}class Xe extends be{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,o){const l=this.delegate.getRow(r,o),h=this.getWidth();for(let d=0;d<h;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let h=0;h<o;h++)l[h]=255-(r[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,o,l,h){return new Xe(this.delegate.crop(r,o,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Xe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Xe(this.delegate.rotateCounterClockwise45())}}class K extends be{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=K.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const o=r.getContext("2d").getImageData(0,0,r.width,r.height);return K.toGrayscaleBuffer(o.data,r.width,r.height)}static toGrayscaleBuffer(r,o,l){const h=new Uint8ClampedArray(o*l);for(let d=0,m=0,p=r.length;d<p;d+=4,m++){let A;if(r[d+3]===0)A=255;else{const N=r[d],L=r[d+1],B=r[d+2];A=306*N+601*L+117*B+512>>10}h[m]=A}return h}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth(),h=r*l;return o===null?o=this.buffer.slice(h,h+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(h,h+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,o,l,h){return super.crop(r,o,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const o=this.getTempCanvasElement(),l=o.getContext("2d"),h=r*K.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(h))*d+Math.abs(Math.sin(h))*m),A=Math.ceil(Math.abs(Math.sin(h))*d+Math.abs(Math.cos(h))*m);return o.width=p,o.height=A,l.translate(p/2,A/2),l.rotate(h),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=K.makeBufferFromCanvasImageData(o),this}invert(){return new Xe(this)}}K.DEGREE_TO_RADIANS=Math.PI/180;class ve{constructor(r,o,l){this.deviceId=r,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Fe=(globalThis||Fh||self||window||void 0)&&(globalThis||Fh||self||window||void 0).__awaiter||function(O,r,o,l){function h(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function p(N){try{T(l.next(N))}catch(L){m(L)}}function A(N){try{T(l.throw(N))}catch(L){m(L)}}function T(N){N.done?d(N.value):h(N.value).then(p,A)}T((l=l.apply(O,r||[])).next())})};class Ge{constructor(r,o=500,l){this.reader=r,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Fe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of r){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,p=l.groupId,A={deviceId:d,label:m,kind:h,groupId:p};o.push(A)}return o})}getVideoInputDevices(){return Fe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new ve(o.deviceId,o.label))})}findDeviceById(r){return Fe(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,o){return Fe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,o)})}decodeOnceFromVideoDevice(r,o){return Fe(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,o)})}decodeOnceFromConstraints(r,o){return Fe(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(r,o){return Fe(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,o,l){return Fe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,o,l)})}decodeFromVideoDevice(r,o,l){return Fe(this,void 0,void 0,function*(){let h;r?h={deviceId:{exact:r}}:h={facingMode:"environment"};const d={video:h};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(r,o,l){return Fe(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(h,o,l)})}decodeFromStream(r,o,l){return Fe(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(r,o);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,o){return Fe(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((o,l)=>this.playVideoOnLoad(r,()=>o()))}playVideoOnLoad(r,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",o),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Fe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,o){const l=document.getElementById(r);if(!l)throw new C(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new C(`element with id '${r}' must be an ${o} element`);return l}decodeFromImage(r,o){if(!r&&!o)throw new C("either imageElement with a src set or an url must be provided");return o&&!r?this.decodeFromImageUrl(o):this.decodeFromImageElement(r)}decodeFromVideo(r,o){if(!r&&!o)throw new C("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,o,l){if(r===void 0&&o===void 0)throw new C("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const o=this.prepareImageElement(r);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(r){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(r,o){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const o=this.prepareVideoElement(r);return this.videoElement=o,o}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=r,l}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=r,l}decodeFromVideoUrlContinuously(r,o){if(!r)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,o);return l.src=r,h}_decodeOnLoadImage(r){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(o,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Fe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,o){return Fe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,o)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let o;return typeof r>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(o=r),o}prepareVideoElement(r){let o;return!r&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(o=r),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(r,o=!0,l=!0){this._stopAsyncDecode=!1;const h=(d,m)=>{if(this._stopAsyncDecode){m(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(r);d(p)}catch(p){const A=o&&p instanceof ae,N=(p instanceof j||p instanceof z)&&l;if(A||N)return setTimeout(h,this._timeBetweenDecodingAttempts,d,m);m(p)}};return new Promise((d,m)=>h(d,m))}decodeContinuously(r,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(r);o(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){o(null,h);const d=h instanceof j||h instanceof z,m=h instanceof ae;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const o=this.createBinaryBitmap(r);return this.decodeBitmap(o)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,o,l){o||(o={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(r,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const o=this.getCaptureCanvas(r),l=new K(o),h=new me(l);return new k(h)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const o=this.createCaptureCanvas(r);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,h;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,h=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,h=r.naturalHeight||r.height)),o.style.width=l+"px",o.style.height=h+"px",o.width=l,o.height=h,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,o){try{r.srcObject=o}catch{r.src=URL.createObjectURL(o)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Oe{constructor(r,o,l=o==null?0:8*o.length,h,d,m=J.currentTimeMillis()){this.text=r,this.rawBytes=o,this.numBits=l,this.resultPoints=h,this.format=d,this.timestamp=m,this.text=r,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=h,this.format=d,this.resultMetadata=null,m==null?this.timestamp=J.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,o)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const o=this.resultPoints;if(o===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(o.length+r.length);J.arraycopy(o,0,l,0,o.length),J.arraycopy(r,0,l,o.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ot;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ot||(ot={}));var Le=ot,ke;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ke||(ke={}));var He=ke;class nt{constructor(r,o,l,h,d=-1,m=-1){this.rawBytes=r,this.text=o,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class tt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}static addOrSubtract(r,o){return r^o}}class ht{constructor(r,o){if(o.length===0)throw new R;this.field=r;const l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),J.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(r===1){l=0;for(let m=0,p=o.length;m!==p;m++){const A=o[m];l=tt.addOrSubtract(l,A)}return l}l=o[0];const h=o.length,d=this.field;for(let m=1;m<h;m++)l=tt.addOrSubtract(d.multiply(r,l),o[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let h=new Int32Array(l.length);const d=l.length-o.length;J.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=tt.addOrSubtract(o[m-d],l[m]);return new ht(this.field,h)}multiply(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1),p=this.field;for(let A=0;A<l;A++){const T=o[A];for(let N=0;N<d;N++)m[A+N]=tt.addOrSubtract(m[A+N],p.multiply(T,h[N]))}return new ht(p,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const o=this.coefficients.length,l=this.field,h=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)h[m]=l.multiply(d[m],r);return new ht(l,h)}multiplyByMonomial(r,o){if(r<0)throw new R;if(o===0)return this.field.getZero();const l=this.coefficients,h=l.length,d=new Int32Array(h+r),m=this.field;for(let p=0;p<h;p++)d[p]=m.multiply(l[p],o);return new ht(m,d)}divide(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new R("Divide by 0");const o=this.field;let l=o.getZero(),h=this;const d=r.getCoefficient(r.getDegree()),m=o.inverse(d);for(;h.getDegree()>=r.getDegree()&&!h.isZero();){const p=h.getDegree()-r.getDegree(),A=o.multiply(h.getCoefficient(h.getDegree()),m),T=r.multiplyByMonomial(p,A),N=o.buildMonomial(p,A);l=l.addOrSubtract(N),h=h.addOrSubtract(T)}return[l,h]}toString(){let r="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),o===0||l!==1){const h=this.field.log(l);h===0?r+="1":h===1?r+="a":(r+="a^",r+=h)}o!==0&&(o===1?r+="x":(r+="x^",r+=o))}}return r}}class Pn extends E{}Pn.kind="ArithmeticException";class gt extends tt{constructor(r,o,l){super(),this.primitive=r,this.size=o,this.generatorBase=l;const h=new Int32Array(o);let d=1;for(let p=0;p<o;p++)h[p]=d,d*=2,d>=o&&(d^=r,d&=o-1);this.expTable=h;const m=new Int32Array(o);for(let p=0;p<o-1;p++)m[h[p]]=p;this.logTable=m,this.zero=new ht(this,Int32Array.from([0])),this.one=new ht(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new R;if(o===0)return this.zero;const l=new Int32Array(r+1);return l[0]=o,new ht(this,l)}inverse(r){if(r===0)throw new Pn;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+re.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}gt.AZTEC_DATA_12=new gt(4201,4096,1),gt.AZTEC_DATA_10=new gt(1033,1024,1),gt.AZTEC_DATA_6=new gt(67,64,1),gt.AZTEC_PARAM=new gt(19,16,1),gt.QR_CODE_FIELD_256=new gt(285,256,0),gt.DATA_MATRIX_FIELD_256=new gt(301,256,1),gt.AZTEC_DATA_8=gt.DATA_MATRIX_FIELD_256,gt.MAXICODE_FIELD_64=gt.AZTEC_DATA_6;class cr extends E{}cr.kind="ReedSolomonException";class vn extends E{}vn.kind="IllegalStateException";class Yn{constructor(r){this.field=r}decode(r,o){const l=this.field,h=new ht(l,r),d=new Int32Array(o);let m=!0;for(let q=0;q<o;q++){const ee=h.evaluateAt(l.exp(q+l.getGeneratorBase()));d[d.length-1-q]=ee,ee!==0&&(m=!1)}if(m)return;const p=new ht(l,d),A=this.runEuclideanAlgorithm(l.buildMonomial(o,1),p,o),T=A[0],N=A[1],L=this.findErrorLocations(T),B=this.findErrorMagnitudes(N,L);for(let q=0;q<L.length;q++){const ee=r.length-1-l.log(L[q]);if(ee<0)throw new cr("Bad error location");r[ee]=gt.addOrSubtract(r[ee],B[q])}}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){const q=r;r=o,o=q}const h=this.field;let d=r,m=o,p=h.getZero(),A=h.getOne();for(;m.getDegree()>=(l/2|0);){let q=d,ee=p;if(d=m,p=A,d.isZero())throw new cr("r_{i-1} was zero");m=q;let te=h.getZero();const ue=d.getCoefficient(d.getDegree()),Ee=h.inverse(ue);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const Be=m.getDegree()-d.getDegree(),ze=h.multiply(m.getCoefficient(m.getDegree()),Ee);te=te.addOrSubtract(h.buildMonomial(Be,ze)),m=m.addOrSubtract(d.multiplyByMonomial(Be,ze))}if(A=te.multiply(p).addOrSubtract(ee),m.getDegree()>=d.getDegree())throw new vn("Division algorithm failed to reduce polynomial?")}const T=A.getCoefficient(0);if(T===0)throw new cr("sigmaTilde(0) was zero");const N=h.inverse(T),L=A.multiplyScalar(N),B=m.multiplyScalar(N);return[L,B]}findErrorLocations(r){const o=r.getDegree();if(o===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(o);let h=0;const d=this.field;for(let m=1;m<d.getSize()&&h<o;m++)r.evaluateAt(m)===0&&(l[h]=d.inverse(m),h++);if(h!==o)throw new cr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,o){const l=o.length,h=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const p=d.inverse(o[m]);let A=1;for(let T=0;T<l;T++)if(m!==T){const N=d.multiply(o[T],p),L=N&1?N&-2:N|1;A=d.multiply(A,L)}h[m]=d.multiply(r.evaluateAt(p),d.inverse(A)),d.getGeneratorBase()!==0&&(h[m]=d.multiply(h[m],p))}return h}}var cn;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(cn||(cn={}));class Ct{decode(r){this.ddata=r;let o=r.getBits(),l=this.extractBits(o),h=this.correctBits(l),d=Ct.convertBoolArrayToByteArray(h),m=Ct.getEncodedData(h),p=new nt(d,m,null,null);return p.setNumBits(h.length),p}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let o=r.length,l=cn.UPPER,h=cn.UPPER,d="",m=0;for(;m<o;)if(h===cn.BINARY){if(o-m<5)break;let p=Ct.readCode(r,m,5);if(m+=5,p===0){if(o-m<11)break;p=Ct.readCode(r,m,11)+31,m+=11}for(let A=0;A<p;A++){if(o-m<8){m=o;break}const T=Ct.readCode(r,m,8);d+=$.castAsNonUtf8Char(T),m+=8}h=l}else{let p=h===cn.DIGIT?4:5;if(o-m<p)break;let A=Ct.readCode(r,m,p);m+=p;let T=Ct.getCharacter(h,A);T.startsWith("CTRL_")?(l=h,h=Ct.getTable(T.charAt(5)),T.charAt(6)==="L"&&(l=h)):(d+=T,h=l)}return d}static getTable(r){switch(r){case"L":return cn.LOWER;case"P":return cn.PUNCT;case"M":return cn.MIXED;case"D":return cn.DIGIT;case"B":return cn.BINARY;case"U":default:return cn.UPPER}}static getCharacter(r,o){switch(r){case cn.UPPER:return Ct.UPPER_TABLE[o];case cn.LOWER:return Ct.LOWER_TABLE[o];case cn.MIXED:return Ct.MIXED_TABLE[o];case cn.PUNCT:return Ct.PUNCT_TABLE[o];case cn.DIGIT:return Ct.DIGIT_TABLE[o];default:throw new vn("Bad table")}}correctBits(r){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=gt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=gt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=gt.AZTEC_DATA_10):(l=12,o=gt.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),d=r.length/l;if(d<h)throw new z;let m=r.length%l,p=new Int32Array(d);for(let B=0;B<d;B++,m+=l)p[B]=Ct.readCode(r,m,l);try{new Yn(o).decode(p,d-h)}catch(B){throw new z(B)}let A=(1<<l)-1,T=0;for(let B=0;B<h;B++){let q=p[B];if(q===0||q===A)throw new z;(q===1||q===A-1)&&T++}let N=new Array(h*l-T),L=0;for(let B=0;B<h;B++){let q=p[B];if(q===1||q===A-1)N.fill(q>1,L,L+l-1),L+=l-1;else for(let ee=l-1;ee>=0;--ee)N[L++]=(q&1<<ee)!==0}return N}extractBits(r){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(o?11:14)+l*4,d=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let p=0;p<d.length;p++)d[p]=p;else{let p=h+1+2*re.truncDivision(re.truncDivision(h,2)-1,15),A=h/2,T=re.truncDivision(p,2);for(let N=0;N<A;N++){let L=N+re.truncDivision(N,15);d[A-N-1]=T-L-1,d[A+N]=T+L+1}}for(let p=0,A=0;p<l;p++){let T=(l-p)*4+(o?9:12),N=p*2,L=h-1-N;for(let B=0;B<T;B++){let q=B*2;for(let ee=0;ee<2;ee++)m[A+q+ee]=r.get(d[N+ee],d[N+B]),m[A+2*T+q+ee]=r.get(d[N+B],d[L-ee]),m[A+4*T+q+ee]=r.get(d[L-ee],d[L-B]),m[A+6*T+q+ee]=r.get(d[L-B],d[N+ee])}A+=T*8}return m}static readCode(r,o,l){let h=0;for(let d=o;d<o+l;d++)h<<=1,r[d]&&(h|=1);return h}static readByte(r,o){let l=r.length-o;return l>=8?Ct.readCode(r,o,8):Ct.readCode(r,o,l)<<8-l}static convertBoolArrayToByteArray(r){let o=new Uint8Array((r.length+7)/8);for(let l=0;l<o.length;l++)o[l]=Ct.readByte(r,8*l);return o}totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}Ct.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ct.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ct.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ct.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ct.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class At{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,o,l,h){const d=r-l,m=o-h;return Math.sqrt(d*d+m*m)}static sum(r){let o=0;for(let l=0,h=r.length;l!==h;l++){const d=r[l];o+=d}return o}}class yn{static floatToIntBits(r){return r}}yn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class We{constructor(r,o){this.x=r,this.y=o}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof We){const o=r;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*yn.floatToIntBits(this.x)+yn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const o=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),h=this.distance(r[0],r[2]);let d,m,p;if(l>=o&&l>=h?(m=r[0],d=r[1],p=r[2]):h>=l&&h>=o?(m=r[1],d=r[0],p=r[2]):(m=r[2],d=r[0],p=r[1]),this.crossProductZ(d,m,p)<0){const A=d;d=p,p=A}r[0]=d,r[1]=m,r[2]=p}static distance(r,o){return At.distance(r.x,r.y,o.x,o.y)}static crossProductZ(r,o,l){const h=o.x,d=o.y;return(l.x-h)*(r.y-d)-(l.y-d)*(r.x-h)}}class Is{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class zi extends Is{constructor(r,o,l,h,d){super(r,o),this.compact=l,this.nbDatablocks=h,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class sn{constructor(r,o,l,h){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),o==null&&(o=sn.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),h==null&&(h=r.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=h-d,this.downInit=h+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let r=this.leftInit,o=this.rightInit,l=this.upInit,h=this.downInit,d=!1,m=!0,p=!1,A=!1,T=!1,N=!1,L=!1;const B=this.width,q=this.height;for(;m;){m=!1;let ee=!0;for(;(ee||!A)&&o<B;)ee=this.containsBlackPoint(l,h,o,!1),ee?(o++,m=!0,A=!0):A||o++;if(o>=B){d=!0;break}let te=!0;for(;(te||!T)&&h<q;)te=this.containsBlackPoint(r,o,h,!0),te?(h++,m=!0,T=!0):T||h++;if(h>=q){d=!0;break}let ue=!0;for(;(ue||!N)&&r>=0;)ue=this.containsBlackPoint(l,h,r,!1),ue?(r--,m=!0,N=!0):N||r--;if(r<0){d=!0;break}let Ee=!0;for(;(Ee||!L)&&l>=0;)Ee=this.containsBlackPoint(r,o,l,!0),Ee?(l--,m=!0,L=!0):L||l--;if(l<0){d=!0;break}m&&(p=!0)}if(!d&&p){const ee=o-r;let te=null;for(let ze=1;te===null&&ze<ee;ze++)te=this.getBlackPointOnSegment(r,h-ze,r+ze,h);if(te==null)throw new ae;let ue=null;for(let ze=1;ue===null&&ze<ee;ze++)ue=this.getBlackPointOnSegment(r,l+ze,r+ze,l);if(ue==null)throw new ae;let Ee=null;for(let ze=1;Ee===null&&ze<ee;ze++)Ee=this.getBlackPointOnSegment(o,l+ze,o-ze,l);if(Ee==null)throw new ae;let Be=null;for(let ze=1;Be===null&&ze<ee;ze++)Be=this.getBlackPointOnSegment(o,h-ze,o-ze,h);if(Be==null)throw new ae;return this.centerEdges(Be,te,Ee,ue)}else throw new ae}getBlackPointOnSegment(r,o,l,h){const d=At.round(At.distance(r,o,l,h)),m=(l-r)/d,p=(h-o)/d,A=this.image;for(let T=0;T<d;T++){const N=At.round(r+T*m),L=At.round(o+T*p);if(A.get(N,L))return new We(N,L)}return null}centerEdges(r,o,l,h){const d=r.getX(),m=r.getY(),p=o.getX(),A=o.getY(),T=l.getX(),N=l.getY(),L=h.getX(),B=h.getY(),q=sn.CORR;return d<this.width/2?[new We(L-q,B+q),new We(p+q,A+q),new We(T-q,N-q),new We(d+q,m-q)]:[new We(L+q,B+q),new We(p+q,A-q),new We(T-q,N+q),new We(d-q,m-q)]}containsBlackPoint(r,o,l,h){const d=this.image;if(h){for(let m=r;m<=o;m++)if(d.get(m,l))return!0}else for(let m=r;m<=o;m++)if(d.get(l,m))return!0;return!1}}sn.INIT_SIZE=10,sn.CORR=1;class Ns{static checkAndNudgePoints(r,o){const l=r.getWidth(),h=r.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const p=Math.floor(o[m]),A=Math.floor(o[m+1]);if(p<-1||p>l||A<-1||A>h)throw new ae;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===h&&(o[m+1]=h-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const p=Math.floor(o[m]),A=Math.floor(o[m+1]);if(p<-1||p>l||A<-1||A>h)throw new ae;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===h&&(o[m+1]=h-1,d=!0)}}}class Kt{constructor(r,o,l,h,d,m,p,A,T){this.a11=r,this.a21=o,this.a31=l,this.a12=h,this.a22=d,this.a32=m,this.a13=p,this.a23=A,this.a33=T}static quadrilateralToQuadrilateral(r,o,l,h,d,m,p,A,T,N,L,B,q,ee,te,ue){const Ee=Kt.quadrilateralToSquare(r,o,l,h,d,m,p,A);return Kt.squareToQuadrilateral(T,N,L,B,q,ee,te,ue).times(Ee)}transformPoints(r){const o=r.length,l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,A=this.a23,T=this.a31,N=this.a32,L=this.a33;for(let B=0;B<o;B+=2){const q=r[B],ee=r[B+1],te=d*q+A*ee+L;r[B]=(l*q+m*ee+T)/te,r[B+1]=(h*q+p*ee+N)/te}}transformPointsWithValues(r,o){const l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,A=this.a23,T=this.a31,N=this.a32,L=this.a33,B=r.length;for(let q=0;q<B;q++){const ee=r[q],te=o[q],ue=d*ee+A*te+L;r[q]=(l*ee+m*te+T)/ue,o[q]=(h*ee+p*te+N)/ue}}static squareToQuadrilateral(r,o,l,h,d,m,p,A){const T=r-l+d-p,N=o-h+m-A;if(T===0&&N===0)return new Kt(l-r,d-l,r,h-o,m-h,o,0,0,1);{const L=l-d,B=p-d,q=h-m,ee=A-m,te=L*ee-B*q,ue=(T*ee-B*N)/te,Ee=(L*N-T*q)/te;return new Kt(l-r+ue*l,p-r+Ee*p,r,h-o+ue*h,A-o+Ee*A,o,ue,Ee,1)}}static quadrilateralToSquare(r,o,l,h,d,m,p,A){return Kt.squareToQuadrilateral(r,o,l,h,d,m,p,A).buildAdjoint()}buildAdjoint(){return new Kt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Kt(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class In extends Ns{sampleGrid(r,o,l,h,d,m,p,A,T,N,L,B,q,ee,te,ue,Ee,Be,ze){const Re=Kt.quadrilateralToQuadrilateral(h,d,m,p,A,T,N,L,B,q,ee,te,ue,Ee,Be,ze);return this.sampleGridWithTransform(r,o,l,Re)}sampleGridWithTransform(r,o,l,h){if(o<=0||l<=0)throw new ae;const d=new Me(o,l),m=new Float32Array(2*o);for(let p=0;p<l;p++){const A=m.length,T=p+.5;for(let N=0;N<A;N+=2)m[N]=N/2+.5,m[N+1]=T;h.transformPoints(m),Ns.checkAndNudgePoints(r,m);try{for(let N=0;N<A;N+=2)r.get(Math.floor(m[N]),Math.floor(m[N+1]))&&d.set(N/2,p)}catch{throw new ae}}return d}}class Nn{static setGridSampler(r){Nn.gridSampler=r}static getInstance(){return Nn.gridSampler}}Nn.gridSampler=new In;class Xn{constructor(r,o){this.x=r,this.y=o}toResultPoint(){return new We(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Rs{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new zi(h,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ae;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],o),this.sampleLine(r[1],r[2],o),this.sampleLine(r[2],r[3],o),this.sampleLine(r[3],r[0],o)]);this.shift=this.getRotation(l,o);let h=0;for(let m=0;m<4;m++){let p=l[(this.shift+m)%4];this.compact?(h<<=7,h+=p>>1&127):(h<<=10,h+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,o){let l=0;r.forEach((h,d,m)=>{let p=(h>>o-2<<1)+(h&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(re.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new ae}getCorrectedParameterData(r,o){let l,h;o?(l=7,h=2):(l=10,h=4);let d=l-h,m=new Int32Array(l);for(let A=l-1;A>=0;--A)m[A]=r&15,r>>=4;try{new Yn(gt.AZTEC_PARAM).decode(m,d)}catch{throw new ae}let p=0;for(let A=0;A<h;A++)p=(p<<4)+m[A];return p}getBullsEyeCorners(r){let o=r,l=r,h=r,d=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(o,m,1,-1),B=this.getFirstDifferent(l,m,1,1),q=this.getFirstDifferent(h,m,-1,1),ee=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let te=this.distancePoint(ee,L)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(te<.75||te>1.25||!this.isWhiteOrBlackRectangle(L,B,q,ee))break}o=L,l=B,h=q,d=ee,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let p=new We(o.getX()+.5,o.getY()-.5),A=new We(l.getX()+.5,l.getY()+.5),T=new We(h.getX()-.5,h.getY()+.5),N=new We(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,A,T,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,o,l,h;try{let p=new sn(this.image).detect();r=p[0],o=p[1],l=p[2],h=p[3]}catch{let A=this.image.getWidth()/2,T=this.image.getHeight()/2;r=this.getFirstDifferent(new Xn(A+7,T-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Xn(A+7,T+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Xn(A-7,T+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Xn(A-7,T-7),!1,-1,-1).toResultPoint()}let d=At.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=At.round((r.getY()+h.getY()+o.getY()+l.getY())/4);try{let p=new sn(this.image,15,d,m).detect();r=p[0],o=p[1],l=p[2],h=p[3]}catch{r=this.getFirstDifferent(new Xn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Xn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Xn(d-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Xn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=At.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=At.round((r.getY()+h.getY()+o.getY()+l.getY())/4),new Xn(d,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,o,l,h,d){let m=Nn.getInstance(),p=this.getDimension(),A=p/2-this.nbCenterLayers,T=p/2+this.nbCenterLayers;return m.sampleGrid(r,p,p,A,A,T,A,T,T,A,T,o.getX(),o.getY(),l.getX(),l.getY(),h.getX(),h.getY(),d.getX(),d.getY())}sampleLine(r,o,l){let h=0,d=this.distanceResultPoint(r,o),m=d/l,p=r.getX(),A=r.getY(),T=m*(o.getX()-r.getX())/d,N=m*(o.getY()-r.getY())/d;for(let L=0;L<l;L++)this.image.get(At.round(p+L*T),At.round(A+L*N))&&(h|=1<<l-L-1);return h}isWhiteOrBlackRectangle(r,o,l,h){let d=3;r=new Xn(r.getX()-d,r.getY()+d),o=new Xn(o.getX()-d,o.getY()-d),l=new Xn(l.getX()+d,l.getY()-d),h=new Xn(h.getX()+d,h.getY()+d);let m=this.getColor(h,r);if(m===0)return!1;let p=this.getColor(r,o);return p!==m||(p=this.getColor(o,l),p!==m)?!1:(p=this.getColor(l,h),p===m)}getColor(r,o){let l=this.distancePoint(r,o),h=(o.getX()-r.getX())/l,d=(o.getY()-r.getY())/l,m=0,p=r.getX(),A=r.getY(),T=this.image.get(r.getX(),r.getY()),N=Math.ceil(l);for(let B=0;B<N;B++)p+=h,A+=d,this.image.get(At.round(p),At.round(A))!==T&&m++;let L=m/l;return L>.1&&L<.9?0:L<=.1===T?1:-1}getFirstDifferent(r,o,l,h){let d=r.getX()+l,m=r.getY()+h;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=h;for(d-=l,m-=h;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=h;return m-=h,new Xn(d,m)}expandSquare(r,o,l){let h=l/(2*o),d=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),p=(r[0].getX()+r[2].getX())/2,A=(r[0].getY()+r[2].getY())/2,T=new We(p+h*d,A+h*m),N=new We(p-h*d,A-h*m);d=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),p=(r[1].getX()+r[3].getX())/2,A=(r[1].getY()+r[3].getY())/2;let L=new We(p+h*d,A+h*m),B=new We(p-h*d,A-h*m);return[T,L,N,B]}isValid(r,o){return r>=0&&r<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(r){let o=At.round(r.getX()),l=At.round(r.getY());return this.isValid(o,l)}distancePoint(r,o){return At.distance(r.getX(),r.getY(),o.getX(),o.getY())}distanceResultPoint(r,o){return At.distance(r.getX(),r.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(re.truncDivision(this.nbLayers-4,8)+1)+15}}class Ds{decode(r,o=null){let l=null,h=new Rs(r.getBlackMatrix()),d=null,m=null;try{let N=h.detectMirror(!1);d=N.getPoints(),this.reportFoundResultPoints(o,d),m=new Ct().decode(N)}catch(N){l=N}if(m==null)try{let N=h.detectMirror(!0);d=N.getPoints(),this.reportFoundResultPoints(o,d),m=new Ct().decode(N)}catch(N){throw l??N}let p=new Oe(m.getText(),m.getRawBytes(),m.getNumBits(),d,Le.AZTEC,J.currentTimeMillis()),A=m.getByteSegments();A!=null&&p.putMetadata(He.BYTE_SEGMENTS,A);let T=m.getECLevel();return T!=null&&p.putMetadata(He.ERROR_CORRECTION_LEVEL,T),p}reportFoundResultPoints(r,o){if(r!=null){let l=r.get(Ue.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((h,d,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class hs extends Ge{constructor(r=500){super(new Ds,r)}}class an{decode(r,o){try{return this.doDecode(r,o)}catch{if(o&&o.get(Ue.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),m=this.doDecode(d,o),p=m.getResultMetadata();let A=270;p!==null&&p.get(He.ORIENTATION)===!0&&(A=A+p.get(He.ORIENTATION)%360),m.putMetadata(He.ORIENTATION,A);const T=m.getResultPoints();if(T!==null){const N=d.getHeight();for(let L=0;L<T.length;L++)T[L]=new We(N-T[L].getY()-1,T[L].getX())}return m}else throw new ae}}reset(){}doDecode(r,o){const l=r.getWidth(),h=r.getHeight();let d=new _e(l);const m=o&&o.get(Ue.TRY_HARDER)===!0,p=Math.max(1,h>>(m?8:5));let A;m?A=h:A=15;const T=Math.trunc(h/2);for(let N=0;N<A;N++){const L=Math.trunc((N+1)/2),B=(N&1)===0,q=T+p*(B?L:-L);if(q<0||q>=h)break;try{d=r.getBlackRow(q,d)}catch{continue}for(let ee=0;ee<2;ee++){if(ee===1&&(d.reverse(),o&&o.get(Ue.NEED_RESULT_POINT_CALLBACK)===!0)){const te=new Map;o.forEach((ue,Ee)=>te.set(Ee,ue)),te.delete(Ue.NEED_RESULT_POINT_CALLBACK),o=te}try{const te=this.decodeRow(q,d,o);if(ee===1){te.putMetadata(He.ORIENTATION,180);const ue=te.getResultPoints();ue!==null&&(ue[0]=new We(l-ue[0].getX()-1,ue[0].getY()),ue[1]=new We(l-ue[1].getX()-1,ue[1].getY()))}return te}catch{}}}throw new ae}static recordPattern(r,o,l){const h=l.length;for(let T=0;T<h;T++)l[T]=0;const d=r.getSize();if(o>=d)throw new ae;let m=!r.get(o),p=0,A=o;for(;A<d;){if(r.get(A)!==m)l[p]++;else{if(++p===h)break;l[p]=1,m=!m}A++}if(!(p===h||p===h-1&&A===d))throw new ae}static recordPatternInReverse(r,o,l){let h=l.length,d=r.get(o);for(;o>0&&h>=0;)r.get(--o)!==d&&(h--,d=!d);if(h>=0)throw new ae;an.recordPattern(r,o+1,l)}static patternMatchVariance(r,o,l){const h=r.length;let d=0,m=0;for(let T=0;T<h;T++)d+=r[T],m+=o[T];if(d<m)return Number.POSITIVE_INFINITY;const p=d/m;l*=p;let A=0;for(let T=0;T<h;T++){const N=r[T],L=o[T]*p,B=N>L?N-L:L-N;if(B>l)return Number.POSITIVE_INFINITY;A+=B}return A/d}}class Ve extends an{static findStartPattern(r){const o=r.getSize(),l=r.getNextSet(0);let h=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,p=!1;const A=6;for(let T=l;T<o;T++)if(r.get(T)!==p)d[h]++;else{if(h===A-1){let N=Ve.MAX_AVG_VARIANCE,L=-1;for(let B=Ve.CODE_START_A;B<=Ve.CODE_START_C;B++){const q=an.patternMatchVariance(d,Ve.CODE_PATTERNS[B],Ve.MAX_INDIVIDUAL_VARIANCE);q<N&&(N=q,L=B)}if(L>=0&&r.isRange(Math.max(0,m-(T-m)/2),m,!1))return Int32Array.from([m,T,L]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,p=!p}throw new ae}static decodeCode(r,o,l){an.recordPattern(r,l,o);let h=Ve.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Ve.CODE_PATTERNS.length;m++){const p=Ve.CODE_PATTERNS[m],A=this.patternMatchVariance(o,p,Ve.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,d=m)}if(d>=0)return d;throw new ae}decodeRow(r,o,l){const h=l&&l.get(Ue.ASSUME_GS1)===!0,d=Ve.findStartPattern(o),m=d[2];let p=0;const A=new Uint8Array(20);A[p++]=m;let T;switch(m){case Ve.CODE_START_A:T=Ve.CODE_CODE_A;break;case Ve.CODE_START_B:T=Ve.CODE_CODE_B;break;case Ve.CODE_START_C:T=Ve.CODE_CODE_C;break;default:throw new z}let N=!1,L=!1,B="",q=d[0],ee=d[1];const te=Int32Array.from([0,0,0,0,0,0]);let ue=0,Ee=0,Be=m,ze=0,Re=!0,Dt=!1,ft=!1;for(;!N;){const oa=L;switch(L=!1,ue=Ee,Ee=Ve.decodeCode(o,te,ee),A[p++]=Ee,Ee!==Ve.CODE_STOP&&(Re=!0),Ee!==Ve.CODE_STOP&&(ze++,Be+=ze*Ee),q=ee,ee+=te.reduce((Gu,Mi)=>Gu+Mi,0),Ee){case Ve.CODE_START_A:case Ve.CODE_START_B:case Ve.CODE_START_C:throw new z}switch(T){case Ve.CODE_CODE_A:if(Ee<64)ft===Dt?B+=String.fromCharCode(32+Ee):B+=String.fromCharCode(32+Ee+128),ft=!1;else if(Ee<96)ft===Dt?B+=String.fromCharCode(Ee-64):B+=String.fromCharCode(Ee+64),ft=!1;else switch(Ee!==Ve.CODE_STOP&&(Re=!1),Ee){case Ve.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case Ve.CODE_FNC_2:case Ve.CODE_FNC_3:break;case Ve.CODE_FNC_4_A:!Dt&&ft?(Dt=!0,ft=!1):Dt&&ft?(Dt=!1,ft=!1):ft=!0;break;case Ve.CODE_SHIFT:L=!0,T=Ve.CODE_CODE_B;break;case Ve.CODE_CODE_B:T=Ve.CODE_CODE_B;break;case Ve.CODE_CODE_C:T=Ve.CODE_CODE_C;break;case Ve.CODE_STOP:N=!0;break}break;case Ve.CODE_CODE_B:if(Ee<96)ft===Dt?B+=String.fromCharCode(32+Ee):B+=String.fromCharCode(32+Ee+128),ft=!1;else switch(Ee!==Ve.CODE_STOP&&(Re=!1),Ee){case Ve.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case Ve.CODE_FNC_2:case Ve.CODE_FNC_3:break;case Ve.CODE_FNC_4_B:!Dt&&ft?(Dt=!0,ft=!1):Dt&&ft?(Dt=!1,ft=!1):ft=!0;break;case Ve.CODE_SHIFT:L=!0,T=Ve.CODE_CODE_A;break;case Ve.CODE_CODE_A:T=Ve.CODE_CODE_A;break;case Ve.CODE_CODE_C:T=Ve.CODE_CODE_C;break;case Ve.CODE_STOP:N=!0;break}break;case Ve.CODE_CODE_C:if(Ee<100)Ee<10&&(B+="0"),B+=Ee;else switch(Ee!==Ve.CODE_STOP&&(Re=!1),Ee){case Ve.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case Ve.CODE_CODE_A:T=Ve.CODE_CODE_A;break;case Ve.CODE_CODE_B:T=Ve.CODE_CODE_B;break;case Ve.CODE_STOP:N=!0;break}break}oa&&(T=T===Ve.CODE_CODE_A?Ve.CODE_CODE_B:Ve.CODE_CODE_A)}const Pr=ee-q;if(ee=o.getNextUnset(ee),!o.isRange(ee,Math.min(o.getSize(),ee+(ee-q)/2),!1))throw new ae;if(Be-=ze*ue,Be%103!==ue)throw new j;const Ai=B.length;if(Ai===0)throw new ae;Ai>0&&Re&&(T===Ve.CODE_CODE_C?B=B.substring(0,Ai-2):B=B.substring(0,Ai-1));const Br=(d[1]+d[0])/2,fn=q+Pr/2,wr=A.length,li=new Uint8Array(wr);for(let oa=0;oa<wr;oa++)li[oa]=A[oa];const aa=[new We(Br,r),new We(fn,r)];return new Oe(B,li,0,aa,Le.CODE_128,new Date().getTime())}}Ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ve.MAX_AVG_VARIANCE=.25,Ve.MAX_INDIVIDUAL_VARIANCE=.7,Ve.CODE_SHIFT=98,Ve.CODE_CODE_C=99,Ve.CODE_CODE_B=100,Ve.CODE_CODE_A=101,Ve.CODE_FNC_1=102,Ve.CODE_FNC_2=97,Ve.CODE_FNC_3=96,Ve.CODE_FNC_4_A=101,Ve.CODE_FNC_4_B=100,Ve.CODE_START_A=103,Ve.CODE_START_B=104,Ve.CODE_START_C=105,Ve.CODE_STOP=106;class xn extends an{constructor(r=!1,o=!1){super(),this.usingCheckDigit=r,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,o,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let d=xn.findAsteriskPattern(o,h),m=o.getNextSet(d[1]),p=o.getSize(),A,T;do{xn.recordPattern(o,m,h);let te=xn.toNarrowWidePattern(h);if(te<0)throw new ae;A=xn.patternToChar(te),this.decodeRowResult+=A,T=m;for(let ue of h)m+=ue;m=o.getNextSet(m)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let te of h)N+=te;let L=m-T-N;if(m!==p&&L*2<N)throw new ae;if(this.usingCheckDigit){let te=this.decodeRowResult.length-1,ue=0;for(let Ee=0;Ee<te;Ee++)ue+=xn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(te)!==xn.ALPHABET_STRING.charAt(ue%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,te)}if(this.decodeRowResult.length===0)throw new ae;let B;this.extendedMode?B=xn.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let q=(d[1]+d[0])/2,ee=T+N/2;return new Oe(B,null,0,[new We(q,r),new We(ee,r)],Le.CODE_39,new Date().getTime())}static findAsteriskPattern(r,o){let l=r.getSize(),h=r.getNextSet(0),d=0,m=h,p=!1,A=o.length;for(let T=h;T<l;T++)if(r.get(T)!==p)o[d]++;else{if(d===A-1){if(this.toNarrowWidePattern(o)===xn.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((T-m)/2)),m,!1))return[m,T];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,p=!p}throw new ae}static toNarrowWidePattern(r){let o=r.length,l=0,h;do{let d=2147483647;for(let A of r)A<d&&A>l&&(d=A);l=d,h=0;let m=0,p=0;for(let A=0;A<o;A++){let T=r[A];T>l&&(p|=1<<o-1-A,h++,m+=T)}if(h===3){for(let A=0;A<o&&h>0;A++){let T=r[A];if(T>l&&(h--,T*2>=m))return-1}return p}}while(h>3);return-1}static patternToChar(r){for(let o=0;o<xn.CHARACTER_ENCODINGS.length;o++)if(xn.CHARACTER_ENCODINGS[o]===r)return xn.ALPHABET_STRING.charAt(o);if(r===xn.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(r){let o=r.length,l="";for(let h=0;h<o;h++){let d=r.charAt(h);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=r.charAt(h+1),p="\0";switch(d){case"+":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)+32);else throw new z;break;case"$":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)-64);else throw new z;break;case"%":if(m>="A"&&m<="E")p=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")p=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")p=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")p="\0";else if(m==="V")p="@";else if(m==="W")p="`";else if(m==="X"||m==="Y"||m==="Z")p="";else throw new z;break;case"/":if(m>="A"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")p=":";else throw new z;break}l+=p,h++}else l+=d}return l}}xn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",xn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],xn.ASTERISK_ENCODING=148;class It extends an{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,o,l){let h=this.decodeStart(o),d=this.decodeEnd(o),m=new X;It.decodeMiddle(o,h[1],d[0],m);let p=m.toString(),A=null;l!=null&&(A=l.get(Ue.ALLOWED_LENGTHS)),A==null&&(A=It.DEFAULT_ALLOWED_LENGTHS);let T=p.length,N=!1,L=0;for(let ee of A){if(T===ee){N=!0;break}ee>L&&(L=ee)}if(!N&&T>L&&(N=!0),!N)throw new z;const B=[new We(h[1],r),new We(d[0],r)];return new Oe(p,null,0,B,Le.ITF,new Date().getTime())}static decodeMiddle(r,o,l,h){let d=new Int32Array(10),m=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),m.fill(0),p.fill(0);o<l;){an.recordPattern(r,o,d);for(let T=0;T<5;T++){let N=2*T;m[T]=d[N],p[T]=d[N+1]}let A=It.decodeDigit(m);h.append(A.toString()),A=this.decodeDigit(p),h.append(A.toString()),d.forEach(function(T){o+=T})}}decodeStart(r){let o=It.skipWhiteSpace(r),l=It.findGuardPattern(r,o,It.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let h=o-1;l>0&&h>=0&&!r.get(h);h--)l--;if(l!==0)throw new ae}static skipWhiteSpace(r){const o=r.getSize(),l=r.getNextSet(0);if(l===o)throw new ae;return l}decodeEnd(r){r.reverse();try{let o=It.skipWhiteSpace(r),l;try{l=It.findGuardPattern(r,o,It.END_PATTERN_REVERSED[0])}catch(d){d instanceof ae&&(l=It.findGuardPattern(r,o,It.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let h=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-h,l}finally{r.reverse()}}static findGuardPattern(r,o,l){let h=l.length,d=new Int32Array(h),m=r.getSize(),p=!1,A=0,T=o;d.fill(0);for(let N=o;N<m;N++)if(r.get(N)!==p)d[A]++;else{if(A===h-1){if(an.patternMatchVariance(d,l,It.MAX_INDIVIDUAL_VARIANCE)<It.MAX_AVG_VARIANCE)return[T,N];T+=d[0]+d[1],J.arraycopy(d,2,d,0,A-1),d[A-1]=0,d[A]=0,A--}else A++;d[A]=1,p=!p}throw new ae}static decodeDigit(r){let o=It.MAX_AVG_VARIANCE,l=-1,h=It.PATTERNS.length;for(let d=0;d<h;d++){let m=It.PATTERNS[d],p=an.patternMatchVariance(r,m,It.MAX_INDIVIDUAL_VARIANCE);p<o?(o=p,l=d):p===o&&(l=-1)}if(l>=0)return l%10;throw new ae}}It.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],It.MAX_AVG_VARIANCE=.38,It.MAX_INDIVIDUAL_VARIANCE=.5,It.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],It.START_PATTERN=Int32Array.from([1,1,1,1]),It.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Nt extends an{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let o=!1,l,h=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=Nt.findGuardPattern(r,h,!1,this.START_END_PATTERN,d);let m=l[0];h=l[1];let p=m-(h-m);p>=0&&(o=r.isRange(p,m,!1))}return l}static checkChecksum(r){return Nt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return Nt.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}static decodeEnd(r,o){return Nt.findGuardPattern(r,o,!1,Nt.START_END_PATTERN,new Int32Array(Nt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,o,l,h){return this.findGuardPattern(r,o,l,h,new Int32Array(h.length))}static findGuardPattern(r,o,l,h,d){let m=r.getSize();o=l?r.getNextUnset(o):r.getNextSet(o);let p=0,A=o,T=h.length,N=l;for(let L=o;L<m;L++)if(r.get(L)!==N)d[p]++;else{if(p===T-1){if(an.patternMatchVariance(d,h,Nt.MAX_INDIVIDUAL_VARIANCE)<Nt.MAX_AVG_VARIANCE)return Int32Array.from([A,L]);A+=d[0]+d[1];let B=d.slice(2,d.length-1);for(let q=0;q<p-1;q++)d[q]=B[q];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,N=!N}throw new ae}static decodeDigit(r,o,l,h){this.recordPattern(r,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,p=h.length;for(let A=0;A<p;A++){let T=h[A],N=an.patternMatchVariance(o,T,Nt.MAX_INDIVIDUAL_VARIANCE);N<d&&(d=N,m=A)}if(m>=0)return m;throw new ae}}Nt.MAX_AVG_VARIANCE=.48,Nt.MAX_INDIVIDUAL_VARIANCE=.7,Nt.START_END_PATTERN=Int32Array.from([1,1,1]),Nt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Nt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Si{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=Si.parseExtensionString(m),A=[new We((l[0]+l[1])/2,r),new We(d,r)],T=new Oe(m,null,0,A,Le.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&T.putAllMetadata(p),T}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let T=0;T<5&&m<d;T++){let N=Nt.decodeDigit(r,h,m,Nt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<4-T),T!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new ae;let A=this.determineCheckDigit(p);if(Si.extensionChecksum(l.toString())!==A)throw new ae;return m}static extensionChecksum(r){let o=r.length,l=0;for(let h=o-2;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;l*=3;for(let h=o-1;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let o=0;o<10;o++)if(r===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ae}static parseExtensionString(r){if(r.length!==5)return null;let o=Si.parseExtension5String(r);return o==null?null:new Map([[He.SUGGESTED_PRICE,o]])}static parseExtension5String(r){let o;switch(r.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(r.substring(1)),h=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+h+"."+m}}class Ms{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=Ms.parseExtensionString(m),A=[new We((l[0]+l[1])/2,r),new We(d,r)],T=new Oe(m,null,0,A,Le.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&T.putAllMetadata(p),T}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let A=0;A<2&&m<d;A++){let T=Nt.decodeDigit(r,h,m,Nt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let N of h)m+=N;T>=10&&(p|=1<<1-A),A!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new ae;if(parseInt(l.toString())%4!==p)throw new ae;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(r)]])}}class Js{static decodeRow(r,o,l){let h=Nt.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Si().decodeRow(r,o,h)}catch{return new Ms().decodeRow(r,o,h)}}}Js.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class vt extends Nt{constructor(){super(),this.decodeRowStringBuffer="",vt.L_AND_G_PATTERNS=vt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let o=vt.L_PATTERNS[r-10],l=new Int32Array(o.length);for(let h=0;h<o.length;h++)l[h]=o[o.length-h-1];vt.L_AND_G_PATTERNS[r]=l}}decodeRow(r,o,l){let h=vt.findStartGuardPattern(o),d=l==null?null:l.get(Ue.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Re=new We((h[0]+h[1])/2,r);d.foundPossibleResultPoint(Re)}let m=this.decodeMiddle(o,h,this.decodeRowStringBuffer),p=m.rowOffset,A=m.resultString;if(d!=null){const Re=new We(p,r);d.foundPossibleResultPoint(Re)}let T=this.decodeEnd(o,p);if(d!=null){const Re=new We((T[0]+T[1])/2,r);d.foundPossibleResultPoint(Re)}let N=T[1],L=N+(N-T[0]);if(L>=o.getSize()||!o.isRange(N,L,!1))throw new ae;let B=A.toString();if(B.length<8)throw new z;if(!vt.checkChecksum(B))throw new j;let q=(h[1]+h[0])/2,ee=(T[1]+T[0])/2,te=this.getBarcodeFormat(),ue=[new We(q,r),new We(ee,r)],Ee=new Oe(B,null,0,ue,te,new Date().getTime()),Be=0;try{let Re=Js.decodeRow(r,o,T[1]);Ee.putMetadata(He.UPC_EAN_EXTENSION,Re.getText()),Ee.putAllMetadata(Re.getResultMetadata()),Ee.addResultPoints(Re.getResultPoints()),Be=Re.getText().length}catch{}let ze=l==null?null:l.get(Ue.ALLOWED_EAN_EXTENSIONS);if(ze!=null){let Re=!1;for(let Dt in ze)if(Be.toString()===Dt){Re=!0;break}if(!Re)throw new ae}return Ee}decodeEnd(r,o){return vt.findGuardPattern(r,o,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return vt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return vt.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}}class Cr extends vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let T=0;T<6&&m<d;T++){let N=vt.decodeDigit(r,h,m,vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<5-T)}l=Cr.determineFirstDigit(l,p),m=vt.findGuardPattern(r,m,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&m<d;T++){let N=vt.decodeDigit(r,h,m,vt.L_PATTERNS);l+=String.fromCharCode(48+N);for(let L of h)m+=L}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_13}static determineFirstDigit(r,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new ae}}Cr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Yr extends vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1];for(let A=0;A<4&&m<d;A++){let T=vt.decodeDigit(r,h,m,vt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let N of h)m+=N}m=vt.findGuardPattern(r,m,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&m<d;A++){let T=vt.decodeDigit(r,h,m,vt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let N of h)m+=N}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_8}}class Or extends vt{constructor(){super(...arguments),this.ean13Reader=new Cr}getBarcodeFormat(){return Le.UPC_A}decode(r,o){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,o,l))}decodeMiddle(r,o,l){return this.ean13Reader.decodeMiddle(r,o,l)}maybeReturnResult(r){let o=r.getText();if(o.charAt(0)==="0"){let l=new Oe(o.substring(1),null,null,r.getResultPoints(),Le.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new ae}reset(){this.ean13Reader.reset()}}class Qn extends vt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters.map(T=>T);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const d=r.getSize();let m=o[1],p=0;for(let T=0;T<6&&m<d;T++){const N=Qn.decodeDigit(r,h,m,Qn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<5-T)}let A=Qn.determineNumSysAndCheckDigit(l,p);return{rowOffset:m,resultString:A}}decodeEnd(r,o){return Qn.findGuardPatternWithoutCounters(r,o,!0,Qn.MIDDLE_END_PATTERN)}checkChecksum(r){return vt.checkChecksum(Qn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,o){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return d+r+m}throw ae.getNotFoundInstance()}getBarcodeFormat(){return Le.UPC_E}static convertUPCEtoUPCA(r){const o=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new X;l.append(r.charAt(0));let h=o[5];switch(h){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(h),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(h);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Qn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class de extends an{constructor(r){super();let o=r==null?null:r.get(Ue.POSSIBLE_FORMATS),l=[];a(o)?(l.push(new Cr),l.push(new Or),l.push(new Yr),l.push(new Qn)):(o.indexOf(Le.EAN_13)>-1&&l.push(new Cr),o.indexOf(Le.UPC_A)>-1&&l.push(new Or),o.indexOf(Le.EAN_8)>-1&&l.push(new Yr),o.indexOf(Le.UPC_E)>-1&&l.push(new Qn)),this.readers=l}decodeRow(r,o,l){for(let h of this.readers)try{const d=h.decodeRow(r,o,l),m=d.getBarcodeFormat()===Le.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(Ue.POSSIBLE_FORMATS),A=p==null||p.includes(Le.UPC_A);if(m&&A){const T=d.getRawBytes(),N=new Oe(d.getText().substring(1),T,T?T.length:null,d.getResultPoints(),Le.UPC_A);return N.putAllMetadata(d.getResultMetadata()),N}return d}catch{}throw new ae}reset(){for(let r of this.readers)r.reset()}}class Pe extends an{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,o){for(let l=0;l<o.length;l++)if(an.patternMatchVariance(r,o[l],Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE)return l;throw new ae}static count(r){return At.sum(new Int32Array(r))}static increment(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]>h&&(h=o[d],l=d);r[l]++}static decrement(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]<h&&(h=o[d],l=d);r[l]--}static isFinderPattern(r){let o=r[0]+r[1],l=o+r[2]+r[3],h=o/l;if(h>=Pe.MIN_FINDER_PATTERN_RATIO&&h<=Pe.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let p of r)p>m&&(m=p),p<d&&(d=p);return m<10*d}return!1}}Pe.MAX_AVG_VARIANCE=.2,Pe.MAX_INDIVIDUAL_VARIANCE=.45,Pe.MIN_FINDER_PATTERN_RATIO=9.5/12,Pe.MAX_FINDER_PATTERN_RATIO=12.5/14;class pt{constructor(r,o){this.value=r,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof pt))return!1;const o=r;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class xt{constructor(r,o,l,h,d){this.value=r,this.startEnd=o,this.value=r,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new We(l,d)),this.resultPoints.push(new We(h,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof xt))return!1;const o=r;return this.value===o.value}hashCode(){return this.value}}class Je{constructor(){}static getRSSvalue(r,o,l){let h=0;for(let A of r)h+=A;let d=0,m=0,p=r.length;for(let A=0;A<p-1;A++){let T;for(T=1,m|=1<<A;T<r[A];T++,m&=~(1<<A)){let N=Je.combins(h-T-1,p-A-2);if(l&&m===0&&h-T-(p-A-1)>=p-A-1&&(N-=Je.combins(h-T-(p-A),p-A-2)),p-A-1>1){let L=0;for(let B=h-T-(p-A-2);B>o;B--)L+=Je.combins(h-T-B-1,p-A-3);N-=L*(p-1-A)}else h-T>o&&N--;d+=N}h-=T}return d}static combins(r,o){let l,h;r-o>o?(h=o,l=r-o):(h=r-o,l=o);let d=1,m=1;for(let p=r;p>l;p--)d*=p,m<=h&&(d/=m,m++);for(;m<=h;)d/=m,m++;return d}}class En{static buildBitArray(r){let o=r.length*2-1;r[r.length-1].getRightChar()==null&&(o-=1);let l=12*o,h=new _e(l),d=0,p=r[0].getRightChar().getValue();for(let A=11;A>=0;--A)p&1<<A&&h.set(d),d++;for(let A=1;A<r.length;++A){let T=r[A],N=T.getLeftChar().getValue();for(let L=11;L>=0;--L)N&1<<L&&h.set(d),d++;if(T.getRightChar()!=null){let L=T.getRightChar().getValue();for(let B=11;B>=0;--B)L&1<<B&&h.set(d),d++}}return h}}class Xr{constructor(r,o){o?this.decodedInformation=null:(this.finished=r,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Hi{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class xr extends Hi{constructor(r,o){super(r),this.value=o}getValue(){return this.value}isFNC1(){return this.value===xr.FNC1}}xr.FNC1="$";class Gi extends Hi{constructor(r,o,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class rr extends Hi{constructor(r,o,l){if(super(r),o<0||o>10||l<0||l>10)throw new z;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===rr.FNC1}isSecondDigitFNC1(){return this.secondDigit===rr.FNC1}isAnyFNC1(){return this.firstDigit===rr.FNC1||this.secondDigit===rr.FNC1}}rr.FNC1=10;class Qe{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ae;let o=r.substring(0,2);for(let d of Qe.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Qe.VARIABLE_LENGTH?Qe.processVariableAI(2,d[2],r):Qe.processFixedAI(2,d[1],r);if(r.length<3)throw new ae;let l=r.substring(0,3);for(let d of Qe.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Qe.VARIABLE_LENGTH?Qe.processVariableAI(3,d[2],r):Qe.processFixedAI(3,d[1],r);for(let d of Qe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Qe.VARIABLE_LENGTH?Qe.processVariableAI(4,d[2],r):Qe.processFixedAI(4,d[1],r);if(r.length<4)throw new ae;let h=r.substring(0,4);for(let d of Qe.FOUR_DIGIT_DATA_LENGTH)if(d[0]===h)return d[1]===Qe.VARIABLE_LENGTH?Qe.processVariableAI(4,d[2],r):Qe.processFixedAI(4,d[1],r);throw new ae}static processFixedAI(r,o,l){if(l.length<r)throw new ae;let h=l.substring(0,r);if(l.length<r+o)throw new ae;let d=l.substring(r,r+o),m=l.substring(r+o),p="("+h+")"+d,A=Qe.parseFieldsInGeneralPurpose(m);return A==null?p:p+A}static processVariableAI(r,o,l){let h=l.substring(0,r),d;l.length<r+o?d=l.length:d=r+o;let m=l.substring(r,d),p=l.substring(d),A="("+h+")"+m,T=Qe.parseFieldsInGeneralPurpose(p);return T==null?A:A+T}}Qe.VARIABLE_LENGTH=[],Qe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Qe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Qe.VARIABLE_LENGTH,20],["22",Qe.VARIABLE_LENGTH,29],["30",Qe.VARIABLE_LENGTH,8],["37",Qe.VARIABLE_LENGTH,8],["90",Qe.VARIABLE_LENGTH,30],["91",Qe.VARIABLE_LENGTH,30],["92",Qe.VARIABLE_LENGTH,30],["93",Qe.VARIABLE_LENGTH,30],["94",Qe.VARIABLE_LENGTH,30],["95",Qe.VARIABLE_LENGTH,30],["96",Qe.VARIABLE_LENGTH,30],["97",Qe.VARIABLE_LENGTH,3],["98",Qe.VARIABLE_LENGTH,30],["99",Qe.VARIABLE_LENGTH,30]],Qe.THREE_DIGIT_DATA_LENGTH=[["240",Qe.VARIABLE_LENGTH,30],["241",Qe.VARIABLE_LENGTH,30],["242",Qe.VARIABLE_LENGTH,6],["250",Qe.VARIABLE_LENGTH,30],["251",Qe.VARIABLE_LENGTH,30],["253",Qe.VARIABLE_LENGTH,17],["254",Qe.VARIABLE_LENGTH,20],["400",Qe.VARIABLE_LENGTH,30],["401",Qe.VARIABLE_LENGTH,30],["402",17],["403",Qe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Qe.VARIABLE_LENGTH,20],["421",Qe.VARIABLE_LENGTH,15],["422",3],["423",Qe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Qe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Qe.VARIABLE_LENGTH,15],["391",Qe.VARIABLE_LENGTH,18],["392",Qe.VARIABLE_LENGTH,15],["393",Qe.VARIABLE_LENGTH,18],["703",Qe.VARIABLE_LENGTH,30]],Qe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Qe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Qe.VARIABLE_LENGTH,20],["8003",Qe.VARIABLE_LENGTH,30],["8004",Qe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Qe.VARIABLE_LENGTH,30],["8008",Qe.VARIABLE_LENGTH,12],["8018",18],["8020",Qe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Qe.VARIABLE_LENGTH,70],["8200",Qe.VARIABLE_LENGTH,70]];class Rn{constructor(r){this.buffer=new X,this.information=r}decodeAllCodes(r,o){let l=o,h=null;do{let d=this.decodeGeneralPurposeField(l,h),m=Qe.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&r.append(m),d.isRemaining()?h=""+d.getRemainingValue():h=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let o=r;o<r+3;++o)if(this.information.get(o))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new rr(this.information.getSize(),rr.FNC1,rr.FNC1):new rr(this.information.getSize(),d-1,rr.FNC1)}let o=this.extractNumericValueFromBitArray(r,7),l=(o-8)/11,h=(o-8)%11;return new rr(r+7,l,h)}extractNumericValueFromBitArray(r,o){return Rn.extractNumericValueFromBitArray(this.information,r,o)}static extractNumericValueFromBitArray(r,o,l){let h=0;for(let d=0;d<l;++d)r.get(o+d)&&(h|=1<<l-d-1);return h}decodeGeneralPurposeField(r,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Gi(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Gi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),r=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),r=o.isFinished()):(o=this.parseNumericBlock(),r=o.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let o;return r.isSecondDigitFNC1()?o=new Gi(this.current.getPosition(),this.buffer.toString()):o=new Gi(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Xr(!0,o)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let o=new Gi(this.current.getPosition(),this.buffer.toString());return new Xr(!0,o)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Xr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Gi(this.current.getPosition(),this.buffer.toString());return new Xr(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Xr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Gi(this.current.getPosition(),this.buffer.toString());return new Xr(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Xr(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(r,8);return h>=232&&h<253}decodeIsoIec646(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new xr(r+5,xr.FNC1);if(o>=5&&o<15)return new xr(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new xr(r+7,""+(l+1));if(l>=90&&l<116)return new xr(r+7,""+(l+7));let h=this.extractNumericValueFromBitArray(r,8),d;switch(h){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new z}return new xr(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new xr(r+5,xr.FNC1);if(o>=5&&o<15)return new xr(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new xr(r+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new vn("Decoding invalid alphanumeric value: "+l)}return new xr(r+6,h)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<5&&o+r<this.information.getSize();++o)if(o===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+o))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let o=r;o<r+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<4&&o+r<this.information.getSize();++o)if(this.information.get(r+o))return!1;return!0}}class zn{constructor(r){this.information=r,this.generalDecoder=new Rn(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Bn extends zn{constructor(r){super(r)}encodeCompressedGtin(r,o){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,o,l)}encodeCompressedGtinWithoutAI(r,o,l){for(let h=0;h<4;++h){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*h,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}Bn.appendCheckDigit(r,l)}static appendCheckDigit(r,o){let l=0;for(let h=0;h<13;h++){let d=r.charAt(h+o).charCodeAt(0)-48;l+=h&1?d:3*d}l=10-l%10,l===10&&(l=0),r.append(l)}}Bn.GTIN_SIZE=40;class fi extends Bn{constructor(r){super(r)}parseInformation(){let r=new X;r.append("(01)");let o=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(fi.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,fi.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(r,fi.HEADER_SIZE+44)}}fi.HEADER_SIZE=4;class fs extends zn{constructor(r){super(r)}parseInformation(){let r=new X;return this.getGeneralDecoder().decodeAllCodes(r,fs.HEADER_SIZE)}}fs.HEADER_SIZE=5;class ii extends Bn{constructor(r){super(r)}encodeCompressedWeight(r,o,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(r,h);let d=this.checkWeight(h),m=1e5;for(let p=0;p<5;++p)d/m===0&&r.append("0"),m/=10;r.append(d)}}class Qr extends ii{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Qr.HEADER_SIZE+ii.GTIN_SIZE+Qr.WEIGHT_SIZE)throw new ae;let r=new X;return this.encodeCompressedGtin(r,Qr.HEADER_SIZE),this.encodeCompressedWeight(r,Qr.HEADER_SIZE+ii.GTIN_SIZE,Qr.WEIGHT_SIZE),r.toString()}}Qr.HEADER_SIZE=5,Qr.WEIGHT_SIZE=15;class Os extends Qr{constructor(r){super(r)}addWeightCode(r,o){r.append("(3103)")}checkWeight(r){return r}}class ea extends Qr{constructor(r){super(r)}addWeightCode(r,o){o<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Wn extends Bn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Wn.HEADER_SIZE+Bn.GTIN_SIZE)throw new ae;let r=new X;this.encodeCompressedGtin(r,Wn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Wn.HEADER_SIZE+Bn.GTIN_SIZE,Wn.LAST_DIGIT_SIZE);r.append("(392"),r.append(o),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Wn.HEADER_SIZE+Bn.GTIN_SIZE+Wn.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Wn.HEADER_SIZE=8,Wn.LAST_DIGIT_SIZE=2;class Dn extends Bn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Dn.HEADER_SIZE+Bn.GTIN_SIZE)throw new ae;let r=new X;this.encodeCompressedGtin(r,Dn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Dn.HEADER_SIZE+Bn.GTIN_SIZE,Dn.LAST_DIGIT_SIZE);r.append("(393"),r.append(o),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Dn.HEADER_SIZE+Bn.GTIN_SIZE+Dn.LAST_DIGIT_SIZE,Dn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(Dn.HEADER_SIZE+Bn.GTIN_SIZE+Dn.LAST_DIGIT_SIZE+Dn.FIRST_THREE_DIGITS_SIZE,null);return r.append(h.getNewString()),r.toString()}}Dn.HEADER_SIZE=8,Dn.LAST_DIGIT_SIZE=2,Dn.FIRST_THREE_DIGITS_SIZE=10;class Zt extends ii{constructor(r,o,l){super(r),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Zt.HEADER_SIZE+Zt.GTIN_SIZE+Zt.WEIGHT_SIZE+Zt.DATE_SIZE)throw new ae;let r=new X;return this.encodeCompressedGtin(r,Zt.HEADER_SIZE),this.encodeCompressedWeight(r,Zt.HEADER_SIZE+Zt.GTIN_SIZE,Zt.WEIGHT_SIZE),this.encodeCompressedDate(r,Zt.HEADER_SIZE+Zt.GTIN_SIZE+Zt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Zt.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let h=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),d/10==0&&r.append("0"),r.append(d),h/10==0&&r.append("0"),r.append(h)}addWeightCode(r,o){r.append("("),r.append(this.firstAIdigits),r.append(o/1e5),r.append(")")}checkWeight(r){return r%1e5}}Zt.HEADER_SIZE=8,Zt.WEIGHT_SIZE=20,Zt.DATE_SIZE=16;function ds(O){try{if(O.get(1))return new fi(O);if(!O.get(2))return new fs(O);switch(Rn.extractNumericValueFromBitArray(O,1,4)){case 4:return new Os(O);case 5:return new ea(O)}switch(Rn.extractNumericValueFromBitArray(O,1,5)){case 12:return new Wn(O);case 13:return new Dn(O)}switch(Rn.extractNumericValueFromBitArray(O,1,7)){case 56:return new Zt(O,"310","11");case 57:return new Zt(O,"320","11");case 58:return new Zt(O,"310","13");case 59:return new Zt(O,"320","13");case 60:return new Zt(O,"310","15");case 61:return new Zt(O,"320","15");case 62:return new Zt(O,"310","17");case 63:return new Zt(O,"320","17")}}catch(r){throw console.log(r),new vn("unknown decoder: "+O)}}class Jt{constructor(r,o,l,h){this.leftchar=r,this.rightchar=o,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,o){return r instanceof Jt?Jt.equalsOrNull(r.leftchar,o.leftchar)&&Jt.equalsOrNull(r.rightchar,o.rightchar)&&Jt.equalsOrNull(r.finderpattern,o.finderpattern):!1}static equalsOrNull(r,o){return r===null?o===null:Jt.equals(r,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ta{constructor(r,o,l){this.pairs=r,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,o){return r instanceof ta?this.checkEqualitity(r,o)&&r.wasReversed===o.wasReversed:!1}checkEqualitity(r,o){if(!r||!o)return;let l;return r.forEach((h,d)=>{o.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Te extends Pe{constructor(r){super(...arguments),this.pairs=new Array(Te.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,o,l){this.pairs.length=0,this.startFromEven=!1;try{return Te.constructResult(this.decodeRow2pairs(r,o))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Te.constructResult(this.decodeRow2pairs(r,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,r))}catch(d){if(d instanceof ae){if(!this.pairs.length)throw new ae;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(r,!1),h){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new ae}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),o}checkRows(r,o){for(let l=o;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!Te.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(h);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new ae}static isValidSequence(r){for(let o of Te.FINDER_PATTERN_SEQUENCES){if(r.length>o.length)continue;let l=!0;for(let h=0;h<r.length;h++)if(r[h].getFinderPattern().getValue()!=o[h]){l=!1;break}if(l)return!0}return!1}storeRow(r,o){let l=0,h=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){d=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}d||h||Te.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new ta(this.pairs,r,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,o){for(let l of o)if(l.getPairs().length!==r.length){for(let h of l.getPairs())for(let d of r)if(Jt.equals(h,d))break}}static isPartialRow(r,o){for(let l of o){let h=!0;for(let d of r){let m=!1;for(let p of l.getPairs())if(d.equals(p)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(r){let o=En.buildBitArray(r),h=ds(o).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],m[0],m[1]];return new Oe(h,null,null,p,Le.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),o=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let A=this.pairs.get(p);h+=A.getLeftChar().getChecksumPortion(),d++;let T=A.getRightChar();T!=null&&(h+=T.getChecksumPortion(),d++)}return h%=211,211*(d-4)+h==o.getValue()}static getNextSecondBar(r,o){let l;return r.get(o)?(l=r.getNextUnset(o),l=r.getNextSet(l)):(l=r.getNextSet(o),l=r.getNextUnset(l)),l}retrieveNextPair(r,o,l){let h=o.length%2==0;this.startFromEven&&(h=!h);let d,m=!0,p=-1;do this.findNextPair(r,o,p),d=this.parseFoundFinderPattern(r,l,h),d==null?p=Te.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let A=this.decodeDataCharacter(r,d,h,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ae;let T;try{T=this.decodeDataCharacter(r,d,h,!1)}catch(N){T=null,this.verbose&&console.log(N)}return new Jt(A,T,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,o,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let p=o.length%2!=0;this.startFromEven&&(p=!p);let A=!1;for(;m<d&&(A=!r.get(m),!!A);)m++;let T=0,N=m;for(let L=m;L<d;L++)if(r.get(L)!=A)h[T]++;else{if(T==3){if(p&&Te.reverseCounters(h),Te.isFinderPattern(h)){this.startEnd[0]=N,this.startEnd[1]=L;return}p&&Te.reverseCounters(h),N+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,T--}else T++;h[T]=1,A=!A}throw new ae}static reverseCounters(r){let o=r.length;for(let l=0;l<o/2;++l){let h=r[l];r[l]=r[o-l-1],r[o-l-1]=h}}parseFoundFinderPattern(r,o,l){let h,d,m;if(l){let T=this.startEnd[0]-1;for(;T>=0&&!r.get(T);)T--;T++,h=this.startEnd[0]-T,d=T,m=this.startEnd[1]}else d=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let p=this.getDecodeFinderCounters();J.arraycopy(p,0,p,1,p.length-1),p[0]=h;let A;try{A=this.parseFinderValue(p,Te.FINDER_PATTERNS)}catch{return null}return new xt(A,[d,m],d,m,o)}decodeDataCharacter(r,o,l,h){let d=this.getDataCharacterCounters();for(let fn=0;fn<d.length;fn++)d[fn]=0;if(h)Te.recordPatternInReverse(r,o.getStartEnd()[0],d);else{Te.recordPattern(r,o.getStartEnd()[1],d);for(let fn=0,wr=d.length-1;fn<wr;fn++,wr--){let li=d[fn];d[fn]=d[wr],d[wr]=li}}let m=17,p=At.sum(new Int32Array(d))/m,A=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(p-A)/A>.3)throw new ae;let T=this.getOddCounts(),N=this.getEvenCounts(),L=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let fn=0;fn<d.length;fn++){let wr=1*d[fn]/p,li=wr+.5;if(li<1){if(wr<.3)throw new ae;li=1}else if(li>8){if(wr>8.7)throw new ae;li=8}let aa=fn/2;fn&1?(N[aa]=li,B[aa]=wr-li):(T[aa]=li,L[aa]=wr-li)}this.adjustOddEvenCounts(m);let q=4*o.getValue()+(l?0:2)+(h?0:1)-1,ee=0,te=0;for(let fn=T.length-1;fn>=0;fn--){if(Te.isNotA1left(o,l,h)){let wr=Te.WEIGHTS[q][2*fn];te+=T[fn]*wr}ee+=T[fn]}let ue=0;for(let fn=N.length-1;fn>=0;fn--)if(Te.isNotA1left(o,l,h)){let wr=Te.WEIGHTS[q][2*fn+1];ue+=N[fn]*wr}let Ee=te+ue;if(ee&1||ee>13||ee<4)throw new ae;let Be=(13-ee)/2,ze=Te.SYMBOL_WIDEST[Be],Re=9-ze,Dt=Je.getRSSvalue(T,ze,!0),ft=Je.getRSSvalue(N,Re,!1),Pr=Te.EVEN_TOTAL_SUBSET[Be],Ai=Te.GSUM[Be],Br=Dt*Pr+ft+Ai;return new pt(Br,Ee)}static isNotA1left(r,o,l){return!(r.getValue()==0&&o&&l)}adjustOddEvenCounts(r){let o=At.sum(new Int32Array(this.getOddCounts())),l=At.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1;o>13?d=!0:o<4&&(h=!0);let m=!1,p=!1;l>13?p=!0:l<4&&(m=!0);let A=o+l-r,T=(o&1)==1,N=(l&1)==0;if(A==1)if(T){if(N)throw new ae;d=!0}else{if(!N)throw new ae;p=!0}else if(A==-1)if(T){if(N)throw new ae;h=!0}else{if(!N)throw new ae;m=!0}else if(A==0){if(T){if(!N)throw new ae;o<l?(h=!0,p=!0):(d=!0,m=!0)}else if(N)throw new ae}else throw new ae;if(h){if(d)throw new ae;Te.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Te.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new ae;Te.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Te.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Te.SYMBOL_WIDEST=[7,5,4,3,1],Te.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Te.GSUM=[0,348,1388,2948,3988],Te.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Te.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Te.FINDER_PAT_A=0,Te.FINDER_PAT_B=1,Te.FINDER_PAT_C=2,Te.FINDER_PAT_D=3,Te.FINDER_PAT_E=4,Te.FINDER_PAT_F=5,Te.FINDER_PATTERN_SEQUENCES=[[Te.FINDER_PAT_A,Te.FINDER_PAT_A],[Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B],[Te.FINDER_PAT_A,Te.FINDER_PAT_C,Te.FINDER_PAT_B,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_C],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F]],Te.MAX_PAIRS=11;class si extends pt{constructor(r,o,l){super(r,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Lt extends Pe{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,o,l){const h=this.decodePair(o,!1,r,l);Lt.addOrTally(this.possibleLeftPairs,h),o.reverse();let d=this.decodePair(o,!0,r,l);Lt.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Lt.checkChecksum(m,p))return Lt.constructResult(m,p)}throw new ae}static addOrTally(r,o){if(o==null)return;let l=!1;for(let h of r)if(h.getValue()===o.getValue()){h.incrementCount(),l=!0;break}l||r.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,o){let l=4537077*r.getValue()+o.getValue(),h=new String(l).toString(),d=new X;for(let T=13-h.length;T>0;T--)d.append("0");d.append(h);let m=0;for(let T=0;T<13;T++){let N=d.charAt(T).charCodeAt(0)-48;m+=T&1?N:3*N}m=10-m%10,m===10&&(m=0),d.append(m.toString());let p=r.getFinderPattern().getResultPoints(),A=o.getFinderPattern().getResultPoints();return new Oe(d.toString(),null,0,[p[0],p[1],A[0],A[1]],Le.RSS_14,new Date().getTime())}static checkChecksum(r,o){let l=(r.getChecksumPortion()+16*o.getChecksumPortion())%79,h=9*r.getFinderPattern().getValue()+o.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(r,o,l,h){try{let d=this.findFinderPattern(r,o),m=this.parseFoundFinderPattern(r,l,o,d),p=h==null?null:h.get(Ue.NEED_RESULT_POINT_CALLBACK);if(p!=null){let N=(d[0]+d[1])/2;o&&(N=r.getSize()-1-N),p.foundPossibleResultPoint(new We(N,l))}let A=this.decodeDataCharacter(r,m,!0),T=this.decodeDataCharacter(r,m,!1);return new si(1597*A.getValue()+T.getValue(),A.getChecksumPortion()+4*T.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,o,l){let h=this.getDataCharacterCounters();for(let ue=0;ue<h.length;ue++)h[ue]=0;if(l)an.recordPatternInReverse(r,o.getStartEnd()[0],h);else{an.recordPattern(r,o.getStartEnd()[1]+1,h);for(let ue=0,Ee=h.length-1;ue<Ee;ue++,Ee--){let Be=h[ue];h[ue]=h[Ee],h[Ee]=Be}}let d=l?16:15,m=At.sum(new Int32Array(h))/d,p=this.getOddCounts(),A=this.getEvenCounts(),T=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let ue=0;ue<h.length;ue++){let Ee=h[ue]/m,Be=Math.floor(Ee+.5);Be<1?Be=1:Be>8&&(Be=8);let ze=Math.floor(ue/2);ue&1?(A[ze]=Be,N[ze]=Ee-Be):(p[ze]=Be,T[ze]=Ee-Be)}this.adjustOddEvenCounts(l,d);let L=0,B=0;for(let ue=p.length-1;ue>=0;ue--)B*=9,B+=p[ue],L+=p[ue];let q=0,ee=0;for(let ue=A.length-1;ue>=0;ue--)q*=9,q+=A[ue],ee+=A[ue];let te=B+3*q;if(l){if(L&1||L>12||L<4)throw new ae;let ue=(12-L)/2,Ee=Lt.OUTSIDE_ODD_WIDEST[ue],Be=9-Ee,ze=Je.getRSSvalue(p,Ee,!1),Re=Je.getRSSvalue(A,Be,!0),Dt=Lt.OUTSIDE_EVEN_TOTAL_SUBSET[ue],ft=Lt.OUTSIDE_GSUM[ue];return new pt(ze*Dt+Re+ft,te)}else{if(ee&1||ee>10||ee<4)throw new ae;let ue=(10-ee)/2,Ee=Lt.INSIDE_ODD_WIDEST[ue],Be=9-Ee,ze=Je.getRSSvalue(p,Ee,!0),Re=Je.getRSSvalue(A,Be,!1),Dt=Lt.INSIDE_ODD_TOTAL_SUBSET[ue],ft=Lt.INSIDE_GSUM[ue];return new pt(Re*Dt+ze+ft,te)}}findFinderPattern(r,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=r.getSize(),d=!1,m=0;for(;m<h&&(d=!r.get(m),o!==d);)m++;let p=0,A=m;for(let T=m;T<h;T++)if(r.get(T)!==d)l[p]++;else{if(p===3){if(Pe.isFinderPattern(l))return[A,T];A+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new ae}parseFoundFinderPattern(r,o,l,h){let d=r.get(h[0]),m=h[0]-1;for(;m>=0&&d!==r.get(m);)m--;m++;const p=h[0]-m,A=this.getDecodeFinderCounters(),T=new Int32Array(A.length);J.arraycopy(A,0,T,1,A.length-1),T[0]=p;const N=this.parseFinderValue(T,Lt.FINDER_PATTERNS);let L=m,B=h[1];return l&&(L=r.getSize()-1-L,B=r.getSize()-1-B),new xt(N,[m,h[1]],L,B,o)}adjustOddEvenCounts(r,o){let l=At.sum(new Int32Array(this.getOddCounts())),h=At.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,p=!1,A=!1;r?(l>12?m=!0:l<4&&(d=!0),h>12?A=!0:h<4&&(p=!0)):(l>11?m=!0:l<5&&(d=!0),h>10?A=!0:h<4&&(p=!0));let T=l+h-o,N=(l&1)===(r?1:0),L=(h&1)===1;if(T===1)if(N){if(L)throw new ae;m=!0}else{if(!L)throw new ae;A=!0}else if(T===-1)if(N){if(L)throw new ae;d=!0}else{if(!L)throw new ae;p=!0}else if(T===0){if(N){if(!L)throw new ae;l<h?(d=!0,A=!0):(m=!0,p=!0)}else if(L)throw new ae}else throw new ae;if(d){if(m)throw new ae;Pe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Pe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(A)throw new ae;Pe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&Pe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Lt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Lt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Lt.OUTSIDE_GSUM=[0,161,961,2015,2715],Lt.INSIDE_GSUM=[0,336,1036,1516],Lt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Lt.INSIDE_ODD_WIDEST=[2,4,6,8],Lt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ur extends an{constructor(r,o){super(),this.readers=[],this.verbose=o===!0;const l=r?r.get(Ue.POSSIBLE_FORMATS):null,h=r&&r.get(Ue.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Le.EAN_13)||l.includes(Le.UPC_A)||l.includes(Le.EAN_8)||l.includes(Le.UPC_E))&&this.readers.push(new de(r)),l.includes(Le.CODE_39)&&this.readers.push(new xn(h)),l.includes(Le.CODE_128)&&this.readers.push(new Ve),l.includes(Le.ITF)&&this.readers.push(new It),l.includes(Le.RSS_14)&&this.readers.push(new Lt),l.includes(Le.RSS_EXPANDED)&&this.readers.push(new Te(this.verbose))):(this.readers.push(new de(r)),this.readers.push(new xn),this.readers.push(new de(r)),this.readers.push(new Ve),this.readers.push(new It),this.readers.push(new Lt),this.readers.push(new Te(this.verbose)))}decodeRow(r,o,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(r,o,l)}catch{}throw new ae}reset(){this.readers.forEach(r=>r.reset())}}class xc extends Ge{constructor(r=500,o){super(new ur(o),r,o)}}class Ut{constructor(r,o,l){this.ecCodewords=r,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class kt{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Rt{constructor(r,o,l,h,d,m){this.versionNumber=r,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=d,this.ecBlocks=m;let p=0;const A=m.getECCodewords(),T=m.getECBlocks();for(let N of T)p+=N.getCount()*(N.getDataCodewords()+A);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,o){if(r&1||o&1)throw new z;for(let l of Rt.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===o)return l;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new Rt(1,10,10,8,8,new Ut(5,new kt(1,3))),new Rt(2,12,12,10,10,new Ut(7,new kt(1,5))),new Rt(3,14,14,12,12,new Ut(10,new kt(1,8))),new Rt(4,16,16,14,14,new Ut(12,new kt(1,12))),new Rt(5,18,18,16,16,new Ut(14,new kt(1,18))),new Rt(6,20,20,18,18,new Ut(18,new kt(1,22))),new Rt(7,22,22,20,20,new Ut(20,new kt(1,30))),new Rt(8,24,24,22,22,new Ut(24,new kt(1,36))),new Rt(9,26,26,24,24,new Ut(28,new kt(1,44))),new Rt(10,32,32,14,14,new Ut(36,new kt(1,62))),new Rt(11,36,36,16,16,new Ut(42,new kt(1,86))),new Rt(12,40,40,18,18,new Ut(48,new kt(1,114))),new Rt(13,44,44,20,20,new Ut(56,new kt(1,144))),new Rt(14,48,48,22,22,new Ut(68,new kt(1,174))),new Rt(15,52,52,24,24,new Ut(42,new kt(2,102))),new Rt(16,64,64,14,14,new Ut(56,new kt(2,140))),new Rt(17,72,72,16,16,new Ut(36,new kt(4,92))),new Rt(18,80,80,18,18,new Ut(48,new kt(4,114))),new Rt(19,88,88,20,20,new Ut(56,new kt(4,144))),new Rt(20,96,96,22,22,new Ut(68,new kt(4,174))),new Rt(21,104,104,24,24,new Ut(56,new kt(6,136))),new Rt(22,120,120,18,18,new Ut(68,new kt(6,175))),new Rt(23,132,132,20,20,new Ut(62,new kt(8,163))),new Rt(24,144,144,22,22,new Ut(62,new kt(8,156),new kt(2,155))),new Rt(25,8,18,6,16,new Ut(7,new kt(1,5))),new Rt(26,8,32,6,14,new Ut(11,new kt(1,10))),new Rt(27,12,26,10,24,new Ut(14,new kt(1,16))),new Rt(28,12,36,10,16,new Ut(18,new kt(1,22))),new Rt(29,16,36,14,16,new Ut(24,new kt(1,32))),new Rt(30,16,48,14,22,new Ut(28,new kt(1,49)))]}}Rt.VERSIONS=Rt.buildVersions();class qi{constructor(r){const o=r.getHeight();if(o<8||o>144||o&1)throw new z;this.version=qi.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Me(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const o=r.getHeight(),l=r.getWidth();return Rt.getVersionForDimensions(o,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,h=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let p=!1,A=!1,T=!1,N=!1;do if(l===d&&h===0&&!p)r[o++]=this.readCorner1(d,m)&255,l-=2,h+=2,p=!0;else if(l===d-2&&h===0&&m&3&&!A)r[o++]=this.readCorner2(d,m)&255,l-=2,h+=2,A=!0;else if(l===d+4&&h===2&&!(m&7)&&!T)r[o++]=this.readCorner3(d,m)&255,l-=2,h+=2,T=!0;else if(l===d-2&&h===0&&(m&7)===4&&!N)r[o++]=this.readCorner4(d,m)&255,l-=2,h+=2,N=!0;else{do l<d&&h>=0&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l+=2,h-=2;while(l<d&&h>=0);l+=3,h+=1}while(l<d||h<m);if(o!==this.version.getTotalCodewords())throw new z;return r}readModule(r,o,l,h){return r<0&&(r+=l,o+=4-(l+4&7)),o<0&&(o+=h,r+=4-(h+4&7)),this.readMappingMatrix.set(o,r),this.mappingBitMatrix.get(o,r)}readUtah(r,o,l,h){let d=0;return this.readModule(r-2,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-2,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o,l,h)&&(d|=1),d<<=1,this.readModule(r,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r,o,l,h)&&(d|=1),d}readCorner1(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,1,r,o)&&(l|=1),l<<=1,this.readModule(r-1,2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}readCorner2(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-4,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner3(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-3,r,o)&&(l|=1),l<<=1,this.readModule(1,o-2,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner4(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}extractDataRegion(r){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==o)throw new R("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/h|0,p=l/d|0,A=m*h,T=p*d,N=new Me(T,A);for(let L=0;L<m;++L){const B=L*h;for(let q=0;q<p;++q){const ee=q*d;for(let te=0;te<h;++te){const ue=L*(h+2)+1+te,Ee=B+te;for(let Be=0;Be<d;++Be){const ze=q*(d+2)+1+Be;if(r.get(ze,ue)){const Re=ee+Be;N.set(Re,Ee)}}}}}return N}}class Yi{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o){const l=o.getECBlocks();let h=0;const d=l.getECBlocks();for(let te of d)h+=te.getCount();const m=new Array(h);let p=0;for(let te of d)for(let ue=0;ue<te.getCount();ue++){const Ee=te.getDataCodewords(),Be=l.getECCodewords()+Ee;m[p++]=new Yi(Ee,new Uint8Array(Be))}const T=m[0].codewords.length-l.getECCodewords(),N=T-1;let L=0;for(let te=0;te<N;te++)for(let ue=0;ue<p;ue++)m[ue].codewords[te]=r[L++];const B=o.getVersionNumber()===24,q=B?8:p;for(let te=0;te<q;te++)m[te].codewords[T-1]=r[L++];const ee=m[0].codewords.length;for(let te=T;te<ee;te++)for(let ue=0;ue<p;ue++){const Ee=B?(ue+8)%p:ue,Be=B&&Ee>7?te-1:te;m[Ee].codewords[Be]=r[L++]}if(L!==r.length)throw new R;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Wr{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new R(""+r);let o=0,l=this.bitOffset,h=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,p=r<m?r:m,A=m-p,T=255>>8-p<<A;o=(d[h]&T)>>A,r-=p,l+=p,l===8&&(l=0,h++)}if(r>0){for(;r>=8;)o=o<<8|d[h]&255,h++,r-=8;if(r>0){const m=8-r,p=255>>m<<m;o=o<<r|(d[h]&p)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=h,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Gt;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gt||(Gt={}));class Ii{static decode(r){const o=new Wr(r),l=new X,h=new X,d=new Array;let m=Gt.ASCII_ENCODE;do if(m===Gt.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,h);else{switch(m){case Gt.C40_ENCODE:this.decodeC40Segment(o,l);break;case Gt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Gt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Gt.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new z}m=Gt.ASCII_ENCODE}while(m!==Gt.PAD_ENCODE&&o.available()>0);return h.length()>0&&l.append(h.toString()),new nt(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,o,l){let h=!1;do{let d=r.readBits(8);if(d===0)throw new z;if(d<=128)return h&&(d+=128),o.append(String.fromCharCode(d-1)),Gt.ASCII_ENCODE;if(d===129)return Gt.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return Gt.C40_ENCODE;case 231:return Gt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Gt.ANSIX12_ENCODE;case 239:return Gt.TEXT_ENCODE;case 240:return Gt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new z;break}}while(r.available()>0);return Gt.ASCII_ENCODE}static decodeC40Segment(r,o){let l=!1;const h=[];let d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const A=h[p];switch(d){case 0:if(A<3)d=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else throw new z;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:l?(o.append(String.fromCharCode(A+224)),l=!1):o.append(String.fromCharCode(A+96)),d=0;break;default:throw new z}}}while(r.available()>0)}static decodeTextSegment(r,o){let l=!1,h=[],d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const A=h[p];switch(d){case 0:if(A<3)d=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else throw new z;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[A];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T),d=0}else throw new z;break;default:throw new z}}}while(r.available()>0)}static decodeAnsiX12Segment(r,o){const l=[];do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new z;break}}}while(r.available()>0)}static parseTwoBytes(r,o,l){let h=(r<<8)+o-1,d=Math.floor(h/1600);l[0]=d,h-=d*1600,d=Math.floor(h/40),l[1]=d,l[2]=h-d*40}static decodeEdifactSegment(r,o){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let h=r.readBits(6);if(h===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}h&32||(h|=64),o.append(String.fromCharCode(h))}}while(r.available()>0)}static decodeBase256Segment(r,o,l){let h=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),h++);let m;if(d===0?m=r.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(r.readBits(8),h++),m<0)throw new z;const p=new Uint8Array(m);for(let A=0;A<m;A++){if(r.available()<8)throw new z;p[A]=this.unrandomize255State(r.readBits(8),h++)}l.push(p);try{o.append(Z.decode(p,$.ISO88591))}catch(A){throw new vn("Platform does not support required encoding: "+A.message)}}static unrandomize255State(r,o){const l=149*o%255+1,h=r-l;return h>=0?h:h+256}}Ii.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ii.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ii.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ii.TEXT_SHIFT2_SET_CHARS=Ii.C40_SHIFT2_SET_CHARS,Ii.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ec{constructor(){this.rsDecoder=new Yn(gt.DATA_MATRIX_FIELD_256)}decode(r){const o=new qi(r),l=o.getVersion(),h=o.readCodewords(),d=Yi.getDataBlocks(h,l);let m=0;for(let T of d)m+=T.getNumDataCodewords();const p=new Uint8Array(m),A=d.length;for(let T=0;T<A;T++){const N=d[T],L=N.getCodewords(),B=N.getNumDataCodewords();this.correctErrors(L,B);for(let q=0;q<B;q++)p[q*A+T]=L[q]}return Ii.decode(p)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new j}for(let h=0;h<o;h++)r[h]=l[h]}}class un{constructor(r){this.image=r,this.rectangleDetector=new sn(this.image)}detect(){const r=this.rectangleDetector.detect();let o=this.detectSolid1(r);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ae;o=this.shiftToModuleCenter(o);const l=o[0],h=o[1],d=o[2],m=o[3];let p=this.transitionsBetween(l,m)+1,A=this.transitionsBetween(d,m)+1;(p&1)===1&&(p+=1),(A&1)===1&&(A+=1),4*p<7*A&&4*A<7*p&&(p=A=Math.max(p,A));let T=un.sampleGrid(this.image,l,h,d,m,p,A);return new Is(T,[l,h,d,m])}static shiftPoint(r,o,l){let h=(o.getX()-r.getX())/(l+1),d=(o.getY()-r.getY())/(l+1);return new We(r.getX()+h,r.getY()+d)}static moveAway(r,o,l){let h=r.getX(),d=r.getY();return h<o?h-=1:h+=1,d<l?d-=1:d+=1,new We(h,d)}detectSolid1(r){let o=r[0],l=r[1],h=r[3],d=r[2],m=this.transitionsBetween(o,l),p=this.transitionsBetween(l,h),A=this.transitionsBetween(h,d),T=this.transitionsBetween(d,o),N=m,L=[d,o,l,h];return N>p&&(N=p,L[0]=o,L[1]=l,L[2]=h,L[3]=d),N>A&&(N=A,L[0]=l,L[1]=h,L[2]=d,L[3]=o),N>T&&(L[0]=h,L[1]=d,L[2]=o,L[3]=l),L}detectSolid2(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),p=un.shiftPoint(l,h,(m+1)*4),A=un.shiftPoint(h,l,(m+1)*4),T=this.transitionsBetween(p,o),N=this.transitionsBetween(A,d);return T<N?(r[0]=o,r[1]=l,r[2]=h,r[3]=d):(r[0]=l,r[1]=h,r[2]=d,r[3]=o),r}correctTopRight(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),p=this.transitionsBetween(l,d),A=un.shiftPoint(o,l,(p+1)*4),T=un.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(A,d),p=this.transitionsBetween(T,d);let N=new We(d.getX()+(h.getX()-l.getX())/(m+1),d.getY()+(h.getY()-l.getY())/(m+1)),L=new We(d.getX()+(o.getX()-l.getX())/(p+1),d.getY()+(o.getY()-l.getY())/(p+1));if(!this.isValid(N))return this.isValid(L)?L:null;if(!this.isValid(L))return N;let B=this.transitionsBetween(A,N)+this.transitionsBetween(T,N),q=this.transitionsBetween(A,L)+this.transitionsBetween(T,L);return B>q?N:L}shiftToModuleCenter(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d)+1,p=this.transitionsBetween(h,d)+1,A=un.shiftPoint(o,l,p*4),T=un.shiftPoint(h,l,m*4);m=this.transitionsBetween(A,d)+1,p=this.transitionsBetween(T,d)+1,(m&1)===1&&(m+=1),(p&1)===1&&(p+=1);let N=(o.getX()+l.getX()+h.getX()+d.getX())/4,L=(o.getY()+l.getY()+h.getY()+d.getY())/4;o=un.moveAway(o,N,L),l=un.moveAway(l,N,L),h=un.moveAway(h,N,L),d=un.moveAway(d,N,L);let B,q;return A=un.shiftPoint(o,l,p*4),A=un.shiftPoint(A,d,m*4),B=un.shiftPoint(l,o,p*4),B=un.shiftPoint(B,h,m*4),T=un.shiftPoint(h,d,p*4),T=un.shiftPoint(T,l,m*4),q=un.shiftPoint(d,h,p*4),q=un.shiftPoint(q,o,m*4),[A,B,T,q]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,o,l,h,d,m,p){return Nn.getInstance().sampleGrid(r,m,p,.5,.5,m-.5,.5,m-.5,p-.5,.5,p-.5,o.getX(),o.getY(),d.getX(),d.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(r,o){let l=Math.trunc(r.getX()),h=Math.trunc(r.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),p=Math.abs(m-h)>Math.abs(d-l);if(p){let te=l;l=h,h=te,te=d,d=m,m=te}let A=Math.abs(d-l),T=Math.abs(m-h),N=-A/2,L=h<m?1:-1,B=l<d?1:-1,q=0,ee=this.image.get(p?h:l,p?l:h);for(let te=l,ue=h;te!==d;te+=B){let Ee=this.image.get(p?ue:te,p?te:ue);if(Ee!==ee&&(q++,ee=Ee),N+=T,N>0){if(ue===m)break;ue+=L,N-=A}}return q}}class di{constructor(){this.decoder=new Ec}decode(r,o=null){let l,h;if(o!=null&&o.has(Ue.PURE_BARCODE)){const T=di.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(T),h=di.NO_POINTS}else{const T=new un(r.getBlackMatrix()).detect();l=this.decoder.decode(T.getBits()),h=T.getPoints()}const d=l.getRawBytes(),m=new Oe(l.getText(),d,8*d.length,h,Le.DATA_MATRIX,J.currentTimeMillis()),p=l.getByteSegments();p!=null&&m.putMetadata(He.BYTE_SEGMENTS,p);const A=l.getECLevel();return A!=null&&m.putMetadata(He.ERROR_CORRECTION_LEVEL,A),m}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o==null||l==null)throw new ae;const h=this.moduleSize(o,r);let d=o[1];const m=l[1];let p=o[0];const T=(l[0]-p+1)/h,N=(m-d+1)/h;if(T<=0||N<=0)throw new ae;const L=h/2;d+=L,p+=L;const B=new Me(T,N);for(let q=0;q<N;q++){const ee=d+q*h;for(let te=0;te<T;te++)r.get(p+te*h,ee)&&B.set(te,q)}return B}static moduleSize(r,o){const l=o.getWidth();let h=r[0];const d=r[1];for(;h<l&&o.get(h,d);)h++;if(h===l)throw new ae;const m=h-r[0];if(m===0)throw new ae;return m}}di.NO_POINTS=[];class Ba extends Ge{constructor(r=500){super(new di,r)}}var Kr;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(Kr||(Kr={}));class mt{constructor(r,o,l){this.value=r,this.stringValue=o,this.bits=l,mt.FOR_BITS.set(l,this),mt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return mt.L;case"M":return mt.M;case"Q":return mt.Q;case"H":return mt.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof mt))return!1;const o=r;return this.value===o.value}static forBits(r){if(r<0||r>=mt.FOR_BITS.size)throw new R;return mt.FOR_BITS.get(r)}}mt.FOR_BITS=new Map,mt.FOR_VALUE=new Map,mt.L=new mt(Kr.L,"L",1),mt.M=new mt(Kr.M,"M",0),mt.Q=new mt(Kr.Q,"Q",3),mt.H=new mt(Kr.H,"H",2);class Mn{constructor(r){this.errorCorrectionLevel=mt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,o){return re.bitCount(r^o)}static decodeFormatInformation(r,o){const l=Mn.doDecodeFormatInformation(r,o);return l!==null?l:Mn.doDecodeFormatInformation(r^Mn.FORMAT_INFO_MASK_QR,o^Mn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,o){let l=Number.MAX_SAFE_INTEGER,h=0;for(const d of Mn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===r||m===o)return new Mn(d[1]);let p=Mn.numBitsDiffering(r,m);p<l&&(h=d[1],l=p),r!==o&&(p=Mn.numBitsDiffering(o,m),p<l&&(h=d[1],l=p))}return l<=3?new Mn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Mn))return!1;const o=r;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Mn.FORMAT_INFO_MASK_QR=21522,Mn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ce{constructor(r,...o){this.ecCodewordsPerBlock=r,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const o=this.ecBlocks;for(const l of o)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qe{constructor(r,o,...l){this.versionNumber=r,this.alignmentPatternCenters=o,this.ecBlocks=l;let h=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const p of m)h+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new z;try{return this.getVersionForNumber((r-17)/4)}catch{throw new z}}static getVersionForNumber(r){if(r<1||r>40)throw new R;return qe.VERSIONS[r-1]}static decodeVersionInformation(r){let o=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<qe.VERSION_DECODE_INFO.length;h++){const d=qe.VERSION_DECODE_INFO[h];if(d===r)return qe.getVersionForNumber(h+7);const m=Mn.numBitsDiffering(r,d);m<o&&(l=h+7,o=m)}return o<=3?qe.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),o=new Me(r);o.setRegion(0,0,9,9),o.setRegion(r-8,0,8,9),o.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const d=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,r-17),o.setRegion(9,6,r-17,1),this.versionNumber>6&&(o.setRegion(r-11,0,3,6),o.setRegion(0,r-11,6,3)),o}toString(){return""+this.versionNumber}}qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),qe.VERSIONS=[new qe(1,new Int32Array(0),new ce(7,new H(1,19)),new ce(10,new H(1,16)),new ce(13,new H(1,13)),new ce(17,new H(1,9))),new qe(2,Int32Array.from([6,18]),new ce(10,new H(1,34)),new ce(16,new H(1,28)),new ce(22,new H(1,22)),new ce(28,new H(1,16))),new qe(3,Int32Array.from([6,22]),new ce(15,new H(1,55)),new ce(26,new H(1,44)),new ce(18,new H(2,17)),new ce(22,new H(2,13))),new qe(4,Int32Array.from([6,26]),new ce(20,new H(1,80)),new ce(18,new H(2,32)),new ce(26,new H(2,24)),new ce(16,new H(4,9))),new qe(5,Int32Array.from([6,30]),new ce(26,new H(1,108)),new ce(24,new H(2,43)),new ce(18,new H(2,15),new H(2,16)),new ce(22,new H(2,11),new H(2,12))),new qe(6,Int32Array.from([6,34]),new ce(18,new H(2,68)),new ce(16,new H(4,27)),new ce(24,new H(4,19)),new ce(28,new H(4,15))),new qe(7,Int32Array.from([6,22,38]),new ce(20,new H(2,78)),new ce(18,new H(4,31)),new ce(18,new H(2,14),new H(4,15)),new ce(26,new H(4,13),new H(1,14))),new qe(8,Int32Array.from([6,24,42]),new ce(24,new H(2,97)),new ce(22,new H(2,38),new H(2,39)),new ce(22,new H(4,18),new H(2,19)),new ce(26,new H(4,14),new H(2,15))),new qe(9,Int32Array.from([6,26,46]),new ce(30,new H(2,116)),new ce(22,new H(3,36),new H(2,37)),new ce(20,new H(4,16),new H(4,17)),new ce(24,new H(4,12),new H(4,13))),new qe(10,Int32Array.from([6,28,50]),new ce(18,new H(2,68),new H(2,69)),new ce(26,new H(4,43),new H(1,44)),new ce(24,new H(6,19),new H(2,20)),new ce(28,new H(6,15),new H(2,16))),new qe(11,Int32Array.from([6,30,54]),new ce(20,new H(4,81)),new ce(30,new H(1,50),new H(4,51)),new ce(28,new H(4,22),new H(4,23)),new ce(24,new H(3,12),new H(8,13))),new qe(12,Int32Array.from([6,32,58]),new ce(24,new H(2,92),new H(2,93)),new ce(22,new H(6,36),new H(2,37)),new ce(26,new H(4,20),new H(6,21)),new ce(28,new H(7,14),new H(4,15))),new qe(13,Int32Array.from([6,34,62]),new ce(26,new H(4,107)),new ce(22,new H(8,37),new H(1,38)),new ce(24,new H(8,20),new H(4,21)),new ce(22,new H(12,11),new H(4,12))),new qe(14,Int32Array.from([6,26,46,66]),new ce(30,new H(3,115),new H(1,116)),new ce(24,new H(4,40),new H(5,41)),new ce(20,new H(11,16),new H(5,17)),new ce(24,new H(11,12),new H(5,13))),new qe(15,Int32Array.from([6,26,48,70]),new ce(22,new H(5,87),new H(1,88)),new ce(24,new H(5,41),new H(5,42)),new ce(30,new H(5,24),new H(7,25)),new ce(24,new H(11,12),new H(7,13))),new qe(16,Int32Array.from([6,26,50,74]),new ce(24,new H(5,98),new H(1,99)),new ce(28,new H(7,45),new H(3,46)),new ce(24,new H(15,19),new H(2,20)),new ce(30,new H(3,15),new H(13,16))),new qe(17,Int32Array.from([6,30,54,78]),new ce(28,new H(1,107),new H(5,108)),new ce(28,new H(10,46),new H(1,47)),new ce(28,new H(1,22),new H(15,23)),new ce(28,new H(2,14),new H(17,15))),new qe(18,Int32Array.from([6,30,56,82]),new ce(30,new H(5,120),new H(1,121)),new ce(26,new H(9,43),new H(4,44)),new ce(28,new H(17,22),new H(1,23)),new ce(28,new H(2,14),new H(19,15))),new qe(19,Int32Array.from([6,30,58,86]),new ce(28,new H(3,113),new H(4,114)),new ce(26,new H(3,44),new H(11,45)),new ce(26,new H(17,21),new H(4,22)),new ce(26,new H(9,13),new H(16,14))),new qe(20,Int32Array.from([6,34,62,90]),new ce(28,new H(3,107),new H(5,108)),new ce(26,new H(3,41),new H(13,42)),new ce(30,new H(15,24),new H(5,25)),new ce(28,new H(15,15),new H(10,16))),new qe(21,Int32Array.from([6,28,50,72,94]),new ce(28,new H(4,116),new H(4,117)),new ce(26,new H(17,42)),new ce(28,new H(17,22),new H(6,23)),new ce(30,new H(19,16),new H(6,17))),new qe(22,Int32Array.from([6,26,50,74,98]),new ce(28,new H(2,111),new H(7,112)),new ce(28,new H(17,46)),new ce(30,new H(7,24),new H(16,25)),new ce(24,new H(34,13))),new qe(23,Int32Array.from([6,30,54,78,102]),new ce(30,new H(4,121),new H(5,122)),new ce(28,new H(4,47),new H(14,48)),new ce(30,new H(11,24),new H(14,25)),new ce(30,new H(16,15),new H(14,16))),new qe(24,Int32Array.from([6,28,54,80,106]),new ce(30,new H(6,117),new H(4,118)),new ce(28,new H(6,45),new H(14,46)),new ce(30,new H(11,24),new H(16,25)),new ce(30,new H(30,16),new H(2,17))),new qe(25,Int32Array.from([6,32,58,84,110]),new ce(26,new H(8,106),new H(4,107)),new ce(28,new H(8,47),new H(13,48)),new ce(30,new H(7,24),new H(22,25)),new ce(30,new H(22,15),new H(13,16))),new qe(26,Int32Array.from([6,30,58,86,114]),new ce(28,new H(10,114),new H(2,115)),new ce(28,new H(19,46),new H(4,47)),new ce(28,new H(28,22),new H(6,23)),new ce(30,new H(33,16),new H(4,17))),new qe(27,Int32Array.from([6,34,62,90,118]),new ce(30,new H(8,122),new H(4,123)),new ce(28,new H(22,45),new H(3,46)),new ce(30,new H(8,23),new H(26,24)),new ce(30,new H(12,15),new H(28,16))),new qe(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new H(3,117),new H(10,118)),new ce(28,new H(3,45),new H(23,46)),new ce(30,new H(4,24),new H(31,25)),new ce(30,new H(11,15),new H(31,16))),new qe(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new H(7,116),new H(7,117)),new ce(28,new H(21,45),new H(7,46)),new ce(30,new H(1,23),new H(37,24)),new ce(30,new H(19,15),new H(26,16))),new qe(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new H(5,115),new H(10,116)),new ce(28,new H(19,47),new H(10,48)),new ce(30,new H(15,24),new H(25,25)),new ce(30,new H(23,15),new H(25,16))),new qe(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new H(13,115),new H(3,116)),new ce(28,new H(2,46),new H(29,47)),new ce(30,new H(42,24),new H(1,25)),new ce(30,new H(23,15),new H(28,16))),new qe(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new H(17,115)),new ce(28,new H(10,46),new H(23,47)),new ce(30,new H(10,24),new H(35,25)),new ce(30,new H(19,15),new H(35,16))),new qe(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new H(17,115),new H(1,116)),new ce(28,new H(14,46),new H(21,47)),new ce(30,new H(29,24),new H(19,25)),new ce(30,new H(11,15),new H(46,16))),new qe(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new H(13,115),new H(6,116)),new ce(28,new H(14,46),new H(23,47)),new ce(30,new H(44,24),new H(7,25)),new ce(30,new H(59,16),new H(1,17))),new qe(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new H(12,121),new H(7,122)),new ce(28,new H(12,47),new H(26,48)),new ce(30,new H(39,24),new H(14,25)),new ce(30,new H(22,15),new H(41,16))),new qe(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new H(6,121),new H(14,122)),new ce(28,new H(6,47),new H(34,48)),new ce(30,new H(46,24),new H(10,25)),new ce(30,new H(2,15),new H(64,16))),new qe(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new H(17,122),new H(4,123)),new ce(28,new H(29,46),new H(14,47)),new ce(30,new H(49,24),new H(10,25)),new ce(30,new H(24,15),new H(46,16))),new qe(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new H(4,122),new H(18,123)),new ce(28,new H(13,46),new H(32,47)),new ce(30,new H(48,24),new H(14,25)),new ce(30,new H(42,15),new H(32,16))),new qe(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new H(20,117),new H(4,118)),new ce(28,new H(40,47),new H(7,48)),new ce(30,new H(43,24),new H(22,25)),new ce(30,new H(10,15),new H(67,16))),new qe(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new H(19,118),new H(6,119)),new ce(28,new H(18,47),new H(31,48)),new ce(30,new H(34,24),new H(34,25)),new ce(30,new H(20,15),new H(61,16)))];var bn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(bn||(bn={}));class ir{constructor(r,o){this.value=r,this.isMasked=o}unmaskBitMatrix(r,o){for(let l=0;l<o;l++)for(let h=0;h<o;h++)this.isMasked(l,h)&&r.flip(h,l)}}ir.values=new Map([[bn.DATA_MASK_000,new ir(bn.DATA_MASK_000,(O,r)=>(O+r&1)===0)],[bn.DATA_MASK_001,new ir(bn.DATA_MASK_001,(O,r)=>(O&1)===0)],[bn.DATA_MASK_010,new ir(bn.DATA_MASK_010,(O,r)=>r%3===0)],[bn.DATA_MASK_011,new ir(bn.DATA_MASK_011,(O,r)=>(O+r)%3===0)],[bn.DATA_MASK_100,new ir(bn.DATA_MASK_100,(O,r)=>(Math.floor(O/2)+Math.floor(r/3)&1)===0)],[bn.DATA_MASK_101,new ir(bn.DATA_MASK_101,(O,r)=>O*r%6===0)],[bn.DATA_MASK_110,new ir(bn.DATA_MASK_110,(O,r)=>O*r%6<3)],[bn.DATA_MASK_111,new ir(bn.DATA_MASK_111,(O,r)=>(O+r+O*r%3&1)===0)]]);class gi{constructor(r){const o=r.getHeight();if(o<21||(o&3)!==1)throw new z;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const o=this.bitMatrix.getHeight();let l=0;const h=o-7;for(let d=o-1;d>=h;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Mn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),o=Math.floor((r-17)/4);if(o<=6)return qe.getVersionForNumber(o);let l=0;const h=r-11;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(p,m,l);let d=qe.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(m,p,l);if(d=qe.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new z}copyBit(r,o,l){return(this.isMirror?this.bitMatrix.get(o,r):this.bitMatrix.get(r,o))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),o=this.readVersion(),l=ir.values.get(r.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const d=o.buildFunctionPattern();let m=!0;const p=new Uint8Array(o.getTotalCodewords());let A=0,T=0,N=0;for(let L=h-1;L>0;L-=2){L===6&&L--;for(let B=0;B<h;B++){const q=m?h-1-B:B;for(let ee=0;ee<2;ee++)d.get(L-ee,q)||(N++,T<<=1,this.bitMatrix.get(L-ee,q)&&(T|=1),N===8&&(p[A++]=T,N=0,T=0))}m=!m}if(A!==o.getTotalCodewords())throw new z;return p}remask(){if(this.parsedFormatInfo===null)return;const r=ir.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let o=0,l=r.getWidth();o<l;o++)for(let h=o+1,d=r.getHeight();h<d;h++)r.get(o,h)!==r.get(h,o)&&(r.flip(h,o),r.flip(o,h))}}class Ro{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o,l){if(r.length!==o.getTotalCodewords())throw new R;const h=o.getECBlocksForLevel(l);let d=0;const m=h.getECBlocks();for(const ee of m)d+=ee.getCount();const p=new Array(d);let A=0;for(const ee of m)for(let te=0;te<ee.getCount();te++){const ue=ee.getDataCodewords(),Ee=h.getECCodewordsPerBlock()+ue;p[A++]=new Ro(ue,new Uint8Array(Ee))}const T=p[0].codewords.length;let N=p.length-1;for(;N>=0&&p[N].codewords.length!==T;)N--;N++;const L=T-h.getECCodewordsPerBlock();let B=0;for(let ee=0;ee<L;ee++)for(let te=0;te<A;te++)p[te].codewords[ee]=r[B++];for(let ee=N;ee<A;ee++)p[ee].codewords[L]=r[B++];const q=p[0].codewords.length;for(let ee=L;ee<q;ee++)for(let te=0;te<A;te++){const ue=te<N?ee:ee+1;p[te].codewords[ue]=r[B++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Sr;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(Sr||(Sr={}));class it{constructor(r,o,l,h){this.value=r,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=h,it.FOR_BITS.set(h,this),it.FOR_VALUE.set(r,this)}static forBits(r){const o=it.FOR_BITS.get(r);if(o===void 0)throw new R;return o}getCharacterCountBits(r){const o=r.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof it))return!1;const o=r;return this.value===o.value}toString(){return this.stringValue}}it.FOR_BITS=new Map,it.FOR_VALUE=new Map,it.TERMINATOR=new it(Sr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),it.NUMERIC=new it(Sr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),it.ALPHANUMERIC=new it(Sr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),it.STRUCTURED_APPEND=new it(Sr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),it.BYTE=new it(Sr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),it.ECI=new it(Sr.ECI,"ECI",Int32Array.from([0,0,0]),7),it.KANJI=new it(Sr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),it.FNC1_FIRST_POSITION=new it(Sr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),it.FNC1_SECOND_POSITION=new it(Sr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),it.HANZI=new it(Sr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class hn{static decode(r,o,l,h){const d=new Wr(r);let m=new X;const p=new Array;let A=-1,T=-1;try{let N=null,L=!1,B;do{if(d.available()<4)B=it.TERMINATOR;else{const q=d.readBits(4);B=it.forBits(q)}switch(B){case it.TERMINATOR:break;case it.FNC1_FIRST_POSITION:case it.FNC1_SECOND_POSITION:L=!0;break;case it.STRUCTURED_APPEND:if(d.available()<16)throw new z;A=d.readBits(8),T=d.readBits(8);break;case it.ECI:const q=hn.parseECIValue(d);if(N=P.getCharacterSetECIByValue(q),N===null)throw new z;break;case it.HANZI:const ee=d.readBits(4),te=d.readBits(B.getCharacterCountBits(o));ee===hn.GB2312_SUBSET&&hn.decodeHanziSegment(d,m,te);break;default:const ue=d.readBits(B.getCharacterCountBits(o));switch(B){case it.NUMERIC:hn.decodeNumericSegment(d,m,ue);break;case it.ALPHANUMERIC:hn.decodeAlphanumericSegment(d,m,ue,L);break;case it.BYTE:hn.decodeByteSegment(d,m,ue,N,p,h);break;case it.KANJI:hn.decodeKanjiSegment(d,m,ue);break;default:throw new z}break}}while(B!==it.TERMINATOR)}catch{throw new z}return new nt(r,m.toString(),p.length===0?null:p,l===null?null:l.toString(),A,T)}static decodeHanziSegment(r,o,l){if(l*13>r.available())throw new z;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/96<<8&4294967295|m%96;p<959?p+=41377:p+=42657,h[d]=p>>8&255,h[d+1]=p&255,d+=2,l--}try{o.append(Z.decode(h,$.GB2312))}catch(m){throw new z(m)}}static decodeKanjiSegment(r,o,l){if(l*13>r.available())throw new z;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/192<<8&4294967295|m%192;p<7936?p+=33088:p+=49472,h[d]=p>>8,h[d+1]=p,d+=2,l--}try{o.append(Z.decode(h,$.SHIFT_JIS))}catch(m){throw new z(m)}}static decodeByteSegment(r,o,l,h,d,m){if(8*l>r.available())throw new z;const p=new Uint8Array(l);for(let T=0;T<l;T++)p[T]=r.readBits(8);let A;h===null?A=$.guessEncoding(p,m):A=h.getName();try{o.append(Z.decode(p,A))}catch(T){throw new z(T)}d.push(p)}static toAlphaNumericChar(r){if(r>=hn.ALPHANUMERIC_CHARS.length)throw new z;return hn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,o,l,h){const d=o.length();for(;l>1;){if(r.available()<11)throw new z;const m=r.readBits(11);o.append(hn.toAlphaNumericChar(Math.floor(m/45))),o.append(hn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new z;o.append(hn.toAlphaNumericChar(r.readBits(6)))}if(h)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(r,o,l){for(;l>=3;){if(r.available()<10)throw new z;const h=r.readBits(10);if(h>=1e3)throw new z;o.append(hn.toAlphaNumericChar(Math.floor(h/100))),o.append(hn.toAlphaNumericChar(Math.floor(h/10)%10)),o.append(hn.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(r.available()<7)throw new z;const h=r.readBits(7);if(h>=100)throw new z;o.append(hn.toAlphaNumericChar(Math.floor(h/10))),o.append(hn.toAlphaNumericChar(h%10))}else if(l===1){if(r.available()<4)throw new z;const h=r.readBits(4);if(h>=10)throw new z;o.append(hn.toAlphaNumericChar(h))}}static parseECIValue(r){const o=r.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const l=r.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=r.readBits(16);return(o&31)<<16&4294967295|l}throw new z}}hn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",hn.GB2312_SUBSET=1;class hl{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const o=r[0];r[0]=r[2],r[2]=o}}class wc{constructor(){this.rsDecoder=new Yn(gt.QR_CODE_FIELD_256)}decodeBooleanArray(r,o){return this.decodeBitMatrix(Me.parseFromBooleanArray(r),o)}decodeBitMatrix(r,o){const l=new gi(r);let h=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){h=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new hl(!0)),d}catch(d){throw h!==null?h:d}}decodeBitMatrixParser(r,o){const l=r.readVersion(),h=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),m=Ro.getDataBlocks(d,l,h);let p=0;for(const N of m)p+=N.getNumDataCodewords();const A=new Uint8Array(p);let T=0;for(const N of m){const L=N.getCodewords(),B=N.getNumDataCodewords();this.correctErrors(L,B);for(let q=0;q<B;q++)A[T++]=L[q]}return hn.decode(A,l,h,o)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new j}for(let h=0;h<o;h++)r[h]=l[h]}}class mi extends We{constructor(r,o,l){super(r,o),this.estimatedModuleSize=l}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=(this.getX()+o)/2,d=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new mi(h,d,m)}}class Lr{constructor(r,o,l,h,d,m,p){this.image=r,this.startX=o,this.startY=l,this.width=h,this.height=d,this.moduleSize=m,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,o=this.height,l=this.width,h=r+l,d=this.startY+o/2,m=new Int32Array(3),p=this.image;for(let A=0;A<o;A++){const T=d+(A&1?-Math.floor((A+1)/2):Math.floor((A+1)/2));m[0]=0,m[1]=0,m[2]=0;let N=r;for(;N<h&&!p.get(N,T);)N++;let L=0;for(;N<h;){if(p.get(N,T))if(L===1)m[1]++;else if(L===2){if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,T,N);if(B!==null)return B}m[0]=m[2],m[1]=1,m[2]=0,L=1}else m[++L]++;else L===1&&L++,m[L]++;N++}if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,T,h);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(r,o){return o-r[2]-r[1]/2}foundPatternCross(r){const o=this.moduleSize,l=o/2;for(let h=0;h<3;h++)if(Math.abs(o-r[h])>=l)return!1;return!0}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let A=r;for(;A>=0&&d.get(o,A)&&p[1]<=l;)p[1]++,A--;if(A<0||p[1]>l)return NaN;for(;A>=0&&!d.get(o,A)&&p[0]<=l;)p[0]++,A--;if(p[0]>l)return NaN;for(A=r+1;A<m&&d.get(o,A)&&p[1]<=l;)p[1]++,A++;if(A===m||p[1]>l)return NaN;for(;A<m&&!d.get(o,A)&&p[2]<=l;)p[2]++,A++;if(p[2]>l)return NaN;const T=p[0]+p[1]+p[2];return 5*Math.abs(T-h)>=2*h?NaN:this.foundPatternCross(p)?Lr.centerFromEnd(p,A):NaN}handlePossibleCenter(r,o,l){const h=r[0]+r[1]+r[2],d=Lr.centerFromEnd(r,l),m=this.crossCheckVertical(o,d,2*r[1],h);if(!isNaN(m)){const p=(r[0]+r[1]+r[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(p,m,d))return T.combineEstimate(m,d,p);const A=new mi(d,m,p);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class Ls extends We{constructor(r,o,l,h){super(r,o),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=this.count+1,d=(this.count*this.getX()+o)/h,m=(this.count*this.getY()+r)/h,p=(this.count*this.estimatedModuleSize+l)/h;return new Ls(d,m,p,h)}}class gs{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class gn{constructor(r,o){this.image=r,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const o=r!=null&&r.get(Ue.TRY_HARDER)!==void 0,l=r!=null&&r.get(Ue.PURE_BARCODE)!==void 0,h=this.image,d=h.getHeight(),m=h.getWidth();let p=Math.floor(3*d/(4*gn.MAX_MODULES));(p<gn.MIN_SKIP||o)&&(p=gn.MIN_SKIP);let A=!1;const T=new Int32Array(5);for(let L=p-1;L<d&&!A;L+=p){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let B=0;for(let q=0;q<m;q++)if(h.get(q,L))(B&1)===1&&B++,T[B]++;else if(B&1)T[B]++;else if(B===4)if(gn.foundPatternCross(T)){if(this.handlePossibleCenter(T,L,q,l)===!0)if(p=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const te=this.findRowSkip();te>T[2]&&(L+=te-T[2]-p,q=m-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,B=3;continue}B=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,B=3;else T[++B]++;gn.foundPatternCross(T)&&this.handlePossibleCenter(T,L,m,l)===!0&&(p=T[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return We.orderBestPatterns(N),new gs(N)}static centerFromEnd(r,o){return o-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let o=0;for(let d=0;d<5;d++){const m=r[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,h=l/2;return Math.abs(l-r[0])<h&&Math.abs(l-r[1])<h&&Math.abs(3*l-r[2])<3*h&&Math.abs(l-r[3])<h&&Math.abs(l-r[4])<h}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,o,l,h){const d=this.getCrossCheckStateCount();let m=0;const p=this.image;for(;r>=m&&o>=m&&p.get(o-m,r-m);)d[2]++,m++;if(r<m||o<m)return!1;for(;r>=m&&o>=m&&!p.get(o-m,r-m)&&d[1]<=l;)d[1]++,m++;if(r<m||o<m||d[1]>l)return!1;for(;r>=m&&o>=m&&p.get(o-m,r-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const A=p.getHeight(),T=p.getWidth();for(m=1;r+m<A&&o+m<T&&p.get(o+m,r+m);)d[2]++,m++;if(r+m>=A||o+m>=T)return!1;for(;r+m<A&&o+m<T&&!p.get(o+m,r+m)&&d[3]<l;)d[3]++,m++;if(r+m>=A||o+m>=T||d[3]>=l)return!1;for(;r+m<A&&o+m<T&&p.get(o+m,r+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const N=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(N-h)<2*h&&gn.foundPatternCross(d)}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),p=this.getCrossCheckStateCount();let A=r;for(;A>=0&&d.get(o,A);)p[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(o,A)&&p[1]<=l;)p[1]++,A--;if(A<0||p[1]>l)return NaN;for(;A>=0&&d.get(o,A)&&p[0]<=l;)p[0]++,A--;if(p[0]>l)return NaN;for(A=r+1;A<m&&d.get(o,A);)p[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(o,A)&&p[3]<l;)p[3]++,A++;if(A===m||p[3]>=l)return NaN;for(;A<m&&d.get(o,A)&&p[4]<l;)p[4]++,A++;if(p[4]>=l)return NaN;const T=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(T-h)>=2*h?NaN:gn.foundPatternCross(p)?gn.centerFromEnd(p,A):NaN}crossCheckHorizontal(r,o,l,h){const d=this.image,m=d.getWidth(),p=this.getCrossCheckStateCount();let A=r;for(;A>=0&&d.get(A,o);)p[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(A,o)&&p[1]<=l;)p[1]++,A--;if(A<0||p[1]>l)return NaN;for(;A>=0&&d.get(A,o)&&p[0]<=l;)p[0]++,A--;if(p[0]>l)return NaN;for(A=r+1;A<m&&d.get(A,o);)p[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(A,o)&&p[3]<l;)p[3]++,A++;if(A===m||p[3]>=l)return NaN;for(;A<m&&d.get(A,o)&&p[4]<l;)p[4]++,A++;if(p[4]>=l)return NaN;const T=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(T-h)>=h?NaN:gn.foundPatternCross(p)?gn.centerFromEnd(p,A):NaN}handlePossibleCenter(r,o,l,h){const d=r[0]+r[1]+r[2]+r[3]+r[4];let m=gn.centerFromEnd(r,l),p=this.crossCheckVertical(o,Math.floor(m),r[2],d);if(!isNaN(p)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(p),r[2],d),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(p),Math.floor(m),r[2],d)))){const A=d/7;let T=!1;const N=this.possibleCenters;for(let L=0,B=N.length;L<B;L++){const q=N[L];if(q.aboutEquals(A,p,m)){N[L]=q.combineEstimate(p,m,A),T=!0;break}}if(!T){const L=new Ls(m,p,A);N.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=gn.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=gn.CENTER_QUORUM&&(r++,o+=m.getEstimatedModuleSize());if(r<3)return!1;const h=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-h);return d<=.05*o}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ae;const o=this.possibleCenters;let l;if(r>3){let h=0,d=0;for(const A of this.possibleCenters){const T=A.getEstimatedModuleSize();h+=T,d+=T*T}l=h/r;let m=Math.sqrt(d/r-l*l);o.sort((A,T)=>{const N=Math.abs(T.getEstimatedModuleSize()-l),L=Math.abs(A.getEstimatedModuleSize()-l);return N<L?-1:N>L?1:0});const p=Math.max(.2*l,m);for(let A=0;A<o.length&&o.length>3;A++){const T=o[A];Math.abs(T.getEstimatedModuleSize()-l)>p&&(o.splice(A,1),A--)}}if(o.length>3){let h=0;for(const d of o)h+=d.getEstimatedModuleSize();l=h/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const p=Math.abs(m.getEstimatedModuleSize()-l),A=Math.abs(d.getEstimatedModuleSize()-l);return p<A?1:p>A?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}gn.CENTER_QUORUM=2,gn.MIN_SKIP=3,gn.MAX_MODULES=57;class ai{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Ue.NEED_RESULT_POINT_CALLBACK);const l=new gn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const o=r.getTopLeft(),l=r.getTopRight(),h=r.getBottomLeft(),d=this.calculateModuleSize(o,l,h);if(d<1)throw new ae("No pattern found in proccess finder.");const m=ai.computeDimension(o,l,h,d),p=qe.getProvisionalVersionForDimension(m),A=p.getDimensionForVersion()-7;let T=null;if(p.getAlignmentPatternCenters().length>0){const q=l.getX()-o.getX()+h.getX(),ee=l.getY()-o.getY()+h.getY(),te=1-3/A,ue=Math.floor(o.getX()+te*(q-o.getX())),Ee=Math.floor(o.getY()+te*(ee-o.getY()));for(let Be=4;Be<=16;Be<<=1)try{T=this.findAlignmentInRegion(d,ue,Ee,Be);break}catch(ze){if(!(ze instanceof ae))throw ze}}const N=ai.createTransform(o,l,h,T,m),L=ai.sampleGrid(this.image,N,m);let B;return T===null?B=[h,o,l]:B=[h,o,l,T],new Is(L,B)}static createTransform(r,o,l,h,d){const m=d-3.5;let p,A,T,N;return h!==null?(p=h.getX(),A=h.getY(),T=m-3,N=T):(p=o.getX()-r.getX()+l.getX(),A=o.getY()-r.getY()+l.getY(),T=m,N=m),Kt.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,T,N,3.5,m,r.getX(),r.getY(),o.getX(),o.getY(),p,A,l.getX(),l.getY())}static sampleGrid(r,o,l){return Nn.getInstance().sampleGridWithTransform(r,l,l,o)}static computeDimension(r,o,l,h){const d=At.round(We.distance(r,o)/h),m=At.round(We.distance(r,l)/h);let p=Math.floor((d+m)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new ae("Dimensions could be not found.")}return p}calculateModuleSize(r,o,l){return(this.calculateModuleSizeOneWay(r,o)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(o.getX()),Math.floor(o.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(r,o,l,h){let d=this.sizeOfBlackWhiteBlackRun(r,o,l,h),m=1,p=r-(l-r);p<0?(m=r/(r-p),p=0):p>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(p-r),p=this.image.getWidth()-1);let A=Math.floor(o-(h-o)*m);return m=1,A<0?(m=o/(o-A),A=0):A>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(A-o),A=this.image.getHeight()-1),p=Math.floor(r+(p-r)*m),d+=this.sizeOfBlackWhiteBlackRun(r,o,p,A),d-1}sizeOfBlackWhiteBlackRun(r,o,l,h){const d=Math.abs(h-o)>Math.abs(l-r);if(d){let q=r;r=o,o=q,q=l,l=h,h=q}const m=Math.abs(l-r),p=Math.abs(h-o);let A=-m/2;const T=r<l?1:-1,N=o<h?1:-1;let L=0;const B=l+T;for(let q=r,ee=o;q!==B;q+=T){const te=d?ee:q,ue=d?q:ee;if(L===1===this.image.get(te,ue)){if(L===2)return At.distance(q,ee,r,o);L++}if(A+=p,A>0){if(ee===h)break;ee+=N,A-=m}}return L===2?At.distance(l+T,h,r,o):NaN}findAlignmentInRegion(r,o,l,h){const d=Math.floor(h*r),m=Math.max(0,o-d),p=Math.min(this.image.getWidth()-1,o+d);if(p-m<r*3)throw new ae("Alignment top exceeds estimated module size.");const A=Math.max(0,l-d),T=Math.min(this.image.getHeight()-1,l+d);if(T-A<r*3)throw new ae("Alignment bottom exceeds estimated module size.");return new Lr(this.image,m,A,p-m,T-A,r,this.resultPointCallback).find()}}class pi{constructor(){this.decoder=new wc}getDecoder(){return this.decoder}decode(r,o){let l,h;if(o!=null&&o.get(Ue.PURE_BARCODE)!==void 0){const A=pi.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(A,o),h=pi.NO_POINTS}else{const A=new ai(r.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(A.getBits(),o),h=A.getPoints()}l.getOther()instanceof hl&&l.getOther().applyMirroredCorrection(h);const d=new Oe(l.getText(),l.getRawBytes(),void 0,h,Le.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(He.BYTE_SEGMENTS,m);const p=l.getECLevel();return p!==null&&d.putMetadata(He.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(He.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o===null||l===null)throw new ae;const h=this.moduleSize(o,r);let d=o[1],m=l[1],p=o[0],A=l[0];if(p>=A||d>=m)throw new ae;if(m-d!==A-p&&(A=p+(m-d),A>=r.getWidth()))throw new ae;const T=Math.round((A-p+1)/h),N=Math.round((m-d+1)/h);if(T<=0||N<=0)throw new ae;if(N!==T)throw new ae;const L=Math.floor(h/2);d+=L,p+=L;const B=p+Math.floor((T-1)*h)-A;if(B>0){if(B>L)throw new ae;p-=B}const q=d+Math.floor((N-1)*h)-m;if(q>0){if(q>L)throw new ae;d-=q}const ee=new Me(T,N);for(let te=0;te<N;te++){const ue=d+Math.floor(te*h);for(let Ee=0;Ee<T;Ee++)r.get(p+Math.floor(Ee*h),ue)&&ee.set(Ee,te)}return ee}static moduleSize(r,o){const l=o.getHeight(),h=o.getWidth();let d=r[0],m=r[1],p=!0,A=0;for(;d<h&&m<l;){if(p!==o.get(d,m)){if(++A===5)break;p=!p}d++,m++}if(d===h||m===l)throw new ae;return(d-r[0])/7}}pi.NO_POINTS=new Array;class lt{PDF417Common(){}static getBitCountSum(r){return At.sum(r)}static toIntArray(r){if(r==null||!r.length)return lt.EMPTY_INT_ARRAY;const o=new Int32Array(r.length);let l=0;for(const h of r)o[l++]=h;return o}static getCodeword(r){const o=fe.binarySearch(lt.SYMBOL_TABLE,r&262143);return o<0?-1:(lt.CODEWORD_TABLE[o]-1)%lt.NUMBER_OF_CODEWORDS}}lt.NUMBER_OF_CODEWORDS=929,lt.MAX_CODEWORDS_IN_BARCODE=lt.NUMBER_OF_CODEWORDS-1,lt.MIN_ROWS_IN_BARCODE=3,lt.MAX_ROWS_IN_BARCODE=90,lt.MODULES_IN_CODEWORD=17,lt.MODULES_IN_STOP_PATTERN=18,lt.BARS_IN_MODULE=8,lt.EMPTY_INT_ARRAY=new Int32Array([]),lt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),lt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class na{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ut{static detectMultiple(r,o,l){let h=r.getBlackMatrix(),d=ut.detect(l,h);return d.length||(h=h.clone(),h.rotate180(),d=ut.detect(l,h)),new na(h,d)}static detect(r,o){const l=new Array;let h=0,d=0,m=!1;for(;h<o.getHeight();){const p=ut.findVertices(o,h,d);if(p[0]==null&&p[3]==null){if(!m)break;m=!1,d=0;for(const A of l)A[1]!=null&&(h=Math.trunc(Math.max(h,A[1].getY()))),A[3]!=null&&(h=Math.max(h,Math.trunc(A[3].getY())));h+=ut.ROW_STEP;continue}if(m=!0,l.push(p),!r)break;p[2]!=null?(d=Math.trunc(p[2].getX()),h=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),h=Math.trunc(p[4].getY()))}return l}static findVertices(r,o,l){const h=r.getHeight(),d=r.getWidth(),m=new Array(8);return ut.copyToResult(m,ut.findRowsWithPattern(r,h,d,o,l,ut.START_PATTERN),ut.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),ut.copyToResult(m,ut.findRowsWithPattern(r,h,d,o,l,ut.STOP_PATTERN),ut.INDEXES_STOP_PATTERN),m}static copyToResult(r,o,l){for(let h=0;h<l.length;h++)r[l[h]]=o[h]}static findRowsWithPattern(r,o,l,h,d,m){const p=new Array(4);let A=!1;const T=new Int32Array(m.length);for(;h<o;h+=ut.ROW_STEP){let L=ut.findGuardPattern(r,d,h,l,!1,m,T);if(L!=null){for(;h>0;){const B=ut.findGuardPattern(r,d,--h,l,!1,m,T);if(B!=null)L=B;else{h++;break}}p[0]=new We(L[0],h),p[1]=new We(L[1],h),A=!0;break}}let N=h+1;if(A){let L=0,B=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;N<o;N++){const q=ut.findGuardPattern(r,B[0],N,l,!1,m,T);if(q!=null&&Math.abs(B[0]-q[0])<ut.MAX_PATTERN_DRIFT&&Math.abs(B[1]-q[1])<ut.MAX_PATTERN_DRIFT)B=q,L=0;else{if(L>ut.SKIPPED_ROW_COUNT_MAX)break;L++}}N-=L+1,p[2]=new We(B[0],N),p[3]=new We(B[1],N)}return N-h<ut.BARCODE_MIN_HEIGHT&&fe.fill(p,null),p}static findGuardPattern(r,o,l,h,d,m,p){fe.fillWithin(p,0,p.length,0);let A=o,T=0;for(;r.get(A,l)&&A>0&&T++<ut.MAX_PIXEL_DRIFT;)A--;let N=A,L=0,B=m.length;for(let q=d;N<h;N++)if(r.get(N,l)!==q)p[L]++;else{if(L===B-1){if(ut.patternMatchVariance(p,m,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return new Int32Array([A,N]);A+=p[0]+p[1],J.arraycopy(p,2,p,0,L-1),p[L-1]=0,p[L]=0,L--}else L++;p[L]=1,q=!q}return L===B-1&&ut.patternMatchVariance(p,m,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE?new Int32Array([A,N-1]):null}static patternMatchVariance(r,o,l){let h=r.length,d=0,m=0;for(let T=0;T<h;T++)d+=r[T],m+=o[T];if(d<m)return 1/0;let p=d/m;l*=p;let A=0;for(let T=0;T<h;T++){let N=r[T],L=o[T]*p,B=N>L?N-L:L-N;if(B>l)return 1/0;A+=B}return A/d}}ut.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ut.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ut.MAX_AVG_VARIANCE=.42,ut.MAX_INDIVIDUAL_VARIANCE=.8,ut.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ut.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ut.MAX_PIXEL_DRIFT=3,ut.MAX_PATTERN_DRIFT=5,ut.SKIPPED_ROW_COUNT_MAX=25,ut.ROW_STEP=5,ut.BARCODE_MIN_HEIGHT=10;class On{constructor(r,o){if(o.length===0)throw new R;this.field=r;let l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),J.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let h=0;for(let d of this.coefficients)h=this.field.add(h,d);return h}let o=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)o=this.field.add(this.field.multiply(r,o),this.coefficients[h]);return o}add(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let h=new Int32Array(l.length),d=l.length-o.length;J.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=this.field.add(o[m-d],l[m]);return new On(this.field,h)}subtract(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof On?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new On(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1);for(let p=0;p<l;p++){let A=o[p];for(let T=0;T<d;T++)m[p+T]=this.field.add(m[p+T],this.field.multiply(A,h[T]))}return new On(this.field,m)}negative(){let r=this.coefficients.length,o=new Int32Array(r);for(let l=0;l<r;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new On(this.field,o)}multiplyScalar(r){if(r===0)return new On(this.field,new Int32Array([0]));if(r===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let h=0;h<o;h++)l[h]=this.field.multiply(this.coefficients[h],r);return new On(this.field,l)}multiplyByMonomial(r,o){if(r<0)throw new R;if(o===0)return new On(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+r);for(let d=0;d<l;d++)h[d]=this.field.multiply(this.coefficients[d],o);return new On(this.field,h)}toString(){let r=new X;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(o===0||l!==1)&&r.append(l),o!==0&&(o===1?r.append("x"):(r.append("x^"),r.append(o))))}return r.toString()}}class Xi{add(r,o){return(r+o)%this.modulus}subtract(r,o){return(this.modulus+r-o)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}inverse(r){if(r===0)throw new Pn;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Qi extends Xi{constructor(r,o){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let h=0;h<r;h++)this.expTable[h]=l,l=l*o%r;for(let h=0;h<r-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new On(this,new Int32Array([0])),this.one=new On(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new R;if(o===0)return this.zero;let l=new Int32Array(r+1);return l[0]=o,new On(this,l)}}Qi.PDF417_GF=new Qi(lt.NUMBER_OF_CODEWORDS,3);class Wi{constructor(){this.field=Qi.PDF417_GF}decode(r,o,l){let h=new On(this.field,r),d=new Int32Array(o),m=!1;for(let ee=o;ee>0;ee--){let te=h.evaluateAt(this.field.exp(ee));d[o-ee]=te,te!==0&&(m=!0)}if(!m)return 0;let p=this.field.getOne();if(l!=null)for(const ee of l){let te=this.field.exp(r.length-1-ee),ue=new On(this.field,new Int32Array([this.field.subtract(0,te),1]));p=p.multiply(ue)}let A=new On(this.field,d),T=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),A,o),N=T[0],L=T[1],B=this.findErrorLocations(N),q=this.findErrorMagnitudes(L,N,B);for(let ee=0;ee<B.length;ee++){let te=r.length-1-this.field.log(B[ee]);if(te<0)throw j.getChecksumInstance();r[te]=this.field.subtract(r[te],q[ee])}return B.length}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){let B=r;r=o,o=B}let h=r,d=o,m=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let B=h,q=m;if(h=d,m=p,h.isZero())throw j.getChecksumInstance();d=B;let ee=this.field.getZero(),te=h.getCoefficient(h.getDegree()),ue=this.field.inverse(te);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){let Ee=d.getDegree()-h.getDegree(),Be=this.field.multiply(d.getCoefficient(d.getDegree()),ue);ee=ee.add(this.field.buildMonomial(Ee,Be)),d=d.subtract(h.multiplyByMonomial(Ee,Be))}p=ee.multiply(m).subtract(q).negative()}let A=p.getCoefficient(0);if(A===0)throw j.getChecksumInstance();let T=this.field.inverse(A),N=p.multiply(T),L=d.multiply(T);return[N,L]}findErrorLocations(r){let o=r.getDegree(),l=new Int32Array(o),h=0;for(let d=1;d<this.field.getSize()&&h<o;d++)r.evaluateAt(d)===0&&(l[h]=this.field.inverse(d),h++);if(h!==o)throw j.getChecksumInstance();return l}findErrorMagnitudes(r,o,l){let h=o.getDegree(),d=new Int32Array(h);for(let T=1;T<=h;T++)d[h-T]=this.field.multiply(T,o.getCoefficient(T));let m=new On(this.field,d),p=l.length,A=new Int32Array(p);for(let T=0;T<p;T++){let N=this.field.inverse(l[T]),L=this.field.subtract(0,r.evaluateAt(N)),B=this.field.inverse(m.evaluateAt(N));A[T]=this.field.multiply(L,B)}return A}}class Ni{constructor(r,o,l,h,d){r instanceof Ni?this.constructor_2(r):this.constructor_1(r,o,l,h,d)}constructor_1(r,o,l,h,d){const m=o==null||l==null,p=h==null||d==null;if(m&&p)throw new ae;m?(o=new We(0,h.getY()),l=new We(0,d.getY())):p&&(h=new We(r.getWidth()-1,o.getY()),d=new We(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=o,this.bottomLeft=l,this.topRight=h,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,o){return r==null?o:o==null?r:new Ni(r.image,r.topLeft,r.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(r,o,l){let h=this.topLeft,d=this.bottomLeft,m=this.topRight,p=this.bottomRight;if(r>0){let A=l?this.topLeft:this.topRight,T=Math.trunc(A.getY()-r);T<0&&(T=0);let N=new We(A.getX(),T);l?h=N:m=N}if(o>0){let A=l?this.bottomLeft:this.bottomRight,T=Math.trunc(A.getY()+o);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let N=new We(A.getX(),T);l?d=N:p=N}return new Ni(this.image,h,d,m,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ki{constructor(r,o,l,h){this.columnCount=r,this.errorCorrectionLevel=h,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Zr{constructor(){this.buffer=""}static form(r,o){let l=-1;function h(m,p,A,T,N,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let B=N?parseInt(N.substr(1)):void 0,q;switch(L){case"s":q=o[l];break;case"c":q=o[l][0];break;case"f":q=parseFloat(o[l]).toFixed(m);break;case"p":q=parseFloat(o[l]).toPrecision(m);break;case"e":q=parseFloat(o[l]).toExponential(m);break;case"x":q=parseInt(o[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(o[l],B||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let ee=parseInt(A),te=A&&A[0]+""=="0"?"0":" ";for(;q.length<ee;)q=p!==void 0?q+te:te+q;return q}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}format(r,...o){this.buffer+=Zr.form(r,o)}toString(){return this.buffer}}class ms{constructor(r){this.boundingBox=new Ni(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let o=this.getCodeword(r);if(o!=null)return o;for(let l=1;l<ms.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(r)-l;if(h>=0&&(o=this.codewords[h],o!=null)||(h=this.imageRowToCodewordIndex(r)+l,h<this.codewords.length&&(o=this.codewords[h],o!=null)))return o}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,o){this.codewords[this.imageRowToCodewordIndex(r)]=o}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Zr;let o=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return r.toString()}}ms.MAX_NEARBY_DISTANCE=5;class Un{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let o=this.values.get(r);o==null&&(o=0),o++,this.values.set(r,o)}getValue(){let r=-1,o=new Array;for(const[l,h]of this.values.entries()){const d={getKey:()=>l,getValue:()=>h};d.getValue()>r?(r=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===r&&o.push(d.getKey())}return lt.toIntArray(o)}getConfidence(r){return this.values.get(r)}}class $t extends ms{constructor(r,o){super(r),this._isLeft=o}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,r);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),A=-1,T=1,N=0;for(let L=m;L<p;L++){if(o[L]==null)continue;let B=o[L],q=B.getRowNumber()-A;if(q===0)N++;else if(q===1)T=Math.max(T,N),N=1,A=B.getRowNumber();else if(q<0||B.getRowNumber()>=r.getRowCount()||q>L)o[L]=null;else{let ee;T>2?ee=(T-2)*q:ee=q;let te=ee>=L;for(let ue=1;ue<=ee&&!te;ue++)te=o[L-ue]!=null;te?o[L]=null:(A=B.getRowNumber(),N=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let o=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=o.length)continue;o[h]++}return o}adjustIncompleteIndicatorColumnRowNumbers(r){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),h=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.getCodewords(),A=-1;for(let T=d;T<m;T++){if(p[T]==null)continue;let N=p[T];N.setRowNumberAsRowIndicatorColumn();let L=N.getRowNumber()-A;L===0||(L===1?A=N.getRowNumber():N.getRowNumber()>=r.getRowCount()?p[T]=null:A=N.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),o=new Un,l=new Un,h=new Un,d=new Un;for(let p of r){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let A=p.getValue()%30,T=p.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:l.setValue(A*3+1);break;case 1:d.setValue(A/3),h.setValue(A%3);break;case 2:o.setValue(A+1);break}}if(o.getValue().length===0||l.getValue().length===0||h.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<lt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>lt.MAX_ROWS_IN_BARCODE)return null;let m=new Ki(o.getValue()[0],l.getValue()[0],h.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,o){for(let l=0;l<r.length;l++){let h=r[l];if(r[l]==null)continue;let d=h.getValue()%30,m=h.getRowNumber();if(m>o.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==o.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Zi{constructor(r,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=lt.MAX_CODEWORDS_IN_BARCODE,o;do o=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(o,h,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&o[l]!=null&&r[l].getRowNumber()===o[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let d=this.detectionResultColumns[h].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=Zi.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=Zi.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),o=0):++o),o}adjustRowNumbers(r,o,l){if(!this.detectionResultColumns[r-1])return;let h=l[o],d=this.detectionResultColumns[r-1].getCodewords(),m=d;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let p=new Array(14);p[2]=d[o],p[3]=m[o],o>0&&(p[0]=l[o-1],p[4]=d[o-1],p[5]=m[o-1]),o>1&&(p[8]=l[o-2],p[10]=d[o-2],p[11]=m[o-2]),o<l.length-1&&(p[1]=l[o+1],p[6]=d[o+1],p[7]=m[o+1]),o<l.length-2&&(p[9]=l[o+2],p[12]=d[o+2],p[13]=m[o+2]);for(let A of p)if(Zi.adjustRowNumber(h,A))return}static adjustRowNumber(r,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===r.getBucket()?(r.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,o){this.detectionResultColumns[r]=o}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Zr;for(let l=0;l<r.getCodewords().length;l++){o.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[h].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class Ri{constructor(r,o,l,h){this.rowNumber=Ri.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Ri.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Ri.BARCODE_ROW_UNKNOWN=-1;class Er{static initialize(){for(let r=0;r<lt.SYMBOL_TABLE.length;r++){let o=lt.SYMBOL_TABLE[r],l=o&1;for(let h=0;h<lt.BARS_IN_MODULE;h++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,Er.RATIOS_TABLE[r]||(Er.RATIOS_TABLE[r]=new Array(lt.BARS_IN_MODULE)),Er.RATIOS_TABLE[r][lt.BARS_IN_MODULE-h-1]=Math.fround(d/lt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let o=Er.getDecodedCodewordValue(Er.sampleBitCounts(r));return o!==-1?o:Er.getClosestDecodedValue(r)}static sampleBitCounts(r){let o=At.sum(r),l=new Int32Array(lt.BARS_IN_MODULE),h=0,d=0;for(let m=0;m<lt.MODULES_IN_CODEWORD;m++){let p=o/(2*lt.MODULES_IN_CODEWORD)+m*o/lt.MODULES_IN_CODEWORD;d+r[h]<=p&&(d+=r[h],h++),l[h]++}return l}static getDecodedCodewordValue(r){let o=Er.getBitValue(r);return lt.getCodeword(o)===-1?-1:o}static getBitValue(r){let o=0;for(let l=0;l<r.length;l++)for(let h=0;h<r[l];h++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(r){let o=At.sum(r),l=new Array(lt.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/o);let h=yn.MAX_VALUE,d=-1;this.bSymbolTableReady||Er.initialize();for(let m=0;m<Er.RATIOS_TABLE.length;m++){let p=0,A=Er.RATIOS_TABLE[m];for(let T=0;T<lt.BARS_IN_MODULE;T++){let N=Math.fround(A[T]-l[T]);if(p+=Math.fround(N*N),p>=h)break}p<h&&(h=p,d=lt.SYMBOL_TABLE[m])}return d}}Er.bSymbolTableReady=!1,Er.RATIOS_TABLE=new Array(lt.SYMBOL_TABLE.length).map(O=>new Array(lt.BARS_IN_MODULE));class ra{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class ia{static parseLong(r,o=void 0){return parseInt(r,o)}}class Di extends E{}Di.kind="NullPointerException";class sa{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,o,l){if(r==null)throw new Di;if(o<0||o>r.length||l<0||o+l>r.length||o+l<0)throw new W;if(l===0)return;for(let h=0;h<l;h++)this.write(r[o+h])}flush(){}close(){}}class yi extends E{}class fl extends sa{constructor(r=32){if(super(),this.count=0,r<0)throw new R("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new yi;l=re.MAX_VALUE}this.buf=fe.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,o,l){if(o<0||o>r.length||l<0||o+l-r.length>0)throw new W;this.ensureCapacity(this.count+l),J.arraycopy(r,o,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return fe.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var en;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(en||(en={}));function ks(){if(typeof window<"u")return window.BigInt||null;if(typeof Fh<"u")return Fh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ps;function xi(O){if(typeof ps>"u"&&(ps=ks()),ps===null)throw new Error("BigInt is not supported!");return ps(O)}function Ua(){let O=[];O[0]=xi(1);let r=xi(900);O[1]=r;for(let o=2;o<16;o++)O[o]=O[o-1]*r;return O}class ye{static decode(r,o){let l=new X(""),h=P.ISO8859_1;l.enableDecoding(h);let d=1,m=r[d++],p=new ra;for(;d<r[0];){switch(m){case ye.TEXT_COMPACTION_MODE_LATCH:d=ye.textCompaction(r,d,l);break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:d=ye.byteCompaction(m,r,h,d,l);break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case ye.NUMERIC_COMPACTION_MODE_LATCH:d=ye.numericCompaction(r,d,l);break;case ye.ECI_CHARSET:P.getCharacterSetECIByValue(r[d++]);break;case ye.ECI_GENERAL_PURPOSE:d+=2;break;case ye.ECI_USER_DEFINED:d++;break;case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=ye.decodeMacroBlock(r,d,p);break;case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:throw new z;default:d--,d=ye.textCompaction(r,d,l);break}if(d<r.length)m=r[d++];else throw z.getFormatInstance()}if(l.length()===0)throw z.getFormatInstance();let A=new nt(null,l.toString(),null,o);return A.setOther(p),A}static decodeMacroBlock(r,o,l){if(o+ye.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw z.getFormatInstance();let h=new Int32Array(ye.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<ye.NUMBER_OF_SEQUENCE_CODEWORDS;p++,o++)h[p]=r[o];l.setSegmentIndex(re.parseInt(ye.decodeBase900toBase10(h,ye.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new X;o=ye.textCompaction(r,o,d),l.setFileId(d.toString());let m=-1;for(r[o]===ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<r[0];)switch(r[o]){case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,r[o]){case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new X;o=ye.textCompaction(r,o+1,p),l.setFileName(p.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new X;o=ye.textCompaction(r,o+1,A),l.setSender(A.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new X;o=ye.textCompaction(r,o+1,T),l.setAddressee(T.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new X;o=ye.numericCompaction(r,o+1,N),l.setSegmentCount(re.parseInt(N.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new X;o=ye.numericCompaction(r,o+1,L),l.setTimestamp(ia.parseLong(L.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new X;o=ye.numericCompaction(r,o+1,B),l.setChecksum(re.parseInt(B.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new X;o=ye.numericCompaction(r,o+1,q),l.setFileSize(ia.parseLong(q.toString()));break;default:throw z.getFormatInstance()}break;case ye.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(m!==-1){let p=o-m;l.isLastSegment()&&p--,l.setOptionalData(fe.copyOfRange(r,m,m+p))}return o}static textCompaction(r,o,l){let h=new Int32Array((r[0]-o)*2),d=new Int32Array((r[0]-o)*2),m=0,p=!1;for(;o<r[0]&&!p;){let A=r[o++];if(A<ye.TEXT_COMPACTION_MODE_LATCH)h[m]=A/30,h[m+1]=A%30,m+=2;else switch(A){case ye.TEXT_COMPACTION_MODE_LATCH:h[m++]=ye.TEXT_COMPACTION_MODE_LATCH;break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:o--,p=!0;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=r[o++],d[m]=A,m++;break}}return ye.decodeTextCompaction(h,d,m,l),o}static decodeTextCompaction(r,o,l,h){let d=en.ALPHA,m=en.ALPHA,p=0;for(;p<l;){let A=r[p],T="";switch(d){case en.ALPHA:if(A<26)T=String.fromCharCode(65+A);else switch(A){case 26:T=" ";break;case ye.LL:d=en.LOWER;break;case ye.ML:d=en.MIXED;break;case ye.PS:m=d,d=en.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ye.TEXT_COMPACTION_MODE_LATCH:d=en.ALPHA;break}break;case en.LOWER:if(A<26)T=String.fromCharCode(97+A);else switch(A){case 26:T=" ";break;case ye.AS:m=d,d=en.ALPHA_SHIFT;break;case ye.ML:d=en.MIXED;break;case ye.PS:m=d,d=en.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ye.TEXT_COMPACTION_MODE_LATCH:d=en.ALPHA;break}break;case en.MIXED:if(A<ye.PL)T=ye.MIXED_CHARS[A];else switch(A){case ye.PL:d=en.PUNCT;break;case 26:T=" ";break;case ye.LL:d=en.LOWER;break;case ye.AL:d=en.ALPHA;break;case ye.PS:m=d,d=en.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ye.TEXT_COMPACTION_MODE_LATCH:d=en.ALPHA;break}break;case en.PUNCT:if(A<ye.PAL)T=ye.PUNCT_CHARS[A];else switch(A){case ye.PAL:d=en.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ye.TEXT_COMPACTION_MODE_LATCH:d=en.ALPHA;break}break;case en.ALPHA_SHIFT:if(d=m,A<26)T=String.fromCharCode(65+A);else switch(A){case 26:T=" ";break;case ye.TEXT_COMPACTION_MODE_LATCH:d=en.ALPHA;break}break;case en.PUNCT_SHIFT:if(d=m,A<ye.PAL)T=ye.PUNCT_CHARS[A];else switch(A){case ye.PAL:d=en.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ye.TEXT_COMPACTION_MODE_LATCH:d=en.ALPHA;break}break}T!==""&&h.append(T),p++}}static byteCompaction(r,o,l,h,d){let m=new fl,p=0,A=0,T=!1;switch(r){case ye.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),L=o[h++];for(;h<o[0]&&!T;)switch(N[p++]=L,A=900*A+L,L=o[h++],L){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:h--,T=!0;break;default:if(p%5===0&&p>0){for(let B=0;B<6;++B)m.write(Number(xi(A)>>xi(8*(5-B))));A=0,p=0}break}h===o[0]&&L<ye.TEXT_COMPACTION_MODE_LATCH&&(N[p++]=L);for(let B=0;B<p;B++)m.write(N[B]);break;case ye.BYTE_COMPACTION_MODE_LATCH_6:for(;h<o[0]&&!T;){let B=o[h++];if(B<ye.TEXT_COMPACTION_MODE_LATCH)p++,A=900*A+B;else switch(B){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:h--,T=!0;break}if(p%5===0&&p>0){for(let q=0;q<6;++q)m.write(Number(xi(A)>>xi(8*(5-q))));A=0,p=0}}break}return d.append(Z.decode(m.toByteArray(),l)),h}static numericCompaction(r,o,l){let h=0,d=!1,m=new Int32Array(ye.MAX_NUMERIC_CODEWORDS);for(;o<r[0]&&!d;){let p=r[o++];if(o===r[0]&&(d=!0),p<ye.TEXT_COMPACTION_MODE_LATCH)m[h]=p,h++;else switch(p){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(h%ye.MAX_NUMERIC_CODEWORDS===0||p===ye.NUMERIC_COMPACTION_MODE_LATCH||d)&&h>0&&(l.append(ye.decodeBase900toBase10(m,h)),h=0)}return o}static decodeBase900toBase10(r,o){let l=xi(0);for(let d=0;d<o;d++)l+=ye.EXP900[o-d-1]*xi(r[d]);let h=l.toString();if(h.charAt(0)!=="1")throw new z;return h.substring(1)}}ye.TEXT_COMPACTION_MODE_LATCH=900,ye.BYTE_COMPACTION_MODE_LATCH=901,ye.NUMERIC_COMPACTION_MODE_LATCH=902,ye.BYTE_COMPACTION_MODE_LATCH_6=924,ye.ECI_USER_DEFINED=925,ye.ECI_GENERAL_PURPOSE=926,ye.ECI_CHARSET=927,ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ye.MACRO_PDF417_TERMINATOR=922,ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ye.MAX_NUMERIC_CODEWORDS=15,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ye.PL=25,ye.LL=27,ye.AS=27,ye.ML=28,ye.AL=28,ye.PS=29,ye.PAL=29,ye.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ye.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ye.EXP900=ks()?Ua():[],ye.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Et{constructor(){}static decode(r,o,l,h,d,m,p){let A=new Ni(r,o,l,h,d),T=null,N=null,L;for(let ee=!0;;ee=!1){if(o!=null&&(T=Et.getRowIndicatorColumn(r,A,o,!0,m,p)),h!=null&&(N=Et.getRowIndicatorColumn(r,A,h,!1,m,p)),L=Et.merge(T,N),L==null)throw ae.getNotFoundInstance();let te=L.getBoundingBox();if(ee&&te!=null&&(te.getMinY()<A.getMinY()||te.getMaxY()>A.getMaxY()))A=te;else break}L.setBoundingBox(A);let B=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,T),L.setDetectionResultColumn(B,N);let q=T!=null;for(let ee=1;ee<=B;ee++){let te=q?ee:B-ee;if(L.getDetectionResultColumn(te)!==void 0)continue;let ue;te===0||te===B?ue=new $t(A,te===0):ue=new ms(A),L.setDetectionResultColumn(te,ue);let Ee=-1,Be=Ee;for(let ze=A.getMinY();ze<=A.getMaxY();ze++){if(Ee=Et.getStartColumn(L,te,ze,q),Ee<0||Ee>A.getMaxX()){if(Be===-1)continue;Ee=Be}let Re=Et.detectCodeword(r,A.getMinX(),A.getMaxX(),q,Ee,ze,m,p);Re!=null&&(ue.setCodeword(ze,Re),Be=Ee,m=Math.min(m,Re.getWidth()),p=Math.max(p,Re.getWidth()))}}return Et.createDecoderResult(L)}static merge(r,o){if(r==null&&o==null)return null;let l=Et.getBarcodeMetadata(r,o);if(l==null)return null;let h=Ni.merge(Et.adjustBoundingBox(r),Et.adjustBoundingBox(o));return new Zi(l,h)}static adjustBoundingBox(r){if(r==null)return null;let o=r.getRowHeights();if(o==null)return null;let l=Et.getMax(o),h=0;for(let p of o)if(h+=l-p,p>0)break;let d=r.getCodewords();for(let p=0;h>0&&d[p]==null;p++)h--;let m=0;for(let p=o.length-1;p>=0&&(m+=l-o[p],!(o[p]>0));p--);for(let p=d.length-1;m>0&&d[p]==null;p--)m--;return r.getBoundingBox().addMissingRows(h,m,r.isLeft())}static getMax(r){let o=-1;for(let l of r)o=Math.max(o,l);return o}static getBarcodeMetadata(r,o){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let h;return o==null||(h=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(r,o,l,h,d,m){let p=new $t(o,h);for(let A=0;A<2;A++){let T=A===0?1:-1,N=Math.trunc(Math.trunc(l.getX()));for(let L=Math.trunc(Math.trunc(l.getY()));L<=o.getMaxY()&&L>=o.getMinY();L+=T){let B=Et.detectCodeword(r,0,r.getWidth(),h,N,L,d,m);B!=null&&(p.setCodeword(L,B),h?N=B.getStartX():N=B.getEndX())}}return p}static adjustCodewordCount(r,o){let l=o[0][1],h=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Et.getNumberOfECCodeWords(r.getBarcodeECLevel());if(h.length===0){if(d<1||d>lt.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();l.setValue(d)}else h[0]!==d&&l.setValue(d)}static createDecoderResult(r){let o=Et.createBarcodeMatrix(r);Et.adjustCodewordCount(r,o);let l=new Array,h=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],m=new Array;for(let A=0;A<r.getBarcodeRowCount();A++)for(let T=0;T<r.getBarcodeColumnCount();T++){let N=o[A][T+1].getValue(),L=A*r.getBarcodeColumnCount()+T;N.length===0?l.push(L):N.length===1?h[L]=N[0]:(m.push(L),d.push(N))}let p=new Array(d.length);for(let A=0;A<p.length;A++)p[A]=d[A];return Et.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),h,lt.toIntArray(l),lt.toIntArray(m),p)}static createDecoderResultFromAmbiguousValues(r,o,l,h,d){let m=new Int32Array(h.length),p=100;for(;p-- >0;){for(let A=0;A<m.length;A++)o[h[A]]=d[A][m[A]];try{return Et.decodeCodewords(o,r,l)}catch(A){if(!(A instanceof j))throw A}if(m.length===0)throw j.getChecksumInstance();for(let A=0;A<m.length;A++)if(m[A]<d[A].length-1){m[A]++;break}else if(m[A]=0,A===m.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(r){let o=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let h=0;h<o.length;h++)for(let d=0;d<o[h].length;d++)o[h][d]=new Un;let l=0;for(let h of r.getDetectionResultColumns()){if(h!=null){for(let d of h.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(r,o){return o>=0&&o<=r.getBarcodeColumnCount()+1}static getStartColumn(r,o,l,h){let d=h?1:-1,m=null;if(Et.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(Et.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let p=0;for(;Et.isValidBarcodeColumn(r,o-d);){o-=d;for(let A of r.getDetectionResultColumn(o).getCodewords())if(A!=null)return(h?A.getEndX():A.getStartX())+d*p*(A.getEndX()-A.getStartX());p++}return h?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,o,l,h,d,m,p,A){d=Et.adjustCodewordStartColumn(r,o,l,h,d,m);let T=Et.getModuleBitCount(r,o,l,h,d,m);if(T==null)return null;let N,L=At.sum(T);if(h)N=d+L;else{for(let ee=0;ee<T.length/2;ee++){let te=T[ee];T[ee]=T[T.length-1-ee],T[T.length-1-ee]=te}N=d,d=N-L}if(!Et.checkCodewordSkew(L,p,A))return null;let B=Er.getDecodedValue(T),q=lt.getCodeword(B);return q===-1?null:new Ri(d,N,Et.getCodewordBucketNumber(B),q)}static getModuleBitCount(r,o,l,h,d,m){let p=d,A=new Int32Array(8),T=0,N=h?1:-1,L=h;for(;(h?p<l:p>=o)&&T<A.length;)r.get(p,m)===L?(A[T]++,p+=N):(T++,L=!L);return T===A.length||p===(h?l:o)&&T===A.length-1?A:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,o,l,h,d,m){let p=d,A=h?-1:1;for(let T=0;T<2;T++){for(;(h?p>=o:p<l)&&h===r.get(p,m);){if(Math.abs(d-p)>Et.CODEWORD_SKEW_SIZE)return d;p+=A}A=-A,h=!h}return p}static checkCodewordSkew(r,o,l){return o-Et.CODEWORD_SKEW_SIZE<=r&&r<=l+Et.CODEWORD_SKEW_SIZE}static decodeCodewords(r,o,l){if(r.length===0)throw z.getFormatInstance();let h=1<<o+1,d=Et.correctErrors(r,l,h);Et.verifyCodewordCount(r,h);let m=ye.decode(r,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(r,o,l){if(o!=null&&o.length>l/2+Et.MAX_ERRORS||l<0||l>Et.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return Et.errorCorrection.decode(r,l,o)}static verifyCodewordCount(r,o){if(r.length<4)throw z.getFormatInstance();let l=r[0];if(l>r.length)throw z.getFormatInstance();if(l===0)if(o<r.length)r[0]=r.length-o;else throw z.getFormatInstance()}static getBitCountForCodeword(r){let o=new Int32Array(8),l=0,h=o.length-1;for(;!((r&1)!==l&&(l=r&1,h--,h<0));)o[h]++,r>>=1;return o}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Et.getCodewordBucketNumber(Et.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let o=new Zr;for(let l=0;l<r.length;l++){o.format("Row %2d: ",l);for(let h=0;h<r[l].length;h++){let d=r[l][h];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}Et.CODEWORD_SKEW_SIZE=2,Et.MAX_ERRORS=3,Et.MAX_EC_CODEWORDS=512,Et.errorCorrection=new Wi;class sr{decode(r,o=null){let l=sr.decode(r,o,!1);if(l==null||l.length===0||l[0]==null)throw ae.getNotFoundInstance();return l[0]}decodeMultiple(r,o=null){try{return sr.decode(r,o,!0)}catch(l){throw l instanceof z||l instanceof j?ae.getNotFoundInstance():l}}static decode(r,o,l){const h=new Array,d=ut.detectMultiple(r,o,l);for(const m of d.getPoints()){const p=Et.decode(d.getBits(),m[4],m[5],m[6],m[7],sr.getMinCodewordWidth(m),sr.getMaxCodewordWidth(m)),A=new Oe(p.getText(),p.getRawBytes(),void 0,m,Le.PDF_417);A.putMetadata(He.ERROR_CORRECTION_LEVEL,p.getECLevel());const T=p.getOther();T!=null&&A.putMetadata(He.PDF417_EXTRA_METADATA,T),h.push(A)}return h.map(m=>m)}static getMaxWidth(r,o){return r==null||o==null?0:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMinWidth(r,o){return r==null||o==null?re.MAX_VALUE:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(sr.getMaxWidth(r[0],r[4]),sr.getMaxWidth(r[6],r[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.max(sr.getMaxWidth(r[1],r[5]),sr.getMaxWidth(r[7],r[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(sr.getMinWidth(r[0],r[4]),sr.getMinWidth(r[6],r[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.min(sr.getMinWidth(r[1],r[5]),sr.getMinWidth(r[7],r[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ps extends E{}Ps.kind="ReaderException";class Bs{constructor(r,o){this.verbose=r===!0,o&&this.setHints(o)}decode(r,o){return o&&this.setHints(o),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const o=!a(r)&&r.get(Ue.TRY_HARDER)===!0,l=a(r)?null:r.get(Ue.POSSIBLE_FORMATS),h=new Array;if(!a(l)){const d=l.some(m=>m===Le.UPC_A||m===Le.UPC_E||m===Le.EAN_13||m===Le.EAN_8||m===Le.CODABAR||m===Le.CODE_39||m===Le.CODE_93||m===Le.CODE_128||m===Le.ITF||m===Le.RSS_14||m===Le.RSS_EXPANDED);d&&!o&&h.push(new ur(r,this.verbose)),l.includes(Le.QR_CODE)&&h.push(new pi),l.includes(Le.DATA_MATRIX)&&h.push(new di),l.includes(Le.AZTEC)&&h.push(new Ds),l.includes(Le.PDF_417)&&h.push(new sr),d&&o&&h.push(new ur(r,this.verbose))}h.length===0&&(o||h.push(new ur(r,this.verbose)),h.push(new pi),h.push(new di),h.push(new Ds),h.push(new sr),o&&h.push(new ur(r,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Ps("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(r,this.hints)}catch(l){if(l instanceof Ps)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class dl extends Ge{constructor(r=null,o=500){const l=new Bs;l.setHints(r),super(l,o)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class gl extends Ge{constructor(r=500){super(new sr,r)}}class Do extends Ge{constructor(r=500){super(new pi,r)}}var ys;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(ys||(ys={}));var Vn=ys;class Us{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new ht(r,Int32Array.from([1])))}buildGenerator(r){const o=this.cachedGenerators;if(r>=o.length){let l=o[o.length-1];const h=this.field;for(let d=o.length;d<=r;d++){const m=l.multiply(new ht(h,Int32Array.from([1,h.exp(d-1+h.getGeneratorBase())])));o.push(m),l=m}}return o[r]}encode(r,o){if(o===0)throw new R("No error correction bytes");const l=r.length-o;if(l<=0)throw new R("No data bytes provided");const h=this.buildGenerator(o),d=new Int32Array(l);J.arraycopy(r,0,d,0,l);let m=new ht(this.field,d);m=m.multiplyByMonomial(o,1);const A=m.divide(h)[1].getCoefficients(),T=o-A.length;for(let N=0;N<T;N++)r[l+N]=0;J.arraycopy(A,0,r,l+T,A.length)}}class wn{constructor(){}static applyMaskPenaltyRule1(r){return wn.applyMaskPenaltyRule1Internal(r,!0)+wn.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d-1;m++){const p=l[m];for(let A=0;A<h-1;A++){const T=p[A];T===p[A+1]&&T===l[m+1][A]&&T===l[m+1][A+1]&&o++}}return wn.N2*o}static applyMaskPenaltyRule3(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d;m++)for(let p=0;p<h;p++){const A=l[m];p+6<h&&A[p]===1&&A[p+1]===0&&A[p+2]===1&&A[p+3]===1&&A[p+4]===1&&A[p+5]===0&&A[p+6]===1&&(wn.isWhiteHorizontal(A,p-4,p)||wn.isWhiteHorizontal(A,p+7,p+11))&&o++,m+6<d&&l[m][p]===1&&l[m+1][p]===0&&l[m+2][p]===1&&l[m+3][p]===1&&l[m+4][p]===1&&l[m+5][p]===0&&l[m+6][p]===1&&(wn.isWhiteVertical(l,p,m-4,m)||wn.isWhiteVertical(l,p,m+7,m+11))&&o++}return o*wn.N3}static isWhiteHorizontal(r,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let h=o;h<l;h++)if(r[h]===1)return!1;return!0}static isWhiteVertical(r,o,l,h){l=Math.max(l,0),h=Math.min(h,r.length);for(let d=l;d<h;d++)if(r[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let A=0;A<d;A++){const T=l[A];for(let N=0;N<h;N++)T[N]===1&&o++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*wn.N4}static getDataMaskBit(r,o,l){let h,d;switch(r){case 0:h=l+o&1;break;case 1:h=l&1;break;case 2:h=o%3;break;case 3:h=(l+o)%3;break;case 4:h=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,h=(d&1)+d%3;break;case 6:d=l*o,h=(d&1)+d%3&1;break;case 7:d=l*o,h=d%3+(l+o&1)&1;break;default:throw new R("Invalid mask pattern: "+r)}return h===0}static applyMaskPenaltyRule1Internal(r,o){let l=0;const h=o?r.getHeight():r.getWidth(),d=o?r.getWidth():r.getHeight(),m=r.getArray();for(let p=0;p<h;p++){let A=0,T=-1;for(let N=0;N<d;N++){const L=o?m[p][N]:m[N][p];L===T?A++:(A>=5&&(l+=wn.N1+(A-5)),A=1,T=L)}A>=5&&(l+=wn.N1+(A-5))}return l}}wn.N1=3,wn.N2=3,wn.N3=40,wn.N4=10;class Vs{constructor(r,o){this.width=r,this.height=o;const l=new Array(o);for(let h=0;h!==o;h++)l[h]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,o){return this.bytes[o][r]}getArray(){return this.bytes}setNumber(r,o,l){this.bytes[o][r]=l}setBoolean(r,o,l){this.bytes[o][r]=l?1:0}clear(r){for(const o of this.bytes)fe.fill(o,r)}equals(r){if(!(r instanceof Vs))return!1;const o=r;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,h=this.height;l<h;++l){const d=this.bytes[l],m=o.bytes[l];for(let p=0,A=this.width;p<A;++p)if(d[p]!==m[p])return!1}return!0}toString(){const r=new X;for(let o=0,l=this.height;o<l;++o){const h=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(h[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class kr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new X;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<kr.NUM_MASK_PATTERNS}}kr.NUM_MASK_PATTERNS=8;class tn extends E{}tn.kind="WriterException";class st{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,o,l,h,d){st.clearMatrix(d),st.embedBasicPatterns(l,d),st.embedTypeInfo(o,h,d),st.maybeEmbedVersionInfo(l,d),st.embedDataBits(r,h,d)}static embedBasicPatterns(r,o){st.embedPositionDetectionPatternsAndSeparators(o),st.embedDarkDotAtLeftBottomCorner(o),st.maybeEmbedPositionAdjustmentPatterns(r,o),st.embedTimingPatterns(o)}static embedTypeInfo(r,o,l){const h=new _e;st.makeTypeInfoBits(r,o,h);for(let d=0,m=h.getSize();d<m;++d){const p=h.get(h.getSize()-1-d),A=st.TYPE_INFO_COORDINATES[d],T=A[0],N=A[1];if(l.setBoolean(T,N,p),d<8){const L=l.getWidth()-d-1;l.setBoolean(L,8,p)}else{const B=l.getHeight()-7+(d-8);l.setBoolean(8,B,p)}}}static maybeEmbedVersionInfo(r,o){if(r.getVersionNumber()<7)return;const l=new _e;st.makeVersionInfoBits(r,l);let h=6*3-1;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const p=l.get(h);h--,o.setBoolean(d,o.getHeight()-11+m,p),o.setBoolean(o.getHeight()-11+m,d,p)}}static embedDataBits(r,o,l){let h=0,d=-1,m=l.getWidth()-1,p=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);p>=0&&p<l.getHeight();){for(let A=0;A<2;++A){const T=m-A;if(!st.isEmpty(l.get(T,p)))continue;let N;h<r.getSize()?(N=r.get(h),++h):N=!1,o!==255&&wn.getDataMaskBit(o,T,p)&&(N=!N),l.setBoolean(T,p,N)}p+=d}d=-d,p+=d,m-=2}if(h!==r.getSize())throw new tn("Not all bits consumed: "+h+"/"+r.getSize())}static findMSBSet(r){return 32-re.numberOfLeadingZeros(r)}static calculateBCHCode(r,o){if(o===0)throw new R("0 polynomial");const l=st.findMSBSet(o);for(r<<=l-1;st.findMSBSet(r)>=l;)r^=o<<st.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,o,l){if(!kr.isValidMaskPattern(o))throw new tn("Invalid mask pattern");const h=r.getBits()<<3|o;l.appendBits(h,5);const d=st.calculateBCHCode(h,st.TYPE_INFO_POLY);l.appendBits(d,10);const m=new _e;if(m.appendBits(st.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new tn("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,o){o.appendBits(r.getVersionNumber(),6);const l=st.calculateBCHCode(r.getVersionNumber(),st.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new tn("should not happen but we got: "+o.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let o=8;o<r.getWidth()-8;++o){const l=(o+1)%2;st.isEmpty(r.get(o,6))&&r.setNumber(o,6,l),st.isEmpty(r.get(6,o))&&r.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new tn;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,o,l){for(let h=0;h<8;++h){if(!st.isEmpty(l.get(r+h,o)))throw new tn;l.setNumber(r+h,o,0)}}static embedVerticalSeparationPattern(r,o,l){for(let h=0;h<7;++h){if(!st.isEmpty(l.get(r,o+h)))throw new tn;l.setNumber(r,o+h,0)}}static embedPositionAdjustmentPattern(r,o,l){for(let h=0;h<5;++h){const d=st.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPattern(r,o,l){for(let h=0;h<7;++h){const d=st.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPatternsAndSeparators(r){const o=st.POSITION_DETECTION_PATTERN[0].length;st.embedPositionDetectionPattern(0,0,r),st.embedPositionDetectionPattern(r.getWidth()-o,0,r),st.embedPositionDetectionPattern(0,r.getWidth()-o,r);const l=8;st.embedHorizontalSeparationPattern(0,l-1,r),st.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),st.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const h=7;st.embedVerticalSeparationPattern(h,0,r),st.embedVerticalSeparationPattern(r.getHeight()-h-1,0,r),st.embedVerticalSeparationPattern(h,r.getHeight()-h,r)}static maybeEmbedPositionAdjustmentPatterns(r,o){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,h=st.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=h.length;d!==m;d++){const p=h[d];if(p>=0)for(let A=0;A!==m;A++){const T=h[A];T>=0&&st.isEmpty(o.get(T,p))&&st.embedPositionAdjustmentPattern(T-2,p-2,o)}}}}st.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),st.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),st.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),st.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),st.VERSION_INFO_POLY=7973,st.TYPE_INFO_POLY=1335,st.TYPE_INFO_MASK_PATTERN=21522;class ml{constructor(r,o){this.dataBytes=r,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class on{constructor(){}static calculateMaskPenalty(r){return wn.applyMaskPenaltyRule1(r)+wn.applyMaskPenaltyRule2(r)+wn.applyMaskPenaltyRule3(r)+wn.applyMaskPenaltyRule4(r)}static encode(r,o,l=null){let h=on.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Vn.CHARACTER_SET)!==void 0;d&&(h=l.get(Vn.CHARACTER_SET).toString());const m=this.chooseMode(r,h),p=new _e;if(m===it.BYTE&&(d||on.DEFAULT_BYTE_MODE_ENCODING!==h)){const ze=P.getCharacterSetECIByName(h);ze!==void 0&&this.appendECI(ze,p)}this.appendModeInfo(m,p);const A=new _e;this.appendBytes(r,m,A,h);let T;if(l!==null&&l.get(Vn.QR_VERSION)!==void 0){const ze=Number.parseInt(l.get(Vn.QR_VERSION).toString(),10);T=qe.getVersionForNumber(ze);const Re=this.calculateBitsNeeded(m,p,A,T);if(!this.willFit(Re,T,o))throw new tn("Data too big for requested version")}else T=this.recommendVersion(o,m,p,A);const N=new _e;N.appendBitArray(p);const L=m===it.BYTE?A.getSizeInBytes():r.length;this.appendLengthInfo(L,T,m,N),N.appendBitArray(A);const B=T.getECBlocksForLevel(o),q=T.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(q,N);const ee=this.interleaveWithECBytes(N,T.getTotalCodewords(),q,B.getNumBlocks()),te=new kr;te.setECLevel(o),te.setMode(m),te.setVersion(T);const ue=T.getDimensionForVersion(),Ee=new Vs(ue,ue),Be=this.chooseMaskPattern(ee,o,T,Ee);return te.setMaskPattern(Be),st.buildMatrix(ee,o,T,Be,Ee),te.setMatrix(Ee),te}static recommendVersion(r,o,l,h){const d=this.calculateBitsNeeded(o,l,h,qe.getVersionForNumber(1)),m=this.chooseVersion(d,r),p=this.calculateBitsNeeded(o,l,h,m);return this.chooseVersion(p,r)}static calculateBitsNeeded(r,o,l,h){return o.getSize()+r.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(r){return r<on.ALPHANUMERIC_TABLE.length?on.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,o=null){if(P.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(r))return it.KANJI;let l=!1,h=!1;for(let d=0,m=r.length;d<m;++d){const p=r.charAt(d);if(on.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)h=!0;else return it.BYTE}return h?it.ALPHANUMERIC:l?it.NUMERIC:it.BYTE}static isOnlyDoubleByteKanji(r){let o;try{o=Z.encode(r,P.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const d=o[h]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,o,l,h){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let p=0;p<kr.NUM_MASK_PATTERNS;p++){st.buildMatrix(r,o,l,p,h);let A=this.calculateMaskPenalty(h);A<d&&(d=A,m=p)}return m}static chooseVersion(r,o){for(let l=1;l<=40;l++){const h=qe.getVersionForNumber(l);if(on.willFit(r,h,o))return h}throw new tn("Data too big")}static willFit(r,o,l){const h=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),p=h-m,A=(r+7)/8;return p>=A}static terminateBits(r,o){const l=r*8;if(o.getSize()>l)throw new tn("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const h=o.getSize()&7;if(h>0)for(let m=h;m<8;m++)o.appendBit(!1);const d=r-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits(m&1?17:236,8);if(o.getSize()!==l)throw new tn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,o,l,h,d,m){if(h>=l)throw new tn("Block ID too large");const p=r%l,A=l-p,T=Math.floor(r/l),N=T+1,L=Math.floor(o/l),B=L+1,q=T-L,ee=N-B;if(q!==ee)throw new tn("EC bytes mismatch");if(l!==A+p)throw new tn("RS blocks mismatch");if(r!==(L+q)*A+(B+ee)*p)throw new tn("Total bytes mismatch");h<A?(d[0]=L,m[0]=q):(d[0]=B,m[0]=ee)}static interleaveWithECBytes(r,o,l,h){if(r.getSizeInBytes()!==l)throw new tn("Number of bits and data bytes does not match");let d=0,m=0,p=0;const A=new Array;for(let N=0;N<h;++N){const L=new Int32Array(1),B=new Int32Array(1);on.getNumDataBytesAndNumECBytesForBlockID(o,l,h,N,L,B);const q=L[0],ee=new Uint8Array(q);r.toBytes(8*d,ee,0,q);const te=on.generateECBytes(ee,B[0]);A.push(new ml(ee,te)),m=Math.max(m,q),p=Math.max(p,te.length),d+=L[0]}if(l!==d)throw new tn("Data bytes does not match offset");const T=new _e;for(let N=0;N<m;++N)for(const L of A){const B=L.getDataBytes();N<B.length&&T.appendBits(B[N],8)}for(let N=0;N<p;++N)for(const L of A){const B=L.getErrorCorrectionBytes();N<B.length&&T.appendBits(B[N],8)}if(o!==T.getSizeInBytes())throw new tn("Interleaving error: "+o+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(r,o){const l=r.length,h=new Int32Array(l+o);for(let m=0;m<l;m++)h[m]=r[m]&255;new Us(gt.QR_CODE_FIELD_256).encode(h,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=h[l+m];return d}static appendModeInfo(r,o){o.appendBits(r.getBits(),4)}static appendLengthInfo(r,o,l,h){const d=l.getCharacterCountBits(o);if(r>=1<<d)throw new tn(r+" is bigger than "+((1<<d)-1));h.appendBits(r,d)}static appendBytes(r,o,l,h){switch(o){case it.NUMERIC:on.appendNumericBytes(r,l);break;case it.ALPHANUMERIC:on.appendAlphanumericBytes(r,l);break;case it.BYTE:on.append8BitBytes(r,l,h);break;case it.KANJI:on.appendKanjiBytes(r,l);break;default:throw new tn("Invalid mode: "+o)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const o=on.getDigit(r);return o>=0&&o<=9}static appendNumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=on.getDigit(r.charAt(h));if(h+2<l){const m=on.getDigit(r.charAt(h+1)),p=on.getDigit(r.charAt(h+2));o.appendBits(d*100+m*10+p,10),h+=3}else if(h+1<l){const m=on.getDigit(r.charAt(h+1));o.appendBits(d*10+m,7),h+=2}else o.appendBits(d,4),h++}}static appendAlphanumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=on.getAlphanumericCode(r.charCodeAt(h));if(d===-1)throw new tn;if(h+1<l){const m=on.getAlphanumericCode(r.charCodeAt(h+1));if(m===-1)throw new tn;o.appendBits(d*45+m,11),h+=2}else o.appendBits(d,6),h++}}static append8BitBytes(r,o,l){let h;try{h=Z.encode(r,l)}catch(d){throw new tn(d)}for(let d=0,m=h.length;d!==m;d++){const p=h[d];o.appendBits(p,8)}}static appendKanjiBytes(r,o){let l;try{l=Z.encode(r,P.SJIS)}catch(d){throw new tn(d)}const h=l.length;for(let d=0;d<h;d+=2){const m=l[d]&255,p=l[d+1]&255,A=m<<8&4294967295|p;let T=-1;if(A>=33088&&A<=40956?T=A-33088:A>=57408&&A<=60351&&(T=A-49472),T===-1)throw new tn("Invalid byte sequence");const N=(T>>8)*192+(T&255);o.appendBits(N,13)}}static appendECI(r,o){o.appendBits(it.ECI.getBits(),4),o.appendBits(r.getValue(),8)}}on.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),on.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class Ei{write(r,o,l,h=null){if(r.length===0)throw new R("Found empty contents");if(o<0||l<0)throw new R("Requested dimensions are too small: "+o+"x"+l);let d=mt.L,m=Ei.QUIET_ZONE_SIZE;h!==null&&(h.get(Vn.ERROR_CORRECTION)!==void 0&&(d=mt.fromString(h.get(Vn.ERROR_CORRECTION).toString())),h.get(Vn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Vn.MARGIN).toString(),10)));const p=on.encode(r,d,h);return this.renderResult(p,o,l,m)}writeToDom(r,o,l,h,d=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(o,l,h,d);r&&r.appendChild(m)}renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new vn;const m=d.getWidth(),p=d.getHeight(),A=m+h*2,T=p+h*2,N=Math.max(o,A),L=Math.max(l,T),B=Math.min(Math.floor(N/A),Math.floor(L/T)),q=Math.floor((N-m*B)/2),ee=Math.floor((L-p*B)/2),te=this.createSVGElement(N,L);for(let ue=0,Ee=ee;ue<p;ue++,Ee+=B)for(let Be=0,ze=q;Be<m;Be++,ze+=B)if(d.get(Be,ue)===1){const Re=this.createSvgRectElement(ze,Ee,B,B);te.appendChild(Re)}return te}createSVGElement(r,o){const l=document.createElementNS(Ei.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(r,o,l,h){const d=document.createElementNS(Ei.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",h.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Ei.QUIET_ZONE_SIZE=4,Ei.SVG_NS="http://www.w3.org/2000/svg";class Kn{encode(r,o,l,h,d){if(r.length===0)throw new R("Found empty contents");if(o!==Le.QR_CODE)throw new R("Can only encode QR_CODE, but got "+o);if(l<0||h<0)throw new R(`Requested dimensions are too small: ${l}x${h}`);let m=mt.L,p=Kn.QUIET_ZONE_SIZE;d!==null&&(d.get(Vn.ERROR_CORRECTION)!==void 0&&(m=mt.fromString(d.get(Vn.ERROR_CORRECTION).toString())),d.get(Vn.MARGIN)!==void 0&&(p=Number.parseInt(d.get(Vn.MARGIN).toString(),10)));const A=on.encode(r,m,d);return Kn.renderResult(A,l,h,p)}static renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new vn;const m=d.getWidth(),p=d.getHeight(),A=m+h*2,T=p+h*2,N=Math.max(o,A),L=Math.max(l,T),B=Math.min(Math.floor(N/A),Math.floor(L/T)),q=Math.floor((N-m*B)/2),ee=Math.floor((L-p*B)/2),te=new Me(N,L);for(let ue=0,Ee=ee;ue<p;ue++,Ee+=B)for(let Be=0,ze=q;Be<m;Be++,ze+=B)d.get(Be,ue)===1&&te.setRegion(ze,Ee,B,B);return te}}Kn.QUIET_ZONE_SIZE=4;class pl{encode(r,o,l,h,d){let m;switch(o){case Le.QR_CODE:m=new Kn;break;default:throw new R("No encoder available for format "+o)}return m.encode(r,o,l,h,d)}}class oi extends be{constructor(r,o,l,h,d,m,p,A){if(super(m,p),this.yuvData=r,this.dataWidth=o,this.dataHeight=l,this.left=h,this.top=d,h+m>o||d+p>l)throw new R("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(m,p)}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return J.arraycopy(this.yuvData,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return J.arraycopy(this.yuvData,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*r;J.arraycopy(this.yuvData,d,h,p,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new oi(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+o,l,h,!1)}renderThumbnail(){const r=this.getWidth()/oi.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/oi.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*o),h=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const p=m*r;for(let A=0;A<r;A++){const T=h[d+A*oi.THUMBNAIL_SCALE_FACTOR]&255;l[p+A]=4278190080|T*65793}d+=this.dataWidth*oi.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/oi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/oi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,o){const l=this.yuvData;for(let h=0,d=this.top*this.dataWidth+this.left;h<o;h++,d+=this.dataWidth){const m=d+r/2;for(let p=d,A=d+r-1;p<m;p++,A--){const T=l[p];l[p]=l[A],l[A]=T}}}invert(){return new Xe(this)}}oi.THUMBNAIL_SCALE_FACTOR=2;class wi extends be{constructor(r,o,l,h,d,m,p){if(super(o,l),this.dataWidth=h,this.dataHeight=d,this.left=m,this.top=p,r.BYTES_PER_ELEMENT===4){const A=o*l,T=new Uint8ClampedArray(A);for(let N=0;N<A;N++){const L=r[N],B=L>>16&255,q=L>>7&510,ee=L&255;T[N]=(B+q+ee)/4&255}this.luminances=T}else this.luminances=r;if(h===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return J.arraycopy(this.luminances,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return J.arraycopy(this.luminances,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*r;J.arraycopy(this.luminances,d,h,p,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new wi(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+r,this.top+o)}invert(){return new Xe(this)}}class y extends P{static forName(r){return this.getCharacterSetECIByName(r)}}class S{}S.ISO_8859_1=P.ISO8859_1;class D{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class V{static singletonList(r){return[r]}static min(r,o){return r.sort(o)[0]}}class le{constructor(r){this.previous=r}getPrevious(){return this.previous}}class xe extends le{constructor(r,o,l){super(r),this.value=o,this.bitCount=l}appendTo(r,o){r.appendBits(this.value,this.bitCount)}add(r,o){return new xe(this,r,o)}addBinaryShift(r,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new xe(this,r,o)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+re.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Ye extends xe{constructor(r,o,l){super(r,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(r,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(r,o){return new Ye(this,r,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vt(O,r,o){return new Ye(O,r,o)}function Ln(O,r,o){return new xe(O,r,o)}const jt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_n=0,jn=1,Zn=2,hr=3,ar=4,Mo=new xe(null,0,0),Va=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Hu(O){for(let r of O)fe.fill(r,-1);return O[_n][ar]=0,O[jn][ar]=0,O[jn][_n]=28,O[hr][ar]=0,O[Zn][ar]=0,O[Zn][_n]=15,O}const _c=Hu(fe.createInt32Array(6,6));class _i{constructor(r,o,l,h){this.token=r,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,o){let l=this.bitCount,h=this.token;if(r!==this.mode){let m=Va[this.mode][r];h=Ln(h,m&65535,m>>16),l+=m>>16}let d=r===Zn?4:5;return h=Ln(h,o,d),new _i(h,r,0,l+d)}shiftAndAppend(r,o){let l=this.token,h=this.mode===Zn?4:5;return l=Ln(l,_c[this.mode][r],h),l=Ln(l,o,5),new _i(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(r){let o=this.token,l=this.mode,h=this.bitCount;if(this.mode===ar||this.mode===Zn){let p=Va[l][_n];o=Ln(o,p&65535,p>>16),h+=p>>16,l=_n}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new _i(o,l,this.binaryShiftByteCount+1,h+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=Vt(o,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new _i(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let o=this.bitCount+(Va[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?o+=_i.calculateBinaryShiftCost(r)-_i.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(o+=10),o<=r.bitCount}toBitArray(r){let o=[];for(let h=this.endBinaryShift(r.length).token;h!==null;h=h.getPrevious())o.unshift(h);let l=new _e;for(const h of o)h.appendTo(l,r);return l}toString(){return $.format("%s bits=%d bytes=%d",jt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}_i.INITIAL_STATE=new _i(Mo,_n,0,0);function Ac(O){const r=$.getCharCode(" "),o=$.getCharCode("."),l=$.getCharCode(",");O[_n][r]=1;const h=$.getCharCode("Z"),d=$.getCharCode("A");for(let B=d;B<=h;B++)O[_n][B]=B-d+2;O[jn][r]=1;const m=$.getCharCode("z"),p=$.getCharCode("a");for(let B=p;B<=m;B++)O[jn][B]=B-p+2;O[Zn][r]=1;const A=$.getCharCode("9"),T=$.getCharCode("0");for(let B=T;B<=A;B++)O[Zn][B]=B-T+2;O[Zn][l]=12,O[Zn][o]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<N.length;B++)O[hr][$.getCharCode(N[B])]=B;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<L.length;B++)$.getCharCode(L[B])>0&&(O[ar][$.getCharCode(L[B])]=B);return O}const yl=Ac(fe.createInt32Array(5,256));class ja{constructor(r){this.text=r}encode(){const r=$.getCharCode(" "),o=$.getCharCode(`
`);let l=V.singletonList(_i.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case $.getCharCode("\r"):m=p===o?2:0;break;case $.getCharCode("."):m=p===r?3:0;break;case $.getCharCode(","):m=p===r?4:0;break;case $.getCharCode(":"):m=p===r?5:0;break;default:m=0}m>0?(l=ja.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return V.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,o){const l=[];for(let h of r)this.updateStateForChar(h,o,l);return ja.simplifyStates(l)}updateStateForChar(r,o,l){let h=this.text[o]&255,d=yl[r.getMode()][h]>0,m=null;for(let p=0;p<=ar;p++){let A=yl[p][h];if(A>0){if(m==null&&(m=r.endBinaryShift(o)),!d||p===r.getMode()||p===Zn){const T=m.latchAndAppend(p,A);l.push(T)}if(!d&&_c[r.getMode()][p]>=0){const T=m.shiftAndAppend(p,A);l.push(T)}}}if(r.getBinaryShiftByteCount()>0||yl[r.getMode()][h]===0){let p=r.addBinaryShiftChar(o);l.push(p)}}static updateStateListForPair(r,o,l){const h=[];for(let d of r)this.updateStateForPair(d,o,l,h);return this.simplifyStates(h)}static updateStateForPair(r,o,l,h){let d=r.endBinaryShift(o);if(h.push(d.latchAndAppend(ar,l)),r.getMode()!==ar&&h.push(d.shiftAndAppend(ar,l)),l===3||l===4){let m=d.latchAndAppend(Zn,16-l).latchAndAppend(Zn,1);h.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(o).addBinaryShiftChar(o+1);h.push(m)}}static simplifyStates(r){let o=[];for(const l of r){let h=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}h&&o.push(l)}return o}}class Ft{constructor(){}static encodeBytes(r){return Ft.encode(r,Ft.DEFAULT_EC_PERCENT,Ft.DEFAULT_AZTEC_LAYERS)}static encode(r,o,l){let h=new ja(r).encode(),d=re.truncDivision(h.getSize()*o,100)+11,m=h.getSize()+d,p,A,T,N,L;if(l!==Ft.DEFAULT_AZTEC_LAYERS){if(p=l<0,A=Math.abs(l),A>(p?Ft.MAX_NB_BITS_COMPACT:Ft.MAX_NB_BITS))throw new R($.format("Illegal value %s for layers",l));T=Ft.totalBitsInLayer(A,p),N=Ft.WORD_SIZE[A];let Re=T-T%N;if(L=Ft.stuffBits(h,N),L.getSize()+d>Re)throw new R("Data to large for user specified layer");if(p&&L.getSize()>N*64)throw new R("Data to large for user specified layer")}else{N=0,L=null;for(let Re=0;;Re++){if(Re>Ft.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(p=Re<=3,A=p?Re+1:Re,T=Ft.totalBitsInLayer(A,p),m>T)continue;(L==null||N!==Ft.WORD_SIZE[A])&&(N=Ft.WORD_SIZE[A],L=Ft.stuffBits(h,N));let Dt=T-T%N;if(!(p&&L.getSize()>N*64)&&L.getSize()+d<=Dt)break}}let B=Ft.generateCheckWords(L,T,N),q=L.getSize()/N,ee=Ft.generateModeMessage(p,A,q),te=(p?11:14)+A*4,ue=new Int32Array(te),Ee;if(p){Ee=te;for(let Re=0;Re<ue.length;Re++)ue[Re]=Re}else{Ee=te+1+2*re.truncDivision(re.truncDivision(te,2)-1,15);let Re=re.truncDivision(te,2),Dt=re.truncDivision(Ee,2);for(let ft=0;ft<Re;ft++){let Pr=ft+re.truncDivision(ft,15);ue[Re-ft-1]=Dt-Pr-1,ue[Re+ft]=Dt+Pr+1}}let Be=new Me(Ee);for(let Re=0,Dt=0;Re<A;Re++){let ft=(A-Re)*4+(p?9:12);for(let Pr=0;Pr<ft;Pr++){let Ai=Pr*2;for(let Br=0;Br<2;Br++)B.get(Dt+Ai+Br)&&Be.set(ue[Re*2+Br],ue[Re*2+Pr]),B.get(Dt+ft*2+Ai+Br)&&Be.set(ue[Re*2+Pr],ue[te-1-Re*2-Br]),B.get(Dt+ft*4+Ai+Br)&&Be.set(ue[te-1-Re*2-Br],ue[te-1-Re*2-Pr]),B.get(Dt+ft*6+Ai+Br)&&Be.set(ue[te-1-Re*2-Pr],ue[Re*2+Br])}Dt+=ft*8}if(Ft.drawModeMessage(Be,p,Ee,ee),p)Ft.drawBullsEye(Be,re.truncDivision(Ee,2),5);else{Ft.drawBullsEye(Be,re.truncDivision(Ee,2),7);for(let Re=0,Dt=0;Re<re.truncDivision(te,2)-1;Re+=15,Dt+=16)for(let ft=re.truncDivision(Ee,2)&1;ft<Ee;ft+=2)Be.set(re.truncDivision(Ee,2)-Dt,ft),Be.set(re.truncDivision(Ee,2)+Dt,ft),Be.set(ft,re.truncDivision(Ee,2)-Dt),Be.set(ft,re.truncDivision(Ee,2)+Dt)}let ze=new D;return ze.setCompact(p),ze.setSize(Ee),ze.setLayers(A),ze.setCodeWords(q),ze.setMatrix(Be),ze}static drawBullsEye(r,o,l){for(let h=0;h<l;h+=2)for(let d=o-h;d<=o+h;d++)r.set(d,o-h),r.set(d,o+h),r.set(o-h,d),r.set(o+h,d);r.set(o-l,o-l),r.set(o-l+1,o-l),r.set(o-l,o-l+1),r.set(o+l,o-l),r.set(o+l,o-l+1),r.set(o+l,o+l-1)}static generateModeMessage(r,o,l){let h=new _e;return r?(h.appendBits(o-1,2),h.appendBits(l-1,6),h=Ft.generateCheckWords(h,28,4)):(h.appendBits(o-1,5),h.appendBits(l-1,11),h=Ft.generateCheckWords(h,40,4)),h}static drawModeMessage(r,o,l,h){let d=re.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let p=d-3+m;h.get(m)&&r.set(p,d-5),h.get(m+7)&&r.set(d+5,p),h.get(20-m)&&r.set(p,d+5),h.get(27-m)&&r.set(d-5,p)}else for(let m=0;m<10;m++){let p=d-5+m+re.truncDivision(m,5);h.get(m)&&r.set(p,d-7),h.get(m+10)&&r.set(d+7,p),h.get(29-m)&&r.set(p,d+7),h.get(39-m)&&r.set(d-7,p)}}static generateCheckWords(r,o,l){let h=r.getSize()/l,d=new Us(Ft.getGF(l)),m=re.truncDivision(o,l),p=Ft.bitsToWords(r,l,m);d.encode(p,m-h);let A=o%l,T=new _e;T.appendBits(0,A);for(const N of Array.from(p))T.appendBits(N,l);return T}static bitsToWords(r,o,l){let h=new Int32Array(l),d,m;for(d=0,m=r.getSize()/o;d<m;d++){let p=0;for(let A=0;A<o;A++)p|=r.get(d*o+A)?1<<o-A-1:0;h[d]=p}return h}static getGF(r){switch(r){case 4:return gt.AZTEC_PARAM;case 6:return gt.AZTEC_DATA_6;case 8:return gt.AZTEC_DATA_8;case 10:return gt.AZTEC_DATA_10;case 12:return gt.AZTEC_DATA_12;default:throw new R("Unsupported word size "+r)}}static stuffBits(r,o){let l=new _e,h=r.getSize(),d=(1<<o)-2;for(let m=0;m<h;m+=o){let p=0;for(let A=0;A<o;A++)(m+A>=h||r.get(m+A))&&(p|=1<<o-1-A);(p&d)===d?(l.appendBits(p&d,o),m--):p&d?l.appendBits(p,o):(l.appendBits(p|1,o),m--)}return l}static totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}Ft.DEFAULT_EC_PERCENT=33,Ft.DEFAULT_AZTEC_LAYERS=0,Ft.MAX_NB_BITS=32,Ft.MAX_NB_BITS_COMPACT=4,Ft.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class xl{encode(r,o,l,h){return this.encodeWithHints(r,o,l,h,null)}encodeWithHints(r,o,l,h,d){let m=S.ISO_8859_1,p=Ft.DEFAULT_EC_PERCENT,A=Ft.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Vn.CHARACTER_SET)&&(m=y.forName(d.get(Vn.CHARACTER_SET).toString())),d.has(Vn.ERROR_CORRECTION)&&(p=re.parseInt(d.get(Vn.ERROR_CORRECTION).toString())),d.has(Vn.AZTEC_LAYERS)&&(A=re.parseInt(d.get(Vn.AZTEC_LAYERS).toString()))),xl.encodeLayers(r,o,l,h,m,p,A)}static encodeLayers(r,o,l,h,d,m,p){if(o!==Le.AZTEC)throw new R("Can only encode AZTEC, but got "+o);let A=Ft.encode($.getBytes(r,d),m,p);return xl.renderResult(A,l,h)}static renderResult(r,o,l){let h=r.getMatrix();if(h==null)throw new vn;let d=h.getWidth(),m=h.getHeight(),p=Math.max(o,d),A=Math.max(l,m),T=Math.min(p/d,A/m),N=(p-d*T)/2,L=(A-m*T)/2,B=new Me(p,A);for(let q=0,ee=L;q<m;q++,ee+=T)for(let te=0,ue=N;te<d;te++,ue+=T)h.get(te,q)&&B.setRegion(ue,ee,T,T);return B}}t.AbstractExpandedDecoder=zn,t.ArgumentException=C,t.ArithmeticException=Pn,t.AztecCode=D,t.AztecCodeReader=Ds,t.AztecCodeWriter=xl,t.AztecDecoder=Ct,t.AztecDetector=Rs,t.AztecDetectorResult=zi,t.AztecEncoder=Ft,t.AztecHighLevelEncoder=ja,t.AztecPoint=Xn,t.BarcodeFormat=Le,t.Binarizer=G,t.BinaryBitmap=k,t.BitArray=_e,t.BitMatrix=Me,t.BitSource=Wr,t.BrowserAztecCodeReader=hs,t.BrowserBarcodeReader=xc,t.BrowserCodeReader=Ge,t.BrowserDatamatrixCodeReader=Ba,t.BrowserMultiFormatReader=dl,t.BrowserPDF417Reader=gl,t.BrowserQRCodeReader=Do,t.BrowserQRCodeSvgWriter=Ei,t.CharacterSetECI=P,t.ChecksumException=j,t.Code128Reader=Ve,t.Code39Reader=xn,t.DataMatrixDecodedBitStreamParser=Ii,t.DataMatrixReader=di,t.DecodeHintType=Ue,t.DecoderResult=nt,t.DefaultGridSampler=In,t.DetectorResult=Is,t.EAN13Reader=Cr,t.EncodeHintType=Vn,t.Exception=E,t.FormatException=z,t.GenericGF=gt,t.GenericGFPoly=ht,t.GlobalHistogramBinarizer=Ne,t.GridSampler=Ns,t.GridSamplerInstance=Nn,t.HTMLCanvasElementLuminanceSource=K,t.HybridBinarizer=me,t.ITFReader=It,t.IllegalArgumentException=R,t.IllegalStateException=vn,t.InvertedLuminanceSource=Xe,t.LuminanceSource=be,t.MathUtils=At,t.MultiFormatOneDReader=ur,t.MultiFormatReader=Bs,t.MultiFormatWriter=pl,t.NotFoundException=ae,t.OneDReader=an,t.PDF417DecodedBitStreamParser=ye,t.PDF417DecoderErrorCorrection=Wi,t.PDF417Reader=sr,t.PDF417ResultMetadata=ra,t.PerspectiveTransform=Kt,t.PlanarYUVLuminanceSource=oi,t.QRCodeByteMatrix=Vs,t.QRCodeDataMask=ir,t.QRCodeDecodedBitStreamParser=hn,t.QRCodeDecoderErrorCorrectionLevel=mt,t.QRCodeDecoderFormatInformation=Mn,t.QRCodeEncoder=on,t.QRCodeEncoderQRCode=kr,t.QRCodeMaskUtil=wn,t.QRCodeMatrixUtil=st,t.QRCodeMode=it,t.QRCodeReader=pi,t.QRCodeVersion=qe,t.QRCodeWriter=Kn,t.RGBLuminanceSource=wi,t.RSS14Reader=Lt,t.RSSExpandedReader=Te,t.ReaderException=Ps,t.ReedSolomonDecoder=Yn,t.ReedSolomonEncoder=Us,t.ReedSolomonException=cr,t.Result=Oe,t.ResultMetadataType=He,t.ResultPoint=We,t.StringUtils=$,t.UnsupportedOperationException=Y,t.VideoInputDevice=ve,t.WhiteRectangleDetector=sn,t.WriterException=tn,t.ZXingArrays=fe,t.ZXingCharset=y,t.ZXingInteger=re,t.ZXingStandardCharsets=S,t.ZXingStringBuilder=X,t.ZXingStringEncoding=Z,t.ZXingSystem=J,t.createAbstractExpandedDecoder=ds,Object.defineProperty(t,"__esModule",{value:!0})})}(gu,gu.exports)),gu.exports}var kn=qN();const YN=k1(kn),XN=WA({__proto__:null,default:YN},[kn]);var Ax=function(){function i(e,t,a){if(this.formatMap=new Map([[Ze.QR_CODE,kn.BarcodeFormat.QR_CODE],[Ze.AZTEC,kn.BarcodeFormat.AZTEC],[Ze.CODABAR,kn.BarcodeFormat.CODABAR],[Ze.CODE_39,kn.BarcodeFormat.CODE_39],[Ze.CODE_93,kn.BarcodeFormat.CODE_93],[Ze.CODE_128,kn.BarcodeFormat.CODE_128],[Ze.DATA_MATRIX,kn.BarcodeFormat.DATA_MATRIX],[Ze.MAXICODE,kn.BarcodeFormat.MAXICODE],[Ze.ITF,kn.BarcodeFormat.ITF],[Ze.EAN_13,kn.BarcodeFormat.EAN_13],[Ze.EAN_8,kn.BarcodeFormat.EAN_8],[Ze.PDF_417,kn.BarcodeFormat.PDF_417],[Ze.RSS_14,kn.BarcodeFormat.RSS_14],[Ze.RSS_EXPANDED,kn.BarcodeFormat.RSS_EXPANDED],[Ze.UPC_A,kn.BarcodeFormat.UPC_A],[Ze.UPC_E,kn.BarcodeFormat.UPC_E],[Ze.UPC_EAN_EXTENSION,kn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!XN)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=a;var c=this.createZXingFormats(e),f=new Map;f.set(kn.DecodeHintType.POSSIBLE_FORMATS,c),f.set(kn.DecodeHintType.TRY_HARDER,!1),this.hints=f}return i.prototype.decodeAsync=function(e){var t=this;return new Promise(function(a,c){try{a(t.decode(e))}catch(f){c(f)}})},i.prototype.decode=function(e){var t=new kn.MultiFormatReader(this.verbose,this.hints),a=new kn.HTMLCanvasElementLuminanceSource(e),c=new kn.BinaryBitmap(new kn.HybridBinarizer(a)),f=t.decode(c);return{text:f.text,format:I_.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,c){e.set(t,a)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var t=[],a=0,c=e;a<c.length;a++){var f=c[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return t},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}(),QN=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(x){x(f)})}return new(t||(t=Promise))(function(f,x){function v(C){try{E(a.next(C))}catch(R){x(R)}}function _(C){try{E(a.throw(C))}catch(R){x(R)}}function E(C){C.done?f(C.value):c(C.value).then(v,_)}E((a=a.apply(i,e||[])).next())})},WN=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(E){return function(C){return _([E,C])}}function _(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(t=0)),t;)try{if(a=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(i,t)}catch(C){E=[6,C],c=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},vx=function(){function i(e,t,a){if(this.formatMap=new Map([[Ze.QR_CODE,"qr_code"],[Ze.AZTEC,"aztec"],[Ze.CODABAR,"codabar"],[Ze.CODE_39,"code_39"],[Ze.CODE_93,"code_93"],[Ze.CODE_128,"code_128"],[Ze.DATA_MATRIX,"data_matrix"],[Ze.ITF,"itf"],[Ze.EAN_13,"ean_13"],[Ze.EAN_8,"ean_8"],[Ze.PDF_417,"pdf417"],[Ze.UPC_A,"upc_a"],[Ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=a;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return QN(this,void 0,void 0,function(){var t,a;return WN(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(t),[2,{text:a.rawValue,format:I_.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var t=null,a=0,c=0,f=e;c<f.length;c++){var x=f[c],v=x.boundingBox.width*x.boundingBox.height;v>a&&(a=v,t=x)}if(!t)throw"No largest barcode found";return t},i.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],a=0,c=e;a<c.length;a++){var f=c[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,c){e.set(t,a)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}(),bx=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(x){x(f)})}return new(t||(t=Promise))(function(f,x){function v(C){try{E(a.next(C))}catch(R){x(R)}}function _(C){try{E(a.throw(C))}catch(R){x(R)}}function E(C){C.done?f(C.value):c(C.value).then(v,_)}E((a=a.apply(i,e||[])).next())})},Tx=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(E){return function(C){return _([E,C])}}function _(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(t=0)),t;)try{if(a=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(i,t)}catch(C){E=[6,C],c=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},KN=function(){function i(e,t,a,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,t&&vx.isSupported()?(this.primaryDecoder=new vx(e,a,c),this.secondaryDecoder=new Ax(e,a,c)):this.primaryDecoder=new Ax(e,a,c)}return i.prototype.decodeAsync=function(e){return bx(this,void 0,void 0,function(){var t;return Tx(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return bx(this,void 0,void 0,function(){var t,a;return Tx(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(a=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw a;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,a=this.executionResults;t<a.length;t++){var c=a[t];e+=c}var f=e/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}(),Fg=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),Rf=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(x){x(f)})}return new(t||(t=Promise))(function(f,x){function v(C){try{E(a.next(C))}catch(R){x(R)}}function _(C){try{E(a.throw(C))}catch(R){x(R)}}function E(C){C.done?f(C.value):c(C.value).then(v,_)}E((a=a.apply(i,e||[])).next())})},Df=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(E){return function(C){return _([E,C])}}function _(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(t=0)),t;)try{if(a=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(i,t)}catch(C){E=[6,C],c=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},M_=function(){function i(e,t){this.name=e,this.track=t}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var t={};t[this.name]=e;var a={advanced:[t]};return this.track.applyConstraints(a)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},i}(),ZN=function(i){Fg(e,i);function e(t,a){return i.call(this,t,a)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var a={};a[this.name]=t;var c={advanced:[a]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),a=t[this.name];return{min:a.min,max:a.max,step:a.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(M_),$N=function(i){Fg(e,i);function e(t){return i.call(this,"zoom",t)||this}return e}(ZN),JN=function(i){Fg(e,i);function e(t){return i.call(this,"torch",t)||this}return e}(M_),eR=function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new $N(this.track)},i.prototype.torchFeature=function(){return new JN(this.track)},i}(),tR=function(){function i(e,t,a){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var a=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(a,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,t,a,c){return Rf(this,void 0,void 0,function(){var f,x;return Df(this,function(v){switch(v.label){case 0:return f=new i(e,t,c),a.aspectRatio?(x={aspectRatio:a.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:v.sent(),v.label=2;case 2:return f.setupSurface(),[2,f]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var t=this,a=function(){setTimeout(e,200),t.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return Rf(this,void 0,void 0,function(){return Df(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,a){var c=e.mediaStream.getVideoTracks(),f=c.length,x=0;e.mediaStream.getVideoTracks().forEach(function(v){e.mediaStream.removeTrack(v),v.stop(),++x,x>=f&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},i.prototype.getCapabilities=function(){return new eR(this.getFirstTrackOrFail())},i}(),nR=function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,t,a){return Rf(this,void 0,void 0,function(){return Df(this,function(c){return[2,tR.create(e,this.mediaStream,t,a)]})})},i.create=function(e){return Rf(this,void 0,void 0,function(){var t,a;return Df(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return a=c.sent(),[2,new i(a)]}})})},i}(),Cx=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(x){x(f)})}return new(t||(t=Promise))(function(f,x){function v(C){try{E(a.next(C))}catch(R){x(R)}}function _(C){try{E(a.throw(C))}catch(R){x(R)}}function E(C){C.done?f(C.value):c(C.value).then(v,_)}E((a=a.apply(i,e||[])).next())})},Sx=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(E){return function(C){return _([E,C])}}function _(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(t=0)),t;)try{if(a=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(i,t)}catch(C){E=[6,C],c=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},rR=function(){function i(){}return i.failIfNotSupported=function(){return Cx(this,void 0,void 0,function(){return Sx(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return Cx(this,void 0,void 0,function(){return Sx(this,function(t){return[2,nR.create(e)]})})},i}(),iR=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(x){x(f)})}return new(t||(t=Promise))(function(f,x){function v(C){try{E(a.next(C))}catch(R){x(R)}}function _(C){try{E(a.throw(C))}catch(R){x(R)}}function E(C){C.done?f(C.value):c(C.value).then(v,_)}E((a=a.apply(i,e||[])).next())})},sR=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(E){return function(C){return _([E,C])}}function _(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(t=0)),t;)try{if(a=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(i,t)}catch(C){E=[6,C],c=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},aR=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=Ql.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=Ql.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return iR(this,void 0,void 0,function(){var e,t,a,c,f,x,v;return sR(this,function(_){switch(_.label){case 0:return e=function(E){for(var C=E.getVideoTracks(),R=0,k=C;R<k.length;R++){var j=k[R];j.enabled=!1,j.stop(),E.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=_.sent(),c=[],f=0,x=a;f<x.length;f++)v=x[f],v.kind==="videoinput"&&c.push({id:v.deviceId,label:v.label});return e(t),[2,c]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var a=function(f){for(var x=[],v=0,_=f;v<_.length;v++){var E=_[v];E.kind==="video"&&x.push({id:E.id,label:E.label})}e(x)},c=MediaStreamTrack;c.getSources(a)})},i}(),nr;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(nr||(nr={}));var oR=function(){function i(){this.state=nr.NOT_STARTED,this.onGoingTransactionNewState=nr.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=nr.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=nr.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==nr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case nr.UNKNOWN:throw"Transition from unknown is not allowed";case nr.NOT_STARTED:this.failIfNewStateIs(e,[nr.PAUSED]);break;case nr.SCANNING:break;case nr.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,t){for(var a=0,c=t;a<c.length;a++){var f=c[a];if(e===f)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i}(),lR=function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===nr.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==nr.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===nr.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===nr.PAUSED},i}(),cR=function(){function i(){}return i.create=function(){return new lR(new oR)},i}(),uR=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),Bi=function(i){uR(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(_s),hR=function(){function i(e,t){this.logger=t,this.fps=Bi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Bi.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?D_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!qs(this.qrbox)},i.create=function(e,t){return new i(e,t)},i}(),Ix=function(){function i(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var a;typeof t=="boolean"?this.verbose=t===!0:t&&(a=t,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new R_(this.verbose),this.qrcode=new KN(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=cR.create()}return i.prototype.start=function(e,t,a,c){var f=this;if(!e)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;c?x=c:x=this.verbose?this.logger.log:function(){};var v=hR.create(t,this.logger);this.clearElement();var _=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=_,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Bi.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var R=this,k=this.stateManagerProxy.startTransition(nr.SCANNING);return new Promise(function(j,G){var J=E?v.videoConstraints:R.createVideoConstraints(e);if(!J){k.cancel(),G("videoConstraints should be defined");return}var W={};(!E||v.aspectRatio)&&(W.aspectRatio=v.aspectRatio);var he={onRenderSurfaceReady:function(fe,re){R.setupUi(fe,re,v),R.isScanning=!0,R.foreverScan(v,a,x)}};rR.failIfNotSupported().then(function(fe){fe.create(J).then(function(re){return re.render(f.element,W,he).then(function(_e){R.renderedCamera=_e,k.execute(),j(null)}).catch(function(_e){k.cancel(),G(_e)})}).catch(function(re){k.cancel(),G(Ql.errorGettingUserMedia(re))})}).catch(function(fe){k.cancel(),G(Ql.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(nr.PAUSED),this.showPausedState(),(qs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(nr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(nr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(e.element){var f=document.getElementById(Bi.SHADED_REGION_ELEMENT_ID);f&&e.element.removeChild(f)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),a(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(a){return a.decodedText})},i.prototype.scanFileV2=function(e,t){var a=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(qs(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,f){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(e);var x=new Image;x.onload=function(){var v=x.width,_=x.height,E=document.getElementById(a.elementId),C=E.clientWidth?E.clientWidth:Bi.DEFAULT_WIDTH,R=Math.max(E.clientHeight?E.clientHeight:_,Bi.FILE_SCAN_MIN_HEIGHT),k=a.computeCanvasDrawConfig(v,_,C,R);if(t){var j=a.createCanvasElement(C,R,"qr-canvas-visible");j.style.display="inline-block",E.appendChild(j);var G=j.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=C,G.canvas.height=R,G.drawImage(x,0,0,v,_,k.x,k.y,k.width,k.height)}var J=Bi.FILE_SCAN_HIDDEN_CANVAS_PADDING,W=Math.max(x.width,k.width),he=Math.max(x.height,k.height),fe=W+2*J,re=he+2*J,_e=a.createCanvasElement(fe,re);E.appendChild(_e);var je=_e.getContext("2d");if(!je)throw"Unable to get 2d context from canvas";je.canvas.width=fe,je.canvas.height=re,je.drawImage(x,0,0,v,_,J,J,W,he);try{a.qrcode.decodeRobustlyAsync(_e).then(function(Ue){c(Ex.createFromQrcodeResult(Ue))}).catch(f)}catch(Ue){f("QR code parse error, error = ".concat(Ue))}},x.onerror=f,x.onabort=f,x.onstalled=f,x.onsuspend=f,x.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return aR.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!D_.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var t=[Ze.QR_CODE,Ze.AZTEC,Ze.CODABAR,Ze.CODE_39,Ze.CODE_93,Ze.CODE_128,Ze.DATA_MATRIX,Ze.MAXICODE,Ze.ITF,Ze.EAN_13,Ze.EAN_8,Ze.PDF_417,Ze.RSS_14,Ze.RSS_EXPANDED,Ze.UPC_A,Ze.UPC_E,Ze.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],c=0,f=e.formatsToSupport;c<f.length;c++){var x=f[c];zN(x)?a.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(qs(e))return!0;if(!qs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(qs(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return qs(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,t,a){var c=this,f=a.qrbox;this.validateQrboxConfig(f);var x=this.toQrdimensions(e,t,f),v=function(E){if(E<Bi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Bi.MIN_QR_BOX_SIZE,"px.")},_=function(E){return E>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=e),E};v(x.width),v(x.height),x.width=_(x.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,t,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return a},i.prototype.setupUi=function(e,t,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,a);var c=qs(a.qrbox)?{width:e,height:t}:a.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(e,t,c);f.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=a.isShadedBoxEnabled()&&f.height<=t,v={x:0,y:0,width:e,height:t},_=x?this.getShadedRegionBounds(e,t,f):v,E=this.createCanvasElement(_.width,_.height),C={willReadFrequently:!0},R=E.getContext("2d",C);R.canvas.width=_.width,R.canvas.height=_.height,this.element.append(E),x&&this.possiblyInsertShadingElement(this.element,e,t,f),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=R,this.canvasElement=E},i.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Ql.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},i.prototype.scanContext=function(e,t){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,Ex.createFromQrcodeResult(c)),a.possiblyUpdateShaders(!0),!0}).catch(function(c){a.possiblyUpdateShaders(!1);var f=Ql.codeParseError(c);return t(f,N_.createFrom(f)),!1})},i.prototype.foreverScan=function(e,t,a){var c=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),x=f.videoWidth/f.clientWidth,v=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*x,E=this.qrRegion.height*v,C=this.qrRegion.x*x,R=this.qrRegion.y*v;this.context.drawImage(f,C,R,_,E,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,a)},c.getTimeoutFps(e.fps))};this.scanContext(t,a).then(function(j){!j&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,a).finally(function(){k()})):k()}).catch(function(j){c.logger.logError("Error happend while scanning context",j),k()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",a="deviceId",c={user:!0,environment:!0},f="exact",x=function(G){if(G in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(G,"'")},v=Object.keys(e);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var _=Object.keys(e)[0];if(_!==t&&_!==a)throw"Only '".concat(t,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(_===t){var E=e.facingMode;if(typeof E=="string"){if(x(E))return{facingMode:E}}else if(typeof E=="object")if(f in E){if(x(E["".concat(f)]))return{facingMode:{exact:E["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var C=typeof E;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var R=e.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(f in R)return{deviceId:{exact:R["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var k=typeof R;throw"Invalid type of 'deviceId' = ".concat(k)}}}var j=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},i.prototype.computeCanvasDrawConfig=function(e,t,a,c){if(e<=a&&t<=c){var f=(a-e)/2,x=(c-t)/2;return{x:f,y:x,width:e,height:t}}else{var v=e,_=t;return e>a&&(t=a/e*t,e=a),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(_)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,a,c)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Bi.BORDER_SHADER_MATCH_COLOR:Bi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,t,a){var c=e,f=t,x=document.createElement("canvas");return x.style.width="".concat(c,"px"),x.style.height="".concat(f,"px"),x.style.display="none",x.id=qs(a)?"qr-canvas":a,x},i.prototype.getShadedRegionBounds=function(e,t,a){if(a.width>e||a.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-a.width)/2,y:(t-a.height)/2,width:a.width,height:a.height}},i.prototype.possiblyInsertShadingElement=function(e,t,a,c){if(!(t-c.width<1||a-c.height<1)){var f=document.createElement("div");f.style.position="absolute";var x=(t-c.width)/2,v=(a-c.height)/2;if(f.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(Bi.SHADED_REGION_ELEMENT_ID),t-c.width<11||a-c.height<11)this.hasBorderShaders=!1;else{var _=5,E=40;this.insertShaderBorders(f,E,_,-_,null,0,!0),this.insertShaderBorders(f,E,_,-_,null,0,!1),this.insertShaderBorders(f,E,_,null,-_,0,!0),this.insertShaderBorders(f,E,_,null,-_,0,!1),this.insertShaderBorders(f,_,E+_,-_,null,-_,!0),this.insertShaderBorders(f,_,E+_,null,-_,-_,!0),this.insertShaderBorders(f,_,E+_,-_,null,-_,!1),this.insertShaderBorders(f,_,E+_,null,-_,-_,!1),this.hasBorderShaders=!0}e.append(f)}},i.prototype.insertShaderBorders=function(e,t,a,c,f,x,v){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=Bi.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(t,"px"),_.style.height="".concat(a,"px"),c!==null&&(_.style.top="".concat(c,"px")),f!==null&&(_.style.bottom="".concat(f,"px")),v?_.style.left="".concat(x,"px"):_.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),e.appendChild(_)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i}(),zg="data:image/svg+xml;base64,",fR=zg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",dR=zg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Nx=zg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",gR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Rx=function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i}(),mR=function(){function i(){this.data=Rx.createDefault();var e=localStorage.getItem(i.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},i.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=Rx.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i}(),pR=function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=wx.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var a=document.createElement("br"),c=document.createElement("br");this.infoDiv.appendChild(a),this.infoDiv.appendChild(c);var f=document.createElement("a");f.innerText=wx.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),e.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i}(),yR=function(){function i(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Nx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(a){return t.onHoverIn()},this.infoIcon.onmouseout=function(a){return t.onHoverOut()},this.infoIcon.onclick=function(a){return t.onClick()},e.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=gR,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Nx,this.infoIcon.style.opacity="0.6")},i}(),xR=function(){function i(){var e=this;this.infoDiv=new pR,this.infoIcon=new yR(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return i.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},i}(),ER=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(x){x(f)})}return new(t||(t=Promise))(function(f,x){function v(C){try{E(a.next(C))}catch(R){x(R)}}function _(C){try{E(a.throw(C))}catch(R){x(R)}}function E(C){C.done?f(C.value):c(C.value).then(v,_)}E((a=a.apply(i,e||[])).next())})},wR=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(E){return function(C){return _([E,C])}}function _(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(t=0)),t;)try{if(a=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(i,t)}catch(C){E=[6,C],c=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Dx=function(){function i(){}return i.hasPermissions=function(){return ER(this,void 0,void 0,function(){var e,t,a,c;return wR(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=f.sent(),t=0,a=e;t<a.length;t++)if(c=a[t],c.kind==="videoinput"&&c.label)return[2,!0];return[2,!1]}})})},i}(),lo=function(){function i(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var a=t[e];if(i.isCameraScanType(a))return!0}return!1},i.isCameraScanType=function(e){return e===Co.SCAN_TYPE_CAMERA},i.isFileScanType=function(e){return e===Co.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return _s.DEFAULT_SUPPORTED_SCAN_TYPE;var t=_s.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var a=0,c=e;a<c.length;a++){var f=c[a];if(!_s.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return e},i}(),Vi=function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i}(),Ia=function(){function i(){}return i.createElement=function(e,t){var a=document.createElement(e);return a.id=t,a.classList.add(Vi.ALL_ELEMENT_CLASS),e==="button"&&a.setAttribute("type","button"),a},i}(),O_=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(x){x(f)})}return new(t||(t=Promise))(function(f,x){function v(C){try{E(a.next(C))}catch(R){x(R)}}function _(C){try{E(a.throw(C))}catch(R){x(R)}}function E(C){C.done?f(C.value):c(C.value).then(v,_)}E((a=a.apply(i,e||[])).next())})},L_=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(E){return function(C){return _([E,C])}}function _(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(t=0)),t;)try{if(a=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(i,t)}catch(C){E=[6,C],c=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Mx=function(){function i(e,t,a){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=a}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return O_(this,void 0,void 0,function(){var e,t;return L_(this,function(a){switch(a.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return a.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=a.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?dn.torchOffButton():dn.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},i.prototype.propagateFailure=function(e,t){var a=e?dn.torchOnFailedMessage():dn.torchOffFailedMessage();t&&(a+="; Error = "+t),this.onTorchActionFailureCallback(a)},i.prototype.reset=function(){this.isTorchOn=!1},i}(),_R=function(){function i(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Ia.createElement("button",Vi.TORCH_BUTTON_ID),this.torchController=new Mx(e,this,t)}return i.prototype.render=function(e,t){var a=this;this.torchButton.innerText=dn.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var c=this;this.torchButton.addEventListener("click",function(f){return O_(a,void 0,void 0,function(){return L_(this,function(x){switch(x.label){case 0:return[4,c.torchController.flipState()];case 1:return x.sent(),c.torchController.isTorchEnabled()?(c.torchButton.classList.remove(Vi.TORCH_BUTTON_CLASS_TORCH_OFF),c.torchButton.classList.add(Vi.TORCH_BUTTON_CLASS_TORCH_ON)):(c.torchButton.classList.remove(Vi.TORCH_BUTTON_CLASS_TORCH_ON),c.torchButton.classList.add(Vi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(e){this.torchController=new Mx(e,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(e){this.torchButton.innerText=e},i.prototype.reset=function(){this.torchButton.innerText=dn.torchOnButton(),this.torchController.reset()},i.create=function(e,t,a,c){var f=new i(t,c);return f.render(e,a),f},i}(),AR=function(){function i(e,t,a){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var c=document.createElement("label");c.setAttribute("for",this.getFileScanInputId()),c.style.display="inline-block",this.fileBasedScanRegion.appendChild(c),this.fileSelectionButton=Ia.createElement("button",Vi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(v){c.click()}),c.append(this.fileSelectionButton),this.fileScanInput=Ia.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",c.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(v){if(!(v==null||v.target==null)){var _=v.target;if(!(_.files&&_.files.length===0)){var E=_.files,C=E[0],R=C.name;f.setImageNameToButton(R),a(C)}}});var x=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(x),this.fileBasedScanRegion.addEventListener("dragenter",function(v){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),v.stopPropagation(),v.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(v){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),v.stopPropagation(),v.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(v){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),v.stopPropagation(),v.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(v){v.stopPropagation(),v.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var _=v.dataTransfer;if(_){var E=_.files;if(!E||E.length===0)return;for(var C=!1,R=0;R<E.length;++R){var k=E.item(R);if(k){var j=/image.*/;if(k.type.match(j)){C=!0;var G=k.name;f.setImageNameToButton(G),a(k),x.innerText=dn.dragAndDropMessage();break}}}C||(x.innerText=dn.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=dn.dragAndDropMessage(),e.style.fontWeight="400",e},i.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var a=e.substring(0,8),c=e.length,f=e.substring(c-8,c);e="".concat(a,"....").concat(f)}var x=dn.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=x},i.prototype.setInitialValueToButton=function(){var e=dn.fileSelectionChooseImage()+" - "+dn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(e,t,a){var c=new i(e,t,a);return c},i}(),vR=function(){function i(e){this.selectElement=Ia.createElement("select",Vi.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return i.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var a=this.cameras.length;if(a===0)throw new Error("No cameras found");if(a===1)t.style.display="none";else{var c=dn.selectCamera();t.innerText="".concat(c," (").concat(this.cameras.length,")  ")}for(var f=1,x=0,v=this.cameras;x<v.length;x++){var _=v[x],E=_.id,C=_.label==null?E:_.label;(!C||C==="")&&(C=[dn.anonymousCameraPrefix(),f++].join(" "));var R=document.createElement("option");R.value=E,R.innerText=C,this.options.push(R),this.selectElement.appendChild(R)}t.appendChild(this.selectElement),e.appendChild(t)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(e){for(var t=0,a=this.options;t<a.length;t++){var c=a[t];if(c.value===e)return!0}return!1},i.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(e,t){var a=new i(t);return a.render(e),a},i}(),bR=function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ia.createElement("input",Vi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var a=dn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.rangeText.style.marginRight="10px";var c=this;this.rangeInput.addEventListener("input",function(){return c.onValueChange()}),this.rangeInput.addEventListener("change",function(){return c.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var e=dn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(e,t,a,c){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=c.toString(),this.rangeInput.value=a.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(e,t){var a=new i;return a.render(e,t),a},i}(),Ui;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ui||(Ui={}));function TR(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function CR(i,e){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:e}}var SR=function(){function i(e,t,a){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=a===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new lo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new R_(this.verbose),this.persistedDataManager=new mR,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(e,t){var a=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,x){if(e)e(f,x);else{if(a.lastMatchFound===f)return;a.lastMatchFound=f,a.setHeaderMessage(dn.lastMatch(f),Ui.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,x){t&&t(f,x)};var c=document.getElementById(this.elementId);if(!c)throw"HTML Element with id=".concat(this.elementId," not found");c.innerHTML="",this.createBasicLayout(c),this.html5Qrcode=new Ix(this.getScanRegionId(),CR(this.config,this.verbose))},i.prototype.pause=function(e){(qs(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var e=this,t=function(){var a=document.getElementById(e.elementId);a&&(a.innerHTML="",e.resetBasicLayout(a))};return this.html5Qrcode?new Promise(function(a,c){if(!e.html5Qrcode){a();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(f){if(!e.html5Qrcode){a();return}e.html5Qrcode.clear(),t(),a()}).catch(function(f){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",f),c(f)}):(e.html5Qrcode.clear(),t(),a())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(e){return e?(e.fps||(e.fps=_s.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!_s.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=_s.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=_s.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:_s.SCAN_DEFAULT_FPS,rememberLastUsedCamera:_s.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:_s.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),a=this.getScanRegionId();t.id=a,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),lo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var c=document.createElement("div"),f=this.getDashboardId();c.id=f,c.style.width="100%",e.appendChild(c),this.setupInitialDashboard(c)},i.prototype.resetBasicLayout=function(e){e.style.border="none"},i.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var a=new xR;a.renderInto(t);var c=document.createElement("div");c.id=this.getHeaderMessageContainerId(),c.style.display="none",c.style.textAlign="center",c.style.fontSize="14px",c.style.padding="2px 10px",c.style.margin="4px",c.style.borderTop="1px solid #f6f6f6",t.appendChild(c)},i.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},i.prototype.createCameraListUi=function(e,t,a){var c=this;c.showHideScanTypeSwapLink(!1),c.setHeaderMessage(dn.cameraPermissionRequesting());var f=function(){a||c.createPermissionButton(e,t)};Ix.getCameras().then(function(x){c.persistedDataManager.setHasPermission(!0),c.showHideScanTypeSwapLink(!0),c.resetHeaderMessage(),x&&x.length>0?(e.removeChild(t),c.renderCameraSelection(x)):(c.setHeaderMessage(dn.noCameraFound(),Ui.STATUS_WARNING),f())}).catch(function(x){c.persistedDataManager.setHasPermission(!1),a?a.disabled=!1:f(),c.setHeaderMessage(x,Ui.STATUS_WARNING),c.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(e,t){var a=this,c=Ia.createElement("button",this.getCameraPermissionButtonId());c.innerText=dn.cameraPermissionTitle(),c.addEventListener("click",function(){c.disabled=!0,a.createCameraListUi(e,t,c)}),t.appendChild(c)},i.prototype.createPermissionsUi=function(e,t){var a=this;if(lo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Dx.hasPermissions().then(function(c){c?a.createCameraListUi(e,t):(a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t))}).catch(function(c){a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},i.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var a=document.createElement("div");a.id=this.getDashboardSectionCameraScanRegionId(),a.style.display=lo.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(a);var c=document.createElement("div");c.style.textAlign="center",a.appendChild(c),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(a,c),this.renderFileScanUi(t)},i.prototype.renderFileScanUi=function(e){var t=lo.isFileScanType(this.currentScanType),a=this,c=function(f){if(!a.html5Qrcode)throw"html5Qrcode not defined";lo.isFileScanType(a.currentScanType)&&(a.setHeaderMessage(dn.loadingImage()),a.html5Qrcode.scanFileV2(f,!0).then(function(x){a.resetHeaderMessage(),a.qrCodeSuccessCallback(x.decodedText,x)}).catch(function(x){a.setHeaderMessage(x,Ui.STATUS_WARNING),a.qrCodeErrorCallback(x,N_.createFrom(x))}))};this.fileSelectionUi=AR.create(e,t,c)},i.prototype.renderCameraSelection=function(e){var t=this,a=this,c=document.getElementById(this.getDashboardSectionCameraScanRegionId());c.style.textAlign="center";var f=bR.create(c,!1),x=function(J){var W=J.zoomFeature();if(W.isSupported()){f.setOnCameraZoomValueChangeCallback(function(fe){W.apply(fe)});var he=1;t.config.defaultZoomValueIfSupported&&(he=t.config.defaultZoomValueIfSupported),he=HN(he,W.min(),W.max()),f.setValues(W.min(),W.max(),he,W.step()),f.show()}},v=vR.create(c,e),_=document.createElement("span"),E=Ia.createElement("button",Vi.CAMERA_START_BUTTON_ID);E.innerText=dn.scanButtonStartScanningText(),_.appendChild(E);var C=Ia.createElement("button",Vi.CAMERA_STOP_BUTTON_ID);C.innerText=dn.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,_.appendChild(C);var R,k=function(J){if(!J.torchFeature().isSupported()){R&&R.hide();return}R?R.updateTorchCapability(J.torchFeature()):R=_R.create(_,J.torchFeature(),{display:"none",marginLeft:"5px"},function(W){a.setHeaderMessage(W,Ui.STATUS_WARNING)}),R.show()};c.appendChild(_);var j=function(J){J||(E.style.display="none"),E.innerText=dn.scanButtonStartScanningText(),E.style.opacity="1",E.disabled=!1,J&&(E.style.display="inline-block")};if(E.addEventListener("click",function(J){E.innerText=dn.scanButtonScanningStarting(),v.disable(),E.disabled=!0,E.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!1),a.resetHeaderMessage();var W=v.getValue();a.persistedDataManager.setLastUsedCameraId(W),a.html5Qrcode.start(W,TR(a.config),a.qrCodeSuccessCallback,a.qrCodeErrorCallback).then(function(he){C.disabled=!1,C.style.display="inline-block",j(!1);var fe=a.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&k(fe),t.config.showZoomSliderIfSupported===!0&&x(fe)}).catch(function(he){a.showHideScanTypeSwapLink(!0),v.enable(),j(!0),a.setHeaderMessage(he,Ui.STATUS_WARNING)})}),v.hasSingleItem()&&E.click(),C.addEventListener("click",function(J){if(!a.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,a.html5Qrcode.stop().then(function(W){t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!0),v.enable(),E.disabled=!1,C.style.display="none",E.style.display="inline-block",R&&(R.reset(),R.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),a.insertCameraScanImageToScanRegion()}).catch(function(W){C.disabled=!1,a.setHeaderMessage(W,Ui.STATUS_WARNING)})}),a.persistedDataManager.getLastUsedCameraId()){var G=a.persistedDataManager.getLastUsedCameraId();v.hasValue(G)?(v.setValue(G),E.click()):a.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var e=this,t=dn.textIfCameraScanSelected(),a=dn.textIfFileScanSelected(),c=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var x=Ia.createElement("span",this.getDashboardSectionSwapLinkId());x.style.textDecoration="underline",x.style.cursor="pointer",x.innerText=lo.isCameraScanType(this.currentScanType)?t:a,x.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,lo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),x.innerText=a,e.currentScanType=Co.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),x.innerText=t,e.currentScanType=Co.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),f.appendChild(x),c.appendChild(f)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){Dx.hasPermissions().then(function(a){if(a){var c=document.getElementById(t.getCameraPermissionButtonId());if(!c)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";c.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(a){t.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},i.prototype.setHeaderMessage=function(e,t){t||(t=Ui.STATUS_DEFAULT);var a=this.getHeaderMessageDiv();switch(a.innerText=e,a.style.display="block",t){case Ui.STATUS_SUCCESS:a.style.background="rgba(106, 175, 80, 0.26)",a.style.color="#477735";break;case Ui.STATUS_WARNING:a.style.background="rgba(203, 36, 49, 0.14)",a.style.color="#cb2431";break;case Ui.STATUS_DEFAULT:default:a.style.background="rgba(0, 0, 0, 0)",a.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=fR,this.cameraScanImage.alt=dn.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=dR,this.fileScanImage.alt=dn.fileScanAltText()},i.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return Vi.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return Vi.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i}();function IR(){var Ne;const i=So(Ts),e=ul(Ts),t=i.currentUser,a=$s();ne.useEffect(()=>{console.log("Current user:",t),console.log("User is authenticated:",!!t)},[t]);const[c,f]=ne.useState([]),[x,v]=ne.useState(null),[_,E]=ne.useState(!0),[C,R]=ne.useState(null),[k,j]=ne.useState([]),[G,J]=ne.useState({}),[W,he]=ne.useState(!1),[fe,re]=ne.useState(!1),[_e,je]=ne.useState(""),[Ue,z]=ne.useState({type:"",text:""}),F=ne.useRef(null);ne.useEffect(()=>{if(!t){a("/");return}const me=async()=>{try{const Xe=Wt(e,"users",t.uid),K=await Ci(Xe);K.exists()&&v(K.data())}catch(Xe){console.error("Error loading user profile:",Xe)}},be=async()=>{try{E(!0);const Xe=Iu(ux(e,"students"),Nu("stdid","==",t.uid)),K=await vr(Xe),ve=[];K.forEach(Oe=>{const ot=Oe.ref.parent.parent;ot&&ve.push(Ci(ot))});const Ge=(await Promise.all(ve)).map(Oe=>({id:Oe.id,...Oe.data()}));f(Ge)}catch(Xe){console.error("Error loading classrooms:",Xe)}finally{E(!1)}};me(),be()},[t,e,a]);const P=async()=>{try{await i.signOut(),a("/")}catch(me){console.error("Error signing out:",me)}},Y=async me=>{E(!0);try{R(me),J({});const be=await vr(Mr(e,"classroom",me.id,"checkin"));let Xe=[];for(const K of be.docs){const ve=K.data(),Fe=Mr(e,"classroom",me.id,"checkin",K.id,"question");(await vr(Fe)).forEach(Oe=>{const ot=Oe.data();ot.question_show&&Xe.push({checkinId:K.id,checkinCode:ve.code||"-",questionDocId:Oe.id,...ot})})}Xe.sort((K,ve)=>(K.question_no||0)-(ve.question_no||0)),j(Xe)}catch(be){console.error("Error loading quiz:",be)}finally{E(!1)}},Z=()=>{R(null),j([]),J({})},$=(me,be)=>{J(Xe=>({...Xe,[me]:be}))},X=async me=>{const be=G[me.questionDocId]||"";if(!be.trim()){alert("Please enter an answer or select a choice");return}try{const Xe=Wt(e,"classroom",C.id,"checkin",me.checkinId,"answers",String(me.question_no));await ls(Xe,{text:me.question_text},{merge:!0});const K=Wt(Xe,"students",t.uid),ve=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await ls(K,{time:ve,answer:be}),alert("Answer submitted!")}catch(Xe){console.error("Error submitting answer:",Xe),alert("Failed to submit answer.")}},Me=async me=>{if(me.preventDefault(),!_e.trim()){z({type:"error",text:"กรุณาใส่รหัสห้องเรียน"});return}try{const be=Wt(e,"classroom",_e);if(!(await Ci(be)).exists()){z({type:"error",text:"ไม่พบห้องเรียนที่ระบุ กรุณาตรวจสอบรหัสอีกครั้ง"});return}const K=Wt(e,"classroom",_e,"students",t.uid);if((await Ci(K)).exists()){z({type:"error",text:"คุณได้ลงทะเบียนในห้องเรียนนี้แล้ว"});return}await ls(K,{stdid:t.uid,name:(x==null?void 0:x.name)||t.email,status:0}),z({type:"success",text:"ลงทะเบียนสำเร็จ! รอการยืนยันจากอาจารย์"});const Fe=Iu(ux(e,"students"),Nu("stdid","==",t.uid)),Ge=await vr(Fe),Oe=[];Ge.forEach(ke=>{const He=ke.ref.parent.parent;He&&Oe.push(Ci(He))});const Le=(await Promise.all(Oe)).map(ke=>({id:ke.id,...ke.data()}));f(Le),setTimeout(()=>{re(!1),je(""),z({type:"",text:""})},2e3)}catch(be){console.error("Error registering for classroom:",be),z({type:"error",text:"เกิดข้อผิดพลาดในการลงทะเบียน โปรดลองอีกครั้ง"})}},ae=me=>{try{const be=/\/register-classroom\/([^/?\s]+)/,Xe=me.match(be);if(Xe&&Xe[1]){const K=Xe[1];je(K),Me({preventDefault:()=>{}})}else z({type:"error",text:"รูปแบบ QR Code ไม่ถูกต้อง"})}catch(be){console.error("Error processing QR code:",be),z({type:"error",text:"ไม่สามารถประมวลผล QR Code ได้"})}};return ne.useEffect(()=>{if(fe&&!F.current){const me=new SR("qr-reader",{fps:10,qrbox:250},!1);return me.render(be=>{ae(be),me.clear()},be=>{}),F.current=me,()=>{F.current&&(F.current.clear(),F.current=null)}}},[fe]),ne.useEffect(()=>{console.log("Loading state:",_),console.log("Selected classroom:",C)},[_,C]),t?I.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[I.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[I.jsxs("div",{children:[I.jsx("div",{className:"text-3xl font-bold mb-6",children:"Student Classroom"}),I.jsx("div",{className:"mb-4",children:C?I.jsx("button",{onClick:Z,className:"hover:text-blue-300 transition",children:"กลับสู่รายการห้องเรียน"}):I.jsx("button",{onClick:()=>a("/student-dashboard"),className:"hover:text-blue-300 transition",children:"ห้องเรียนของฉัน"})})]}),I.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700",children:[x&&x.photo?I.jsx("img",{src:x.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):I.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:I.jsx("span",{className:"text-lg text-white",children:"N/A"})}),I.jsxs("div",{children:[I.jsx("p",{className:"font-bold",children:(x==null?void 0:x.name)||t.email}),I.jsx("p",{className:"text-sm",children:"Status : Student"})]})]})]}),I.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[I.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C?I.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน : ",((Ne=C.info)==null?void 0:Ne.name)||"Unknown"]}):I.jsx("h1",{className:"text-3xl font-bold text-blue-900",children:"ห้องเรียนของฉัน"}),I.jsx("button",{onClick:()=>he(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),_&&I.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"Loading..."}),!_&&!C&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"mb-6",children:I.jsx("button",{onClick:()=>re(!0),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH text-lg shadow-md",children:"ลงทะเบียนห้องเรียนใหม่"})}),c.length===0?I.jsxs("div",{className:"text-center",children:[I.jsx("p",{className:"text-gray-600 mb-4",children:"คุณยังไม่ได้อยู่ในห้องเรียนใด ๆ"}),I.jsx("button",{onClick:()=>re(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH text-lg shadow-md mx-auto",children:"ลงทะเบียนห้องเรียนใหม่"})]}):I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(me=>{const be=me.info||{};return I.jsxs("div",{className:"border rounded-lg shadow-md p-4 bg-white hover:shadow-xl transition cursor-pointer",onClick:()=>Y(me),children:[be.photo?I.jsx("img",{src:be.photo,alt:be.name,className:"w-full h-40 object-cover rounded-md mb-4"}):I.jsx("div",{className:"w-full h-40 bg-blue-300 flex items-center justify-center rounded-md mb-4",children:I.jsx("span",{className:"text-white",children:"No Image"})}),I.jsx("h2",{className:"text-xl font-bold text-blue-900",children:be.name}),I.jsxs("p",{className:"text-blue-700 text-lg",children:["Code : ",be.code]}),I.jsxs("p",{className:"text-blue-700 text-lg",children:["Room : ",be.room]})]},me.id)})})]}),!_&&C&&I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[I.jsx("h2",{className:"text-2xl font-bold mb-6 text-blue-900",children:"แบบทดสอบ (Quiz)"}),k.length===0?I.jsx("p",{className:"text-gray-600",children:"ยังไม่มีควิซ (question_show = true)"}):I.jsx("div",{className:"space-y-6",children:k.map(me=>{const be=G[me.questionDocId]||"";return I.jsxs("div",{className:"border p-4 rounded-md hover:bg-blue-50 transition",children:[I.jsxs("p",{className:"font-semibold mb-2 text-blue-900",children:["คำถาม #",me.question_no," [",me.checkinCode||"-","] : ",me.question_text]}),me.question_type==="objective"&&Array.isArray(me.choices)&&me.choices.length>0?I.jsx("div",{className:"flex flex-col space-y-2 mb-2",children:me.choices.map((Xe,K)=>I.jsxs("label",{className:"flex items-center space-x-2",children:[I.jsx("input",{type:"radio",name:`q_${me.questionDocId}`,value:Xe,checked:be===Xe,onChange:ve=>$(me.questionDocId,ve.target.value)}),I.jsx("span",{children:Xe})]},K))}):I.jsx("input",{type:"text",placeholder:"Type your answer here...",className:"w-full p-2 border rounded mb-2",value:be,onChange:Xe=>$(me.questionDocId,Xe.target.value)}),I.jsx("button",{onClick:()=>X(me),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"ส่งคำตอบ"})]},me.questionDocId)})})]}),W&&I.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[I.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),I.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:I.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:I.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[I.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:I.jsxs("div",{className:"sm:flex sm:items-start",children:[I.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:I.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),I.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[I.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),I.jsx("div",{className:"mt-2",children:I.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),I.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[I.jsx("button",{type:"button",onClick:()=>{he(!1),P()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),I.jsx("button",{type:"button",onClick:()=>he(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]}),fe&&I.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[I.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),I.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:I.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:I.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[I.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:I.jsxs("div",{className:"sm:flex sm:items-start",children:[I.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:I.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),I.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[I.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ลงทะเบียนห้องเรียน"}),I.jsxs("div",{className:"mt-2",children:[I.jsxs("form",{onSubmit:Me,children:[I.jsx("input",{type:"text",placeholder:"รหัสห้องเรียน",className:"w-full p-2 border rounded mb-2",value:_e,onChange:me=>je(me.target.value)}),I.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"ลงทะเบียน"})]}),Ue.text&&I.jsx("p",{className:`mt-2 text-sm ${Ue.type==="error"?"text-red-600":"text-green-600"}`,children:Ue.text}),I.jsxs("div",{className:"mt-4",children:[I.jsx("h4",{className:"text-md font-ChakraPetchTH mb-2",children:"หรือสแกน QR Code"}),I.jsx("div",{id:"qr-reader",className:"w-full rounded overflow-hidden",style:{maxWidth:"100%"}})]})]})]})]})}),I.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:I.jsx("button",{type:"button",onClick:()=>re(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})})]})})})]})]})]}):null}function NR(){const i=$s(),e=So(),t=ul(Ts),{classroomId:a}=j1(),[c]=Sb(),f=c.get("checkinId")||"",[x,v]=ne.useState(null),[_,E]=ne.useState([]),[C,R]=ne.useState(""),[k,j]=ne.useState(""),[G,J]=ne.useState(!1),[W,he]=ne.useState("subjective"),[fe,re]=ne.useState([""]),[_e,je]=ne.useState(null),[Ue,z]=ne.useState(null),[F,P]=ne.useState([]),[Y,Z]=ne.useState(!1),[$,X]=ne.useState(!1),Me=e.currentUser;ne.useEffect(()=>{async function ke(){if(Me){const He=Wt(t,"users",Me.uid),nt=await Ci(He);nt.exists()&&v(nt.data())}}ke()},[Me,t]),ne.useEffect(()=>{async function ke(){if(!(!a||!f))try{const He=Mr(t,"classroom",a,"checkin",f,"question"),nt=await vr(He),tt=[];nt.forEach(ht=>{tt.push({id:ht.id,...ht.data()})}),tt.sort((ht,Pn)=>ht.question_no-Pn.question_no),E(tt)}catch(He){console.error("Error loading questions:",He)}}ke()},[t,a,f]);const ae=async()=>{if(!a||!f){alert("ไม่พบ classroomId หรือ checkinId");return}if(!C||!k){alert("กรุณากรอกหมายเลขและข้อความคำถาม");return}try{const ke=_e||m_(),He=Wt(t,"classroom",a,"checkin",f,"question",ke);await ls(He,{question_no:parseInt(C,10),question_text:k,question_show:G,question_type:W,choices:W==="objective"?fe.filter(ht=>ht.trim()!==""):[]}),alert(_e?"แก้ไขคำถามสำเร็จ":"สร้างคำถามสำเร็จ"),R(""),j(""),J(!1),he("subjective"),re([""]),je(null);const nt=await vr(Mr(t,"classroom",a,"checkin",f,"question")),tt=[];nt.forEach(ht=>{tt.push({id:ht.id,...ht.data()})}),tt.sort((ht,Pn)=>ht.question_no-Pn.question_no),E(tt)}catch(ke){console.error("Error saving question:",ke),alert("เกิดข้อผิดพลาดในการบันทึกคำถาม")}},Ne=ke=>{je(ke.id),R(ke.question_no),j(ke.question_text),J(ke.question_show),he(ke.question_type||"subjective"),ke.choices&&Array.isArray(ke.choices)?re(ke.choices):re([""])},me=async ke=>{if(window.confirm("คุณแน่ใจหรือไม่ที่จะลบคำถามนี้?"))try{await du(Wt(t,"classroom",a,"checkin",f,"question",ke)),alert("ลบคำถามสำเร็จ"),E(He=>He.filter(nt=>nt.id!==ke))}catch(He){console.error("Error deleting question:",He),alert("ไม่สามารถลบคำถามได้")}},be=async ke=>{try{const He=Wt(t,"classroom",a,"checkin",f,"question",ke.id);await Jl(He,{question_show:!ke.question_show}),E(nt=>nt.map(tt=>tt.id===ke.id?{...tt,question_show:!ke.question_show}:tt))}catch(He){console.error("Error toggling question_show:",He)}},Xe=()=>{re(ke=>[...ke,""])},K=(ke,He)=>{re(nt=>{const tt=[...nt];return tt[ke]=He,tt})},ve=ke=>{re(He=>{const nt=[...He];return nt.splice(ke,1),nt})},Fe=async ke=>{if(!a||!f){alert("ไม่พบ classroomId หรือ checkinId");return}const He=String(ke.question_no);z(ke),P([]),Z(!0);try{const nt=Wt(t,"classroom",a,"checkin",f,"answers",He);await ls(nt,{text:ke.question_text},{merge:!0});const tt=Mr(nt,"students"),ht=await vr(tt),Pn=[];for(const gt of ht.docs){const cr=gt.data(),vn=gt.id,Yn=Wt(t,"classroom",a,"checkin",f,"students",vn),cn=await Ci(Yn);let Ct="(ไม่มีชื่อ)";cn.exists()&&(Ct=cn.data().name||"(ไม่มีชื่อ)"),Pn.push({studentDocId:vn,name:Ct,...cr})}P(Pn)}catch(nt){console.error("Error loading student answers:",nt),alert("ไม่สามารถโหลดคำตอบนักเรียนได้")}finally{Z(!1)}},Ge=()=>{z(null),P([])},Oe=(ke,He)=>{P(nt=>{const tt=[...nt];return tt[ke]={...tt[ke],score:He},tt})},ot=async ke=>{if(!Ue)return;const He=F[ke],nt=String(Ue.question_no);if(He.score==null||He.score===""){alert("กรุณากรอกคะแนนให้ถูกต้อง");return}try{const tt=Wt(t,"classroom",a,"checkin",f,"answers",nt),ht=Wt(tt,"students",He.studentDocId);await Jl(ht,{score:Number(He.score)}),alert(`บันทึกคะแนนสำเร็จสำหรับนักเรียน: ${He.studentDocId}`)}catch(tt){console.error("Error saving score:",tt),alert("ไม่สามารถบันทึกคะแนนได้")}},Le=async()=>{try{await TE(e),i("/")}catch(ke){console.error("Error signing out:",ke)}};return I.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[I.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[I.jsxs("div",{children:[I.jsx("div",{className:"text-4xl font-ChakraPetchTH mb-8",children:"สร้างควิซ"}),I.jsx("ul",{className:"space-y-4",children:I.jsx("li",{children:I.jsx("button",{onClick:()=>i("/dashboard"),className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"กลับไปแดชบอร์ด"})})})]}),I.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",onClick:()=>i("/edit-profile"),children:[x&&x.photo?I.jsx("img",{src:x.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):I.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:I.jsx("span",{className:"text-lg text-white",children:"N/A"})}),I.jsxs("div",{children:[I.jsx("p",{className:"font-bold font-ChakraPetchTH",children:(x==null?void 0:x.name)||(Me==null?void 0:Me.email)||"User"}),Me&&I.jsx("p",{className:"text-blue-200 text-sm font-ChakraPetchTH",children:Me.email})]})]})]}),I.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[I.jsxs("div",{className:"flex justify-between items-center mb-8",children:[I.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"สร้าง/จัดการควิซ"}),I.jsx("button",{onClick:()=>X(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition font-ChakraPetchTH",children:"ออกจากระบบ"})]}),I.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[I.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["รหัสห้องเรียน: ",a||"N/A"," | รหัสเช็คอิน: ",f||"N/A"]}),I.jsxs("div",{className:"mb-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[I.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:_e?`แก้ไขคำถาม (ID: ${_e})`:"สร้างคำถามใหม่"}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"หมายเลขคำถาม"}),I.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:C,onChange:ke=>R(ke.target.value)})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"แสดงคำถาม?"}),I.jsx("input",{type:"checkbox",checked:G,onChange:ke=>J(ke.target.checked),className:"h-5 w-5 text-blue-600"})]})]}),I.jsxs("div",{className:"mt-4",children:[I.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ประเภทคำถาม"}),I.jsxs("select",{className:"p-2 border rounded",value:W,onChange:ke=>he(ke.target.value),children:[I.jsx("option",{value:"subjective",children:"อัตนัย"}),I.jsx("option",{value:"objective",children:"ปรนัย"})]})]}),I.jsxs("div",{className:"mt-4",children:[I.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ข้อความคำถาม"}),I.jsx("textarea",{className:"w-full p-2 border rounded",rows:2,value:k,onChange:ke=>j(ke.target.value)})]}),W==="objective"&&I.jsxs("div",{className:"mt-4",children:[I.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ตัวเลือก"}),fe.map((ke,He)=>I.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[I.jsx("input",{type:"text",className:"flex-1 p-2 border rounded",value:ke,onChange:nt=>K(He,nt.target.value),placeholder:`ตัวเลือกที่ ${He+1}`}),fe.length>1&&I.jsx("button",{onClick:()=>ve(He),className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition",children:"X"})]},He)),I.jsx("button",{onClick:Xe,className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH",children:"เพิ่มตัวเลือก"})]}),I.jsxs("div",{className:"mt-4",children:[I.jsx("button",{onClick:ae,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH mr-2",children:_e?"อัปเดตคำถาม":"บันทึกคำถาม"}),_e&&I.jsx("button",{onClick:()=>{je(null),R(""),j(""),J(!1),he("subjective"),re([""])},className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH",children:"ยกเลิก"})]})]}),I.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-2 text-blue-900",children:"รายการคำถาม"}),_.length===0?I.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำถาม"}):I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full border",children:[I.jsx("thead",{children:I.jsxs("tr",{className:"bg-blue-100",children:[I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ลำดับ"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ข้อความคำถาม"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ประเภท"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"แสดง?"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"การดำเนินการ"})]})}),I.jsx("tbody",{children:_.map(ke=>I.jsxs("tr",{className:"hover:bg-blue-50",children:[I.jsx("td",{className:"border p-2",children:ke.question_no}),I.jsx("td",{className:"border p-2",children:ke.question_text}),I.jsx("td",{className:"border p-2",children:ke.question_type==="objective"?"ปรนัย":"อัตนัย"}),I.jsx("td",{className:"border p-2",children:ke.question_show?"ใช่":"ไม่ใช่"}),I.jsxs("td",{className:"border p-2",children:[I.jsx("button",{onClick:()=>Ne(ke),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition font-ChakraPetchTH mr-2",children:"แก้ไข"}),I.jsx("button",{onClick:()=>be(ke),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition font-ChakraPetchTH mr-2",children:"สลับแสดง"}),I.jsx("button",{onClick:()=>me(ke.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition font-ChakraPetchTH mr-2",children:"ลบ"}),I.jsx("button",{onClick:()=>Fe(ke),className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition font-ChakraPetchTH",children:"ให้คะแนน"})]})]},ke.id))})]})}),Ue&&I.jsxs("div",{className:"mt-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[I.jsxs("div",{className:"flex justify-between items-center mb-4",children:[I.jsxs("h3",{className:"text-lg font-ChakraPetchTH",children:["คำตอบนักเรียนสำหรับคำถามที่ #",Ue.question_no]}),I.jsx("button",{onClick:Ge,className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH",children:"ปิด"})]}),Y?I.jsx("p",{className:"font-ChakraPetchTH",children:"กำลังโหลดคำตอบ..."}):F.length===0?I.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำตอบนักเรียน"}):I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full border",children:[I.jsx("thead",{children:I.jsxs("tr",{className:"bg-blue-100",children:[I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คำตอบ"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"เวลา"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คะแนน"}),I.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ดำเนินการ"})]})}),I.jsx("tbody",{children:F.map((ke,He)=>I.jsxs("tr",{className:"hover:bg-blue-50",children:[I.jsx("td",{className:"border p-2",children:ke.studentDocId}),I.jsx("td",{className:"border p-2",children:ke.name}),I.jsx("td",{className:"border p-2",children:ke.answer||"-"}),I.jsx("td",{className:"border p-2",children:ke.time||"-"}),I.jsx("td",{className:"border p-2",children:I.jsx("input",{type:"number",className:"w-20 p-1 border rounded",value:ke.score||"",onChange:nt=>Oe(He,nt.target.value)})}),I.jsx("td",{className:"border p-2",children:I.jsx("button",{onClick:()=>ot(He),className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH",children:"บันทึก"})})]},ke.studentDocId))})]})})]})]})]}),$&&I.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[I.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),I.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:I.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:I.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[I.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:I.jsxs("div",{className:"sm:flex sm:items-start",children:[I.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:I.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),I.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[I.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),I.jsx("div",{className:"mt-2",children:I.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),I.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[I.jsx("button",{type:"button",onClick:()=>{X(!1),Le()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),I.jsx("button",{type:"button",onClick:()=>X(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]})]})}function RR(){const i=ul(Ts),e=So(Ts),t=e.currentUser,a=$s(),{classroomId:c}=j1(),[f,x]=ne.useState(null),[v,_]=ne.useState(null),[E,C]=ne.useState([]),[R,k]=ne.useState(!0);ne.useEffect(()=>{if(!t){a("/");return}(async()=>{try{const J=Wt(i,"users",t.uid),W=await Ci(J);W.exists()&&x(W.data());const he=Wt(i,"classroom",c),fe=await Ci(he);fe.exists()&&_(fe.data().info||{});const re=Mr(i,"classroom",c,"checkin"),_e=await vr(re);let je=[];for(const Ue of _e.docs){const z=Ue.id,F=Mr(i,"classroom",c,"checkin",z,"question");(await vr(F)).forEach(Y=>{const Z=Y.data();Z.question_show===!0&&je.push({checkinId:z,id:Y.id,question_no:Z.question_no,question_text:Z.question_text,question_show:Z.question_show})})}je.sort((Ue,z)=>Ue.question_no-z.question_no),C(je)}catch(J){console.error("Error loading data for student detail:",J)}finally{k(!1)}})()},[i,t,a,c]);const j=async()=>{try{await e.signOut(),a("/")}catch(G){console.error("Error signing out:",G)}};return t?R?I.jsx("div",{children:"Loading..."}):I.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[I.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[I.jsxs("div",{children:[I.jsx("div",{className:"text-2xl mb-6",children:"Student Classroom"}),I.jsx("button",{onClick:()=>a("/student-dashboard"),className:"hover:text-blue-300 transition",children:"Back to My Classes"})]}),I.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",children:[f&&f.photo?I.jsx("img",{src:f.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):I.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:I.jsx("span",{className:"text-lg text-white",children:"N/A"})}),I.jsxs("div",{children:[I.jsx("p",{className:"font-bold",children:(f==null?void 0:f.name)||t.email}),I.jsx("p",{className:"text-sm",children:"Status: Student"})]})]})]}),I.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[I.jsxs("div",{className:"flex justify-between items-center mb-8",children:[I.jsxs("h1",{className:"text-3xl",children:[(v==null?void 0:v.name)||"Unknown"," - Quiz"]}),I.jsx("button",{onClick:j,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Sign Out"})]}),I.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[I.jsx("h2",{className:"text-xl font-bold mb-4",children:"Questions (ที่ question_show = true)"}),E.length===0?I.jsx("p",{children:"No questions yet."}):I.jsx("ul",{className:"space-y-2",children:E.map(G=>I.jsxs("li",{className:"border p-2 rounded hover:bg-blue-50",children:[I.jsxs("span",{className:"font-semibold",children:["Question #",G.question_no,":"]})," ",G.question_text,I.jsxs("span",{className:"ml-4 italic text-sm text-gray-500",children:["(Checkin: ",G.checkinId,")"]})]},`${G.checkinId}-${G.id}`))})]})]})]}):null}function DR(){return I.jsx(Ab,{children:I.jsxs(Zv,{children:[I.jsx(va,{path:"/",element:I.jsx(TN,{})}),I.jsx(va,{path:"/dashboard",element:I.jsx(VN,{})}),I.jsx(va,{path:"/student-dashboard",element:I.jsx(IR,{})}),I.jsx(va,{path:"/edit-profile",element:I.jsx(jN,{})}),I.jsx(va,{path:"/edit-classroom/:cid",element:I.jsx(FN,{})}),I.jsx(va,{path:"/create-quiz/:classroomId",element:I.jsx(NR,{})}),I.jsx(va,{path:"/student-classroom/:classroomId",element:I.jsx(RR,{})}),I.jsx(va,{path:"*",element:I.jsx(Wv,{to:"/",replace:!0})})]})})}av.createRoot(document.getElementById("root")).render(I.jsx(pr.StrictMode,{children:I.jsx(DR,{})}));
