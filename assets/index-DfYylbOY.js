function e_(i,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in i)){const h=Object.getOwnPropertyDescriptor(s,c);h&&Object.defineProperty(i,c,h.get?h:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const y of h.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function t(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(c){if(c.ep)return;c.ep=!0;const h=t(c);fetch(c.href,h)}})();var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Of(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var z0={exports:{}},su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R2;function t_(){if(R2)return su;R2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,c,h){var y=null;if(h!==void 0&&(y=""+h),c.key!==void 0&&(y=""+c.key),"key"in c){h={};for(var _ in c)_!=="key"&&(h[_]=c[_])}else h=c;return c=h.ref,{$$typeof:i,type:s,key:y,ref:c!==void 0?c:null,props:h}}return su.Fragment=e,su.jsx=t,su.jsxs=t,su}var D2;function n_(){return D2||(D2=1,z0.exports=t_()),z0.exports}var C=n_(),H0={exports:{}},$t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2;function r_(){if(M2)return $t;M2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.iterator;function P(Q){return Q===null||typeof Q!="object"?null:(Q=N&&Q[N]||Q["@@iterator"],typeof Q=="function"?Q:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,re={};function Y(Q,ge,Re){this.props=Q,this.context=ge,this.refs=re,this.updater=Re||U}Y.prototype.isReactComponent={},Y.prototype.setState=function(Q,ge){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,ge,"setState")},Y.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function ye(){}ye.prototype=Y.prototype;function ue(Q,ge,Re){this.props=Q,this.context=ge,this.refs=re,this.updater=Re||U}var se=ue.prototype=new ye;se.constructor=ue,X(se,Y.prototype),se.isPureReactComponent=!0;var fe=Array.isArray,we={H:null,A:null,T:null,S:null},Pe=Object.prototype.hasOwnProperty;function z(Q,ge,Re,Fe,Se,$){return Re=$.ref,{$$typeof:i,type:Q,key:ge,ref:Re!==void 0?Re:null,props:$}}function j(Q,ge){return z(Q.type,ge,void 0,void 0,void 0,Q.props)}function L(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===i}function F(Q){var ge={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Re){return ge[Re]})}var J=/\/+/g;function ee(Q,ge){return typeof Q=="object"&&Q!==null&&Q.key!=null?F(""+Q.key):ge.toString(36)}function W(){}function ve(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(W,W):(Q.status="pending",Q.then(function(ge){Q.status==="pending"&&(Q.status="fulfilled",Q.value=ge)},function(ge){Q.status==="pending"&&(Q.status="rejected",Q.reason=ge)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function te(Q,ge,Re,Fe,Se){var $=typeof Q;($==="undefined"||$==="boolean")&&(Q=null);var Ve=!1;if(Q===null)Ve=!0;else switch($){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(Q.$$typeof){case i:case e:Ve=!0;break;case S:return Ve=Q._init,te(Ve(Q._payload),ge,Re,Fe,Se)}}if(Ve)return Se=Se(Q),Ve=Fe===""?"."+ee(Q,0):Fe,fe(Se)?(Re="",Ve!=null&&(Re=Ve.replace(J,"$&/")+"/"),te(Se,ge,Re,"",function(vt){return vt})):Se!=null&&(L(Se)&&(Se=j(Se,Re+(Se.key==null||Q&&Q.key===Se.key?"":(""+Se.key).replace(J,"$&/")+"/")+Ve)),ge.push(Se)),1;Ve=0;var dt=Fe===""?".":Fe+":";if(fe(Q))for(var st=0;st<Q.length;st++)Fe=Q[st],$=dt+ee(Fe,st),Ve+=te(Fe,ge,Re,$,Se);else if(st=P(Q),typeof st=="function")for(Q=st.call(Q),st=0;!(Fe=Q.next()).done;)Fe=Fe.value,$=dt+ee(Fe,st++),Ve+=te(Fe,ge,Re,$,Se);else if($==="object"){if(typeof Q.then=="function")return te(ve(Q),ge,Re,Fe,Se);throw ge=String(Q),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function Ae(Q,ge,Re){if(Q==null)return Q;var Fe=[],Se=0;return te(Q,Fe,"","",function($){return ge.call(Re,$,Se++)}),Fe}function Te(Q){if(Q._status===-1){var ge=Q._result;ge=ge(),ge.then(function(Re){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Re)},function(Re){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Re)}),Q._status===-1&&(Q._status=0,Q._result=ge)}if(Q._status===1)return Q._result.default;throw Q._result}var Xe=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function ht(){}return $t.Children={map:Ae,forEach:function(Q,ge,Re){Ae(Q,function(){ge.apply(this,arguments)},Re)},count:function(Q){var ge=0;return Ae(Q,function(){ge++}),ge},toArray:function(Q){return Ae(Q,function(ge){return ge})||[]},only:function(Q){if(!L(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},$t.Component=Y,$t.Fragment=t,$t.Profiler=c,$t.PureComponent=ue,$t.StrictMode=s,$t.Suspense=E,$t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=we,$t.act=function(){throw Error("act(...) is not supported in production builds of React.")},$t.cache=function(Q){return function(){return Q.apply(null,arguments)}},$t.cloneElement=function(Q,ge,Re){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var Fe=X({},Q.props),Se=Q.key,$=void 0;if(ge!=null)for(Ve in ge.ref!==void 0&&($=void 0),ge.key!==void 0&&(Se=""+ge.key),ge)!Pe.call(ge,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&ge.ref===void 0||(Fe[Ve]=ge[Ve]);var Ve=arguments.length-2;if(Ve===1)Fe.children=Re;else if(1<Ve){for(var dt=Array(Ve),st=0;st<Ve;st++)dt[st]=arguments[st+2];Fe.children=dt}return z(Q.type,Se,void 0,void 0,$,Fe)},$t.createContext=function(Q){return Q={$$typeof:y,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:h,_context:Q},Q},$t.createElement=function(Q,ge,Re){var Fe,Se={},$=null;if(ge!=null)for(Fe in ge.key!==void 0&&($=""+ge.key),ge)Pe.call(ge,Fe)&&Fe!=="key"&&Fe!=="__self"&&Fe!=="__source"&&(Se[Fe]=ge[Fe]);var Ve=arguments.length-2;if(Ve===1)Se.children=Re;else if(1<Ve){for(var dt=Array(Ve),st=0;st<Ve;st++)dt[st]=arguments[st+2];Se.children=dt}if(Q&&Q.defaultProps)for(Fe in Ve=Q.defaultProps,Ve)Se[Fe]===void 0&&(Se[Fe]=Ve[Fe]);return z(Q,$,void 0,void 0,null,Se)},$t.createRef=function(){return{current:null}},$t.forwardRef=function(Q){return{$$typeof:_,render:Q}},$t.isValidElement=L,$t.lazy=function(Q){return{$$typeof:S,_payload:{_status:-1,_result:Q},_init:Te}},$t.memo=function(Q,ge){return{$$typeof:w,type:Q,compare:ge===void 0?null:ge}},$t.startTransition=function(Q){var ge=we.T,Re={};we.T=Re;try{var Fe=Q(),Se=we.S;Se!==null&&Se(Re,Fe),typeof Fe=="object"&&Fe!==null&&typeof Fe.then=="function"&&Fe.then(ht,Xe)}catch($){Xe($)}finally{we.T=ge}},$t.unstable_useCacheRefresh=function(){return we.H.useCacheRefresh()},$t.use=function(Q){return we.H.use(Q)},$t.useActionState=function(Q,ge,Re){return we.H.useActionState(Q,ge,Re)},$t.useCallback=function(Q,ge){return we.H.useCallback(Q,ge)},$t.useContext=function(Q){return we.H.useContext(Q)},$t.useDebugValue=function(){},$t.useDeferredValue=function(Q,ge){return we.H.useDeferredValue(Q,ge)},$t.useEffect=function(Q,ge){return we.H.useEffect(Q,ge)},$t.useId=function(){return we.H.useId()},$t.useImperativeHandle=function(Q,ge,Re){return we.H.useImperativeHandle(Q,ge,Re)},$t.useInsertionEffect=function(Q,ge){return we.H.useInsertionEffect(Q,ge)},$t.useLayoutEffect=function(Q,ge){return we.H.useLayoutEffect(Q,ge)},$t.useMemo=function(Q,ge){return we.H.useMemo(Q,ge)},$t.useOptimistic=function(Q,ge){return we.H.useOptimistic(Q,ge)},$t.useReducer=function(Q,ge,Re){return we.H.useReducer(Q,ge,Re)},$t.useRef=function(Q){return we.H.useRef(Q)},$t.useState=function(Q){return we.H.useState(Q)},$t.useSyncExternalStore=function(Q,ge,Re){return we.H.useSyncExternalStore(Q,ge,Re)},$t.useTransition=function(){return we.H.useTransition()},$t.version="19.0.0",$t}var O2;function kf(){return O2||(O2=1,H0.exports=r_()),H0.exports}var ie=kf();const Fr=Of(ie);var G0={exports:{}},au={},q0={exports:{}},Y0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2;function i_(){return k2||(k2=1,function(i){function e(Ae,Te){var Xe=Ae.length;Ae.push(Te);e:for(;0<Xe;){var ht=Xe-1>>>1,Q=Ae[ht];if(0<c(Q,Te))Ae[ht]=Te,Ae[Xe]=Q,Xe=ht;else break e}}function t(Ae){return Ae.length===0?null:Ae[0]}function s(Ae){if(Ae.length===0)return null;var Te=Ae[0],Xe=Ae.pop();if(Xe!==Te){Ae[0]=Xe;e:for(var ht=0,Q=Ae.length,ge=Q>>>1;ht<ge;){var Re=2*(ht+1)-1,Fe=Ae[Re],Se=Re+1,$=Ae[Se];if(0>c(Fe,Xe))Se<Q&&0>c($,Fe)?(Ae[ht]=$,Ae[Se]=Xe,ht=Se):(Ae[ht]=Fe,Ae[Re]=Xe,ht=Re);else if(Se<Q&&0>c($,Xe))Ae[ht]=$,Ae[Se]=Xe,ht=Se;else break e}}return Te}function c(Ae,Te){var Xe=Ae.sortIndex-Te.sortIndex;return Xe!==0?Xe:Ae.id-Te.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;i.unstable_now=function(){return h.now()}}else{var y=Date,_=y.now();i.unstable_now=function(){return y.now()-_}}var E=[],w=[],S=1,N=null,P=3,U=!1,X=!1,re=!1,Y=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function se(Ae){for(var Te=t(w);Te!==null;){if(Te.callback===null)s(w);else if(Te.startTime<=Ae)s(w),Te.sortIndex=Te.expirationTime,e(E,Te);else break;Te=t(w)}}function fe(Ae){if(re=!1,se(Ae),!X)if(t(E)!==null)X=!0,ve();else{var Te=t(w);Te!==null&&te(fe,Te.startTime-Ae)}}var we=!1,Pe=-1,z=5,j=-1;function L(){return!(i.unstable_now()-j<z)}function F(){if(we){var Ae=i.unstable_now();j=Ae;var Te=!0;try{e:{X=!1,re&&(re=!1,ye(Pe),Pe=-1),U=!0;var Xe=P;try{t:{for(se(Ae),N=t(E);N!==null&&!(N.expirationTime>Ae&&L());){var ht=N.callback;if(typeof ht=="function"){N.callback=null,P=N.priorityLevel;var Q=ht(N.expirationTime<=Ae);if(Ae=i.unstable_now(),typeof Q=="function"){N.callback=Q,se(Ae),Te=!0;break t}N===t(E)&&s(E),se(Ae)}else s(E);N=t(E)}if(N!==null)Te=!0;else{var ge=t(w);ge!==null&&te(fe,ge.startTime-Ae),Te=!1}}break e}finally{N=null,P=Xe,U=!1}Te=void 0}}finally{Te?J():we=!1}}}var J;if(typeof ue=="function")J=function(){ue(F)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,W=ee.port2;ee.port1.onmessage=F,J=function(){W.postMessage(null)}}else J=function(){Y(F,0)};function ve(){we||(we=!0,J())}function te(Ae,Te){Pe=Y(function(){Ae(i.unstable_now())},Te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ae){Ae.callback=null},i.unstable_continueExecution=function(){X||U||(X=!0,ve())},i.unstable_forceFrameRate=function(Ae){0>Ae||125<Ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<Ae?Math.floor(1e3/Ae):5},i.unstable_getCurrentPriorityLevel=function(){return P},i.unstable_getFirstCallbackNode=function(){return t(E)},i.unstable_next=function(Ae){switch(P){case 1:case 2:case 3:var Te=3;break;default:Te=P}var Xe=P;P=Te;try{return Ae()}finally{P=Xe}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Ae,Te){switch(Ae){case 1:case 2:case 3:case 4:case 5:break;default:Ae=3}var Xe=P;P=Ae;try{return Te()}finally{P=Xe}},i.unstable_scheduleCallback=function(Ae,Te,Xe){var ht=i.unstable_now();switch(typeof Xe=="object"&&Xe!==null?(Xe=Xe.delay,Xe=typeof Xe=="number"&&0<Xe?ht+Xe:ht):Xe=ht,Ae){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Xe+Q,Ae={id:S++,callback:Te,priorityLevel:Ae,startTime:Xe,expirationTime:Q,sortIndex:-1},Xe>ht?(Ae.sortIndex=Xe,e(w,Ae),t(E)===null&&Ae===t(w)&&(re?(ye(Pe),Pe=-1):re=!0,te(fe,Xe-ht))):(Ae.sortIndex=Q,e(E,Ae),X||U||(X=!0,ve())),Ae},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(Ae){var Te=P;return function(){var Xe=P;P=Te;try{return Ae.apply(this,arguments)}finally{P=Xe}}}}(Y0)),Y0}var L2;function s_(){return L2||(L2=1,q0.exports=i_()),q0.exports}var X0={exports:{}},Ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2;function a_(){if(P2)return Ti;P2=1;var i=kf();function e(E){var w="https://react.dev/errors/"+E;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)w+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+E+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(E,w,S){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:N==null?null:""+N,children:E,containerInfo:w,implementation:S}}var y=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(E,w){if(E==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return Ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ti.createPortal=function(E,w){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(e(299));return h(E,w,null,S)},Ti.flushSync=function(E){var w=y.T,S=s.p;try{if(y.T=null,s.p=2,E)return E()}finally{y.T=w,s.p=S,s.d.f()}},Ti.preconnect=function(E,w){typeof E=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,s.d.C(E,w))},Ti.prefetchDNS=function(E){typeof E=="string"&&s.d.D(E)},Ti.preinit=function(E,w){if(typeof E=="string"&&w&&typeof w.as=="string"){var S=w.as,N=_(S,w.crossOrigin),P=typeof w.integrity=="string"?w.integrity:void 0,U=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;S==="style"?s.d.S(E,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:N,integrity:P,fetchPriority:U}):S==="script"&&s.d.X(E,{crossOrigin:N,integrity:P,fetchPriority:U,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},Ti.preinitModule=function(E,w){if(typeof E=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var S=_(w.as,w.crossOrigin);s.d.M(E,{crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&s.d.M(E)},Ti.preload=function(E,w){if(typeof E=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var S=w.as,N=_(S,w.crossOrigin);s.d.L(E,S,{crossOrigin:N,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},Ti.preloadModule=function(E,w){if(typeof E=="string")if(w){var S=_(w.as,w.crossOrigin);s.d.m(E,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else s.d.m(E)},Ti.requestFormReset=function(E){s.d.r(E)},Ti.unstable_batchedUpdates=function(E,w){return E(w)},Ti.useFormState=function(E,w,S){return y.H.useFormState(E,w,S)},Ti.useFormStatus=function(){return y.H.useHostTransitionStatus()},Ti.version="19.0.0",Ti}var B2;function o_(){if(B2)return X0.exports;B2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),X0.exports=a_(),X0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2;function l_(){if(j2)return au;j2=1;var i=s_(),e=kf(),t=o_();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var h=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),U=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),fe=Symbol.for("react.memo_cache_sentinel"),we=Symbol.iterator;function Pe(n){return n===null||typeof n!="object"?null:(n=we&&n[we]||n["@@iterator"],typeof n=="function"?n:null)}var z=Symbol.for("react.client.reference");function j(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case E:return"Fragment";case _:return"Portal";case S:return"Profiler";case w:return"StrictMode";case re:return"Suspense";case Y:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case U:return(n.displayName||"Context")+".Provider";case P:return(n._context.displayName||"Context")+".Consumer";case X:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ye:return a=n.displayName||null,a!==null?a:j(n.type)||"Memo";case ue:a=n._payload,n=n._init;try{return j(n(a))}catch{}}return null}var L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=Object.assign,J,ee;function W(n){if(J===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);J=a&&a[1]||"",ee=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+n+ee}var ve=!1;function te(n,a){if(!n||ve)return"";ve=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(ze){var Me=ze}Reflect.construct(n,[],Je)}else{try{Je.call()}catch(ze){Me=ze}n.call(Je.prototype)}}else{try{throw Error()}catch(ze){Me=ze}(Je=n())&&typeof Je.catch=="function"&&Je.catch(function(){})}}catch(ze){if(ze&&Me&&typeof ze.stack=="string")return[ze.stack,Me.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=g.DetermineComponentFrameRoot(),M=A[0],H=A[1];if(M&&H){var ne=M.split(`
`),me=H.split(`
`);for(b=g=0;g<ne.length&&!ne[g].includes("DetermineComponentFrameRoot");)g++;for(;b<me.length&&!me[b].includes("DetermineComponentFrameRoot");)b++;if(g===ne.length||b===me.length)for(g=ne.length-1,b=me.length-1;1<=g&&0<=b&&ne[g]!==me[b];)b--;for(;1<=g&&0<=b;g--,b--)if(ne[g]!==me[b]){if(g!==1||b!==1)do if(g--,b--,0>b||ne[g]!==me[b]){var Ge=`
`+ne[g].replace(" at new "," at ");return n.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",n.displayName)),Ge}while(1<=g&&0<=b);break}}}finally{ve=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?W(u):""}function Ae(n){switch(n.tag){case 26:case 27:case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 15:return n=te(n.type,!1),n;case 11:return n=te(n.type.render,!1),n;case 1:return n=te(n.type,!0),n;default:return""}}function Te(n){try{var a="";do a+=Ae(n),n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Xe(n){var a=n,u=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,a.flags&4098&&(u=a.return),n=a.return;while(n)}return a.tag===3?u:null}function ht(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function Q(n){if(Xe(n)!==n)throw Error(s(188))}function ge(n){var a=n.alternate;if(!a){if(a=Xe(n),a===null)throw Error(s(188));return a!==n?null:n}for(var u=n,g=a;;){var b=u.return;if(b===null)break;var A=b.alternate;if(A===null){if(g=b.return,g!==null){u=g;continue}break}if(b.child===A.child){for(A=b.child;A;){if(A===u)return Q(b),n;if(A===g)return Q(b),a;A=A.sibling}throw Error(s(188))}if(u.return!==g.return)u=b,g=A;else{for(var M=!1,H=b.child;H;){if(H===u){M=!0,u=b,g=A;break}if(H===g){M=!0,g=b,u=A;break}H=H.sibling}if(!M){for(H=A.child;H;){if(H===u){M=!0,u=A,g=b;break}if(H===g){M=!0,g=A,u=b;break}H=H.sibling}if(!M)throw Error(s(189))}}if(u.alternate!==g)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?n:a}function Re(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=Re(n),a!==null)return a;n=n.sibling}return null}var Fe=Array.isArray,Se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},Ve=[],dt=-1;function st(n){return{current:n}}function vt(n){0>dt||(n.current=Ve[dt],Ve[dt]=null,dt--)}function mt(n,a){dt++,Ve[dt]=n.current,n.current=a}var xt=st(null),Ft=st(null),ft=st(null),qe=st(null);function le(n,a){switch(mt(ft,a),mt(Ft,n),mt(xt,null),n=a.nodeType,n){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?s2(a):0;break;default:if(n=n===8?a.parentNode:a,a=n.tagName,n=n.namespaceURI)n=s2(n),a=a2(n,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}vt(xt),mt(xt,a)}function Ne(){vt(xt),vt(Ft),vt(ft)}function pe(n){n.memoizedState!==null&&mt(qe,n);var a=xt.current,u=a2(a,n.type);a!==u&&(mt(Ft,n),mt(xt,u))}function De(n){Ft.current===n&&(vt(xt),vt(Ft)),qe.current===n&&(vt(qe),eu._currentValue=$)}var Be=Object.prototype.hasOwnProperty,Ye=i.unstable_scheduleCallback,Ue=i.unstable_cancelCallback,Mt=i.unstable_shouldYield,ot=i.unstable_requestPaint,We=i.unstable_now,Et=i.unstable_getCurrentPriorityLevel,et=i.unstable_ImmediatePriority,at=i.unstable_UserBlockingPriority,It=i.unstable_NormalPriority,sn=i.unstable_LowPriority,Nn=i.unstable_IdlePriority,Qn=i.log,sr=i.unstable_setDisableYieldValue,Jt=null,He=null;function xn(n){if(He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Jt,n,void 0,(n.current.flags&128)===128)}catch{}}function Ut(n){if(typeof Qn=="function"&&sr(n),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Jt,n)}catch{}}var Xt=Math.clz32?Math.clz32:Gr,zn=Math.log,Or=Math.LN2;function Gr(n){return n>>>=0,n===0?32:31-(zn(n)/Or|0)|0}var zt=128,Kn=4194304;function qr(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function pr(n,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,b=n.suspendedLanes,A=n.pingedLanes,M=n.warmLanes;n=n.finishedLanes!==0;var H=u&134217727;return H!==0?(u=H&~b,u!==0?g=qr(u):(A&=H,A!==0?g=qr(A):n||(M=H&~M,M!==0&&(g=qr(M))))):(H=u&~b,H!==0?g=qr(H):A!==0?g=qr(A):n||(M=u&~M,M!==0&&(g=qr(M)))),g===0?0:a!==0&&a!==g&&!(a&b)&&(b=g&-g,M=a&-a,b>=M||b===32&&(M&4194176)!==0)?a:g}function Ln(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Tr(n,a){switch(n){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hn(){var n=zt;return zt<<=1,!(zt&4194176)&&(zt=128),n}function yr(){var n=Kn;return Kn<<=1,!(Kn&62914560)&&(Kn=4194304),n}function bi(n){for(var a=[],u=0;31>u;u++)a.push(n);return a}function an(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Fs(n,a,u,g,b,A){var M=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var H=n.entanglements,ne=n.expirationTimes,me=n.hiddenUpdates;for(u=M&~u;0<u;){var Ge=31-Xt(u),Je=1<<Ge;H[Ge]=0,ne[Ge]=-1;var Me=me[Ge];if(Me!==null)for(me[Ge]=null,Ge=0;Ge<Me.length;Ge++){var ze=Me[Ge];ze!==null&&(ze.lane&=-536870913)}u&=~Je}g!==0&&hr(n,g,0),A!==0&&b===0&&n.tag!==0&&(n.suspendedLanes|=A&~(M&~a))}function hr(n,a,u){n.pendingLanes|=a,n.suspendedLanes&=~a;var g=31-Xt(a);n.entangledLanes|=a,n.entanglements[g]=n.entanglements[g]|1073741824|u&4194218}function xr(n,a){var u=n.entangledLanes|=a;for(n=n.entanglements;u;){var g=31-Xt(u),b=1<<g;b&a|n[g]&a&&(n[g]|=a),u&=~b}}function tr(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function ci(){var n=Se.p;return n!==0?n:(n=window.event,n===void 0?32:C2(n.type))}function Zn(n,a){var u=Se.p;try{return Se.p=n,a()}finally{Se.p=u}}var lt=Math.random().toString(36).slice(2),Cn="__reactFiber$"+lt,jn="__reactProps$"+lt,Mn="__reactContainer$"+lt,Sr="__reactEvents$"+lt,ri="__reactListeners$"+lt,Ir="__reactHandles$"+lt,kr="__reactResources$"+lt,Yr="__reactMarker$"+lt;function us(n){delete n[Cn],delete n[jn],delete n[Sr],delete n[ri],delete n[Ir]}function K(n){var a=n[Cn];if(a)return a;for(var u=n.parentNode;u;){if(a=u[Mn]||u[Cn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(n=c2(n);n!==null;){if(u=n[Cn])return u;n=c2(n)}return a}n=u,u=n.parentNode}return null}function xe(n){if(n=n[Cn]||n[Mn]){var a=n.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return n}return null}function V(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function ae(n){var a=n[kr];return a||(a=n[kr]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function je(n){n[Yr]=!0}var tt=new Set,he={};function ut(n,a){bt(n,a),bt(n+"Capture",a)}function bt(n,a){for(he[n]=a,n=0;n<a.length;n++)tt.add(a[n])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jt={},Nt={};function Ct(n){return Be.call(Nt,n)?!0:Be.call(jt,n)?!1:nn.test(n)?Nt[n]=!0:(jt[n]=!0,!1)}function Rn(n,a,u){if(Ct(a))if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+u)}}function ar(n,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+u)}}function fr(n,a,u,g){if(g===null)n.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(a,u,""+g)}}function Wt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ei(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ha(n){var a=Ei(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),g=""+n[a];if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var b=u.get,A=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return b.call(this)},set:function(M){g=""+M,A.call(this,M)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Dn(n){n._valueTracker||(n._valueTracker=Ha(n))}function vi(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var u=a.getValue(),g="";return n&&(g=Ei(n)?n.checked?"true":"false":n.value),n=g,n!==u?(a.setValue(n),!0):!1}function cn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ht=/[\n"\\]/g;function Ot(n){return n.replace(Ht,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function vn(n,a,u,g,b,A,M,H){n.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.type=M:n.removeAttribute("type"),a!=null?M==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Wt(a)):n.value!==""+Wt(a)&&(n.value=""+Wt(a)):M!=="submit"&&M!=="reset"||n.removeAttribute("value"),a!=null?q(n,M,Wt(a)):u!=null?q(n,M,Wt(u)):g!=null&&n.removeAttribute("value"),b==null&&A!=null&&(n.defaultChecked=!!A),b!=null&&(n.checked=b&&typeof b!="function"&&typeof b!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?n.name=""+Wt(H):n.removeAttribute("name")}function be(n,a,u,g,b,A,M,H){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.type=A),a!=null||u!=null){if(!(A!=="submit"&&A!=="reset"||a!=null))return;u=u!=null?""+Wt(u):"",a=a!=null?""+Wt(a):u,H||a===n.value||(n.value=a),n.defaultValue=a}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,n.checked=H?n.checked:!!g,n.defaultChecked=!!g,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(n.name=M)}function q(n,a,u){a==="number"&&cn(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function rt(n,a,u,g){if(n=n.options,a){a={};for(var b=0;b<u.length;b++)a["$"+u[b]]=!0;for(u=0;u<n.length;u++)b=a.hasOwnProperty("$"+n[u].value),n[u].selected!==b&&(n[u].selected=b),b&&g&&(n[u].defaultSelected=!0)}else{for(u=""+Wt(u),a=null,b=0;b<n.length;b++){if(n[b].value===u){n[b].selected=!0,g&&(n[b].defaultSelected=!0);return}a!==null||n[b].disabled||(a=n[b])}a!==null&&(a.selected=!0)}}function mn(n,a,u){if(a!=null&&(a=""+Wt(a),a!==n.value&&(n.value=a),u==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=u!=null?""+Wt(u):""}function Gn(n,a,u,g){if(a==null){if(g!=null){if(u!=null)throw Error(s(92));if(Fe(g)){if(1<g.length)throw Error(s(93));g=g[0]}u=g}u==null&&(u=""),a=u}u=Wt(a),n.defaultValue=u,g=n.textContent,g===u&&g!==""&&g!==null&&(n.value=g)}function Xr(n,a){if(a){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=a;return}}n.textContent=a}var Ui=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qn(n,a,u){var g=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":g?n.setProperty(a,u):typeof u!="number"||u===0||Ui.has(a)?a==="float"?n.cssFloat=u:n[a]=(""+u).trim():n[a]=u+"px"}function _t(n,a,u){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?n.setProperty(g,""):g==="float"?n.cssFloat="":n[g]="");for(var b in a)g=a[b],a.hasOwnProperty(b)&&u[b]!==g&&qn(n,b,g)}else for(var A in a)a.hasOwnProperty(A)&&qn(n,A,a[A])}function wn(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wr(n){return Hs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Lr=null;function Di(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _i=null,Un=null;function Mi(n){var a=xe(n);if(a&&(n=a.stateNode)){var u=n[jn]||null;e:switch(n=a.stateNode,a.type){case"input":if(vn(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ot(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var g=u[a];if(g!==n&&g.form===n.form){var b=g[jn]||null;if(!b)throw Error(s(90));vn(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(a=0;a<u.length;a++)g=u[a],g.form===n.form&&vi(g)}break e;case"textarea":mn(n,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&rt(n,!!u.multiple,a,!1)}}}var Vi=!1;function Rt(n,a,u){if(Vi)return n(a,u);Vi=!0;try{var g=n(a);return g}finally{if(Vi=!1,(_i!==null||Un!==null)&&(Eh(),_i&&(a=_i,n=Un,Un=_i=null,Mi(a),n)))for(a=0;a<n.length;a++)Mi(n[a])}}function la(n,a){var u=n.stateNode;if(u===null)return null;var g=u[jn]||null;if(g===null)return null;u=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(s(231,a,typeof u));return u}var kt=!1;if(Bt)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){kt=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{kt=!1}var hs=null,fs=null,ds=null;function Zi(){if(ds)return ds;var n,a=fs,u=a.length,g,b="value"in hs?hs.value:hs.textContent,A=b.length;for(n=0;n<u&&a[n]===b[n];n++);var M=u-n;for(g=1;g<=M&&a[u-g]===b[A-g];g++);return ds=b.slice(n,1<g?1-g:void 0)}function gs(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ci(){return!0}function Is(){return!1}function or(n){function a(u,g,b,A,M){this._reactName=u,this._targetInst=b,this.type=g,this.nativeEvent=A,this.target=M,this.currentTarget=null;for(var H in n)n.hasOwnProperty(H)&&(u=n[H],this[H]=u?u(A):A[H]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Ci:Is,this.isPropagationStopped=Is,this}return F(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),a}var _n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ms=or(_n),$i=F({},_n,{view:0,detail:0}),Qr=or($i),ca,ua,Ji,ha=F({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ji&&(Ji&&n.type==="mousemove"?(ca=n.screenX-Ji.screenX,ua=n.screenY-Ji.screenY):ua=ca=0,Ji=n),ca)},movementY:function(n){return"movementY"in n?n.movementY:ua}}),Fi=or(ha),yl=F({},ha,{dataTransfer:0}),An=or(yl),Gs=F({},$i,{relatedTarget:0}),Ns=or(Gs),zi=F({},_n,{animationName:0,elapsedTime:0,pseudoElement:0}),Ga=or(zi),Oe=F({},_n,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gt=or(Oe),Nr=F({},_n,{data:0}),qs=or(Nr),Ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bo(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=wl[n])?!!a[n]:!1}function Rs(){return Bo}var lr=F({},$i,{key:function(n){if(n.key){var a=Ys[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=gs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?xl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(n){return n.type==="keypress"?gs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?gs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xs=or(lr),Yn=F({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ws=or(Yn),ui=F({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Tn=or(ui),Tt=F({},_n,{propertyName:0,elapsedTime:0,pseudoElement:0}),bl=or(Tt),On=F({},ha,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Hi=or(On),wr=F({},_n,{newState:0,oldState:0}),El=or(wr),Oi=[9,13,27,32],Gi=Bt&&"CompositionEvent"in window,x=null;Bt&&"documentMode"in document&&(x=document.documentMode);var I=Bt&&"TextEvent"in window&&!x,D=Bt&&(!Gi||x&&8<x&&11>=x),G=" ",_e=!1;function ke(n,a){switch(n){case"keyup":return Oi.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ct(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var un=!1;function rr(n,a){switch(n){case"compositionend":return ct(a);case"keypress":return a.which!==32?null:(_e=!0,G);case"textInput":return n=a.data,n===G&&_e?null:n;default:return null}}function hn(n,a){if(un)return n==="compositionend"||!Gi&&ke(n,a)?(n=Zi(),ds=fs=hs=null,un=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return D&&a.locale!=="ko"?null:a.data;default:return null}}var Xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Xn[n.type]:a==="textarea"}function br(n,a,u,g){_i?Un?Un.push(g):Un=[g]:_i=g,a=Th(a,"onChange"),0<a.length&&(u=new ms("onChange","change",null,u,g),n.push({event:u,listeners:a}))}var Pr=null,Rr=null;function jo(n){e2(n,0)}function qa(n){var a=V(n);if(vi(a))return n}function Hu(n,a){if(n==="change")return a}var Ec=!1;if(Bt){var qi;if(Bt){var vc="oninput"in document;if(!vc){var vl=document.createElement("div");vl.setAttribute("oninput","return;"),vc=typeof vl.oninput=="function"}qi=vc}else qi=!1;Ec=qi&&(!document.documentMode||9<document.documentMode)}function Ya(){Pr&&(Pr.detachEvent("onpropertychange",fn),Rr=Pr=null)}function fn(n){if(n.propertyName==="value"&&qa(Rr)){var a=[];br(a,Rr,n,Di(n)),Rt(jo,a)}}function _l(n,a,u){n==="focusin"?(Ya(),Pr=a,Rr=u,Pr.attachEvent("onpropertychange",fn)):n==="focusout"&&Ya()}function O(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return qa(Rr)}function r(n,a){if(n==="click")return qa(a)}function o(n,a){if(n==="input"||n==="change")return qa(a)}function l(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var f=typeof Object.is=="function"?Object.is:l;function d(n,a){if(f(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var u=Object.keys(n),g=Object.keys(a);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var b=u[g];if(!Be.call(a,b)||!f(n[b],a[b]))return!1}return!0}function m(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function p(n,a){var u=m(n);n=0;for(var g;u;){if(u.nodeType===3){if(g=n+u.textContent.length,n<=a&&g>=a)return{node:u,offset:a-n};n=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=m(u)}}function v(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?v(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function T(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=cn(n.document);a instanceof n.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)n=a.contentWindow;else break;a=cn(n.document)}return a}function R(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}function k(n,a){var u=T(a);a=n.focusedElem;var g=n.selectionRange;if(u!==a&&a&&a.ownerDocument&&v(a.ownerDocument.documentElement,a)){if(g!==null&&R(a)){if(n=g.start,u=g.end,u===void 0&&(u=n),"selectionStart"in a)a.selectionStart=n,a.selectionEnd=Math.min(u,a.value.length);else if(u=(n=a.ownerDocument||document)&&n.defaultView||window,u.getSelection){u=u.getSelection();var b=a.textContent.length,A=Math.min(g.start,b);g=g.end===void 0?A:Math.min(g.end,b),!u.extend&&A>g&&(b=g,g=A,A=b),b=p(a,A);var M=p(a,g);b&&M&&(u.rangeCount!==1||u.anchorNode!==b.node||u.anchorOffset!==b.offset||u.focusNode!==M.node||u.focusOffset!==M.offset)&&(n=n.createRange(),n.setStart(b.node,b.offset),u.removeAllRanges(),A>g?(u.addRange(n),u.extend(M.node,M.offset)):(n.setEnd(M.node,M.offset),u.addRange(n)))}}for(n=[],u=a;u=u.parentNode;)u.nodeType===1&&n.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<n.length;a++)u=n[a],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var B=Bt&&"documentMode"in document&&11>=document.documentMode,Z=null,oe=null,ce=null,Ce=!1;function Le(n,a,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ce||Z==null||Z!==cn(g)||(g=Z,"selectionStart"in g&&R(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ce&&d(ce,g)||(ce=g,g=Th(oe,"onSelect"),0<g.length&&(a=new ms("onSelect","select",null,a,u),n.push({event:a,listeners:g}),a.target=Z)))}function nt(n,a){var u={};return u[n.toLowerCase()]=a.toLowerCase(),u["Webkit"+n]="webkit"+a,u["Moz"+n]="moz"+a,u}var it={animationend:nt("Animation","AnimationEnd"),animationiteration:nt("Animation","AnimationIteration"),animationstart:nt("Animation","AnimationStart"),transitionrun:nt("Transition","TransitionRun"),transitionstart:nt("Transition","TransitionStart"),transitioncancel:nt("Transition","TransitionCancel"),transitionend:nt("Transition","TransitionEnd")},$e={},en={};Bt&&(en=document.createElement("div").style,"AnimationEvent"in window||(delete it.animationend.animation,delete it.animationiteration.animation,delete it.animationstart.animation),"TransitionEvent"in window||delete it.transitionend.transition);function Lt(n){if($e[n])return $e[n];if(!it[n])return n;var a=it[n],u;for(u in a)if(a.hasOwnProperty(u)&&u in en)return $e[n]=a[u];return n}var hi=Lt("animationend"),Yi=Lt("animationiteration"),fi=Lt("animationstart"),Pn=Lt("transitionrun"),Kr=Lt("transitionstart"),ki=Lt("transitioncancel"),fa=Lt("transitionend"),da=new Map,Gu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function es(n,a){da.set(n,a),ut(a,[n])}var ps=[],Cl=0,sd=0;function qu(){for(var n=Cl,a=sd=Cl=0;a<n;){var u=ps[a];ps[a++]=null;var g=ps[a];ps[a++]=null;var b=ps[a];ps[a++]=null;var A=ps[a];if(ps[a++]=null,g!==null&&b!==null){var M=g.pending;M===null?b.next=b:(b.next=M.next,M.next=b),g.pending=b}A!==0&&Yg(u,b,A)}}function Yu(n,a,u,g){ps[Cl++]=n,ps[Cl++]=a,ps[Cl++]=u,ps[Cl++]=g,sd|=g,n.lanes|=g,n=n.alternate,n!==null&&(n.lanes|=g)}function ad(n,a,u,g){return Yu(n,a,u,g),Xu(n)}function Xa(n,a){return Yu(n,null,null,a),Xu(n)}function Yg(n,a,u){n.lanes|=u;var g=n.alternate;g!==null&&(g.lanes|=u);for(var b=!1,A=n.return;A!==null;)A.childLanes|=u,g=A.alternate,g!==null&&(g.childLanes|=u),A.tag===22&&(n=A.stateNode,n===null||n._visibility&1||(b=!0)),n=A,A=A.return;b&&a!==null&&n.tag===3&&(A=n.stateNode,b=31-Xt(u),A=A.hiddenUpdates,n=A[b],n===null?A[b]=[a]:n.push(a),a.lane=u|536870912)}function Xu(n){if(50<Xc)throw Xc=0,f0=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Al={},Xg=new WeakMap;function ys(n,a){if(typeof n=="object"&&n!==null){var u=Xg.get(n);return u!==void 0?u:(a={value:n,source:a,stack:Te(a)},Xg.set(n,a),a)}return{value:n,source:a,stack:Te(a)}}var Tl=[],Sl=0,Wu=null,Qu=0,xs=[],ws=0,Uo=null,ga=1,ma="";function Vo(n,a){Tl[Sl++]=Qu,Tl[Sl++]=Wu,Wu=n,Qu=a}function Wg(n,a,u){xs[ws++]=ga,xs[ws++]=ma,xs[ws++]=Uo,Uo=n;var g=ga;n=ma;var b=32-Xt(g)-1;g&=~(1<<b),u+=1;var A=32-Xt(a)+b;if(30<A){var M=b-b%5;A=(g&(1<<M)-1).toString(32),g>>=M,b-=M,ga=1<<32-Xt(a)+b|u<<b|g,ma=A+n}else ga=1<<A|u<<b|g,ma=n}function od(n){n.return!==null&&(Vo(n,1),Wg(n,1,0))}function ld(n){for(;n===Wu;)Wu=Tl[--Sl],Tl[Sl]=null,Qu=Tl[--Sl],Tl[Sl]=null;for(;n===Uo;)Uo=xs[--ws],xs[ws]=null,ma=xs[--ws],xs[ws]=null,ga=xs[--ws],xs[ws]=null}var Li=null,di=null,Sn=!1,Ds=null,Qs=!1,cd=Error(s(519));function Fo(n){var a=Error(s(418,""));throw Ac(ys(a,n)),cd}function Qg(n){var a=n.stateNode,u=n.type,g=n.memoizedProps;switch(a[Cn]=n,a[jn]=g,u){case"dialog":pn("cancel",a),pn("close",a);break;case"iframe":case"object":case"embed":pn("load",a);break;case"video":case"audio":for(u=0;u<Qc.length;u++)pn(Qc[u],a);break;case"source":pn("error",a);break;case"img":case"image":case"link":pn("error",a),pn("load",a);break;case"details":pn("toggle",a);break;case"input":pn("invalid",a),be(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Dn(a);break;case"select":pn("invalid",a);break;case"textarea":pn("invalid",a),Gn(a,g.value,g.defaultValue,g.children),Dn(a)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||g.suppressHydrationWarning===!0||i2(a.textContent,u)?(g.popover!=null&&(pn("beforetoggle",a),pn("toggle",a)),g.onScroll!=null&&pn("scroll",a),g.onScrollEnd!=null&&pn("scrollend",a),g.onClick!=null&&(a.onclick=Sh),a=!0):a=!1,a||Fo(n)}function Kg(n){for(Li=n.return;Li;)switch(Li.tag){case 3:case 27:Qs=!0;return;case 5:case 13:Qs=!1;return;default:Li=Li.return}}function _c(n){if(n!==Li)return!1;if(!Sn)return Kg(n),Sn=!0,!1;var a=!1,u;if((u=n.tag!==3&&n.tag!==27)&&((u=n.tag===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||N0(n.type,n.memoizedProps)),u=!u),u&&(a=!0),a&&di&&Fo(n),Kg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8)if(u=n.data,u==="/$"){if(a===0){di=Os(n.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;n=n.nextSibling}di=null}}else di=Li?Os(n.stateNode.nextSibling):null;return!0}function Cc(){di=Li=null,Sn=!1}function Ac(n){Ds===null?Ds=[n]:Ds.push(n)}var Tc=Error(s(460)),Zg=Error(s(474)),ud={then:function(){}};function $g(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ku(){}function Jg(n,a,u){switch(u=n[u],u===void 0?n.push(a):u!==a&&(a.then(Ku,Ku),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,n===Tc?Error(s(483)):n;default:if(typeof a.status=="string")a.then(Ku,Ku);else{if(n=$n,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(g){if(a.status==="pending"){var b=a;b.status="fulfilled",b.value=g}},function(g){if(a.status==="pending"){var b=a;b.status="rejected",b.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,n===Tc?Error(s(483)):n}throw Sc=a,Tc}}var Sc=null;function em(){if(Sc===null)throw Error(s(459));var n=Sc;return Sc=null,n}var Il=null,Ic=0;function Zu(n){var a=Ic;return Ic+=1,Il===null&&(Il=[]),Jg(Il,n,a)}function Nc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function $u(n,a){throw a.$$typeof===h?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function tm(n){var a=n._init;return a(n._payload)}function nm(n){function a(Ee,de){if(n){var Ie=Ee.deletions;Ie===null?(Ee.deletions=[de],Ee.flags|=16):Ie.push(de)}}function u(Ee,de){if(!n)return null;for(;de!==null;)a(Ee,de),de=de.sibling;return null}function g(Ee){for(var de=new Map;Ee!==null;)Ee.key!==null?de.set(Ee.key,Ee):de.set(Ee.index,Ee),Ee=Ee.sibling;return de}function b(Ee,de){return Ee=so(Ee,de),Ee.index=0,Ee.sibling=null,Ee}function A(Ee,de,Ie){return Ee.index=Ie,n?(Ie=Ee.alternate,Ie!==null?(Ie=Ie.index,Ie<de?(Ee.flags|=33554434,de):Ie):(Ee.flags|=33554434,de)):(Ee.flags|=1048576,de)}function M(Ee){return n&&Ee.alternate===null&&(Ee.flags|=33554434),Ee}function H(Ee,de,Ie,Qe){return de===null||de.tag!==6?(de=i0(Ie,Ee.mode,Qe),de.return=Ee,de):(de=b(de,Ie),de.return=Ee,de)}function ne(Ee,de,Ie,Qe){var wt=Ie.type;return wt===E?Ge(Ee,de,Ie.props.children,Qe,Ie.key):de!==null&&(de.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===ue&&tm(wt)===de.type)?(de=b(de,Ie.props),Nc(de,Ie),de.return=Ee,de):(de=ph(Ie.type,Ie.key,Ie.props,null,Ee.mode,Qe),Nc(de,Ie),de.return=Ee,de)}function me(Ee,de,Ie,Qe){return de===null||de.tag!==4||de.stateNode.containerInfo!==Ie.containerInfo||de.stateNode.implementation!==Ie.implementation?(de=s0(Ie,Ee.mode,Qe),de.return=Ee,de):(de=b(de,Ie.children||[]),de.return=Ee,de)}function Ge(Ee,de,Ie,Qe,wt){return de===null||de.tag!==7?(de=Zo(Ie,Ee.mode,Qe,wt),de.return=Ee,de):(de=b(de,Ie),de.return=Ee,de)}function Je(Ee,de,Ie){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=i0(""+de,Ee.mode,Ie),de.return=Ee,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case y:return Ie=ph(de.type,de.key,de.props,null,Ee.mode,Ie),Nc(Ie,de),Ie.return=Ee,Ie;case _:return de=s0(de,Ee.mode,Ie),de.return=Ee,de;case ue:var Qe=de._init;return de=Qe(de._payload),Je(Ee,de,Ie)}if(Fe(de)||Pe(de))return de=Zo(de,Ee.mode,Ie,null),de.return=Ee,de;if(typeof de.then=="function")return Je(Ee,Zu(de),Ie);if(de.$$typeof===U)return Je(Ee,dh(Ee,de),Ie);$u(Ee,de)}return null}function Me(Ee,de,Ie,Qe){var wt=de!==null?de.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return wt!==null?null:H(Ee,de,""+Ie,Qe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case y:return Ie.key===wt?ne(Ee,de,Ie,Qe):null;case _:return Ie.key===wt?me(Ee,de,Ie,Qe):null;case ue:return wt=Ie._init,Ie=wt(Ie._payload),Me(Ee,de,Ie,Qe)}if(Fe(Ie)||Pe(Ie))return wt!==null?null:Ge(Ee,de,Ie,Qe,null);if(typeof Ie.then=="function")return Me(Ee,de,Zu(Ie),Qe);if(Ie.$$typeof===U)return Me(Ee,de,dh(Ee,Ie),Qe);$u(Ee,Ie)}return null}function ze(Ee,de,Ie,Qe,wt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Ee=Ee.get(Ie)||null,H(de,Ee,""+Qe,wt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case y:return Ee=Ee.get(Qe.key===null?Ie:Qe.key)||null,ne(de,Ee,Qe,wt);case _:return Ee=Ee.get(Qe.key===null?Ie:Qe.key)||null,me(de,Ee,Qe,wt);case ue:var rn=Qe._init;return Qe=rn(Qe._payload),ze(Ee,de,Ie,Qe,wt)}if(Fe(Qe)||Pe(Qe))return Ee=Ee.get(Ie)||null,Ge(de,Ee,Qe,wt,null);if(typeof Qe.then=="function")return ze(Ee,de,Ie,Zu(Qe),wt);if(Qe.$$typeof===U)return ze(Ee,de,Ie,dh(de,Qe),wt);$u(de,Qe)}return null}function At(Ee,de,Ie,Qe){for(var wt=null,rn=null,St=de,Pt=de=0,ai=null;St!==null&&Pt<Ie.length;Pt++){St.index>Pt?(ai=St,St=null):ai=St.sibling;var In=Me(Ee,St,Ie[Pt],Qe);if(In===null){St===null&&(St=ai);break}n&&St&&In.alternate===null&&a(Ee,St),de=A(In,de,Pt),rn===null?wt=In:rn.sibling=In,rn=In,St=ai}if(Pt===Ie.length)return u(Ee,St),Sn&&Vo(Ee,Pt),wt;if(St===null){for(;Pt<Ie.length;Pt++)St=Je(Ee,Ie[Pt],Qe),St!==null&&(de=A(St,de,Pt),rn===null?wt=St:rn.sibling=St,rn=St);return Sn&&Vo(Ee,Pt),wt}for(St=g(St);Pt<Ie.length;Pt++)ai=ze(St,Ee,Pt,Ie[Pt],Qe),ai!==null&&(n&&ai.alternate!==null&&St.delete(ai.key===null?Pt:ai.key),de=A(ai,de,Pt),rn===null?wt=ai:rn.sibling=ai,rn=ai);return n&&St.forEach(function(fo){return a(Ee,fo)}),Sn&&Vo(Ee,Pt),wt}function Qt(Ee,de,Ie,Qe){if(Ie==null)throw Error(s(151));for(var wt=null,rn=null,St=de,Pt=de=0,ai=null,In=Ie.next();St!==null&&!In.done;Pt++,In=Ie.next()){St.index>Pt?(ai=St,St=null):ai=St.sibling;var fo=Me(Ee,St,In.value,Qe);if(fo===null){St===null&&(St=ai);break}n&&St&&fo.alternate===null&&a(Ee,St),de=A(fo,de,Pt),rn===null?wt=fo:rn.sibling=fo,rn=fo,St=ai}if(In.done)return u(Ee,St),Sn&&Vo(Ee,Pt),wt;if(St===null){for(;!In.done;Pt++,In=Ie.next())In=Je(Ee,In.value,Qe),In!==null&&(de=A(In,de,Pt),rn===null?wt=In:rn.sibling=In,rn=In);return Sn&&Vo(Ee,Pt),wt}for(St=g(St);!In.done;Pt++,In=Ie.next())In=ze(St,Ee,Pt,In.value,Qe),In!==null&&(n&&In.alternate!==null&&St.delete(In.key===null?Pt:In.key),de=A(In,de,Pt),rn===null?wt=In:rn.sibling=In,rn=In);return n&&St.forEach(function(Jv){return a(Ee,Jv)}),Sn&&Vo(Ee,Pt),wt}function _r(Ee,de,Ie,Qe){if(typeof Ie=="object"&&Ie!==null&&Ie.type===E&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case y:e:{for(var wt=Ie.key;de!==null;){if(de.key===wt){if(wt=Ie.type,wt===E){if(de.tag===7){u(Ee,de.sibling),Qe=b(de,Ie.props.children),Qe.return=Ee,Ee=Qe;break e}}else if(de.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===ue&&tm(wt)===de.type){u(Ee,de.sibling),Qe=b(de,Ie.props),Nc(Qe,Ie),Qe.return=Ee,Ee=Qe;break e}u(Ee,de);break}else a(Ee,de);de=de.sibling}Ie.type===E?(Qe=Zo(Ie.props.children,Ee.mode,Qe,Ie.key),Qe.return=Ee,Ee=Qe):(Qe=ph(Ie.type,Ie.key,Ie.props,null,Ee.mode,Qe),Nc(Qe,Ie),Qe.return=Ee,Ee=Qe)}return M(Ee);case _:e:{for(wt=Ie.key;de!==null;){if(de.key===wt)if(de.tag===4&&de.stateNode.containerInfo===Ie.containerInfo&&de.stateNode.implementation===Ie.implementation){u(Ee,de.sibling),Qe=b(de,Ie.children||[]),Qe.return=Ee,Ee=Qe;break e}else{u(Ee,de);break}else a(Ee,de);de=de.sibling}Qe=s0(Ie,Ee.mode,Qe),Qe.return=Ee,Ee=Qe}return M(Ee);case ue:return wt=Ie._init,Ie=wt(Ie._payload),_r(Ee,de,Ie,Qe)}if(Fe(Ie))return At(Ee,de,Ie,Qe);if(Pe(Ie)){if(wt=Pe(Ie),typeof wt!="function")throw Error(s(150));return Ie=wt.call(Ie),Qt(Ee,de,Ie,Qe)}if(typeof Ie.then=="function")return _r(Ee,de,Zu(Ie),Qe);if(Ie.$$typeof===U)return _r(Ee,de,dh(Ee,Ie),Qe);$u(Ee,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,de!==null&&de.tag===6?(u(Ee,de.sibling),Qe=b(de,Ie),Qe.return=Ee,Ee=Qe):(u(Ee,de),Qe=i0(Ie,Ee.mode,Qe),Qe.return=Ee,Ee=Qe),M(Ee)):u(Ee,de)}return function(Ee,de,Ie,Qe){try{Ic=0;var wt=_r(Ee,de,Ie,Qe);return Il=null,wt}catch(St){if(St===Tc)throw St;var rn=_s(29,St,null,Ee.mode);return rn.lanes=Qe,rn.return=Ee,rn}finally{}}}var zo=nm(!0),rm=nm(!1),Nl=st(null),Ju=st(0);function im(n,a){n=Ta,mt(Ju,n),mt(Nl,a),Ta=n|a.baseLanes}function hd(){mt(Ju,Ta),mt(Nl,Nl.current)}function fd(){Ta=Ju.current,vt(Nl),vt(Ju)}var bs=st(null),Ks=null;function Wa(n){var a=n.alternate;mt(Zr,Zr.current&1),mt(bs,n),Ks===null&&(a===null||Nl.current!==null||a.memoizedState!==null)&&(Ks=n)}function sm(n){if(n.tag===22){if(mt(Zr,Zr.current),mt(bs,n),Ks===null){var a=n.alternate;a!==null&&a.memoizedState!==null&&(Ks=n)}}else Qa()}function Qa(){mt(Zr,Zr.current),mt(bs,bs.current)}function pa(n){vt(bs),Ks===n&&(Ks=null),vt(Zr)}var Zr=st(0);function eh(n){for(var a=n;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var VE=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(u,g){n.push(g)}};this.abort=function(){a.aborted=!0,n.forEach(function(u){return u()})}},FE=i.unstable_scheduleCallback,zE=i.unstable_NormalPriority,$r={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new VE,data:new Map,refCount:0}}function Rc(n){n.refCount--,n.refCount===0&&FE(zE,function(){n.controller.abort()})}var Dc=null,gd=0,Rl=0,Dl=null;function HE(n,a){if(Dc===null){var u=Dc=[];gd=0,Rl=b0(),Dl={status:"pending",value:void 0,then:function(g){u.push(g)}}}return gd++,a.then(am,am),a}function am(){if(--gd===0&&Dc!==null){Dl!==null&&(Dl.status="fulfilled");var n=Dc;Dc=null,Rl=0,Dl=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function GE(n,a){var u=[],g={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return n.then(function(){g.status="fulfilled",g.value=a;for(var b=0;b<u.length;b++)(0,u[b])(a)},function(b){for(g.status="rejected",g.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),g}var om=L.S;L.S=function(n,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&HE(n,a),om!==null&&om(n,a)};var Ho=st(null);function md(){var n=Ho.current;return n!==null?n:$n.pooledCache}function th(n,a){a===null?mt(Ho,Ho.current):mt(Ho,a.pool)}function lm(){var n=md();return n===null?null:{parent:$r._currentValue,pool:n}}var Ka=0,tn=null,Vn=null,Br=null,nh=!1,Ml=!1,Go=!1,rh=0,Mc=0,Ol=null,qE=0;function Dr(){throw Error(s(321))}function pd(n,a){if(a===null)return!1;for(var u=0;u<a.length&&u<n.length;u++)if(!f(n[u],a[u]))return!1;return!0}function yd(n,a,u,g,b,A){return Ka=A,tn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=n===null||n.memoizedState===null?qo:Za,Go=!1,A=u(g,b),Go=!1,Ml&&(A=um(a,u,g,b)),cm(n),A}function cm(n){L.H=Zs;var a=Vn!==null&&Vn.next!==null;if(Ka=0,Br=Vn=tn=null,nh=!1,Mc=0,Ol=null,a)throw Error(s(300));n===null||ii||(n=n.dependencies,n!==null&&fh(n)&&(ii=!0))}function um(n,a,u,g){tn=n;var b=0;do{if(Ml&&(Ol=null),Mc=0,Ml=!1,25<=b)throw Error(s(301));if(b+=1,Br=Vn=null,n.updateQueue!=null){var A=n.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}L.H=Yo,A=a(u,g)}while(Ml);return A}function YE(){var n=L.H,a=n.useState()[0];return a=typeof a.then=="function"?Oc(a):a,n=n.useState()[0],(Vn!==null?Vn.memoizedState:null)!==n&&(tn.flags|=1024),a}function xd(){var n=rh!==0;return rh=0,n}function wd(n,a,u){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~u}function bd(n){if(nh){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}nh=!1}Ka=0,Br=Vn=tn=null,Ml=!1,Mc=rh=0,Ol=null}function Xi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?tn.memoizedState=Br=n:Br=Br.next=n,Br}function jr(){if(Vn===null){var n=tn.alternate;n=n!==null?n.memoizedState:null}else n=Vn.next;var a=Br===null?tn.memoizedState:Br.next;if(a!==null)Br=a,Vn=n;else{if(n===null)throw tn.alternate===null?Error(s(467)):Error(s(310));Vn=n,n={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Br===null?tn.memoizedState=Br=n:Br=Br.next=n}return Br}var ih;ih=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Oc(n){var a=Mc;return Mc+=1,Ol===null&&(Ol=[]),n=Jg(Ol,n,a),a=tn,(Br===null?a.memoizedState:Br.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?qo:Za),n}function sh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Oc(n);if(n.$$typeof===U)return Ai(n)}throw Error(s(438,String(n)))}function Ed(n){var a=null,u=tn.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var g=tn.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(b){return b.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=ih(),tn.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(n),g=0;g<n;g++)u[g]=fe;return a.index++,u}function ya(n,a){return typeof a=="function"?a(n):a}function ah(n){var a=jr();return vd(a,Vn,n)}function vd(n,a,u){var g=n.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=u;var b=n.baseQueue,A=g.pending;if(A!==null){if(b!==null){var M=b.next;b.next=A.next,A.next=M}a.baseQueue=b=A,g.pending=null}if(A=n.baseState,b===null)n.memoizedState=A;else{a=b.next;var H=M=null,ne=null,me=a,Ge=!1;do{var Je=me.lane&-536870913;if(Je!==me.lane?(bn&Je)===Je:(Ka&Je)===Je){var Me=me.revertLane;if(Me===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Je===Rl&&(Ge=!0);else if((Ka&Me)===Me){me=me.next,Me===Rl&&(Ge=!0);continue}else Je={lane:0,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ne===null?(H=ne=Je,M=A):ne=ne.next=Je,tn.lanes|=Me,ao|=Me;Je=me.action,Go&&u(A,Je),A=me.hasEagerState?me.eagerState:u(A,Je)}else Me={lane:Je,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ne===null?(H=ne=Me,M=A):ne=ne.next=Me,tn.lanes|=Je,ao|=Je;me=me.next}while(me!==null&&me!==a);if(ne===null?M=A:ne.next=H,!f(A,n.memoizedState)&&(ii=!0,Ge&&(u=Dl,u!==null)))throw u;n.memoizedState=A,n.baseState=M,n.baseQueue=ne,g.lastRenderedState=A}return b===null&&(g.lanes=0),[n.memoizedState,g.dispatch]}function _d(n){var a=jr(),u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=n;var g=u.dispatch,b=u.pending,A=a.memoizedState;if(b!==null){u.pending=null;var M=b=b.next;do A=n(A,M.action),M=M.next;while(M!==b);f(A,a.memoizedState)||(ii=!0),a.memoizedState=A,a.baseQueue===null&&(a.baseState=A),u.lastRenderedState=A}return[A,g]}function hm(n,a,u){var g=tn,b=jr(),A=Sn;if(A){if(u===void 0)throw Error(s(407));u=u()}else u=a();var M=!f((Vn||b).memoizedState,u);if(M&&(b.memoizedState=u,ii=!0),b=b.queue,Td(gm.bind(null,g,b,n),[n]),b.getSnapshot!==a||M||Br!==null&&Br.memoizedState.tag&1){if(g.flags|=2048,kl(9,dm.bind(null,g,b,u,a),{destroy:void 0},null),$n===null)throw Error(s(349));A||Ka&60||fm(g,a,u)}return u}function fm(n,a,u){n.flags|=16384,n={getSnapshot:a,value:u},a=tn.updateQueue,a===null?(a=ih(),tn.updateQueue=a,a.stores=[n]):(u=a.stores,u===null?a.stores=[n]:u.push(n))}function dm(n,a,u,g){a.value=u,a.getSnapshot=g,mm(a)&&pm(n)}function gm(n,a,u){return u(function(){mm(a)&&pm(n)})}function mm(n){var a=n.getSnapshot;n=n.value;try{var u=a();return!f(n,u)}catch{return!0}}function pm(n){var a=Xa(n,2);a!==null&&Pi(a,n,2)}function Cd(n){var a=Xi();if(typeof n=="function"){var u=n;if(n=u(),Go){Ut(!0);try{u()}finally{Ut(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:n},a}function ym(n,a,u,g){return n.baseState=u,vd(n,Vn,typeof g=="function"?g:ya)}function XE(n,a,u,g,b){if(ch(n))throw Error(s(485));if(n=a.action,n!==null){var A={payload:b,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){A.listeners.push(M)}};L.T!==null?u(!0):A.isTransition=!1,g(A),u=a.pending,u===null?(A.next=a.pending=A,xm(a,A)):(A.next=u.next,a.pending=u.next=A)}}function xm(n,a){var u=a.action,g=a.payload,b=n.state;if(a.isTransition){var A=L.T,M={};L.T=M;try{var H=u(b,g),ne=L.S;ne!==null&&ne(M,H),wm(n,a,H)}catch(me){Ad(n,a,me)}finally{L.T=A}}else try{A=u(b,g),wm(n,a,A)}catch(me){Ad(n,a,me)}}function wm(n,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){bm(n,a,g)},function(g){return Ad(n,a,g)}):bm(n,a,u)}function bm(n,a,u){a.status="fulfilled",a.value=u,Em(a),n.state=u,a=n.pending,a!==null&&(u=a.next,u===a?n.pending=null:(u=u.next,a.next=u,xm(n,u)))}function Ad(n,a,u){var g=n.pending;if(n.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=u,Em(a),a=a.next;while(a!==g)}n.action=null}function Em(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function vm(n,a){return a}function _m(n,a){if(Sn){var u=$n.formState;if(u!==null){e:{var g=tn;if(Sn){if(di){t:{for(var b=di,A=Qs;b.nodeType!==8;){if(!A){b=null;break t}if(b=Os(b.nextSibling),b===null){b=null;break t}}A=b.data,b=A==="F!"||A==="F"?b:null}if(b){di=Os(b.nextSibling),g=b.data==="F!";break e}}Fo(g)}g=!1}g&&(a=u[0])}}return u=Xi(),u.memoizedState=u.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vm,lastRenderedState:a},u.queue=g,u=Fm.bind(null,tn,g),g.dispatch=u,g=Cd(!1),A=Dd.bind(null,tn,!1,g.queue),g=Xi(),b={state:a,dispatch:null,action:n,pending:null},g.queue=b,u=XE.bind(null,tn,b,A,u),b.dispatch=u,g.memoizedState=n,[a,u,!1]}function Cm(n){var a=jr();return Am(a,Vn,n)}function Am(n,a,u){a=vd(n,a,vm)[0],n=ah(ya)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?Oc(a):a;var g=jr(),b=g.queue,A=b.dispatch;return u!==g.memoizedState&&(tn.flags|=2048,kl(9,WE.bind(null,b,u),{destroy:void 0},null)),[a,A,n]}function WE(n,a){n.action=a}function Tm(n){var a=jr(),u=Vn;if(u!==null)return Am(a,u,n);jr(),a=a.memoizedState,u=jr();var g=u.queue.dispatch;return u.memoizedState=n,[a,g,!1]}function kl(n,a,u,g){return n={tag:n,create:a,inst:u,deps:g,next:null},a=tn.updateQueue,a===null&&(a=ih(),tn.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=n.next=n:(g=u.next,u.next=n,n.next=g,a.lastEffect=n),n}function Sm(){return jr().memoizedState}function oh(n,a,u,g){var b=Xi();tn.flags|=n,b.memoizedState=kl(1|a,u,{destroy:void 0},g===void 0?null:g)}function lh(n,a,u,g){var b=jr();g=g===void 0?null:g;var A=b.memoizedState.inst;Vn!==null&&g!==null&&pd(g,Vn.memoizedState.deps)?b.memoizedState=kl(a,u,A,g):(tn.flags|=n,b.memoizedState=kl(1|a,u,A,g))}function Im(n,a){oh(8390656,8,n,a)}function Td(n,a){lh(2048,8,n,a)}function Nm(n,a){return lh(4,2,n,a)}function Rm(n,a){return lh(4,4,n,a)}function Dm(n,a){if(typeof a=="function"){n=n();var u=a(n);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Mm(n,a,u){u=u!=null?u.concat([n]):null,lh(4,4,Dm.bind(null,a,n),u)}function Sd(){}function Om(n,a){var u=jr();a=a===void 0?null:a;var g=u.memoizedState;return a!==null&&pd(a,g[1])?g[0]:(u.memoizedState=[n,a],n)}function km(n,a){var u=jr();a=a===void 0?null:a;var g=u.memoizedState;if(a!==null&&pd(a,g[1]))return g[0];if(g=n(),Go){Ut(!0);try{n()}finally{Ut(!1)}}return u.memoizedState=[g,a],g}function Id(n,a,u){return u===void 0||Ka&1073741824?n.memoizedState=a:(n.memoizedState=u,n=Pp(),tn.lanes|=n,ao|=n,u)}function Lm(n,a,u,g){return f(u,a)?u:Nl.current!==null?(n=Id(n,u,g),f(n,a)||(ii=!0),n):Ka&42?(n=Pp(),tn.lanes|=n,ao|=n,a):(ii=!0,n.memoizedState=u)}function Pm(n,a,u,g,b){var A=Se.p;Se.p=A!==0&&8>A?A:8;var M=L.T,H={};L.T=H,Dd(n,!1,a,u);try{var ne=b(),me=L.S;if(me!==null&&me(H,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Ge=GE(ne,g);kc(n,a,Ge,is(n))}else kc(n,a,g,is(n))}catch(Je){kc(n,a,{then:function(){},status:"rejected",reason:Je},is())}finally{Se.p=A,L.T=M}}function QE(){}function Nd(n,a,u,g){if(n.tag!==5)throw Error(s(476));var b=Bm(n).queue;Pm(n,b,a,$,u===null?QE:function(){return jm(n),u(g)})}function Bm(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:$},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:u},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function jm(n){var a=Bm(n).next.queue;kc(n,a,{},is())}function Rd(){return Ai(eu)}function Um(){return jr().memoizedState}function Vm(){return jr().memoizedState}function KE(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var u=is();n=eo(u);var g=to(a,n,u);g!==null&&(Pi(g,a,u),Bc(g,a,u)),a={cache:dd()},n.payload=a;return}a=a.return}}function ZE(n,a,u){var g=is();u={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},ch(n)?zm(a,u):(u=ad(n,a,u,g),u!==null&&(Pi(u,n,g),Hm(u,a,g)))}function Fm(n,a,u){var g=is();kc(n,a,u,g)}function kc(n,a,u,g){var b={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(ch(n))zm(a,b);else{var A=n.alternate;if(n.lanes===0&&(A===null||A.lanes===0)&&(A=a.lastRenderedReducer,A!==null))try{var M=a.lastRenderedState,H=A(M,u);if(b.hasEagerState=!0,b.eagerState=H,f(H,M))return Yu(n,a,b,0),$n===null&&qu(),!1}catch{}finally{}if(u=ad(n,a,b,g),u!==null)return Pi(u,n,g),Hm(u,a,g),!0}return!1}function Dd(n,a,u,g){if(g={lane:2,revertLane:b0(),action:g,hasEagerState:!1,eagerState:null,next:null},ch(n)){if(a)throw Error(s(479))}else a=ad(n,u,g,2),a!==null&&Pi(a,n,2)}function ch(n){var a=n.alternate;return n===tn||a!==null&&a===tn}function zm(n,a){Ml=nh=!0;var u=n.pending;u===null?a.next=a:(a.next=u.next,u.next=a),n.pending=a}function Hm(n,a,u){if(u&4194176){var g=a.lanes;g&=n.pendingLanes,u|=g,a.lanes=u,xr(n,u)}}var Zs={readContext:Ai,use:sh,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useLayoutEffect:Dr,useInsertionEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useSyncExternalStore:Dr,useId:Dr};Zs.useCacheRefresh=Dr,Zs.useMemoCache=Dr,Zs.useHostTransitionStatus=Dr,Zs.useFormState=Dr,Zs.useActionState=Dr,Zs.useOptimistic=Dr;var qo={readContext:Ai,use:sh,useCallback:function(n,a){return Xi().memoizedState=[n,a===void 0?null:a],n},useContext:Ai,useEffect:Im,useImperativeHandle:function(n,a,u){u=u!=null?u.concat([n]):null,oh(4194308,4,Dm.bind(null,a,n),u)},useLayoutEffect:function(n,a){return oh(4194308,4,n,a)},useInsertionEffect:function(n,a){oh(4,2,n,a)},useMemo:function(n,a){var u=Xi();a=a===void 0?null:a;var g=n();if(Go){Ut(!0);try{n()}finally{Ut(!1)}}return u.memoizedState=[g,a],g},useReducer:function(n,a,u){var g=Xi();if(u!==void 0){var b=u(a);if(Go){Ut(!0);try{u(a)}finally{Ut(!1)}}}else b=a;return g.memoizedState=g.baseState=b,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:b},g.queue=n,n=n.dispatch=ZE.bind(null,tn,n),[g.memoizedState,n]},useRef:function(n){var a=Xi();return n={current:n},a.memoizedState=n},useState:function(n){n=Cd(n);var a=n.queue,u=Fm.bind(null,tn,a);return a.dispatch=u,[n.memoizedState,u]},useDebugValue:Sd,useDeferredValue:function(n,a){var u=Xi();return Id(u,n,a)},useTransition:function(){var n=Cd(!1);return n=Pm.bind(null,tn,n.queue,!0,!1),Xi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,u){var g=tn,b=Xi();if(Sn){if(u===void 0)throw Error(s(407));u=u()}else{if(u=a(),$n===null)throw Error(s(349));bn&60||fm(g,a,u)}b.memoizedState=u;var A={value:u,getSnapshot:a};return b.queue=A,Im(gm.bind(null,g,A,n),[n]),g.flags|=2048,kl(9,dm.bind(null,g,A,u,a),{destroy:void 0},null),u},useId:function(){var n=Xi(),a=$n.identifierPrefix;if(Sn){var u=ma,g=ga;u=(g&~(1<<32-Xt(g)-1)).toString(32)+u,a=":"+a+"R"+u,u=rh++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=qE++,a=":"+a+"r"+u.toString(32)+":";return n.memoizedState=a},useCacheRefresh:function(){return Xi().memoizedState=KE.bind(null,tn)}};qo.useMemoCache=Ed,qo.useHostTransitionStatus=Rd,qo.useFormState=_m,qo.useActionState=_m,qo.useOptimistic=function(n){var a=Xi();a.memoizedState=a.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Dd.bind(null,tn,!0,u),u.dispatch=a,[n,a]};var Za={readContext:Ai,use:sh,useCallback:Om,useContext:Ai,useEffect:Td,useImperativeHandle:Mm,useInsertionEffect:Nm,useLayoutEffect:Rm,useMemo:km,useReducer:ah,useRef:Sm,useState:function(){return ah(ya)},useDebugValue:Sd,useDeferredValue:function(n,a){var u=jr();return Lm(u,Vn.memoizedState,n,a)},useTransition:function(){var n=ah(ya)[0],a=jr().memoizedState;return[typeof n=="boolean"?n:Oc(n),a]},useSyncExternalStore:hm,useId:Um};Za.useCacheRefresh=Vm,Za.useMemoCache=Ed,Za.useHostTransitionStatus=Rd,Za.useFormState=Cm,Za.useActionState=Cm,Za.useOptimistic=function(n,a){var u=jr();return ym(u,Vn,n,a)};var Yo={readContext:Ai,use:sh,useCallback:Om,useContext:Ai,useEffect:Td,useImperativeHandle:Mm,useInsertionEffect:Nm,useLayoutEffect:Rm,useMemo:km,useReducer:_d,useRef:Sm,useState:function(){return _d(ya)},useDebugValue:Sd,useDeferredValue:function(n,a){var u=jr();return Vn===null?Id(u,n,a):Lm(u,Vn.memoizedState,n,a)},useTransition:function(){var n=_d(ya)[0],a=jr().memoizedState;return[typeof n=="boolean"?n:Oc(n),a]},useSyncExternalStore:hm,useId:Um};Yo.useCacheRefresh=Vm,Yo.useMemoCache=Ed,Yo.useHostTransitionStatus=Rd,Yo.useFormState=Tm,Yo.useActionState=Tm,Yo.useOptimistic=function(n,a){var u=jr();return Vn!==null?ym(u,Vn,n,a):(u.baseState=n,[n,u.queue.dispatch])};function Md(n,a,u,g){a=n.memoizedState,u=u(g,a),u=u==null?a:F({},a,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Od={isMounted:function(n){return(n=n._reactInternals)?Xe(n)===n:!1},enqueueSetState:function(n,a,u){n=n._reactInternals;var g=is(),b=eo(g);b.payload=a,u!=null&&(b.callback=u),a=to(n,b,g),a!==null&&(Pi(a,n,g),Bc(a,n,g))},enqueueReplaceState:function(n,a,u){n=n._reactInternals;var g=is(),b=eo(g);b.tag=1,b.payload=a,u!=null&&(b.callback=u),a=to(n,b,g),a!==null&&(Pi(a,n,g),Bc(a,n,g))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var u=is(),g=eo(u);g.tag=2,a!=null&&(g.callback=a),a=to(n,g,u),a!==null&&(Pi(a,n,u),Bc(a,n,u))}};function Gm(n,a,u,g,b,A,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,A,M):a.prototype&&a.prototype.isPureReactComponent?!d(u,g)||!d(b,A):!0}function qm(n,a,u,g){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,g),a.state!==n&&Od.enqueueReplaceState(a,a.state,null)}function Xo(n,a){var u=a;if("ref"in a){u={};for(var g in a)g!=="ref"&&(u[g]=a[g])}if(n=n.defaultProps){u===a&&(u=F({},u));for(var b in n)u[b]===void 0&&(u[b]=n[b])}return u}var uh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Ym(n){uh(n)}function Xm(n){console.error(n)}function Wm(n){uh(n)}function hh(n,a){try{var u=n.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function Qm(n,a,u){try{var g=n.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function kd(n,a,u){return u=eo(u),u.tag=3,u.payload={element:null},u.callback=function(){hh(n,a)},u}function Km(n){return n=eo(n),n.tag=3,n}function Zm(n,a,u,g){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var A=g.value;n.payload=function(){return b(A)},n.callback=function(){Qm(a,u,g)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(n.callback=function(){Qm(a,u,g),typeof b!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var H=g.stack;this.componentDidCatch(g.value,{componentStack:H!==null?H:""})})}function $E(n,a,u,g,b){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=u.alternate,a!==null&&Pc(a,u,b,!0),u=bs.current,u!==null){switch(u.tag){case 13:return Ks===null?m0():u.alternate===null&&vr===0&&(vr=3),u.flags&=-257,u.flags|=65536,u.lanes=b,g===ud?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([g]):a.add(g),y0(n,g,b)),!1;case 22:return u.flags|=65536,g===ud?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([g]):u.add(g)),y0(n,g,b)),!1}throw Error(s(435,u.tag))}return y0(n,g,b),m0(),!1}if(Sn)return a=bs.current,a!==null?(!(a.flags&65536)&&(a.flags|=256),a.flags|=65536,a.lanes=b,g!==cd&&(n=Error(s(422),{cause:g}),Ac(ys(n,u)))):(g!==cd&&(a=Error(s(423),{cause:g}),Ac(ys(a,u))),n=n.current.alternate,n.flags|=65536,b&=-b,n.lanes|=b,g=ys(g,u),b=kd(n.stateNode,g,b),Qd(n,b),vr!==4&&(vr=2)),!1;var A=Error(s(520),{cause:g});if(A=ys(A,u),qc===null?qc=[A]:qc.push(A),vr!==4&&(vr=2),a===null)return!0;g=ys(g,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,n=b&-b,u.lanes|=n,n=kd(u.stateNode,g,n),Qd(u,n),!1;case 1:if(a=u.type,A=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(oo===null||!oo.has(A))))return u.flags|=65536,b&=-b,u.lanes|=b,b=Km(b),Zm(b,n,u,g),Qd(u,b),!1}u=u.return}while(u!==null);return!1}var $m=Error(s(461)),ii=!1;function gi(n,a,u,g){a.child=n===null?rm(a,null,u,g):zo(a,n.child,u,g)}function Jm(n,a,u,g,b){u=u.render;var A=a.ref;if("ref"in g){var M={};for(var H in g)H!=="ref"&&(M[H]=g[H])}else M=g;return Qo(a),g=yd(n,a,u,M,A,b),H=xd(),n!==null&&!ii?(wd(n,a,b),xa(n,a,b)):(Sn&&H&&od(a),a.flags|=1,gi(n,a,g,b),a.child)}function ep(n,a,u,g,b){if(n===null){var A=u.type;return typeof A=="function"&&!r0(A)&&A.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=A,tp(n,a,A,g,b)):(n=ph(u.type,null,g,a,a.mode,b),n.ref=a.ref,n.return=a,a.child=n)}if(A=n.child,!Hd(n,b)){var M=A.memoizedProps;if(u=u.compare,u=u!==null?u:d,u(M,g)&&n.ref===a.ref)return xa(n,a,b)}return a.flags|=1,n=so(A,g),n.ref=a.ref,n.return=a,a.child=n}function tp(n,a,u,g,b){if(n!==null){var A=n.memoizedProps;if(d(A,g)&&n.ref===a.ref)if(ii=!1,a.pendingProps=g=A,Hd(n,b))n.flags&131072&&(ii=!0);else return a.lanes=n.lanes,xa(n,a,b)}return Ld(n,a,u,g,b)}function np(n,a,u){var g=a.pendingProps,b=g.children,A=(a.stateNode._pendingVisibility&2)!==0,M=n!==null?n.memoizedState:null;if(Lc(n,a),g.mode==="hidden"||A){if(a.flags&128){if(g=M!==null?M.baseLanes|u:u,n!==null){for(b=a.child=n.child,A=0;b!==null;)A=A|b.lanes|b.childLanes,b=b.sibling;a.childLanes=A&~g}else a.childLanes=0,a.child=null;return rp(n,a,g,u)}if(u&536870912)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&th(a,M!==null?M.cachePool:null),M!==null?im(a,M):hd(),sm(a);else return a.lanes=a.childLanes=536870912,rp(n,a,M!==null?M.baseLanes|u:u,u)}else M!==null?(th(a,M.cachePool),im(a,M),Qa(),a.memoizedState=null):(n!==null&&th(a,null),hd(),Qa());return gi(n,a,b,u),a.child}function rp(n,a,u,g){var b=md();return b=b===null?null:{parent:$r._currentValue,pool:b},a.memoizedState={baseLanes:u,cachePool:b},n!==null&&th(a,null),hd(),sm(a),n!==null&&Pc(n,a,g,!0),null}function Lc(n,a){var u=a.ref;if(u===null)n!==null&&n.ref!==null&&(a.flags|=2097664);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(n===null||n.ref!==u)&&(a.flags|=2097664)}}function Ld(n,a,u,g,b){return Qo(a),u=yd(n,a,u,g,void 0,b),g=xd(),n!==null&&!ii?(wd(n,a,b),xa(n,a,b)):(Sn&&g&&od(a),a.flags|=1,gi(n,a,u,b),a.child)}function ip(n,a,u,g,b,A){return Qo(a),a.updateQueue=null,u=um(a,g,u,b),cm(n),g=xd(),n!==null&&!ii?(wd(n,a,A),xa(n,a,A)):(Sn&&g&&od(a),a.flags|=1,gi(n,a,u,A),a.child)}function sp(n,a,u,g,b){if(Qo(a),a.stateNode===null){var A=Al,M=u.contextType;typeof M=="object"&&M!==null&&(A=Ai(M)),A=new u(g,A),a.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Od,a.stateNode=A,A._reactInternals=a,A=a.stateNode,A.props=g,A.state=a.memoizedState,A.refs={},Xd(a),M=u.contextType,A.context=typeof M=="object"&&M!==null?Ai(M):Al,A.state=a.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(Md(a,u,M,g),A.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(M=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),M!==A.state&&Od.enqueueReplaceState(A,A.state,null),Uc(a,g,A,b),jc(),A.state=a.memoizedState),typeof A.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(n===null){A=a.stateNode;var H=a.memoizedProps,ne=Xo(u,H);A.props=ne;var me=A.context,Ge=u.contextType;M=Al,typeof Ge=="object"&&Ge!==null&&(M=Ai(Ge));var Je=u.getDerivedStateFromProps;Ge=typeof Je=="function"||typeof A.getSnapshotBeforeUpdate=="function",H=a.pendingProps!==H,Ge||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(H||me!==M)&&qm(a,A,g,M),Ja=!1;var Me=a.memoizedState;A.state=Me,Uc(a,g,A,b),jc(),me=a.memoizedState,H||Me!==me||Ja?(typeof Je=="function"&&(Md(a,u,Je,g),me=a.memoizedState),(ne=Ja||Gm(a,u,ne,g,Me,me,M))?(Ge||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(a.flags|=4194308)):(typeof A.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=me),A.props=g,A.state=me,A.context=M,g=ne):(typeof A.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{A=a.stateNode,Wd(n,a),M=a.memoizedProps,Ge=Xo(u,M),A.props=Ge,Je=a.pendingProps,Me=A.context,me=u.contextType,ne=Al,typeof me=="object"&&me!==null&&(ne=Ai(me)),H=u.getDerivedStateFromProps,(me=typeof H=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(M!==Je||Me!==ne)&&qm(a,A,g,ne),Ja=!1,Me=a.memoizedState,A.state=Me,Uc(a,g,A,b),jc();var ze=a.memoizedState;M!==Je||Me!==ze||Ja||n!==null&&n.dependencies!==null&&fh(n.dependencies)?(typeof H=="function"&&(Md(a,u,H,g),ze=a.memoizedState),(Ge=Ja||Gm(a,u,Ge,g,Me,ze,ne)||n!==null&&n.dependencies!==null&&fh(n.dependencies))?(me||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,ze,ne),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,ze,ne)),typeof A.componentDidUpdate=="function"&&(a.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof A.componentDidUpdate!="function"||M===n.memoizedProps&&Me===n.memoizedState||(a.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&Me===n.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=ze),A.props=g,A.state=ze,A.context=ne,g=Ge):(typeof A.componentDidUpdate!="function"||M===n.memoizedProps&&Me===n.memoizedState||(a.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&Me===n.memoizedState||(a.flags|=1024),g=!1)}return A=g,Lc(n,a),g=(a.flags&128)!==0,A||g?(A=a.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:A.render(),a.flags|=1,n!==null&&g?(a.child=zo(a,n.child,null,b),a.child=zo(a,null,u,b)):gi(n,a,u,b),a.memoizedState=A.state,n=a.child):n=xa(n,a,b),n}function ap(n,a,u,g){return Cc(),a.flags|=256,gi(n,a,u,g),a.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function Bd(n){return{baseLanes:n,cachePool:lm()}}function jd(n,a,u){return n=n!==null?n.childLanes&~u:0,a&&(n|=Cs),n}function op(n,a,u){var g=a.pendingProps,b=!1,A=(a.flags&128)!==0,M;if((M=A)||(M=n!==null&&n.memoizedState===null?!1:(Zr.current&2)!==0),M&&(b=!0,a.flags&=-129),M=(a.flags&32)!==0,a.flags&=-33,n===null){if(Sn){if(b?Wa(a):Qa(),Sn){var H=di,ne;if(ne=H){e:{for(ne=H,H=Qs;ne.nodeType!==8;){if(!H){H=null;break e}if(ne=Os(ne.nextSibling),ne===null){H=null;break e}}H=ne}H!==null?(a.memoizedState={dehydrated:H,treeContext:Uo!==null?{id:ga,overflow:ma}:null,retryLane:536870912},ne=_s(18,null,null,0),ne.stateNode=H,ne.return=a,a.child=ne,Li=a,di=null,ne=!0):ne=!1}ne||Fo(a)}if(H=a.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return H.data==="$!"?a.lanes=16:a.lanes=536870912,null;pa(a)}return H=g.children,g=g.fallback,b?(Qa(),b=a.mode,H=Vd({mode:"hidden",children:H},b),g=Zo(g,b,u,null),H.return=a,g.return=a,H.sibling=g,a.child=H,b=a.child,b.memoizedState=Bd(u),b.childLanes=jd(n,M,u),a.memoizedState=Pd,g):(Wa(a),Ud(a,H))}if(ne=n.memoizedState,ne!==null&&(H=ne.dehydrated,H!==null)){if(A)a.flags&256?(Wa(a),a.flags&=-257,a=Fd(n,a,u)):a.memoizedState!==null?(Qa(),a.child=n.child,a.flags|=128,a=null):(Qa(),b=g.fallback,H=a.mode,g=Vd({mode:"visible",children:g.children},H),b=Zo(b,H,u,null),b.flags|=2,g.return=a,b.return=a,g.sibling=b,a.child=g,zo(a,n.child,null,u),g=a.child,g.memoizedState=Bd(u),g.childLanes=jd(n,M,u),a.memoizedState=Pd,a=b);else if(Wa(a),H.data==="$!"){if(M=H.nextSibling&&H.nextSibling.dataset,M)var me=M.dgst;M=me,g=Error(s(419)),g.stack="",g.digest=M,Ac({value:g,source:null,stack:null}),a=Fd(n,a,u)}else if(ii||Pc(n,a,u,!1),M=(u&n.childLanes)!==0,ii||M){if(M=$n,M!==null){if(g=u&-u,g&42)g=1;else switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=64;break;case 268435456:g=134217728;break;default:g=0}if(g=g&(M.suspendedLanes|u)?0:g,g!==0&&g!==ne.retryLane)throw ne.retryLane=g,Xa(n,g),Pi(M,n,g),$m}H.data==="$?"||m0(),a=Fd(n,a,u)}else H.data==="$?"?(a.flags|=128,a.child=n.child,a=dv.bind(null,n),H._reactRetry=a,a=null):(n=ne.treeContext,di=Os(H.nextSibling),Li=a,Sn=!0,Ds=null,Qs=!1,n!==null&&(xs[ws++]=ga,xs[ws++]=ma,xs[ws++]=Uo,ga=n.id,ma=n.overflow,Uo=a),a=Ud(a,g.children),a.flags|=4096);return a}return b?(Qa(),b=g.fallback,H=a.mode,ne=n.child,me=ne.sibling,g=so(ne,{mode:"hidden",children:g.children}),g.subtreeFlags=ne.subtreeFlags&31457280,me!==null?b=so(me,b):(b=Zo(b,H,u,null),b.flags|=2),b.return=a,g.return=a,g.sibling=b,a.child=g,g=b,b=a.child,H=n.child.memoizedState,H===null?H=Bd(u):(ne=H.cachePool,ne!==null?(me=$r._currentValue,ne=ne.parent!==me?{parent:me,pool:me}:ne):ne=lm(),H={baseLanes:H.baseLanes|u,cachePool:ne}),b.memoizedState=H,b.childLanes=jd(n,M,u),a.memoizedState=Pd,g):(Wa(a),u=n.child,n=u.sibling,u=so(u,{mode:"visible",children:g.children}),u.return=a,u.sibling=null,n!==null&&(M=a.deletions,M===null?(a.deletions=[n],a.flags|=16):M.push(n)),a.child=u,a.memoizedState=null,u)}function Ud(n,a){return a=Vd({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Vd(n,a){return Op(n,a,0,null)}function Fd(n,a,u){return zo(a,n.child,null,u),n=Ud(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function lp(n,a,u){n.lanes|=a;var g=n.alternate;g!==null&&(g.lanes|=a),qd(n.return,a,u)}function zd(n,a,u,g,b){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:b}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=u,A.tailMode=b)}function cp(n,a,u){var g=a.pendingProps,b=g.revealOrder,A=g.tail;if(gi(n,a,g.children,u),g=Zr.current,g&2)g=g&1|2,a.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lp(n,u,a);else if(n.tag===19)lp(n,u,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}switch(mt(Zr,g),b){case"forwards":for(u=a.child,b=null;u!==null;)n=u.alternate,n!==null&&eh(n)===null&&(b=u),u=u.sibling;u=b,u===null?(b=a.child,a.child=null):(b=u.sibling,u.sibling=null),zd(a,!1,b,u,A);break;case"backwards":for(u=null,b=a.child,a.child=null;b!==null;){if(n=b.alternate,n!==null&&eh(n)===null){a.child=b;break}n=b.sibling,b.sibling=u,u=b,b=n}zd(a,!0,u,null,A);break;case"together":zd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function xa(n,a,u){if(n!==null&&(a.dependencies=n.dependencies),ao|=a.lanes,!(u&a.childLanes))if(n!==null){if(Pc(n,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,u=so(n,n.pendingProps),a.child=u,u.return=a;n.sibling!==null;)n=n.sibling,u=u.sibling=so(n,n.pendingProps),u.return=a;u.sibling=null}return a.child}function Hd(n,a){return n.lanes&a?!0:(n=n.dependencies,!!(n!==null&&fh(n)))}function JE(n,a,u){switch(a.tag){case 3:le(a,a.stateNode.containerInfo),$a(a,$r,n.memoizedState.cache),Cc();break;case 27:case 5:pe(a);break;case 4:le(a,a.stateNode.containerInfo);break;case 10:$a(a,a.type,a.memoizedProps.value);break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(Wa(a),a.flags|=128,null):u&a.child.childLanes?op(n,a,u):(Wa(a),n=xa(n,a,u),n!==null?n.sibling:null);Wa(a);break;case 19:var b=(n.flags&128)!==0;if(g=(u&a.childLanes)!==0,g||(Pc(n,a,u,!1),g=(u&a.childLanes)!==0),b){if(g)return cp(n,a,u);a.flags|=128}if(b=a.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),mt(Zr,Zr.current),g)break;return null;case 22:case 23:return a.lanes=0,np(n,a,u);case 24:$a(a,$r,n.memoizedState.cache)}return xa(n,a,u)}function up(n,a,u){if(n!==null)if(n.memoizedProps!==a.pendingProps)ii=!0;else{if(!Hd(n,u)&&!(a.flags&128))return ii=!1,JE(n,a,u);ii=!!(n.flags&131072)}else ii=!1,Sn&&a.flags&1048576&&Wg(a,Qu,a.index);switch(a.lanes=0,a.tag){case 16:e:{n=a.pendingProps;var g=a.elementType,b=g._init;if(g=b(g._payload),a.type=g,typeof g=="function")r0(g)?(n=Xo(g,n),a.tag=1,a=sp(null,a,g,n,u)):(a.tag=0,a=Ld(null,a,g,n,u));else{if(g!=null){if(b=g.$$typeof,b===X){a.tag=11,a=Jm(null,a,g,n,u);break e}else if(b===ye){a.tag=14,a=ep(null,a,g,n,u);break e}}throw a=j(g)||g,Error(s(306,a,""))}}return a;case 0:return Ld(n,a,a.type,a.pendingProps,u);case 1:return g=a.type,b=Xo(g,a.pendingProps),sp(n,a,g,b,u);case 3:e:{if(le(a,a.stateNode.containerInfo),n===null)throw Error(s(387));var A=a.pendingProps;b=a.memoizedState,g=b.element,Wd(n,a),Uc(a,A,null,u);var M=a.memoizedState;if(A=M.cache,$a(a,$r,A),A!==b.cache&&Yd(a,[$r],u,!0),jc(),A=M.element,b.isDehydrated)if(b={element:A,isDehydrated:!1,cache:M.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=ap(n,a,A,u);break e}else if(A!==g){g=ys(Error(s(424)),a),Ac(g),a=ap(n,a,A,u);break e}else for(di=Os(a.stateNode.containerInfo.firstChild),Li=a,Sn=!0,Ds=null,Qs=!0,u=rm(a,null,A,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Cc(),A===g){a=xa(n,a,u);break e}gi(n,a,A,u)}a=a.child}return a;case 26:return Lc(n,a),n===null?(u=d2(a.type,null,a.pendingProps,null))?a.memoizedState=u:Sn||(u=a.type,n=a.pendingProps,g=Ih(ft.current).createElement(u),g[Cn]=a,g[jn]=n,mi(g,u,n),je(g),a.stateNode=g):a.memoizedState=d2(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return pe(a),n===null&&Sn&&(g=a.stateNode=u2(a.type,a.pendingProps,ft.current),Li=a,Qs=!0,di=Os(g.firstChild)),g=a.pendingProps.children,n!==null||Sn?gi(n,a,g,u):a.child=zo(a,null,g,u),Lc(n,a),a.child;case 5:return n===null&&Sn&&((b=g=di)&&(g=Nv(g,a.type,a.pendingProps,Qs),g!==null?(a.stateNode=g,Li=a,di=Os(g.firstChild),Qs=!1,b=!0):b=!1),b||Fo(a)),pe(a),b=a.type,A=a.pendingProps,M=n!==null?n.memoizedProps:null,g=A.children,N0(b,A)?g=null:M!==null&&N0(b,M)&&(a.flags|=32),a.memoizedState!==null&&(b=yd(n,a,YE,null,null,u),eu._currentValue=b),Lc(n,a),gi(n,a,g,u),a.child;case 6:return n===null&&Sn&&((n=u=di)&&(u=Rv(u,a.pendingProps,Qs),u!==null?(a.stateNode=u,Li=a,di=null,n=!0):n=!1),n||Fo(a)),null;case 13:return op(n,a,u);case 4:return le(a,a.stateNode.containerInfo),g=a.pendingProps,n===null?a.child=zo(a,null,g,u):gi(n,a,g,u),a.child;case 11:return Jm(n,a,a.type,a.pendingProps,u);case 7:return gi(n,a,a.pendingProps,u),a.child;case 8:return gi(n,a,a.pendingProps.children,u),a.child;case 12:return gi(n,a,a.pendingProps.children,u),a.child;case 10:return g=a.pendingProps,$a(a,a.type,g.value),gi(n,a,g.children,u),a.child;case 9:return b=a.type._context,g=a.pendingProps.children,Qo(a),b=Ai(b),g=g(b),a.flags|=1,gi(n,a,g,u),a.child;case 14:return ep(n,a,a.type,a.pendingProps,u);case 15:return tp(n,a,a.type,a.pendingProps,u);case 19:return cp(n,a,u);case 22:return np(n,a,u);case 24:return Qo(a),g=Ai($r),n===null?(b=md(),b===null&&(b=$n,A=dd(),b.pooledCache=A,A.refCount++,A!==null&&(b.pooledCacheLanes|=u),b=A),a.memoizedState={parent:g,cache:b},Xd(a),$a(a,$r,b)):(n.lanes&u&&(Wd(n,a),Uc(a,null,null,u),jc()),b=n.memoizedState,A=a.memoizedState,b.parent!==g?(b={parent:g,cache:g},a.memoizedState=b,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=b),$a(a,$r,g)):(g=A.cache,$a(a,$r,g),g!==b.cache&&Yd(a,[$r],u,!0))),gi(n,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}var Gd=st(null),Wo=null,wa=null;function $a(n,a,u){mt(Gd,a._currentValue),a._currentValue=u}function ba(n){n._currentValue=Gd.current,vt(Gd)}function qd(n,a,u){for(;n!==null;){var g=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),n===u)break;n=n.return}}function Yd(n,a,u,g){var b=n.child;for(b!==null&&(b.return=n);b!==null;){var A=b.dependencies;if(A!==null){var M=b.child;A=A.firstContext;e:for(;A!==null;){var H=A;A=b;for(var ne=0;ne<a.length;ne++)if(H.context===a[ne]){A.lanes|=u,H=A.alternate,H!==null&&(H.lanes|=u),qd(A.return,u,n),g||(M=null);break e}A=H.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(s(341));M.lanes|=u,A=M.alternate,A!==null&&(A.lanes|=u),qd(M,u,n),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===n){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function Pc(n,a,u,g){n=null;for(var b=a,A=!1;b!==null;){if(!A){if(b.flags&524288)A=!0;else if(b.flags&262144)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var H=b.type;f(b.pendingProps.value,M.value)||(n!==null?n.push(H):n=[H])}}else if(b===qe.current){if(M=b.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(n!==null?n.push(eu):n=[eu])}b=b.return}n!==null&&Yd(a,n,u,g),a.flags|=262144}function fh(n){for(n=n.firstContext;n!==null;){if(!f(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Qo(n){Wo=n,wa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ai(n){return hp(Wo,n)}function dh(n,a){return Wo===null&&Qo(n),hp(n,a)}function hp(n,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},wa===null){if(n===null)throw Error(s(308));wa=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else wa=wa.next=a;return u}var Ja=!1;function Xd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wd(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function eo(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function to(n,a,u){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,gr&2){var b=g.pending;return b===null?a.next=a:(a.next=b.next,b.next=a),g.pending=a,a=Xu(n),Yg(n,null,u),a}return Yu(n,g,a,u),Xu(n)}function Bc(n,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194176)!==0)){var g=a.lanes;g&=n.pendingLanes,u|=g,a.lanes=u,xr(n,u)}}function Qd(n,a){var u=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var b=null,A=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};A===null?b=A=M:A=A.next=M,u=u.next}while(u!==null);A===null?b=A=a:A=A.next=a}else b=A=a;u={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:A,shared:g.shared,callbacks:g.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=a:n.next=a,u.lastBaseUpdate=a}var Kd=!1;function jc(){if(Kd){var n=Dl;if(n!==null)throw n}}function Uc(n,a,u,g){Kd=!1;var b=n.updateQueue;Ja=!1;var A=b.firstBaseUpdate,M=b.lastBaseUpdate,H=b.shared.pending;if(H!==null){b.shared.pending=null;var ne=H,me=ne.next;ne.next=null,M===null?A=me:M.next=me,M=ne;var Ge=n.alternate;Ge!==null&&(Ge=Ge.updateQueue,H=Ge.lastBaseUpdate,H!==M&&(H===null?Ge.firstBaseUpdate=me:H.next=me,Ge.lastBaseUpdate=ne))}if(A!==null){var Je=b.baseState;M=0,Ge=me=ne=null,H=A;do{var Me=H.lane&-536870913,ze=Me!==H.lane;if(ze?(bn&Me)===Me:(g&Me)===Me){Me!==0&&Me===Rl&&(Kd=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var At=n,Qt=H;Me=a;var _r=u;switch(Qt.tag){case 1:if(At=Qt.payload,typeof At=="function"){Je=At.call(_r,Je,Me);break e}Je=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Qt.payload,Me=typeof At=="function"?At.call(_r,Je,Me):At,Me==null)break e;Je=F({},Je,Me);break e;case 2:Ja=!0}}Me=H.callback,Me!==null&&(n.flags|=64,ze&&(n.flags|=8192),ze=b.callbacks,ze===null?b.callbacks=[Me]:ze.push(Me))}else ze={lane:Me,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Ge===null?(me=Ge=ze,ne=Je):Ge=Ge.next=ze,M|=Me;if(H=H.next,H===null){if(H=b.shared.pending,H===null)break;ze=H,H=ze.next,ze.next=null,b.lastBaseUpdate=ze,b.shared.pending=null}}while(!0);Ge===null&&(ne=Je),b.baseState=ne,b.firstBaseUpdate=me,b.lastBaseUpdate=Ge,A===null&&(b.shared.lanes=0),ao|=M,n.lanes=M,n.memoizedState=Je}}function fp(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function dp(n,a){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)fp(u[n],a)}function Vc(n,a){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var b=g.next;u=b;do{if((u.tag&n)===n){g=void 0;var A=u.create,M=u.inst;g=A(),M.destroy=g}u=u.next}while(u!==b)}}catch(H){Wn(a,a.return,H)}}function no(n,a,u){try{var g=a.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var A=b.next;g=A;do{if((g.tag&n)===n){var M=g.inst,H=M.destroy;if(H!==void 0){M.destroy=void 0,b=a;var ne=u;try{H()}catch(me){Wn(b,ne,me)}}}g=g.next}while(g!==A)}}catch(me){Wn(a,a.return,me)}}function gp(n){var a=n.updateQueue;if(a!==null){var u=n.stateNode;try{dp(a,u)}catch(g){Wn(n,n.return,g)}}}function mp(n,a,u){u.props=Xo(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(g){Wn(n,a,g)}}function Ko(n,a){try{var u=n.ref;if(u!==null){var g=n.stateNode;switch(n.tag){case 26:case 27:case 5:var b=g;break;default:b=g}typeof u=="function"?n.refCleanup=u(b):u.current=b}}catch(A){Wn(n,a,A)}}function ts(n,a){var u=n.ref,g=n.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(b){Wn(n,a,b)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){Wn(n,a,b)}else u.current=null}function pp(n){var a=n.type,u=n.memoizedProps,g=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(b){Wn(n,n.return,b)}}function yp(n,a,u){try{var g=n.stateNode;Cv(g,n.type,u,a),g[jn]=a}catch(b){Wn(n,n.return,b)}}function xp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Zd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $d(n,a,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(n,a):u.insertBefore(n,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(n,u)):(a=u,a.appendChild(n)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Sh));else if(g!==4&&g!==27&&(n=n.child,n!==null))for($d(n,a,u),n=n.sibling;n!==null;)$d(n,a,u),n=n.sibling}function gh(n,a,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,a?u.insertBefore(n,a):u.appendChild(n);else if(g!==4&&g!==27&&(n=n.child,n!==null))for(gh(n,a,u),n=n.sibling;n!==null;)gh(n,a,u),n=n.sibling}var Ea=!1,Er=!1,Jd=!1,wp=typeof WeakSet=="function"?WeakSet:Set,si=null,bp=!1;function ev(n,a){if(n=n.containerInfo,S0=kh,n=T(n),R(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var b=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{u.nodeType,A.nodeType}catch{u=null;break e}var M=0,H=-1,ne=-1,me=0,Ge=0,Je=n,Me=null;t:for(;;){for(var ze;Je!==u||b!==0&&Je.nodeType!==3||(H=M+b),Je!==A||g!==0&&Je.nodeType!==3||(ne=M+g),Je.nodeType===3&&(M+=Je.nodeValue.length),(ze=Je.firstChild)!==null;)Me=Je,Je=ze;for(;;){if(Je===n)break t;if(Me===u&&++me===b&&(H=M),Me===A&&++Ge===g&&(ne=M),(ze=Je.nextSibling)!==null)break;Je=Me,Me=Je.parentNode}Je=ze}u=H===-1||ne===-1?null:{start:H,end:ne}}else u=null}u=u||{start:0,end:0}}else u=null;for(I0={focusedElem:n,selectionRange:u},kh=!1,si=a;si!==null;)if(a=si,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,si=n;else for(;si!==null;){switch(a=si,A=a.alternate,n=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&A!==null){n=void 0,u=a,b=A.memoizedProps,A=A.memoizedState,g=u.stateNode;try{var At=Xo(u.type,b,u.elementType===u.type);n=g.getSnapshotBeforeUpdate(At,A),g.__reactInternalSnapshotBeforeUpdate=n}catch(Qt){Wn(u,u.return,Qt)}}break;case 3:if(n&1024){if(n=a.stateNode.containerInfo,u=n.nodeType,u===9)M0(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":M0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,si=n;break}si=a.return}return At=bp,bp=!1,At}function Ep(n,a,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:_a(n,u),g&4&&Vc(5,u);break;case 1:if(_a(n,u),g&4)if(n=u.stateNode,a===null)try{n.componentDidMount()}catch(H){Wn(u,u.return,H)}else{var b=Xo(u.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(b,a,n.__reactInternalSnapshotBeforeUpdate)}catch(H){Wn(u,u.return,H)}}g&64&&gp(u),g&512&&Ko(u,u.return);break;case 3:if(_a(n,u),g&64&&(g=u.updateQueue,g!==null)){if(n=null,u.child!==null)switch(u.child.tag){case 27:case 5:n=u.child.stateNode;break;case 1:n=u.child.stateNode}try{dp(g,n)}catch(H){Wn(u,u.return,H)}}break;case 26:_a(n,u),g&512&&Ko(u,u.return);break;case 27:case 5:_a(n,u),a===null&&g&4&&pp(u),g&512&&Ko(u,u.return);break;case 12:_a(n,u);break;case 13:_a(n,u),g&4&&Cp(n,u);break;case 22:if(b=u.memoizedState!==null||Ea,!b){a=a!==null&&a.memoizedState!==null||Er;var A=Ea,M=Er;Ea=b,(Er=a)&&!M?ro(n,u,(u.subtreeFlags&8772)!==0):_a(n,u),Ea=A,Er=M}g&512&&(u.memoizedProps.mode==="manual"?Ko(u,u.return):ts(u,u.return));break;default:_a(n,u)}}function vp(n){var a=n.alternate;a!==null&&(n.alternate=null,vp(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&us(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ur=null,ns=!1;function va(n,a,u){for(u=u.child;u!==null;)_p(n,a,u),u=u.sibling}function _p(n,a,u){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Jt,u)}catch{}switch(u.tag){case 26:Er||ts(u,a),va(n,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Er||ts(u,a);var g=Ur,b=ns;for(Ur=u.stateNode,va(n,a,u),u=u.stateNode,a=u.attributes;a.length;)u.removeAttributeNode(a[0]);us(u),Ur=g,ns=b;break;case 5:Er||ts(u,a);case 6:b=Ur;var A=ns;if(Ur=null,va(n,a,u),Ur=b,ns=A,Ur!==null)if(ns)try{n=Ur,g=u.stateNode,n.nodeType===8?n.parentNode.removeChild(g):n.removeChild(g)}catch(M){Wn(u,a,M)}else try{Ur.removeChild(u.stateNode)}catch(M){Wn(u,a,M)}break;case 18:Ur!==null&&(ns?(a=Ur,u=u.stateNode,a.nodeType===8?D0(a.parentNode,u):a.nodeType===1&&D0(a,u),iu(a)):D0(Ur,u.stateNode));break;case 4:g=Ur,b=ns,Ur=u.stateNode.containerInfo,ns=!0,va(n,a,u),Ur=g,ns=b;break;case 0:case 11:case 14:case 15:Er||no(2,u,a),Er||no(4,u,a),va(n,a,u);break;case 1:Er||(ts(u,a),g=u.stateNode,typeof g.componentWillUnmount=="function"&&mp(u,a,g)),va(n,a,u);break;case 21:va(n,a,u);break;case 22:Er||ts(u,a),Er=(g=Er)||u.memoizedState!==null,va(n,a,u),Er=g;break;default:va(n,a,u)}}function Cp(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{iu(n)}catch(u){Wn(a,a.return,u)}}function tv(n){switch(n.tag){case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new wp),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new wp),a;default:throw Error(s(435,n.tag))}}function e0(n,a){var u=tv(n);a.forEach(function(g){var b=gv.bind(null,n,g);u.has(g)||(u.add(g),g.then(b,b))})}function Es(n,a){var u=a.deletions;if(u!==null)for(var g=0;g<u.length;g++){var b=u[g],A=n,M=a,H=M;e:for(;H!==null;){switch(H.tag){case 27:case 5:Ur=H.stateNode,ns=!1;break e;case 3:Ur=H.stateNode.containerInfo,ns=!0;break e;case 4:Ur=H.stateNode.containerInfo,ns=!0;break e}H=H.return}if(Ur===null)throw Error(s(160));_p(A,M,b),Ur=null,ns=!1,A=b.alternate,A!==null&&(A.return=null),b.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Ap(a,n),a=a.sibling}var Ms=null;function Ap(n,a){var u=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Es(a,n),vs(n),g&4&&(no(3,n,n.return),Vc(3,n),no(5,n,n.return));break;case 1:Es(a,n),vs(n),g&512&&(Er||u===null||ts(u,u.return)),g&64&&Ea&&(n=n.updateQueue,n!==null&&(g=n.callbacks,g!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var b=Ms;if(Es(a,n),vs(n),g&512&&(Er||u===null||ts(u,u.return)),g&4){var A=u!==null?u.memoizedState:null;if(g=n.memoizedState,u===null)if(g===null)if(n.stateNode===null){e:{g=n.type,u=n.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":A=b.getElementsByTagName("title")[0],(!A||A[Yr]||A[Cn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=b.createElement(g),b.head.insertBefore(A,b.querySelector("head > title"))),mi(A,g,u),A[Cn]=n,je(A),g=A;break e;case"link":var M=p2("link","href",b).get(g+(u.href||""));if(M){for(var H=0;H<M.length;H++)if(A=M[H],A.getAttribute("href")===(u.href==null?null:u.href)&&A.getAttribute("rel")===(u.rel==null?null:u.rel)&&A.getAttribute("title")===(u.title==null?null:u.title)&&A.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(H,1);break t}}A=b.createElement(g),mi(A,g,u),b.head.appendChild(A);break;case"meta":if(M=p2("meta","content",b).get(g+(u.content||""))){for(H=0;H<M.length;H++)if(A=M[H],A.getAttribute("content")===(u.content==null?null:""+u.content)&&A.getAttribute("name")===(u.name==null?null:u.name)&&A.getAttribute("property")===(u.property==null?null:u.property)&&A.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&A.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(H,1);break t}}A=b.createElement(g),mi(A,g,u),b.head.appendChild(A);break;default:throw Error(s(468,g))}A[Cn]=n,je(A),g=A}n.stateNode=g}else y2(b,n.type,n.stateNode);else n.stateNode=m2(b,g,n.memoizedProps);else A!==g?(A===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):A.count--,g===null?y2(b,n.type,n.stateNode):m2(b,g,n.memoizedProps)):g===null&&n.stateNode!==null&&yp(n,n.memoizedProps,u.memoizedProps)}break;case 27:if(g&4&&n.alternate===null){b=n.stateNode,A=n.memoizedProps;try{for(var ne=b.firstChild;ne;){var me=ne.nextSibling,Ge=ne.nodeName;ne[Yr]||Ge==="HEAD"||Ge==="BODY"||Ge==="SCRIPT"||Ge==="STYLE"||Ge==="LINK"&&ne.rel.toLowerCase()==="stylesheet"||b.removeChild(ne),ne=me}for(var Je=n.type,Me=b.attributes;Me.length;)b.removeAttributeNode(Me[0]);mi(b,Je,A),b[Cn]=n,b[jn]=A}catch(At){Wn(n,n.return,At)}}case 5:if(Es(a,n),vs(n),g&512&&(Er||u===null||ts(u,u.return)),n.flags&32){b=n.stateNode;try{Xr(b,"")}catch(At){Wn(n,n.return,At)}}g&4&&n.stateNode!=null&&(b=n.memoizedProps,yp(n,b,u!==null?u.memoizedProps:b)),g&1024&&(Jd=!0);break;case 6:if(Es(a,n),vs(n),g&4){if(n.stateNode===null)throw Error(s(162));g=n.memoizedProps,u=n.stateNode;try{u.nodeValue=g}catch(At){Wn(n,n.return,At)}}break;case 3:if(Dh=null,b=Ms,Ms=Nh(a.containerInfo),Es(a,n),Ms=b,vs(n),g&4&&u!==null&&u.memoizedState.isDehydrated)try{iu(a.containerInfo)}catch(At){Wn(n,n.return,At)}Jd&&(Jd=!1,Tp(n));break;case 4:g=Ms,Ms=Nh(n.stateNode.containerInfo),Es(a,n),vs(n),Ms=g;break;case 12:Es(a,n),vs(n);break;case 13:Es(a,n),vs(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(c0=We()),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,e0(n,g)));break;case 22:if(g&512&&(Er||u===null||ts(u,u.return)),ne=n.memoizedState!==null,me=u!==null&&u.memoizedState!==null,Ge=Ea,Je=Er,Ea=Ge||ne,Er=Je||me,Es(a,n),Er=Je,Ea=Ge,vs(n),a=n.stateNode,a._current=n,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,g&8192&&(a._visibility=ne?a._visibility&-2:a._visibility|1,ne&&(a=Ea||Er,u===null||me||a||Ll(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(u=null,a=n;;){if(a.tag===5||a.tag===26||a.tag===27){if(u===null){me=u=a;try{if(b=me.stateNode,ne)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=me.stateNode,H=me.memoizedProps.style;var ze=H!=null&&H.hasOwnProperty("display")?H.display:null;M.style.display=ze==null||typeof ze=="boolean"?"":(""+ze).trim()}}catch(At){Wn(me,me.return,At)}}}else if(a.tag===6){if(u===null){me=a;try{me.stateNode.nodeValue=ne?"":me.memoizedProps}catch(At){Wn(me,me.return,At)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=n.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,e0(n,u))));break;case 19:Es(a,n),vs(n),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,e0(n,g)));break;case 21:break;default:Es(a,n),vs(n)}}function vs(n){var a=n.flags;if(a&2){try{if(n.tag!==27){e:{for(var u=n.return;u!==null;){if(xp(u)){var g=u;break e}u=u.return}throw Error(s(160))}switch(g.tag){case 27:var b=g.stateNode,A=Zd(n);gh(n,A,b);break;case 5:var M=g.stateNode;g.flags&32&&(Xr(M,""),g.flags&=-33);var H=Zd(n);gh(n,H,M);break;case 3:case 4:var ne=g.stateNode.containerInfo,me=Zd(n);$d(n,me,ne);break;default:throw Error(s(161))}}}catch(Ge){Wn(n,n.return,Ge)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function Tp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;Tp(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function _a(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ep(n,a.alternate,a),a=a.sibling}function Ll(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:no(4,a,a.return),Ll(a);break;case 1:ts(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&mp(a,a.return,u),Ll(a);break;case 26:case 27:case 5:ts(a,a.return),Ll(a);break;case 22:ts(a,a.return),a.memoizedState===null&&Ll(a);break;default:Ll(a)}n=n.sibling}}function ro(n,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,b=n,A=a,M=A.flags;switch(A.tag){case 0:case 11:case 15:ro(b,A,u),Vc(4,A);break;case 1:if(ro(b,A,u),g=A,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(me){Wn(g,g.return,me)}if(g=A,b=g.updateQueue,b!==null){var H=g.stateNode;try{var ne=b.shared.hiddenCallbacks;if(ne!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ne.length;b++)fp(ne[b],H)}catch(me){Wn(g,g.return,me)}}u&&M&64&&gp(A),Ko(A,A.return);break;case 26:case 27:case 5:ro(b,A,u),u&&g===null&&M&4&&pp(A),Ko(A,A.return);break;case 12:ro(b,A,u);break;case 13:ro(b,A,u),u&&M&4&&Cp(b,A);break;case 22:A.memoizedState===null&&ro(b,A,u),Ko(A,A.return);break;default:ro(b,A,u)}a=a.sibling}}function t0(n,a){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&Rc(u))}function n0(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Rc(n))}function io(n,a,u,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Sp(n,a,u,g),a=a.sibling}function Sp(n,a,u,g){var b=a.flags;switch(a.tag){case 0:case 11:case 15:io(n,a,u,g),b&2048&&Vc(9,a);break;case 3:io(n,a,u,g),b&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Rc(n)));break;case 12:if(b&2048){io(n,a,u,g),n=a.stateNode;try{var A=a.memoizedProps,M=A.id,H=A.onPostCommit;typeof H=="function"&&H(M,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(ne){Wn(a,a.return,ne)}}else io(n,a,u,g);break;case 23:break;case 22:A=a.stateNode,a.memoizedState!==null?A._visibility&4?io(n,a,u,g):Fc(n,a):A._visibility&4?io(n,a,u,g):(A._visibility|=4,Pl(n,a,u,g,(a.subtreeFlags&10256)!==0)),b&2048&&t0(a.alternate,a);break;case 24:io(n,a,u,g),b&2048&&n0(a.alternate,a);break;default:io(n,a,u,g)}}function Pl(n,a,u,g,b){for(b=b&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var A=n,M=a,H=u,ne=g,me=M.flags;switch(M.tag){case 0:case 11:case 15:Pl(A,M,H,ne,b),Vc(8,M);break;case 23:break;case 22:var Ge=M.stateNode;M.memoizedState!==null?Ge._visibility&4?Pl(A,M,H,ne,b):Fc(A,M):(Ge._visibility|=4,Pl(A,M,H,ne,b)),b&&me&2048&&t0(M.alternate,M);break;case 24:Pl(A,M,H,ne,b),b&&me&2048&&n0(M.alternate,M);break;default:Pl(A,M,H,ne,b)}a=a.sibling}}function Fc(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=n,g=a,b=g.flags;switch(g.tag){case 22:Fc(u,g),b&2048&&t0(g.alternate,g);break;case 24:Fc(u,g),b&2048&&n0(g.alternate,g);break;default:Fc(u,g)}a=a.sibling}}var zc=8192;function Bl(n){if(n.subtreeFlags&zc)for(n=n.child;n!==null;)Ip(n),n=n.sibling}function Ip(n){switch(n.tag){case 26:Bl(n),n.flags&zc&&n.memoizedState!==null&&Hv(Ms,n.memoizedState,n.memoizedProps);break;case 5:Bl(n);break;case 3:case 4:var a=Ms;Ms=Nh(n.stateNode.containerInfo),Bl(n),Ms=a;break;case 22:n.memoizedState===null&&(a=n.alternate,a!==null&&a.memoizedState!==null?(a=zc,zc=16777216,Bl(n),zc=a):Bl(n));break;default:Bl(n)}}function Np(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Hc(n){var a=n.deletions;if(n.flags&16){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];si=g,Dp(g,n)}Np(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rp(n),n=n.sibling}function Rp(n){switch(n.tag){case 0:case 11:case 15:Hc(n),n.flags&2048&&no(9,n,n.return);break;case 3:Hc(n);break;case 12:Hc(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&4&&(n.return===null||n.return.tag!==13)?(a._visibility&=-5,mh(n)):Hc(n);break;default:Hc(n)}}function mh(n){var a=n.deletions;if(n.flags&16){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];si=g,Dp(g,n)}Np(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:no(8,a,a.return),mh(a);break;case 22:u=a.stateNode,u._visibility&4&&(u._visibility&=-5,mh(a));break;default:mh(a)}n=n.sibling}}function Dp(n,a){for(;si!==null;){var u=si;switch(u.tag){case 0:case 11:case 15:no(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Rc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,si=g;else e:for(u=n;si!==null;){g=si;var b=g.sibling,A=g.return;if(vp(g),g===u){si=null;break e}if(b!==null){b.return=A,si=b;break e}si=A}}}function nv(n,a,u,g){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(n,a,u,g){return new nv(n,a,u,g)}function r0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function so(n,a){var u=n.alternate;return u===null?(u=_s(n.tag,a,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=a,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&31457280,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,a=n.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function Mp(n,a){n.flags&=31457282;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,a=u.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function ph(n,a,u,g,b,A){var M=0;if(g=n,typeof n=="function")r0(n)&&(M=1);else if(typeof n=="string")M=Fv(n,u,xt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case E:return Zo(u.children,b,A,a);case w:M=8,b|=24;break;case S:return n=_s(12,u,a,b|2),n.elementType=S,n.lanes=A,n;case re:return n=_s(13,u,a,b),n.elementType=re,n.lanes=A,n;case Y:return n=_s(19,u,a,b),n.elementType=Y,n.lanes=A,n;case se:return Op(u,b,A,a);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:case U:M=10;break e;case P:M=9;break e;case X:M=11;break e;case ye:M=14;break e;case ue:M=16,g=null;break e}M=29,u=Error(s(130,n===null?"null":typeof n,"")),g=null}return a=_s(M,u,a,b),a.elementType=n,a.type=g,a.lanes=A,a}function Zo(n,a,u,g){return n=_s(7,n,g,a),n.lanes=u,n}function Op(n,a,u,g){n=_s(22,n,g,a),n.elementType=se,n.lanes=u;var b={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var A=b._current;if(A===null)throw Error(s(456));if(!(b._pendingVisibility&2)){var M=Xa(A,2);M!==null&&(b._pendingVisibility|=2,Pi(M,A,2))}},attach:function(){var A=b._current;if(A===null)throw Error(s(456));if(b._pendingVisibility&2){var M=Xa(A,2);M!==null&&(b._pendingVisibility&=-3,Pi(M,A,2))}}};return n.stateNode=b,n}function i0(n,a,u){return n=_s(6,n,null,a),n.lanes=u,n}function s0(n,a,u){return a=_s(4,n.children!==null?n.children:[],n.key,a),a.lanes=u,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}function Ca(n){n.flags|=4}function kp(n,a){if(a.type!=="stylesheet"||a.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!x2(a)){if(a=bs.current,a!==null&&((bn&4194176)===bn?Ks!==null:(bn&62914560)!==bn&&!(bn&536870912)||a!==Ks))throw Sc=ud,Zg;n.flags|=8192}}function yh(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?yr():536870912,n.lanes|=a,Ul|=a)}function Gc(n,a){if(!Sn)switch(n.tailMode){case"hidden":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function dr(n){var a=n.alternate!==null&&n.alternate.child===n.child,u=0,g=0;if(a)for(var b=n.child;b!==null;)u|=b.lanes|b.childLanes,g|=b.subtreeFlags&31457280,g|=b.flags&31457280,b.return=n,b=b.sibling;else for(b=n.child;b!==null;)u|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=n,b=b.sibling;return n.subtreeFlags|=g,n.childLanes=u,a}function rv(n,a,u){var g=a.pendingProps;switch(ld(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dr(a),null;case 1:return dr(a),null;case 3:return u=a.stateNode,g=null,n!==null&&(g=n.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),ba($r),Ne(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(_c(a)?Ca(a):n===null||n.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Ds!==null&&(d0(Ds),Ds=null))),dr(a),null;case 26:return u=a.memoizedState,n===null?(Ca(a),u!==null?(dr(a),kp(a,u)):(dr(a),a.flags&=-16777217)):u?u!==n.memoizedState?(Ca(a),dr(a),kp(a,u)):(dr(a),a.flags&=-16777217):(n.memoizedProps!==g&&Ca(a),dr(a),a.flags&=-16777217),null;case 27:De(a),u=ft.current;var b=a.type;if(n!==null&&a.stateNode!=null)n.memoizedProps!==g&&Ca(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return dr(a),null}n=xt.current,_c(a)?Qg(a):(n=u2(b,g,u),a.stateNode=n,Ca(a))}return dr(a),null;case 5:if(De(a),u=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==g&&Ca(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return dr(a),null}if(n=xt.current,_c(a))Qg(a);else{switch(b=Ih(ft.current),n){case 1:n=b.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:n=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":n=b.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":n=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":n=b.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof g.is=="string"?b.createElement("select",{is:g.is}):b.createElement("select"),g.multiple?n.multiple=!0:g.size&&(n.size=g.size);break;default:n=typeof g.is=="string"?b.createElement(u,{is:g.is}):b.createElement(u)}}n[Cn]=a,n[jn]=g;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)n.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=n;e:switch(mi(n,u,g),u){case"button":case"input":case"select":case"textarea":n=!!g.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ca(a)}}return dr(a),a.flags&=-16777217,null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==g&&Ca(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(s(166));if(n=ft.current,_c(a)){if(n=a.stateNode,u=a.memoizedProps,g=null,b=Li,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}n[Cn]=a,n=!!(n.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||i2(n.nodeValue,u)),n||Fo(a)}else n=Ih(n).createTextNode(g),n[Cn]=a,a.stateNode=n}return dr(a),null;case 13:if(g=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(b=_c(a),g!==null&&g.dehydrated!==null){if(n===null){if(!b)throw Error(s(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[Cn]=a}else Cc(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;dr(a),b=!1}else Ds!==null&&(d0(Ds),Ds=null),b=!0;if(!b)return a.flags&256?(pa(a),a):(pa(a),null)}if(pa(a),a.flags&128)return a.lanes=u,a;if(u=g!==null,n=n!==null&&n.memoizedState!==null,u){g=a.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool);var A=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==b&&(g.flags|=2048)}return u!==n&&u&&(a.child.flags|=8192),yh(a,a.updateQueue),dr(a),null;case 4:return Ne(),n===null&&C0(a.stateNode.containerInfo),dr(a),null;case 10:return ba(a.type),dr(a),null;case 19:if(vt(Zr),b=a.memoizedState,b===null)return dr(a),null;if(g=(a.flags&128)!==0,A=b.rendering,A===null)if(g)Gc(b,!1);else{if(vr!==0||n!==null&&n.flags&128)for(n=a.child;n!==null;){if(A=eh(n),A!==null){for(a.flags|=128,Gc(b,!1),n=A.updateQueue,a.updateQueue=n,yh(a,n),a.subtreeFlags=0,n=u,u=a.child;u!==null;)Mp(u,n),u=u.sibling;return mt(Zr,Zr.current&1|2),a.child}n=n.sibling}b.tail!==null&&We()>xh&&(a.flags|=128,g=!0,Gc(b,!1),a.lanes=4194304)}else{if(!g)if(n=eh(A),n!==null){if(a.flags|=128,g=!0,n=n.updateQueue,a.updateQueue=n,yh(a,n),Gc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!A.alternate&&!Sn)return dr(a),null}else 2*We()-b.renderingStartTime>xh&&u!==536870912&&(a.flags|=128,g=!0,Gc(b,!1),a.lanes=4194304);b.isBackwards?(A.sibling=a.child,a.child=A):(n=b.last,n!==null?n.sibling=A:a.child=A,b.last=A)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=We(),a.sibling=null,n=Zr.current,mt(Zr,g?n&1|2:n&1),a):(dr(a),null);case 22:case 23:return pa(a),fd(),g=a.memoizedState!==null,n!==null?n.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?u&536870912&&!(a.flags&128)&&(dr(a),a.subtreeFlags&6&&(a.flags|=8192)):dr(a),u=a.updateQueue,u!==null&&yh(a,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==u&&(a.flags|=2048),n!==null&&vt(Ho),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ba($r),dr(a),null;case 25:return null}throw Error(s(156,a.tag))}function iv(n,a){switch(ld(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return ba($r),Ne(),n=a.flags,n&65536&&!(n&128)?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return De(a),null;case 13:if(pa(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Cc()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return vt(Zr),null;case 4:return Ne(),null;case 10:return ba(a.type),null;case 22:case 23:return pa(a),fd(),n!==null&&vt(Ho),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return ba($r),null;case 25:return null;default:return null}}function Lp(n,a){switch(ld(a),a.tag){case 3:ba($r),Ne();break;case 26:case 27:case 5:De(a);break;case 4:Ne();break;case 13:pa(a);break;case 19:vt(Zr);break;case 10:ba(a.type);break;case 22:case 23:pa(a),fd(),n!==null&&vt(Ho);break;case 24:ba($r)}}var sv={getCacheForType:function(n){var a=Ai($r),u=a.data.get(n);return u===void 0&&(u=n(),a.data.set(n,u)),u}},av=typeof WeakMap=="function"?WeakMap:Map,gr=0,$n=null,on=null,bn=0,Jn=0,rs=null,Aa=!1,jl=!1,a0=!1,Ta=0,vr=0,ao=0,$o=0,o0=0,Cs=0,Ul=0,qc=null,$s=null,l0=!1,c0=0,xh=1/0,wh=null,oo=null,bh=!1,Jo=null,Yc=0,u0=0,h0=null,Xc=0,f0=null;function is(){if(gr&2&&bn!==0)return bn&-bn;if(L.T!==null){var n=Rl;return n!==0?n:b0()}return ci()}function Pp(){Cs===0&&(Cs=!(bn&536870912)||Sn?Hn():536870912);var n=bs.current;return n!==null&&(n.flags|=32),Cs}function Pi(n,a,u){(n===$n&&Jn===2||n.cancelPendingCommit!==null)&&(Vl(n,0),Sa(n,bn,Cs,!1)),an(n,u),(!(gr&2)||n!==$n)&&(n===$n&&(!(gr&2)&&($o|=u),vr===4&&Sa(n,bn,Cs,!1)),Js(n))}function Bp(n,a,u){if(gr&6)throw Error(s(327));var g=!u&&(a&60)===0&&(a&n.expiredLanes)===0||Ln(n,a),b=g?cv(n,a):p0(n,a,!0),A=g;do{if(b===0){jl&&!g&&Sa(n,a,0,!1);break}else if(b===6)Sa(n,a,0,!Aa);else{if(u=n.current.alternate,A&&!ov(u)){b=p0(n,a,!1),A=!1;continue}if(b===2){if(A=a,n.errorRecoveryDisabledLanes&A)var M=0;else M=n.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){a=M;e:{var H=n;b=qc;var ne=H.current.memoizedState.isDehydrated;if(ne&&(Vl(H,M).flags|=256),M=p0(H,M,!1),M!==2){if(a0&&!ne){H.errorRecoveryDisabledLanes|=A,$o|=A,b=4;break e}A=$s,$s=b,A!==null&&d0(A)}b=M}if(A=!1,b!==2)continue}}if(b===1){Vl(n,0),Sa(n,a,0,!0);break}e:{switch(g=n,b){case 0:case 1:throw Error(s(345));case 4:if((a&4194176)===a){Sa(g,a,Cs,!Aa);break e}break;case 2:$s=null;break;case 3:case 5:break;default:throw Error(s(329))}if(g.finishedWork=u,g.finishedLanes=a,(a&62914560)===a&&(A=c0+300-We(),10<A)){if(Sa(g,a,Cs,!Aa),pr(g,0)!==0)break e;g.timeoutHandle=o2(jp.bind(null,g,u,$s,wh,l0,a,Cs,$o,Ul,Aa,2,-0,0),A);break e}jp(g,u,$s,wh,l0,a,Cs,$o,Ul,Aa,0,-0,0)}}break}while(!0);Js(n)}function d0(n){$s===null?$s=n:$s.push.apply($s,n)}function jp(n,a,u,g,b,A,M,H,ne,me,Ge,Je,Me){var ze=a.subtreeFlags;if((ze&8192||(ze&16785408)===16785408)&&(Jc={stylesheets:null,count:0,unsuspend:zv},Ip(a),a=Gv(),a!==null)){n.cancelPendingCommit=a(qp.bind(null,n,u,g,b,M,H,ne,1,Je,Me)),Sa(n,A,M,!me);return}qp(n,u,g,b,M,H,ne,Ge,Je,Me)}function ov(n){for(var a=n;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var b=u[g],A=b.getSnapshot;b=b.value;try{if(!f(A(),b))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Sa(n,a,u,g){a&=~o0,a&=~$o,n.suspendedLanes|=a,n.pingedLanes&=~a,g&&(n.warmLanes|=a),g=n.expirationTimes;for(var b=a;0<b;){var A=31-Xt(b),M=1<<A;g[A]=-1,b&=~M}u!==0&&hr(n,u,a)}function Eh(){return gr&6?!0:(Wc(0),!1)}function g0(){if(on!==null){if(Jn===0)var n=on.return;else n=on,wa=Wo=null,bd(n),Il=null,Ic=0,n=on;for(;n!==null;)Lp(n.alternate,n),n=n.return;on=null}}function Vl(n,a){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,Tv(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),g0(),$n=n,on=u=so(n.current,null),bn=a,Jn=0,rs=null,Aa=!1,jl=Ln(n,a),a0=!1,Ul=Cs=o0=$o=ao=vr=0,$s=qc=null,l0=!1,a&8&&(a|=a&32);var g=n.entangledLanes;if(g!==0)for(n=n.entanglements,g&=a;0<g;){var b=31-Xt(g),A=1<<b;a|=n[b],g&=~A}return Ta=a,qu(),u}function Up(n,a){tn=null,L.H=Zs,a===Tc?(a=em(),Jn=3):a===Zg?(a=em(),Jn=4):Jn=a===$m?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,rs=a,on===null&&(vr=1,hh(n,ys(a,n.current)))}function Vp(){var n=L.H;return L.H=Zs,n===null?Zs:n}function Fp(){var n=L.A;return L.A=sv,n}function m0(){vr=4,Aa||(bn&4194176)!==bn&&bs.current!==null||(jl=!0),!(ao&134217727)&&!($o&134217727)||$n===null||Sa($n,bn,Cs,!1)}function p0(n,a,u){var g=gr;gr|=2;var b=Vp(),A=Fp();($n!==n||bn!==a)&&(wh=null,Vl(n,a)),a=!1;var M=vr;e:do try{if(Jn!==0&&on!==null){var H=on,ne=rs;switch(Jn){case 8:g0(),M=6;break e;case 3:case 2:case 6:bs.current===null&&(a=!0);var me=Jn;if(Jn=0,rs=null,Fl(n,H,ne,me),u&&jl){M=0;break e}break;default:me=Jn,Jn=0,rs=null,Fl(n,H,ne,me)}}lv(),M=vr;break}catch(Ge){Up(n,Ge)}while(!0);return a&&n.shellSuspendCounter++,wa=Wo=null,gr=g,L.H=b,L.A=A,on===null&&($n=null,bn=0,qu()),M}function lv(){for(;on!==null;)zp(on)}function cv(n,a){var u=gr;gr|=2;var g=Vp(),b=Fp();$n!==n||bn!==a?(wh=null,xh=We()+500,Vl(n,a)):jl=Ln(n,a);e:do try{if(Jn!==0&&on!==null){a=on;var A=rs;t:switch(Jn){case 1:Jn=0,rs=null,Fl(n,a,A,1);break;case 2:if($g(A)){Jn=0,rs=null,Hp(a);break}a=function(){Jn===2&&$n===n&&(Jn=7),Js(n)},A.then(a,a);break e;case 3:Jn=7;break e;case 4:Jn=5;break e;case 7:$g(A)?(Jn=0,rs=null,Hp(a)):(Jn=0,rs=null,Fl(n,a,A,7));break;case 5:var M=null;switch(on.tag){case 26:M=on.memoizedState;case 5:case 27:var H=on;if(!M||x2(M)){Jn=0,rs=null;var ne=H.sibling;if(ne!==null)on=ne;else{var me=H.return;me!==null?(on=me,vh(me)):on=null}break t}}Jn=0,rs=null,Fl(n,a,A,5);break;case 6:Jn=0,rs=null,Fl(n,a,A,6);break;case 8:g0(),vr=6;break e;default:throw Error(s(462))}}uv();break}catch(Ge){Up(n,Ge)}while(!0);return wa=Wo=null,L.H=g,L.A=b,gr=u,on!==null?0:($n=null,bn=0,qu(),vr)}function uv(){for(;on!==null&&!Mt();)zp(on)}function zp(n){var a=up(n.alternate,n,Ta);n.memoizedProps=n.pendingProps,a===null?vh(n):on=a}function Hp(n){var a=n,u=a.alternate;switch(a.tag){case 15:case 0:a=ip(u,a,a.pendingProps,a.type,void 0,bn);break;case 11:a=ip(u,a,a.pendingProps,a.type.render,a.ref,bn);break;case 5:bd(a);default:Lp(u,a),a=on=Mp(a,Ta),a=up(u,a,Ta)}n.memoizedProps=n.pendingProps,a===null?vh(n):on=a}function Fl(n,a,u,g){wa=Wo=null,bd(a),Il=null,Ic=0;var b=a.return;try{if($E(n,b,a,u,bn)){vr=1,hh(n,ys(u,n.current)),on=null;return}}catch(A){if(b!==null)throw on=b,A;vr=1,hh(n,ys(u,n.current)),on=null;return}a.flags&32768?(Sn||g===1?n=!0:jl||bn&536870912?n=!1:(Aa=n=!0,(g===2||g===3||g===6)&&(g=bs.current,g!==null&&g.tag===13&&(g.flags|=16384))),Gp(a,n)):vh(a)}function vh(n){var a=n;do{if(a.flags&32768){Gp(a,Aa);return}n=a.return;var u=rv(a.alternate,a,Ta);if(u!==null){on=u;return}if(a=a.sibling,a!==null){on=a;return}on=a=n}while(a!==null);vr===0&&(vr=5)}function Gp(n,a){do{var u=iv(n.alternate,n);if(u!==null){u.flags&=32767,on=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(n=n.sibling,n!==null)){on=n;return}on=n=u}while(n!==null);vr=6,on=null}function qp(n,a,u,g,b,A,M,H,ne,me){var Ge=L.T,Je=Se.p;try{Se.p=2,L.T=null,hv(n,a,u,g,Je,b,A,M,H,ne,me)}finally{L.T=Ge,Se.p=Je}}function hv(n,a,u,g,b,A,M,H){do zl();while(Jo!==null);if(gr&6)throw Error(s(327));var ne=n.finishedWork;if(g=n.finishedLanes,ne===null)return null;if(n.finishedWork=null,n.finishedLanes=0,ne===n.current)throw Error(s(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var me=ne.lanes|ne.childLanes;if(me|=sd,Fs(n,g,me,A,M,H),n===$n&&(on=$n=null,bn=0),!(ne.subtreeFlags&10256)&&!(ne.flags&10256)||bh||(bh=!0,u0=me,h0=u,mv(It,function(){return zl(),null})),u=(ne.flags&15990)!==0,ne.subtreeFlags&15990||u?(u=L.T,L.T=null,A=Se.p,Se.p=2,M=gr,gr|=4,ev(n,ne),Ap(ne,n),k(I0,n.containerInfo),kh=!!S0,I0=S0=null,n.current=ne,Ep(n,ne.alternate,ne),ot(),gr=M,Se.p=A,L.T=u):n.current=ne,bh?(bh=!1,Jo=n,Yc=g):Yp(n,me),me=n.pendingLanes,me===0&&(oo=null),xn(ne.stateNode),Js(n),a!==null)for(b=n.onRecoverableError,ne=0;ne<a.length;ne++)me=a[ne],b(me.value,{componentStack:me.stack});return Yc&3&&zl(),me=n.pendingLanes,g&4194218&&me&42?n===f0?Xc++:(Xc=0,f0=n):Xc=0,Wc(0),null}function Yp(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Rc(a)))}function zl(){if(Jo!==null){var n=Jo,a=u0;u0=0;var u=tr(Yc),g=L.T,b=Se.p;try{if(Se.p=32>u?32:u,L.T=null,Jo===null)var A=!1;else{u=h0,h0=null;var M=Jo,H=Yc;if(Jo=null,Yc=0,gr&6)throw Error(s(331));var ne=gr;if(gr|=4,Rp(M.current),Sp(M,M.current,H,u),gr=ne,Wc(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Jt,M)}catch{}A=!0}return A}finally{Se.p=b,L.T=g,Yp(n,a)}}return!1}function Xp(n,a,u){a=ys(u,a),a=kd(n.stateNode,a,2),n=to(n,a,2),n!==null&&(an(n,2),Js(n))}function Wn(n,a,u){if(n.tag===3)Xp(n,n,u);else for(;a!==null;){if(a.tag===3){Xp(a,n,u);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(oo===null||!oo.has(g))){n=ys(u,n),u=Km(2),g=to(a,u,2),g!==null&&(Zm(u,g,a,n),an(g,2),Js(g));break}}a=a.return}}function y0(n,a,u){var g=n.pingCache;if(g===null){g=n.pingCache=new av;var b=new Set;g.set(a,b)}else b=g.get(a),b===void 0&&(b=new Set,g.set(a,b));b.has(u)||(a0=!0,b.add(u),n=fv.bind(null,n,a,u),a.then(n,n))}function fv(n,a,u){var g=n.pingCache;g!==null&&g.delete(a),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,$n===n&&(bn&u)===u&&(vr===4||vr===3&&(bn&62914560)===bn&&300>We()-c0?!(gr&2)&&Vl(n,0):o0|=u,Ul===bn&&(Ul=0)),Js(n)}function Wp(n,a){a===0&&(a=yr()),n=Xa(n,a),n!==null&&(an(n,a),Js(n))}function dv(n){var a=n.memoizedState,u=0;a!==null&&(u=a.retryLane),Wp(n,u)}function gv(n,a){var u=0;switch(n.tag){case 13:var g=n.stateNode,b=n.memoizedState;b!==null&&(u=b.retryLane);break;case 19:g=n.stateNode;break;case 22:g=n.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(a),Wp(n,u)}function mv(n,a){return Ye(n,a)}var _h=null,Hl=null,x0=!1,Ch=!1,w0=!1,el=0;function Js(n){n!==Hl&&n.next===null&&(Hl===null?_h=Hl=n:Hl=Hl.next=n),Ch=!0,x0||(x0=!0,yv(pv))}function Wc(n,a){if(!w0&&Ch){w0=!0;do for(var u=!1,g=_h;g!==null;){if(n!==0){var b=g.pendingLanes;if(b===0)var A=0;else{var M=g.suspendedLanes,H=g.pingedLanes;A=(1<<31-Xt(42|n)+1)-1,A&=b&~(M&~H),A=A&201326677?A&201326677|1:A?A|2:0}A!==0&&(u=!0,Zp(g,A))}else A=bn,A=pr(g,g===$n?A:0),!(A&3)||Ln(g,A)||(u=!0,Zp(g,A));g=g.next}while(u);w0=!1}}function pv(){Ch=x0=!1;var n=0;el!==0&&(Av()&&(n=el),el=0);for(var a=We(),u=null,g=_h;g!==null;){var b=g.next,A=Qp(g,a);A===0?(g.next=null,u===null?_h=b:u.next=b,b===null&&(Hl=u)):(u=g,(n!==0||A&3)&&(Ch=!0)),g=b}Wc(n)}function Qp(n,a){for(var u=n.suspendedLanes,g=n.pingedLanes,b=n.expirationTimes,A=n.pendingLanes&-62914561;0<A;){var M=31-Xt(A),H=1<<M,ne=b[M];ne===-1?(!(H&u)||H&g)&&(b[M]=Tr(H,a)):ne<=a&&(n.expiredLanes|=H),A&=~H}if(a=$n,u=bn,u=pr(n,n===a?u:0),g=n.callbackNode,u===0||n===a&&Jn===2||n.cancelPendingCommit!==null)return g!==null&&g!==null&&Ue(g),n.callbackNode=null,n.callbackPriority=0;if(!(u&3)||Ln(n,u)){if(a=u&-u,a===n.callbackPriority)return a;switch(g!==null&&Ue(g),tr(u)){case 2:case 8:u=at;break;case 32:u=It;break;case 268435456:u=Nn;break;default:u=It}return g=Kp.bind(null,n),u=Ye(u,g),n.callbackPriority=a,n.callbackNode=u,a}return g!==null&&g!==null&&Ue(g),n.callbackPriority=2,n.callbackNode=null,2}function Kp(n,a){var u=n.callbackNode;if(zl()&&n.callbackNode!==u)return null;var g=bn;return g=pr(n,n===$n?g:0),g===0?null:(Bp(n,g,a),Qp(n,We()),n.callbackNode!=null&&n.callbackNode===u?Kp.bind(null,n):null)}function Zp(n,a){if(zl())return null;Bp(n,a,!0)}function yv(n){Sv(function(){gr&6?Ye(et,n):n()})}function b0(){return el===0&&(el=Hn()),el}function $p(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Wr(""+n)}function Jp(n,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,n.id&&u.setAttribute("form",n.id),a.parentNode.insertBefore(u,a),n=new FormData(n),u.parentNode.removeChild(u),n}function xv(n,a,u,g,b){if(a==="submit"&&u&&u.stateNode===b){var A=$p((b[jn]||null).action),M=g.submitter;M&&(a=(a=M[jn]||null)?$p(a.formAction):M.getAttribute("formAction"),a!==null&&(A=a,M=null));var H=new ms("action","action",null,g,b);n.push({event:H,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(el!==0){var ne=M?Jp(b,M):new FormData(b);Nd(u,{pending:!0,data:ne,method:b.method,action:A},null,ne)}}else typeof A=="function"&&(H.preventDefault(),ne=M?Jp(b,M):new FormData(b),Nd(u,{pending:!0,data:ne,method:b.method,action:A},A,ne))},currentTarget:b}]})}}for(var E0=0;E0<Gu.length;E0++){var v0=Gu[E0],wv=v0.toLowerCase(),bv=v0[0].toUpperCase()+v0.slice(1);es(wv,"on"+bv)}es(hi,"onAnimationEnd"),es(Yi,"onAnimationIteration"),es(fi,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(Pn,"onTransitionRun"),es(Kr,"onTransitionStart"),es(ki,"onTransitionCancel"),es(fa,"onTransitionEnd"),bt("onMouseEnter",["mouseout","mouseover"]),bt("onMouseLeave",["mouseout","mouseover"]),bt("onPointerEnter",["pointerout","pointerover"]),bt("onPointerLeave",["pointerout","pointerover"]),ut("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ut("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ut("onBeforeInput",["compositionend","keypress","textInput","paste"]),ut("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ut("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ut("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ev=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qc));function e2(n,a){a=(a&4)!==0;for(var u=0;u<n.length;u++){var g=n[u],b=g.event;g=g.listeners;e:{var A=void 0;if(a)for(var M=g.length-1;0<=M;M--){var H=g[M],ne=H.instance,me=H.currentTarget;if(H=H.listener,ne!==A&&b.isPropagationStopped())break e;A=H,b.currentTarget=me;try{A(b)}catch(Ge){uh(Ge)}b.currentTarget=null,A=ne}else for(M=0;M<g.length;M++){if(H=g[M],ne=H.instance,me=H.currentTarget,H=H.listener,ne!==A&&b.isPropagationStopped())break e;A=H,b.currentTarget=me;try{A(b)}catch(Ge){uh(Ge)}b.currentTarget=null,A=ne}}}}function pn(n,a){var u=a[Sr];u===void 0&&(u=a[Sr]=new Set);var g=n+"__bubble";u.has(g)||(t2(a,n,2,!1),u.add(g))}function _0(n,a,u){var g=0;a&&(g|=4),t2(u,n,g,a)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function C0(n){if(!n[Ah]){n[Ah]=!0,tt.forEach(function(u){u!=="selectionchange"&&(Ev.has(u)||_0(u,!1,n),_0(u,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Ah]||(a[Ah]=!0,_0("selectionchange",!1,a))}}function t2(n,a,u,g){switch(C2(a)){case 2:var b=Xv;break;case 8:b=Wv;break;default:b=B0}u=b.bind(null,a,u,n),b=void 0,!kt||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(b=!0),g?b!==void 0?n.addEventListener(a,u,{capture:!0,passive:b}):n.addEventListener(a,u,!0):b!==void 0?n.addEventListener(a,u,{passive:b}):n.addEventListener(a,u,!1)}function A0(n,a,u,g,b){var A=g;if(!(a&1)&&!(a&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var H=g.stateNode.containerInfo;if(H===b||H.nodeType===8&&H.parentNode===b)break;if(M===4)for(M=g.return;M!==null;){var ne=M.tag;if((ne===3||ne===4)&&(ne=M.stateNode.containerInfo,ne===b||ne.nodeType===8&&ne.parentNode===b))return;M=M.return}for(;H!==null;){if(M=K(H),M===null)return;if(ne=M.tag,ne===5||ne===6||ne===26||ne===27){g=A=M;continue e}H=H.parentNode}}g=g.return}Rt(function(){var me=A,Ge=Di(u),Je=[];e:{var Me=da.get(n);if(Me!==void 0){var ze=ms,At=n;switch(n){case"keypress":if(gs(u)===0)break e;case"keydown":case"keyup":ze=Xs;break;case"focusin":At="focus",ze=Ns;break;case"focusout":At="blur",ze=Ns;break;case"beforeblur":case"afterblur":ze=Ns;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=Fi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=An;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=Tn;break;case hi:case Yi:case fi:ze=Ga;break;case fa:ze=bl;break;case"scroll":case"scrollend":ze=Qr;break;case"wheel":ze=Hi;break;case"copy":case"cut":case"paste":ze=Gt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=Ws;break;case"toggle":case"beforetoggle":ze=El}var Qt=(a&4)!==0,_r=!Qt&&(n==="scroll"||n==="scrollend"),Ee=Qt?Me!==null?Me+"Capture":null:Me;Qt=[];for(var de=me,Ie;de!==null;){var Qe=de;if(Ie=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||Ie===null||Ee===null||(Qe=la(de,Ee),Qe!=null&&Qt.push(Kc(de,Qe,Ie))),_r)break;de=de.return}0<Qt.length&&(Me=new ze(Me,At,null,u,Ge),Je.push({event:Me,listeners:Qt}))}}if(!(a&7)){e:{if(Me=n==="mouseover"||n==="pointerover",ze=n==="mouseout"||n==="pointerout",Me&&u!==Lr&&(At=u.relatedTarget||u.fromElement)&&(K(At)||At[Mn]))break e;if((ze||Me)&&(Me=Ge.window===Ge?Ge:(Me=Ge.ownerDocument)?Me.defaultView||Me.parentWindow:window,ze?(At=u.relatedTarget||u.toElement,ze=me,At=At?K(At):null,At!==null&&(_r=Xe(At),Qt=At.tag,At!==_r||Qt!==5&&Qt!==27&&Qt!==6)&&(At=null)):(ze=null,At=me),ze!==At)){if(Qt=Fi,Qe="onMouseLeave",Ee="onMouseEnter",de="mouse",(n==="pointerout"||n==="pointerover")&&(Qt=Ws,Qe="onPointerLeave",Ee="onPointerEnter",de="pointer"),_r=ze==null?Me:V(ze),Ie=At==null?Me:V(At),Me=new Qt(Qe,de+"leave",ze,u,Ge),Me.target=_r,Me.relatedTarget=Ie,Qe=null,K(Ge)===me&&(Qt=new Qt(Ee,de+"enter",At,u,Ge),Qt.target=Ie,Qt.relatedTarget=_r,Qe=Qt),_r=Qe,ze&&At)t:{for(Qt=ze,Ee=At,de=0,Ie=Qt;Ie;Ie=Gl(Ie))de++;for(Ie=0,Qe=Ee;Qe;Qe=Gl(Qe))Ie++;for(;0<de-Ie;)Qt=Gl(Qt),de--;for(;0<Ie-de;)Ee=Gl(Ee),Ie--;for(;de--;){if(Qt===Ee||Ee!==null&&Qt===Ee.alternate)break t;Qt=Gl(Qt),Ee=Gl(Ee)}Qt=null}else Qt=null;ze!==null&&n2(Je,Me,ze,Qt,!1),At!==null&&_r!==null&&n2(Je,_r,At,Qt,!0)}}e:{if(Me=me?V(me):window,ze=Me.nodeName&&Me.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Me.type==="file")var wt=Hu;else if(cr(Me))if(Ec)wt=o;else{wt=O;var rn=_l}else ze=Me.nodeName,!ze||ze.toLowerCase()!=="input"||Me.type!=="checkbox"&&Me.type!=="radio"?me&&wn(me.elementType)&&(wt=Hu):wt=r;if(wt&&(wt=wt(n,me))){br(Je,wt,u,Ge);break e}rn&&rn(n,Me,me),n==="focusout"&&me&&Me.type==="number"&&me.memoizedProps.value!=null&&q(Me,"number",Me.value)}switch(rn=me?V(me):window,n){case"focusin":(cr(rn)||rn.contentEditable==="true")&&(Z=rn,oe=me,ce=null);break;case"focusout":ce=oe=Z=null;break;case"mousedown":Ce=!0;break;case"contextmenu":case"mouseup":case"dragend":Ce=!1,Le(Je,u,Ge);break;case"selectionchange":if(B)break;case"keydown":case"keyup":Le(Je,u,Ge)}var St;if(Gi)e:{switch(n){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else un?ke(n,u)&&(Pt="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Pt="onCompositionStart");Pt&&(D&&u.locale!=="ko"&&(un||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&un&&(St=Zi()):(hs=Ge,fs="value"in hs?hs.value:hs.textContent,un=!0)),rn=Th(me,Pt),0<rn.length&&(Pt=new qs(Pt,n,null,u,Ge),Je.push({event:Pt,listeners:rn}),St?Pt.data=St:(St=ct(u),St!==null&&(Pt.data=St)))),(St=I?rr(n,u):hn(n,u))&&(Pt=Th(me,"onBeforeInput"),0<Pt.length&&(rn=new qs("onBeforeInput","beforeinput",null,u,Ge),Je.push({event:rn,listeners:Pt}),rn.data=St)),xv(Je,n,me,u,Ge)}e2(Je,a)})}function Kc(n,a,u){return{instance:n,listener:a,currentTarget:u}}function Th(n,a){for(var u=a+"Capture",g=[];n!==null;){var b=n,A=b.stateNode;b=b.tag,b!==5&&b!==26&&b!==27||A===null||(b=la(n,u),b!=null&&g.unshift(Kc(n,b,A)),b=la(n,a),b!=null&&g.push(Kc(n,b,A))),n=n.return}return g}function Gl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function n2(n,a,u,g,b){for(var A=a._reactName,M=[];u!==null&&u!==g;){var H=u,ne=H.alternate,me=H.stateNode;if(H=H.tag,ne!==null&&ne===g)break;H!==5&&H!==26&&H!==27||me===null||(ne=me,b?(me=la(u,A),me!=null&&M.unshift(Kc(u,me,ne))):b||(me=la(u,A),me!=null&&M.push(Kc(u,me,ne)))),u=u.return}M.length!==0&&n.push({event:a,listeners:M})}var vv=/\r\n?/g,_v=/\u0000|\uFFFD/g;function r2(n){return(typeof n=="string"?n:""+n).replace(vv,`
`).replace(_v,"")}function i2(n,a){return a=r2(a),r2(n)===a}function Sh(){}function Fn(n,a,u,g,b,A){switch(u){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||Xr(n,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&Xr(n,""+g);break;case"className":ar(n,"class",g);break;case"tabIndex":ar(n,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(n,u,g);break;case"style":_t(n,g,A);break;case"data":if(a!=="object"){ar(n,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||u!=="href")){n.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=Wr(""+g),n.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(u==="formAction"?(a!=="input"&&Fn(n,a,"name",b.name,b,null),Fn(n,a,"formEncType",b.formEncType,b,null),Fn(n,a,"formMethod",b.formMethod,b,null),Fn(n,a,"formTarget",b.formTarget,b,null)):(Fn(n,a,"encType",b.encType,b,null),Fn(n,a,"method",b.method,b,null),Fn(n,a,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=Wr(""+g),n.setAttribute(u,g);break;case"onClick":g!=null&&(n.onclick=Sh);break;case"onScroll":g!=null&&pn("scroll",n);break;case"onScrollEnd":g!=null&&pn("scrollend",n);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(b.children!=null)throw Error(s(60));n.innerHTML=u}}break;case"multiple":n.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":n.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){n.removeAttribute("xlink:href");break}u=Wr(""+g),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""+g):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":g===!0?n.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,g):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?n.setAttribute(u,g):n.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?n.removeAttribute(u):n.setAttribute(u,g);break;case"popover":pn("beforetoggle",n),pn("toggle",n),Rn(n,"popover",g);break;case"xlinkActuate":fr(n,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":fr(n,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":fr(n,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":fr(n,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":fr(n,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":fr(n,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":fr(n,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":fr(n,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":fr(n,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Rn(n,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=zs.get(u)||u,Rn(n,u,g))}}function T0(n,a,u,g,b,A){switch(u){case"style":_t(n,g,A);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(b.children!=null)throw Error(s(60));n.innerHTML=u}}break;case"children":typeof g=="string"?Xr(n,g):(typeof g=="number"||typeof g=="bigint")&&Xr(n,""+g);break;case"onScroll":g!=null&&pn("scroll",n);break;case"onScrollEnd":g!=null&&pn("scrollend",n);break;case"onClick":g!=null&&(n.onclick=Sh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!he.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),a=u.slice(2,b?u.length-7:void 0),A=n[jn]||null,A=A!=null?A[u]:null,typeof A=="function"&&n.removeEventListener(a,A,b),typeof g=="function")){typeof A!="function"&&A!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(a,g,b);break e}u in n?n[u]=g:g===!0?n.setAttribute(u,""):Rn(n,u,g)}}}function mi(n,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pn("error",n),pn("load",n);var g=!1,b=!1,A;for(A in u)if(u.hasOwnProperty(A)){var M=u[A];if(M!=null)switch(A){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Fn(n,a,A,M,u,null)}}b&&Fn(n,a,"srcSet",u.srcSet,u,null),g&&Fn(n,a,"src",u.src,u,null);return;case"input":pn("invalid",n);var H=A=M=b=null,ne=null,me=null;for(g in u)if(u.hasOwnProperty(g)){var Ge=u[g];if(Ge!=null)switch(g){case"name":b=Ge;break;case"type":M=Ge;break;case"checked":ne=Ge;break;case"defaultChecked":me=Ge;break;case"value":A=Ge;break;case"defaultValue":H=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(s(137,a));break;default:Fn(n,a,g,Ge,u,null)}}be(n,A,H,ne,me,M,b,!1),Dn(n);return;case"select":pn("invalid",n),g=M=A=null;for(b in u)if(u.hasOwnProperty(b)&&(H=u[b],H!=null))switch(b){case"value":A=H;break;case"defaultValue":M=H;break;case"multiple":g=H;default:Fn(n,a,b,H,u,null)}a=A,u=M,n.multiple=!!g,a!=null?rt(n,!!g,a,!1):u!=null&&rt(n,!!g,u,!0);return;case"textarea":pn("invalid",n),A=b=g=null;for(M in u)if(u.hasOwnProperty(M)&&(H=u[M],H!=null))switch(M){case"value":g=H;break;case"defaultValue":b=H;break;case"children":A=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(91));break;default:Fn(n,a,M,H,u,null)}Gn(n,g,b,A),Dn(n);return;case"option":for(ne in u)if(u.hasOwnProperty(ne)&&(g=u[ne],g!=null))switch(ne){case"selected":n.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Fn(n,a,ne,g,u,null)}return;case"dialog":pn("cancel",n),pn("close",n);break;case"iframe":case"object":pn("load",n);break;case"video":case"audio":for(g=0;g<Qc.length;g++)pn(Qc[g],n);break;case"image":pn("error",n),pn("load",n);break;case"details":pn("toggle",n);break;case"embed":case"source":case"link":pn("error",n),pn("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in u)if(u.hasOwnProperty(me)&&(g=u[me],g!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Fn(n,a,me,g,u,null)}return;default:if(wn(a)){for(Ge in u)u.hasOwnProperty(Ge)&&(g=u[Ge],g!==void 0&&T0(n,a,Ge,g,u,void 0));return}}for(H in u)u.hasOwnProperty(H)&&(g=u[H],g!=null&&Fn(n,a,H,g,u,null))}function Cv(n,a,u,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,A=null,M=null,H=null,ne=null,me=null,Ge=null;for(ze in u){var Je=u[ze];if(u.hasOwnProperty(ze)&&Je!=null)switch(ze){case"checked":break;case"value":break;case"defaultValue":ne=Je;default:g.hasOwnProperty(ze)||Fn(n,a,ze,null,g,Je)}}for(var Me in g){var ze=g[Me];if(Je=u[Me],g.hasOwnProperty(Me)&&(ze!=null||Je!=null))switch(Me){case"type":A=ze;break;case"name":b=ze;break;case"checked":me=ze;break;case"defaultChecked":Ge=ze;break;case"value":M=ze;break;case"defaultValue":H=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(s(137,a));break;default:ze!==Je&&Fn(n,a,Me,ze,g,Je)}}vn(n,M,H,ne,me,Ge,A,b);return;case"select":ze=M=H=Me=null;for(A in u)if(ne=u[A],u.hasOwnProperty(A)&&ne!=null)switch(A){case"value":break;case"multiple":ze=ne;default:g.hasOwnProperty(A)||Fn(n,a,A,null,g,ne)}for(b in g)if(A=g[b],ne=u[b],g.hasOwnProperty(b)&&(A!=null||ne!=null))switch(b){case"value":Me=A;break;case"defaultValue":H=A;break;case"multiple":M=A;default:A!==ne&&Fn(n,a,b,A,g,ne)}a=H,u=M,g=ze,Me!=null?rt(n,!!u,Me,!1):!!g!=!!u&&(a!=null?rt(n,!!u,a,!0):rt(n,!!u,u?[]:"",!1));return;case"textarea":ze=Me=null;for(H in u)if(b=u[H],u.hasOwnProperty(H)&&b!=null&&!g.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Fn(n,a,H,null,g,b)}for(M in g)if(b=g[M],A=u[M],g.hasOwnProperty(M)&&(b!=null||A!=null))switch(M){case"value":Me=b;break;case"defaultValue":ze=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==A&&Fn(n,a,M,b,g,A)}mn(n,Me,ze);return;case"option":for(var At in u)if(Me=u[At],u.hasOwnProperty(At)&&Me!=null&&!g.hasOwnProperty(At))switch(At){case"selected":n.selected=!1;break;default:Fn(n,a,At,null,g,Me)}for(ne in g)if(Me=g[ne],ze=u[ne],g.hasOwnProperty(ne)&&Me!==ze&&(Me!=null||ze!=null))switch(ne){case"selected":n.selected=Me&&typeof Me!="function"&&typeof Me!="symbol";break;default:Fn(n,a,ne,Me,g,ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qt in u)Me=u[Qt],u.hasOwnProperty(Qt)&&Me!=null&&!g.hasOwnProperty(Qt)&&Fn(n,a,Qt,null,g,Me);for(me in g)if(Me=g[me],ze=u[me],g.hasOwnProperty(me)&&Me!==ze&&(Me!=null||ze!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(s(137,a));break;default:Fn(n,a,me,Me,g,ze)}return;default:if(wn(a)){for(var _r in u)Me=u[_r],u.hasOwnProperty(_r)&&Me!==void 0&&!g.hasOwnProperty(_r)&&T0(n,a,_r,void 0,g,Me);for(Ge in g)Me=g[Ge],ze=u[Ge],!g.hasOwnProperty(Ge)||Me===ze||Me===void 0&&ze===void 0||T0(n,a,Ge,Me,g,ze);return}}for(var Ee in u)Me=u[Ee],u.hasOwnProperty(Ee)&&Me!=null&&!g.hasOwnProperty(Ee)&&Fn(n,a,Ee,null,g,Me);for(Je in g)Me=g[Je],ze=u[Je],!g.hasOwnProperty(Je)||Me===ze||Me==null&&ze==null||Fn(n,a,Je,Me,g,ze)}var S0=null,I0=null;function Ih(n){return n.nodeType===9?n:n.ownerDocument}function s2(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a2(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function N0(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var R0=null;function Av(){var n=window.event;return n&&n.type==="popstate"?n===R0?!1:(R0=n,!0):(R0=null,!1)}var o2=typeof setTimeout=="function"?setTimeout:void 0,Tv=typeof clearTimeout=="function"?clearTimeout:void 0,l2=typeof Promise=="function"?Promise:void 0,Sv=typeof queueMicrotask=="function"?queueMicrotask:typeof l2<"u"?function(n){return l2.resolve(null).then(n).catch(Iv)}:o2;function Iv(n){setTimeout(function(){throw n})}function D0(n,a){var u=a,g=0;do{var b=u.nextSibling;if(n.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"){if(g===0){n.removeChild(b),iu(a);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=b}while(u);iu(a)}function M0(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":M0(u),us(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function Nv(n,a,u,g){for(;n.nodeType===1;){var b=u;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(g){if(!n[Yr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(A=n.getAttribute("rel"),A==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(A!==b.rel||n.getAttribute("href")!==(b.href==null?null:b.href)||n.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||n.getAttribute("title")!==(b.title==null?null:b.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(A=n.getAttribute("src"),(A!==(b.src==null?null:b.src)||n.getAttribute("type")!==(b.type==null?null:b.type)||n.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&A&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var A=b.name==null?null:""+b.name;if(b.type==="hidden"&&n.getAttribute("name")===A)return n}else return n;if(n=Os(n.nextSibling),n===null)break}return null}function Rv(n,a,u){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=Os(n.nextSibling),n===null))return null;return n}function Os(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return n}function c2(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return n;a--}else u==="/$"&&a++}n=n.previousSibling}return null}function u2(n,a,u){switch(a=Ih(u),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}var As=new Map,h2=new Set;function Nh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var Ia=Se.d;Se.d={f:Dv,r:Mv,D:Ov,C:kv,L:Lv,m:Pv,X:jv,S:Bv,M:Uv};function Dv(){var n=Ia.f(),a=Eh();return n||a}function Mv(n){var a=xe(n);a!==null&&a.tag===5&&a.type==="form"?jm(a):Ia.r(n)}var ql=typeof document>"u"?null:document;function f2(n,a,u){var g=ql;if(g&&typeof a=="string"&&a){var b=Ot(a);b='link[rel="'+n+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),h2.has(b)||(h2.add(b),n={rel:n,crossOrigin:u,href:a},g.querySelector(b)===null&&(a=g.createElement("link"),mi(a,"link",n),je(a),g.head.appendChild(a)))}}function Ov(n){Ia.D(n),f2("dns-prefetch",n,null)}function kv(n,a){Ia.C(n,a),f2("preconnect",n,a)}function Lv(n,a,u){Ia.L(n,a,u);var g=ql;if(g&&n&&a){var b='link[rel="preload"][as="'+Ot(a)+'"]';a==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+Ot(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+Ot(u.imageSizes)+'"]')):b+='[href="'+Ot(n)+'"]';var A=b;switch(a){case"style":A=Yl(n);break;case"script":A=Xl(n)}As.has(A)||(n=F({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:n,as:a},u),As.set(A,n),g.querySelector(b)!==null||a==="style"&&g.querySelector(Zc(A))||a==="script"&&g.querySelector($c(A))||(a=g.createElement("link"),mi(a,"link",n),je(a),g.head.appendChild(a)))}}function Pv(n,a){Ia.m(n,a);var u=ql;if(u&&n){var g=a&&typeof a.as=="string"?a.as:"script",b='link[rel="modulepreload"][as="'+Ot(g)+'"][href="'+Ot(n)+'"]',A=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Xl(n)}if(!As.has(A)&&(n=F({rel:"modulepreload",href:n},a),As.set(A,n),u.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($c(A)))return}g=u.createElement("link"),mi(g,"link",n),je(g),u.head.appendChild(g)}}}function Bv(n,a,u){Ia.S(n,a,u);var g=ql;if(g&&n){var b=ae(g).hoistableStyles,A=Yl(n);a=a||"default";var M=b.get(A);if(!M){var H={loading:0,preload:null};if(M=g.querySelector(Zc(A)))H.loading=5;else{n=F({rel:"stylesheet",href:n,"data-precedence":a},u),(u=As.get(A))&&O0(n,u);var ne=M=g.createElement("link");je(ne),mi(ne,"link",n),ne._p=new Promise(function(me,Ge){ne.onload=me,ne.onerror=Ge}),ne.addEventListener("load",function(){H.loading|=1}),ne.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Rh(M,a,g)}M={type:"stylesheet",instance:M,count:1,state:H},b.set(A,M)}}}function jv(n,a){Ia.X(n,a);var u=ql;if(u&&n){var g=ae(u).hoistableScripts,b=Xl(n),A=g.get(b);A||(A=u.querySelector($c(b)),A||(n=F({src:n,async:!0},a),(a=As.get(b))&&k0(n,a),A=u.createElement("script"),je(A),mi(A,"link",n),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(b,A))}}function Uv(n,a){Ia.M(n,a);var u=ql;if(u&&n){var g=ae(u).hoistableScripts,b=Xl(n),A=g.get(b);A||(A=u.querySelector($c(b)),A||(n=F({src:n,async:!0,type:"module"},a),(a=As.get(b))&&k0(n,a),A=u.createElement("script"),je(A),mi(A,"link",n),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(b,A))}}function d2(n,a,u,g){var b=(b=ft.current)?Nh(b):null;if(!b)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Yl(u.href),u=ae(b).hoistableStyles,g=u.get(a),g||(g={type:"style",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=Yl(u.href);var A=ae(b).hoistableStyles,M=A.get(n);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(n,M),(A=b.querySelector(Zc(n)))&&!A._p&&(M.instance=A,M.state.loading=5),As.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},As.set(n,u),A||Vv(b,n,u,M.state))),a&&g===null)throw Error(s(528,""));return M}if(a&&g!==null)throw Error(s(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Xl(u),u=ae(b).hoistableScripts,g=u.get(a),g||(g={type:"script",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Yl(n){return'href="'+Ot(n)+'"'}function Zc(n){return'link[rel="stylesheet"]['+n+"]"}function g2(n){return F({},n,{"data-precedence":n.precedence,precedence:null})}function Vv(n,a,u,g){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=n.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),mi(a,"link",u),je(a),n.head.appendChild(a))}function Xl(n){return'[src="'+Ot(n)+'"]'}function $c(n){return"script[async]"+n}function m2(n,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var g=n.querySelector('style[data-href~="'+Ot(u.href)+'"]');if(g)return a.instance=g,je(g),g;var b=F({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(n.ownerDocument||n).createElement("style"),je(g),mi(g,"style",b),Rh(g,u.precedence,n),a.instance=g;case"stylesheet":b=Yl(u.href);var A=n.querySelector(Zc(b));if(A)return a.state.loading|=4,a.instance=A,je(A),A;g=g2(u),(b=As.get(b))&&O0(g,b),A=(n.ownerDocument||n).createElement("link"),je(A);var M=A;return M._p=new Promise(function(H,ne){M.onload=H,M.onerror=ne}),mi(A,"link",g),a.state.loading|=4,Rh(A,u.precedence,n),a.instance=A;case"script":return A=Xl(u.src),(b=n.querySelector($c(A)))?(a.instance=b,je(b),b):(g=u,(b=As.get(A))&&(g=F({},u),k0(g,b)),n=n.ownerDocument||n,b=n.createElement("script"),je(b),mi(b,"link",g),n.head.appendChild(b),a.instance=b);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&!(a.state.loading&4)&&(g=a.instance,a.state.loading|=4,Rh(g,u.precedence,n));return a.instance}function Rh(n,a,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,A=b,M=0;M<g.length;M++){var H=g[M];if(H.dataset.precedence===a)A=H;else if(A!==b)break}A?A.parentNode.insertBefore(n,A.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(n,a.firstChild))}function O0(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function k0(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Dh=null;function p2(n,a,u){if(Dh===null){var g=new Map,b=Dh=new Map;b.set(u,g)}else b=Dh,g=b.get(u),g||(g=new Map,b.set(u,g));if(g.has(n))return g;for(g.set(n,null),u=u.getElementsByTagName(n),b=0;b<u.length;b++){var A=u[b];if(!(A[Yr]||A[Cn]||n==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var M=A.getAttribute(a)||"";M=n+M;var H=g.get(M);H?H.push(A):g.set(M,[A])}}return g}function y2(n,a,u){n=n.ownerDocument||n,n.head.insertBefore(u,a==="title"?n.querySelector("head > title"):null)}function Fv(n,a,u){if(u===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function x2(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var Jc=null;function zv(){}function Hv(n,a,u){if(Jc===null)throw Error(s(475));var g=Jc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&!(a.state.loading&4)){if(a.instance===null){var b=Yl(u.href),A=n.querySelector(Zc(b));if(A){n=A._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(g.count++,g=Mh.bind(g),n.then(g,g)),a.state.loading|=4,a.instance=A,je(A);return}A=n.ownerDocument||n,u=g2(u),(b=As.get(b))&&O0(u,b),A=A.createElement("link"),je(A);var M=A;M._p=new Promise(function(H,ne){M.onload=H,M.onerror=ne}),mi(A,"link",u),a.instance=A}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(a,n),(n=a.state.preload)&&!(a.state.loading&3)&&(g.count++,a=Mh.bind(g),n.addEventListener("load",a),n.addEventListener("error",a))}}function Gv(){if(Jc===null)throw Error(s(475));var n=Jc;return n.stylesheets&&n.count===0&&L0(n,n.stylesheets),0<n.count?function(a){var u=setTimeout(function(){if(n.stylesheets&&L0(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)L0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Oh=null;function L0(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Oh=new Map,a.forEach(qv,n),Oh=null,Mh.call(n))}function qv(n,a){if(!(a.state.loading&4)){var u=Oh.get(n);if(u)var g=u.get(null);else{u=new Map,Oh.set(n,u);for(var b=n.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<b.length;A++){var M=b[A];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),g=M)}g&&u.set(null,g)}b=a.instance,M=b.getAttribute("data-precedence"),A=u.get(M)||g,A===g&&u.set(null,b),u.set(M,b),this.count++,g=Mh.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),A?A.parentNode.insertBefore(b,A.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(b,n.firstChild)),a.state.loading|=4}}var eu={$$typeof:U,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function Yv(n,a,u,g,b,A,M,H){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=A,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function w2(n,a,u,g,b,A,M,H,ne,me,Ge,Je){return n=new Yv(n,a,u,M,H,ne,me,Je),a=1,A===!0&&(a|=24),A=_s(3,null,null,a),n.current=A,A.stateNode=n,a=dd(),a.refCount++,n.pooledCache=a,a.refCount++,A.memoizedState={element:g,isDehydrated:u,cache:a},Xd(A),n}function b2(n){return n?(n=Al,n):Al}function E2(n,a,u,g,b,A){b=b2(b),g.context===null?g.context=b:g.pendingContext=b,g=eo(a),g.payload={element:u},A=A===void 0?null:A,A!==null&&(g.callback=A),u=to(n,g,a),u!==null&&(Pi(u,n,a),Bc(u,n,a))}function v2(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<a?u:a}}function P0(n,a){v2(n,a),(n=n.alternate)&&v2(n,a)}function _2(n){if(n.tag===13){var a=Xa(n,67108864);a!==null&&Pi(a,n,67108864),P0(n,67108864)}}var kh=!0;function Xv(n,a,u,g){var b=L.T;L.T=null;var A=Se.p;try{Se.p=2,B0(n,a,u,g)}finally{Se.p=A,L.T=b}}function Wv(n,a,u,g){var b=L.T;L.T=null;var A=Se.p;try{Se.p=8,B0(n,a,u,g)}finally{Se.p=A,L.T=b}}function B0(n,a,u,g){if(kh){var b=j0(g);if(b===null)A0(n,a,g,Lh,u),A2(n,g);else if(Kv(b,n,a,u,g))g.stopPropagation();else if(A2(n,g),a&4&&-1<Qv.indexOf(n)){for(;b!==null;){var A=xe(b);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var M=qr(A.pendingLanes);if(M!==0){var H=A;for(H.pendingLanes|=2,H.entangledLanes|=2;M;){var ne=1<<31-Xt(M);H.entanglements[1]|=ne,M&=~ne}Js(A),!(gr&6)&&(xh=We()+500,Wc(0))}}break;case 13:H=Xa(A,2),H!==null&&Pi(H,A,2),Eh(),P0(A,2)}if(A=j0(g),A===null&&A0(n,a,g,Lh,u),A===b)break;b=A}b!==null&&g.stopPropagation()}else A0(n,a,g,null,u)}}function j0(n){return n=Di(n),U0(n)}var Lh=null;function U0(n){if(Lh=null,n=K(n),n!==null){var a=Xe(n);if(a===null)n=null;else{var u=a.tag;if(u===13){if(n=ht(a),n!==null)return n;n=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Lh=n,null}function C2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Et()){case et:return 2;case at:return 8;case It:case sn:return 32;case Nn:return 268435456;default:return 32}default:return 32}}var V0=!1,lo=null,co=null,uo=null,tu=new Map,nu=new Map,ho=[],Qv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A2(n,a){switch(n){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":tu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(a.pointerId)}}function ru(n,a,u,g,b,A){return n===null||n.nativeEvent!==A?(n={blockedOn:a,domEventName:u,eventSystemFlags:g,nativeEvent:A,targetContainers:[b]},a!==null&&(a=xe(a),a!==null&&_2(a)),n):(n.eventSystemFlags|=g,a=n.targetContainers,b!==null&&a.indexOf(b)===-1&&a.push(b),n)}function Kv(n,a,u,g,b){switch(a){case"focusin":return lo=ru(lo,n,a,u,g,b),!0;case"dragenter":return co=ru(co,n,a,u,g,b),!0;case"mouseover":return uo=ru(uo,n,a,u,g,b),!0;case"pointerover":var A=b.pointerId;return tu.set(A,ru(tu.get(A)||null,n,a,u,g,b)),!0;case"gotpointercapture":return A=b.pointerId,nu.set(A,ru(nu.get(A)||null,n,a,u,g,b)),!0}return!1}function T2(n){var a=K(n.target);if(a!==null){var u=Xe(a);if(u!==null){if(a=u.tag,a===13){if(a=ht(u),a!==null){n.blockedOn=a,Zn(n.priority,function(){if(u.tag===13){var g=is(),b=Xa(u,g);b!==null&&Pi(b,u,g),P0(u,g)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ph(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var u=j0(n.nativeEvent);if(u===null){u=n.nativeEvent;var g=new u.constructor(u.type,u);Lr=g,u.target.dispatchEvent(g),Lr=null}else return a=xe(u),a!==null&&_2(a),n.blockedOn=u,!1;a.shift()}return!0}function S2(n,a,u){Ph(n)&&u.delete(a)}function Zv(){V0=!1,lo!==null&&Ph(lo)&&(lo=null),co!==null&&Ph(co)&&(co=null),uo!==null&&Ph(uo)&&(uo=null),tu.forEach(S2),nu.forEach(S2)}function Bh(n,a){n.blockedOn===a&&(n.blockedOn=null,V0||(V0=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Zv)))}var jh=null;function I2(n){jh!==n&&(jh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){jh===n&&(jh=null);for(var a=0;a<n.length;a+=3){var u=n[a],g=n[a+1],b=n[a+2];if(typeof g!="function"){if(U0(g||u)===null)continue;break}var A=xe(u);A!==null&&(n.splice(a,3),a-=3,Nd(A,{pending:!0,data:b,method:u.method,action:g},g,b))}}))}function iu(n){function a(ne){return Bh(ne,n)}lo!==null&&Bh(lo,n),co!==null&&Bh(co,n),uo!==null&&Bh(uo,n),tu.forEach(a),nu.forEach(a);for(var u=0;u<ho.length;u++){var g=ho[u];g.blockedOn===n&&(g.blockedOn=null)}for(;0<ho.length&&(u=ho[0],u.blockedOn===null);)T2(u),u.blockedOn===null&&ho.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var b=u[g],A=u[g+1],M=b[jn]||null;if(typeof A=="function")M||I2(u);else if(M){var H=null;if(A&&A.hasAttribute("formAction")){if(b=A,M=A[jn]||null)H=M.formAction;else if(U0(b)!==null)continue}else H=M.action;typeof H=="function"?u[g+1]=H:(u.splice(g,3),g-=3),I2(u)}}}function F0(n){this._internalRoot=n}Uh.prototype.render=F0.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var u=a.current,g=is();E2(u,g,n,a,null,null)},Uh.prototype.unmount=F0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;n.tag===0&&zl(),E2(n.current,2,null,n,null,null),Eh(),a[Mn]=null}};function Uh(n){this._internalRoot=n}Uh.prototype.unstable_scheduleHydration=function(n){if(n){var a=ci();n={blockedOn:null,target:n,priority:a};for(var u=0;u<ho.length&&a!==0&&a<ho[u].priority;u++);ho.splice(u,0,n),u===0&&T2(n)}};var N2=e.version;if(N2!=="19.0.0")throw Error(s(527,N2,"19.0.0"));Se.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=ge(a),n=n!==null?Re(n):null,n=n===null?null:n.stateNode,n};var $v={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:L,findFiberByHostInstance:K,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{Jt=Vh.inject($v),He=Vh}catch{}}return au.createRoot=function(n,a){if(!c(n))throw Error(s(299));var u=!1,g="",b=Ym,A=Xm,M=Wm,H=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(b=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(M=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(H=a.unstable_transitionCallbacks)),a=w2(n,1,!1,null,null,u,g,b,A,M,H,null),n[Mn]=a.current,C0(n.nodeType===8?n.parentNode:n),new F0(a)},au.hydrateRoot=function(n,a,u){if(!c(n))throw Error(s(299));var g=!1,b="",A=Ym,M=Xm,H=Wm,ne=null,me=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(H=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ne=u.unstable_transitionCallbacks),u.formState!==void 0&&(me=u.formState)),a=w2(n,1,!0,a,u??null,g,b,A,M,H,ne,me),a.context=b2(null),u=a.current,g=is(),b=eo(g),b.callback=null,to(u,b,g),a.current.lanes=g,an(a,g),Js(a),n[Mn]=a.current,C0(n),new Uh(a)},au.version="19.0.0",au}var U2;function c_(){if(U2)return G0.exports;U2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),G0.exports=l_(),G0.exports}var u_=c_();const h_=Of(u_);var ou={},V2;function f_(){if(V2)return ou;V2=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.parse=y,ou.serialize=w;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,c=Object.prototype.toString,h=(()=>{const P=function(){};return P.prototype=Object.create(null),P})();function y(P,U){const X=new h,re=P.length;if(re<2)return X;const Y=(U==null?void 0:U.decode)||S;let ye=0;do{const ue=P.indexOf("=",ye);if(ue===-1)break;const se=P.indexOf(";",ye),fe=se===-1?re:se;if(ue>fe){ye=P.lastIndexOf(";",ue-1)+1;continue}const we=_(P,ye,ue),Pe=E(P,ue,we),z=P.slice(we,Pe);if(X[z]===void 0){let j=_(P,ue+1,fe),L=E(P,fe,j);const F=Y(P.slice(j,L));X[z]=F}ye=fe+1}while(ye<re);return X}function _(P,U,X){do{const re=P.charCodeAt(U);if(re!==32&&re!==9)return U}while(++U<X);return X}function E(P,U,X){for(;U>X;){const re=P.charCodeAt(--U);if(re!==32&&re!==9)return U+1}return X}function w(P,U,X){const re=(X==null?void 0:X.encode)||encodeURIComponent;if(!i.test(P))throw new TypeError(`argument name is invalid: ${P}`);const Y=re(U);if(!e.test(Y))throw new TypeError(`argument val is invalid: ${U}`);let ye=P+"="+Y;if(!X)return ye;if(X.maxAge!==void 0){if(!Number.isInteger(X.maxAge))throw new TypeError(`option maxAge is invalid: ${X.maxAge}`);ye+="; Max-Age="+X.maxAge}if(X.domain){if(!t.test(X.domain))throw new TypeError(`option domain is invalid: ${X.domain}`);ye+="; Domain="+X.domain}if(X.path){if(!s.test(X.path))throw new TypeError(`option path is invalid: ${X.path}`);ye+="; Path="+X.path}if(X.expires){if(!N(X.expires)||!Number.isFinite(X.expires.valueOf()))throw new TypeError(`option expires is invalid: ${X.expires}`);ye+="; Expires="+X.expires.toUTCString()}if(X.httpOnly&&(ye+="; HttpOnly"),X.secure&&(ye+="; Secure"),X.partitioned&&(ye+="; Partitioned"),X.priority)switch(typeof X.priority=="string"?X.priority.toLowerCase():void 0){case"low":ye+="; Priority=Low";break;case"medium":ye+="; Priority=Medium";break;case"high":ye+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${X.priority}`)}if(X.sameSite)switch(typeof X.sameSite=="string"?X.sameSite.toLowerCase():X.sameSite){case!0:case"strict":ye+="; SameSite=Strict";break;case"lax":ye+="; SameSite=Lax";break;case"none":ye+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${X.sameSite}`)}return ye}function S(P){if(P.indexOf("%")===-1)return P;try{return decodeURIComponent(P)}catch{return P}}function N(P){return c.call(P)==="[object Date]"}return ou}f_();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var F2="popstate";function d_(i={}){function e(c,h){let{pathname:y="/",search:_="",hash:E=""}=fl(c.location.hash.substring(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),c1("",{pathname:y,search:_,hash:E},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function t(c,h){let y=c.document.querySelector("base"),_="";if(y&&y.getAttribute("href")){let E=c.location.href,w=E.indexOf("#");_=w===-1?E:E.slice(0,w)}return _+"#"+(typeof h=="string"?h:bu(h))}function s(c,h){cs(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(h)})`)}return m_(e,t,s,i)}function ur(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function cs(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g_(){return Math.random().toString(36).substring(2,10)}function z2(i,e){return{usr:i.state,key:i.key,idx:e}}function c1(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?fl(e):e,state:t,key:e&&e.key||s||g_()}}function bu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function fl(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function m_(i,e,t,s={}){let{window:c=document.defaultView,v5Compat:h=!1}=s,y=c.history,_="POP",E=null,w=S();w==null&&(w=0,y.replaceState({...y.state,idx:w},""));function S(){return(y.state||{idx:null}).idx}function N(){_="POP";let Y=S(),ye=Y==null?null:Y-w;w=Y,E&&E({action:_,location:re.location,delta:ye})}function P(Y,ye){_="PUSH";let ue=c1(re.location,Y,ye);t&&t(ue,Y),w=S()+1;let se=z2(ue,w),fe=re.createHref(ue);try{y.pushState(se,"",fe)}catch(we){if(we instanceof DOMException&&we.name==="DataCloneError")throw we;c.location.assign(fe)}h&&E&&E({action:_,location:re.location,delta:1})}function U(Y,ye){_="REPLACE";let ue=c1(re.location,Y,ye);t&&t(ue,Y),w=S();let se=z2(ue,w),fe=re.createHref(ue);y.replaceState(se,"",fe),h&&E&&E({action:_,location:re.location,delta:0})}function X(Y){let ye=c.location.origin!=="null"?c.location.origin:c.location.href,ue=typeof Y=="string"?Y:bu(Y);return ue=ue.replace(/ $/,"%20"),ur(ye,`No window.location.(origin|href) available to create URL for href: ${ue}`),new URL(ue,ye)}let re={get action(){return _},get location(){return i(c,y)},listen(Y){if(E)throw new Error("A history only accepts one active listener");return c.addEventListener(F2,N),E=Y,()=>{c.removeEventListener(F2,N),E=null}},createHref(Y){return e(c,Y)},createURL:X,encodeLocation(Y){let ye=X(Y);return{pathname:ye.pathname,search:ye.search,hash:ye.hash}},push:P,replace:U,go(Y){return y.go(Y)}};return re}function Ux(i,e,t="/"){return p_(i,e,t,!1)}function p_(i,e,t,s){let c=typeof e=="string"?fl(e):e,h=Ao(c.pathname||"/",t);if(h==null)return null;let y=Vx(i);y_(y);let _=null;for(let E=0;_==null&&E<y.length;++E){let w=I_(h);_=T_(y[E],w,s)}return _}function Vx(i,e=[],t=[],s=""){let c=(h,y,_)=>{let E={relativePath:_===void 0?h.path||"":_,caseSensitive:h.caseSensitive===!0,childrenIndex:y,route:h};E.relativePath.startsWith("/")&&(ur(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length));let w=ka([s,E.relativePath]),S=t.concat(E);h.children&&h.children.length>0&&(ur(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Vx(h.children,e,S,w)),!(h.path==null&&!h.index)&&e.push({path:w,score:C_(w,h.index),routesMeta:S})};return i.forEach((h,y)=>{var _;if(h.path===""||!((_=h.path)!=null&&_.includes("?")))c(h,y);else for(let E of Fx(h.path))c(h,y,E)}),e}function Fx(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,c=t.endsWith("?"),h=t.replace(/\?$/,"");if(s.length===0)return c?[h,""]:[h];let y=Fx(s.join("/")),_=[];return _.push(...y.map(E=>E===""?h:[h,E].join("/"))),c&&_.push(...y),_.map(E=>i.startsWith("/")&&E===""?"/":E)}function y_(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:A_(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var x_=/^:[\w-]+$/,w_=3,b_=2,E_=1,v_=10,__=-2,H2=i=>i==="*";function C_(i,e){let t=i.split("/"),s=t.length;return t.some(H2)&&(s+=__),e&&(s+=b_),t.filter(c=>!H2(c)).reduce((c,h)=>c+(x_.test(h)?w_:h===""?E_:v_),s)}function A_(i,e){return i.length===e.length&&i.slice(0,-1).every((s,c)=>s===e[c])?i[i.length-1]-e[e.length-1]:0}function T_(i,e,t=!1){let{routesMeta:s}=i,c={},h="/",y=[];for(let _=0;_<s.length;++_){let E=s[_],w=_===s.length-1,S=h==="/"?e:e.slice(h.length)||"/",N=cf({path:E.relativePath,caseSensitive:E.caseSensitive,end:w},S),P=E.route;if(!N&&w&&t&&!s[s.length-1].route.index&&(N=cf({path:E.relativePath,caseSensitive:E.caseSensitive,end:!1},S)),!N)return null;Object.assign(c,N.params),y.push({params:c,pathname:ka([h,N.pathname]),pathnameBase:M_(ka([h,N.pathnameBase])),route:P}),N.pathnameBase!=="/"&&(h=ka([h,N.pathnameBase]))}return y}function cf(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=S_(i.path,i.caseSensitive,i.end),c=e.match(t);if(!c)return null;let h=c[0],y=h.replace(/(.)\/+$/,"$1"),_=c.slice(1);return{params:s.reduce((w,{paramName:S,isOptional:N},P)=>{if(S==="*"){let X=_[P]||"";y=h.slice(0,h.length-X.length).replace(/(.)\/+$/,"$1")}const U=_[P];return N&&!U?w[S]=void 0:w[S]=(U||"").replace(/%2F/g,"/"),w},{}),pathname:h,pathnameBase:y,pattern:i}}function S_(i,e=!1,t=!0){cs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],c="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,_,E)=>(s.push({paramName:_,isOptional:E!=null}),E?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),c+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":i!==""&&i!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),s]}function I_(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ao(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function N_(i,e="/"){let{pathname:t,search:s="",hash:c=""}=typeof i=="string"?fl(i):i;return{pathname:t?t.startsWith("/")?t:R_(t,e):e,search:O_(s),hash:k_(c)}}function R_(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function W0(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function D_(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function V1(i){let e=D_(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function F1(i,e,t,s=!1){let c;typeof i=="string"?c=fl(i):(c={...i},ur(!c.pathname||!c.pathname.includes("?"),W0("?","pathname","search",c)),ur(!c.pathname||!c.pathname.includes("#"),W0("#","pathname","hash",c)),ur(!c.search||!c.search.includes("#"),W0("#","search","hash",c)));let h=i===""||c.pathname==="",y=h?"/":c.pathname,_;if(y==null)_=t;else{let N=e.length-1;if(!s&&y.startsWith("..")){let P=y.split("/");for(;P[0]==="..";)P.shift(),N-=1;c.pathname=P.join("/")}_=N>=0?e[N]:"/"}let E=N_(c,_),w=y&&y!=="/"&&y.endsWith("/"),S=(h||y===".")&&t.endsWith("/");return!E.pathname.endsWith("/")&&(w||S)&&(E.pathname+="/"),E}var ka=i=>i.join("/").replace(/\/\/+/g,"/"),M_=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),O_=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,k_=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function L_(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var zx=["POST","PUT","PATCH","DELETE"];new Set(zx);var P_=["GET",...zx];new Set(P_);var dc=ie.createContext(null);dc.displayName="DataRouter";var Lf=ie.createContext(null);Lf.displayName="DataRouterState";var Hx=ie.createContext({isTransitioning:!1});Hx.displayName="ViewTransition";var B_=ie.createContext(new Map);B_.displayName="Fetchers";var j_=ie.createContext(null);j_.displayName="Await";var js=ie.createContext(null);js.displayName="Navigation";var Ru=ie.createContext(null);Ru.displayName="Location";var Us=ie.createContext({outlet:null,matches:[],isDataRoute:!1});Us.displayName="Route";var z1=ie.createContext(null);z1.displayName="RouteError";function U_(i,{relative:e}={}){ur(gc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=ie.useContext(js),{hash:c,pathname:h,search:y}=Du(i,{relative:e}),_=h;return t!=="/"&&(_=h==="/"?t:ka([t,h])),s.createHref({pathname:_,search:y,hash:c})}function gc(){return ie.useContext(Ru)!=null}function Va(){return ur(gc(),"useLocation() may be used only in the context of a <Router> component."),ie.useContext(Ru).location}var Gx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qx(i){ie.useContext(js).static||ie.useLayoutEffect(i)}function Vs(){let{isDataRoute:i}=ie.useContext(Us);return i?$_():V_()}function V_(){ur(gc(),"useNavigate() may be used only in the context of a <Router> component.");let i=ie.useContext(dc),{basename:e,navigator:t}=ie.useContext(js),{matches:s}=ie.useContext(Us),{pathname:c}=Va(),h=JSON.stringify(V1(s)),y=ie.useRef(!1);return qx(()=>{y.current=!0}),ie.useCallback((E,w={})=>{if(cs(y.current,Gx),!y.current)return;if(typeof E=="number"){t.go(E);return}let S=F1(E,JSON.parse(h),c,w.relative==="path");i==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:ka([e,S.pathname])),(w.replace?t.replace:t.push)(S,w.state,w)},[e,t,h,c,i])}ie.createContext(null);function H1(){let{matches:i}=ie.useContext(Us),e=i[i.length-1];return e?e.params:{}}function Du(i,{relative:e}={}){let{matches:t}=ie.useContext(Us),{pathname:s}=Va(),c=JSON.stringify(V1(t));return ie.useMemo(()=>F1(i,JSON.parse(c),s,e==="path"),[i,c,s,e])}function F_(i,e){return Yx(i,e)}function Yx(i,e,t,s){var ue;ur(gc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c,static:h}=ie.useContext(js),{matches:y}=ie.useContext(Us),_=y[y.length-1],E=_?_.params:{},w=_?_.pathname:"/",S=_?_.pathnameBase:"/",N=_&&_.route;{let se=N&&N.path||"";Xx(w,!N||se.endsWith("*")||se.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${se}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${se}"> to <Route path="${se==="/"?"*":`${se}/*`}">.`)}let P=Va(),U;if(e){let se=typeof e=="string"?fl(e):e;ur(S==="/"||((ue=se.pathname)==null?void 0:ue.startsWith(S)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${se.pathname}" was given in the \`location\` prop.`),U=se}else U=P;let X=U.pathname||"/",re=X;if(S!=="/"){let se=S.replace(/^\//,"").split("/");re="/"+X.replace(/^\//,"").split("/").slice(se.length).join("/")}let Y=!h&&t&&t.matches&&t.matches.length>0?t.matches:Ux(i,{pathname:re});cs(N||Y!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),cs(Y==null||Y[Y.length-1].route.element!==void 0||Y[Y.length-1].route.Component!==void 0||Y[Y.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ye=Y_(Y&&Y.map(se=>Object.assign({},se,{params:Object.assign({},E,se.params),pathname:ka([S,c.encodeLocation?c.encodeLocation(se.pathname).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?S:ka([S,c.encodeLocation?c.encodeLocation(se.pathnameBase).pathname:se.pathnameBase])})),y,t,s);return e&&ye?ie.createElement(Ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},ye):ye}function z_(){let i=Z_(),e=L_(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},y=null;return console.error("Error handled by React Router default ErrorBoundary:",i),y=ie.createElement(ie.Fragment,null,ie.createElement("p",null,"💿 Hey developer 👋"),ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ie.createElement("code",{style:h},"ErrorBoundary")," or"," ",ie.createElement("code",{style:h},"errorElement")," prop on your route.")),ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},e),t?ie.createElement("pre",{style:c},t):null,y)}var H_=ie.createElement(z_,null),G_=class extends ie.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?ie.createElement(Us.Provider,{value:this.props.routeContext},ie.createElement(z1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q_({routeContext:i,match:e,children:t}){let s=ie.useContext(dc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),ie.createElement(Us.Provider,{value:i},t)}function Y_(i,e=[],t=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let c=i,h=t==null?void 0:t.errors;if(h!=null){let E=c.findIndex(w=>w.route.id&&(h==null?void 0:h[w.route.id])!==void 0);ur(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,E+1))}let y=!1,_=-1;if(t)for(let E=0;E<c.length;E++){let w=c[E];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(_=E),w.route.id){let{loaderData:S,errors:N}=t,P=w.route.loader&&!S.hasOwnProperty(w.route.id)&&(!N||N[w.route.id]===void 0);if(w.route.lazy||P){y=!0,_>=0?c=c.slice(0,_+1):c=[c[0]];break}}}return c.reduceRight((E,w,S)=>{let N,P=!1,U=null,X=null;t&&(N=h&&w.route.id?h[w.route.id]:void 0,U=w.route.errorElement||H_,y&&(_<0&&S===0?(Xx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,X=null):_===S&&(P=!0,X=w.route.hydrateFallbackElement||null)));let re=e.concat(c.slice(0,S+1)),Y=()=>{let ye;return N?ye=U:P?ye=X:w.route.Component?ye=ie.createElement(w.route.Component,null):w.route.element?ye=w.route.element:ye=E,ie.createElement(q_,{match:w,routeContext:{outlet:E,matches:re,isDataRoute:t!=null},children:ye})};return t&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?ie.createElement(G_,{location:t.location,revalidation:t.revalidation,component:U,error:N,children:Y(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):Y()},null)}function G1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X_(i){let e=ie.useContext(dc);return ur(e,G1(i)),e}function W_(i){let e=ie.useContext(Lf);return ur(e,G1(i)),e}function Q_(i){let e=ie.useContext(Us);return ur(e,G1(i)),e}function q1(i){let e=Q_(i),t=e.matches[e.matches.length-1];return ur(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function K_(){return q1("useRouteId")}function Z_(){var s;let i=ie.useContext(z1),e=W_("useRouteError"),t=q1("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[t]}function $_(){let{router:i}=X_("useNavigate"),e=q1("useNavigate"),t=ie.useRef(!1);return qx(()=>{t.current=!0}),ie.useCallback(async(c,h={})=>{cs(t.current,Gx),t.current&&(typeof c=="number"?i.navigate(c):await i.navigate(c,{fromRouteId:e,...h}))},[i,e])}var G2={};function Xx(i,e,t){!e&&!G2[i]&&(G2[i]=!0,cs(!1,t))}ie.memo(J_);function J_({routes:i,future:e,state:t}){return Yx(i,void 0,t,e)}function eC({to:i,replace:e,state:t,relative:s}){ur(gc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=ie.useContext(js);cs(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=ie.useContext(Us),{pathname:y}=Va(),_=Vs(),E=F1(i,V1(h),y,s==="path"),w=JSON.stringify(E);return ie.useEffect(()=>{_(JSON.parse(w),{replace:e,state:t,relative:s})},[_,w,s,e,t]),null}function ea(i){ur(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tC({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:c,static:h=!1}){ur(!gc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=i.replace(/^\/*/,"/"),_=ie.useMemo(()=>({basename:y,navigator:c,static:h,future:{}}),[y,c,h]);typeof t=="string"&&(t=fl(t));let{pathname:E="/",search:w="",hash:S="",state:N=null,key:P="default"}=t,U=ie.useMemo(()=>{let X=Ao(E,y);return X==null?null:{location:{pathname:X,search:w,hash:S,state:N,key:P},navigationType:s}},[y,E,w,S,N,P,s]);return cs(U!=null,`<Router basename="${y}"> is not able to match the URL "${E}${w}${S}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:ie.createElement(js.Provider,{value:_},ie.createElement(Ru.Provider,{children:e,value:U}))}function nC({children:i,location:e}){return F_(u1(i),e)}function u1(i,e=[]){let t=[];return ie.Children.forEach(i,(s,c)=>{if(!ie.isValidElement(s))return;let h=[...e,c];if(s.type===ie.Fragment){t.push.apply(t,u1(s.props.children,h));return}ur(s.type===ea,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ur(!s.props.index||!s.props.children,"An index route cannot have child routes.");let y={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(y.children=u1(s.props.children,h)),t.push(y)}),t}var Qh="get",Kh="application/x-www-form-urlencoded";function Pf(i){return i!=null&&typeof i.tagName=="string"}function rC(i){return Pf(i)&&i.tagName.toLowerCase()==="button"}function iC(i){return Pf(i)&&i.tagName.toLowerCase()==="form"}function sC(i){return Pf(i)&&i.tagName.toLowerCase()==="input"}function aC(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function oC(i,e){return i.button===0&&(!e||e==="_self")&&!aC(i)}function h1(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let s=i[t];return e.concat(Array.isArray(s)?s.map(c=>[t,c]):[[t,s]])},[]))}function lC(i,e){let t=h1(i);return e&&e.forEach((s,c)=>{t.has(c)||e.getAll(c).forEach(h=>{t.append(c,h)})}),t}var zh=null;function cC(){if(zh===null)try{new FormData(document.createElement("form"),0),zh=!1}catch{zh=!0}return zh}var uC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Q0(i){return i!=null&&!uC.has(i)?(cs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kh}"`),null):i}function hC(i,e){let t,s,c,h,y;if(iC(i)){let _=i.getAttribute("action");s=_?Ao(_,e):null,t=i.getAttribute("method")||Qh,c=Q0(i.getAttribute("enctype"))||Kh,h=new FormData(i)}else if(rC(i)||sC(i)&&(i.type==="submit"||i.type==="image")){let _=i.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let E=i.getAttribute("formaction")||_.getAttribute("action");if(s=E?Ao(E,e):null,t=i.getAttribute("formmethod")||_.getAttribute("method")||Qh,c=Q0(i.getAttribute("formenctype"))||Q0(_.getAttribute("enctype"))||Kh,h=new FormData(_,i),!cC()){let{name:w,type:S,value:N}=i;if(S==="image"){let P=w?`${w}.`:"";h.append(`${P}x`,"0"),h.append(`${P}y`,"0")}else w&&h.append(w,N)}}else{if(Pf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qh,s=null,c=Kh,y=i}return h&&c==="text/plain"&&(y=h,h=void 0),{action:s,method:t.toLowerCase(),encType:c,formData:h,body:y}}function Y1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function fC(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dC(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function gC(i,e,t){let s=await Promise.all(i.map(async c=>{let h=e.routes[c.route.id];if(h){let y=await fC(h,t);return y.links?y.links():[]}return[]}));return xC(s.flat(1).filter(dC).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function q2(i,e,t,s,c,h){let y=(E,w)=>t[w]?E.route.id!==t[w].route.id:!0,_=(E,w)=>{var S;return t[w].pathname!==E.pathname||((S=t[w].route.path)==null?void 0:S.endsWith("*"))&&t[w].params["*"]!==E.params["*"]};return h==="assets"?e.filter((E,w)=>y(E,w)||_(E,w)):h==="data"?e.filter((E,w)=>{var N;let S=s.routes[E.route.id];if(!S||!S.hasLoader)return!1;if(y(E,w)||_(E,w))return!0;if(E.route.shouldRevalidate){let P=E.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((N=t[0])==null?void 0:N.params)||{},nextUrl:new URL(i,window.origin),nextParams:E.params,defaultShouldRevalidate:!0});if(typeof P=="boolean")return P}return!0}):[]}function mC(i,e){return pC(i.map(t=>{let s=e.routes[t.route.id];if(!s)return[];let c=[s.module];return s.imports&&(c=c.concat(s.imports)),c}).flat(1))}function pC(i){return[...new Set(i)]}function yC(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function xC(i,e){let t=new Set;return new Set(e),i.reduce((s,c)=>{let h=JSON.stringify(yC(c));return t.has(h)||(t.add(h),s.push({key:h,link:c})),s},[])}function wC(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function bC(){let i=ie.useContext(dc);return Y1(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function EC(){let i=ie.useContext(Lf);return Y1(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var X1=ie.createContext(void 0);X1.displayName="FrameworkContext";function Wx(){let i=ie.useContext(X1);return Y1(i,"You must render this element inside a <HydratedRouter> element"),i}function vC(i,e){let t=ie.useContext(X1),[s,c]=ie.useState(!1),[h,y]=ie.useState(!1),{onFocus:_,onBlur:E,onMouseEnter:w,onMouseLeave:S,onTouchStart:N}=e,P=ie.useRef(null);ie.useEffect(()=>{if(i==="render"&&y(!0),i==="viewport"){let re=ye=>{ye.forEach(ue=>{y(ue.isIntersecting)})},Y=new IntersectionObserver(re,{threshold:.5});return P.current&&Y.observe(P.current),()=>{Y.disconnect()}}},[i]),ie.useEffect(()=>{if(s){let re=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(re)}}},[s]);let U=()=>{c(!0)},X=()=>{c(!1),y(!1)};return t?i!=="intent"?[h,P,{}]:[h,P,{onFocus:lu(_,U),onBlur:lu(E,X),onMouseEnter:lu(w,U),onMouseLeave:lu(S,X),onTouchStart:lu(N,U)}]:[!1,P,{}]}function lu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function _C({page:i,...e}){let{router:t}=bC(),s=ie.useMemo(()=>Ux(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?ie.createElement(AC,{page:i,matches:s,...e}):null}function CC(i){let{manifest:e,routeModules:t}=Wx(),[s,c]=ie.useState([]);return ie.useEffect(()=>{let h=!1;return gC(i,e,t).then(y=>{h||c(y)}),()=>{h=!0}},[i,e,t]),s}function AC({page:i,matches:e,...t}){let s=Va(),{manifest:c,routeModules:h}=Wx(),{loaderData:y,matches:_}=EC(),E=ie.useMemo(()=>q2(i,e,_,c,s,"data"),[i,e,_,c,s]),w=ie.useMemo(()=>q2(i,e,_,c,s,"assets"),[i,e,_,c,s]),S=ie.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let U=new Set,X=!1;if(e.forEach(Y=>{var ue;let ye=c.routes[Y.route.id];!ye||!ye.hasLoader||(!E.some(se=>se.route.id===Y.route.id)&&Y.route.id in y&&((ue=h[Y.route.id])!=null&&ue.shouldRevalidate)||ye.hasClientLoader?X=!0:U.add(Y.route.id))}),U.size===0)return[];let re=wC(i);return X&&U.size>0&&re.searchParams.set("_routes",e.filter(Y=>U.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[re.pathname+re.search]},[y,s,c,E,e,i,h]),N=ie.useMemo(()=>mC(w,c),[w,c]),P=CC(w);return ie.createElement(ie.Fragment,null,S.map(U=>ie.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...t})),N.map(U=>ie.createElement("link",{key:U,rel:"modulepreload",href:U,...t})),P.map(({key:U,link:X})=>ie.createElement("link",{key:U,...X})))}function TC(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Qx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Qx&&(window.__reactRouterVersion="7.1.5")}catch{}function SC({basename:i,children:e,window:t}){let s=ie.useRef();s.current==null&&(s.current=d_({window:t,v5Compat:!0}));let c=s.current,[h,y]=ie.useState({action:c.action,location:c.location}),_=ie.useCallback(E=>{ie.startTransition(()=>y(E))},[y]);return ie.useLayoutEffect(()=>c.listen(_),[c,_]),ie.createElement(tC,{basename:i,children:e,location:h.location,navigationType:h.action,navigator:c})}var Kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zx=ie.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:c,reloadDocument:h,replace:y,state:_,target:E,to:w,preventScrollReset:S,viewTransition:N,...P},U){let{basename:X}=ie.useContext(js),re=typeof w=="string"&&Kx.test(w),Y,ye=!1;if(typeof w=="string"&&re&&(Y=w,Qx))try{let L=new URL(window.location.href),F=w.startsWith("//")?new URL(L.protocol+w):new URL(w),J=Ao(F.pathname,X);F.origin===L.origin&&J!=null?w=J+F.search+F.hash:ye=!0}catch{cs(!1,`<Link to="${w}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ue=U_(w,{relative:c}),[se,fe,we]=vC(s,P),Pe=DC(w,{replace:y,state:_,target:E,preventScrollReset:S,relative:c,viewTransition:N});function z(L){e&&e(L),L.defaultPrevented||Pe(L)}let j=ie.createElement("a",{...P,...we,href:Y||ue,onClick:ye||h?e:z,ref:TC(U,fe),target:E,"data-discover":!re&&t==="render"?"true":void 0});return se&&!re?ie.createElement(ie.Fragment,null,j,ie.createElement(_C,{page:ue})):j});Zx.displayName="Link";var IC=ie.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:c=!1,style:h,to:y,viewTransition:_,children:E,...w},S){let N=Du(y,{relative:w.relative}),P=Va(),U=ie.useContext(Lf),{navigator:X,basename:re}=ie.useContext(js),Y=U!=null&&BC(N)&&_===!0,ye=X.encodeLocation?X.encodeLocation(N).pathname:N.pathname,ue=P.pathname,se=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;t||(ue=ue.toLowerCase(),se=se?se.toLowerCase():null,ye=ye.toLowerCase()),se&&re&&(se=Ao(se,re)||se);const fe=ye!=="/"&&ye.endsWith("/")?ye.length-1:ye.length;let we=ue===ye||!c&&ue.startsWith(ye)&&ue.charAt(fe)==="/",Pe=se!=null&&(se===ye||!c&&se.startsWith(ye)&&se.charAt(ye.length)==="/"),z={isActive:we,isPending:Pe,isTransitioning:Y},j=we?e:void 0,L;typeof s=="function"?L=s(z):L=[s,we?"active":null,Pe?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let F=typeof h=="function"?h(z):h;return ie.createElement(Zx,{...w,"aria-current":j,className:L,ref:S,style:F,to:y,viewTransition:_},typeof E=="function"?E(z):E)});IC.displayName="NavLink";var NC=ie.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:c,state:h,method:y=Qh,action:_,onSubmit:E,relative:w,preventScrollReset:S,viewTransition:N,...P},U)=>{let X=LC(),re=PC(_,{relative:w}),Y=y.toLowerCase()==="get"?"get":"post",ye=typeof _=="string"&&Kx.test(_),ue=se=>{if(E&&E(se),se.defaultPrevented)return;se.preventDefault();let fe=se.nativeEvent.submitter,we=(fe==null?void 0:fe.getAttribute("formmethod"))||y;X(fe||se.currentTarget,{fetcherKey:e,method:we,navigate:t,replace:c,state:h,relative:w,preventScrollReset:S,viewTransition:N})};return ie.createElement("form",{ref:U,method:Y,action:re,onSubmit:s?E:ue,...P,"data-discover":!ye&&i==="render"?"true":void 0})});NC.displayName="Form";function RC(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $x(i){let e=ie.useContext(dc);return ur(e,RC(i)),e}function DC(i,{target:e,replace:t,state:s,preventScrollReset:c,relative:h,viewTransition:y}={}){let _=Vs(),E=Va(),w=Du(i,{relative:h});return ie.useCallback(S=>{if(oC(S,e)){S.preventDefault();let N=t!==void 0?t:bu(E)===bu(w);_(i,{replace:N,state:s,preventScrollReset:c,relative:h,viewTransition:y})}},[E,_,w,t,s,e,i,c,h,y])}function MC(i){cs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=ie.useRef(h1(i)),t=ie.useRef(!1),s=Va(),c=ie.useMemo(()=>lC(s.search,t.current?null:e.current),[s.search]),h=Vs(),y=ie.useCallback((_,E)=>{const w=h1(typeof _=="function"?_(c):_);t.current=!0,h("?"+w,E)},[h,c]);return[c,y]}var OC=0,kC=()=>`__${String(++OC)}__`;function LC(){let{router:i}=$x("useSubmit"),{basename:e}=ie.useContext(js),t=K_();return ie.useCallback(async(s,c={})=>{let{action:h,method:y,encType:_,formData:E,body:w}=hC(s,e);if(c.navigate===!1){let S=c.fetcherKey||kC();await i.fetch(S,t,c.action||h,{preventScrollReset:c.preventScrollReset,formData:E,body:w,formMethod:c.method||y,formEncType:c.encType||_,flushSync:c.flushSync})}else await i.navigate(c.action||h,{preventScrollReset:c.preventScrollReset,formData:E,body:w,formMethod:c.method||y,formEncType:c.encType||_,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,e,t])}function PC(i,{relative:e}={}){let{basename:t}=ie.useContext(js),s=ie.useContext(Us);ur(s,"useFormAction must be used inside a RouteContext");let[c]=s.matches.slice(-1),h={...Du(i||".",{relative:e})},y=Va();if(i==null){h.search=y.search;let _=new URLSearchParams(h.search),E=_.getAll("index");if(E.some(S=>S==="")){_.delete("index"),E.filter(N=>N).forEach(N=>_.append("index",N));let S=_.toString();h.search=S?`?${S}`:""}}return(!i||i===".")&&c.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(h.pathname=h.pathname==="/"?t:ka([t,h.pathname])),bu(h)}function BC(i,e={}){let t=ie.useContext(Hx);ur(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=$x("useViewTransitionState"),c=Du(i,{relative:e.relative});if(!t.isTransitioning)return!1;let h=Ao(t.currentLocation.pathname,s)||t.currentLocation.pathname,y=Ao(t.nextLocation.pathname,s)||t.nextLocation.pathname;return cf(c.pathname,y)!=null||cf(c.pathname,h)!=null}new TextEncoder;var Y2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let c=i.charCodeAt(s);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(c=65536+((c&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},jC=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const c=i[t++];if(c<128)e[s++]=String.fromCharCode(c);else if(c>191&&c<224){const h=i[t++];e[s++]=String.fromCharCode((c&31)<<6|h&63)}else if(c>239&&c<365){const h=i[t++],y=i[t++],_=i[t++],E=((c&7)<<18|(h&63)<<12|(y&63)<<6|_&63)-65536;e[s++]=String.fromCharCode(55296+(E>>10)),e[s++]=String.fromCharCode(56320+(E&1023))}else{const h=i[t++],y=i[t++];e[s++]=String.fromCharCode((c&15)<<12|(h&63)<<6|y&63)}}return e.join("")},ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let c=0;c<i.length;c+=3){const h=i[c],y=c+1<i.length,_=y?i[c+1]:0,E=c+2<i.length,w=E?i[c+2]:0,S=h>>2,N=(h&3)<<4|_>>4;let P=(_&15)<<2|w>>6,U=w&63;E||(U=64,y||(P=64)),s.push(t[S],t[N],t[P],t[U])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Jx(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):jC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let c=0;c<i.length;){const h=t[i.charAt(c++)],_=c<i.length?t[i.charAt(c)]:0;++c;const w=c<i.length?t[i.charAt(c)]:64;++c;const N=c<i.length?t[i.charAt(c)]:64;if(++c,h==null||_==null||w==null||N==null)throw new UC;const P=h<<2|_>>4;if(s.push(P),w!==64){const U=_<<4&240|w>>2;if(s.push(U),N!==64){const X=w<<6&192|N;s.push(X)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class UC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VC=function(i){const e=Jx(i);return ew.encodeByteArray(e,!0)},uf=function(i){return VC(i).replace(/\./g,"")},tw=function(i){try{return ew.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=()=>FC().__FIREBASE_DEFAULTS__,HC=()=>{if(typeof process>"u"||typeof Y2>"u")return;const i=Y2.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},GC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&tw(i[1]);return e&&JSON.parse(e)},Bf=()=>{try{return zC()||HC()||GC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},nw=i=>{var e,t;return(t=(e=Bf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},qC=i=>{const e=nw(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},rw=()=>{var i;return(i=Bf())===null||i===void 0?void 0:i.config},iw=i=>{var e;return(e=Bf())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",c=i.iat||0,h=i.sub||i.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:c,exp:c+3600,auth_time:c,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}}},i);return[uf(JSON.stringify(t)),uf(JSON.stringify(y)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ri())}function QC(){var i;const e=(i=Bf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZC(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function $C(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JC(){const i=Ri();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function eA(){return!QC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tA(){try{return typeof indexedDB=="object"}catch{return!1}}function nA(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(s);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{var h;e(((h=c.error)===null||h===void 0?void 0:h.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="FirebaseError";class Fa extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=rA,Object.setPrototypeOf(this,Fa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mu.prototype.create)}}class Mu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},c=`${this.service}/${e}`,h=this.errors[e],y=h?iA(h,s):"Error",_=`${this.serviceName}: ${y} (${c}).`;return new Fa(c,_,s)}}function iA(i,e){return i.replace(sA,(t,s)=>{const c=e[s];return c!=null?String(c):`<${s}?>`})}const sA=/\{\$([^}]+)}/g;function aA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function hf(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const c of t){if(!s.includes(c))return!1;const h=i[c],y=e[c];if(X2(h)&&X2(y)){if(!hf(h,y))return!1}else if(h!==y)return!1}for(const c of s)if(!t.includes(c))return!1;return!0}function X2(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function oA(i,e){const t=new lA(i,e);return t.subscribe.bind(t)}class lA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let c;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");cA(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:s},c.next===void 0&&(c.next=K0),c.error===void 0&&(c.error=K0),c.complete===void 0&&(c.complete=K0);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),h}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cA(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function K0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(i){return i&&i._delegate?i._delegate:i}class al{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new YC;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&s.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),c=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(h){if(c)return null;throw h}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fA(e))try{this.getOrInitializeService({instanceIdentifier:tl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const h=this.getOrInitializeService({instanceIdentifier:c});s.resolve(h)}catch{}}}}clearInstance(e=tl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tl){return this.instances.has(e)}getOptions(e=tl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[h,y]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(h);s===_&&y.resolve(c)}return c}onInit(e,t){var s;const c=this.normalizeInstanceIdentifier(t),h=(s=this.onInitCallbacks.get(c))!==null&&s!==void 0?s:new Set;h.add(e),this.onInitCallbacks.set(c,h);const y=this.instances.get(c);return y&&e(y,c),()=>{h.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const c of s)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:hA(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=tl){return this.component?this.component.multipleInstances?e:tl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hA(i){return i===tl?void 0:i}function fA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(dn||(dn={}));const gA={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},mA=dn.INFO,pA={[dn.DEBUG]:"log",[dn.VERBOSE]:"log",[dn.INFO]:"info",[dn.WARN]:"warn",[dn.ERROR]:"error"},yA=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),c=pA[e];if(c)console[c](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class W1{constructor(e){this.name=e,this._logLevel=mA,this._logHandler=yA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dn.DEBUG,...e),this._logHandler(this,dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dn.VERBOSE,...e),this._logHandler(this,dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dn.INFO,...e),this._logHandler(this,dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dn.WARN,...e),this._logHandler(this,dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dn.ERROR,...e),this._logHandler(this,dn.ERROR,...e)}}const xA=(i,e)=>e.some(t=>i instanceof t);let W2,Q2;function wA(){return W2||(W2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bA(){return Q2||(Q2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sw=new WeakMap,f1=new WeakMap,aw=new WeakMap,Z0=new WeakMap,Q1=new WeakMap;function EA(i){const e=new Promise((t,s)=>{const c=()=>{i.removeEventListener("success",h),i.removeEventListener("error",y)},h=()=>{t(bo(i.result)),c()},y=()=>{s(i.error),c()};i.addEventListener("success",h),i.addEventListener("error",y)});return e.then(t=>{t instanceof IDBCursor&&sw.set(t,i)}).catch(()=>{}),Q1.set(e,i),e}function vA(i){if(f1.has(i))return;const e=new Promise((t,s)=>{const c=()=>{i.removeEventListener("complete",h),i.removeEventListener("error",y),i.removeEventListener("abort",y)},h=()=>{t(),c()},y=()=>{s(i.error||new DOMException("AbortError","AbortError")),c()};i.addEventListener("complete",h),i.addEventListener("error",y),i.addEventListener("abort",y)});f1.set(i,e)}let d1={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return f1.get(i);if(e==="objectStoreNames")return i.objectStoreNames||aw.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bo(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function _A(i){d1=i(d1)}function CA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call($0(this),e,...t);return aw.set(s,e.sort?e.sort():[e]),bo(s)}:bA().includes(i)?function(...e){return i.apply($0(this),e),bo(sw.get(this))}:function(...e){return bo(i.apply($0(this),e))}}function AA(i){return typeof i=="function"?CA(i):(i instanceof IDBTransaction&&vA(i),xA(i,wA())?new Proxy(i,d1):i)}function bo(i){if(i instanceof IDBRequest)return EA(i);if(Z0.has(i))return Z0.get(i);const e=AA(i);return e!==i&&(Z0.set(i,e),Q1.set(e,i)),e}const $0=i=>Q1.get(i);function TA(i,e,{blocked:t,upgrade:s,blocking:c,terminated:h}={}){const y=indexedDB.open(i,e),_=bo(y);return s&&y.addEventListener("upgradeneeded",E=>{s(bo(y.result),E.oldVersion,E.newVersion,bo(y.transaction),E)}),t&&y.addEventListener("blocked",E=>t(E.oldVersion,E.newVersion,E)),_.then(E=>{h&&E.addEventListener("close",()=>h()),c&&E.addEventListener("versionchange",w=>c(w.oldVersion,w.newVersion,w))}).catch(()=>{}),_}const SA=["get","getKey","getAll","getAllKeys","count"],IA=["put","add","delete","clear"],J0=new Map;function K2(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(J0.get(e))return J0.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,c=IA.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(c||SA.includes(t)))return;const h=async function(y,..._){const E=this.transaction(y,c?"readwrite":"readonly");let w=E.store;return s&&(w=w.index(_.shift())),(await Promise.all([w[t](..._),c&&E.done]))[0]};return J0.set(e,h),h}_A(i=>({...i,get:(e,t,s)=>K2(e,t)||i.get(e,t,s),has:(e,t)=>!!K2(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RA(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function RA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const g1="@firebase/app",Z2="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new W1("@firebase/app"),DA="@firebase/app-compat",MA="@firebase/analytics-compat",OA="@firebase/analytics",kA="@firebase/app-check-compat",LA="@firebase/app-check",PA="@firebase/auth",BA="@firebase/auth-compat",jA="@firebase/database",UA="@firebase/data-connect",VA="@firebase/database-compat",FA="@firebase/functions",zA="@firebase/functions-compat",HA="@firebase/installations",GA="@firebase/installations-compat",qA="@firebase/messaging",YA="@firebase/messaging-compat",XA="@firebase/performance",WA="@firebase/performance-compat",QA="@firebase/remote-config",KA="@firebase/remote-config-compat",ZA="@firebase/storage",$A="@firebase/storage-compat",JA="@firebase/firestore",eT="@firebase/vertexai",tT="@firebase/firestore-compat",nT="firebase",rT="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="[DEFAULT]",iT={[g1]:"fire-core",[DA]:"fire-core-compat",[OA]:"fire-analytics",[MA]:"fire-analytics-compat",[LA]:"fire-app-check",[kA]:"fire-app-check-compat",[PA]:"fire-auth",[BA]:"fire-auth-compat",[jA]:"fire-rtdb",[UA]:"fire-data-connect",[VA]:"fire-rtdb-compat",[FA]:"fire-fn",[zA]:"fire-fn-compat",[HA]:"fire-iid",[GA]:"fire-iid-compat",[qA]:"fire-fcm",[YA]:"fire-fcm-compat",[XA]:"fire-perf",[WA]:"fire-perf-compat",[QA]:"fire-rc",[KA]:"fire-rc-compat",[ZA]:"fire-gcs",[$A]:"fire-gcs-compat",[JA]:"fire-fst",[tT]:"fire-fst-compat",[eT]:"fire-vertex","fire-js":"fire-js",[nT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Map,sT=new Map,p1=new Map;function $2(i,e){try{i.container.addComponent(e)}catch(t){Pa.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ic(i){const e=i.name;if(p1.has(e))return Pa.debug(`There were multiple attempts to register component ${e}.`),!1;p1.set(e,i);for(const t of ff.values())$2(t,i);for(const t of sT.values())$2(t,i);return!0}function K1(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ls(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Eo=new Mu("app","Firebase",aT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new al("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=rT;function ow(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:m1,automaticDataCollectionEnabled:!1},e),c=s.name;if(typeof c!="string"||!c)throw Eo.create("bad-app-name",{appName:String(c)});if(t||(t=rw()),!t)throw Eo.create("no-options");const h=ff.get(c);if(h){if(hf(t,h.options)&&hf(s,h.config))return h;throw Eo.create("duplicate-app",{appName:c})}const y=new dA(c);for(const E of p1.values())y.addComponent(E);const _=new oT(t,s,y);return ff.set(c,_),_}function lw(i=m1){const e=ff.get(i);if(!e&&i===m1&&rw())return ow();if(!e)throw Eo.create("no-app",{appName:i});return e}function vo(i,e,t){var s;let c=(s=iT[i])!==null&&s!==void 0?s:i;t&&(c+=`-${t}`);const h=c.match(/\s|\//),y=e.match(/\s|\//);if(h||y){const _=[`Unable to register library "${c}" with version "${e}":`];h&&_.push(`library name "${c}" contains illegal characters (whitespace or "/")`),h&&y&&_.push("and"),y&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pa.warn(_.join(" "));return}ic(new al(`${c}-version`,()=>({library:c,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firebase-heartbeat-database",cT=1,Eu="firebase-heartbeat-store";let e1=null;function cw(){return e1||(e1=TA(lT,cT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Eu)}catch(t){console.warn(t)}}}}).catch(i=>{throw Eo.create("idb-open",{originalErrorMessage:i.message})})),e1}async function uT(i){try{const t=(await cw()).transaction(Eu),s=await t.objectStore(Eu).get(uw(i));return await t.done,s}catch(e){if(e instanceof Fa)Pa.warn(e.message);else{const t=Eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pa.warn(t.message)}}}async function J2(i,e){try{const s=(await cw()).transaction(Eu,"readwrite");await s.objectStore(Eu).put(e,uw(i)),await s.done}catch(t){if(t instanceof Fa)Pa.warn(t.message);else{const s=Eo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Pa.warn(s.message)}}}function uw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=1024,fT=30;class dT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mT(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=ey();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(y=>y.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:c}),this._heartbeatsCache.heartbeats.length>fT){const y=pT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(y,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Pa.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ey(),{heartbeatsToSend:s,unsentEntries:c}=gT(this._heartbeatsCache.heartbeats),h=uf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(t){return Pa.warn(t),""}}}function ey(){return new Date().toISOString().substring(0,10)}function gT(i,e=hT){const t=[];let s=i.slice();for(const c of i){const h=t.find(y=>y.agent===c.agent);if(h){if(h.dates.push(c.date),ty(t)>e){h.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),ty(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class mT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tA()?nA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return J2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return J2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...e.heartbeats]})}else return}}function ty(i){return uf(JSON.stringify({version:2,heartbeats:i})).length}function pT(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(i){ic(new al("platform-logger",e=>new NA(e),"PRIVATE")),ic(new al("heartbeat",e=>new dT(e),"PRIVATE")),vo(g1,Z2,i),vo(g1,Z2,"esm2017"),vo("fire-js","")}yT("");function Z1(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(i);c<s.length;c++)e.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(i,s[c])&&(t[s[c]]=i[s[c]]);return t}function hw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xT=hw,fw=new Mu("auth","Firebase",hw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new W1("@firebase/auth");function wT(i,...e){df.logLevel<=dn.WARN&&df.warn(`Auth (${mc}): ${i}`,...e)}function Zh(i,...e){df.logLevel<=dn.ERROR&&df.error(`Auth (${mc}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(i,...e){throw J1(i,...e)}function Ps(i,...e){return J1(i,...e)}function $1(i,e,t){const s=Object.assign(Object.assign({},xT()),{[e]:t});return new Mu("auth","Firebase",s).create(e,{appName:i.name})}function il(i){return $1(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bT(i,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&aa(i,"argument-error"),$1(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function J1(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return fw.create(i,...e)}function qt(i,e,...t){if(!i)throw J1(e,...t)}function Ra(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Zh(e),new Error(e)}function Ba(i,e){i||Ra(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function ET(){return ny()==="http:"||ny()==="https:"}function ny(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ET()||ZC()||"connection"in navigator)?navigator.onLine:!0}function _T(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ba(t>e,"Short delay should be less than long delay!"),this.isMobile=WC()||$C()}get(){return vT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(i,e){Ba(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new ku(3e4,6e4);function tg(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Oo(i,e,t,s,c={}){return gw(i,c,async()=>{let h={},y={};s&&(e==="GET"?y=s:h={body:JSON.stringify(s)});const _=Ou(Object.assign({key:i.config.apiKey},y)).slice(1),E=await i._getAdditionalHeaders();E["Content-Type"]="application/json",i.languageCode&&(E["X-Firebase-Locale"]=i.languageCode);const w=Object.assign({method:e,headers:E},h);return KC()||(w.referrerPolicy="no-referrer"),dw.fetch()(mw(i,i.config.apiHost,t,_),w)})}async function gw(i,e,t){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},CT),e);try{const c=new ST(i),h=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const y=await h.json();if("needConfirmation"in y)throw Hh(i,"account-exists-with-different-credential",y);if(h.ok&&!("errorMessage"in y))return y;{const _=h.ok?y.errorMessage:y.error.message,[E,w]=_.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(i,"credential-already-in-use",y);if(E==="EMAIL_EXISTS")throw Hh(i,"email-already-in-use",y);if(E==="USER_DISABLED")throw Hh(i,"user-disabled",y);const S=s[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw $1(i,S,w);aa(i,S)}}catch(c){if(c instanceof Fa)throw c;aa(i,"network-request-failed",{message:String(c)})}}async function TT(i,e,t,s,c={}){const h=await Oo(i,e,t,s,c);return"mfaPendingCredential"in h&&aa(i,"multi-factor-auth-required",{_serverResponse:h}),h}function mw(i,e,t,s){const c=`${e}${t}?${s}`;return i.config.emulator?eg(i.config,c):`${i.config.apiScheme}://${c}`}class ST{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ps(this.auth,"network-request-failed")),AT.get())})}}function Hh(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const c=Ps(i,e,s);return c.customData._tokenResponse=t,c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(i,e){return Oo(i,"POST","/v1/accounts:delete",e)}async function pw(i,e){return Oo(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NT(i,e=!1){const t=ni(i),s=await t.getIdToken(e),c=ng(s);qt(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const h=typeof c.firebase=="object"?c.firebase:void 0,y=h==null?void 0:h.sign_in_provider;return{claims:c,token:s,authTime:mu(t1(c.auth_time)),issuedAtTime:mu(t1(c.iat)),expirationTime:mu(t1(c.exp)),signInProvider:y||null,signInSecondFactor:(h==null?void 0:h.sign_in_second_factor)||null}}function t1(i){return Number(i)*1e3}function ng(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const c=tw(t);return c?JSON.parse(c):(Zh("Failed to decode base64 JWT payload"),null)}catch(c){return Zh("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function ry(i){const e=ng(i);return qt(e,"internal-error"),qt(typeof e.exp<"u","internal-error"),qt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Fa&&RT(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function RT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const c=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,c)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(i){var e;const t=i.auth,s=await i.getIdToken(),c=await ol(i,pw(t,{idToken:s}));qt(c==null?void 0:c.users.length,t,"internal-error");const h=c.users[0];i._notifyReloadListener(h);const y=!((e=h.providerUserInfo)===null||e===void 0)&&e.length?yw(h.providerUserInfo):[],_=OT(i.providerData,y),E=i.isAnonymous,w=!(i.email&&h.passwordHash)&&!(_!=null&&_.length),S=E?w:!1,N={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:_,metadata:new x1(h.createdAt,h.lastLoginAt),isAnonymous:S};Object.assign(i,N)}async function MT(i){const e=ni(i);await gf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OT(i,e){return[...i.filter(s=>!e.some(c=>c.providerId===s.providerId)),...e]}function yw(i){return i.map(e=>{var{providerId:t}=e,s=Z1(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT(i,e){const t=await gw(i,{},async()=>{const s=Ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:h}=i.config,y=mw(i,c,"/v1/token",`key=${h}`),_=await i._getAdditionalHeaders();return _["Content-Type"]="application/x-www-form-urlencoded",dw.fetch()(y,{method:"POST",headers:_,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LT(i,e){return Oo(i,"POST","/v2/accounts:revokeToken",tg(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qt(e.idToken,"internal-error"),qt(typeof e.idToken<"u","internal-error"),qt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ry(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qt(e.length!==0,"internal-error");const t=ry(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:c,expiresIn:h}=await kT(e,t);this.updateTokensAndExpiration(s,c,Number(h))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:c,expirationTime:h}=t,y=new ec;return s&&(qt(typeof s=="string","internal-error",{appName:e}),y.refreshToken=s),c&&(qt(typeof c=="string","internal-error",{appName:e}),y.accessToken=c),h&&(qt(typeof h=="number","internal-error",{appName:e}),y.expirationTime=h),y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ec,this.toJSON())}_performRefresh(){return Ra("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(i,e){qt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Da{constructor(e){var{uid:t,auth:s,stsTokenManager:c}=e,h=Z1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new x1(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const t=await ol(this,this.stsTokenManager.getToken(this.auth,e));return qt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return NT(this,e)}reload(){return MT(this)}_assign(e){this!==e&&(qt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Da(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await gf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ls(this.auth.app))return Promise.reject(il(this.auth));const e=await this.getIdToken();return await ol(this,IT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,c,h,y,_,E,w,S;const N=(s=t.displayName)!==null&&s!==void 0?s:void 0,P=(c=t.email)!==null&&c!==void 0?c:void 0,U=(h=t.phoneNumber)!==null&&h!==void 0?h:void 0,X=(y=t.photoURL)!==null&&y!==void 0?y:void 0,re=(_=t.tenantId)!==null&&_!==void 0?_:void 0,Y=(E=t._redirectEventId)!==null&&E!==void 0?E:void 0,ye=(w=t.createdAt)!==null&&w!==void 0?w:void 0,ue=(S=t.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:se,emailVerified:fe,isAnonymous:we,providerData:Pe,stsTokenManager:z}=t;qt(se&&z,e,"internal-error");const j=ec.fromJSON(this.name,z);qt(typeof se=="string",e,"internal-error"),go(N,e.name),go(P,e.name),qt(typeof fe=="boolean",e,"internal-error"),qt(typeof we=="boolean",e,"internal-error"),go(U,e.name),go(X,e.name),go(re,e.name),go(Y,e.name),go(ye,e.name),go(ue,e.name);const L=new Da({uid:se,auth:e,email:P,emailVerified:fe,displayName:N,isAnonymous:we,photoURL:X,phoneNumber:U,tenantId:re,stsTokenManager:j,createdAt:ye,lastLoginAt:ue});return Pe&&Array.isArray(Pe)&&(L.providerData=Pe.map(F=>Object.assign({},F))),Y&&(L._redirectEventId=Y),L}static async _fromIdTokenResponse(e,t,s=!1){const c=new ec;c.updateFromServerResponse(t);const h=new Da({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:s});return await gf(h),h}static async _fromGetAccountInfoResponse(e,t,s){const c=t.users[0];qt(c.localId!==void 0,"internal-error");const h=c.providerUserInfo!==void 0?yw(c.providerUserInfo):[],y=!(c.email&&c.passwordHash)&&!(h!=null&&h.length),_=new ec;_.updateFromIdToken(s);const E=new Da({uid:c.localId,auth:e,stsTokenManager:_,isAnonymous:y}),w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:h,metadata:new x1(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(h!=null&&h.length)};return Object.assign(E,w),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=new Map;function Ma(i){Ba(i instanceof Function,"Expected a class definition");let e=iy.get(i);return e?(Ba(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,iy.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xw.type="NONE";const sy=xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(i,e,t){return`firebase:${i}:${e}:${t}`}class tc{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:c,name:h}=this.auth;this.fullUserKey=$h(this.userKey,c.apiKey,h),this.fullPersistenceKey=$h("persistence",c.apiKey,h),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Da._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new tc(Ma(sy),e,s);const c=(await Promise.all(t.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let h=c[0]||Ma(sy);const y=$h(s,e.config.apiKey,e.name);let _=null;for(const w of t)try{const S=await w._get(y);if(S){const N=Da._fromJSON(e,S);w!==h&&(_=N),h=w;break}}catch{}const E=c.filter(w=>w._shouldAllowMigration);return!h._shouldAllowMigration||!E.length?new tc(h,e,s):(h=E[0],_&&await h._set(y,_.toJSON()),await Promise.all(t.map(async w=>{if(w!==h)try{await w._remove(y)}catch{}})),new tc(h,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ww(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cw(e))return"Blackberry";if(Aw(e))return"Webos";if(bw(e))return"Safari";if((e.includes("chrome/")||Ew(e))&&!e.includes("edge/"))return"Chrome";if(_w(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ww(i=Ri()){return/firefox\//i.test(i)}function bw(i=Ri()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ew(i=Ri()){return/crios\//i.test(i)}function vw(i=Ri()){return/iemobile/i.test(i)}function _w(i=Ri()){return/android/i.test(i)}function Cw(i=Ri()){return/blackberry/i.test(i)}function Aw(i=Ri()){return/webos/i.test(i)}function rg(i=Ri()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function PT(i=Ri()){var e;return rg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BT(){return JC()&&document.documentMode===10}function Tw(i=Ri()){return rg(i)||_w(i)||Aw(i)||Cw(i)||/windows phone/i.test(i)||vw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(i,e=[]){let t;switch(i){case"Browser":t=ay(Ri());break;case"Worker":t=`${ay(Ri())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=h=>new Promise((y,_)=>{try{const E=e(h);y(E)}catch(E){_(E)}});s.onAbort=t,this.queue.push(s);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT(i,e={}){return Oo(i,"GET","/v2/passwordPolicy",tg(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=6;class FT{constructor(e){var t,s,c,h;const y=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=y.minPasswordLength)!==null&&t!==void 0?t:VT,y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=y.maxPasswordLength),y.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=y.containsLowercaseCharacter),y.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=y.containsUppercaseCharacter),y.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=y.containsNumericCharacter),y.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=y.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(c=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&c!==void 0?c:"",this.forceUpgradeOnSignin=(h=e.forceUpgradeOnSignin)!==null&&h!==void 0?h:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,c,h,y,_;const E={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,E),this.validatePasswordCharacterOptions(e,E),E.isValid&&(E.isValid=(t=E.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),E.isValid&&(E.isValid=(s=E.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),E.isValid&&(E.isValid=(c=E.containsLowercaseLetter)!==null&&c!==void 0?c:!0),E.isValid&&(E.isValid=(h=E.containsUppercaseLetter)!==null&&h!==void 0?h:!0),E.isValid&&(E.isValid=(y=E.containsNumericCharacter)!==null&&y!==void 0?y:!0),E.isValid&&(E.isValid=(_=E.containsNonAlphanumericCharacter)!==null&&_!==void 0?_:!0),E}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let c=0;c<e.length;c++)s=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,c,h){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t,s,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oy(this),this.idTokenSubscription=new oy(this),this.beforeStateQueue=new jT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ma(t)),this._initializationPromise=this.queue(async()=>{var s,c;if(!this._deleted&&(this.persistenceManager=await tc.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pw(this,{idToken:e}),s=await Da._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ls(this.app)){const y=this.app.settings.authIdToken;return y?new Promise(_=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(y).then(_,_))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let c=s,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const y=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,_=c==null?void 0:c._redirectEventId,E=await this.tryRedirectSignIn(e);(!y||y===_)&&(E!=null&&E.user)&&(c=E.user,h=!0)}if(!c)return this.directlySetCurrentUser(null);if(!c._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(c)}catch(y){c=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(y))}return c?this.reloadAndSetCurrentUserOrClear(c):this.directlySetCurrentUser(null)}return qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===c._redirectEventId?this.directlySetCurrentUser(c):this.reloadAndSetCurrentUserOrClear(c)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_T()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ls(this.app))return Promise.reject(il(this));const t=e?ni(e):null;return t&&qt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ls(this.app)?Promise.reject(il(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ls(this.app)?Promise.reject(il(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ma(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UT(this),t=new FT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await LT(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ma(e)||this._popupRedirectResolver;qt(t,this,"argument-error"),this.redirectPersistenceManager=await tc.create(this,[Ma(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,c){if(this._deleted)return()=>{};const h=typeof t=="function"?t:t.next.bind(t);let y=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(qt(_,this,"internal-error"),_.then(()=>{y||h(this.currentUser)}),typeof t=="function"){const E=e.addObserver(t,s,c);return()=>{y=!0,E()}}else{const E=e.addObserver(t);return()=>{y=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const c=await this._getAppCheckToken();return c&&(t["X-Firebase-AppCheck"]=c),t}async _getAppCheckToken(){var e;if(Ls(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&wT(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function jf(i){return ni(i)}class oy{constructor(e){this.auth=e,this.observer=null,this.addObserver=oA(t=>this.observer=t)}get next(){return qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HT(i){ig=i}function GT(i){return ig.loadJS(i)}function qT(){return ig.gapiScript}function YT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(i,e){const t=K1(i,"auth");if(t.isInitialized()){const c=t.getImmediate(),h=t.getOptions();if(hf(h,e??{}))return c;aa(c,"already-initialized")}return t.initialize({options:e})}function WT(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Ma);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function QT(i,e,t){const s=jf(i);qt(s._canInitEmulator,s,"emulator-config-failed"),qt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const c=!1,h=Iw(e),{host:y,port:_}=KT(e),E=_===null?"":`:${_}`;s.config.emulator={url:`${h}//${y}${E}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:y,port:_,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:c})}),ZT()}function Iw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function KT(i){const e=Iw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(s);if(c){const h=c[1];return{host:h,port:ly(s.substr(h.length+1))}}else{const[h,y]=s.split(":");return{host:h,port:ly(y)}}}function ly(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function ZT(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ra("not implemented")}_getIdTokenResponse(e){return Ra("not implemented")}_linkToIdToken(e,t){return Ra("not implemented")}_getReauthenticationResolver(e){return Ra("not implemented")}}async function $T(i,e){return Oo(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(i,e){return TT(i,"POST","/v1/accounts:signInWithIdp",tg(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="http://localhost";class ll extends Nw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ll(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):aa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:c}=t,h=Z1(t,["providerId","signInMethod"]);if(!s||!c)return null;const y=new ll(s,c);return y.idToken=h.idToken||void 0,y.accessToken=h.accessToken||void 0,y.secret=h.secret,y.nonce=h.nonce,y.pendingToken=h.pendingToken||null,y}_getIdTokenResponse(e){const t=this.buildRequest();return nc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,nc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nc(e,t)}buildRequest(){const e={requestUri:JT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends sg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends Lu{constructor(){super("facebook.com")}static credential(e){return ll._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.FACEBOOK_SIGN_IN_METHOD="facebook.com";po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ll._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Na.credential(t,s)}catch{return null}}}Na.GOOGLE_SIGN_IN_METHOD="google.com";Na.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Lu{constructor(){super("github.com")}static credential(e){return ll._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yo.credential(e.oauthAccessToken)}catch{return null}}}yo.GITHUB_SIGN_IN_METHOD="github.com";yo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Lu{constructor(){super("twitter.com")}static credential(e,t){return ll._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return xo.credential(t,s)}catch{return null}}}xo.TWITTER_SIGN_IN_METHOD="twitter.com";xo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,c=!1){const h=await Da._fromIdTokenResponse(e,s,c),y=cy(s);return new sc({user:h,providerId:y,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const c=cy(s);return new sc({user:e,providerId:c,_tokenResponse:s,operationType:t})}}function cy(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends Fa{constructor(e,t,s,c){var h;super(t.code,t.message),this.operationType=s,this.user=c,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:(h=e.tenantId)!==null&&h!==void 0?h:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,c){return new mf(e,t,s,c)}}function Rw(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(i,h,e,s):h})}async function eS(i,e,t=!1){const s=await ol(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return sc._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(i,e,t=!1){const{auth:s}=i;if(Ls(s.app))return Promise.reject(il(s));const c="reauthenticate";try{const h=await ol(i,Rw(s,c,e,i),t);qt(h.idToken,s,"internal-error");const y=ng(h.idToken);qt(y,s,"internal-error");const{sub:_}=y;return qt(i.uid===_,s,"user-mismatch"),sc._forOperation(i,c,h)}catch(h){throw(h==null?void 0:h.code)==="auth/user-not-found"&&aa(s,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(i,e,t=!1){if(Ls(i.app))return Promise.reject(il(i));const s="signIn",c=await Rw(i,s,e),h=await sc._fromIdTokenResponse(i,s,c);return t||await i._updateCurrentUser(h.user),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(i,e){return Oo(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=ni(i),h={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},y=await ol(s,rS(s.auth,h));s.displayName=y.displayName||null,s.photoURL=y.photoUrl||null;const _=s.providerData.find(({providerId:E})=>E==="password");_&&(_.displayName=s.displayName,_.photoURL=s.photoURL),await s._updateTokensIfNecessary(y)}function sS(i,e){return aS(ni(i),null,e)}async function aS(i,e,t){const{auth:s}=i,h={idToken:await i.getIdToken(),returnSecureToken:!0};t&&(h.password=t);const y=await ol(i,$T(s,h));await i._updateTokensIfNecessary(y,!0)}function oS(i,e,t,s){return ni(i).onIdTokenChanged(e,t,s)}function lS(i,e,t){return ni(i).beforeAuthStateChanged(e,t)}function Uf(i,e,t,s){return ni(i).onAuthStateChanged(e,t,s)}function Dw(i){return ni(i).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=1e3,uS=10;class Ow extends Mw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),c=this.localCache[t];s!==c&&e(t,c,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((y,_,E)=>{this.notifyListeners(y,E)});return}const s=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const y=this.storage.getItem(s);!t&&this.localCache[s]===y||this.notifyListeners(s,y)},h=this.storage.getItem(s);BT()&&h!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,uS):c()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},cS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ow.type="LOCAL";const hS=Ow;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends Mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kw.type="SESSION";const Lw=kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const s=new Vf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:c,data:h}=t.data,y=this.handlersMap[c];if(!(y!=null&&y.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:c});const _=Array.from(y).map(async w=>w(t.origin,h)),E=await fS(_);t.ports[0].postMessage({status:"done",eventId:s,eventType:c,response:E})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let h,y;return new Promise((_,E)=>{const w=ag("",20);c.port1.start();const S=setTimeout(()=>{E(new Error("unsupported_event"))},s);y={messageChannel:c,onMessage(N){const P=N;if(P.data.eventId===w)switch(P.data.status){case"ack":clearTimeout(S),h=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),_(P.data.response);break;default:clearTimeout(S),clearTimeout(h),E(new Error("invalid_response"));break}}},this.handlers.add(y),c.port1.addEventListener("message",y.onMessage),this.target.postMessage({eventType:e,eventId:w,data:t},[c.port2])}).finally(()=>{y&&this.removeMessageHandler(y)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(){return window}function gS(i){ra().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return typeof ra().WorkerGlobalScope<"u"&&typeof ra().importScripts=="function"}async function mS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pS(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function yS(){return Pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="firebaseLocalStorageDb",xS=1,yf="firebaseLocalStorage",jw="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ff(i,e){return i.transaction([yf],e?"readwrite":"readonly").objectStore(yf)}function wS(){const i=indexedDB.deleteDatabase(Bw);return new Pu(i).toPromise()}function w1(){const i=indexedDB.open(Bw,xS);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(yf,{keyPath:jw})}catch(c){t(c)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(yf)?e(s):(s.close(),await wS(),e(await w1()))})})}async function uy(i,e,t){const s=Ff(i,!0).put({[jw]:e,value:t});return new Pu(s).toPromise()}async function bS(i,e){const t=Ff(i,!1).get(e),s=await new Pu(t).toPromise();return s===void 0?null:s.value}function hy(i,e){const t=Ff(i,!0).delete(e);return new Pu(t).toPromise()}const ES=800,vS=3;class Uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await w1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>vS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vf._getInstance(yS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await mS(),!this.activeServiceWorker)return;this.sender=new dS(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await w1();return await uy(e,pf,"1"),await hy(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>uy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>bS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const h=Ff(c,!1).getAll();return new Pu(h).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:c,value:h}of e)s.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(h)&&(this.notifyListeners(c,h),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!s.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ES)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uw.type="LOCAL";const _S=Uw;new ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(i,e){return e?Ma(e):(qt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends Nw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function CS(i){return nS(i.auth,new og(i),i.bypassAuthState)}function AS(i){const{auth:e,user:t}=i;return qt(t,e,"internal-error"),tS(t,new og(i),i.bypassAuthState)}async function TS(i){const{auth:e,user:t}=i;return qt(t,e,"internal-error"),eS(t,new og(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,s,c,h=!1){this.auth=e,this.resolver=s,this.user=c,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:c,tenantId:h,error:y,type:_}=e;if(y){this.reject(y);return}const E={auth:this.auth,requestUri:t,sessionId:s,tenantId:h||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(E))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CS;case"linkViaPopup":case"linkViaRedirect":return TS;case"reauthViaPopup":case"reauthViaRedirect":return AS;default:aa(this.auth,"internal-error")}}resolve(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=new ku(2e3,1e4);async function IS(i,e,t){if(Ls(i.app))return Promise.reject(Ps(i,"operation-not-supported-in-this-environment"));const s=jf(i);bT(i,e,sg);const c=Vw(s,t);return new nl(s,"signInViaPopup",e,c).executeNotNull()}class nl extends Fw{constructor(e,t,s,c,h){super(e,t,c,h),this.provider=s,this.authWindow=null,this.pollId=null,nl.currentPopupAction&&nl.currentPopupAction.cancel(),nl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qt(e,this.auth,"internal-error"),e}async onExecution(){Ba(this.filter.length===1,"Popup operations only handle one event");const e=ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SS.get())};e()}}nl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="pendingRedirect",Jh=new Map;class RS extends Fw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const s=await DS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DS(i,e){const t=kS(e),s=OS(i);if(!await s._isAvailable())return!1;const c=await s._get(t)==="true";return await s._remove(t),c}function MS(i,e){Jh.set(i._key(),e)}function OS(i){return Ma(i._redirectPersistence)}function kS(i){return $h(NS,i.config.apiKey,i.name)}async function LS(i,e,t=!1){if(Ls(i.app))return Promise.reject(il(i));const s=jf(i),c=Vw(s,e),y=await new RS(s,c,t).execute();return y&&!t&&(delete y.user._redirectEventId,await s._persistUserIfCurrent(y.user),await s._setRedirectUser(null,e)),y}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=10*60*1e3;class BS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!zw(e)){const c=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ps(this.auth,c))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PS&&this.cachedEventUids.clear(),this.cachedEventUids.has(fy(e))}saveEventToCache(e){this.cachedEventUids.add(fy(e)),this.lastProcessedEventTime=Date.now()}}function fy(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function zw({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(i,e={}){return Oo(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FS=/^https?/;async function zS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await US(i);for(const t of e)try{if(HS(t))return}catch{}aa(i,"unauthorized-domain")}function HS(i){const e=y1(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const y=new URL(i);return y.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&y.hostname===s}if(!FS.test(t))return!1;if(VS.test(i))return s===i;const c=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new ku(3e4,6e4);function dy(){const i=ra().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function qS(i){return new Promise((e,t)=>{var s,c,h;function y(){dy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dy(),t(Ps(i,"network-request-failed"))},timeout:GS.get()})}if(!((c=(s=ra().gapi)===null||s===void 0?void 0:s.iframes)===null||c===void 0)&&c.Iframe)e(gapi.iframes.getContext());else if(!((h=ra().gapi)===null||h===void 0)&&h.load)y();else{const _=YT("iframefcb");return ra()[_]=()=>{gapi.load?y():t(Ps(i,"network-request-failed"))},GT(`${qT()}?onload=${_}`).catch(E=>t(E))}}).catch(e=>{throw ef=null,e})}let ef=null;function YS(i){return ef=ef||qS(i),ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=new ku(5e3,15e3),WS="__/auth/iframe",QS="emulator/auth/iframe",KS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $S(i){const e=i.config;qt(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?eg(e,QS):`https://${i.config.authDomain}/${WS}`,s={apiKey:e.apiKey,appName:i.name,v:mc},c=ZS.get(i.config.apiHost);c&&(s.eid=c);const h=i._getFrameworks();return h.length&&(s.fw=h.join(",")),`${t}?${Ou(s).slice(1)}`}async function JS(i){const e=await YS(i),t=ra().gapi;return qt(t,i,"internal-error"),e.open({where:document.body,url:$S(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KS,dontclear:!0},s=>new Promise(async(c,h)=>{await s.restyle({setHideOnLeave:!1});const y=Ps(i,"network-request-failed"),_=ra().setTimeout(()=>{h(y)},XS.get());function E(){ra().clearTimeout(_),c(s)}s.ping(E).then(E,()=>{h(y)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t3=500,n3=600,r3="_blank",i3="http://localhost";class gy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s3(i,e,t,s=t3,c=n3){const h=Math.max((window.screen.availHeight-c)/2,0).toString(),y=Math.max((window.screen.availWidth-s)/2,0).toString();let _="";const E=Object.assign(Object.assign({},e3),{width:s.toString(),height:c.toString(),top:h,left:y}),w=Ri().toLowerCase();t&&(_=Ew(w)?r3:t),ww(w)&&(e=e||i3,E.scrollbars="yes");const S=Object.entries(E).reduce((P,[U,X])=>`${P}${U}=${X},`,"");if(PT(w)&&_!=="_self")return a3(e||"",_),new gy(null);const N=window.open(e||"",_,S);qt(N,i,"popup-blocked");try{N.focus()}catch{}return new gy(N)}function a3(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="__/auth/handler",l3="emulator/auth/handler",c3=encodeURIComponent("fac");async function my(i,e,t,s,c,h){qt(i.config.authDomain,i,"auth-domain-config-required"),qt(i.config.apiKey,i,"invalid-api-key");const y={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:mc,eventId:c};if(e instanceof sg){e.setDefaultLanguage(i.languageCode),y.providerId=e.providerId||"",aA(e.getCustomParameters())||(y.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,N]of Object.entries({}))y[S]=N}if(e instanceof Lu){const S=e.getScopes().filter(N=>N!=="");S.length>0&&(y.scopes=S.join(","))}i.tenantId&&(y.tid=i.tenantId);const _=y;for(const S of Object.keys(_))_[S]===void 0&&delete _[S];const E=await i._getAppCheckToken(),w=E?`#${c3}=${encodeURIComponent(E)}`:"";return`${u3(i)}?${Ou(_).slice(1)}${w}`}function u3({config:i}){return i.emulator?eg(i,l3):`https://${i.authDomain}/${o3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="webStorageSupport";class h3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lw,this._completeRedirectFn=LS,this._overrideRedirectResult=MS}async _openPopup(e,t,s,c){var h;Ba((h=this.eventManagers[e._key()])===null||h===void 0?void 0:h.manager,"_initialize() not called before _openPopup()");const y=await my(e,t,s,y1(),c);return s3(e,y,ag())}async _openRedirect(e,t,s,c){await this._originValidation(e);const h=await my(e,t,s,y1(),c);return gS(h),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:h}=this.eventManagers[t];return c?Promise.resolve(c):(Ba(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await JS(e),s=new BS(e);return t.register("authEvent",c=>(qt(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:s.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(n1,{type:n1},c=>{var h;const y=(h=c==null?void 0:c[0])===null||h===void 0?void 0:h[n1];y!==void 0&&t(!!y),aa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tw()||bw()||rg()}}const f3=h3;var py="@firebase/auth",yy="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m3(i){ic(new al("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),h=e.getProvider("app-check-internal"),{apiKey:y,authDomain:_}=s.options;qt(y&&!y.includes(":"),"invalid-api-key",{appName:s.name});const E={apiKey:y,authDomain:_,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sw(i)},w=new zT(s,c,h,E);return WT(w,t),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ic(new al("auth-internal",e=>{const t=jf(e.getProvider("auth").getImmediate());return(s=>new d3(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vo(py,yy,g3(i)),vo(py,yy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=5*60,y3=iw("authIdTokenMaxAge")||p3;let xy=null;const x3=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>y3)return;const c=t==null?void 0:t.token;xy!==c&&(xy=c,await fetch(i,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function za(i=lw()){const e=K1(i,"auth");if(e.isInitialized())return e.getImmediate();const t=XT(i,{popupRedirectResolver:f3,persistence:[_S,hS,Lw]}),s=iw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const y=x3(h.toString());lS(t,y,()=>y(t.currentUser)),oS(t,_=>y(_))}}const c=nw("auth");return c&&QT(t,`http://${c}`),t}function w3(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}HT({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=c=>{const h=Ps("internal-error");h.customData=c,t(h)},s.type="text/javascript",s.charset="UTF-8",w3().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m3("Browser");var wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _o,Hw;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(z,j){function L(){}L.prototype=j.prototype,z.D=j.prototype,z.prototype=new L,z.prototype.constructor=z,z.C=function(F,J,ee){for(var W=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)W[ve-2]=arguments[ve];return j.prototype[J].apply(F,W)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(z,j,L){L||(L=0);var F=Array(16);if(typeof j=="string")for(var J=0;16>J;++J)F[J]=j.charCodeAt(L++)|j.charCodeAt(L++)<<8|j.charCodeAt(L++)<<16|j.charCodeAt(L++)<<24;else for(J=0;16>J;++J)F[J]=j[L++]|j[L++]<<8|j[L++]<<16|j[L++]<<24;j=z.g[0],L=z.g[1],J=z.g[2];var ee=z.g[3],W=j+(ee^L&(J^ee))+F[0]+3614090360&4294967295;j=L+(W<<7&4294967295|W>>>25),W=ee+(J^j&(L^J))+F[1]+3905402710&4294967295,ee=j+(W<<12&4294967295|W>>>20),W=J+(L^ee&(j^L))+F[2]+606105819&4294967295,J=ee+(W<<17&4294967295|W>>>15),W=L+(j^J&(ee^j))+F[3]+3250441966&4294967295,L=J+(W<<22&4294967295|W>>>10),W=j+(ee^L&(J^ee))+F[4]+4118548399&4294967295,j=L+(W<<7&4294967295|W>>>25),W=ee+(J^j&(L^J))+F[5]+1200080426&4294967295,ee=j+(W<<12&4294967295|W>>>20),W=J+(L^ee&(j^L))+F[6]+2821735955&4294967295,J=ee+(W<<17&4294967295|W>>>15),W=L+(j^J&(ee^j))+F[7]+4249261313&4294967295,L=J+(W<<22&4294967295|W>>>10),W=j+(ee^L&(J^ee))+F[8]+1770035416&4294967295,j=L+(W<<7&4294967295|W>>>25),W=ee+(J^j&(L^J))+F[9]+2336552879&4294967295,ee=j+(W<<12&4294967295|W>>>20),W=J+(L^ee&(j^L))+F[10]+4294925233&4294967295,J=ee+(W<<17&4294967295|W>>>15),W=L+(j^J&(ee^j))+F[11]+2304563134&4294967295,L=J+(W<<22&4294967295|W>>>10),W=j+(ee^L&(J^ee))+F[12]+1804603682&4294967295,j=L+(W<<7&4294967295|W>>>25),W=ee+(J^j&(L^J))+F[13]+4254626195&4294967295,ee=j+(W<<12&4294967295|W>>>20),W=J+(L^ee&(j^L))+F[14]+2792965006&4294967295,J=ee+(W<<17&4294967295|W>>>15),W=L+(j^J&(ee^j))+F[15]+1236535329&4294967295,L=J+(W<<22&4294967295|W>>>10),W=j+(J^ee&(L^J))+F[1]+4129170786&4294967295,j=L+(W<<5&4294967295|W>>>27),W=ee+(L^J&(j^L))+F[6]+3225465664&4294967295,ee=j+(W<<9&4294967295|W>>>23),W=J+(j^L&(ee^j))+F[11]+643717713&4294967295,J=ee+(W<<14&4294967295|W>>>18),W=L+(ee^j&(J^ee))+F[0]+3921069994&4294967295,L=J+(W<<20&4294967295|W>>>12),W=j+(J^ee&(L^J))+F[5]+3593408605&4294967295,j=L+(W<<5&4294967295|W>>>27),W=ee+(L^J&(j^L))+F[10]+38016083&4294967295,ee=j+(W<<9&4294967295|W>>>23),W=J+(j^L&(ee^j))+F[15]+3634488961&4294967295,J=ee+(W<<14&4294967295|W>>>18),W=L+(ee^j&(J^ee))+F[4]+3889429448&4294967295,L=J+(W<<20&4294967295|W>>>12),W=j+(J^ee&(L^J))+F[9]+568446438&4294967295,j=L+(W<<5&4294967295|W>>>27),W=ee+(L^J&(j^L))+F[14]+3275163606&4294967295,ee=j+(W<<9&4294967295|W>>>23),W=J+(j^L&(ee^j))+F[3]+4107603335&4294967295,J=ee+(W<<14&4294967295|W>>>18),W=L+(ee^j&(J^ee))+F[8]+1163531501&4294967295,L=J+(W<<20&4294967295|W>>>12),W=j+(J^ee&(L^J))+F[13]+2850285829&4294967295,j=L+(W<<5&4294967295|W>>>27),W=ee+(L^J&(j^L))+F[2]+4243563512&4294967295,ee=j+(W<<9&4294967295|W>>>23),W=J+(j^L&(ee^j))+F[7]+1735328473&4294967295,J=ee+(W<<14&4294967295|W>>>18),W=L+(ee^j&(J^ee))+F[12]+2368359562&4294967295,L=J+(W<<20&4294967295|W>>>12),W=j+(L^J^ee)+F[5]+4294588738&4294967295,j=L+(W<<4&4294967295|W>>>28),W=ee+(j^L^J)+F[8]+2272392833&4294967295,ee=j+(W<<11&4294967295|W>>>21),W=J+(ee^j^L)+F[11]+1839030562&4294967295,J=ee+(W<<16&4294967295|W>>>16),W=L+(J^ee^j)+F[14]+4259657740&4294967295,L=J+(W<<23&4294967295|W>>>9),W=j+(L^J^ee)+F[1]+2763975236&4294967295,j=L+(W<<4&4294967295|W>>>28),W=ee+(j^L^J)+F[4]+1272893353&4294967295,ee=j+(W<<11&4294967295|W>>>21),W=J+(ee^j^L)+F[7]+4139469664&4294967295,J=ee+(W<<16&4294967295|W>>>16),W=L+(J^ee^j)+F[10]+3200236656&4294967295,L=J+(W<<23&4294967295|W>>>9),W=j+(L^J^ee)+F[13]+681279174&4294967295,j=L+(W<<4&4294967295|W>>>28),W=ee+(j^L^J)+F[0]+3936430074&4294967295,ee=j+(W<<11&4294967295|W>>>21),W=J+(ee^j^L)+F[3]+3572445317&4294967295,J=ee+(W<<16&4294967295|W>>>16),W=L+(J^ee^j)+F[6]+76029189&4294967295,L=J+(W<<23&4294967295|W>>>9),W=j+(L^J^ee)+F[9]+3654602809&4294967295,j=L+(W<<4&4294967295|W>>>28),W=ee+(j^L^J)+F[12]+3873151461&4294967295,ee=j+(W<<11&4294967295|W>>>21),W=J+(ee^j^L)+F[15]+530742520&4294967295,J=ee+(W<<16&4294967295|W>>>16),W=L+(J^ee^j)+F[2]+3299628645&4294967295,L=J+(W<<23&4294967295|W>>>9),W=j+(J^(L|~ee))+F[0]+4096336452&4294967295,j=L+(W<<6&4294967295|W>>>26),W=ee+(L^(j|~J))+F[7]+1126891415&4294967295,ee=j+(W<<10&4294967295|W>>>22),W=J+(j^(ee|~L))+F[14]+2878612391&4294967295,J=ee+(W<<15&4294967295|W>>>17),W=L+(ee^(J|~j))+F[5]+4237533241&4294967295,L=J+(W<<21&4294967295|W>>>11),W=j+(J^(L|~ee))+F[12]+1700485571&4294967295,j=L+(W<<6&4294967295|W>>>26),W=ee+(L^(j|~J))+F[3]+2399980690&4294967295,ee=j+(W<<10&4294967295|W>>>22),W=J+(j^(ee|~L))+F[10]+4293915773&4294967295,J=ee+(W<<15&4294967295|W>>>17),W=L+(ee^(J|~j))+F[1]+2240044497&4294967295,L=J+(W<<21&4294967295|W>>>11),W=j+(J^(L|~ee))+F[8]+1873313359&4294967295,j=L+(W<<6&4294967295|W>>>26),W=ee+(L^(j|~J))+F[15]+4264355552&4294967295,ee=j+(W<<10&4294967295|W>>>22),W=J+(j^(ee|~L))+F[6]+2734768916&4294967295,J=ee+(W<<15&4294967295|W>>>17),W=L+(ee^(J|~j))+F[13]+1309151649&4294967295,L=J+(W<<21&4294967295|W>>>11),W=j+(J^(L|~ee))+F[4]+4149444226&4294967295,j=L+(W<<6&4294967295|W>>>26),W=ee+(L^(j|~J))+F[11]+3174756917&4294967295,ee=j+(W<<10&4294967295|W>>>22),W=J+(j^(ee|~L))+F[2]+718787259&4294967295,J=ee+(W<<15&4294967295|W>>>17),W=L+(ee^(J|~j))+F[9]+3951481745&4294967295,z.g[0]=z.g[0]+j&4294967295,z.g[1]=z.g[1]+(J+(W<<21&4294967295|W>>>11))&4294967295,z.g[2]=z.g[2]+J&4294967295,z.g[3]=z.g[3]+ee&4294967295}s.prototype.u=function(z,j){j===void 0&&(j=z.length);for(var L=j-this.blockSize,F=this.B,J=this.h,ee=0;ee<j;){if(J==0)for(;ee<=L;)c(this,z,ee),ee+=this.blockSize;if(typeof z=="string"){for(;ee<j;)if(F[J++]=z.charCodeAt(ee++),J==this.blockSize){c(this,F),J=0;break}}else for(;ee<j;)if(F[J++]=z[ee++],J==this.blockSize){c(this,F),J=0;break}}this.h=J,this.o+=j},s.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var j=1;j<z.length-8;++j)z[j]=0;var L=8*this.o;for(j=z.length-8;j<z.length;++j)z[j]=L&255,L/=256;for(this.u(z),z=Array(16),j=L=0;4>j;++j)for(var F=0;32>F;F+=8)z[L++]=this.g[j]>>>F&255;return z};function h(z,j){var L=_;return Object.prototype.hasOwnProperty.call(L,z)?L[z]:L[z]=j(z)}function y(z,j){this.h=j;for(var L=[],F=!0,J=z.length-1;0<=J;J--){var ee=z[J]|0;F&&ee==j||(L[J]=ee,F=!1)}this.g=L}var _={};function E(z){return-128<=z&&128>z?h(z,function(j){return new y([j|0],0>j?-1:0)}):new y([z|0],0>z?-1:0)}function w(z){if(isNaN(z)||!isFinite(z))return N;if(0>z)return Y(w(-z));for(var j=[],L=1,F=0;z>=L;F++)j[F]=z/L|0,L*=4294967296;return new y(j,0)}function S(z,j){if(z.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(z.charAt(0)=="-")return Y(S(z.substring(1),j));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=w(Math.pow(j,8)),F=N,J=0;J<z.length;J+=8){var ee=Math.min(8,z.length-J),W=parseInt(z.substring(J,J+ee),j);8>ee?(ee=w(Math.pow(j,ee)),F=F.j(ee).add(w(W))):(F=F.j(L),F=F.add(w(W)))}return F}var N=E(0),P=E(1),U=E(16777216);i=y.prototype,i.m=function(){if(re(this))return-Y(this).m();for(var z=0,j=1,L=0;L<this.g.length;L++){var F=this.i(L);z+=(0<=F?F:4294967296+F)*j,j*=4294967296}return z},i.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(X(this))return"0";if(re(this))return"-"+Y(this).toString(z);for(var j=w(Math.pow(z,6)),L=this,F="";;){var J=fe(L,j).g;L=ye(L,J.j(j));var ee=((0<L.g.length?L.g[0]:L.h)>>>0).toString(z);if(L=J,X(L))return ee+F;for(;6>ee.length;)ee="0"+ee;F=ee+F}},i.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function X(z){if(z.h!=0)return!1;for(var j=0;j<z.g.length;j++)if(z.g[j]!=0)return!1;return!0}function re(z){return z.h==-1}i.l=function(z){return z=ye(this,z),re(z)?-1:X(z)?0:1};function Y(z){for(var j=z.g.length,L=[],F=0;F<j;F++)L[F]=~z.g[F];return new y(L,~z.h).add(P)}i.abs=function(){return re(this)?Y(this):this},i.add=function(z){for(var j=Math.max(this.g.length,z.g.length),L=[],F=0,J=0;J<=j;J++){var ee=F+(this.i(J)&65535)+(z.i(J)&65535),W=(ee>>>16)+(this.i(J)>>>16)+(z.i(J)>>>16);F=W>>>16,ee&=65535,W&=65535,L[J]=W<<16|ee}return new y(L,L[L.length-1]&-2147483648?-1:0)};function ye(z,j){return z.add(Y(j))}i.j=function(z){if(X(this)||X(z))return N;if(re(this))return re(z)?Y(this).j(Y(z)):Y(Y(this).j(z));if(re(z))return Y(this.j(Y(z)));if(0>this.l(U)&&0>z.l(U))return w(this.m()*z.m());for(var j=this.g.length+z.g.length,L=[],F=0;F<2*j;F++)L[F]=0;for(F=0;F<this.g.length;F++)for(var J=0;J<z.g.length;J++){var ee=this.i(F)>>>16,W=this.i(F)&65535,ve=z.i(J)>>>16,te=z.i(J)&65535;L[2*F+2*J]+=W*te,ue(L,2*F+2*J),L[2*F+2*J+1]+=ee*te,ue(L,2*F+2*J+1),L[2*F+2*J+1]+=W*ve,ue(L,2*F+2*J+1),L[2*F+2*J+2]+=ee*ve,ue(L,2*F+2*J+2)}for(F=0;F<j;F++)L[F]=L[2*F+1]<<16|L[2*F];for(F=j;F<2*j;F++)L[F]=0;return new y(L,0)};function ue(z,j){for(;(z[j]&65535)!=z[j];)z[j+1]+=z[j]>>>16,z[j]&=65535,j++}function se(z,j){this.g=z,this.h=j}function fe(z,j){if(X(j))throw Error("division by zero");if(X(z))return new se(N,N);if(re(z))return j=fe(Y(z),j),new se(Y(j.g),Y(j.h));if(re(j))return j=fe(z,Y(j)),new se(Y(j.g),j.h);if(30<z.g.length){if(re(z)||re(j))throw Error("slowDivide_ only works with positive integers.");for(var L=P,F=j;0>=F.l(z);)L=we(L),F=we(F);var J=Pe(L,1),ee=Pe(F,1);for(F=Pe(F,2),L=Pe(L,2);!X(F);){var W=ee.add(F);0>=W.l(z)&&(J=J.add(L),ee=W),F=Pe(F,1),L=Pe(L,1)}return j=ye(z,J.j(j)),new se(J,j)}for(J=N;0<=z.l(j);){for(L=Math.max(1,Math.floor(z.m()/j.m())),F=Math.ceil(Math.log(L)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),ee=w(L),W=ee.j(j);re(W)||0<W.l(z);)L-=F,ee=w(L),W=ee.j(j);X(ee)&&(ee=P),J=J.add(ee),z=ye(z,W)}return new se(J,z)}i.A=function(z){return fe(this,z).h},i.and=function(z){for(var j=Math.max(this.g.length,z.g.length),L=[],F=0;F<j;F++)L[F]=this.i(F)&z.i(F);return new y(L,this.h&z.h)},i.or=function(z){for(var j=Math.max(this.g.length,z.g.length),L=[],F=0;F<j;F++)L[F]=this.i(F)|z.i(F);return new y(L,this.h|z.h)},i.xor=function(z){for(var j=Math.max(this.g.length,z.g.length),L=[],F=0;F<j;F++)L[F]=this.i(F)^z.i(F);return new y(L,this.h^z.h)};function we(z){for(var j=z.g.length+1,L=[],F=0;F<j;F++)L[F]=z.i(F)<<1|z.i(F-1)>>>31;return new y(L,z.h)}function Pe(z,j){var L=j>>5;j%=32;for(var F=z.g.length-L,J=[],ee=0;ee<F;ee++)J[ee]=0<j?z.i(ee+L)>>>j|z.i(ee+L+1)<<32-j:z.i(ee+L);return new y(J,z.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Hw=s,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.A,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=w,y.fromString=S,_o=y}).apply(typeof wy<"u"?wy:typeof self<"u"?self:typeof window<"u"?window:{});var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gw,cu,qw,tf,b1,Yw,Xw,Ww;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,I,D){return x==Array.prototype||x==Object.prototype||(x[I]=D.value),x};function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gh=="object"&&Gh];for(var I=0;I<x.length;++I){var D=x[I];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var s=t(this);function c(x,I){if(I)e:{var D=s;x=x.split(".");for(var G=0;G<x.length-1;G++){var _e=x[G];if(!(_e in D))break e;D=D[_e]}x=x[x.length-1],G=D[x],I=I(G),I!=G&&I!=null&&e(D,x,{configurable:!0,writable:!0,value:I})}}function h(x,I){x instanceof String&&(x+="");var D=0,G=!1,_e={next:function(){if(!G&&D<x.length){var ke=D++;return{value:I(ke,x[ke]),done:!1}}return G=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}c("Array.prototype.values",function(x){return x||function(){return h(this,function(I,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var y=y||{},_=this||self;function E(x){var I=typeof x;return I=I!="object"?I:x?Array.isArray(x)?"array":I:"null",I=="array"||I=="object"&&typeof x.length=="number"}function w(x){var I=typeof x;return I=="object"&&x!=null||I=="function"}function S(x,I,D){return x.call.apply(x.bind,arguments)}function N(x,I,D){if(!x)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,G),x.apply(I,_e)}}return function(){return x.apply(I,arguments)}}function P(x,I,D){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:N,P.apply(null,arguments)}function U(x,I){var D=Array.prototype.slice.call(arguments,1);return function(){var G=D.slice();return G.push.apply(G,arguments),x.apply(this,G)}}function X(x,I){function D(){}D.prototype=I.prototype,x.aa=I.prototype,x.prototype=new D,x.prototype.constructor=x,x.Qb=function(G,_e,ke){for(var ct=Array(arguments.length-2),un=2;un<arguments.length;un++)ct[un-2]=arguments[un];return I.prototype[_e].apply(G,ct)}}function re(x){const I=x.length;if(0<I){const D=Array(I);for(let G=0;G<I;G++)D[G]=x[G];return D}return[]}function Y(x,I){for(let D=1;D<arguments.length;D++){const G=arguments[D];if(E(G)){const _e=x.length||0,ke=G.length||0;x.length=_e+ke;for(let ct=0;ct<ke;ct++)x[_e+ct]=G[ct]}else x.push(G)}}class ye{constructor(I,D){this.i=I,this.j=D,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function ue(x){return/^[\s\xa0]*$/.test(x)}function se(){var x=_.navigator;return x&&(x=x.userAgent)?x:""}function fe(x){return fe[" "](x),x}fe[" "]=function(){};var we=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function Pe(x,I,D){for(const G in x)I.call(D,x[G],G,x)}function z(x,I){for(const D in x)I.call(void 0,x[D],D,x)}function j(x){const I={};for(const D in x)I[D]=x[D];return I}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(x,I){let D,G;for(let _e=1;_e<arguments.length;_e++){G=arguments[_e];for(D in G)x[D]=G[D];for(let ke=0;ke<L.length;ke++)D=L[ke],Object.prototype.hasOwnProperty.call(G,D)&&(x[D]=G[D])}}function J(x){var I=1;x=x.split(":");const D=[];for(;0<I&&x.length;)D.push(x.shift()),I--;return x.length&&D.push(x.join(":")),D}function ee(x){_.setTimeout(()=>{throw x},0)}function W(){var x=ht;let I=null;return x.g&&(I=x.g,x.g=x.g.next,x.g||(x.h=null),I.next=null),I}class ve{constructor(){this.h=this.g=null}add(I,D){const G=te.get();G.set(I,D),this.h?this.h.next=G:this.g=G,this.h=G}}var te=new ye(()=>new Ae,x=>x.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(I,D){this.h=I,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,Xe=!1,ht=new ve,Q=()=>{const x=_.Promise.resolve(void 0);Te=()=>{x.then(ge)}};var ge=()=>{for(var x;x=W();){try{x.h.call(x.g)}catch(D){ee(D)}var I=te;I.j(x),100>I.h&&(I.h++,x.next=I.g,I.g=x)}Xe=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Fe(x,I){this.type=x,this.g=this.target=I,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!_.addEventListener||!Object.defineProperty)return!1;var x=!1,I=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const D=()=>{};_.addEventListener("test",D,I),_.removeEventListener("test",D,I)}catch{}return x}();function $(x,I){if(Fe.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var D=this.type=x.type,G=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=I,I=x.relatedTarget){if(we){e:{try{fe(I.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(I=null)}}else D=="mouseover"?I=x.fromElement:D=="mouseout"&&(I=x.toElement);this.relatedTarget=I,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:Ve[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&$.aa.h.call(this)}}X($,Fe);var Ve={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),st=0;function vt(x,I,D,G,_e){this.listener=x,this.proxy=null,this.src=I,this.type=D,this.capture=!!G,this.ha=_e,this.key=++st,this.da=this.fa=!1}function mt(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function xt(x){this.src=x,this.g={},this.h=0}xt.prototype.add=function(x,I,D,G,_e){var ke=x.toString();x=this.g[ke],x||(x=this.g[ke]=[],this.h++);var ct=ft(x,I,G,_e);return-1<ct?(I=x[ct],D||(I.fa=!1)):(I=new vt(I,this.src,ke,!!G,_e),I.fa=D,x.push(I)),I};function Ft(x,I){var D=I.type;if(D in x.g){var G=x.g[D],_e=Array.prototype.indexOf.call(G,I,void 0),ke;(ke=0<=_e)&&Array.prototype.splice.call(G,_e,1),ke&&(mt(I),x.g[D].length==0&&(delete x.g[D],x.h--))}}function ft(x,I,D,G){for(var _e=0;_e<x.length;++_e){var ke=x[_e];if(!ke.da&&ke.listener==I&&ke.capture==!!D&&ke.ha==G)return _e}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),le={};function Ne(x,I,D,G,_e){if(Array.isArray(I)){for(var ke=0;ke<I.length;ke++)Ne(x,I[ke],D,G,_e);return null}return D=Et(D),x&&x[dt]?x.K(I,D,w(G)?!!G.capture:!1,_e):pe(x,I,D,!1,G,_e)}function pe(x,I,D,G,_e,ke){if(!I)throw Error("Invalid event type");var ct=w(_e)?!!_e.capture:!!_e,un=ot(x);if(un||(x[qe]=un=new xt(x)),D=un.add(I,D,G,ct,ke),D.proxy)return D;if(G=De(),D.proxy=G,G.src=x,G.listener=D,x.addEventListener)Se||(_e=ct),_e===void 0&&(_e=!1),x.addEventListener(I.toString(),G,_e);else if(x.attachEvent)x.attachEvent(Ue(I.toString()),G);else if(x.addListener&&x.removeListener)x.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return D}function De(){function x(D){return I.call(x.src,x.listener,D)}const I=Mt;return x}function Be(x,I,D,G,_e){if(Array.isArray(I))for(var ke=0;ke<I.length;ke++)Be(x,I[ke],D,G,_e);else G=w(G)?!!G.capture:!!G,D=Et(D),x&&x[dt]?(x=x.i,I=String(I).toString(),I in x.g&&(ke=x.g[I],D=ft(ke,D,G,_e),-1<D&&(mt(ke[D]),Array.prototype.splice.call(ke,D,1),ke.length==0&&(delete x.g[I],x.h--)))):x&&(x=ot(x))&&(I=x.g[I.toString()],x=-1,I&&(x=ft(I,D,G,_e)),(D=-1<x?I[x]:null)&&Ye(D))}function Ye(x){if(typeof x!="number"&&x&&!x.da){var I=x.src;if(I&&I[dt])Ft(I.i,x);else{var D=x.type,G=x.proxy;I.removeEventListener?I.removeEventListener(D,G,x.capture):I.detachEvent?I.detachEvent(Ue(D),G):I.addListener&&I.removeListener&&I.removeListener(G),(D=ot(I))?(Ft(D,x),D.h==0&&(D.src=null,I[qe]=null)):mt(x)}}}function Ue(x){return x in le?le[x]:le[x]="on"+x}function Mt(x,I){if(x.da)x=!0;else{I=new $(I,this);var D=x.listener,G=x.ha||x.src;x.fa&&Ye(x),x=D.call(G,I)}return x}function ot(x){return x=x[qe],x instanceof xt?x:null}var We="__closure_events_fn_"+(1e9*Math.random()>>>0);function Et(x){return typeof x=="function"?x:(x[We]||(x[We]=function(I){return x.handleEvent(I)}),x[We])}function et(){Re.call(this),this.i=new xt(this),this.M=this,this.F=null}X(et,Re),et.prototype[dt]=!0,et.prototype.removeEventListener=function(x,I,D,G){Be(this,x,I,D,G)};function at(x,I){var D,G=x.F;if(G)for(D=[];G;G=G.F)D.push(G);if(x=x.M,G=I.type||I,typeof I=="string")I=new Fe(I,x);else if(I instanceof Fe)I.target=I.target||x;else{var _e=I;I=new Fe(G,x),F(I,_e)}if(_e=!0,D)for(var ke=D.length-1;0<=ke;ke--){var ct=I.g=D[ke];_e=It(ct,G,!0,I)&&_e}if(ct=I.g=x,_e=It(ct,G,!0,I)&&_e,_e=It(ct,G,!1,I)&&_e,D)for(ke=0;ke<D.length;ke++)ct=I.g=D[ke],_e=It(ct,G,!1,I)&&_e}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var x=this.i,I;for(I in x.g){for(var D=x.g[I],G=0;G<D.length;G++)mt(D[G]);delete x.g[I],x.h--}}this.F=null},et.prototype.K=function(x,I,D,G){return this.i.add(String(x),I,!1,D,G)},et.prototype.L=function(x,I,D,G){return this.i.add(String(x),I,!0,D,G)};function It(x,I,D,G){if(I=x.i.g[String(I)],!I)return!0;I=I.concat();for(var _e=!0,ke=0;ke<I.length;++ke){var ct=I[ke];if(ct&&!ct.da&&ct.capture==D){var un=ct.listener,rr=ct.ha||ct.src;ct.fa&&Ft(x.i,ct),_e=un.call(rr,G)!==!1&&_e}}return _e&&!G.defaultPrevented}function sn(x,I,D){if(typeof x=="function")D&&(x=P(x,D));else if(x&&typeof x.handleEvent=="function")x=P(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:_.setTimeout(x,I||0)}function Nn(x){x.g=sn(()=>{x.g=null,x.i&&(x.i=!1,Nn(x))},x.l);const I=x.h;x.h=null,x.m.apply(null,I)}class Qn extends Re{constructor(I,D){super(),this.m=I,this.l=D,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Nn(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(x){Re.call(this),this.h=x,this.g={}}X(sr,Re);var Jt=[];function He(x){Pe(x.g,function(I,D){this.g.hasOwnProperty(D)&&Ye(I)},x),x.g={}}sr.prototype.N=function(){sr.aa.N.call(this),He(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=_.JSON.stringify,Ut=_.JSON.parse,Xt=class{stringify(x){return _.JSON.stringify(x,void 0)}parse(x){return _.JSON.parse(x,void 0)}};function zn(){}zn.prototype.h=null;function Or(x){return x.h||(x.h=x.i())}function Gr(){}var zt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kn(){Fe.call(this,"d")}X(Kn,Fe);function qr(){Fe.call(this,"c")}X(qr,Fe);var pr={},Ln=null;function Tr(){return Ln=Ln||new et}pr.La="serverreachability";function Hn(x){Fe.call(this,pr.La,x)}X(Hn,Fe);function yr(x){const I=Tr();at(I,new Hn(I))}pr.STAT_EVENT="statevent";function bi(x,I){Fe.call(this,pr.STAT_EVENT,x),this.stat=I}X(bi,Fe);function an(x){const I=Tr();at(I,new bi(I,x))}pr.Ma="timingevent";function Fs(x,I){Fe.call(this,pr.Ma,x),this.size=I}X(Fs,Fe);function hr(x,I){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){x()},I)}function xr(){this.g=!0}xr.prototype.xa=function(){this.g=!1};function tr(x,I,D,G,_e,ke){x.info(function(){if(x.g)if(ke)for(var ct="",un=ke.split("&"),rr=0;rr<un.length;rr++){var hn=un[rr].split("=");if(1<hn.length){var Xn=hn[0];hn=hn[1];var cr=Xn.split("_");ct=2<=cr.length&&cr[1]=="type"?ct+(Xn+"="+hn+"&"):ct+(Xn+"=redacted&")}}else ct=null;else ct=ke;return"XMLHTTP REQ ("+G+") [attempt "+_e+"]: "+I+`
`+D+`
`+ct})}function ci(x,I,D,G,_e,ke,ct){x.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+_e+"]: "+I+`
`+D+`
`+ke+" "+ct})}function Zn(x,I,D,G){x.info(function(){return"XMLHTTP TEXT ("+I+"): "+Cn(x,D)+(G?" "+G:"")})}function lt(x,I){x.info(function(){return"TIMEOUT: "+I})}xr.prototype.info=function(){};function Cn(x,I){if(!x.g)return I;if(!I)return null;try{var D=JSON.parse(I);if(D){for(x=0;x<D.length;x++)if(Array.isArray(D[x])){var G=D[x];if(!(2>G.length)){var _e=G[1];if(Array.isArray(_e)&&!(1>_e.length)){var ke=_e[0];if(ke!="noop"&&ke!="stop"&&ke!="close")for(var ct=1;ct<_e.length;ct++)_e[ct]=""}}}}return xn(D)}catch{return I}}var jn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sr;function ri(){}X(ri,zn),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},Sr=new ri;function Ir(x,I,D,G){this.j=x,this.i=I,this.l=D,this.R=G||1,this.U=new sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kr}function kr(){this.i=null,this.g="",this.h=!1}var Yr={},us={};function K(x,I,D){x.L=1,x.v=mn(Ot(I)),x.m=D,x.P=!0,xe(x,null)}function xe(x,I){x.F=Date.now(),je(x),x.A=Ot(x.v);var D=x.A,G=x.R;Array.isArray(G)||(G=[String(G)]),Un(D.i,"t",G),x.C=0,D=x.j.J,x.h=new kr,x.g=bl(x.j,D?I:null,!x.m),0<x.O&&(x.M=new Qn(P(x.Y,x,x.g),x.O)),I=x.U,D=x.g,G=x.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(Jt[0]=_e.toString()),_e=Jt);for(var ke=0;ke<_e.length;ke++){var ct=Ne(D,_e[ke],G||I.handleEvent,!1,I.h||I);if(!ct)break;I.g[ct.key]=ct}I=x.H?j(x.H):{},x.m?(x.u||(x.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,I)):(x.u="GET",x.g.ea(x.A,x.u,null,I)),yr(),tr(x.i,x.u,x.A,x.l,x.R,x.m)}Ir.prototype.ca=function(x){x=x.target;const I=this.M;I&&Fi(x)==3?I.j():this.Y(x)},Ir.prototype.Y=function(x){try{if(x==this.g)e:{const cr=Fi(this.g);var I=this.g.Ba();const br=this.g.Z();if(!(3>cr)&&(cr!=3||this.g&&(this.h.h||this.g.oa()||yl(this.g)))){this.J||cr!=4||I==7||(I==8||0>=br?yr(3):yr(2)),he(this);var D=this.g.Z();this.X=D;t:if(V(this)){var G=yl(this.g);x="";var _e=G.length,ke=Fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bt(this),ut(this);var ct="";break t}this.h.i=new _.TextDecoder}for(I=0;I<_e;I++)this.h.h=!0,x+=this.h.i.decode(G[I],{stream:!(ke&&I==_e-1)});G.length=0,this.h.g+=x,this.C=0,ct=this.h.g}else ct=this.g.oa();if(this.o=D==200,ci(this.i,this.u,this.A,this.l,this.R,cr,D),this.o){if(this.T&&!this.K){t:{if(this.g){var un,rr=this.g;if((un=rr.g?rr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ue(un)){var hn=un;break t}}hn=null}if(D=hn)Zn(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bt(this,D);else{this.o=!1,this.s=3,an(12),bt(this),ut(this);break e}}if(this.P){D=!0;let Pr;for(;!this.J&&this.C<ct.length;)if(Pr=ae(this,ct),Pr==us){cr==4&&(this.s=4,an(14),D=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pr==Yr){this.s=4,an(15),Zn(this.i,this.l,ct,"[Invalid Chunk]"),D=!1;break}else Zn(this.i,this.l,Pr,null),Bt(this,Pr);if(V(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cr!=4||ct.length!=0||this.h.h||(this.s=1,an(16),D=!1),this.o=this.o&&D,!D)Zn(this.i,this.l,ct,"[Invalid Chunked Response]"),bt(this),ut(this);else if(0<ct.length&&!this.W){this.W=!0;var Xn=this.j;Xn.g==this&&Xn.ba&&!Xn.M&&(Xn.j.info("Great, no buffering proxy detected. Bytes received: "+ct.length),Rs(Xn),Xn.M=!0,an(11))}}else Zn(this.i,this.l,ct,null),Bt(this,ct);cr==4&&bt(this),this.o&&!this.J&&(cr==4?Yn(this.j,this):(this.o=!1,je(this)))}else An(this.g),D==400&&0<ct.indexOf("Unknown SID")?(this.s=3,an(12)):(this.s=0,an(13)),bt(this),ut(this)}}}catch{}finally{}};function V(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function ae(x,I){var D=x.C,G=I.indexOf(`
`,D);return G==-1?us:(D=Number(I.substring(D,G)),isNaN(D)?Yr:(G+=1,G+D>I.length?us:(I=I.slice(G,G+D),x.C=G+D,I)))}Ir.prototype.cancel=function(){this.J=!0,bt(this)};function je(x){x.S=Date.now()+x.I,tt(x,x.I)}function tt(x,I){if(x.B!=null)throw Error("WatchDog timer not null");x.B=hr(P(x.ba,x),I)}function he(x){x.B&&(_.clearTimeout(x.B),x.B=null)}Ir.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(lt(this.i,this.A),this.L!=2&&(yr(),an(17)),bt(this),this.s=2,ut(this)):tt(this,this.S-x)};function ut(x){x.j.G==0||x.J||Yn(x.j,x)}function bt(x){he(x);var I=x.M;I&&typeof I.ma=="function"&&I.ma(),x.M=null,He(x.U),x.g&&(I=x.g,x.g=null,I.abort(),I.ma())}function Bt(x,I){try{var D=x.j;if(D.G!=0&&(D.g==x||Rn(D.h,x))){if(!x.K&&Rn(D.h,x)&&D.G==3){try{var G=D.Da.g.parse(I)}catch{G=null}if(Array.isArray(G)&&G.length==3){var _e=G;if(_e[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<x.F)Xs(D),Ga(D);else break e;Bo(D),an(18)}}else D.za=_e[1],0<D.za-D.T&&37500>_e[2]&&D.F&&D.v==0&&!D.C&&(D.C=hr(P(D.Za,D),6e3));if(1>=Ct(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else ui(D,11)}else if((x.K||D.g==x)&&Xs(D),!ue(I))for(_e=D.Da.g.parse(I),I=0;I<_e.length;I++){let hn=_e[I];if(D.T=hn[0],hn=hn[1],D.G==2)if(hn[0]=="c"){D.K=hn[1],D.ia=hn[2];const Xn=hn[3];Xn!=null&&(D.la=Xn,D.j.info("VER="+D.la));const cr=hn[4];cr!=null&&(D.Aa=cr,D.j.info("SVER="+D.Aa));const br=hn[5];br!=null&&typeof br=="number"&&0<br&&(G=1.5*br,D.L=G,D.j.info("backChannelRequestTimeoutMs_="+G)),G=D;const Pr=x.g;if(Pr){const Rr=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rr){var ke=G.h;ke.g||Rr.indexOf("spdy")==-1&&Rr.indexOf("quic")==-1&&Rr.indexOf("h2")==-1||(ke.j=ke.l,ke.g=new Set,ke.h&&(ar(ke,ke.h),ke.h=null))}if(G.D){const jo=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(G.ya=jo,rt(G.I,G.D,jo))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-x.F,D.j.info("Handshake RTT: "+D.R+"ms")),G=D;var ct=x;if(G.qa=Tt(G,G.J?G.ia:null,G.W),ct.K){fr(G.h,ct);var un=ct,rr=G.L;rr&&(un.I=rr),un.B&&(he(un),je(un)),G.g=ct}else wl(G);0<D.i.length&&Gt(D)}else hn[0]!="stop"&&hn[0]!="close"||ui(D,7);else D.G==3&&(hn[0]=="stop"||hn[0]=="close"?hn[0]=="stop"?ui(D,7):zi(D):hn[0]!="noop"&&D.l&&D.l.ta(hn),D.v=0)}}yr(4)}catch{}}var nn=class{constructor(x,I){this.g=x,this.map=I}};function jt(x){this.l=x||10,_.PerformanceNavigationTiming?(x=_.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nt(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Ct(x){return x.h?1:x.g?x.g.size:0}function Rn(x,I){return x.h?x.h==I:x.g?x.g.has(I):!1}function ar(x,I){x.g?x.g.add(I):x.h=I}function fr(x,I){x.h&&x.h==I?x.h=null:x.g&&x.g.has(I)&&x.g.delete(I)}jt.prototype.cancel=function(){if(this.i=Wt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Wt(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let I=x.i;for(const D of x.g.values())I=I.concat(D.D);return I}return re(x.i)}function Ei(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(E(x)){for(var I=[],D=x.length,G=0;G<D;G++)I.push(x[G]);return I}I=[],D=0;for(G in x)I[D++]=x[G];return I}function Ha(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(E(x)||typeof x=="string"){var I=[];x=x.length;for(var D=0;D<x;D++)I.push(D);return I}I=[],D=0;for(const G in x)I[D++]=G;return I}}}function Dn(x,I){if(x.forEach&&typeof x.forEach=="function")x.forEach(I,void 0);else if(E(x)||typeof x=="string")Array.prototype.forEach.call(x,I,void 0);else for(var D=Ha(x),G=Ei(x),_e=G.length,ke=0;ke<_e;ke++)I.call(void 0,G[ke],D&&D[ke],x)}var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cn(x,I){if(x){x=x.split("&");for(var D=0;D<x.length;D++){var G=x[D].indexOf("="),_e=null;if(0<=G){var ke=x[D].substring(0,G);_e=x[D].substring(G+1)}else ke=x[D];I(ke,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Ht(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof Ht){this.h=x.h,vn(this,x.j),this.o=x.o,this.g=x.g,be(this,x.s),this.l=x.l;var I=x.i,D=new Wr;D.i=I.i,I.g&&(D.g=new Map(I.g),D.h=I.h),q(this,D),this.m=x.m}else x&&(I=String(x).match(vi))?(this.h=!1,vn(this,I[1]||"",!0),this.o=Gn(I[2]||""),this.g=Gn(I[3]||"",!0),be(this,I[4]),this.l=Gn(I[5]||"",!0),q(this,I[6]||"",!0),this.m=Gn(I[7]||"")):(this.h=!1,this.i=new Wr(null,this.h))}Ht.prototype.toString=function(){var x=[],I=this.j;I&&x.push(Xr(I,qn,!0),":");var D=this.g;return(D||I=="file")&&(x.push("//"),(I=this.o)&&x.push(Xr(I,qn,!0),"@"),x.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&x.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&x.push("/"),x.push(Xr(D,D.charAt(0)=="/"?wn:_t,!0))),(D=this.i.toString())&&x.push("?",D),(D=this.m)&&x.push("#",Xr(D,Hs)),x.join("")};function Ot(x){return new Ht(x)}function vn(x,I,D){x.j=D?Gn(I,!0):I,x.j&&(x.j=x.j.replace(/:$/,""))}function be(x,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);x.s=I}else x.s=null}function q(x,I,D){I instanceof Wr?(x.i=I,Vi(x.i,x.h)):(D||(I=Xr(I,zs)),x.i=new Wr(I,x.h))}function rt(x,I,D){x.i.set(I,D)}function mn(x){return rt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Gn(x,I){return x?I?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Xr(x,I,D){return typeof x=="string"?(x=encodeURI(x).replace(I,Ui),D&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Ui(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var qn=/[#\/\?@]/g,_t=/[#\?:]/g,wn=/[#\?]/g,zs=/[#\?@]/g,Hs=/#/g;function Wr(x,I){this.h=this.g=null,this.i=x||null,this.j=!!I}function Lr(x){x.g||(x.g=new Map,x.h=0,x.i&&cn(x.i,function(I,D){x.add(decodeURIComponent(I.replace(/\+/g," ")),D)}))}i=Wr.prototype,i.add=function(x,I){Lr(this),this.i=null,x=Mi(this,x);var D=this.g.get(x);return D||this.g.set(x,D=[]),D.push(I),this.h+=1,this};function Di(x,I){Lr(x),I=Mi(x,I),x.g.has(I)&&(x.i=null,x.h-=x.g.get(I).length,x.g.delete(I))}function _i(x,I){return Lr(x),I=Mi(x,I),x.g.has(I)}i.forEach=function(x,I){Lr(this),this.g.forEach(function(D,G){D.forEach(function(_e){x.call(I,_e,G,this)},this)},this)},i.na=function(){Lr(this);const x=Array.from(this.g.values()),I=Array.from(this.g.keys()),D=[];for(let G=0;G<I.length;G++){const _e=x[G];for(let ke=0;ke<_e.length;ke++)D.push(I[G])}return D},i.V=function(x){Lr(this);let I=[];if(typeof x=="string")_i(this,x)&&(I=I.concat(this.g.get(Mi(this,x))));else{x=Array.from(this.g.values());for(let D=0;D<x.length;D++)I=I.concat(x[D])}return I},i.set=function(x,I){return Lr(this),this.i=null,x=Mi(this,x),_i(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[I]),this.h+=1,this},i.get=function(x,I){return x?(x=this.V(x),0<x.length?String(x[0]):I):I};function Un(x,I,D){Di(x,I),0<D.length&&(x.i=null,x.g.set(Mi(x,I),re(D)),x.h+=D.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],I=Array.from(this.g.keys());for(var D=0;D<I.length;D++){var G=I[D];const ke=encodeURIComponent(String(G)),ct=this.V(G);for(G=0;G<ct.length;G++){var _e=ke;ct[G]!==""&&(_e+="="+encodeURIComponent(String(ct[G]))),x.push(_e)}}return this.i=x.join("&")};function Mi(x,I){return I=String(I),x.j&&(I=I.toLowerCase()),I}function Vi(x,I){I&&!x.j&&(Lr(x),x.i=null,x.g.forEach(function(D,G){var _e=G.toLowerCase();G!=_e&&(Di(this,G),Un(this,_e,D))},x)),x.j=I}function Rt(x,I){const D=new xr;if(_.Image){const G=new Image;G.onload=U(kt,D,"TestLoadImage: loaded",!0,I,G),G.onerror=U(kt,D,"TestLoadImage: error",!1,I,G),G.onabort=U(kt,D,"TestLoadImage: abort",!1,I,G),G.ontimeout=U(kt,D,"TestLoadImage: timeout",!1,I,G),_.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=x}else I(!1)}function la(x,I){const D=new xr,G=new AbortController,_e=setTimeout(()=>{G.abort(),kt(D,"TestPingServer: timeout",!1,I)},1e4);fetch(x,{signal:G.signal}).then(ke=>{clearTimeout(_e),ke.ok?kt(D,"TestPingServer: ok",!0,I):kt(D,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(_e),kt(D,"TestPingServer: error",!1,I)})}function kt(x,I,D,G,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),G(D)}catch{}}function nr(){this.g=new Xt}function hs(x,I,D){const G=D||"";try{Dn(x,function(_e,ke){let ct=_e;w(_e)&&(ct=xn(_e)),I.push(G+ke+"="+encodeURIComponent(ct))})}catch(_e){throw I.push(G+"type="+encodeURIComponent("_badmap")),_e}}function fs(x){this.l=x.Ub||null,this.j=x.eb||!1}X(fs,zn),fs.prototype.g=function(){return new ds(this.l,this.j)},fs.prototype.i=function(x){return function(){return x}}({});function ds(x,I){et.call(this),this.D=x,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}X(ds,et),i=ds.prototype,i.open=function(x,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=I,this.readyState=1,Ci(this)},i.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(I.body=x),(this.D||_).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},i.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zi(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zi(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}i.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var I=x.value?x.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!x.done}))&&(this.response=this.responseText+=I)}x.done?gs(this):Ci(this),this.readyState==3&&Zi(this)}},i.Ra=function(x){this.g&&(this.response=this.responseText=x,gs(this))},i.Qa=function(x){this.g&&(this.response=x,gs(this))},i.ga=function(){this.g&&gs(this)};function gs(x){x.readyState=4,x.l=null,x.j=null,x.v=null,Ci(x)}i.setRequestHeader=function(x,I){this.u.append(x,I)},i.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],I=this.h.entries();for(var D=I.next();!D.done;)D=D.value,x.push(D[0]+": "+D[1]),D=I.next();return x.join(`\r
`)};function Ci(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Is(x){let I="";return Pe(x,function(D,G){I+=G,I+=":",I+=D,I+=`\r
`}),I}function or(x,I,D){e:{for(G in D){var G=!1;break e}G=!0}G||(D=Is(D),typeof x=="string"?D!=null&&encodeURIComponent(String(D)):rt(x,I,D))}function _n(x){et.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}X(_n,et);var ms=/^https?$/i,$i=["POST","PUT"];i=_n.prototype,i.Ha=function(x){this.J=x},i.ea=function(x,I,D,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);I=I?I.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sr.g(),this.v=this.o?Or(this.o):Or(Sr),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(I,String(x),!0),this.B=!1}catch(ke){Qr(this,ke);return}if(x=D||"",D=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var _e in G)D.set(_e,G[_e]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const ke of G.keys())D.set(ke,G.get(ke));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(D.keys()).find(ke=>ke.toLowerCase()=="content-type"),_e=_.FormData&&x instanceof _.FormData,!(0<=Array.prototype.indexOf.call($i,I,void 0))||G||_e||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ke,ct]of D)this.g.setRequestHeader(ke,ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ha(this),this.u=!0,this.g.send(x),this.u=!1}catch(ke){Qr(this,ke)}};function Qr(x,I){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=I,x.m=5,ca(x),Ji(x)}function ca(x){x.A||(x.A=!0,at(x,"complete"),at(x,"error"))}i.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,at(this,"complete"),at(this,"abort"),Ji(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ji(this,!0)),_n.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ua(this):this.bb())},i.bb=function(){ua(this)};function ua(x){if(x.h&&typeof y<"u"&&(!x.v[1]||Fi(x)!=4||x.Z()!=2)){if(x.u&&Fi(x)==4)sn(x.Ea,0,x);else if(at(x,"readystatechange"),Fi(x)==4){x.h=!1;try{const ct=x.Z();e:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var D;if(!(D=I)){var G;if(G=ct===0){var _e=String(x.D).match(vi)[1]||null;!_e&&_.self&&_.self.location&&(_e=_.self.location.protocol.slice(0,-1)),G=!ms.test(_e?_e.toLowerCase():"")}D=G}if(D)at(x,"complete"),at(x,"success");else{x.m=6;try{var ke=2<Fi(x)?x.g.statusText:""}catch{ke=""}x.l=ke+" ["+x.Z()+"]",ca(x)}}finally{Ji(x)}}}}function Ji(x,I){if(x.g){ha(x);const D=x.g,G=x.v[0]?()=>{}:null;x.g=null,x.v=null,I||at(x,"ready");try{D.onreadystatechange=G}catch{}}}function ha(x){x.I&&(_.clearTimeout(x.I),x.I=null)}i.isActive=function(){return!!this.g};function Fi(x){return x.g?x.g.readyState:0}i.Z=function(){try{return 2<Fi(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(x){if(this.g){var I=this.g.responseText;return x&&I.indexOf(x)==0&&(I=I.substring(x.length)),Ut(I)}};function yl(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function An(x){const I={};x=(x.g&&2<=Fi(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<x.length;G++){if(ue(x[G]))continue;var D=J(x[G]);const _e=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const ke=I[_e]||[];I[_e]=ke,ke.push(D)}z(I,function(G){return G.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(x,I,D){return D&&D.internalChannelParams&&D.internalChannelParams[x]||I}function Ns(x){this.Aa=0,this.i=[],this.j=new xr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gs("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gs("baseRetryDelayMs",5e3,x),this.cb=Gs("retryDelaySeedMs",1e4,x),this.Wa=Gs("forwardChannelMaxRetries",2,x),this.wa=Gs("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new jt(x&&x.concurrentRequestLimit),this.Da=new nr,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ns.prototype,i.la=8,i.G=1,i.connect=function(x,I,D,G){an(0),this.W=x,this.H=I||{},D&&G!==void 0&&(this.H.OSID=D,this.H.OAID=G),this.F=this.X,this.I=Tt(this,null,this.W),Gt(this)};function zi(x){if(Oe(x),x.G==3){var I=x.U++,D=Ot(x.I);if(rt(D,"SID",x.K),rt(D,"RID",I),rt(D,"TYPE","terminate"),Ys(x,D),I=new Ir(x,x.j,I),I.L=2,I.v=mn(Ot(D)),D=!1,_.navigator&&_.navigator.sendBeacon)try{D=_.navigator.sendBeacon(I.v.toString(),"")}catch{}!D&&_.Image&&(new Image().src=I.v,D=!0),D||(I.g=bl(I.j,null),I.g.ea(I.v)),I.F=Date.now(),je(I)}Tn(x)}function Ga(x){x.g&&(Rs(x),x.g.cancel(),x.g=null)}function Oe(x){Ga(x),x.u&&(_.clearTimeout(x.u),x.u=null),Xs(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&_.clearTimeout(x.s),x.s=null)}function Gt(x){if(!Nt(x.h)&&!x.s){x.s=!0;var I=x.Ga;Te||Q(),Xe||(Te(),Xe=!0),ht.add(I,x),x.B=0}}function Nr(x,I){return Ct(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=I.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=hr(P(x.Ga,x,I),Ws(x,x.B)),x.B++,!0)}i.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const _e=new Ir(this,this.j,x);let ke=this.o;if(this.S&&(ke?(ke=j(ke),F(ke,this.S)):ke=this.S),this.m!==null||this.O||(_e.H=ke,ke=null),this.P)e:{for(var I=0,D=0;D<this.i.length;D++){t:{var G=this.i[D];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(I+=G,4096<I){I=D;break e}if(I===4096||D===this.i.length-1){I=D+1;break e}}I=1e3}else I=1e3;I=xl(this,_e,I),D=Ot(this.I),rt(D,"RID",x),rt(D,"CVER",22),this.D&&rt(D,"X-HTTP-Session-Id",this.D),Ys(this,D),ke&&(this.O?I="headers="+encodeURIComponent(String(Is(ke)))+"&"+I:this.m&&or(D,this.m,ke)),ar(this.h,_e),this.Ua&&rt(D,"TYPE","init"),this.P?(rt(D,"$req",I),rt(D,"SID","null"),_e.T=!0,K(_e,D,null)):K(_e,D,I),this.G=2}}else this.G==3&&(x?qs(this,x):this.i.length==0||Nt(this.h)||qs(this))};function qs(x,I){var D;I?D=I.l:D=x.U++;const G=Ot(x.I);rt(G,"SID",x.K),rt(G,"RID",D),rt(G,"AID",x.T),Ys(x,G),x.m&&x.o&&or(G,x.m,x.o),D=new Ir(x,x.j,D,x.B+1),x.m===null&&(D.H=x.o),I&&(x.i=I.D.concat(x.i)),I=xl(x,D,1e3),D.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),ar(x.h,D),K(D,G,I)}function Ys(x,I){x.H&&Pe(x.H,function(D,G){rt(I,G,D)}),x.l&&Dn({},function(D,G){rt(I,G,D)})}function xl(x,I,D){D=Math.min(x.i.length,D);var G=x.l?P(x.l.Na,x.l,x):null;e:{var _e=x.i;let ke=-1;for(;;){const ct=["count="+D];ke==-1?0<D?(ke=_e[0].g,ct.push("ofs="+ke)):ke=0:ct.push("ofs="+ke);let un=!0;for(let rr=0;rr<D;rr++){let hn=_e[rr].g;const Xn=_e[rr].map;if(hn-=ke,0>hn)ke=Math.max(0,_e[rr].g-100),un=!1;else try{hs(Xn,ct,"req"+hn+"_")}catch{G&&G(Xn)}}if(un){G=ct.join("&");break e}}}return x=x.i.splice(0,D),I.D=x,G}function wl(x){if(!x.g&&!x.u){x.Y=1;var I=x.Fa;Te||Q(),Xe||(Te(),Xe=!0),ht.add(I,x),x.v=0}}function Bo(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=hr(P(x.Fa,x),Ws(x,x.v)),x.v++,!0)}i.Fa=function(){if(this.u=null,lr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=hr(P(this.ab,this),x)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,an(10),Ga(this),lr(this))};function Rs(x){x.A!=null&&(_.clearTimeout(x.A),x.A=null)}function lr(x){x.g=new Ir(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var I=Ot(x.qa);rt(I,"RID","rpc"),rt(I,"SID",x.K),rt(I,"AID",x.T),rt(I,"CI",x.F?"0":"1"),!x.F&&x.ja&&rt(I,"TO",x.ja),rt(I,"TYPE","xmlhttp"),Ys(x,I),x.m&&x.o&&or(I,x.m,x.o),x.L&&(x.g.I=x.L);var D=x.g;x=x.ia,D.L=1,D.v=mn(Ot(I)),D.m=null,D.P=!0,xe(D,x)}i.Za=function(){this.C!=null&&(this.C=null,Ga(this),Bo(this),an(19))};function Xs(x){x.C!=null&&(_.clearTimeout(x.C),x.C=null)}function Yn(x,I){var D=null;if(x.g==I){Xs(x),Rs(x),x.g=null;var G=2}else if(Rn(x.h,I))D=I.D,fr(x.h,I),G=1;else return;if(x.G!=0){if(I.o)if(G==1){D=I.m?I.m.length:0,I=Date.now()-I.F;var _e=x.B;G=Tr(),at(G,new Fs(G,D)),Gt(x)}else wl(x);else if(_e=I.s,_e==3||_e==0&&0<I.X||!(G==1&&Nr(x,I)||G==2&&Bo(x)))switch(D&&0<D.length&&(I=x.h,I.i=I.i.concat(D)),_e){case 1:ui(x,5);break;case 4:ui(x,10);break;case 3:ui(x,6);break;default:ui(x,2)}}}function Ws(x,I){let D=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(D*=2),D*I}function ui(x,I){if(x.j.info("Error code "+I),I==2){var D=P(x.fb,x),G=x.Xa;const _e=!G;G=new Ht(G||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||vn(G,"https"),mn(G),_e?Rt(G.toString(),D):la(G.toString(),D)}else an(2);x.G=0,x.l&&x.l.sa(I),Tn(x),Oe(x)}i.fb=function(x){x?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function Tn(x){if(x.G=0,x.ka=[],x.l){const I=Wt(x.h);(I.length!=0||x.i.length!=0)&&(Y(x.ka,I),Y(x.ka,x.i),x.h.i.length=0,re(x.i),x.i.length=0),x.l.ra()}}function Tt(x,I,D){var G=D instanceof Ht?Ot(D):new Ht(D);if(G.g!="")I&&(G.g=I+"."+G.g),be(G,G.s);else{var _e=_.location;G=_e.protocol,I=I?I+"."+_e.hostname:_e.hostname,_e=+_e.port;var ke=new Ht(null);G&&vn(ke,G),I&&(ke.g=I),_e&&be(ke,_e),D&&(ke.l=D),G=ke}return D=x.D,I=x.ya,D&&I&&rt(G,D,I),rt(G,"VER",x.la),Ys(x,G),G}function bl(x,I,D){if(I&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=x.Ca&&!x.pa?new _n(new fs({eb:D})):new _n(x.pa),I.Ha(x.J),I}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function On(){}i=On.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Hi(){}Hi.prototype.g=function(x,I){return new wr(x,I)};function wr(x,I){et.call(this),this.g=new Ns(I),this.l=x,this.h=I&&I.messageUrlParams||null,x=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(x?x["X-WebChannel-Content-Type"]=I.messageContentType:x={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(x?x["X-WebChannel-Client-Profile"]=I.va:x={"X-WebChannel-Client-Profile":I.va}),this.g.S=x,(x=I&&I.Sb)&&!ue(x)&&(this.g.m=x),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!ue(I)&&(this.g.D=I,x=this.h,x!==null&&I in x&&(x=this.h,I in x&&delete x[I])),this.j=new Gi(this)}X(wr,et),wr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wr.prototype.close=function(){zi(this.g)},wr.prototype.o=function(x){var I=this.g;if(typeof x=="string"){var D={};D.__data__=x,x=D}else this.u&&(D={},D.__data__=xn(x),x=D);I.i.push(new nn(I.Ya++,x)),I.G==3&&Gt(I)},wr.prototype.N=function(){this.g.l=null,delete this.j,zi(this.g),delete this.g,wr.aa.N.call(this)};function El(x){Kn.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var I=x.__sm__;if(I){e:{for(const D in I){x=D;break e}x=void 0}(this.i=x)&&(x=this.i,I=I!==null&&x in I?I[x]:void 0),this.data=I}else this.data=x}X(El,Kn);function Oi(){qr.call(this),this.status=1}X(Oi,qr);function Gi(x){this.g=x}X(Gi,On),Gi.prototype.ua=function(){at(this.g,"a")},Gi.prototype.ta=function(x){at(this.g,new El(x))},Gi.prototype.sa=function(x){at(this.g,new Oi)},Gi.prototype.ra=function(){at(this.g,"b")},Hi.prototype.createWebChannel=Hi.prototype.g,wr.prototype.send=wr.prototype.o,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,Ww=function(){return new Hi},Xw=function(){return Tr()},Yw=pr,b1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jn.NO_ERROR=0,jn.TIMEOUT=8,jn.HTTP_ERROR=6,tf=jn,Mn.COMPLETE="complete",qw=Mn,Gr.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",et.prototype.listen=et.prototype.K,cu=Gr,_n.prototype.listenOnce=_n.prototype.L,_n.prototype.getLastError=_n.prototype.Ka,_n.prototype.getLastErrorCode=_n.prototype.Ba,_n.prototype.getStatus=_n.prototype.Z,_n.prototype.getResponseJson=_n.prototype.Oa,_n.prototype.getResponseText=_n.prototype.oa,_n.prototype.send=_n.prototype.ea,_n.prototype.setWithCredentials=_n.prototype.Ha,Gw=_n}).apply(typeof Gh<"u"?Gh:typeof self<"u"?self:typeof window<"u"?window:{});const by="@firebase/firestore",Ey="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=new W1("@firebase/firestore");function Wl(){return cl.logLevel}function gt(i,...e){if(cl.logLevel<=dn.DEBUG){const t=e.map(lg);cl.debug(`Firestore (${pc}): ${i}`,...t)}}function ja(i,...e){if(cl.logLevel<=dn.ERROR){const t=e.map(lg);cl.error(`Firestore (${pc}): ${i}`,...t)}}function ac(i,...e){if(cl.logLevel<=dn.WARN){const t=e.map(lg);cl.warn(`Firestore (${pc}): ${i}`,...t)}}function lg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(i="Unexpected state"){const e=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: `+i;throw ja(e),new Error(e)}function kn(i,e){i||Vt()}function Kt(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends Fa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ii.UNAUTHENTICATED))}shutdown(){}}class E3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class v3{constructor(e){this.t=e,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){kn(this.o===void 0);let s=this.i;const c=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let h=new La;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new La,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const E=h;e.enqueueRetryable(async()=>{await E.promise,await c(this.currentUser)})},_=E=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new La)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(kn(typeof s.accessToken=="string"),new Qw(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kn(e===null||typeof e=="string"),new Ii(e)}}class _3{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class C3{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new _3(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A3{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ls(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){kn(this.o===void 0);const s=h=>{h.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const y=h.token!==this.R;return this.R=h.token,gt("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?t(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>s(h))};const c=h=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>c(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?c(h):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new vy(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kn(typeof t.token=="string"),this.R=t.token,new vy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const c=T3(40);for(let h=0;h<c.length;++h)s.length<20&&c[h]<t&&(s+=e.charAt(c[h]%62))}return s}}function yn(i,e){return i<e?-1:i>e?1:0}function oc(i,e,t){return i.length===e.length&&i.every((s,c)=>t(s,e[c]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=-62135596800,Cy=1e6;class ei{static now(){return ei.fromMillis(Date.now())}static fromDate(e){return ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Cy);return new ei(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_y)throw new yt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cy}_compareTo(e){return this.seconds===e.seconds?yn(this.nanoseconds,e.nanoseconds):yn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-_y;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new ei(0,0))}static max(){return new Yt(new ei(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="__name__";class na{constructor(e,t,s){t===void 0?t=0:t>e.length&&Vt(),s===void 0?s=e.length-t:s>e.length-t&&Vt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return na.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof na?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const h=na.compareSegments(e.get(c),t.get(c));if(h!==0)return h}return Math.sign(e.length-t.length)}static compareSegments(e,t){const s=na.isNumericId(e),c=na.isNumericId(t);return s&&!c?-1:!s&&c?1:s&&c?na.extractNumericId(e).compare(na.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _o.fromString(e.substring(4,e.length-2))}}class er extends na{construct(e,t,s){return new er(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new yt(Ke.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new er(t)}static emptyPath(){return new er([])}}const S3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xi extends na{construct(e,t,s){return new xi(e,t,s)}static isValidIdentifier(e){return S3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ay}static keyField(){return new xi([Ay])}static fromServerFormat(e){const t=[];let s="",c=0;const h=()=>{if(s.length===0)throw new yt(Ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let y=!1;for(;c<e.length;){const _=e[c];if(_==="\\"){if(c+1===e.length)throw new yt(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[c+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new yt(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=E,c+=2}else _==="`"?(y=!y,c++):_!=="."||y?(s+=_,c++):(h(),c++)}if(h(),y)throw new yt(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xi(t)}static emptyPath(){return new xi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.path=e}static fromPath(e){return new Dt(er.fromString(e))}static fromName(e){return new Dt(er.fromString(e).popFirst(5))}static empty(){return new Dt(er.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&er.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return er.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Dt(new er(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=-1;function I3(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,c=Yt.fromTimestamp(s===1e9?new ei(t+1,0):new ei(t,s));return new To(c,Dt.empty(),e)}function N3(i){return new To(i.readTime,i.key,vu)}class To{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new To(Yt.min(),Dt.empty(),vu)}static max(){return new To(Yt.max(),Dt.empty(),vu)}}function R3(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Dt.comparator(i.documentKey,e.documentKey),t!==0?t:yn(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(i){if(i.code!==Ke.FAILED_PRECONDITION||i.message!==D3)throw i;gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ze((s,c)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,c)},this.catchCallback=h=>{this.wrapFailure(t,h).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ze?t:Ze.resolve(t)}catch(t){return Ze.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ze.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ze.reject(t)}static resolve(e){return new Ze((t,s)=>{t(e)})}static reject(e){return new Ze((t,s)=>{s(e)})}static waitFor(e){return new Ze((t,s)=>{let c=0,h=0,y=!1;e.forEach(_=>{++c,_.next(()=>{++h,y&&h===c&&t()},E=>s(E))}),y=!0,h===c&&t()})}static or(e){let t=Ze.resolve(!1);for(const s of e)t=t.next(c=>c?Ze.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,h)=>{s.push(t.call(this,c,h))}),this.waitFor(s)}static mapArray(e,t){return new Ze((s,c)=>{const h=e.length,y=new Array(h);let _=0;for(let E=0;E<h;E++){const w=E;t(e[w]).next(S=>{y[w]=S,++_,_===h&&s(y)},S=>c(S))}})}static doWhile(e,t){return new Ze((s,c)=>{const h=()=>{e()===!0?t().next(()=>{h()},c):s()};h()})}}function O3(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xc(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.oe(s),this._e=s=>t.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}zf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=-1;function Hf(i){return i==null}function xf(i){return i===0&&1/i==-1/0}function k3(i){return typeof i=="number"&&Number.isInteger(i)&&!xf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="";function L3(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Ty(e)),e=P3(i.get(t),e);return Ty(e)}function P3(i,e){let t=e;const s=i.length;for(let c=0;c<s;c++){const h=i.charAt(c);switch(h){case"\0":t+="";break;case Zw:t+="";break;default:t+=h}}return t}function Ty(i){return i+Zw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ko(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function $w(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(c===0)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=t?s(e.key,t):1,t&&c&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,s,c,h){this.key=e,this.value=t,this.color=s??yi.RED,this.left=c??yi.EMPTY,this.right=h??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,h){return new yi(e??this.key,t??this.value,s??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const h=s(e,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(e,t,s),null):h===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return yi.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Vt();const e=this.left.check();if(e!==this.right.check())throw Vt();return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1;yi.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt()}get value(){throw Vt()}get color(){throw Vt()}get left(){throw Vt()}get right(){throw Vt()}copy(e,t,s,c,h){return this}insert(e,t,s){return new yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Iy(this.data.getIterator())}getIteratorFrom(e){return new Iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ti)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(this.comparator(c,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ti(this.comparator);return t.data=e,t}}class Iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.fields=e,e.sort(xi.comparator)}static empty(){return new ls([])}unionWith(e){let t=new ti(xi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Jw("Invalid base64 string: "+h):h}}(e);return new wi(t)}static fromUint8Array(e){const t=function(c){let h="";for(let y=0;y<c.length;++y)h+=String.fromCharCode(c[y]);return h}(e);return new wi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let c=0;c<t.length;c++)s[c]=t.charCodeAt(c);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wi.EMPTY_BYTE_STRING=new wi("");const B3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(i){if(kn(!!i),typeof i=="string"){let e=0;const t=B3.exec(i);if(kn(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mr(i.seconds),nanos:Mr(i.nanos)}}function Mr(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Io(i){return typeof i=="string"?wi.fromBase64String(i):wi.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="server_timestamp",tb="__type__",nb="__previous_value__",rb="__local_write_time__";function ug(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[tb])===null||t===void 0?void 0:t.stringValue)===eb}function Gf(i){const e=i.mapValue.fields[nb];return ug(e)?Gf(e):e}function _u(i){const e=So(i.mapValue.fields[rb].timestampValue);return new ei(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,t,s,c,h,y,_,E,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=h,this.forceLongPolling=y,this.autoDetectLongPolling=_,this.longPollingOptions=E,this.useFetchStreams=w}}const wf="(default)";class Cu{constructor(e,t){this.projectId=e,this.database=t||wf}static empty(){return new Cu("","")}get isDefaultDatabase(){return this.database===wf}isEqual(e){return e instanceof Cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="__type__",U3="__max__",Yh={mapValue:{}},sb="__vector__",bf="value";function No(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ug(i)?4:F3(i)?9007199254740991:V3(i)?10:11:Vt()}function oa(i,e){if(i===e)return!0;const t=No(i);if(t!==No(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _u(i).isEqual(_u(e));case 3:return function(c,h){if(typeof c.timestampValue=="string"&&typeof h.timestampValue=="string"&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const y=So(c.timestampValue),_=So(h.timestampValue);return y.seconds===_.seconds&&y.nanos===_.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(c,h){return Io(c.bytesValue).isEqual(Io(h.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(c,h){return Mr(c.geoPointValue.latitude)===Mr(h.geoPointValue.latitude)&&Mr(c.geoPointValue.longitude)===Mr(h.geoPointValue.longitude)}(i,e);case 2:return function(c,h){if("integerValue"in c&&"integerValue"in h)return Mr(c.integerValue)===Mr(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const y=Mr(c.doubleValue),_=Mr(h.doubleValue);return y===_?xf(y)===xf(_):isNaN(y)&&isNaN(_)}return!1}(i,e);case 9:return oc(i.arrayValue.values||[],e.arrayValue.values||[],oa);case 10:case 11:return function(c,h){const y=c.mapValue.fields||{},_=h.mapValue.fields||{};if(Sy(y)!==Sy(_))return!1;for(const E in y)if(y.hasOwnProperty(E)&&(_[E]===void 0||!oa(y[E],_[E])))return!1;return!0}(i,e);default:return Vt()}}function Au(i,e){return(i.values||[]).find(t=>oa(t,e))!==void 0}function lc(i,e){if(i===e)return 0;const t=No(i),s=No(e);if(t!==s)return yn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return yn(i.booleanValue,e.booleanValue);case 2:return function(h,y){const _=Mr(h.integerValue||h.doubleValue),E=Mr(y.integerValue||y.doubleValue);return _<E?-1:_>E?1:_===E?0:isNaN(_)?isNaN(E)?0:-1:1}(i,e);case 3:return Ny(i.timestampValue,e.timestampValue);case 4:return Ny(_u(i),_u(e));case 5:return yn(i.stringValue,e.stringValue);case 6:return function(h,y){const _=Io(h),E=Io(y);return _.compareTo(E)}(i.bytesValue,e.bytesValue);case 7:return function(h,y){const _=h.split("/"),E=y.split("/");for(let w=0;w<_.length&&w<E.length;w++){const S=yn(_[w],E[w]);if(S!==0)return S}return yn(_.length,E.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,y){const _=yn(Mr(h.latitude),Mr(y.latitude));return _!==0?_:yn(Mr(h.longitude),Mr(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Ry(i.arrayValue,e.arrayValue);case 10:return function(h,y){var _,E,w,S;const N=h.fields||{},P=y.fields||{},U=(_=N[bf])===null||_===void 0?void 0:_.arrayValue,X=(E=P[bf])===null||E===void 0?void 0:E.arrayValue,re=yn(((w=U==null?void 0:U.values)===null||w===void 0?void 0:w.length)||0,((S=X==null?void 0:X.values)===null||S===void 0?void 0:S.length)||0);return re!==0?re:Ry(U,X)}(i.mapValue,e.mapValue);case 11:return function(h,y){if(h===Yh.mapValue&&y===Yh.mapValue)return 0;if(h===Yh.mapValue)return 1;if(y===Yh.mapValue)return-1;const _=h.fields||{},E=Object.keys(_),w=y.fields||{},S=Object.keys(w);E.sort(),S.sort();for(let N=0;N<E.length&&N<S.length;++N){const P=yn(E[N],S[N]);if(P!==0)return P;const U=lc(_[E[N]],w[S[N]]);if(U!==0)return U}return yn(E.length,S.length)}(i.mapValue,e.mapValue);default:throw Vt()}}function Ny(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return yn(i,e);const t=So(i),s=So(e),c=yn(t.seconds,s.seconds);return c!==0?c:yn(t.nanos,s.nanos)}function Ry(i,e){const t=i.values||[],s=e.values||[];for(let c=0;c<t.length&&c<s.length;++c){const h=lc(t[c],s[c]);if(h)return h}return yn(t.length,s.length)}function cc(i){return E1(i)}function E1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const s=So(t);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Io(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return Dt.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let s="[",c=!0;for(const h of t.values||[])c?c=!1:s+=",",s+=E1(h);return s+"]"}(i.arrayValue):"mapValue"in i?function(t){const s=Object.keys(t.fields||{}).sort();let c="{",h=!0;for(const y of s)h?h=!1:c+=",",c+=`${y}:${E1(t.fields[y])}`;return c+"}"}(i.mapValue):Vt()}function nf(i){switch(No(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gf(i);return e?16+nf(e):16;case 5:return 2*i.stringValue.length;case 6:return Io(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((c,h)=>c+nf(h),0)}(i.arrayValue);case 10:case 11:return function(s){let c=0;return ko(s.fields,(h,y)=>{c+=h.length+nf(y)}),c}(i.mapValue);default:throw Vt()}}function Dy(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function v1(i){return!!i&&"integerValue"in i}function hg(i){return!!i&&"arrayValue"in i}function My(i){return!!i&&"nullValue"in i}function Oy(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function rf(i){return!!i&&"mapValue"in i}function V3(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[ib])===null||t===void 0?void 0:t.stringValue)===sb}function pu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ko(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=pu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function F3(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===U3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.value=e}static empty(){return new Qi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(t)}setAll(e){let t=xi.emptyPath(),s={},c=[];e.forEach((y,_)=>{if(!t.isImmediateParentOf(_)){const E=this.getFieldsMap(t);this.applyChanges(E,s,c),s={},c=[],t=_.popLast()}y?s[_.lastSegment()]=pu(y):c.push(_.lastSegment())});const h=this.getFieldsMap(t);this.applyChanges(h,s,c)}delete(e){const t=this.field(e.popLast());rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];rf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){ko(t,(c,h)=>e[c]=h);for(const c of s)delete e[c]}clone(){return new Qi(pu(this.value))}}function ab(i){const e=[];return ko(i.fields,(t,s)=>{const c=new xi([t]);if(rf(s)){const h=ab(s.mapValue).fields;if(h.length===0)e.push(c);else for(const y of h)e.push(c.child(y))}else e.push(c)}),new ls(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t,s,c,h,y,_){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=h,this.data=y,this.documentState=_}static newInvalidDocument(e){return new Ni(e,0,Yt.min(),Yt.min(),Yt.min(),Qi.empty(),0)}static newFoundDocument(e,t,s,c){return new Ni(e,1,t,Yt.min(),s,c,0)}static newNoDocument(e,t){return new Ni(e,2,t,Yt.min(),Yt.min(),Qi.empty(),0)}static newUnknownDocument(e,t){return new Ni(e,3,t,Yt.min(),Yt.min(),Qi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ni(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.position=e,this.inclusive=t}}function ky(i,e,t){let s=0;for(let c=0;c<i.position.length;c++){const h=e[c],y=i.position[c];if(h.field.isKeyField()?s=Dt.comparator(Dt.fromName(y.referenceValue),t.key):s=lc(y,t.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ly(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!oa(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t="asc"){this.field=e,this.dir=t}}function z3(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{}class Hr extends ob{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new G3(e,t,s):t==="array-contains"?new X3(e,s):t==="in"?new W3(e,s):t==="not-in"?new Q3(e,s):t==="array-contains-any"?new K3(e,s):new Hr(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new q3(e,s):new Y3(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(lc(t,this.value)):t!==null&&No(this.value)===No(t)&&this.matchesComparison(lc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bs extends ob{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Bs(e,t)}matches(e){return lb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function lb(i){return i.op==="and"}function cb(i){return H3(i)&&lb(i)}function H3(i){for(const e of i.filters)if(e instanceof Bs)return!1;return!0}function _1(i){if(i instanceof Hr)return i.field.canonicalString()+i.op.toString()+cc(i.value);if(cb(i))return i.filters.map(e=>_1(e)).join(",");{const e=i.filters.map(t=>_1(t)).join(",");return`${i.op}(${e})`}}function ub(i,e){return i instanceof Hr?function(s,c){return c instanceof Hr&&s.op===c.op&&s.field.isEqual(c.field)&&oa(s.value,c.value)}(i,e):i instanceof Bs?function(s,c){return c instanceof Bs&&s.op===c.op&&s.filters.length===c.filters.length?s.filters.reduce((h,y,_)=>h&&ub(y,c.filters[_]),!0):!1}(i,e):void Vt()}function hb(i){return i instanceof Hr?function(t){return`${t.field.canonicalString()} ${t.op} ${cc(t.value)}`}(i):i instanceof Bs?function(t){return t.op.toString()+" {"+t.getFilters().map(hb).join(" ,")+"}"}(i):"Filter"}class G3 extends Hr{constructor(e,t,s){super(e,t,s),this.key=Dt.fromName(s.referenceValue)}matches(e){const t=Dt.comparator(e.key,this.key);return this.matchesComparison(t)}}class q3 extends Hr{constructor(e,t){super(e,"in",t),this.keys=fb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Y3 extends Hr{constructor(e,t){super(e,"not-in",t),this.keys=fb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fb(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Dt.fromName(s.referenceValue))}class X3 extends Hr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hg(t)&&Au(t.arrayValue,this.value)}}class W3 extends Hr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Au(this.value.arrayValue,t)}}class Q3 extends Hr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Au(this.value.arrayValue,t)}}class K3 extends Hr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Au(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,t=null,s=[],c=[],h=null,y=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=h,this.startAt=y,this.endAt=_,this.le=null}}function Py(i,e=null,t=[],s=[],c=null,h=null,y=null){return new Z3(i,e,t,s,c,h,y)}function fg(i){const e=Kt(i);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>_1(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(h){return h.field.canonicalString()+h.dir}(s)).join(","),Hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>cc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>cc(s)).join(",")),e.le=t}return e.le}function dg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!z3(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!ub(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ly(i.startAt,e.startAt)&&Ly(i.endAt,e.endAt)}function C1(i){return Dt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t=null,s=[],c=[],h=null,y="F",_=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=h,this.limitType=y,this.startAt=_,this.endAt=E,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function $3(i,e,t,s,c,h,y,_){return new wc(i,e,t,s,c,h,y,_)}function gg(i){return new wc(i)}function By(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function db(i){return i.collectionGroup!==null}function yu(i){const e=Kt(i);if(e.he===null){e.he=[];const t=new Set;for(const h of e.explicitOrderBy)e.he.push(h),t.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(y){let _=new ti(xi.comparator);return y.filters.forEach(E=>{E.getFlattenedFilters().forEach(w=>{w.isInequality()&&(_=_.add(w.field))})}),_})(e).forEach(h=>{t.has(h.canonicalString())||h.isKeyField()||e.he.push(new vf(h,s))}),t.has(xi.keyField().canonicalString())||e.he.push(new vf(xi.keyField(),s))}return e.he}function ia(i){const e=Kt(i);return e.Pe||(e.Pe=J3(e,yu(i))),e.Pe}function J3(i,e){if(i.limitType==="F")return Py(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(c=>{const h=c.dir==="desc"?"asc":"desc";return new vf(c.field,h)});const t=i.endAt?new Ef(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ef(i.startAt.position,i.startAt.inclusive):null;return Py(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function A1(i,e){const t=i.filters.concat([e]);return new wc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function T1(i,e,t){return new wc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function qf(i,e){return dg(ia(i),ia(e))&&i.limitType===e.limitType}function gb(i){return`${fg(ia(i))}|lt:${i.limitType}`}function Ql(i){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(c=>hb(c)).join(", ")}]`),Hf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(c=>function(y){return`${y.field.canonicalString()} (${y.dir})`}(c)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(c=>cc(c)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(c=>cc(c)).join(",")),`Target(${s})`}(ia(i))}; limitType=${i.limitType})`}function Yf(i,e){return e.isFoundDocument()&&function(s,c){const h=c.key.path;return s.collectionGroup!==null?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):Dt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(i,e)&&function(s,c){for(const h of yu(s))if(!h.field.isKeyField()&&c.data.field(h.field)===null)return!1;return!0}(i,e)&&function(s,c){for(const h of s.filters)if(!h.matches(c))return!1;return!0}(i,e)&&function(s,c){return!(s.startAt&&!function(y,_,E){const w=ky(y,_,E);return y.inclusive?w<=0:w<0}(s.startAt,yu(s),c)||s.endAt&&!function(y,_,E){const w=ky(y,_,E);return y.inclusive?w>=0:w>0}(s.endAt,yu(s),c))}(i,e)}function e4(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function mb(i){return(e,t)=>{let s=!1;for(const c of yu(i)){const h=t4(c,e,t);if(h!==0)return h;s=s||c.field.isKeyField()}return 0}}function t4(i,e,t){const s=i.field.isKeyField()?Dt.comparator(e.key,t.key):function(h,y,_){const E=y.data.field(h),w=_.data.field(h);return E!==null&&w!==null?lc(E,w):Vt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[c,h]of s)if(this.equalsFn(c,e))return h}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(c===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],e))return void(c[h]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return s.length===1?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(t,s)=>{for(const[c,h]of s)e(c,h)})}isEmpty(){return $w(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new mr(Dt.comparator);function Ua(){return n4}const pb=new mr(Dt.comparator);function uu(...i){let e=pb;for(const t of i)e=e.insert(t.key,t);return e}function yb(i){let e=pb;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function rl(){return xu()}function xb(){return xu()}function xu(){return new dl(i=>i.toString(),(i,e)=>i.isEqual(e))}const r4=new mr(Dt.comparator),i4=new ti(Dt.comparator);function gn(...i){let e=i4;for(const t of i)e=e.add(t);return e}const s4=new ti(yn);function a4(){return s4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xf(e)?"-0":e}}function wb(i){return{integerValue:""+i}}function o4(i,e){return k3(e)?wb(e):mg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this._=void 0}}function l4(i,e,t){return i instanceof _f?function(c,h){const y={fields:{[tb]:{stringValue:eb},[rb]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&ug(h)&&(h=Gf(h)),h&&(y.fields[nb]=h),{mapValue:y}}(t,e):i instanceof Tu?Eb(i,e):i instanceof Su?vb(i,e):function(c,h){const y=bb(c,h),_=jy(y)+jy(c.Ie);return v1(y)&&v1(c.Ie)?wb(_):mg(c.serializer,_)}(i,e)}function c4(i,e,t){return i instanceof Tu?Eb(i,e):i instanceof Su?vb(i,e):t}function bb(i,e){return i instanceof Cf?function(s){return v1(s)||function(h){return!!h&&"doubleValue"in h}(s)}(e)?e:{integerValue:0}:null}class _f extends Xf{}class Tu extends Xf{constructor(e){super(),this.elements=e}}function Eb(i,e){const t=_b(e);for(const s of i.elements)t.some(c=>oa(c,s))||t.push(s);return{arrayValue:{values:t}}}class Su extends Xf{constructor(e){super(),this.elements=e}}function vb(i,e){let t=_b(e);for(const s of i.elements)t=t.filter(c=>!oa(c,s));return{arrayValue:{values:t}}}class Cf extends Xf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function jy(i){return Mr(i.integerValue||i.doubleValue)}function _b(i){return hg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function u4(i,e){return i.field.isEqual(e.field)&&function(s,c){return s instanceof Tu&&c instanceof Tu||s instanceof Su&&c instanceof Su?oc(s.elements,c.elements,oa):s instanceof Cf&&c instanceof Cf?oa(s.Ie,c.Ie):s instanceof _f&&c instanceof _f}(i.transform,e.transform)}class h4{constructor(e,t){this.version=e,this.transformResults=t}}class Ts{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ts}static exists(e){return new Ts(void 0,e)}static updateTime(e){return new Ts(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Wf{}function Cb(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new pg(i.key,Ts.none()):new Bu(i.key,i.data,Ts.none());{const t=i.data,s=Qi.empty();let c=new ti(xi.comparator);for(let h of e.fields)if(!c.has(h)){let y=t.field(h);y===null&&h.length>1&&(h=h.popLast(),y=t.field(h)),y===null?s.delete(h):s.set(h,y),c=c.add(h)}return new Lo(i.key,s,new ls(c.toArray()),Ts.none())}}function f4(i,e,t){i instanceof Bu?function(c,h,y){const _=c.value.clone(),E=Vy(c.fieldTransforms,h,y.transformResults);_.setAll(E),h.convertToFoundDocument(y.version,_).setHasCommittedMutations()}(i,e,t):i instanceof Lo?function(c,h,y){if(!sf(c.precondition,h))return void h.convertToUnknownDocument(y.version);const _=Vy(c.fieldTransforms,h,y.transformResults),E=h.data;E.setAll(Ab(c)),E.setAll(_),h.convertToFoundDocument(y.version,E).setHasCommittedMutations()}(i,e,t):function(c,h,y){h.convertToNoDocument(y.version).setHasCommittedMutations()}(0,e,t)}function wu(i,e,t,s){return i instanceof Bu?function(h,y,_,E){if(!sf(h.precondition,y))return _;const w=h.value.clone(),S=Fy(h.fieldTransforms,E,y);return w.setAll(S),y.convertToFoundDocument(y.version,w).setHasLocalMutations(),null}(i,e,t,s):i instanceof Lo?function(h,y,_,E){if(!sf(h.precondition,y))return _;const w=Fy(h.fieldTransforms,E,y),S=y.data;return S.setAll(Ab(h)),S.setAll(w),y.convertToFoundDocument(y.version,S).setHasLocalMutations(),_===null?null:_.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(N=>N.field))}(i,e,t,s):function(h,y,_){return sf(h.precondition,y)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):_}(i,e,t)}function d4(i,e){let t=null;for(const s of i.fieldTransforms){const c=e.data.field(s.field),h=bb(s.transform,c||null);h!=null&&(t===null&&(t=Qi.empty()),t.set(s.field,h))}return t||null}function Uy(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,c){return s===void 0&&c===void 0||!(!s||!c)&&oc(s,c,(h,y)=>u4(h,y))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Bu extends Wf{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Lo extends Wf{constructor(e,t,s,c,h=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Ab(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Vy(i,e,t){const s=new Map;kn(i.length===t.length);for(let c=0;c<t.length;c++){const h=i[c],y=h.transform,_=e.data.field(h.field);s.set(h.field,c4(y,_,t[c]))}return s}function Fy(i,e,t){const s=new Map;for(const c of i){const h=c.transform,y=t.data.field(c.field);s.set(c.field,l4(h,y,e))}return s}class pg extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g4 extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(e.key)&&f4(h,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=wu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=wu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=xb();return this.mutations.forEach(c=>{const h=e.get(c.key),y=h.overlayedDocument;let _=this.applyToLocalView(y,h.mutatedFields);_=t.has(c.key)?null:_;const E=Cb(y,_);E!==null&&s.set(c.key,E),y.isValidDocument()||y.convertToNoDocument(Yt.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gn())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,(t,s)=>Uy(t,s))&&oc(this.baseMutations,e.baseMutations,(t,s)=>Uy(t,s))}}class yg{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){kn(e.mutations.length===s.length);let c=function(){return r4}();const h=e.mutations;for(let y=0;y<h.length;y++)c=c.insert(h[y].key,s[y].version);return new yg(e,t,s,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vr,En;function x4(i){switch(i){case Ke.OK:return Vt();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0;default:return Vt()}}function Tb(i){if(i===void 0)return ja("GRPC error has no .code"),Ke.UNKNOWN;switch(i){case Vr.OK:return Ke.OK;case Vr.CANCELLED:return Ke.CANCELLED;case Vr.UNKNOWN:return Ke.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return Ke.INTERNAL;case Vr.UNAVAILABLE:return Ke.UNAVAILABLE;case Vr.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case Vr.NOT_FOUND:return Ke.NOT_FOUND;case Vr.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case Vr.ABORTED:return Ke.ABORTED;case Vr.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case Vr.DATA_LOSS:return Ke.DATA_LOSS;default:return Vt()}}(En=Vr||(Vr={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new _o([4294967295,4294967295],0);function zy(i){const e=w4().encode(i),t=new Hw;return t.update(e),new Uint8Array(t.digest())}function Hy(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new _o([t,s],0),new _o([c,h],0)]}class xg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new hu(`Invalid padding: ${t}`);if(s<0)throw new hu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new hu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new hu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=_o.fromNumber(this.Ee)}Ae(e,t,s){let c=e.add(t.multiply(_o.fromNumber(s)));return c.compare(b4)===1&&(c=new _o([c.getBits(0),c.getBits(1)],0)),c.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=zy(e),[s,c]=Hy(t);for(let h=0;h<this.hashCount;h++){const y=this.Ae(s,c,h);if(!this.Re(y))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),y=new xg(h,c,t);return s.forEach(_=>y.insert(_)),y}insert(e){if(this.Ee===0)return;const t=zy(e),[s,c]=Hy(t);for(let h=0;h<this.hashCount;h++){const y=this.Ae(s,c,h);this.Ve(y)}}Ve(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,s,c,h){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Qf(Yt.min(),c,new mr(yn),Ua(),gn())}}class ju{constructor(e,t,s,c,h){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ju(s,t,gn(),gn(),gn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,s,c){this.me=e,this.removedTargetIds=t,this.key=s,this.fe=c}}class Sb{constructor(e,t){this.targetId=e,this.ge=t}}class Ib{constructor(e,t,s=wi.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class Gy{constructor(){this.pe=0,this.ye=qy(),this.we=wi.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=gn(),t=gn(),s=gn();return this.ye.forEach((c,h)=>{switch(h){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:Vt()}}),new ju(this.we,this.Se,e,t,s)}Me(){this.be=!1,this.ye=qy()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,kn(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class E4{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ua(),this.$e=Xh(),this.Ke=Xh(),this.Ue=new mr(yn)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const s=this.He(t);switch(e.state){case 0:this.Je(t)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(t);break;case 3:this.Je(t)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),s.Ce(e.resumeToken));break;default:Vt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((s,c)=>{this.Je(c)&&t(c)})}Ze(e){const t=e.targetId,s=e.ge.count,c=this.Xe(t);if(c){const h=c.target;if(C1(h))if(s===0){const y=new Dt(h.path);this.ze(t,y,Ni.newNoDocument(y,Yt.min()))}else kn(s===1);else{const y=this.et(t);if(y!==s){const _=this.tt(e),E=_?this.nt(_,e,y):1;if(E!==0){this.Ye(t);const w=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,w)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=t;let y,_;try{y=Io(s).toUint8Array()}catch(E){if(E instanceof Jw)return ac("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{_=new xg(y,c,h)}catch(E){return ac(E instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return _.Ee===0?null:_}nt(e,t,s){return t.ge.count===s-this.st(e,t.targetId)?0:2}st(e,t){const s=this.ke.getRemoteKeysForTarget(t);let c=0;return s.forEach(h=>{const y=this.ke.it(),_=`projects/${y.projectId}/databases/${y.database}/documents/${h.path.canonicalString()}`;e.mightContain(_)||(this.ze(t,h,null),c++)}),c}ot(e){const t=new Map;this.qe.forEach((h,y)=>{const _=this.Xe(y);if(_){if(h.current&&C1(_.target)){const E=new Dt(_.target.path);this._t(E).has(y)||this.ut(y,E)||this.ze(y,E,Ni.newNoDocument(E,e))}h.ve&&(t.set(y,h.Fe()),h.Me())}});let s=gn();this.Ke.forEach((h,y)=>{let _=!0;y.forEachWhile(E=>{const w=this.Xe(E);return!w||w.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)}),_&&(s=s.add(h))}),this.Qe.forEach((h,y)=>y.setReadTime(e));const c=new Qf(e,t,this.Ue,this.Qe,s);return this.Qe=Ua(),this.$e=Xh(),this.Ke=Xh(),this.Ue=new mr(yn),c}Ge(e,t){if(!this.Je(e))return;const s=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,s),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,s){if(!this.Je(e))return;const c=this.He(e);this.ut(e,t)?c.xe(t,1):c.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),s&&(this.Qe=this.Qe.insert(t,s))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Gy,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new ti(yn),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new ti(yn),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||gt("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Gy),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Xh(){return new mr(Dt.comparator)}function qy(){return new mr(Dt.comparator)}const v4={asc:"ASCENDING",desc:"DESCENDING"},_4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C4={and:"AND",or:"OR"};class A4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function S1(i,e){return i.useProto3Json||Hf(e)?e:{value:e}}function Af(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function T4(i,e){return Af(i,e.toTimestamp())}function sa(i){return kn(!!i),Yt.fromTimestamp(function(t){const s=So(t);return new ei(s.seconds,s.nanos)}(i))}function wg(i,e){return I1(i,e).canonicalString()}function I1(i,e){const t=function(c){return new er(["projects",c.projectId,"databases",c.database])}(i).child("documents");return e===void 0?t:t.child(e)}function Rb(i){const e=er.fromString(i);return kn(Lb(e)),e}function N1(i,e){return wg(i.databaseId,e.path)}function r1(i,e){const t=Rb(e);if(t.get(1)!==i.databaseId.projectId)throw new yt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new yt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Dt(Mb(t))}function Db(i,e){return wg(i.databaseId,e)}function S4(i){const e=Rb(i);return e.length===4?er.emptyPath():Mb(e)}function R1(i){return new er(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Mb(i){return kn(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Yy(i,e,t){return{name:N1(i,e),fields:t.value.mapValue.fields}}function I4(i,e){let t;if("targetChange"in e){e.targetChange;const s=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:Vt()}(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],h=function(w,S){return w.useProto3Json?(kn(S===void 0||typeof S=="string"),wi.fromBase64String(S||"")):(kn(S===void 0||S instanceof Buffer||S instanceof Uint8Array),wi.fromUint8Array(S||new Uint8Array))}(i,e.targetChange.resumeToken),y=e.targetChange.cause,_=y&&function(w){const S=w.code===void 0?Ke.UNKNOWN:Tb(w.code);return new yt(S,w.message||"")}(y);t=new Ib(s,c,h,_||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const c=r1(i,s.document.name),h=sa(s.document.updateTime),y=s.document.createTime?sa(s.document.createTime):Yt.min(),_=new Qi({mapValue:{fields:s.document.fields}}),E=Ni.newFoundDocument(c,h,y,_),w=s.targetIds||[],S=s.removedTargetIds||[];t=new af(w,S,E.key,E)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const c=r1(i,s.document),h=s.readTime?sa(s.readTime):Yt.min(),y=Ni.newNoDocument(c,h),_=s.removedTargetIds||[];t=new af([],_,y.key,y)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const c=r1(i,s.document),h=s.removedTargetIds||[];t=new af([],h,c,null)}else{if(!("filter"in e))return Vt();{e.filter;const s=e.filter;s.targetId;const{count:c=0,unchangedNames:h}=s,y=new y4(c,h),_=s.targetId;t=new Sb(_,y)}}return t}function N4(i,e){let t;if(e instanceof Bu)t={update:Yy(i,e.key,e.value)};else if(e instanceof pg)t={delete:N1(i,e.key)};else if(e instanceof Lo)t={update:Yy(i,e.key,e.data),updateMask:j4(e.fieldMask)};else{if(!(e instanceof g4))return Vt();t={verify:N1(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(h,y){const _=y.transform;if(_ instanceof _f)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Tu)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof Su)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof Cf)return{fieldPath:y.field.canonicalString(),increment:_.Ie};throw Vt()}(0,s))),e.precondition.isNone||(t.currentDocument=function(c,h){return h.updateTime!==void 0?{updateTime:T4(c,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Vt()}(i,e.precondition)),t}function R4(i,e){return i&&i.length>0?(kn(e!==void 0),i.map(t=>function(c,h){let y=c.updateTime?sa(c.updateTime):sa(h);return y.isEqual(Yt.min())&&(y=sa(h)),new h4(y,c.transformResults||[])}(t,e))):[]}function D4(i,e){return{documents:[Db(i,e.path)]}}function M4(i,e){const t={structuredQuery:{}},s=e.path;let c;e.collectionGroup!==null?(c=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Db(i,c);const h=function(w){if(w.length!==0)return kb(Bs.create(w,"and"))}(e.filters);h&&(t.structuredQuery.where=h);const y=function(w){if(w.length!==0)return w.map(S=>function(P){return{field:Kl(P.field),direction:L4(P.dir)}}(S))}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const _=S1(i,e.limit);return _!==null&&(t.structuredQuery.limit=_),e.startAt&&(t.structuredQuery.startAt=function(w){return{before:w.inclusive,values:w.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),{ht:t,parent:c}}function O4(i){let e=S4(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){kn(s===1);const S=t.from[0];S.allDescendants?c=S.collectionId:e=e.child(S.collectionId)}let h=[];t.where&&(h=function(N){const P=Ob(N);return P instanceof Bs&&cb(P)?P.getFilters():[P]}(t.where));let y=[];t.orderBy&&(y=function(N){return N.map(P=>function(X){return new vf(Zl(X.field),function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(X.direction))}(P))}(t.orderBy));let _=null;t.limit&&(_=function(N){let P;return P=typeof N=="object"?N.value:N,Hf(P)?null:P}(t.limit));let E=null;t.startAt&&(E=function(N){const P=!!N.before,U=N.values||[];return new Ef(U,P)}(t.startAt));let w=null;return t.endAt&&(w=function(N){const P=!N.before,U=N.values||[];return new Ef(U,P)}(t.endAt)),$3(e,c,y,h,_,"F",E,w)}function k4(i,e){const t=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ob(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Zl(t.unaryFilter.field);return Hr.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=Zl(t.unaryFilter.field);return Hr.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Zl(t.unaryFilter.field);return Hr.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=Zl(t.unaryFilter.field);return Hr.create(y,"!=",{nullValue:"NULL_VALUE"});default:return Vt()}}(i):i.fieldFilter!==void 0?function(t){return Hr.create(Zl(t.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vt()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Bs.create(t.compositeFilter.filters.map(s=>Ob(s)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return Vt()}}(t.compositeFilter.op))}(i):Vt()}function L4(i){return v4[i]}function P4(i){return _4[i]}function B4(i){return C4[i]}function Kl(i){return{fieldPath:i.canonicalString()}}function Zl(i){return xi.fromServerFormat(i.fieldPath)}function kb(i){return i instanceof Hr?function(t){if(t.op==="=="){if(Oy(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NAN"}};if(My(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Oy(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NAN"}};if(My(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(t.field),op:P4(t.op),value:t.value}}}(i):i instanceof Bs?function(t){const s=t.getFilters().map(c=>kb(c));return s.length===1?s[0]:{compositeFilter:{op:B4(t.op),filters:s}}}(i):Vt()}function j4(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Lb(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t,s,c,h=Yt.min(),y=Yt.min(),_=wi.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=_,this.expectedCount=E}withSequenceNumber(e){return new wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.Tt=e}}function V4(i){const e=O4({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?T1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this.Tn=new z4}addToCollectionParentIndex(e,t){return this.Tn.add(t),Ze.resolve()}getCollectionParents(e,t){return Ze.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Ze.resolve()}deleteFieldIndex(e,t){return Ze.resolve()}deleteAllFieldIndexes(e){return Ze.resolve()}createTargetIndexes(e,t){return Ze.resolve()}getDocumentsMatchingTarget(e,t){return Ze.resolve(null)}getIndexType(e,t){return Ze.resolve(0)}getFieldIndexes(e,t){return Ze.resolve([])}getNextCollectionGroupToUpdate(e){return Ze.resolve(null)}getMinOffset(e,t){return Ze.resolve(To.min())}getMinOffsetFromCollectionGroup(e,t){return Ze.resolve(To.min())}updateCollectionGroup(e,t,s){return Ze.resolve()}updateIndexEntries(e,t){return Ze.resolve()}}class z4{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new ti(er.comparator),h=!c.has(s);return this.index[t]=c.add(s),h}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new ti(er.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pb=41943040;class Wi{static withCacheSize(e){return new Wi(e,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wi.DEFAULT_COLLECTION_PERCENTILE=10,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wi.DEFAULT=new Wi(Pb,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wi.DISABLED=new Wi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new uc(0)}static Un(){return new uc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="LruGarbageCollector",H4=1048576;function Qy([i,e],[t,s]){const c=yn(i,t);return c===0?yn(e,s):c}class G4{constructor(e){this.Hn=e,this.buffer=new ti(Qy),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class q4{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){gt(Wy,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xc(t)?gt(Wy,"Ignoring IndexedDB error during garbage collection: ",t):await yc(t)}await this.er(3e5)})}}class Y4{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return Ze.resolve(zf.ae);const s=new G4(t);return this.tr.forEachTarget(e,c=>s.Zn(c.sequenceNumber)).next(()=>this.tr.rr(e,c=>s.Zn(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.tr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),Ze.resolve(Xy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xy):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let s,c,h,y,_,E,w;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),c=this.params.maximumSequenceNumbersToCollect):c=N,y=Date.now(),this.nthSequenceNumber(e,c))).next(N=>(s=N,_=Date.now(),this.removeTargets(e,s,t))).next(N=>(h=N,E=Date.now(),this.removeOrphanedDocuments(e,s))).next(N=>(w=Date.now(),Wl()<=dn.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${y-S}ms
	Determined least recently used ${c} in `+(_-y)+`ms
	Removed ${h} targets in `+(E-_)+`ms
	Removed ${N} documents in `+(w-E)+`ms
Total Duration: ${w-S}ms`),Ze.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:N})))}}function X4(i,e){return new Y4(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.changes=new dl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ni.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Ze.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(s!==null&&wu(s.mutation,c,ls.empty(),ei.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,gn()).next(()=>s))}getLocalViewOfDocuments(e,t,s=gn()){const c=rl();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(h=>{let y=uu();return h.forEach((_,E)=>{y=y.insert(_,E.overlayedDocument)}),y}))}getOverlayedDocuments(e,t){const s=rl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,gn()))}populateOverlays(e,t,s){const c=[];return s.forEach(h=>{t.has(h)||c.push(h)}),this.documentOverlayCache.getOverlays(e,c).next(h=>{h.forEach((y,_)=>{t.set(y,_)})})}computeViews(e,t,s,c){let h=Ua();const y=xu(),_=function(){return xu()}();return t.forEach((E,w)=>{const S=s.get(w.key);c.has(w.key)&&(S===void 0||S.mutation instanceof Lo)?h=h.insert(w.key,w):S!==void 0?(y.set(w.key,S.mutation.getFieldMask()),wu(S.mutation,w,S.mutation.getFieldMask(),ei.now())):y.set(w.key,ls.empty())}),this.recalculateAndSaveOverlays(e,h).next(E=>(E.forEach((w,S)=>y.set(w,S)),t.forEach((w,S)=>{var N;return _.set(w,new Q4(S,(N=y.get(w))!==null&&N!==void 0?N:null))}),_))}recalculateAndSaveOverlays(e,t){const s=xu();let c=new mr((y,_)=>y-_),h=gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(y=>{for(const _ of y)_.keys().forEach(E=>{const w=t.get(E);if(w===null)return;let S=s.get(E)||ls.empty();S=_.applyToLocalView(w,S),s.set(E,S);const N=(c.get(_.batchId)||gn()).add(E);c=c.insert(_.batchId,N)})}).next(()=>{const y=[],_=c.getReverseIterator();for(;_.hasNext();){const E=_.getNext(),w=E.key,S=E.value,N=xb();S.forEach(P=>{if(!h.has(P)){const U=Cb(t.get(P),s.get(P));U!==null&&N.set(P,U),h=h.add(P)}}),y.push(this.documentOverlayCache.saveOverlays(e,w,N))}return Ze.waitFor(y)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,c){return function(y){return Dt.isDocumentKey(y.path)&&y.collectionGroup===null&&y.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):db(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,c):this.getDocumentsMatchingCollectionQuery(e,t,s,c)}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(h=>{const y=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-h.size):Ze.resolve(rl());let _=vu,E=h;return y.next(w=>Ze.forEach(w,(S,N)=>(_<N.largestBatchId&&(_=N.largestBatchId),h.get(S)?Ze.resolve():this.remoteDocumentCache.getEntry(e,S).next(P=>{E=E.insert(S,P)}))).next(()=>this.populateOverlays(e,w,h)).next(()=>this.computeViews(e,E,w,gn())).next(S=>({batchId:_,changes:yb(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Dt(t)).next(s=>{let c=uu();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s,c){const h=t.collectionGroup;let y=uu();return this.indexManager.getCollectionParents(e,h).next(_=>Ze.forEach(_,E=>{const w=function(N,P){return new wc(P,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)}(t,E.child(h));return this.getDocumentsMatchingCollectionQuery(e,w,s,c).next(S=>{S.forEach((N,P)=>{y=y.insert(N,P)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,s,c){let h;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(y=>(h=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,h,c))).next(y=>{h.forEach((E,w)=>{const S=w.getKey();y.get(S)===null&&(y=y.insert(S,Ni.newInvalidDocument(S)))});let _=uu();return y.forEach((E,w)=>{const S=h.get(E);S!==void 0&&wu(S.mutation,w,ls.empty(),ei.now()),Yf(t,w)&&(_=_.insert(E,w))}),_})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Ze.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(c){return{id:c.id,version:c.version,createTime:sa(c.createTime)}}(t)),Ze.resolve()}getNamedQuery(e,t){return Ze.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(c){return{name:c.name,query:V4(c.bundledQuery),readTime:sa(c.readTime)}}(t)),Ze.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.overlays=new mr(Dt.comparator),this.Rr=new Map}getOverlay(e,t){return Ze.resolve(this.overlays.get(t))}getOverlays(e,t){const s=rl();return Ze.forEach(t,c=>this.getOverlay(e,c).next(h=>{h!==null&&s.set(c,h)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,h)=>{this.Et(e,t,h)}),Ze.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.Rr.get(s);return c!==void 0&&(c.forEach(h=>this.overlays=this.overlays.remove(h)),this.Rr.delete(s)),Ze.resolve()}getOverlaysForCollection(e,t,s){const c=rl(),h=t.length+1,y=new Dt(t.child("")),_=this.overlays.getIteratorFrom(y);for(;_.hasNext();){const E=_.getNext().value,w=E.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===h&&E.largestBatchId>s&&c.set(E.getKey(),E)}return Ze.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let h=new mr((w,S)=>w-S);const y=this.overlays.getIterator();for(;y.hasNext();){const w=y.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>s){let S=h.get(w.largestBatchId);S===null&&(S=rl(),h=h.insert(w.largestBatchId,S)),S.set(w.getKey(),w)}}const _=rl(),E=h.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((w,S)=>_.set(w,S)),!(_.size()>=c)););return Ze.resolve(_)}Et(e,t,s){const c=this.overlays.get(s.key);if(c!==null){const y=this.Rr.get(c.largestBatchId).delete(s.key);this.Rr.set(c.largestBatchId,y)}this.overlays=this.overlays.insert(s.key,new p4(t,s));let h=this.Rr.get(t);h===void 0&&(h=gn(),this.Rr.set(t,h)),this.Rr.set(t,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.sessionToken=wi.EMPTY_BYTE_STRING}getSessionToken(e){return Ze.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ze.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.Vr=new ti(oi.mr),this.gr=new ti(oi.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const s=new oi(e,t);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.wr(new oi(e,t))}Sr(e,t){e.forEach(s=>this.removeReference(s,t))}br(e){const t=new Dt(new er([])),s=new oi(t,e),c=new oi(t,e+1),h=[];return this.gr.forEachInRange([s,c],y=>{this.wr(y),h.push(y.key)}),h}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Dt(new er([])),s=new oi(t,e),c=new oi(t,e+1);let h=gn();return this.gr.forEachInRange([s,c],y=>{h=h.add(y.key)}),h}containsKey(e){const t=new oi(e,0),s=this.Vr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class oi{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Dt.comparator(e.key,t.key)||yn(e.Cr,t.Cr)}static pr(e,t){return yn(e.Cr,t.Cr)||Dt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new ti(oi.mr)}checkEmpty(e){return Ze.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,c){const h=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const y=new m4(h,t,s,c);this.mutationQueue.push(y);for(const _ of c)this.Mr=this.Mr.add(new oi(_.key,h)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return Ze.resolve(y)}lookupMutationBatch(e,t){return Ze.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=this.Nr(s),h=c<0?0:c;return Ze.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Ze.resolve(this.mutationQueue.length===0?cg:this.Fr-1)}getAllMutationBatches(e){return Ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new oi(t,0),c=new oi(t,Number.POSITIVE_INFINITY),h=[];return this.Mr.forEachInRange([s,c],y=>{const _=this.Or(y.Cr);h.push(_)}),Ze.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ti(yn);return t.forEach(c=>{const h=new oi(c,0),y=new oi(c,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([h,y],_=>{s=s.add(_.Cr)})}),Ze.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let h=s;Dt.isDocumentKey(h)||(h=h.child(""));const y=new oi(new Dt(h),0);let _=new ti(yn);return this.Mr.forEachWhile(E=>{const w=E.key.path;return!!s.isPrefixOf(w)&&(w.length===c&&(_=_.add(E.Cr)),!0)},y),Ze.resolve(this.Br(_))}Br(e){const t=[];return e.forEach(s=>{const c=this.Or(s);c!==null&&t.push(c)}),t}removeMutationBatch(e,t){kn(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return Ze.forEach(t.mutations,c=>{const h=new oi(c.key,t.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,t){const s=new oi(t,0),c=this.Mr.firstAfterOrEqual(s);return Ze.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ze.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.kr=e,this.docs=function(){return new mr(Dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),h=c?c.size:0,y=this.kr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:y}),this.size+=y-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ze.resolve(s?s.document.mutableCopy():Ni.newInvalidDocument(t))}getEntries(e,t){let s=Ua();return t.forEach(c=>{const h=this.docs.get(c);s=s.insert(c,h?h.document.mutableCopy():Ni.newInvalidDocument(c))}),Ze.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let h=Ua();const y=t.path,_=new Dt(y.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(_);for(;E.hasNext();){const{key:w,value:{document:S}}=E.getNext();if(!y.isPrefixOf(w.path))break;w.path.length>y.length+1||R3(N3(S),s)<=0||(c.has(S.key)||Yf(t,S))&&(h=h.insert(S.key,S.mutableCopy()))}return Ze.resolve(h)}getAllFromCollectionGroup(e,t,s,c){Vt()}qr(e,t){return Ze.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new nI(this)}getSize(e){return Ze.resolve(this.size)}}class nI extends W4{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.Ir.addEntry(e,c)):this.Ir.removeEntry(s)}),Ze.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.persistence=e,this.Qr=new dl(t=>fg(t),dg),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new bg,this.targetCount=0,this.Ur=uc.Kn()}forEachTarget(e,t){return this.Qr.forEach((s,c)=>t(c)),Ze.resolve()}getLastRemoteSnapshotVersion(e){return Ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ze.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Ze.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.$r&&(this.$r=t),Ze.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Ze.resolve()}updateTargetData(e,t){return this.zn(t),Ze.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,Ze.resolve()}removeTargets(e,t,s){let c=0;const h=[];return this.Qr.forEach((y,_)=>{_.sequenceNumber<=t&&s.get(_.targetId)===null&&(this.Qr.delete(y),h.push(this.removeMatchingKeysForTargetId(e,_.targetId)),c++)}),Ze.waitFor(h).next(()=>c)}getTargetCount(e){return Ze.resolve(this.targetCount)}getTargetData(e,t){const s=this.Qr.get(t)||null;return Ze.resolve(s)}addMatchingKeys(e,t,s){return this.Kr.yr(t,s),Ze.resolve()}removeMatchingKeys(e,t,s){this.Kr.Sr(t,s);const c=this.persistence.referenceDelegate,h=[];return c&&t.forEach(y=>{h.push(c.markPotentiallyOrphaned(e,y))}),Ze.waitFor(h)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),Ze.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Kr.vr(t);return Ze.resolve(s)}containsKey(e,t){return Ze.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new zf(0),this.zr=!1,this.zr=!0,this.jr=new J4,this.referenceDelegate=e(this),this.Hr=new rI(this),this.indexManager=new F4,this.remoteDocumentCache=function(c){return new tI(c)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new U4(t),this.Yr=new Z4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Wr[e.toKey()];return s||(s=new eI(t,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,s){gt("MemoryPersistence","Starting transaction:",e);const c=new iI(this.Gr.next());return this.referenceDelegate.Zr(),s(c).next(h=>this.referenceDelegate.Xr(c).next(()=>h)).toPromise().then(h=>(c.raiseOnCommittedEvent(),h))}ei(e,t){return Ze.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,t)))}}class iI extends M3{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.ti=new bg,this.ni=null}static ri(e){return new Eg(e)}get ii(){if(this.ni)return this.ni;throw Vt()}addReference(e,t,s){return this.ti.addReference(s,t),this.ii.delete(s.toString()),Ze.resolve()}removeReference(e,t,s){return this.ti.removeReference(s,t),this.ii.add(s.toString()),Ze.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Ze.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(c=>this.ii.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(h=>this.ii.add(h.toString()))}).next(()=>s.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ze.forEach(this.ii,s=>{const c=Dt.fromPath(s);return this.si(e,c).next(h=>{h||t.removeEntry(c,Yt.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(s=>{s?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Ze.or([()=>Ze.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Tf{constructor(e,t){this.persistence=e,this.oi=new dl(s=>L3(s.path),(s,c)=>s.isEqual(c)),this.garbageCollector=X4(this,t)}static ri(e,t){return new Tf(e,t)}Zr(){}Xr(e){return Ze.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}sr(e){let t=0;return this.rr(e,s=>{t++}).next(()=>t)}rr(e,t){return Ze.forEach(this.oi,(s,c)=>this.ar(e,s,c).next(h=>h?Ze.resolve():t(c)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const c=this.persistence.getRemoteDocumentCache(),h=c.newChangeBuffer();return c.qr(e,y=>this.ar(e,y,t).next(_=>{_||(s++,h.removeEntry(y,Yt.min()))})).next(()=>h.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Ze.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),Ze.resolve()}removeReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),Ze.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Ze.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nf(e.data.value)),t}ar(e,t,s){return Ze.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.oi.get(t);return Ze.resolve(c!==void 0&&c>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Hi=s,this.Ji=c}static Yi(e,t){let s=gn(),c=gn();for(const h of t.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new vg(e,t.fromCache,s,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return eA()?8:O3(Ri())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,s,c){const h={result:null};return this.rs(e,t).next(y=>{h.result=y}).next(()=>{if(!h.result)return this.ss(e,t,c,s).next(y=>{h.result=y})}).next(()=>{if(h.result)return;const y=new sI;return this._s(e,t,y).next(_=>{if(h.result=_,this.Xi)return this.us(e,t,y,_.size)})}).next(()=>h.result)}us(e,t,s,c){return s.documentReadCount<this.es?(Wl()<=dn.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",Ql(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ze.resolve()):(Wl()<=dn.DEBUG&&gt("QueryEngine","Query:",Ql(t),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.ts*c?(Wl()<=dn.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",Ql(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ia(t))):Ze.resolve())}rs(e,t){if(By(t))return Ze.resolve(null);let s=ia(t);return this.indexManager.getIndexType(e,s).next(c=>c===0?null:(t.limit!==null&&c===1&&(t=T1(t,null,"F"),s=ia(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(h=>{const y=gn(...h);return this.ns.getDocuments(e,y).next(_=>this.indexManager.getMinOffset(e,s).next(E=>{const w=this.cs(t,_);return this.ls(t,w,y,E.readTime)?this.rs(e,T1(t,null,"F")):this.hs(e,w,t,E)}))})))}ss(e,t,s,c){return By(t)||c.isEqual(Yt.min())?Ze.resolve(null):this.ns.getDocuments(e,s).next(h=>{const y=this.cs(t,h);return this.ls(t,y,s,c)?Ze.resolve(null):(Wl()<=dn.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Ql(t)),this.hs(e,y,t,I3(c,vu)).next(_=>_))})}cs(e,t){let s=new ti(mb(e));return t.forEach((c,h)=>{Yf(e,h)&&(s=s.add(h))}),s}ls(e,t,s,c){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const h=e.limitType==="F"?t.last():t.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}_s(e,t,s){return Wl()<=dn.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",Ql(t)),this.ns.getDocumentsMatchingQuery(e,t,To.min(),s)}hs(e,t,s,c){return this.ns.getDocumentsMatchingQuery(e,s,c).next(h=>(t.forEach(y=>{h=h.insert(y.key,y)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LocalStore",oI=3e8;class lI{constructor(e,t,s,c){this.persistence=e,this.Ps=t,this.serializer=c,this.Ts=new mr(yn),this.Is=new dl(h=>fg(h),dg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K4(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function cI(i,e,t,s){return new lI(i,e,t,s)}async function jb(i,e){const t=Kt(i);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(h=>(c=h,t.As(e),t.mutationQueue.getAllMutationBatches(s))).next(h=>{const y=[],_=[];let E=gn();for(const w of c){y.push(w.batchId);for(const S of w.mutations)E=E.add(S.key)}for(const w of h){_.push(w.batchId);for(const S of w.mutations)E=E.add(S.key)}return t.localDocuments.getDocuments(s,E).next(w=>({Rs:w,removedBatchIds:y,addedBatchIds:_}))})})}function uI(i,e){const t=Kt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),h=t.ds.newChangeBuffer({trackRemovals:!0});return function(_,E,w,S){const N=w.batch,P=N.keys();let U=Ze.resolve();return P.forEach(X=>{U=U.next(()=>S.getEntry(E,X)).next(re=>{const Y=w.docVersions.get(X);kn(Y!==null),re.version.compareTo(Y)<0&&(N.applyToRemoteDocument(re,w),re.isValidDocument()&&(re.setReadTime(w.commitVersion),S.addEntry(re)))})}),U.next(()=>_.mutationQueue.removeMutationBatch(E,N))}(t,s,e,h).next(()=>h.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(_){let E=gn();for(let w=0;w<_.mutationResults.length;++w)_.mutationResults[w].transformResults.length>0&&(E=E.add(_.batch.mutations[w].key));return E}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}function Ub(i){const e=Kt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function hI(i,e){const t=Kt(i),s=e.snapshotVersion;let c=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const y=t.ds.newChangeBuffer({trackRemovals:!0});c=t.Ts;const _=[];e.targetChanges.forEach((S,N)=>{const P=c.get(N);if(!P)return;_.push(t.Hr.removeMatchingKeys(h,S.removedDocuments,N).next(()=>t.Hr.addMatchingKeys(h,S.addedDocuments,N)));let U=P.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(N)!==null?U=U.withResumeToken(wi.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):S.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(S.resumeToken,s)),c=c.insert(N,U),function(re,Y,ye){return re.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-re.snapshotVersion.toMicroseconds()>=oI?!0:ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0}(P,U,S)&&_.push(t.Hr.updateTargetData(h,U))});let E=Ua(),w=gn();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(h,S))}),_.push(fI(h,y,e.documentUpdates).next(S=>{E=S.Vs,w=S.fs})),!s.isEqual(Yt.min())){const S=t.Hr.getLastRemoteSnapshotVersion(h).next(N=>t.Hr.setTargetsMetadata(h,h.currentSequenceNumber,s));_.push(S)}return Ze.waitFor(_).next(()=>y.apply(h)).next(()=>t.localDocuments.getLocalViewOfDocuments(h,E,w)).next(()=>E)}).then(h=>(t.Ts=c,h))}function fI(i,e,t){let s=gn(),c=gn();return t.forEach(h=>s=s.add(h)),e.getEntries(i,s).next(h=>{let y=Ua();return t.forEach((_,E)=>{const w=h.get(_);E.isFoundDocument()!==w.isFoundDocument()&&(c=c.add(_)),E.isNoDocument()&&E.version.isEqual(Yt.min())?(e.removeEntry(_,E.readTime),y=y.insert(_,E)):!w.isValidDocument()||E.version.compareTo(w.version)>0||E.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(E),y=y.insert(_,E)):gt(_g,"Ignoring outdated watch update for ",_,". Current version:",w.version," Watch version:",E.version)}),{Vs:y,fs:c}})}function dI(i,e){const t=Kt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=cg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function gI(i,e){const t=Kt(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Hr.getTargetData(s,e).next(h=>h?(c=h,Ze.resolve(c)):t.Hr.allocateTargetId(s).next(y=>(c=new wo(e,y,"TargetPurposeListen",s.currentSequenceNumber),t.Hr.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.Ts.get(s.targetId);return(c===null||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(s.targetId,s),t.Is.set(e,s.targetId)),s})}async function D1(i,e,t){const s=Kt(i),c=s.Ts.get(e),h=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",h,y=>s.persistence.referenceDelegate.removeTarget(y,c))}catch(y){if(!xc(y))throw y;gt(_g,`Failed to update sequence numbers for target ${e}: ${y}`)}s.Ts=s.Ts.remove(e),s.Is.delete(c.target)}function Ky(i,e,t){const s=Kt(i);let c=Yt.min(),h=gn();return s.persistence.runTransaction("Execute query","readwrite",y=>function(E,w,S){const N=Kt(E),P=N.Is.get(S);return P!==void 0?Ze.resolve(N.Ts.get(P)):N.Hr.getTargetData(w,S)}(s,y,ia(e)).next(_=>{if(_)return c=_.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(y,_.targetId).next(E=>{h=E})}).next(()=>s.Ps.getDocumentsMatchingQuery(y,e,t?c:Yt.min(),t?h:gn())).next(_=>(mI(s,e4(e),_),{documents:_,gs:h})))}function mI(i,e,t){let s=i.Es.get(e)||Yt.min();t.forEach((c,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),i.Es.set(e,s)}class Zy{constructor(){this.activeTargetIds=a4()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pI{constructor(){this.ho=new Zy,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,s){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Zy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="ConnectivityMonitor";class Jy{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){gt($y,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){gt($y,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh=null;function M1(){return Wh===null?Wh=function(){return 268435456+Math.round(2147483648*Math.random())}():Wh++,"0x"+Wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="RestConnection",xI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wI{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${s}/databases/${c}`,this.wo=this.databaseId.database===wf?`project_id=${s}`:`project_id=${s}&database_id=${c}`}So(e,t,s,c,h){const y=M1(),_=this.bo(e,t.toUriEncodedString());gt(i1,`Sending RPC '${e}' ${y}:`,_,s);const E={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(E,c,h),this.vo(e,_,E,s).then(w=>(gt(i1,`Received RPC '${e}' ${y}: `,w),w),w=>{throw ac(i1,`RPC '${e}' ${y} failed with error: `,w,"url: ",_,"request:",s),w})}Co(e,t,s,c,h,y){return this.So(e,t,s,c,h)}Do(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,h)=>e[h]=c),s&&s.headers.forEach((c,h)=>e[h]=c)}bo(e,t){const s=xI[e];return`${this.po}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="WebChannelConnection";class EI extends wI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,s,c){const h=M1();return new Promise((y,_)=>{const E=new Gw;E.setWithCredentials(!0),E.listenOnce(qw.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case tf.NO_ERROR:const S=E.getResponseJson();gt(Si,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),y(S);break;case tf.TIMEOUT:gt(Si,`RPC '${e}' ${h} timed out`),_(new yt(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const N=E.getStatus();if(gt(Si,`RPC '${e}' ${h} failed with status:`,N,"response text:",E.getResponseText()),N>0){let P=E.getResponseJson();Array.isArray(P)&&(P=P[0]);const U=P==null?void 0:P.error;if(U&&U.status&&U.message){const X=function(Y){const ye=Y.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(ye)>=0?ye:Ke.UNKNOWN}(U.status);_(new yt(X,U.message))}else _(new yt(Ke.UNKNOWN,"Server responded with status "+E.getStatus()))}else _(new yt(Ke.UNAVAILABLE,"Connection failed."));break;default:Vt()}}finally{gt(Si,`RPC '${e}' ${h} completed.`)}});const w=JSON.stringify(c);gt(Si,`RPC '${e}' ${h} sending request:`,c),E.send(t,"POST",w,s,15)})}Wo(e,t,s){const c=M1(),h=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=Ww(),_=Xw(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(E.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(E.useFetchStreams=!0),this.Do(E.initMessageHeaders,t,s),E.encodeInitMessageHeaders=!0;const S=h.join("");gt(Si,`Creating RPC '${e}' stream ${c}: ${S}`,E);const N=y.createWebChannel(S,E);let P=!1,U=!1;const X=new bI({Fo:Y=>{U?gt(Si,`Not sending because RPC '${e}' stream ${c} is closed:`,Y):(P||(gt(Si,`Opening RPC '${e}' stream ${c} transport.`),N.open(),P=!0),gt(Si,`RPC '${e}' stream ${c} sending:`,Y),N.send(Y))},Mo:()=>N.close()}),re=(Y,ye,ue)=>{Y.listen(ye,se=>{try{ue(se)}catch(fe){setTimeout(()=>{throw fe},0)}})};return re(N,cu.EventType.OPEN,()=>{U||(gt(Si,`RPC '${e}' stream ${c} transport opened.`),X.Qo())}),re(N,cu.EventType.CLOSE,()=>{U||(U=!0,gt(Si,`RPC '${e}' stream ${c} transport closed`),X.Ko())}),re(N,cu.EventType.ERROR,Y=>{U||(U=!0,ac(Si,`RPC '${e}' stream ${c} transport errored:`,Y),X.Ko(new yt(Ke.UNAVAILABLE,"The operation could not be completed")))}),re(N,cu.EventType.MESSAGE,Y=>{var ye;if(!U){const ue=Y.data[0];kn(!!ue);const se=ue,fe=(se==null?void 0:se.error)||((ye=se[0])===null||ye===void 0?void 0:ye.error);if(fe){gt(Si,`RPC '${e}' stream ${c} received error:`,fe);const we=fe.status;let Pe=function(L){const F=Vr[L];if(F!==void 0)return Tb(F)}(we),z=fe.message;Pe===void 0&&(Pe=Ke.INTERNAL,z="Unknown error status: "+we+" with message "+fe.message),U=!0,X.Ko(new yt(Pe,z)),N.close()}else gt(Si,`RPC '${e}' stream ${c} received:`,ue),X.Uo(ue)}}),re(_,Yw.STAT_EVENT,Y=>{Y.stat===b1.PROXY?gt(Si,`RPC '${e}' stream ${c} detected buffering proxy`):Y.stat===b1.NOPROXY&&gt(Si,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{X.$o()},0),X}}function s1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(i){return new A4(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t,s=1e3,c=1.5,h=6e4){this.Ti=e,this.timerId=t,this.Go=s,this.zo=c,this.jo=h,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),c=Math.max(0,t-s);c>0&&gt("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,c,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="PersistentStream";class Fb{constructor(e,t,s,c,h,y,_,E){this.Ti=e,this.n_=s,this.r_=c,this.connection=h,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=_,this.listener=E,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Vb(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Ke.RESOURCE_EXHAUSTED?(ja(t.toString()),ja("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.i_===t&&this.V_(s,c)},s=>{e(()=>{const c=new yt(Ke.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(c)})})}V_(e,t){const s=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(c=>{s(()=>this.m_(c))}),this.stream.onMessage(c=>{s(()=>++this.__==1?this.g_(c):this.onNext(c))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return gt(ex,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(gt(ex,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vI extends Fb{constructor(e,t,s,c,h,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,y),this.serializer=h}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=I4(this.serializer,e),s=function(h){if(!("targetChange"in h))return Yt.min();const y=h.targetChange;return y.targetIds&&y.targetIds.length?Yt.min():y.readTime?sa(y.readTime):Yt.min()}(e);return this.listener.p_(t,s)}y_(e){const t={};t.database=R1(this.serializer),t.addTarget=function(h,y){let _;const E=y.target;if(_=C1(E)?{documents:D4(h,E)}:{query:M4(h,E).ht},_.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){_.resumeToken=Nb(h,y.resumeToken);const w=S1(h,y.expectedCount);w!==null&&(_.expectedCount=w)}else if(y.snapshotVersion.compareTo(Yt.min())>0){_.readTime=Af(h,y.snapshotVersion.toTimestamp());const w=S1(h,y.expectedCount);w!==null&&(_.expectedCount=w)}return _}(this.serializer,e);const s=k4(this.serializer,e);s&&(t.labels=s),this.I_(t)}w_(e){const t={};t.database=R1(this.serializer),t.removeTarget=e,this.I_(t)}}class _I extends Fb{constructor(e,t,s,c,h,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,y),this.serializer=h}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return kn(!!e.streamToken),this.lastStreamToken=e.streamToken,kn(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){kn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=R4(e.writeResults,e.commitTime),s=sa(e.commitTime);return this.listener.v_(s,t)}C_(){const e={};e.database=R1(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>N4(this.serializer,s))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{}class AI extends CI{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.F_=!1}M_(){if(this.F_)throw new yt(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,s,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,y])=>this.connection.So(e,I1(t,s),c,h,y)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new yt(Ke.UNKNOWN,h.toString())})}Co(e,t,s,c,h){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,_])=>this.connection.Co(e,I1(t,s),c,y,_,h)).catch(y=>{throw y.name==="FirebaseError"?(y.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new yt(Ke.UNKNOWN,y.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class TI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ja(t),this.N_=!1):gt("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="RemoteStore";class SI{constructor(e,t,s,c,h){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=h,this.z_.To(y=>{s.enqueueAndForget(async()=>{gl(this)&&(gt(ul,"Restarting streams for network reachability change."),await async function(E){const w=Kt(E);w.W_.add(4),await Uu(w),w.j_.set("Unknown"),w.W_.delete(4),await Zf(w)}(this))})}),this.j_=new TI(s,c)}}async function Zf(i){if(gl(i))for(const e of i.G_)await e(!0)}async function Uu(i){for(const e of i.G_)await e(!1)}function zb(i,e){const t=Kt(i);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Sg(t)?Tg(t):bc(t).c_()&&Ag(t,e))}function Cg(i,e){const t=Kt(i),s=bc(t);t.U_.delete(e),s.c_()&&Hb(t,e),t.U_.size===0&&(s.c_()?s.P_():gl(t)&&t.j_.set("Unknown"))}function Ag(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yt.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bc(i).y_(e)}function Hb(i,e){i.H_.Ne(e),bc(i).w_(e)}function Tg(i){i.H_=new E4({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.U_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),bc(i).start(),i.j_.B_()}function Sg(i){return gl(i)&&!bc(i).u_()&&i.U_.size>0}function gl(i){return Kt(i).W_.size===0}function Gb(i){i.H_=void 0}async function II(i){i.j_.set("Online")}async function NI(i){i.U_.forEach((e,t)=>{Ag(i,e)})}async function RI(i,e){Gb(i),Sg(i)?(i.j_.q_(e),Tg(i)):i.j_.set("Unknown")}async function DI(i,e,t){if(i.j_.set("Online"),e instanceof Ib&&e.state===2&&e.cause)try{await async function(c,h){const y=h.cause;for(const _ of h.targetIds)c.U_.has(_)&&(await c.remoteSyncer.rejectListen(_,y),c.U_.delete(_),c.H_.removeTarget(_))}(i,e)}catch(s){gt(ul,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Sf(i,s)}else if(e instanceof af?i.H_.We(e):e instanceof Sb?i.H_.Ze(e):i.H_.je(e),!t.isEqual(Yt.min()))try{const s=await Ub(i.localStore);t.compareTo(s)>=0&&await function(h,y){const _=h.H_.ot(y);return _.targetChanges.forEach((E,w)=>{if(E.resumeToken.approximateByteSize()>0){const S=h.U_.get(w);S&&h.U_.set(w,S.withResumeToken(E.resumeToken,y))}}),_.targetMismatches.forEach((E,w)=>{const S=h.U_.get(E);if(!S)return;h.U_.set(E,S.withResumeToken(wi.EMPTY_BYTE_STRING,S.snapshotVersion)),Hb(h,E);const N=new wo(S.target,E,w,S.sequenceNumber);Ag(h,N)}),h.remoteSyncer.applyRemoteEvent(_)}(i,t)}catch(s){gt(ul,"Failed to raise snapshot:",s),await Sf(i,s)}}async function Sf(i,e,t){if(!xc(e))throw e;i.W_.add(1),await Uu(i),i.j_.set("Offline"),t||(t=()=>Ub(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{gt(ul,"Retrying IndexedDB access"),await t(),i.W_.delete(1),await Zf(i)})}function qb(i,e){return e().catch(t=>Sf(i,t,e))}async function $f(i){const e=Kt(i),t=Ro(e);let s=e.K_.length>0?e.K_[e.K_.length-1].batchId:cg;for(;MI(e);)try{const c=await dI(e.localStore,s);if(c===null){e.K_.length===0&&t.P_();break}s=c.batchId,OI(e,c)}catch(c){await Sf(e,c)}Yb(e)&&Xb(e)}function MI(i){return gl(i)&&i.K_.length<10}function OI(i,e){i.K_.push(e);const t=Ro(i);t.c_()&&t.S_&&t.b_(e.mutations)}function Yb(i){return gl(i)&&!Ro(i).u_()&&i.K_.length>0}function Xb(i){Ro(i).start()}async function kI(i){Ro(i).C_()}async function LI(i){const e=Ro(i);for(const t of i.K_)e.b_(t.mutations)}async function PI(i,e,t){const s=i.K_.shift(),c=yg.from(s,e,t);await qb(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),await $f(i)}async function BI(i,e){e&&Ro(i).S_&&await async function(s,c){if(function(y){return x4(y)&&y!==Ke.ABORTED}(c.code)){const h=s.K_.shift();Ro(s).h_(),await qb(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,c)),await $f(s)}}(i,e),Yb(i)&&Xb(i)}async function tx(i,e){const t=Kt(i);t.asyncQueue.verifyOperationInProgress(),gt(ul,"RemoteStore received new credentials");const s=gl(t);t.W_.add(3),await Uu(t),s&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Zf(t)}async function jI(i,e){const t=Kt(i);e?(t.W_.delete(2),await Zf(t)):e||(t.W_.add(2),await Uu(t),t.j_.set("Unknown"))}function bc(i){return i.J_||(i.J_=function(t,s,c){const h=Kt(t);return h.M_(),new vI(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(i.datastore,i.asyncQueue,{xo:II.bind(null,i),No:NI.bind(null,i),Lo:RI.bind(null,i),p_:DI.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Sg(i)?Tg(i):i.j_.set("Unknown")):(await i.J_.stop(),Gb(i))})),i.J_}function Ro(i){return i.Y_||(i.Y_=function(t,s,c){const h=Kt(t);return h.M_(),new _I(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:kI.bind(null,i),Lo:BI.bind(null,i),D_:LI.bind(null,i),v_:PI.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await $f(i)):(await i.Y_.stop(),i.K_.length>0&&(gt(ul,`Stopping write stream with ${i.K_.length} pending writes`),i.K_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t,s,c,h){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=h,this.deferred=new La,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,c,h){const y=Date.now()+s,_=new Ig(e,t,y,c,h);return _.start(s),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new yt(Ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ng(i,e){if(ja("AsyncQueue",`${e}: ${i}`),xc(i))return new yt(Ke.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{static emptySet(e){return new rc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Dt.comparator(t.key,s.key):(t,s)=>Dt.comparator(t.key,s.key),this.keyedMap=uu(),this.sortedSet=new mr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new rc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.Z_=new mr(Dt.comparator)}track(e){const t=e.doc.key,s=this.Z_.get(t);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(t):e.type===1&&s.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Vt():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class hc{constructor(e,t,s,c,h,y,_,E,w){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=h,this.fromCache=y,this.syncStateChanged=_,this.excludesMetadataChanges=E,this.hasCachedResults=w}static fromInitialDocuments(e,t,s,c,h){const y=[];return t.forEach(_=>{y.push({type:0,doc:_})}),new hc(e,t,rc.emptySet(t),y,s,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class VI{constructor(){this.queries=rx(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,s){const c=Kt(t),h=c.queries;c.queries=rx(),h.forEach((y,_)=>{for(const E of _.ta)E.onError(s)})})(this,new yt(Ke.ABORTED,"Firestore shutting down"))}}function rx(){return new dl(i=>gb(i),qf)}async function Wb(i,e){const t=Kt(i);let s=3;const c=e.query;let h=t.queries.get(c);h?!h.na()&&e.ra()&&(s=2):(h=new UI,s=e.ra()?0:1);try{switch(s){case 0:h.ea=await t.onListen(c,!0);break;case 1:h.ea=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(y){const _=Ng(y,`Initialization of query '${Ql(e.query)}' failed`);return void e.onError(_)}t.queries.set(c,h),h.ta.push(e),e.sa(t.onlineState),h.ea&&e.oa(h.ea)&&Rg(t)}async function Qb(i,e){const t=Kt(i),s=e.query;let c=3;const h=t.queries.get(s);if(h){const y=h.ta.indexOf(e);y>=0&&(h.ta.splice(y,1),h.ta.length===0?c=e.ra()?0:1:!h.na()&&e.ra()&&(c=2))}switch(c){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function FI(i,e){const t=Kt(i);let s=!1;for(const c of e){const h=c.query,y=t.queries.get(h);if(y){for(const _ of y.ta)_.oa(c)&&(s=!0);y.ea=c}}s&&Rg(t)}function zI(i,e,t){const s=Kt(i),c=s.queries.get(e);if(c)for(const h of c.ta)h.onError(t);s.queries.delete(e)}function Rg(i){i.ia.forEach(e=>{e.next()})}var O1,ix;(ix=O1||(O1={}))._a="default",ix.Cache="cache";class Kb{constructor(e,t,s){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)c.type!==3&&s.push(c);e=new hc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const s=t!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==O1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this.key=e}}class $b{constructor(e){this.key=e}}class HI{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=gn(),this.mutatedKeys=gn(),this.ya=mb(e),this.wa=new rc(this.ya)}get Sa(){return this.fa}ba(e,t){const s=t?t.Da:new nx,c=t?t.wa:this.wa;let h=t?t.mutatedKeys:this.mutatedKeys,y=c,_=!1;const E=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,w=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((S,N)=>{const P=c.get(S),U=Yf(this.query,N)?N:null,X=!!P&&this.mutatedKeys.has(P.key),re=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Y=!1;P&&U?P.data.isEqual(U.data)?X!==re&&(s.track({type:3,doc:U}),Y=!0):this.va(P,U)||(s.track({type:2,doc:U}),Y=!0,(E&&this.ya(U,E)>0||w&&this.ya(U,w)<0)&&(_=!0)):!P&&U?(s.track({type:0,doc:U}),Y=!0):P&&!U&&(s.track({type:1,doc:P}),Y=!0,(E||w)&&(_=!0)),Y&&(U?(y=y.add(U),h=re?h.add(S):h.delete(S)):(y=y.delete(S),h=h.delete(S)))}),this.query.limit!==null)for(;y.size>this.query.limit;){const S=this.query.limitType==="F"?y.last():y.first();y=y.delete(S.key),h=h.delete(S.key),s.track({type:1,doc:S})}return{wa:y,Da:s,ls:_,mutatedKeys:h}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,c){const h=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const y=e.Da.X_();y.sort((S,N)=>function(U,X){const re=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt()}};return re(U)-re(X)}(S.type,N.type)||this.ya(S.doc,N.doc)),this.Ca(s),c=c!=null&&c;const _=t&&!c?this.Fa():[],E=this.pa.size===0&&this.current&&!c?1:0,w=E!==this.ga;return this.ga=E,y.length!==0||w?{snapshot:new hc(this.query,e.wa,h,y,e.mutatedKeys,E===0,w,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:_}:{Ma:_}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new nx,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=gn(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const t=[];return e.forEach(s=>{this.pa.has(s)||t.push(new $b(s))}),this.pa.forEach(s=>{e.has(s)||t.push(new Zb(s))}),t}Oa(e){this.fa=e.gs,this.pa=gn();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return hc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Dg="SyncEngine";class GI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class qI{constructor(e){this.key=e,this.Ba=!1}}class YI{constructor(e,t,s,c,h,y){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=y,this.La={},this.ka=new dl(_=>gb(_),qf),this.qa=new Map,this.Qa=new Set,this.$a=new mr(Dt.comparator),this.Ka=new Map,this.Ua=new bg,this.Wa={},this.Ga=new Map,this.za=uc.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function XI(i,e,t=!0){const s=iE(i);let c;const h=s.ka.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.Na()):c=await Jb(s,e,t,!0),c}async function WI(i,e){const t=iE(i);await Jb(t,e,!0,!1)}async function Jb(i,e,t,s){const c=await gI(i.localStore,ia(e)),h=c.targetId,y=i.sharedClientState.addLocalQueryTarget(h,t);let _;return s&&(_=await QI(i,e,h,y==="current",c.resumeToken)),i.isPrimaryClient&&t&&zb(i.remoteStore,c),_}async function QI(i,e,t,s,c){i.Ha=(N,P,U)=>async function(re,Y,ye,ue){let se=Y.view.ba(ye);se.ls&&(se=await Ky(re.localStore,Y.query,!1).then(({documents:z})=>Y.view.ba(z,se)));const fe=ue&&ue.targetChanges.get(Y.targetId),we=ue&&ue.targetMismatches.get(Y.targetId)!=null,Pe=Y.view.applyChanges(se,re.isPrimaryClient,fe,we);return ax(re,Y.targetId,Pe.Ma),Pe.snapshot}(i,N,P,U);const h=await Ky(i.localStore,e,!0),y=new HI(e,h.gs),_=y.ba(h.documents),E=ju.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",c),w=y.applyChanges(_,i.isPrimaryClient,E);ax(i,t,w.Ma);const S=new GI(e,t,y);return i.ka.set(e,S),i.qa.has(t)?i.qa.get(t).push(e):i.qa.set(t,[e]),w.snapshot}async function KI(i,e,t){const s=Kt(i),c=s.ka.get(e),h=s.qa.get(c.targetId);if(h.length>1)return s.qa.set(c.targetId,h.filter(y=>!qf(y,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(c.targetId),s.sharedClientState.isActiveQueryTarget(c.targetId)||await D1(s.localStore,c.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(c.targetId),t&&Cg(s.remoteStore,c.targetId),k1(s,c.targetId)}).catch(yc)):(k1(s,c.targetId),await D1(s.localStore,c.targetId,!0))}async function ZI(i,e){const t=Kt(i),s=t.ka.get(e),c=t.qa.get(s.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Cg(t.remoteStore,s.targetId))}async function $I(i,e,t){const s=sN(i);try{const c=await function(y,_){const E=Kt(y),w=ei.now(),S=_.reduce((U,X)=>U.add(X.key),gn());let N,P;return E.persistence.runTransaction("Locally write mutations","readwrite",U=>{let X=Ua(),re=gn();return E.ds.getEntries(U,S).next(Y=>{X=Y,X.forEach((ye,ue)=>{ue.isValidDocument()||(re=re.add(ye))})}).next(()=>E.localDocuments.getOverlayedDocuments(U,X)).next(Y=>{N=Y;const ye=[];for(const ue of _){const se=d4(ue,N.get(ue.key).overlayedDocument);se!=null&&ye.push(new Lo(ue.key,se,ab(se.value.mapValue),Ts.exists(!0)))}return E.mutationQueue.addMutationBatch(U,w,ye,_)}).next(Y=>{P=Y;const ye=Y.applyToLocalDocumentSet(N,re);return E.documentOverlayCache.saveOverlays(U,Y.batchId,ye)})}).then(()=>({batchId:P.batchId,changes:yb(N)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(y,_,E){let w=y.Wa[y.currentUser.toKey()];w||(w=new mr(yn)),w=w.insert(_,E),y.Wa[y.currentUser.toKey()]=w}(s,c.batchId,t),await Vu(s,c.changes),await $f(s.remoteStore)}catch(c){const h=Ng(c,"Failed to persist write");t.reject(h)}}async function eE(i,e){const t=Kt(i);try{const s=await hI(t.localStore,e);e.targetChanges.forEach((c,h)=>{const y=t.Ka.get(h);y&&(kn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?y.Ba=!0:c.modifiedDocuments.size>0?kn(y.Ba):c.removedDocuments.size>0&&(kn(y.Ba),y.Ba=!1))}),await Vu(t,s,e)}catch(s){await yc(s)}}function sx(i,e,t){const s=Kt(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const c=[];s.ka.forEach((h,y)=>{const _=y.view.sa(e);_.snapshot&&c.push(_.snapshot)}),function(y,_){const E=Kt(y);E.onlineState=_;let w=!1;E.queries.forEach((S,N)=>{for(const P of N.ta)P.sa(_)&&(w=!0)}),w&&Rg(E)}(s.eventManager,e),c.length&&s.La.p_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function JI(i,e,t){const s=Kt(i);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.Ka.get(e),h=c&&c.key;if(h){let y=new mr(Dt.comparator);y=y.insert(h,Ni.newNoDocument(h,Yt.min()));const _=gn().add(h),E=new Qf(Yt.min(),new Map,new mr(yn),y,_);await eE(s,E),s.$a=s.$a.remove(h),s.Ka.delete(e),Mg(s)}else await D1(s.localStore,e,!1).then(()=>k1(s,e,t)).catch(yc)}async function eN(i,e){const t=Kt(i),s=e.batch.batchId;try{const c=await uI(t.localStore,e);nE(t,s,null),tE(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Vu(t,c)}catch(c){await yc(c)}}async function tN(i,e,t){const s=Kt(i);try{const c=await function(y,_){const E=Kt(y);return E.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let S;return E.mutationQueue.lookupMutationBatch(w,_).next(N=>(kn(N!==null),S=N.keys(),E.mutationQueue.removeMutationBatch(w,N))).next(()=>E.mutationQueue.performConsistencyCheck(w)).next(()=>E.documentOverlayCache.removeOverlaysForBatchId(w,S,_)).next(()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,S)).next(()=>E.localDocuments.getDocuments(w,S))})}(s.localStore,e);nE(s,e,t),tE(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Vu(s,c)}catch(c){await yc(c)}}function tE(i,e){(i.Ga.get(e)||[]).forEach(t=>{t.resolve()}),i.Ga.delete(e)}function nE(i,e,t){const s=Kt(i);let c=s.Wa[s.currentUser.toKey()];if(c){const h=c.get(e);h&&(t?h.reject(t):h.resolve(),c=c.remove(e)),s.Wa[s.currentUser.toKey()]=c}}function k1(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),t&&i.La.Ja(s,t);i.qa.delete(e),i.isPrimaryClient&&i.Ua.br(e).forEach(s=>{i.Ua.containsKey(s)||rE(i,s)})}function rE(i,e){i.Qa.delete(e.path.canonicalString());const t=i.$a.get(e);t!==null&&(Cg(i.remoteStore,t),i.$a=i.$a.remove(e),i.Ka.delete(t),Mg(i))}function ax(i,e,t){for(const s of t)s instanceof Zb?(i.Ua.addReference(s.key,e),nN(i,s)):s instanceof $b?(gt(Dg,"Document no longer in limbo: "+s.key),i.Ua.removeReference(s.key,e),i.Ua.containsKey(s.key)||rE(i,s.key)):Vt()}function nN(i,e){const t=e.key,s=t.path.canonicalString();i.$a.get(t)||i.Qa.has(s)||(gt(Dg,"New document in limbo: "+t),i.Qa.add(s),Mg(i))}function Mg(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const t=new Dt(er.fromString(e)),s=i.za.next();i.Ka.set(s,new qI(t)),i.$a=i.$a.insert(t,s),zb(i.remoteStore,new wo(ia(gg(t.path)),s,"TargetPurposeLimboResolution",zf.ae))}}async function Vu(i,e,t){const s=Kt(i),c=[],h=[],y=[];s.ka.isEmpty()||(s.ka.forEach((_,E)=>{y.push(s.Ha(E,e,t).then(w=>{var S;if((w||t)&&s.isPrimaryClient){const N=w?!w.fromCache:(S=t==null?void 0:t.targetChanges.get(E.targetId))===null||S===void 0?void 0:S.current;s.sharedClientState.updateQueryState(E.targetId,N?"current":"not-current")}if(w){c.push(w);const N=vg.Yi(E.targetId,w);h.push(N)}}))}),await Promise.all(y),s.La.p_(c),await async function(E,w){const S=Kt(E);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>Ze.forEach(w,P=>Ze.forEach(P.Hi,U=>S.persistence.referenceDelegate.addReference(N,P.targetId,U)).next(()=>Ze.forEach(P.Ji,U=>S.persistence.referenceDelegate.removeReference(N,P.targetId,U)))))}catch(N){if(!xc(N))throw N;gt(_g,"Failed to update sequence numbers: "+N)}for(const N of w){const P=N.targetId;if(!N.fromCache){const U=S.Ts.get(P),X=U.snapshotVersion,re=U.withLastLimboFreeSnapshotVersion(X);S.Ts=S.Ts.insert(P,re)}}}(s.localStore,h))}async function rN(i,e){const t=Kt(i);if(!t.currentUser.isEqual(e)){gt(Dg,"User change. New user:",e.toKey());const s=await jb(t.localStore,e);t.currentUser=e,function(h,y){h.Ga.forEach(_=>{_.forEach(E=>{E.reject(new yt(Ke.CANCELLED,y))})}),h.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Vu(t,s.Rs)}}function iN(i,e){const t=Kt(i),s=t.Ka.get(e);if(s&&s.Ba)return gn().add(s.key);{let c=gn();const h=t.qa.get(e);if(!h)return c;for(const y of h){const _=t.ka.get(y);c=c.unionWith(_.view.Sa)}return c}}function iE(i){const e=Kt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=eE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JI.bind(null,e),e.La.p_=FI.bind(null,e.eventManager),e.La.Ja=zI.bind(null,e.eventManager),e}function sN(i){const e=Kt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tN.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return cI(this.persistence,new aI,e.initialUser,this.serializer)}Xa(e){return new Bb(Eg.ri,this.serializer)}Za(e){return new pI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class aN extends If{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){kn(this.persistence.referenceDelegate instanceof Tf);const s=this.persistence.referenceDelegate.garbageCollector;return new q4(s,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Wi.withCacheSize(this.cacheSizeBytes):Wi.DEFAULT;return new Bb(s=>Tf.ri(s,t),this.serializer)}}class L1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>sx(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=rN.bind(null,this.syncEngine),await jI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VI}()}createDatastore(e){const t=Kf(e.databaseInfo.databaseId),s=function(h){return new EI(h)}(e.databaseInfo);return function(h,y,_,E){return new AI(h,y,_,E)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,c,h,y,_){return new SI(s,c,h,y,_)}(this.localStore,this.datastore,e.asyncQueue,t=>sx(this.syncEngine,t,0),function(){return Jy.D()?new Jy:new yI}())}createSyncEngine(e,t){return function(c,h,y,_,E,w,S){const N=new YI(c,h,y,_,E,w);return S&&(N.ja=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(c){const h=Kt(c);gt(ul,"RemoteStore shutting down."),h.W_.add(5),await Uu(h),h.z_.shutdown(),h.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}L1.provider={build:()=>new L1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ja("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="FirestoreClient";class oN{constructor(e,t,s,c,h){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=Ii.UNAUTHENTICATED,this.clientId=Kw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,async y=>{gt(Do,"Received user=",y.uid),await this.authCredentialListener(y),this.user=y}),this.appCheckCredentials.start(s,y=>(gt(Do,"Received new app check token=",y),this.appCheckCredentialListener(y,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new La;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ng(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function a1(i,e){i.asyncQueue.verifyOperationInProgress(),gt(Do,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(async c=>{s.isEqual(c)||(await jb(e.localStore,c),s=c)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function ox(i,e){i.asyncQueue.verifyOperationInProgress();const t=await lN(i);gt(Do,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(s=>tx(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,c)=>tx(e.remoteStore,c)),i._onlineComponents=e}async function lN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){gt(Do,"Using user provided OfflineComponentProvider");try{await a1(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(c){return c.name==="FirebaseError"?c.code===Ke.FAILED_PRECONDITION||c.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(t))throw t;ac("Error using user provided cache. Falling back to memory cache: "+t),await a1(i,new If)}}else gt(Do,"Using default OfflineComponentProvider"),await a1(i,new aN(void 0));return i._offlineComponents}async function aE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(gt(Do,"Using user provided OnlineComponentProvider"),await ox(i,i._uninitializedComponentsProvider._online)):(gt(Do,"Using default OnlineComponentProvider"),await ox(i,new L1))),i._onlineComponents}function cN(i){return aE(i).then(e=>e.syncEngine)}async function oE(i){const e=await aE(i),t=e.eventManager;return t.onListen=XI.bind(null,e.syncEngine),t.onUnlisten=KI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZI.bind(null,e.syncEngine),t}function uN(i,e,t={}){const s=new La;return i.asyncQueue.enqueueAndForget(async()=>function(h,y,_,E,w){const S=new sE({next:P=>{S.su(),y.enqueueAndForget(()=>Qb(h,N));const U=P.docs.has(_);!U&&P.fromCache?w.reject(new yt(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&P.fromCache&&E&&E.source==="server"?w.reject(new yt(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(P)},error:P=>w.reject(P)}),N=new Kb(gg(_.path),S,{includeMetadataChanges:!0,Ta:!0});return Wb(h,N)}(await oE(i),i.asyncQueue,e,t,s)),s.promise}function hN(i,e,t={}){const s=new La;return i.asyncQueue.enqueueAndForget(async()=>function(h,y,_,E,w){const S=new sE({next:P=>{S.su(),y.enqueueAndForget(()=>Qb(h,N)),P.fromCache&&E.source==="server"?w.reject(new yt(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(P)},error:P=>w.reject(P)}),N=new Kb(_,S,{includeMetadataChanges:!0,Ta:!0});return Wb(h,N)}(await oE(i),i.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(i,e,t){if(!t)throw new yt(Ke.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function fN(i,e,t,s){if(e===!0&&s===!0)throw new yt(Ke.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function cx(i){if(!Dt.isDocumentKey(i))throw new yt(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ux(i){if(Dt.isDocumentKey(i))throw new yt(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Jf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Vt()}function Ss(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new yt(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(i);throw new yt(Ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="firestore.googleapis.com",hx=!0;class fx{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new yt(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cE,this.ssl=hx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Pb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<H4)throw new yt(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lE((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new yt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new yt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new yt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,c){return s.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yt(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new yt(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fx(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new b3;switch(s.type){case"firstParty":return new C3(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new yt(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=lx.get(t);s&&(gt("ComponentProvider","Removing Datastore"),lx.delete(t),s.terminate())}(this),Promise.resolve()}}function dN(i,e,t,s={}){var c;const h=(i=Ss(i,Fu))._getSettings(),y=`${e}:${t}`;if(h.host!==cE&&h.host!==y&&ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},h),{host:y,ssl:!1})),s.mockUserToken){let _,E;if(typeof s.mockUserToken=="string")_=s.mockUserToken,E=Ii.MOCK_USER;else{_=XC(s.mockUserToken,(c=i._app)===null||c===void 0?void 0:c.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new yt(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ii(w)}i._authCredentials=new E3(new Qw(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ml(this.firestore,e,this._query)}}class ji{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ji(this.firestore,e,this._key)}}class Co extends ml{constructor(e,t,s){super(e,t,gg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ji(this.firestore,null,new Dt(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function li(i,e,...t){if(i=ni(i),Og("collection","path",e),i instanceof Fu){const s=er.fromString(e,...t);return ux(s),new Co(i,null,s)}{if(!(i instanceof ji||i instanceof Co))throw new yt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(er.fromString(e,...t));return ux(s),new Co(i.firestore,null,s)}}function dx(i,e){if(i=Ss(i,Fu),Og("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new yt(Ke.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ml(i,null,function(s){return new wc(er.emptyPath(),s)}(e))}function Zt(i,e,...t){if(i=ni(i),arguments.length===1&&(e=Kw.newId()),Og("doc","path",e),i instanceof Fu){const s=er.fromString(e,...t);return cx(s),new ji(i,null,new Dt(s))}{if(!(i instanceof ji||i instanceof Co))throw new yt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(er.fromString(e,...t));return cx(s),new ji(i.firestore,i instanceof Co?i.converter:null,new Dt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="AsyncQueue";class mx{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Vb(this,"async_queue_retry"),this.Su=()=>{const s=s1();s&&gt(gx,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const t=s1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=s1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new La;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!xc(e))throw e;gt(gx,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const c=function(y){let _=y.message||"";return y.stack&&(_=y.stack.includes(y.message)?y.stack:y.message+`
`+y.stack),_}(s);throw ja("INTERNAL UNHANDLED ERROR: ",c),s}).then(s=>(this.pu=!1,s))));return this.bu=t,t}enqueueAfterDelay(e,t,s){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const c=Ig.createAndSchedule(this,e,t,s,h=>this.Fu(h));return this.fu.push(c),c}Du(){this.gu&&Vt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class pl extends Fu{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new mx,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mx(e),this._firestoreClient=void 0,await e}}}function Po(i,e){const t=typeof i=="object"?i:lw(),s=typeof i=="string"?i:wf,c=K1(t,"firestore").getImmediate({identifier:s});if(!c._initialized){const h=qC("firestore");h&&dN(c,...h)}return c}function kg(i){if(i._terminated)throw new yt(Ke.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||gN(i),i._firestoreClient}function gN(i){var e,t,s;const c=i._freezeSettings(),h=function(_,E,w,S){return new j3(_,E,w,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,lE(S.experimentalLongPollingOptions),S.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,c);i._componentsProvider||!((t=c.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=c.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider}),i._firestoreClient=new oN(i._authCredentials,i._appCheckCredentials,i._queue,h,i._componentsProvider&&function(_){const E=_==null?void 0:_._online.build();return{_offline:_==null?void 0:_._offline.build(E),_online:E}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fc(wi.fromBase64String(e))}catch(t){throw new yt(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fc(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new yt(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yt(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yt(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yn(this._lat,e._lat)||yn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,c){if(s.length!==c.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==c[h])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=/^__.*__$/;class pN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Lo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bu(e,this.data,t,this.fieldTransforms)}}class uE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Lo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt()}}class jg{constructor(e,t,s,c,h,y){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,h===void 0&&this.Bu(),this.fieldTransforms=h||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new jg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:s,Qu:!1});return c.$u(e),c}Ku(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:s,Qu:!1});return c.Bu(),c}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Nf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(hE(this.Lu)&&mN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class yN{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Kf(e)}ju(e,t,s,c=!1){return new jg({Lu:e,methodName:t,zu:s,path:xi.emptyPath(),Qu:!1,Gu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function td(i){const e=i._freezeSettings(),t=Kf(i._databaseId);return new yN(i._databaseId,!!e.ignoreUndefinedProperties,t)}function fE(i,e,t,s,c,h={}){const y=i.ju(h.merge||h.mergeFields?2:0,e,t,c);Ug("Data must be an object, but it was:",y,s);const _=dE(s,y);let E,w;if(h.merge)E=new ls(y.fieldMask),w=y.fieldTransforms;else if(h.mergeFields){const S=[];for(const N of h.mergeFields){const P=P1(e,N,t);if(!y.contains(P))throw new yt(Ke.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);mE(S,P)||S.push(P)}E=new ls(S),w=y.fieldTransforms.filter(N=>E.covers(N.field))}else E=null,w=y.fieldTransforms;return new pN(new Qi(_),E,w)}class nd extends Lg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nd}}function xN(i,e,t,s){const c=i.ju(1,e,t);Ug("Data must be an object, but it was:",c,s);const h=[],y=Qi.empty();ko(s,(E,w)=>{const S=Vg(e,E,t);w=ni(w);const N=c.Ku(S);if(w instanceof nd)h.push(S);else{const P=zu(w,N);P!=null&&(h.push(S),y.set(S,P))}});const _=new ls(h);return new uE(y,_,c.fieldTransforms)}function wN(i,e,t,s,c,h){const y=i.ju(1,e,t),_=[P1(e,s,t)],E=[c];if(h.length%2!=0)throw new yt(Ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<h.length;P+=2)_.push(P1(e,h[P])),E.push(h[P+1]);const w=[],S=Qi.empty();for(let P=_.length-1;P>=0;--P)if(!mE(w,_[P])){const U=_[P];let X=E[P];X=ni(X);const re=y.Ku(U);if(X instanceof nd)w.push(U);else{const Y=zu(X,re);Y!=null&&(w.push(U),S.set(U,Y))}}const N=new ls(w);return new uE(S,N,y.fieldTransforms)}function bN(i,e,t,s=!1){return zu(t,i.ju(s?4:3,e))}function zu(i,e){if(gE(i=ni(i)))return Ug("Unsupported field value:",e,i),dE(i,e);if(i instanceof Lg)return function(s,c){if(!hE(c.Lu))throw c.Wu(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Wu(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(c);h&&c.fieldTransforms.push(h)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,c){const h=[];let y=0;for(const _ of s){let E=zu(_,c.Uu(y));E==null&&(E={nullValue:"NULL_VALUE"}),h.push(E),y++}return{arrayValue:{values:h}}}(i,e)}return function(s,c){if((s=ni(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return o4(c.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=ei.fromDate(s);return{timestampValue:Af(c.serializer,h)}}if(s instanceof ei){const h=new ei(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Af(c.serializer,h)}}if(s instanceof Pg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof fc)return{bytesValue:Nb(c.serializer,s._byteString)};if(s instanceof ji){const h=c.databaseId,y=s.firestore._databaseId;if(!y.isEqual(h))throw c.Wu(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:wg(s.firestore._databaseId||c.databaseId,s._key.path)}}if(s instanceof Bg)return function(y,_){return{mapValue:{fields:{[ib]:{stringValue:sb},[bf]:{arrayValue:{values:y.toArray().map(w=>{if(typeof w!="number")throw _.Wu("VectorValues must only contain numeric values.");return mg(_.serializer,w)})}}}}}}(s,c);throw c.Wu(`Unsupported field value: ${Jf(s)}`)}(i,e)}function dE(i,e){const t={};return $w(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(i,(s,c)=>{const h=zu(c,e.qu(s));h!=null&&(t[s]=h)}),{mapValue:{fields:t}}}function gE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ei||i instanceof Pg||i instanceof fc||i instanceof ji||i instanceof Lg||i instanceof Bg)}function Ug(i,e,t){if(!gE(t)||!function(c){return typeof c=="object"&&c!==null&&(Object.getPrototypeOf(c)===Object.prototype||Object.getPrototypeOf(c)===null)}(t)){const s=Jf(t);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function P1(i,e,t){if((e=ni(e))instanceof ed)return e._internalPath;if(typeof e=="string")return Vg(i,e);throw Nf("Field path arguments must be of type string or ",i,!1,void 0,t)}const EN=new RegExp("[~\\*/\\[\\]]");function Vg(i,e,t){if(e.search(EN)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ed(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Nf(i,e,t,s,c){const h=s&&!s.isEmpty(),y=c!==void 0;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let E="";return(h||y)&&(E+=" (found",h&&(E+=` in field ${s}`),y&&(E+=` in document ${c}`),E+=")"),new yt(Ke.INVALID_ARGUMENT,_+i+E)}function mE(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t,s,c,h){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new ji(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vN extends pE{data(){return super.data()}}function Fg(i,e){return typeof e=="string"?Vg(i,e):e instanceof ed?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new yt(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class CN extends zg{}function Iu(i,e,...t){let s=[];e instanceof zg&&s.push(e),s=s.concat(t),function(h){const y=h.filter(E=>E instanceof Hg).length,_=h.filter(E=>E instanceof rd).length;if(y>1||y>0&&_>0)throw new yt(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)i=c._apply(i);return i}class rd extends CN{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new rd(e,t,s)}_apply(e){const t=this._parse(e);return yE(e._query,t),new ml(e.firestore,e.converter,A1(e._query,t))}_parse(e){const t=td(e.firestore);return function(h,y,_,E,w,S,N){let P;if(w.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new yt(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){yx(N,S);const X=[];for(const re of N)X.push(px(E,h,re));P={arrayValue:{values:X}}}else P=px(E,h,N)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||yx(N,S),P=bN(_,y,N,S==="in"||S==="not-in");return Hr.create(w,S,P)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Nu(i,e,t){const s=e,c=Fg("where",i);return rd._create(c,s,t)}class Hg extends zg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hg(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Bs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(c,h){let y=c;const _=h.getFlattenedFilters();for(const E of _)yE(y,E),y=A1(y,E)}(e._query,t),new ml(e.firestore,e.converter,A1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function px(i,e,t){if(typeof(t=ni(t))=="string"){if(t==="")throw new yt(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!db(e)&&t.indexOf("/")!==-1)throw new yt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(er.fromString(t));if(!Dt.isDocumentKey(s))throw new yt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Dy(i,new Dt(s))}if(t instanceof ji)return Dy(i,t._key);throw new yt(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(t)}.`)}function yx(i,e){if(!Array.isArray(i)||i.length===0)throw new yt(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yE(i,e){const t=function(c,h){for(const y of c)for(const _ of y.getFlattenedFilters())if(h.indexOf(_.op)>=0)return _.op;return null}(i.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new yt(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new yt(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AN{convertValue(e,t="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Vt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ko(e,(c,h)=>{s[c]=this.convertValue(h,t)}),s}convertVectorValue(e){var t,s,c;const h=(c=(s=(t=e.fields)===null||t===void 0?void 0:t[bf].arrayValue)===null||s===void 0?void 0:s.values)===null||c===void 0?void 0:c.map(y=>Mr(y.doubleValue));return new Bg(h)}convertGeoPoint(e){return new Pg(Mr(e.latitude),Mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Gf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const t=So(e);return new ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=er.fromString(e);kn(Lb(s));const c=new Cu(s.get(1),s.get(3)),h=new Dt(s.popFirst(5));return c.isEqual(t)||ja(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wE extends pE{constructor(e,t,s,c,h,y){super(e,t,s,c,y),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Fg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class of extends wE{data(e={}){return super.data(e)}}class TN{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new fu(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new of(this._firestore,this._userDataWriter,s.key,s,new fu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yt(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(c,h){if(c._snapshot.oldDocs.isEmpty()){let y=0;return c._snapshot.docChanges.map(_=>{const E=new of(c._firestore,c._userDataWriter,_.doc.key,_.doc,new fu(c._snapshot.mutatedKeys.has(_.doc.key),c._snapshot.fromCache),c.query.converter);return _.doc,{type:"added",doc:E,oldIndex:-1,newIndex:y++}})}{let y=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(_=>h||_.type!==3).map(_=>{const E=new of(c._firestore,c._userDataWriter,_.doc.key,_.doc,new fu(c._snapshot.mutatedKeys.has(_.doc.key),c._snapshot.fromCache),c.query.converter);let w=-1,S=-1;return _.type!==0&&(w=y.indexOf(_.doc.key),y=y.delete(_.doc.key)),_.type!==1&&(y=y.add(_.doc),S=y.indexOf(_.doc.key)),{type:SN(_.type),doc:E,oldIndex:w,newIndex:S}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function SN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(i){i=Ss(i,ji);const e=Ss(i.firestore,pl);return uN(kg(e),i._key).then(t=>NN(e,i,t))}class bE extends AN{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ji(this.firestore,null,t)}}function Jr(i){i=Ss(i,ml);const e=Ss(i.firestore,pl),t=kg(e),s=new bE(e);return _N(i._query),hN(t,i._query).then(c=>new TN(e,s,i,c))}function Bi(i,e,t){i=Ss(i,ji);const s=Ss(i.firestore,pl),c=xE(i.converter,e,t);return id(s,[fE(td(s),"setDoc",i._key,c,i.converter!==null,t).toMutation(i._key,Ts.none())])}function sl(i,e,t,...s){i=Ss(i,ji);const c=Ss(i.firestore,pl),h=td(c);let y;return y=typeof(e=ni(e))=="string"||e instanceof ed?wN(h,"updateDoc",i._key,e,t,s):xN(h,"updateDoc",i._key,e),id(c,[y.toMutation(i._key,Ts.exists(!0))])}function du(i){return id(Ss(i.firestore,pl),[new pg(i._key,Ts.none())])}function IN(i,e){const t=Ss(i.firestore,pl),s=Zt(i),c=xE(i.converter,e);return id(t,[fE(td(i.firestore),"addDoc",s._key,c,i.converter!==null,{}).toMutation(s._key,Ts.exists(!1))]).then(()=>s)}function id(i,e){return function(s,c){const h=new La;return s.asyncQueue.enqueueAndForget(async()=>$I(await cN(s),c,h)),h.promise}(kg(i),e)}function NN(i,e,t){const s=t.docs.get(e._key),c=new bE(i);return new wE(i,c,e._key,s,new fu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(c){pc=c})(mc),ic(new al("firestore",(s,{instanceIdentifier:c,options:h})=>{const y=s.getProvider("app").getImmediate(),_=new pl(new v3(s.getProvider("auth-internal")),new A3(y,s.getProvider("app-check-internal")),function(w,S){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new yt(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cu(w.options.projectId,S)}(y,c),y);return h=Object.assign({useFetchStreams:t},h),_._setSettings(h),_},"PUBLIC").setMultipleInstances(!0)),vo(by,Ey,e),vo(by,Ey,"esm2017")})();var RN="firebase",DN="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo(RN,DN,"app");const MN={apiKey:"AIzaSyC1K4kZk4TwvPBhndVCffuw5P4MqAC_AFM",authDomain:"web2024-9dc04.firebaseapp.com",projectId:"web2024-9dc04",storageBucket:"web2024-9dc04.firebasestorage.app",messagingSenderId:"533756221690",appId:"1:533756221690:web:7553ac87b46090dab99143",measurementId:"G-1EEGB1LPBS"},Ki=ow(MN);za(Ki);function ON(){const[i,e]=ie.useState(""),[t,s]=ie.useState(!1),c=Vs(),h=za(Ki),y=new Na,_=Po(Ki),E=async()=>{var w;try{s(!0);const N=(await IS(h,y)).user,P=Zt(_,"users",N.uid),U=await zr(P);if(!U.exists()){await Bi(P,{name:N.displayName,email:N.email,photo:N.photoURL,classroom:{cid:"",status:2}}),c("/register");return}const X=U.data();if(!X.phone){c("/register");return}const re=(w=X==null?void 0:X.classroom)==null?void 0:w.status;c(re===1?"/dashboard":"/student-dashboard")}catch(S){console.error(S),e("ไม่สามารถเข้าสู่ระบบด้วย Google ได้: "+S.message)}finally{s(!1)}};return C.jsxs("div",{className:"min-h-screen flex",children:[C.jsx("div",{className:"w-1/2 bg-gradient-to-br from-blue-200 to-blue-500 flex items-center justify-center p-6",children:C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-5xl font-ChakraPetchTH text-white mb-4",children:"ยินดีต้อนรับสู่"}),C.jsx("h2",{className:"text-4xl font-ChakraPetchTH text-white mb-2",children:"ระบบจัดการห้องเรียน"}),C.jsx("h3",{className:"text-3xl font-InterEN text-white",children:"Classroom Management System"})]})}),C.jsx("div",{className:"w-1/2 bg-white flex items-center justify-center p-6",children:C.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-md",children:[C.jsx("h2",{className:"text-3xl font-ChakraPetchTH text-gray-800 mb-8",children:"เข้าสู่ระบบ"}),i&&C.jsx("div",{className:"bg-red-100 border border-red-400 text-red-800 px-4 py-3 rounded mb-6 w-full",children:i}),C.jsxs("button",{onClick:E,disabled:t,className:"w-80 h-16 flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-700 text-xl font-ChakraPetchTH rounded-xl transition duration-300 shadow-lg border-2 border-gray-200 hover:border-blue-500 group mx-auto",children:[t?C.jsx("div",{className:"inline-block animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500 mr-2"}):C.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-7 h-7"}),C.jsx("span",{className:"group-hover:text-blue-600",children:t?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบด้วย Google"})]}),C.jsx("h3",{className:"p-6 text-red-500 font-ChakraPetchTH",children:"ลงทะเบียนครั้งแรกสำหรับอาจารย์ โปรดติดต่อแอดมิน"})]})})]})}const pi=[];for(let i=0;i<256;++i)pi.push((i+256).toString(16).slice(1));function kN(i,e=0){return(pi[i[e+0]]+pi[i[e+1]]+pi[i[e+2]]+pi[i[e+3]]+"-"+pi[i[e+4]]+pi[i[e+5]]+"-"+pi[i[e+6]]+pi[i[e+7]]+"-"+pi[i[e+8]]+pi[i[e+9]]+"-"+pi[i[e+10]]+pi[i[e+11]]+pi[i[e+12]]+pi[i[e+13]]+pi[i[e+14]]+pi[i[e+15]]).toLowerCase()}let o1;const LN=new Uint8Array(16);function PN(){if(!o1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o1=crypto.getRandomValues.bind(crypto)}return o1(LN)}const BN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xx={randomUUID:BN};function EE(i,e,t){var c;if(xx.randomUUID&&!i)return xx.randomUUID();i=i||{};const s=i.random??((c=i.rng)==null?void 0:c.call(i))??PN();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,kN(s)}var jN=Object.defineProperty,Rf=Object.getOwnPropertySymbols,vE=Object.prototype.hasOwnProperty,_E=Object.prototype.propertyIsEnumerable,wx=(i,e,t)=>e in i?jN(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,B1=(i,e)=>{for(var t in e||(e={}))vE.call(e,t)&&wx(i,t,e[t]);if(Rf)for(var t of Rf(e))_E.call(e,t)&&wx(i,t,e[t]);return i},j1=(i,e)=>{var t={};for(var s in i)vE.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&Rf)for(var s of Rf(i))e.indexOf(s)<0&&_E.call(i,s)&&(t[s]=i[s]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var hl;(i=>{const e=class ln{constructor(E,w,S,N){if(this.version=E,this.errorCorrectionLevel=w,this.modules=[],this.isFunction=[],E<ln.MIN_VERSION||E>ln.MAX_VERSION)throw new RangeError("Version value out of range");if(N<-1||N>7)throw new RangeError("Mask value out of range");this.size=E*4+17;let P=[];for(let X=0;X<this.size;X++)P.push(!1);for(let X=0;X<this.size;X++)this.modules.push(P.slice()),this.isFunction.push(P.slice());this.drawFunctionPatterns();const U=this.addEccAndInterleave(S);if(this.drawCodewords(U),N==-1){let X=1e9;for(let re=0;re<8;re++){this.applyMask(re),this.drawFormatBits(re);const Y=this.getPenaltyScore();Y<X&&(N=re,X=Y),this.applyMask(re)}}c(0<=N&&N<=7),this.mask=N,this.applyMask(N),this.drawFormatBits(N),this.isFunction=[]}static encodeText(E,w){const S=i.QrSegment.makeSegments(E);return ln.encodeSegments(S,w)}static encodeBinary(E,w){const S=i.QrSegment.makeBytes(E);return ln.encodeSegments([S],w)}static encodeSegments(E,w,S=1,N=40,P=-1,U=!0){if(!(ln.MIN_VERSION<=S&&S<=N&&N<=ln.MAX_VERSION)||P<-1||P>7)throw new RangeError("Invalid value");let X,re;for(X=S;;X++){const se=ln.getNumDataCodewords(X,w)*8,fe=y.getTotalBits(E,X);if(fe<=se){re=fe;break}if(X>=N)throw new RangeError("Data too long")}for(const se of[ln.Ecc.MEDIUM,ln.Ecc.QUARTILE,ln.Ecc.HIGH])U&&re<=ln.getNumDataCodewords(X,se)*8&&(w=se);let Y=[];for(const se of E){t(se.mode.modeBits,4,Y),t(se.numChars,se.mode.numCharCountBits(X),Y);for(const fe of se.getData())Y.push(fe)}c(Y.length==re);const ye=ln.getNumDataCodewords(X,w)*8;c(Y.length<=ye),t(0,Math.min(4,ye-Y.length),Y),t(0,(8-Y.length%8)%8,Y),c(Y.length%8==0);for(let se=236;Y.length<ye;se^=253)t(se,8,Y);let ue=[];for(;ue.length*8<Y.length;)ue.push(0);return Y.forEach((se,fe)=>ue[fe>>>3]|=se<<7-(fe&7)),new ln(X,w,ue,P)}getModule(E,w){return 0<=E&&E<this.size&&0<=w&&w<this.size&&this.modules[w][E]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const E=this.getAlignmentPatternPositions(),w=E.length;for(let S=0;S<w;S++)for(let N=0;N<w;N++)S==0&&N==0||S==0&&N==w-1||S==w-1&&N==0||this.drawAlignmentPattern(E[S],E[N]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(E){const w=this.errorCorrectionLevel.formatBits<<3|E;let S=w;for(let P=0;P<10;P++)S=S<<1^(S>>>9)*1335;const N=(w<<10|S)^21522;c(N>>>15==0);for(let P=0;P<=5;P++)this.setFunctionModule(8,P,s(N,P));this.setFunctionModule(8,7,s(N,6)),this.setFunctionModule(8,8,s(N,7)),this.setFunctionModule(7,8,s(N,8));for(let P=9;P<15;P++)this.setFunctionModule(14-P,8,s(N,P));for(let P=0;P<8;P++)this.setFunctionModule(this.size-1-P,8,s(N,P));for(let P=8;P<15;P++)this.setFunctionModule(8,this.size-15+P,s(N,P));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let E=this.version;for(let S=0;S<12;S++)E=E<<1^(E>>>11)*7973;const w=this.version<<12|E;c(w>>>18==0);for(let S=0;S<18;S++){const N=s(w,S),P=this.size-11+S%3,U=Math.floor(S/3);this.setFunctionModule(P,U,N),this.setFunctionModule(U,P,N)}}drawFinderPattern(E,w){for(let S=-4;S<=4;S++)for(let N=-4;N<=4;N++){const P=Math.max(Math.abs(N),Math.abs(S)),U=E+N,X=w+S;0<=U&&U<this.size&&0<=X&&X<this.size&&this.setFunctionModule(U,X,P!=2&&P!=4)}}drawAlignmentPattern(E,w){for(let S=-2;S<=2;S++)for(let N=-2;N<=2;N++)this.setFunctionModule(E+N,w+S,Math.max(Math.abs(N),Math.abs(S))!=1)}setFunctionModule(E,w,S){this.modules[w][E]=S,this.isFunction[w][E]=!0}addEccAndInterleave(E){const w=this.version,S=this.errorCorrectionLevel;if(E.length!=ln.getNumDataCodewords(w,S))throw new RangeError("Invalid argument");const N=ln.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][w],P=ln.ECC_CODEWORDS_PER_BLOCK[S.ordinal][w],U=Math.floor(ln.getNumRawDataModules(w)/8),X=N-U%N,re=Math.floor(U/N);let Y=[];const ye=ln.reedSolomonComputeDivisor(P);for(let se=0,fe=0;se<N;se++){let we=E.slice(fe,fe+re-P+(se<X?0:1));fe+=we.length;const Pe=ln.reedSolomonComputeRemainder(we,ye);se<X&&we.push(0),Y.push(we.concat(Pe))}let ue=[];for(let se=0;se<Y[0].length;se++)Y.forEach((fe,we)=>{(se!=re-P||we>=X)&&ue.push(fe[se])});return c(ue.length==U),ue}drawCodewords(E){if(E.length!=Math.floor(ln.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let w=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let N=0;N<this.size;N++)for(let P=0;P<2;P++){const U=S-P,re=(S+1&2)==0?this.size-1-N:N;!this.isFunction[re][U]&&w<E.length*8&&(this.modules[re][U]=s(E[w>>>3],7-(w&7)),w++)}}c(w==E.length*8)}applyMask(E){if(E<0||E>7)throw new RangeError("Mask value out of range");for(let w=0;w<this.size;w++)for(let S=0;S<this.size;S++){let N;switch(E){case 0:N=(S+w)%2==0;break;case 1:N=w%2==0;break;case 2:N=S%3==0;break;case 3:N=(S+w)%3==0;break;case 4:N=(Math.floor(S/3)+Math.floor(w/2))%2==0;break;case 5:N=S*w%2+S*w%3==0;break;case 6:N=(S*w%2+S*w%3)%2==0;break;case 7:N=((S+w)%2+S*w%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[w][S]&&N&&(this.modules[w][S]=!this.modules[w][S])}}getPenaltyScore(){let E=0;for(let P=0;P<this.size;P++){let U=!1,X=0,re=[0,0,0,0,0,0,0];for(let Y=0;Y<this.size;Y++)this.modules[P][Y]==U?(X++,X==5?E+=ln.PENALTY_N1:X>5&&E++):(this.finderPenaltyAddHistory(X,re),U||(E+=this.finderPenaltyCountPatterns(re)*ln.PENALTY_N3),U=this.modules[P][Y],X=1);E+=this.finderPenaltyTerminateAndCount(U,X,re)*ln.PENALTY_N3}for(let P=0;P<this.size;P++){let U=!1,X=0,re=[0,0,0,0,0,0,0];for(let Y=0;Y<this.size;Y++)this.modules[Y][P]==U?(X++,X==5?E+=ln.PENALTY_N1:X>5&&E++):(this.finderPenaltyAddHistory(X,re),U||(E+=this.finderPenaltyCountPatterns(re)*ln.PENALTY_N3),U=this.modules[Y][P],X=1);E+=this.finderPenaltyTerminateAndCount(U,X,re)*ln.PENALTY_N3}for(let P=0;P<this.size-1;P++)for(let U=0;U<this.size-1;U++){const X=this.modules[P][U];X==this.modules[P][U+1]&&X==this.modules[P+1][U]&&X==this.modules[P+1][U+1]&&(E+=ln.PENALTY_N2)}let w=0;for(const P of this.modules)w=P.reduce((U,X)=>U+(X?1:0),w);const S=this.size*this.size,N=Math.ceil(Math.abs(w*20-S*10)/S)-1;return c(0<=N&&N<=9),E+=N*ln.PENALTY_N4,c(0<=E&&E<=2568888),E}getAlignmentPatternPositions(){if(this.version==1)return[];{const E=Math.floor(this.version/7)+2,w=this.version==32?26:Math.ceil((this.version*4+4)/(E*2-2))*2;let S=[6];for(let N=this.size-7;S.length<E;N-=w)S.splice(1,0,N);return S}}static getNumRawDataModules(E){if(E<ln.MIN_VERSION||E>ln.MAX_VERSION)throw new RangeError("Version number out of range");let w=(16*E+128)*E+64;if(E>=2){const S=Math.floor(E/7)+2;w-=(25*S-10)*S-55,E>=7&&(w-=36)}return c(208<=w&&w<=29648),w}static getNumDataCodewords(E,w){return Math.floor(ln.getNumRawDataModules(E)/8)-ln.ECC_CODEWORDS_PER_BLOCK[w.ordinal][E]*ln.NUM_ERROR_CORRECTION_BLOCKS[w.ordinal][E]}static reedSolomonComputeDivisor(E){if(E<1||E>255)throw new RangeError("Degree out of range");let w=[];for(let N=0;N<E-1;N++)w.push(0);w.push(1);let S=1;for(let N=0;N<E;N++){for(let P=0;P<w.length;P++)w[P]=ln.reedSolomonMultiply(w[P],S),P+1<w.length&&(w[P]^=w[P+1]);S=ln.reedSolomonMultiply(S,2)}return w}static reedSolomonComputeRemainder(E,w){let S=w.map(N=>0);for(const N of E){const P=N^S.shift();S.push(0),w.forEach((U,X)=>S[X]^=ln.reedSolomonMultiply(U,P))}return S}static reedSolomonMultiply(E,w){if(E>>>8||w>>>8)throw new RangeError("Byte out of range");let S=0;for(let N=7;N>=0;N--)S=S<<1^(S>>>7)*285,S^=(w>>>N&1)*E;return c(S>>>8==0),S}finderPenaltyCountPatterns(E){const w=E[1];c(w<=this.size*3);const S=w>0&&E[2]==w&&E[3]==w*3&&E[4]==w&&E[5]==w;return(S&&E[0]>=w*4&&E[6]>=w?1:0)+(S&&E[6]>=w*4&&E[0]>=w?1:0)}finderPenaltyTerminateAndCount(E,w,S){return E&&(this.finderPenaltyAddHistory(w,S),w=0),w+=this.size,this.finderPenaltyAddHistory(w,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(E,w){w[0]==0&&(E+=this.size),w.pop(),w.unshift(E)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function t(_,E,w){if(E<0||E>31||_>>>E)throw new RangeError("Value out of range");for(let S=E-1;S>=0;S--)w.push(_>>>S&1)}function s(_,E){return(_>>>E&1)!=0}function c(_){if(!_)throw new Error("Assertion error")}const h=class Cr{constructor(E,w,S){if(this.mode=E,this.numChars=w,this.bitData=S,w<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(E){let w=[];for(const S of E)t(S,8,w);return new Cr(Cr.Mode.BYTE,E.length,w)}static makeNumeric(E){if(!Cr.isNumeric(E))throw new RangeError("String contains non-numeric characters");let w=[];for(let S=0;S<E.length;){const N=Math.min(E.length-S,3);t(parseInt(E.substring(S,S+N),10),N*3+1,w),S+=N}return new Cr(Cr.Mode.NUMERIC,E.length,w)}static makeAlphanumeric(E){if(!Cr.isAlphanumeric(E))throw new RangeError("String contains unencodable characters in alphanumeric mode");let w=[],S;for(S=0;S+2<=E.length;S+=2){let N=Cr.ALPHANUMERIC_CHARSET.indexOf(E.charAt(S))*45;N+=Cr.ALPHANUMERIC_CHARSET.indexOf(E.charAt(S+1)),t(N,11,w)}return S<E.length&&t(Cr.ALPHANUMERIC_CHARSET.indexOf(E.charAt(S)),6,w),new Cr(Cr.Mode.ALPHANUMERIC,E.length,w)}static makeSegments(E){return E==""?[]:Cr.isNumeric(E)?[Cr.makeNumeric(E)]:Cr.isAlphanumeric(E)?[Cr.makeAlphanumeric(E)]:[Cr.makeBytes(Cr.toUtf8ByteArray(E))]}static makeEci(E){let w=[];if(E<0)throw new RangeError("ECI assignment value out of range");if(E<128)t(E,8,w);else if(E<16384)t(2,2,w),t(E,14,w);else if(E<1e6)t(6,3,w),t(E,21,w);else throw new RangeError("ECI assignment value out of range");return new Cr(Cr.Mode.ECI,0,w)}static isNumeric(E){return Cr.NUMERIC_REGEX.test(E)}static isAlphanumeric(E){return Cr.ALPHANUMERIC_REGEX.test(E)}getData(){return this.bitData.slice()}static getTotalBits(E,w){let S=0;for(const N of E){const P=N.mode.numCharCountBits(w);if(N.numChars>=1<<P)return 1/0;S+=4+P+N.bitData.length}return S}static toUtf8ByteArray(E){E=encodeURI(E);let w=[];for(let S=0;S<E.length;S++)E.charAt(S)!="%"?w.push(E.charCodeAt(S)):(w.push(parseInt(E.substring(S+1,S+3),16)),S+=2);return w}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=h;i.QrSegment=h})(hl||(hl={}));(i=>{(e=>{const t=class{constructor(c,h){this.ordinal=c,this.formatBits=h}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(i.QrCode||(i.QrCode={}))})(hl||(hl={}));(i=>{(e=>{const t=class{constructor(c,h){this.modeBits=c,this.numBitsCharCount=h}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(i.QrSegment||(i.QrSegment={}))})(hl||(hl={}));var $l=hl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var UN={L:$l.QrCode.Ecc.LOW,M:$l.QrCode.Ecc.MEDIUM,Q:$l.QrCode.Ecc.QUARTILE,H:$l.QrCode.Ecc.HIGH},CE=128,AE="L",TE="#FFFFFF",SE="#000000",IE=!1,NE=1,VN=4,FN=0,zN=.1;function RE(i,e=0){const t=[];return i.forEach(function(s,c){let h=null;s.forEach(function(y,_){if(!y&&h!==null){t.push(`M${h+e} ${c+e}h${_-h}v1H${h+e}z`),h=null;return}if(_===s.length-1){if(!y)return;h===null?t.push(`M${_+e},${c+e} h1v1H${_+e}z`):t.push(`M${h+e},${c+e} h${_+1-h}v1H${h+e}z`);return}y&&h===null&&(h=_)})}),t.join("")}function DE(i,e){return i.slice().map((t,s)=>s<e.y||s>=e.y+e.h?t:t.map((c,h)=>h<e.x||h>=e.x+e.w?c:!1))}function HN(i,e,t,s){if(s==null)return null;const c=i.length+t*2,h=Math.floor(e*zN),y=c/e,_=(s.width||h)*y,E=(s.height||h)*y,w=s.x==null?i.length/2-_/2:s.x*y,S=s.y==null?i.length/2-E/2:s.y*y,N=s.opacity==null?1:s.opacity;let P=null;if(s.excavate){let X=Math.floor(w),re=Math.floor(S),Y=Math.ceil(_+w-X),ye=Math.ceil(E+S-re);P={x:X,y:re,w:Y,h:ye}}const U=s.crossOrigin;return{x:w,y:S,h:E,w:_,excavation:P,opacity:N,crossOrigin:U}}function GN(i,e){return e!=null?Math.max(Math.floor(e),0):i?VN:FN}function ME({value:i,level:e,minVersion:t,includeMargin:s,marginSize:c,imageSettings:h,size:y,boostLevel:_}){let E=Fr.useMemo(()=>{const X=(Array.isArray(i)?i:[i]).reduce((re,Y)=>(re.push(...$l.QrSegment.makeSegments(Y)),re),[]);return $l.QrCode.encodeSegments(X,UN[e],t,void 0,void 0,_)},[i,e,t,_]);const{cells:w,margin:S,numCells:N,calculatedImageSettings:P}=Fr.useMemo(()=>{let U=E.getModules();const X=GN(s,c),re=U.length+X*2,Y=HN(U,y,X,h);return{cells:U,margin:X,numCells:re,calculatedImageSettings:Y}},[E,y,h,s,c]);return{qrcode:E,margin:S,cells:w,numCells:N,calculatedImageSettings:P}}var qN=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),YN=Fr.forwardRef(function(e,t){const s=e,{value:c,size:h=CE,level:y=AE,bgColor:_=TE,fgColor:E=SE,includeMargin:w=IE,minVersion:S=NE,boostLevel:N,marginSize:P,imageSettings:U}=s,re=j1(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:Y}=re,ye=j1(re,["style"]),ue=U==null?void 0:U.src,se=Fr.useRef(null),fe=Fr.useRef(null),we=Fr.useCallback(ve=>{se.current=ve,typeof t=="function"?t(ve):t&&(t.current=ve)},[t]),[Pe,z]=Fr.useState(!1),{margin:j,cells:L,numCells:F,calculatedImageSettings:J}=ME({value:c,level:y,minVersion:S,boostLevel:N,includeMargin:w,marginSize:P,imageSettings:U,size:h});Fr.useEffect(()=>{if(se.current!=null){const ve=se.current,te=ve.getContext("2d");if(!te)return;let Ae=L;const Te=fe.current,Xe=J!=null&&Te!==null&&Te.complete&&Te.naturalHeight!==0&&Te.naturalWidth!==0;Xe&&J.excavation!=null&&(Ae=DE(L,J.excavation));const ht=window.devicePixelRatio||1;ve.height=ve.width=h*ht;const Q=h/F*ht;te.scale(Q,Q),te.fillStyle=_,te.fillRect(0,0,F,F),te.fillStyle=E,qN?te.fill(new Path2D(RE(Ae,j))):L.forEach(function(ge,Re){ge.forEach(function(Fe,Se){Fe&&te.fillRect(Se+j,Re+j,1,1)})}),J&&(te.globalAlpha=J.opacity),Xe&&te.drawImage(Te,J.x+j,J.y+j,J.w,J.h)}}),Fr.useEffect(()=>{z(!1)},[ue]);const ee=B1({height:h,width:h},Y);let W=null;return ue!=null&&(W=Fr.createElement("img",{src:ue,key:ue,style:{display:"none"},onLoad:()=>{z(!0)},ref:fe,crossOrigin:J==null?void 0:J.crossOrigin})),Fr.createElement(Fr.Fragment,null,Fr.createElement("canvas",B1({style:ee,height:h,width:h,ref:we,role:"img"},ye)),W)});YN.displayName="QRCodeCanvas";var lf=Fr.forwardRef(function(e,t){const s=e,{value:c,size:h=CE,level:y=AE,bgColor:_=TE,fgColor:E=SE,includeMargin:w=IE,minVersion:S=NE,boostLevel:N,title:P,marginSize:U,imageSettings:X}=s,re=j1(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:Y,cells:ye,numCells:ue,calculatedImageSettings:se}=ME({value:c,level:y,minVersion:S,boostLevel:N,includeMargin:w,marginSize:U,imageSettings:X,size:h});let fe=ye,we=null;X!=null&&se!=null&&(se.excavation!=null&&(fe=DE(ye,se.excavation)),we=Fr.createElement("image",{href:X.src,height:se.h,width:se.w,x:se.x+Y,y:se.y+Y,preserveAspectRatio:"none",opacity:se.opacity,crossOrigin:se.crossOrigin}));const Pe=RE(fe,Y);return Fr.createElement("svg",B1({height:h,width:h,viewBox:`0 0 ${ue} ${ue}`,ref:t,role:"img"},re),!!P&&Fr.createElement("title",null,P),Fr.createElement("path",{fill:_,d:`M0,0 h${ue}v${ue}H0z`,shapeRendering:"crispEdges"}),Fr.createElement("path",{fill:E,d:Pe,shapeRendering:"crispEdges"}),we)});lf.displayName="QRCodeSVG";function XN(){var xe;const i=Vs(),e=za(),t=Po(Ki),s=e.currentUser,[c,h]=ie.useState(null),[y,_]=ie.useState([]),[E,w]=ie.useState(!1),[S,N]=ie.useState(null),[P,U]=ie.useState(!1),[X,re]=ie.useState(""),[Y,ye]=ie.useState(""),[ue,se]=ie.useState(""),[fe,we]=ie.useState(""),[Pe,z]=ie.useState(!1),[j,L]=ie.useState(!1),[F,J]=ie.useState(null),[ee,W]=ie.useState(""),[ve,te]=ie.useState(""),[Ae,Te]=ie.useState(""),[Xe,ht]=ie.useState(""),[Q,ge]=ie.useState(""),[Re,Fe]=ie.useState([]),[Se,$]=ie.useState([]),[Ve,dt]=ie.useState(""),[st,vt]=ie.useState(!1),[mt,xt]=ie.useState(!1),[Ft,ft]=ie.useState(!1),[qe,le]=ie.useState([]),[Ne,pe]=ie.useState(""),[De,Be]=ie.useState(""),[Ye,Ue]=ie.useState(null),[Mt,ot]=ie.useState(!1),[We,Et]=ie.useState(null),[et,at]=ie.useState(!1),[It,sn]=ie.useState(null),[Nn,Qn]=ie.useState(!1),[sr,Jt]=ie.useState(1),[He,xn]=ie.useState(""),[Ut,Xt]=ie.useState("all"),[zn,Or]=ie.useState([]),[Gr,zt]=ie.useState(""),[Kn,qr]=ie.useState("asc");ie.useEffect(()=>{if(s){const V=Zt(t,"users",s.uid);zr(V).then(ae=>{ae.exists()&&h(ae.data())}).catch(ae=>{console.error("Error fetching user profile:",ae)})}},[s,t]),ie.useEffect(()=>{if(s){const V=Iu(li(t,"classroom"),Nu("owner","==",s.uid));Jr(V).then(ae=>{const je=[];ae.forEach(tt=>{je.push({id:tt.id,...tt.data()})}),_(je)}).catch(ae=>{console.error("Error fetching classrooms:",ae)})}},[s,t]),ie.useEffect(()=>{F&&(async()=>{try{const ae=li(t,"classroom",F.id,"students"),je=await Jr(ae),tt=[];je.forEach(he=>{tt.push({id:he.id,checked:!1,...he.data()})}),Fe(tt)}catch(ae){console.error("Error fetching students for inline edit:",ae)}})()},[F,t]),ie.useEffect(()=>{(async()=>{try{const ae=li(t,"users"),je=Iu(ae,Nu("classroom.status","==",2)),tt=await Jr(je),he=[];tt.forEach(ut=>{he.push({id:ut.id,...ut.data()})}),$(he)}catch(ae){console.error("Error fetching available users:",ae)}})()},[t]),ie.useEffect(()=>{F&&(async()=>{try{const ae=li(t,"classroom",F.id,"checkin"),je=await Jr(ae),tt=[];je.forEach(he=>{tt.push({id:he.id,...he.data()})}),le(tt)}catch(ae){console.error("Error fetching check-in records:",ae)}})()},[F,t]),ie.useEffect(()=>{(async()=>{if(!(!F||!Ye))try{const ae=li(t,"classroom",F.id,"checkin",Ye.id,"students"),tt=(await Jr(ae)).docs.map(ut=>ut.id),he=Re.map(ut=>tt.includes(ut.id)?{...ut,checked:!0}:{...ut,checked:!1});Fe(he)}catch(ae){console.error("Error loading checked status:",ae)}})()},[F,Ye,t,Re]);const pr=async()=>{if(Ve){if(Re.some(V=>V.id===Ve)){alert("This student is already added.");return}try{const V=Se.find(je=>je.id===Ve);if(!V)return;const ae=Zt(t,"classroom",F.id,"students",V.id);await Bi(ae,{stdid:V.id,name:V.name,status:1}),Fe([...Re,{id:V.id,stdid:V.id,name:V.name,status:1}]),alert("Student added successfully."),dt("")}catch(V){console.error("Error adding student inline:",V),alert("Failed to add student.")}}},Ln=async()=>{try{await Dw(e),i("/")}catch(V){console.error("Error signing out:",V)}},Tr=V=>{N(ae=>ae===V?null:V)},Hn=async V=>{if(window.confirm("Are you sure you want to delete this classroom?"))try{await du(Zt(t,"classroom",V)),_(ae=>ae.filter(je=>je.id!==V))}catch(ae){console.error("Error deleting classroom:",ae)}},yr=async V=>{V.preventDefault(),z(!0);try{const ae=EE(),je=Zt(t,"classroom",ae);await Bi(je,{owner:s.uid,info:{code:X,name:Y,photo:fe||"",room:ue}}),_(tt=>[...tt,{id:ae,owner:s.uid,info:{code:X,name:Y,photo:fe,room:ue}}]),re(""),ye(""),se(""),we(""),U(!1),j&&L(!1),alert("Classroom created successfully!")}catch(ae){console.error("Error creating classroom:",ae),alert("Error creating classroom.")}z(!1)},bi=V=>{L(!0),J(V),W(V.info.code),te(V.info.name),Te(V.info.photo),ht(V.info.room),ge(""),N(null),vt(!1),Fe([]),dt("")},an=async V=>{V.preventDefault(),z(!0),ge("");try{const ae=Zt(t,"classroom",F.id);await sl(ae,{"info.code":ee,"info.name":ve,"info.photo":Ae,"info.room":Xe}),_(je=>je.map(tt=>tt.id===F.id?{...tt,info:{code:ee,name:ve,photo:Ae,room:Xe}}:tt)),ge("Classroom updated successfully.")}catch(ae){console.error("Error updating classroom:",ae),ge("Failed to update classroom.")}z(!1)},Fs=async()=>{if(!Ne||!De){alert("Please provide check-in code and date/time.");return}try{const ae={id:(await IN(li(t,"classroom",F.id,"checkin"),{code:Ne,date:De,status:sr})).id,code:Ne,date:De,status:sr};Ue(ae),le(je=>[...je,ae]),pe(""),Be(""),Qn(!0)}catch(V){console.error("Error creating check-in record:",V),alert("Failed to create check-in record.")}},hr=async V=>{try{const ae=Re.find(tt=>tt.id===V);if(!ae)return;const je=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await Bi(Zt(t,"classroom",F.id,"checkin",Ye.id,"students",V),{stdid:ae.stdid,name:ae.name,remark:"",date:je}),await Bi(Zt(t,"classroom",F.id,"checkin",Ye.id,"scores",ae.stdid),{uid:V,stdid:ae.stdid,name:ae.name,remark:"",dates:je,score:1,status:1}),Fe(tt=>tt.map(he=>he.id===V?{...he,checked:!0}:he))}catch(ae){console.error("Error storing student check-in:",ae),alert("Failed to check in student.")}},xr=async V=>{Et(V),ot(!0);try{const ae=li(t,"classroom",F.id,"checkin",V.id,"students"),tt=(await Jr(ae)).docs.map(he=>he.id);Fe(he=>he.map(ut=>tt.includes(ut.id)?{...ut,checked:!0}:{...ut,checked:!1}))}catch(ae){console.error("Error viewing check-in details:",ae)}},tr=async()=>{if(!(!F||!We)&&window.confirm("Are you sure you want to delete this check-in record?"))try{await du(Zt(t,"classroom",F.id,"checkin",We.id)),le(V=>V.filter(ae=>ae.id!==We.id)),alert("Check-in record deleted successfully."),ot(!1)}catch(V){console.error("Error deleting check-in record:",V),alert("Failed to delete check-in record.")}},ci=V=>{i(`/create-quiz/${F.id}?checkinId=${V.id}`)},Zn=async V=>{try{const ae=Re.find(je=>je.id===V);if(!ae)return;await du(Zt(t,"classroom",F.id,"checkin",Ye.id,"students",V)),await du(Zt(t,"classroom",F.id,"checkin",Ye.id,"scores",ae.stdid)),Fe(je=>je.map(tt=>tt.id===V?{...tt,checked:!1}:tt))}catch(ae){console.error("Error undoing student check-in:",ae),alert("Failed to undo check-in for student.")}},lt=V=>{sn(V),at(!0),N(null)},Cn=async V=>{try{const ae=Re.find(he=>he.id===V);if(!ae)return;const je=ae.status===0?1:0,tt=Zt(t,"classroom",F.id,"students",V);await sl(tt,{status:je}),Fe(he=>he.map(ut=>ut.id===V?{...ut,status:je}:ut))}catch(ae){console.error("Error toggling student verification:",ae),alert("เกิดข้อผิดพลาดในการอัปเดตสถานะนักเรียน")}},jn=()=>{!Ye||!F||Qn(!0)},Mn=async V=>{try{let ae;V.status===1?ae=0:V.status===0?ae=2:ae=1;const je=Zt(t,"classroom",F.id,"checkin",V.id);await sl(je,{status:ae}),le(he=>he.map(ut=>ut.id===V.id?{...ut,status:ae}:ut)),Ye&&Ye.id===V.id&&Ue({...Ye,status:ae}),alert(`การเช็คชื่อได้ถูก${ae===1?"เปิดใช้งาน":ae===0?"ปิดใช้งาน":"เสร็จสิ้น"}แล้ว`)}catch(ae){console.error("Error toggling check-in status:",ae),alert("เกิดข้อผิดพลาดในการเปลี่ยนสถานะการเช็คชื่อ")}},Sr=V=>{Or(ae=>ae.includes(V)?ae.filter(je=>je!==V):[...ae,V])},ri=()=>{zn.length===K.length?Or([]):Or(K.map(V=>V.id))},Ir=async()=>{try{const V=t.batch();zn.forEach(ae=>{const je=Zt(t,"classroom",F.id,"students",ae);V.update(je,{status:1})}),await V.commit(),Fe(ae=>ae.map(je=>zn.includes(je.id)?{...je,status:1}:je)),Or([])}catch(V){console.error("Error verifying students:",V),alert("Failed to verify students.")}},kr=async()=>{try{const V=t.batch();zn.forEach(ae=>{const je=Zt(t,"classroom",F.id,"students",ae);V.update(je,{status:0})}),await V.commit(),Fe(ae=>ae.map(je=>zn.includes(je.id)?{...je,status:0}:je)),Or([])}catch(V){console.error("Error unverifying students:",V),alert("Failed to unverify students.")}},Yr=V=>{const ae=Gr===V&&Kn==="asc"?"desc":"asc";zt(V),qr(ae)},K=(()=>{let V=Re;return He&&(V=V.filter(ae=>ae.name.toLowerCase().includes(He.toLowerCase())||ae.stdid.toLowerCase().includes(He.toLowerCase()))),Ut!=="all"&&(V=V.filter(ae=>Ut==="verified"?ae.status===1:ae.status===0)),Gr&&(V=V.sort((ae,je)=>ae[Gr]<je[Gr]?Kn==="asc"?-1:1:ae[Gr]>je[Gr]?Kn==="asc"?1:-1:0)),V})();return C.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[C.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-4xl --font-InterEN mb-8",children:"Classroom Management System"}),C.jsxs("ul",{className:"space-y-4",children:[C.jsx("li",{children:C.jsx("button",{onClick:()=>{L(!1),U(!1),J(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"ห้องเรียนของฉัน"})}),C.jsx("li",{children:C.jsx("button",{onClick:()=>{L(!0),U(!0),J(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"สร้างห้องเรียน"})})]})]}),C.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-400/30 cursor-pointer group transition-all duration-300 rounded-lg p-2 hover:bg-blue-600/30",onClick:()=>i("/edit-profile"),children:[C.jsxs("div",{className:"relative flex-shrink-0",children:[c&&c.photo?C.jsx("img",{src:c.photo,alt:"Profile",className:"w-12 h-12 rounded-full border-2 border-white shadow-md object-cover group-hover:ring-2 group-hover:ring-blue-300 transition-all"}):C.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center border-2 border-white shadow-md group-hover:bg-blue-800 transition-all",children:C.jsx("span",{className:"text-lg text-white font-medium",children:c!=null&&c.name?c.name.charAt(0).toUpperCase():((xe=s==null?void 0:s.email)==null?void 0:xe.charAt(0).toUpperCase())||"U"})}),C.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-300 rounded-full p-1 border border-white transform scale-0 group-hover:scale-100 transition-transform duration-200",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-blue-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),C.jsxs("div",{className:"ml-4 min-w-0 max-w-[160px] overflow-hidden",children:[C.jsx("p",{className:"text-white font-InterEN font-bold truncate group-hover:text-blue-200 transition-colors",title:(c==null?void 0:c.name)||(s==null?void 0:s.email)||"User",children:(c==null?void 0:c.name)||(s==null?void 0:s.email)||"User"}),s&&C.jsx("p",{className:"text-blue-200 font-InterEN text-sm truncate group-hover:text-blue-300 transition-colors",title:s.email,children:s.email})]})]})]}),C.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"แดชบอร์ด"}),C.jsx("button",{onClick:()=>w(!0),className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),C.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[C.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["ยินดีต้อนรับสู่ระบบจัดการห้องเรียน Classroom Management System, ",(c==null?void 0:c.name)||(s==null?void 0:s.email)||"User","😊"]}),C.jsx("p",{className:"text-blue-700 font-ChakraPetchTH mb-4",children:"จัดการห้องเรียนของคุณที่มหาวิทยาลัยขอนแก่น"}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:j?F?"แก้ไขห้องเรียน":"สร้างห้องเรียน":"ห้องเรียนของคุณ"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:j?F?C.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h2",{className:"text-xl font-ChakraPetchTH text-blue-900",children:st?`แก้ไขรายละเอียดห้องเรียน : ${F.info.name}`:`จัดการนักเรียน : ${F.info.name}`}),C.jsxs("div",{className:"relative",children:[C.jsx("button",{onClick:()=>xt(V=>!V),className:"p-2 focus:outline-none",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),mt&&C.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md z-10",children:[C.jsx("button",{onClick:()=>{vt(!0),xt(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"แก้ไขห้องเรียน"}),C.jsx("button",{onClick:()=>{vt(!1),xt(!1)},className:"block w-full font-ChakraPetchTH text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"จัดการนักเรียน"})]})]})]}),st?C.jsxs("form",{onSubmit:an,className:"space-y-6",children:[C.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:ee,onChange:V=>W(V.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:ve,onChange:V=>te(V.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:Ae,onChange:V=>Te(V.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),C.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:Xe,onChange:V=>ht(V.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),Q&&C.jsx("p",{className:"text-green-600 text-center",children:Q}),C.jsxs("div",{className:"flex justify-end space-x-4",children:[C.jsx("button",{type:"button",onClick:()=>{J(null),L(!1),U(!1)},className:"px-4 py-2 rounded border border-gray-300 hover:bg-gray-100 transition",children:"ยกเลิก"}),C.jsx("button",{type:"submit",disabled:Pe,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:Pe?"กำลังอัพเดท...":"บันทึก"})]})]}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"mt-4 p-6 border-2 rounded-xl border-blue-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-blue-100",children:"1️⃣ สถิติและการค้นหานักเรียน"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[C.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 flex items-center",children:[C.jsx("div",{className:"rounded-full bg-blue-500 p-3 mr-3",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm text-gray-500 font-ChakraPetchTH",children:"นักเรียนทั้งหมด"}),C.jsx("p",{className:"text-2xl font-bold text-blue-800",children:Re.length})]})]}),C.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200 flex items-center",children:[C.jsx("div",{className:"rounded-full bg-green-500 p-3 mr-3",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm text-gray-500 font-ChakraPetchTH",children:"ยืนยันแล้ว"}),C.jsx("p",{className:"text-2xl font-bold text-green-800",children:Re.filter(V=>V.status===1).length})]})]}),C.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200 flex items-center",children:[C.jsx("div",{className:"rounded-full bg-yellow-500 p-3 mr-3",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm text-gray-500 font-ChakraPetchTH",children:"รอการยืนยัน"}),C.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:Re.filter(V=>V.status===0).length})]})]})]}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[C.jsx("div",{className:"w-full md:w-2/3",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"ค้นหาตามชื่อหรือรหัสนักศึกษา...",value:He||"",onChange:V=>xn(V.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none pl-10"}),C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 absolute left-3 top-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),C.jsx("div",{className:"w-full md:w-1/3",children:C.jsxs("select",{value:Ut,onChange:V=>Xt(V.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none",children:[C.jsx("option",{value:"all",children:"ทั้งหมด"}),C.jsx("option",{value:"verified",children:"ยืนยันแล้ว"}),C.jsx("option",{value:"unverified",children:"รอการยืนยัน"})]})})]})]}),C.jsxs("div",{className:"mt-4 p-6 border-2 rounded-xl border-blue-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-blue-100",children:"2️⃣ นักเรียนที่ลงทะเบียน"}),Re.length>0?C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("input",{type:"checkbox",id:"select-all",checked:zn.length===K.length&&K.length>0,onChange:ri,className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),C.jsx("label",{htmlFor:"select-all",className:"ml-2 text-gray-700 font-ChakraPetchTH",children:"เลือกทั้งหมด"})]}),zn.length>0&&C.jsxs("div",{className:"flex space-x-2",children:[C.jsxs("button",{onClick:Ir,className:"px-3 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition font-ChakraPetchTH",children:["ยืนยันที่เลือก (",zn.length,")"]}),C.jsx("button",{onClick:kr,className:"px-3 py-2 bg-yellow-500 text-white text-sm rounded hover:bg-yellow-600 transition font-ChakraPetchTH",children:"ยกเลิกการยืนยันที่เลือก"})]})]}),C.jsxs("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:[C.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[C.jsx("thead",{className:"bg-gray-50",children:C.jsxs("tr",{children:[C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:C.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>Yr("stdid"),children:["รหัสนักศึกษา",Gr==="stdid"&&C.jsx("span",{className:"ml-1",children:Kn==="asc"?"▲":"▼"})]})}),C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:C.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>Yr("name"),children:["ชื่อ",Gr==="name"&&C.jsx("span",{className:"ml-1",children:Kn==="asc"?"▲":"▼"})]})}),C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:C.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>Yr("status"),children:["สถานะ",Gr==="status"&&C.jsx("span",{className:"ml-1",children:Kn==="asc"?"▲":"▼"})]})}),C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:"การปฏิบัติ"})]})}),C.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map((V,ae)=>C.jsxs("tr",{className:ae%2===0?"bg-white":"bg-gray-50",children:[C.jsx("td",{className:"pl-6 py-4 whitespace-nowrap",children:C.jsx("input",{type:"checkbox",checked:zn.includes(V.id),onChange:()=>Sr(V.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"})}),C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:V.stdid}),C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:V.name}),C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:C.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${V.status===1?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:V.status===1?"ยืนยันแล้ว":"รอการยืนยัน"})}),C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:C.jsx("button",{onClick:()=>Cn(V.id),className:`px-3 py-1 rounded ${V.status===1?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:V.status===1?"ยกเลิกการยืนยัน":"ยืนยันนักเรียน"})})]},V.id))})]}),K.length===0&&C.jsx("div",{className:"text-center py-8 text-gray-500 font-ChakraPetchTH",children:"ไม่พบนักเรียนที่ตรงตามเงื่อนไขการค้นหา"})]})]}):C.jsx("p",{className:"text-center text-gray-700 py-4",children:"ยังไม่มีนักเรียนในห้องเรียนนี้"})]}),C.jsxs("div",{className:"mt-4 p-6 border-2 rounded-xl border-blue-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-blue-100",children:"1️⃣ นักเรียนที่ลงทะเบียน"}),Re.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"สถานะ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"การปฏิบัติ"})]})}),C.jsx("tbody",{children:Re.map(V=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:V.stdid}),C.jsx("td",{className:"border p-2",children:V.name}),C.jsx("td",{className:"border p-2",children:V.status===0?"ยังไม่ตรวจสอบ":"ตรวจสอบแล้ว"}),C.jsx("td",{className:"border p-2",children:C.jsx("button",{onClick:()=>Cn(V.id),className:`px-3 py-1 rounded ${V.status===1?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:V.status===1?"ยกเลิกการยืนยัน":"ยืนยันนักเรียน"})})]},V.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนในห้องเรียนนี้"})]}),C.jsxs("div",{className:"mt-6 p-6 border-2 rounded-xl border-green-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-green-100",children:"3️⃣ เพิ่มนักเรียน"}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[C.jsx("div",{className:"w-full md:w-3/4",children:C.jsxs("select",{value:Ve,onChange:V=>dt(V.target.value),className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",children:[C.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),Se.map(V=>C.jsxs("option",{value:V.id,children:[V.name," (",V.email,")"]},V.id))]})}),C.jsx("div",{className:"w-full md:w-1/4",children:C.jsxs("button",{type:"button",onClick:pr,className:"w-full bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH flex items-center justify-center",disabled:!Ve,children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"เพิ่มนักเรียน"]})})]})]}),C.jsxs("div",{className:"mt-6 p-6 border-2 rounded-xl border-indigo-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-indigo-100",children:"3️⃣ จัดการการเช็คชื่อ"}),C.jsx("div",{className:"mb-4",children:C.jsx("button",{type:"button",onClick:()=>ft(V=>!V),className:"w-full font-ChakraPetchTH bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:Ye?"แสดงตารางเช็คชื่อ":"สร้างการเช็คชื่อ"})}),Ft&&!Ye&&C.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:C.jsxs("div",{className:"space-y-4",children:[C.jsx("input",{type:"text",placeholder:"รหัสเช็คชื่อ (e.g., ABC123456)",value:Ne,onChange:V=>pe(V.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),C.jsx("input",{type:"datetime-local",value:De,onChange:V=>Be(V.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),C.jsxs("select",{value:sr,onChange:V=>Jt(parseInt(V.target.value)),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition",children:[C.jsx("option",{value:1,children:"เปิดใช้งาน"}),C.jsx("option",{value:0,children:"ปิดใช้งาน"})]}),C.jsx("button",{type:"button",onClick:Fs,className:"w-full bg-blue-600 text-white font-ChakraPetchTH px-4 py-2 rounded hover:bg-blue-700 transition",children:"สร้างการเช็คชื่อ"})]})}),Ft&&Ye&&C.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["Check-in Table (Code: ",Ye.code,", Time: ",Ye.date,")"]}),Re.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left",children:"ลำดับ"}),C.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),C.jsx("th",{className:"border p-2 text-left",children:"สถานะ"}),C.jsx("th",{className:"border p-2 text-left",children:"การปฏิบัติ"})]})}),C.jsx("tbody",{children:Re.map((V,ae)=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:ae+1}),C.jsx("td",{className:"border p-2",children:V.stdid}),C.jsx("td",{className:"border p-2",children:V.name}),C.jsx("td",{className:"border p-2",children:V.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็ค"}),C.jsx("td",{className:"border p-2",children:C.jsx("button",{type:"button",onClick:()=>{V.checked?Zn(V.id):hr(V.id)},className:`px-3 py-1 rounded ${V.checked?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:V.checked?"ยกเลิกเช็คชื่อ":"เช็คชื่อ"})})]},V.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีนักเรียนในห้องเรียนนี้"}),C.jsx("div",{className:"flex space-x-4 mt-4",children:C.jsx("button",{type:"button",onClick:jn,className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"แสดง QR Code เช็คชื่อ"})})]})}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h4",{className:"text-lg font-ChakraPetchTH mb-3 text-blue-800",children:"บันทึกการเช็คชื่อ"}),qe.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสเช็คชื่อ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"วัน/เวลา"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รายละเอียด"})]})}),C.jsx("tbody",{children:qe.map((V,ae)=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:ae+1}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:V.code}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:V.date}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:V.status===0?C.jsx("span",{className:"text-red-600",children:"ปิดใช้งาน"}):V.status===1?C.jsx("span",{className:"text-green-600",children:"กำลังใช้งาน"}):C.jsx("span",{className:"text-gray-500",children:"เสร็จสิ้น"})}),C.jsxs("td",{className:"border p-2",children:[C.jsx("button",{type:"button",onClick:()=>xr(V),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition mr-2",children:"รายละเอียด"}),C.jsx("button",{type:"button",onClick:()=>Mn(V),className:`font-ChakraPetchTH text-white px-3 py-1 rounded transition mr-2 ${V.status===1?"bg-red-600 hover:bg-red-700":V.status===0?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:V.status===1?"ปิดใช้งาน":V.status===0?"ตั้งเป็นเสร็จสิ้น":"เปิดใช้งานใหม่"}),C.jsx("button",{type:"button",onClick:()=>ci(V),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition",children:"ควิซ"})]})]},V.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีบันทึกการเช็คชื่อในห้องเรียนนี้"})]})]})]})]}):P?C.jsx("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:C.jsxs("form",{onSubmit:yr,className:"space-y-6",children:[C.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:X,onChange:V=>re(V.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:Y,onChange:V=>ye(V.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:ue,onChange:V=>se(V.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:fe,onChange:V=>we(V.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),C.jsxs("div",{className:"flex justify-end space-x-4",children:[C.jsx("button",{type:"button",onClick:()=>{U(!1),L(!1)},className:"px-6 py-3 rounded border border-gray-300 hover:bg-gray-100 transition",children:"Cancel"}),C.jsx("button",{type:"submit",disabled:Pe,className:"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 transition shadow-md",children:Pe?"Creating...":"Create"})]})]})}):C.jsxs("div",{onClick:()=>U(!0),className:"col-span-1 md:col-span-2 relative flex flex-col items-center justify-center border-4 border-dashed border-blue-400 rounded-xl h-60 cursor-pointer hover:bg-blue-100 transition duration-300",children:[C.jsx("span",{className:"text-6xl text-blue-500",children:"+"}),C.jsx("span",{className:"mt-4 text-2xl text-blue-700 font-bold",children:"Create New Classroom"})]}):C.jsx(C.Fragment,{children:y.map(V=>C.jsxs("div",{className:"relative flex flex-col items-center border border-gray-200 rounded-lg shadow-md bg-white transition transform hover:-translate-y-1 hover:shadow-xl duration-300",children:[C.jsx("button",{onClick:()=>Tr(V.id),className:"absolute top-2 right-2 bg-white border border-gray-300 rounded-full p-2 transition duration-200 active:scale-95 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),S===V.id&&C.jsxs("div",{className:"absolute top-10 right-2 w-36 bg-white shadow-lg rounded py-1 z-20",children:[C.jsx("button",{onClick:()=>bi(V),className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"จัดการนักเรียน"}),C.jsx("button",{onClick:()=>lt(V),className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"สร้าง QR Code"}),C.jsx("button",{onClick:()=>{Hn(V.id),N(null)},className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"ลบห้องเรียน"})]}),V.info.photo?C.jsx("img",{src:V.info.photo,alt:V.info.name,className:"w-full h-48 object-cover rounded-t-lg border-b border-gray-200"}):C.jsx("div",{className:"w-full h-48 bg-blue-300 flex items-center justify-center rounded-t-lg border-b border-gray-200",children:C.jsx("span",{className:"text-lg text-white",children:"No Image"})}),C.jsxs("div",{className:"p-4 text-center",children:[C.jsx("p",{className:"font-semibold font-InterEN text-blue-900 text-xl mb-1",children:V.info.name}),C.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Code : ",V.info.code]}),C.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Room : ",V.info.room]})]})]},V.id))})})]})]})]}),Mt&&We&&C.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-10 z-50",children:C.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50 w-11/12 md:w-1/2",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"รายละเอียดการเช็คชื่อ"}),C.jsxs("div",{className:"flex flex-col items-center mb-6",children:[C.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:C.jsx(lf,{id:"detail-checkin-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/student-checkin/${F.id}/${We.id}`,size:150,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),C.jsx("div",{className:"mt-2 mb-2 text-center",children:C.jsxs("p",{className:`font-ChakraPetchTH mt-2 ${We.status===1?"text-green-600":We.status===0?"text-red-600":"text-gray-600"}`,children:["สถานะ: ",We.status===1?"เปิดใช้งาน":We.status===0?"ปิดใช้งาน":"เสร็จสิ้น"]})})]}),C.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["รหัสเช็คชื่อ: ",We.code]}),C.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["วัน/เวลา: ",We.date]}),C.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH",children:["จำนวนนักเรียนที่เช็คชื่อ : ",Re.filter(V=>V.checked).length," / ",Re.length]}),C.jsx("div",{className:"mt-4 overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ชื่อ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"})]})}),C.jsx("tbody",{children:Re.map((V,ae)=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:ae+1}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:V.stdid}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:V.name}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:V.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็คชื่อ"})]},V.id))})]})}),C.jsxs("div",{className:"flex justify-between mt-4",children:[C.jsx("button",{type:"button",onClick:()=>{const V=document.getElementById("detail-checkin-qr-code"),ae=document.createElement("canvas"),je=ae.getContext("2d"),tt=new XMLSerializer().serializeToString(V),he=new Image;he.onload=()=>{ae.width=he.width,ae.height=he.height,je.drawImage(he,0,0);const ut=document.createElement("a");ut.download=`checkin-${We.code}.png`,ut.href=ae.toDataURL("image/png"),ut.click()},he.src=`data:image/svg+xml;base64,${btoa(tt)}`},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 shadow-xs transition font-ChakraPetchTH",children:"ดาวน์โหลด QR"}),C.jsxs("div",{className:"flex space-x-4",children:[C.jsx("button",{type:"button",onClick:tr,className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 shadow-xs transition",children:"ลบบันทึกการเช็คชื่อ"}),C.jsx("button",{type:"button",onClick:()=>ot(!1),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 shadow-xs transition",children:"ปิด"})]})]})]})}),E&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),C.jsx("div",{className:"mt-2",children:C.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),C.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[C.jsx("button",{type:"button",onClick:()=>{w(!1),Ln()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),C.jsx("button",{type:"button",onClick:()=>w(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]}),et&&It&&C.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-50 z-50",children:C.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-xl w-11/12 md:w-96 relative",children:[C.jsx("button",{onClick:()=>at(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),C.jsx("h3",{className:"text-xl font-ChakraPetchTH text-center mb-4 text-blue-900",children:"QR Code ลงทะเบียนห้องเรียน"}),C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:C.jsx(lf,{id:"classroom-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/register-classroom/${It.id}`,size:200,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),C.jsxs("div",{className:"mt-4 text-center",children:[C.jsx("p",{className:"font-ChakraPetchTH text-lg font-bold text-blue-900",children:It.info.name}),C.jsxs("p",{className:"font-InterEN text-gray-600",children:["Code: ",It.info.code]}),C.jsxs("p",{className:"font-InterEN text-gray-600",children:["Room: ",It.info.room]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("button",{onClick:()=>at(!1),className:"bg-blue-600 text-white px-6 py-2 m-2 rounded-lg hover:bg-blue-700 transition font-ChakraPetchTH",children:"ปิด"}),C.jsx("button",{onClick:()=>{const V=document.getElementById("classroom-qr-code"),ae=document.createElement("canvas"),je=ae.getContext("2d"),tt=new XMLSerializer().serializeToString(V),he=new Image;he.onload=()=>{ae.width=he.width,ae.height=he.height,je.drawImage(he,0,0);const ut=document.createElement("a");ut.download=`classroom-${It.info.code}.png`,ut.href=ae.toDataURL("image/png"),ut.click()},he.src=`data:image/svg+xml;base64,${btoa(tt)}`},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH mr-2",children:"ดาวน์โหลด QR"})]})]})]})}),Nn&&Ye&&F&&C.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-50 z-50",children:C.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-xl w-11/12 md:w-96 relative",children:[C.jsx("button",{onClick:()=>Qn(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),C.jsx("h3",{className:"text-xl font-ChakraPetchTH text-center mb-4 text-blue-900",children:"QR Code เช็คชื่อเข้าเรียน"}),C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:C.jsx(lf,{id:"checkin-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/student-checkin/${F.id}/${Ye.id}`,size:200,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),C.jsxs("div",{className:"mt-4 text-center",children:[C.jsx("p",{className:"font-ChakraPetchTH text-lg font-bold text-blue-900",children:F.info.name}),C.jsxs("p",{className:"font-InterEN text-gray-600",children:["รหัสเช็คชื่อ: ",Ye.code]}),C.jsxs("p",{className:"font-InterEN text-gray-600",children:["เวลา: ",Ye.date]}),C.jsxs("p",{className:`font-ChakraPetchTH mt-2 ${Ye.status===1?"text-green-600":Ye.status===0?"text-red-600":"text-gray-600"}`,children:["สถานะ: ",Ye.status===1?"เปิดใช้งาน":Ye.status===0?"ปิดใช้งาน":"เสร็จสิ้น"]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("button",{onClick:()=>Qn(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition font-ChakraPetchTH mr-2",children:"ปิด"}),C.jsx("button",{onClick:()=>{const V=document.getElementById("checkin-qr-code"),ae=document.createElement("canvas"),je=ae.getContext("2d"),tt=new XMLSerializer().serializeToString(V),he=new Image;he.onload=()=>{ae.width=he.width,ae.height=he.height,je.drawImage(he,0,0);const ut=document.createElement("a");ut.download=`checkin-${Ye.code}.png`,ut.href=ae.toDataURL("image/png"),ut.click()},he.src=`data:image/svg+xml;base64,${btoa(tt)}`},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH",children:"ดาวน์โหลด QR"})]})]})]})})]})}function WN(){const i=za(Ki),e=Po(Ki),t=Vs(),[s,c]=ie.useState(!0),[h,y]=ie.useState(null),[_,E]=ie.useState(""),[w,S]=ie.useState(""),[N,P]=ie.useState(""),[U,X]=ie.useState(!1),[re,Y]=ie.useState(!1),[ye,ue]=ie.useState(""),[se,fe]=ie.useState(!1);ie.useEffect(()=>{const F=Uf(i,J=>{y(J),c(!1),!J&&!s&&t("/")});return()=>F()},[i,t,s]),ie.useEffect(()=>{if(s||!h)return;(async()=>{try{const J=Zt(e,"users",h.uid),ee=await zr(J);if(ee.exists()){const W=ee.data();E(W.name||""),S(W.photo||""),P(W.photo||""),fe(!1)}}catch(J){console.error("Error loading profile:",J)}})()},[h,e,s]);const we=F=>{const J=F.target.value;S(J),X(!1),J.trim()?P(J):P("")},Pe=()=>{X(!0)},z=async F=>{if(F.preventDefault(),!!h){Y(!0),ue("");try{await iS(h,{displayName:_,photoURL:w});const J=Zt(e,"users",h.uid);await Bi(J,{name:_,photo:w,email:h.email,classroom:{status:1}},{merge:!0}),ue("อัปเดตโปรไฟล์สำเร็จแล้ว"),fe(!1)}catch(J){console.error("Error updating profile:",J),ue("เกิดข้อผิดพลาดในการอัปเดตโปรไฟล์")}Y(!1)}},j=()=>_?_.split(" ").map(F=>F[0]).join("").toUpperCase().substring(0,2):h!=null&&h.email?h.email[0].toUpperCase():"N/A",L=()=>{if(!(h!=null&&h.uid))return"bg-blue-600";const F=["bg-red-600","bg-blue-600","bg-green-600","bg-yellow-600","bg-purple-600","bg-pink-600","bg-indigo-600","bg-teal-600"],J=h.uid.split("").reduce((ee,W)=>ee+W.charCodeAt(0),0)%F.length;return F[J]};return s?C.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:C.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-md",children:[C.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-4"}),C.jsx("p",{className:"text-blue-800",children:"กำลังตรวจสอบการเข้าสู่ระบบ..."})]})}):h?C.jsxs("div",{className:"relative min-h-screen bg-gray-100 p-8",children:[C.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"absolute top-4 left-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:"ไปที่แดชบอร์ด"}),C.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded-lg shadow-lg",children:[C.jsx("h1",{className:"text-2xl font-bold mb-4",children:"แก้ไขโปรไฟล์"}),C.jsx("div",{className:"flex justify-center mb-6",children:C.jsxs("div",{className:"relative w-32 h-32",children:[N&&!U?C.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden flex items-center justify-center border-2 border-gray-200",children:C.jsx("img",{src:N,alt:"Profile",className:"object-cover w-full h-full",onError:Pe})}):C.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center text-white text-2xl ${L()}`,children:j()}),se&&C.jsx("div",{className:"absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}),se?C.jsxs("form",{onSubmit:z,children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),C.jsx("input",{type:"email",value:h.email||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-200 cursor-not-allowed"})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),C.jsx("input",{type:"text",value:_,onChange:F=>E(F.target.value),placeholder:"กรอกชื่อของคุณ",className:"w-full px-3 py-2 border rounded-lg",required:!0})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),C.jsx("input",{type:"text",value:w,onChange:we,placeholder:"กรอก URL รูปโปรไฟล์",className:"w-full px-3 py-2 border rounded-lg"}),U&&w&&C.jsx("p",{className:"mt-1 text-sm text-red-500",children:"ไม่สามารถโหลดรูปภาพได้ กรุณาตรวจสอบ URL"}),C.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"* ใส่ URL รูปภาพจากอินเทอร์เน็ต เช่น https://example.com/image.jpg"})]}),ye&&C.jsx("div",{className:"mb-4 text-green-500",children:ye}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("button",{type:"submit",disabled:re,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:re?"กำลังบันทึก...":"บันทึกการเปลี่ยนแปลง"}),C.jsx("button",{type:"button",onClick:()=>{fe(!1),ue(""),P(w),X(!1)},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-300",children:"ยกเลิก"})]})]}):C.jsxs("div",{children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),C.jsx("p",{className:"px-3 py-2 border rounded-lg bg-gray-200",children:h.email})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),C.jsx("p",{className:"px-3 py-2 border rounded-lg",children:_||"ไม่ได้ระบุ"})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),C.jsx("p",{className:"px-3 py-2 border rounded-lg",children:w})]}),C.jsx("button",{type:"button",onClick:()=>{fe(!0),ue("")},className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition duration-300",children:"แก้ไขโปรไฟล์"})]})]})]}):C.jsx("div",{className:"min-h-screen flex items-center justify-center",children:C.jsx("p",{children:"ผู้ใช้ยังไม่ได้เข้าสู่ระบบ."})})}function QN(){const{cid:i}=H1(),e=Vs(),t=za(),s=Po(Ki),c=t.currentUser,[h,y]=ie.useState(null),[_,E]=ie.useState(""),[w,S]=ie.useState(""),[N,P]=ie.useState(""),[U,X]=ie.useState(""),[re,Y]=ie.useState([]),[ye,ue]=ie.useState([]),[se,fe]=ie.useState(!1),[we,Pe]=ie.useState(""),[z,j]=ie.useState(""),[L,F]=ie.useState([]),[J,ee]=ie.useState("");ie.useEffect(()=>{if(i){const ve=Zt(s,"classroom",i);zr(ve).then(Te=>{if(Te.exists()){const Xe=Te.data();if(Xe.owner!==c.uid){Pe("สิทธิ์ไม่พอ คุณไม่ใช่เจ้าของห้องเรียนนี้.");return}y(Xe),E(Xe.info.code),S(Xe.info.name),P(Xe.info.photo),X(Xe.info.room)}else Pe("ไม่พบห้องเรียน.")}).catch(Te=>{console.error(Te),Pe("เกิดข้อผิดพลาดในการดึงข้อมูลห้องเรียน.")});const te=li(s,"classroom",i,"students");Jr(te).then(Te=>{const Xe=[];Te.forEach(ht=>{Xe.push({id:ht.id,...ht.data()})}),Y(Xe)}).catch(Te=>console.error("เกิดข้อผิดพลาดในการดึงนักเรียน: ",Te));const Ae=li(s,"classroom",i,"checkin");Jr(Ae).then(Te=>{const Xe=[];Te.forEach(ht=>{Xe.push({id:ht.id,...ht.data()})}),ue(Xe)}).catch(Te=>console.error("เกิดข้อผิดพลาดในการดึงกิจกรรมเช็คอิน: ",Te))}},[i,c.uid,s]),ie.useEffect(()=>{(async()=>{try{const te=li(s,"users"),Ae=Iu(te,Nu("classroom.status","==",2)),Te=await Jr(Ae),Xe=[];Te.forEach(ht=>{Xe.push({id:ht.id,...ht.data()})}),F(Xe)}catch(te){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลผู้ใช้: ",te)}})()},[s]);const W=async ve=>{ve.preventDefault(),fe(!0),j("");try{const te=Zt(s,"classroom",i);await sl(te,{"info.code":_,"info.name":w,"info.photo":N,"info.room":U}),j("แก้ไขห้องเรียนสำเร็จแล้ว.")}catch(te){console.error("เกิดข้อผิดพลาดในการแก้ไขห้องเรียน: ",te),j("แก้ไขห้องเรียนไม่สำเร็จ.")}fe(!1)};return we?C.jsx("div",{className:"p-6 text-red-600 text-center",children:we}):h?C.jsxs("div",{className:"min-h-screen bg-blue-50 p-6",children:[C.jsxs("div",{className:"flex items-center justify-between mb-8",children:[C.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน: ",h.info.name]}),C.jsx("button",{onClick:()=>e("/dashboard"),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition",children:"กลับไปที่แดชบอร์ด"})]}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"นักเรียนที่ลงทะเบียน"}),re.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),C.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),C.jsx("tbody",{children:re.map(ve=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:ve.stdid}),C.jsx("td",{className:"border p-2",children:ve.name}),C.jsx("td",{className:"border p-2",children:ve.status===0?"รออนุมัติ":"ตรวจสอบแล้ว"})]},ve.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนที่ลงทะเบียน"})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"เพิ่มนักเรียน"}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"เลือกนักเรียน"}),C.jsxs("select",{value:J,onChange:ve=>ee(ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:[C.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),L.map(ve=>C.jsxs("option",{value:ve.id,children:[ve.name," (",ve.email,")"]},ve.id))]})]}),C.jsx("button",{onClick:async()=>{if(!J)return;const ve=L.find(te=>te.id===J);if(ve)try{const te=Zt(s,"classroom",i,"students",ve.id);await Bi(te,{stdid:ve.id,name:ve.name,status:1}),Y([...re,{id:ve.id,stdid:ve.id,name:ve.name,status:1}]),j("เพิ่มนักเรียนสำเร็จแล้ว."),ee("")}catch(te){console.error("เกิดข้อผิดพลาดในการเพิ่มนักเรียน: ",te),j("เพิ่มนักเรียนไม่สำเร็จ.")}},className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"เพิ่มนักเรียน"})]}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"กิจกรรมเช็คอิน"}),ye.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left",children:"หมายเลขเช็คอิน"}),C.jsx("th",{className:"border p-2 text-left",children:"รหัส"}),C.jsx("th",{className:"border p-2 text-left",children:"วันที่"}),C.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),C.jsx("tbody",{children:ye.map(ve=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:ve.id}),C.jsx("td",{className:"border p-2",children:ve.code}),C.jsx("td",{className:"border p-2",children:ve.date}),C.jsx("td",{className:"border p-2",children:ve.status===0?"ยังไม่เริ่ม":ve.status===1?"กำลังดำเนินการ":"เสร็จสิ้น"})]},ve.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีกิจกรรมเช็คอิน"})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[C.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"แก้ไขรายละเอียดห้องเรียน"}),C.jsxs("form",{onSubmit:W,children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"รหัสวิชา"}),C.jsx("input",{type:"text",value:_,onChange:ve=>E(ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อวิชา"}),C.jsx("input",{type:"text",value:w,onChange:ve=>S(ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"URL รูปภาพ"}),C.jsx("input",{type:"text",value:N,onChange:ve=>P(ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อห้องเรียน"}),C.jsx("input",{type:"text",value:U,onChange:ve=>X(ve.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),C.jsx("button",{type:"submit",disabled:se,className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:se?"กำลังแก้ไข...":"บันทึกการแก้ไข"}),z&&C.jsx("p",{className:"mt-4 text-green-600 text-center",children:z})]})]})]}):C.jsx("div",{className:"p-6 text-center",children:"กำลังโหลดข้อมูลห้องเรียน..."})}var pt;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(pt||(pt={}));var bx=new Map([[pt.QR_CODE,"QR_CODE"],[pt.AZTEC,"AZTEC"],[pt.CODABAR,"CODABAR"],[pt.CODE_39,"CODE_39"],[pt.CODE_93,"CODE_93"],[pt.CODE_128,"CODE_128"],[pt.DATA_MATRIX,"DATA_MATRIX"],[pt.MAXICODE,"MAXICODE"],[pt.ITF,"ITF"],[pt.EAN_13,"EAN_13"],[pt.EAN_8,"EAN_8"],[pt.PDF_417,"PDF_417"],[pt.RSS_14,"RSS_14"],[pt.RSS_EXPANDED,"RSS_EXPANDED"],[pt.UPC_A,"UPC_A"],[pt.UPC_E,"UPC_E"],[pt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ex;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(Ex||(Ex={}));function KN(i){return Object.values(pt).includes(i)}var Mo;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Mo||(Mo={}));var ks=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[Mo.SCAN_TYPE_CAMERA,Mo.SCAN_TYPE_FILE],i}(),OE=function(){function i(e,t){this.format=e,this.formatName=t}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!bx.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,bx.get(e))},i}(),vx=function(){function i(){}return i.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i}(),U1;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(U1||(U1={}));var kE=function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:U1.UNKWOWN_ERROR}},i}(),LE=function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i}();function ta(i){return typeof i>"u"||i===null}function ZN(i,e,t){return i>t?t:i<e?e:i}var Jl=function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}(),Bn=function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(e){return"Last Match: ".concat(e)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i}(),_x=function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i}(),PE=function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var s=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(c),y=Object.keys(e),_=0,E=y;_<E.length;_++){var w=E[_];if(h.has(w))return t.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},i}(),gu={exports:{}},$N=gu.exports,Cx;function JN(){return Cx||(Cx=1,function(i,e){(function(t,s){s(e)})($N,function(t){function s(O){return O==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,r){O.__proto__=r}||function(O,r){for(var o in r)r.hasOwnProperty(o)&&(O[o]=r[o])};function h(O,r){c(O,r);function o(){this.constructor=O}O.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}function y(O,r){var o=Object.setPrototypeOf;o?o(O,r):O.__proto__=r}function _(O,r){r===void 0&&(r=O.constructor);var o=Error.captureStackTrace;o&&o(O,r)}var E=function(O){h(r,O);function r(o){var l=this.constructor,f=O.call(this,o)||this;return Object.defineProperty(f,"name",{value:l.name,enumerable:!1}),y(f,l.prototype),_(f),f}return r}(Error);class w extends E{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}w.kind="Exception";class S extends w{}S.kind="ArgumentException";class N extends w{}N.kind="IllegalArgumentException";class P{constructor(r){if(this.binarizer=r,r===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,o){return this.binarizer.getBlackRow(r,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,o,l,f){const d=this.binarizer.getLuminanceSource().crop(r,o,l,f);return new P(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new P(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new P(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class U extends w{static getChecksumInstance(){return new U}}U.kind="ChecksumException";class X{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class re{static arraycopy(r,o,l,f,d){for(;d--;)l[f++]=r[o++]}static currentTimeMillis(){return Date.now()}}class Y extends w{}Y.kind="IndexOutOfBoundsException";class ye extends Y{constructor(r=void 0,o=void 0){super(o),this.index=r,this.message=o}}ye.kind="ArrayIndexOutOfBoundsException";class ue{static fill(r,o){for(let l=0,f=r.length;l<f;l++)r[l]=o}static fillWithin(r,o,l,f){ue.rangeCheck(r.length,o,l);for(let d=o;d<l;d++)r[d]=f}static rangeCheck(r,o,l){if(o>l)throw new N("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new ye(o);if(l>r)throw new ye(l)}static asList(...r){return r}static create(r,o,l){return Array.from({length:r}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(r,o,l){return Array.from({length:r}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(r,o){if(!r||!o||!r.length||!o.length||r.length!==o.length)return!1;for(let l=0,f=r.length;l<f;l++)if(r[l]!==o[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let o=1;for(const l of r)o=31*o+l;return o}static fillUint8Array(r,o){for(let l=0;l!==r.length;l++)r[l]=o}static copyOf(r,o){return r.slice(0,o)}static copyOfUint8Array(r,o){if(r.length<=o){const l=new Uint8Array(o);return l.set(r),l}return r.slice(0,o)}static copyOfRange(r,o,l){const f=l-o,d=new Int32Array(f);return re.arraycopy(r,o,d,0,f),d}static binarySearch(r,o,l){l===void 0&&(l=ue.numberComparator);let f=0,d=r.length-1;for(;f<=d;){const m=d+f>>1,p=l(o,r[m]);if(p>0)f=m+1;else if(p<0)d=m-1;else return m}return-f-1}static numberComparator(r,o){return r-o}}class se{static numberOfTrailingZeros(r){let o;if(r===0)return 32;let l=31;return o=r<<16,o!==0&&(l-=16,r=o),o=r<<8,o!==0&&(l-=8,r=o),o=r<<4,o!==0&&(l-=4,r=o),o=r<<2,o!==0&&(l-=2,r=o),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let o=1;return r>>>16||(o+=16,r<<=16),r>>>24||(o+=8,r<<=8),r>>>28||(o+=4,r<<=4),r>>>30||(o+=2,r<<=2),o-=r>>>31,o}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,o){return Math.trunc(r/o)}static parseInt(r,o=void 0){return parseInt(r,o)}}se.MIN_VALUE_32_BITS=-2147483648,se.MAX_VALUE=Number.MAX_SAFE_INTEGER;class fe{constructor(r,o){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,o==null?this.bits=fe.makeArray(r):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const o=fe.makeArray(r);re.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const o=this.size;if(r>=o)return o;const l=this.bits;let f=Math.floor(r/32),d=l[f];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=l[f]}const p=f*32+se.numberOfTrailingZeros(d);return p>o?o:p}getNextUnset(r){const o=this.size;if(r>=o)return o;const l=this.bits;let f=Math.floor(r/32),d=~l[f];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=~l[f]}const p=f*32+se.numberOfTrailingZeros(d);return p>o?o:p}setBulk(r,o){this.bits[Math.floor(r/32)]=o}setRange(r,o){if(o<r||r<0||o>this.size)throw new N;if(o===r)return;o--;const l=Math.floor(r/32),f=Math.floor(o/32),d=this.bits;for(let m=l;m<=f;m++){const p=m>l?0:r&31,T=(2<<(m<f?31:o&31))-(1<<p);d[m]|=T}}clear(){const r=this.bits.length,o=this.bits;for(let l=0;l<r;l++)o[l]=0}isRange(r,o,l){if(o<r||r<0||o>this.size)throw new N;if(o===r)return!0;o--;const f=Math.floor(r/32),d=Math.floor(o/32),m=this.bits;for(let p=f;p<=d;p++){const v=p>f?0:r&31,R=(2<<(p<d?31:o&31))-(1<<v)&4294967295;if((m[p]&R)!==(l?R:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,o){if(o<0||o>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const o=r.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new N("Sizes don't match");const o=this.bits;for(let l=0,f=o.length;l<f;l++)o[l]^=r.bits[l]}toBytes(r,o,l,f){for(let d=0;d<f;d++){let m=0;for(let p=0;p<8;p++)this.get(r)&&(m|=1<<7-p),r++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,f=this.bits;for(let d=0;d<l;d++){let m=f[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=r[0]>>>d;for(let p=1;p<l;p++){const v=r[p];m|=v<<32-d,r[p-1]=m,m=v>>>d}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof fe))return!1;const o=r;return this.size===o.size&&ue.equals(this.bits,o.bits)}hashCode(){return 31*this.size+ue.hashCode(this.bits)}toString(){let r="";for(let o=0,l=this.size;o<l;o++)o&7||(r+=" "),r+=this.get(o)?"X":".";return r}clone(){return new fe(this.size,this.bits.slice())}}var we;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(we||(we={}));var Pe=we;class z extends w{static getFormatInstance(){return new z}}z.kind="FormatException";var j;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(j||(j={}));class L{constructor(r,o,l,...f){this.valueIdentifier=r,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,L.VALUE_IDENTIFIER_TO_ECI.set(r,this),L.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,p=d.length;m!==p;m++){const v=d[m];L.VALUES_TO_ECI.set(v,this)}for(const m of f)L.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new z("incorect value");const o=L.VALUES_TO_ECI.get(r);if(o===void 0)throw new z("incorect value");return o}static getCharacterSetECIByName(r){const o=L.NAME_TO_ECI.get(r);if(o===void 0)throw new z("incorect value");return o}equals(r){if(!(r instanceof L))return!1;const o=r;return this.getName()===o.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(j.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(j.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(j.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(j.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(j.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(j.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(j.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(j.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(j.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(j.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(j.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(j.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(j.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(j.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(j.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(j.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(j.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(j.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(j.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(j.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(j.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(j.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(j.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(j.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(j.Big5,28,"Big5"),L.GB18030=new L(j.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(j.EUC_KR,30,"EUC_KR","EUC-KR");class F extends w{}F.kind="UnsupportedOperationException";class J{static decode(r,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!J.isBrowser()&&r==="ISO-8859-1"}static encode(r,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof L?r:L.getCharacterSetECIByName(r)}static decodeFallback(r,o){const l=this.encodingCharacterSet(o);if(J.isDecodeFallbackSupported(l)){let f="";for(let d=0,m=r.length;d<m;d++){let p=r[d].toString(16);p.length<2&&(p="0"+p),f+="%"+p}return decodeURIComponent(f)}if(l.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new F(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(L.UTF8)||r.equals(L.ISO8859_1)||r.equals(L.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),f=[];for(let d=0;d<l.length;d++)f.push(l[d].charCodeAt(0));return new Uint8Array(f)}}class ee{static castAsNonUtf8Char(r,o=null){const l=o?o.getName():this.ISO88591;return J.decode(new Uint8Array([r]),l)}static guessEncoding(r,o){if(o!=null&&o.get(Pe.CHARACTER_SET)!==void 0)return o.get(Pe.CHARACTER_SET).toString();const l=r.length;let f=!0,d=!0,m=!0,p=0,v=0,T=0,R=0,k=0,B=0,Z=0,oe=0,ce=0,Ce=0,Le=0;const nt=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let it=0;it<l&&(f||d||m);it++){const $e=r[it]&255;m&&(p>0?$e&128?p--:m=!1:$e&128&&($e&64?(p++,$e&32?(p++,$e&16?(p++,$e&8?m=!1:R++):T++):v++):m=!1)),f&&($e>127&&$e<160?f=!1:$e>159&&($e<192||$e===215||$e===247)&&Le++),d&&(k>0?$e<64||$e===127||$e>252?d=!1:k--:$e===128||$e===160||$e>239?d=!1:$e>160&&$e<224?(B++,oe=0,Z++,Z>ce&&(ce=Z)):$e>127?(k++,Z=0,oe++,oe>Ce&&(Ce=oe)):(Z=0,oe=0))}return m&&p>0&&(m=!1),d&&k>0&&(d=!1),m&&(nt||v+T+R>0)?ee.UTF8:d&&(ee.ASSUME_SHIFT_JIS||ce>=3||Ce>=3)?ee.SHIFT_JIS:f&&d?ce===2&&B===2||Le*10>=l?ee.SHIFT_JIS:ee.ISO88591:f?ee.ISO88591:d?ee.SHIFT_JIS:m?ee.UTF8:ee.PLATFORM_DEFAULT_ENCODING}static format(r,...o){let l=-1;function f(m,p,v,T,R,k){if(m==="%%")return"%";if(o[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let B=R?parseInt(R.substr(1)):void 0,Z;switch(k){case"s":Z=o[l];break;case"c":Z=o[l][0];break;case"f":Z=parseFloat(o[l]).toFixed(m);break;case"p":Z=parseFloat(o[l]).toPrecision(m);break;case"e":Z=parseFloat(o[l]).toExponential(m);break;case"x":Z=parseInt(o[l]).toString(B||16);break;case"d":Z=parseFloat(parseInt(o[l],B||10).toPrecision(m)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(B);let oe=parseInt(v),ce=v&&v[0]+""=="0"?"0":" ";for(;Z.length<oe;)Z=p!==void 0?Z+ce:ce+Z;return Z}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,f)}static getBytes(r,o){return J.encode(r,o)}static getCharCode(r,o=0){return r.charCodeAt(o)}static getCharAt(r){return String.fromCharCode(r)}}ee.SHIFT_JIS=L.SJIS.getName(),ee.GB2312="GB2312",ee.ISO88591=L.ISO8859_1.getName(),ee.EUC_JP="EUC_JP",ee.UTF8=L.UTF8.getName(),ee.PLATFORM_DEFAULT_ENCODING=ee.UTF8,ee.ASSUME_SHIFT_JIS=!1;class W{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=ee.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,o,l){for(let f=o;o<o+l;f++)this.append(r[f]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+1)}substring(r,o){return this.value.substring(r,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+o.length)}}class ve{constructor(r,o,l,f){if(this.width=r,this.height=o,this.rowSize=l,this.bits=f,o==null&&(o=r),this.height=o,r<1||o<1)throw new N("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const o=r.length,l=r[0].length,f=new ve(l,o);for(let d=0;d<o;d++){const m=r[d];for(let p=0;p<l;p++)m[p]&&f.set(p,d)}return f}static parseFromString(r,o,l){if(r===null)throw new N("stringRepresentation cannot be null");const f=new Array(r.length);let d=0,m=0,p=-1,v=0,T=0;for(;T<r.length;)if(r.charAt(T)===`
`||r.charAt(T)==="\r"){if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new N("row lengths do not match");m=d,v++}T++}else if(r.substring(T,T+o.length)===o)T+=o.length,f[d]=!0,d++;else if(r.substring(T,T+l.length)===l)T+=l.length,f[d]=!1,d++;else throw new N("illegal character encountered: "+r.substring(T));if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new N("row lengths do not match");v++}const R=new ve(p,v);for(let k=0;k<d;k++)f[k]&&R.set(Math.floor(k%p),Math.floor(k/p));return R}get(r,o){const l=o*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new N("input matrix dimensions do not match");const o=new fe(Math.floor(this.width/32)+1),l=this.rowSize,f=this.bits;for(let d=0,m=this.height;d<m;d++){const p=d*l,v=r.getRow(d,o).getBitArray();for(let T=0;T<l;T++)f[p+T]^=v[T]}}clear(){const r=this.bits,o=r.length;for(let l=0;l<o;l++)r[l]=0}setRegion(r,o,l,f){if(o<0||r<0)throw new N("Left and top must be nonnegative");if(f<1||l<1)throw new N("Height and width must be at least 1");const d=r+l,m=o+f;if(m>this.height||d>this.width)throw new N("The region must fit inside the matrix");const p=this.rowSize,v=this.bits;for(let T=o;T<m;T++){const R=T*p;for(let k=r;k<d;k++)v[R+Math.floor(k/32)]|=1<<(k&31)&4294967295}}getRow(r,o){o==null||o.getSize()<this.width?o=new fe(this.width):o.clear();const l=this.rowSize,f=this.bits,d=r*l;for(let m=0;m<l;m++)o.setBulk(m*32,f[d+m]);return o}setRow(r,o){re.arraycopy(o.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),o=this.getHeight();let l=new fe(r),f=new fe(r);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),f=this.getRow(o-1-d,f),l.reverse(),f.reverse(),this.setRow(d,f),this.setRow(o-1-d,l)}getEnclosingRectangle(){const r=this.width,o=this.height,l=this.rowSize,f=this.bits;let d=r,m=o,p=-1,v=-1;for(let T=0;T<o;T++)for(let R=0;R<l;R++){const k=f[T*l+R];if(k!==0){if(T<m&&(m=T),T>v&&(v=T),R*32<d){let B=0;for(;!(k<<31-B&4294967295);)B++;R*32+B<d&&(d=R*32+B)}if(R*32+31>p){let B=31;for(;!(k>>>B);)B--;R*32+B>p&&(p=R*32+B)}}}return p<d||v<m?null:Int32Array.from([d,m,p-d+1,v-m+1])}getTopLeftOnBit(){const r=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const f=l/r;let d=l%r*32;const m=o[l];let p=0;for(;!(m<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,f])}getBottomRightOnBit(){const r=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const f=Math.floor(l/r);let d=Math.floor(l%r)*32;const m=o[l];let p=31;for(;!(m>>>p);)p--;return d+=p,Int32Array.from([d,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof ve))return!1;const o=r;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&ue.equals(this.bits,o.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+ue.hashCode(this.bits),r}toString(r="X ",o="  ",l=`
`){return this.buildToString(r,o,l)}buildToString(r,o,l){let f=new W;for(let d=0,m=this.height;d<m;d++){for(let p=0,v=this.width;p<v;p++)f.append(this.get(p,d)?r:o);f.append(l)}return f.toString()}clone(){return new ve(this.width,this.height,this.rowSize,this.bits.slice())}}class te extends w{static getNotFoundInstance(){return new te}}te.kind="NotFoundException";class Ae extends X{constructor(r){super(r),this.luminances=Ae.EMPTY,this.buckets=new Int32Array(Ae.LUMINANCE_BUCKETS)}getBlackRow(r,o){const l=this.getLuminanceSource(),f=l.getWidth();o==null||o.getSize()<f?o=new fe(f):o.clear(),this.initArrays(f);const d=l.getRow(r,this.luminances),m=this.buckets;for(let v=0;v<f;v++)m[(d[v]&255)>>Ae.LUMINANCE_SHIFT]++;const p=Ae.estimateBlackPoint(m);if(f<3)for(let v=0;v<f;v++)(d[v]&255)<p&&o.set(v);else{let v=d[0]&255,T=d[1]&255;for(let R=1;R<f-1;R++){const k=d[R+1]&255;(T*4-v-k)/2<p&&o.set(R),v=T,T=k}}return o}getBlackMatrix(){const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight(),f=new ve(o,l);this.initArrays(o);const d=this.buckets;for(let v=1;v<5;v++){const T=Math.floor(l*v/5),R=r.getRow(T,this.luminances),k=Math.floor(o*4/5);for(let B=Math.floor(o/5);B<k;B++){const Z=R[B]&255;d[Z>>Ae.LUMINANCE_SHIFT]++}}const m=Ae.estimateBlackPoint(d),p=r.getMatrix();for(let v=0;v<l;v++){const T=v*o;for(let R=0;R<o;R++)(p[T+R]&255)<m&&f.set(R,v)}return f}createBinarizer(r){return new Ae(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const o=this.buckets;for(let l=0;l<Ae.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(r){const o=r.length;let l=0,f=0,d=0;for(let R=0;R<o;R++)r[R]>d&&(f=R,d=r[R]),r[R]>l&&(l=r[R]);let m=0,p=0;for(let R=0;R<o;R++){const k=R-f,B=r[R]*k*k;B>p&&(m=R,p=B)}if(f>m){const R=f;f=m,m=R}if(m-f<=o/16)throw new te;let v=m-1,T=-1;for(let R=m-1;R>f;R--){const k=R-f,B=k*k*(m-R)*(l-r[R]);B>T&&(v=R,T=B)}return v<<Ae.LUMINANCE_SHIFT}}Ae.LUMINANCE_BITS=5,Ae.LUMINANCE_SHIFT=8-Ae.LUMINANCE_BITS,Ae.LUMINANCE_BUCKETS=1<<Ae.LUMINANCE_BITS,Ae.EMPTY=Uint8ClampedArray.from([0]);class Te extends Ae{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight();if(o>=Te.MINIMUM_DIMENSION&&l>=Te.MINIMUM_DIMENSION){const f=r.getMatrix();let d=o>>Te.BLOCK_SIZE_POWER;o&Te.BLOCK_SIZE_MASK&&d++;let m=l>>Te.BLOCK_SIZE_POWER;l&Te.BLOCK_SIZE_MASK&&m++;const p=Te.calculateBlackPoints(f,d,m,o,l),v=new ve(o,l);Te.calculateThresholdForBlock(f,d,m,o,l,p,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Te(r)}static calculateThresholdForBlock(r,o,l,f,d,m,p){const v=d-Te.BLOCK_SIZE,T=f-Te.BLOCK_SIZE;for(let R=0;R<l;R++){let k=R<<Te.BLOCK_SIZE_POWER;k>v&&(k=v);const B=Te.cap(R,2,l-3);for(let Z=0;Z<o;Z++){let oe=Z<<Te.BLOCK_SIZE_POWER;oe>T&&(oe=T);const ce=Te.cap(Z,2,o-3);let Ce=0;for(let nt=-2;nt<=2;nt++){const it=m[B+nt];Ce+=it[ce-2]+it[ce-1]+it[ce]+it[ce+1]+it[ce+2]}const Le=Ce/25;Te.thresholdBlock(r,oe,k,Le,f,p)}}}static cap(r,o,l){return r<o?o:r>l?l:r}static thresholdBlock(r,o,l,f,d,m){for(let p=0,v=l*d+o;p<Te.BLOCK_SIZE;p++,v+=d)for(let T=0;T<Te.BLOCK_SIZE;T++)(r[v+T]&255)<=f&&m.set(o+T,l+p)}static calculateBlackPoints(r,o,l,f,d){const m=d-Te.BLOCK_SIZE,p=f-Te.BLOCK_SIZE,v=new Array(l);for(let T=0;T<l;T++){v[T]=new Int32Array(o);let R=T<<Te.BLOCK_SIZE_POWER;R>m&&(R=m);for(let k=0;k<o;k++){let B=k<<Te.BLOCK_SIZE_POWER;B>p&&(B=p);let Z=0,oe=255,ce=0;for(let Le=0,nt=R*f+B;Le<Te.BLOCK_SIZE;Le++,nt+=f){for(let it=0;it<Te.BLOCK_SIZE;it++){const $e=r[nt+it]&255;Z+=$e,$e<oe&&(oe=$e),$e>ce&&(ce=$e)}if(ce-oe>Te.MIN_DYNAMIC_RANGE)for(Le++,nt+=f;Le<Te.BLOCK_SIZE;Le++,nt+=f)for(let it=0;it<Te.BLOCK_SIZE;it++)Z+=r[nt+it]&255}let Ce=Z>>Te.BLOCK_SIZE_POWER*2;if(ce-oe<=Te.MIN_DYNAMIC_RANGE&&(Ce=oe/2,T>0&&k>0)){const Le=(v[T-1][k]+2*v[T][k-1]+v[T-1][k-1])/4;oe<Le&&(Ce=Le)}v[T][k]=Ce}}return v}}Te.BLOCK_SIZE_POWER=3,Te.BLOCK_SIZE=1<<Te.BLOCK_SIZE_POWER,Te.BLOCK_SIZE_MASK=Te.BLOCK_SIZE-1,Te.MINIMUM_DIMENSION=Te.BLOCK_SIZE*5,Te.MIN_DYNAMIC_RANGE=24;class Xe{constructor(r,o){this.width=r,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,o,l,f){throw new F("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new F("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new F("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let o=new W;for(let l=0;l<this.height;l++){const f=this.getRow(l,r);for(let d=0;d<this.width;d++){const m=f[d]&255;let p;m<64?p="#":m<128?p="+":m<192?p=".":p=" ",o.append(p)}o.append(`
`)}return o.toString()}}class ht extends Xe{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,o){const l=this.delegate.getRow(r,o),f=this.getWidth();for(let d=0;d<f;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let f=0;f<o;f++)l[f]=255-(r[f]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,o,l,f){return new ht(this.delegate.crop(r,o,l,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ht(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ht(this.delegate.rotateCounterClockwise45())}}class Q extends Xe{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=Q.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const o=r.getContext("2d").getImageData(0,0,r.width,r.height);return Q.toGrayscaleBuffer(o.data,r.width,r.height)}static toGrayscaleBuffer(r,o,l){const f=new Uint8ClampedArray(o*l);for(let d=0,m=0,p=r.length;d<p;d+=4,m++){let v;if(r[d+3]===0)v=255;else{const R=r[d],k=r[d+1],B=r[d+2];v=306*R+601*k+117*B+512>>10}f[m]=v}return f}getRow(r,o){if(r<0||r>=this.getHeight())throw new N("Requested row is outside the image: "+r);const l=this.getWidth(),f=r*l;return o===null?o=this.buffer.slice(f,f+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(f,f+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,o,l,f){return super.crop(r,o,l,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const o=this.getTempCanvasElement(),l=o.getContext("2d"),f=r*Q.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(f))*d+Math.abs(Math.sin(f))*m),v=Math.ceil(Math.abs(Math.sin(f))*d+Math.abs(Math.cos(f))*m);return o.width=p,o.height=v,l.translate(p/2,v/2),l.rotate(f),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=Q.makeBufferFromCanvasImageData(o),this}invert(){return new ht(this)}}Q.DEGREE_TO_RADIANS=Math.PI/180;class ge{constructor(r,o,l){this.deviceId=r,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Re=(globalThis||Fh||self||window||void 0)&&(globalThis||Fh||self||window||void 0).__awaiter||function(O,r,o,l){function f(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function p(R){try{T(l.next(R))}catch(k){m(k)}}function v(R){try{T(l.throw(R))}catch(k){m(k)}}function T(R){R.done?d(R.value):f(R.value).then(p,v)}T((l=l.apply(O,r||[])).next())})};class Fe{constructor(r,o=500,l){this.reader=r,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Re(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of r){const f=l.kind==="video"?"videoinput":l.kind;if(f!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,p=l.groupId,v={deviceId:d,label:m,kind:f,groupId:p};o.push(v)}return o})}getVideoInputDevices(){return Re(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new ge(o.deviceId,o.label))})}findDeviceById(r){return Re(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,o){return Re(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,o)})}decodeOnceFromVideoDevice(r,o){return Re(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const f={video:l};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(r,o){return Re(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(r,o){return Re(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,o,l){return Re(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,o,l)})}decodeFromVideoDevice(r,o,l){return Re(this,void 0,void 0,function*(){let f;r?f={deviceId:{exact:r}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(r,o,l){return Re(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(f,o,l)})}decodeFromStream(r,o,l){return Re(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(r,o);return yield this.decodeContinuously(f,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,o){return Re(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((o,l)=>this.playVideoOnLoad(r,()=>o()))}playVideoOnLoad(r,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",o),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Re(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,o){const l=document.getElementById(r);if(!l)throw new S(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new S(`element with id '${r}' must be an ${o} element`);return l}decodeFromImage(r,o){if(!r&&!o)throw new S("either imageElement with a src set or an url must be provided");return o&&!r?this.decodeFromImageUrl(o):this.decodeFromImageElement(r)}decodeFromVideo(r,o){if(!r&&!o)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,o,l){if(r===void 0&&o===void 0)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const o=this.prepareImageElement(r);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(r){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(r,o){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const o=this.prepareVideoElement(r);return this.videoElement=o,o}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=r,l}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=r,l}decodeFromVideoUrlContinuously(r,o){if(!r)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(l,o);return l.src=r,f}_decodeOnLoadImage(r){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(o,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Re(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,o){return Re(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,o)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let o;return typeof r>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(o=r),o}prepareVideoElement(r){let o;return!r&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(o=r),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(r,o=!0,l=!0){this._stopAsyncDecode=!1;const f=(d,m)=>{if(this._stopAsyncDecode){m(new te("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(r);d(p)}catch(p){const v=o&&p instanceof te,R=(p instanceof U||p instanceof z)&&l;if(v||R)return setTimeout(f,this._timeBetweenDecodingAttempts,d,m);m(p)}};return new Promise((d,m)=>f(d,m))}decodeContinuously(r,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(r);o(f,null),setTimeout(l,this.timeBetweenScansMillis)}catch(f){o(null,f);const d=f instanceof U||f instanceof z,m=f instanceof te;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const o=this.createBinaryBitmap(r);return this.decodeBitmap(o)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,o,l){o||(o={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(r,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const o=this.getCaptureCanvas(r),l=new Q(o),f=new Te(l);return new P(f)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const o=this.createCaptureCanvas(r);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,f;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,f=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,f=r.naturalHeight||r.height)),o.style.width=l+"px",o.style.height=f+"px",o.width=l,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,o){try{r.srcObject=o}catch{r.src=URL.createObjectURL(o)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Se{constructor(r,o,l=o==null?0:8*o.length,f,d,m=re.currentTimeMillis()){this.text=r,this.rawBytes=o,this.numBits=l,this.resultPoints=f,this.format=d,this.timestamp=m,this.text=r,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=f,this.format=d,this.resultMetadata=null,m==null?this.timestamp=re.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,o)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const o=this.resultPoints;if(o===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(o.length+r.length);re.arraycopy(o,0,l,0,o.length),re.arraycopy(r,0,l,o.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var $;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($||($={}));var Ve=$,dt;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(dt||(dt={}));var st=dt;class vt{constructor(r,o,l,f,d=-1,m=-1){this.rawBytes=r,this.text=o,this.byteSegments=l,this.ecLevel=f,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class mt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new N;return this.logTable[r]}static addOrSubtract(r,o){return r^o}}class xt{constructor(r,o){if(o.length===0)throw new N;this.field=r;const l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-f),re.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(r===1){l=0;for(let m=0,p=o.length;m!==p;m++){const v=o[m];l=mt.addOrSubtract(l,v)}return l}l=o[0];const f=o.length,d=this.field;for(let m=1;m<f;m++)l=mt.addOrSubtract(d.multiply(r,l),o[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let f=new Int32Array(l.length);const d=l.length-o.length;re.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=mt.addOrSubtract(o[m-d],l[m]);return new xt(this.field,f)}multiply(r){if(!this.field.equals(r.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,f=r.coefficients,d=f.length,m=new Int32Array(l+d-1),p=this.field;for(let v=0;v<l;v++){const T=o[v];for(let R=0;R<d;R++)m[v+R]=mt.addOrSubtract(m[v+R],p.multiply(T,f[R]))}return new xt(p,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const o=this.coefficients.length,l=this.field,f=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)f[m]=l.multiply(d[m],r);return new xt(l,f)}multiplyByMonomial(r,o){if(r<0)throw new N;if(o===0)return this.field.getZero();const l=this.coefficients,f=l.length,d=new Int32Array(f+r),m=this.field;for(let p=0;p<f;p++)d[p]=m.multiply(l[p],o);return new xt(m,d)}divide(r){if(!this.field.equals(r.field))throw new N("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new N("Divide by 0");const o=this.field;let l=o.getZero(),f=this;const d=r.getCoefficient(r.getDegree()),m=o.inverse(d);for(;f.getDegree()>=r.getDegree()&&!f.isZero();){const p=f.getDegree()-r.getDegree(),v=o.multiply(f.getCoefficient(f.getDegree()),m),T=r.multiplyByMonomial(p,v),R=o.buildMonomial(p,v);l=l.addOrSubtract(R),f=f.addOrSubtract(T)}return[l,f]}toString(){let r="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),o===0||l!==1){const f=this.field.log(l);f===0?r+="1":f===1?r+="a":(r+="a^",r+=f)}o!==0&&(o===1?r+="x":(r+="x^",r+=o))}}return r}}class Ft extends w{}Ft.kind="ArithmeticException";class ft extends mt{constructor(r,o,l){super(),this.primitive=r,this.size=o,this.generatorBase=l;const f=new Int32Array(o);let d=1;for(let p=0;p<o;p++)f[p]=d,d*=2,d>=o&&(d^=r,d&=o-1);this.expTable=f;const m=new Int32Array(o);for(let p=0;p<o-1;p++)m[f[p]]=p;this.logTable=m,this.zero=new xt(this,Int32Array.from([0])),this.one=new xt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new N;if(o===0)return this.zero;const l=new Int32Array(r+1);return l[0]=o,new xt(this,l)}inverse(r){if(r===0)throw new Ft;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+se.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}ft.AZTEC_DATA_12=new ft(4201,4096,1),ft.AZTEC_DATA_10=new ft(1033,1024,1),ft.AZTEC_DATA_6=new ft(67,64,1),ft.AZTEC_PARAM=new ft(19,16,1),ft.QR_CODE_FIELD_256=new ft(285,256,0),ft.DATA_MATRIX_FIELD_256=new ft(301,256,1),ft.AZTEC_DATA_8=ft.DATA_MATRIX_FIELD_256,ft.MAXICODE_FIELD_64=ft.AZTEC_DATA_6;class qe extends w{}qe.kind="ReedSolomonException";class le extends w{}le.kind="IllegalStateException";class Ne{constructor(r){this.field=r}decode(r,o){const l=this.field,f=new xt(l,r),d=new Int32Array(o);let m=!0;for(let Z=0;Z<o;Z++){const oe=f.evaluateAt(l.exp(Z+l.getGeneratorBase()));d[d.length-1-Z]=oe,oe!==0&&(m=!1)}if(m)return;const p=new xt(l,d),v=this.runEuclideanAlgorithm(l.buildMonomial(o,1),p,o),T=v[0],R=v[1],k=this.findErrorLocations(T),B=this.findErrorMagnitudes(R,k);for(let Z=0;Z<k.length;Z++){const oe=r.length-1-l.log(k[Z]);if(oe<0)throw new qe("Bad error location");r[oe]=ft.addOrSubtract(r[oe],B[Z])}}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){const Z=r;r=o,o=Z}const f=this.field;let d=r,m=o,p=f.getZero(),v=f.getOne();for(;m.getDegree()>=(l/2|0);){let Z=d,oe=p;if(d=m,p=v,d.isZero())throw new qe("r_{i-1} was zero");m=Z;let ce=f.getZero();const Ce=d.getCoefficient(d.getDegree()),Le=f.inverse(Ce);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const nt=m.getDegree()-d.getDegree(),it=f.multiply(m.getCoefficient(m.getDegree()),Le);ce=ce.addOrSubtract(f.buildMonomial(nt,it)),m=m.addOrSubtract(d.multiplyByMonomial(nt,it))}if(v=ce.multiply(p).addOrSubtract(oe),m.getDegree()>=d.getDegree())throw new le("Division algorithm failed to reduce polynomial?")}const T=v.getCoefficient(0);if(T===0)throw new qe("sigmaTilde(0) was zero");const R=f.inverse(T),k=v.multiplyScalar(R),B=m.multiplyScalar(R);return[k,B]}findErrorLocations(r){const o=r.getDegree();if(o===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(o);let f=0;const d=this.field;for(let m=1;m<d.getSize()&&f<o;m++)r.evaluateAt(m)===0&&(l[f]=d.inverse(m),f++);if(f!==o)throw new qe("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,o){const l=o.length,f=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const p=d.inverse(o[m]);let v=1;for(let T=0;T<l;T++)if(m!==T){const R=d.multiply(o[T],p),k=R&1?R&-2:R|1;v=d.multiply(v,k)}f[m]=d.multiply(r.evaluateAt(p),d.inverse(v)),d.getGeneratorBase()!==0&&(f[m]=d.multiply(f[m],p))}return f}}var pe;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(pe||(pe={}));class De{decode(r){this.ddata=r;let o=r.getBits(),l=this.extractBits(o),f=this.correctBits(l),d=De.convertBoolArrayToByteArray(f),m=De.getEncodedData(f),p=new vt(d,m,null,null);return p.setNumBits(f.length),p}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let o=r.length,l=pe.UPPER,f=pe.UPPER,d="",m=0;for(;m<o;)if(f===pe.BINARY){if(o-m<5)break;let p=De.readCode(r,m,5);if(m+=5,p===0){if(o-m<11)break;p=De.readCode(r,m,11)+31,m+=11}for(let v=0;v<p;v++){if(o-m<8){m=o;break}const T=De.readCode(r,m,8);d+=ee.castAsNonUtf8Char(T),m+=8}f=l}else{let p=f===pe.DIGIT?4:5;if(o-m<p)break;let v=De.readCode(r,m,p);m+=p;let T=De.getCharacter(f,v);T.startsWith("CTRL_")?(l=f,f=De.getTable(T.charAt(5)),T.charAt(6)==="L"&&(l=f)):(d+=T,f=l)}return d}static getTable(r){switch(r){case"L":return pe.LOWER;case"P":return pe.PUNCT;case"M":return pe.MIXED;case"D":return pe.DIGIT;case"B":return pe.BINARY;case"U":default:return pe.UPPER}}static getCharacter(r,o){switch(r){case pe.UPPER:return De.UPPER_TABLE[o];case pe.LOWER:return De.LOWER_TABLE[o];case pe.MIXED:return De.MIXED_TABLE[o];case pe.PUNCT:return De.PUNCT_TABLE[o];case pe.DIGIT:return De.DIGIT_TABLE[o];default:throw new le("Bad table")}}correctBits(r){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=ft.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=ft.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=ft.AZTEC_DATA_10):(l=12,o=ft.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),d=r.length/l;if(d<f)throw new z;let m=r.length%l,p=new Int32Array(d);for(let B=0;B<d;B++,m+=l)p[B]=De.readCode(r,m,l);try{new Ne(o).decode(p,d-f)}catch(B){throw new z(B)}let v=(1<<l)-1,T=0;for(let B=0;B<f;B++){let Z=p[B];if(Z===0||Z===v)throw new z;(Z===1||Z===v-1)&&T++}let R=new Array(f*l-T),k=0;for(let B=0;B<f;B++){let Z=p[B];if(Z===1||Z===v-1)R.fill(Z>1,k,k+l-1),k+=l-1;else for(let oe=l-1;oe>=0;--oe)R[k++]=(Z&1<<oe)!==0}return R}extractBits(r){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),f=(o?11:14)+l*4,d=new Int32Array(f),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let p=0;p<d.length;p++)d[p]=p;else{let p=f+1+2*se.truncDivision(se.truncDivision(f,2)-1,15),v=f/2,T=se.truncDivision(p,2);for(let R=0;R<v;R++){let k=R+se.truncDivision(R,15);d[v-R-1]=T-k-1,d[v+R]=T+k+1}}for(let p=0,v=0;p<l;p++){let T=(l-p)*4+(o?9:12),R=p*2,k=f-1-R;for(let B=0;B<T;B++){let Z=B*2;for(let oe=0;oe<2;oe++)m[v+Z+oe]=r.get(d[R+oe],d[R+B]),m[v+2*T+Z+oe]=r.get(d[R+B],d[k-oe]),m[v+4*T+Z+oe]=r.get(d[k-oe],d[k-B]),m[v+6*T+Z+oe]=r.get(d[k-B],d[R+oe])}v+=T*8}return m}static readCode(r,o,l){let f=0;for(let d=o;d<o+l;d++)f<<=1,r[d]&&(f|=1);return f}static readByte(r,o){let l=r.length-o;return l>=8?De.readCode(r,o,8):De.readCode(r,o,l)<<8-l}static convertBoolArrayToByteArray(r){let o=new Uint8Array((r.length+7)/8);for(let l=0;l<o.length;l++)o[l]=De.readByte(r,8*l);return o}totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}De.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],De.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],De.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],De.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],De.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Be{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,o,l,f){const d=r-l,m=o-f;return Math.sqrt(d*d+m*m)}static sum(r){let o=0;for(let l=0,f=r.length;l!==f;l++){const d=r[l];o+=d}return o}}class Ye{static floatToIntBits(r){return r}}Ye.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ue{constructor(r,o){this.x=r,this.y=o}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Ue){const o=r;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Ye.floatToIntBits(this.x)+Ye.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const o=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),f=this.distance(r[0],r[2]);let d,m,p;if(l>=o&&l>=f?(m=r[0],d=r[1],p=r[2]):f>=l&&f>=o?(m=r[1],d=r[0],p=r[2]):(m=r[2],d=r[0],p=r[1]),this.crossProductZ(d,m,p)<0){const v=d;d=p,p=v}r[0]=d,r[1]=m,r[2]=p}static distance(r,o){return Be.distance(r.x,r.y,o.x,o.y)}static crossProductZ(r,o,l){const f=o.x,d=o.y;return(l.x-f)*(r.y-d)-(l.y-d)*(r.x-f)}}class Mt{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ot extends Mt{constructor(r,o,l,f,d){super(r,o),this.compact=l,this.nbDatablocks=f,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class We{constructor(r,o,l,f){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),o==null&&(o=We.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),f==null&&(f=r.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=f-d,this.downInit=f+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new te}detect(){let r=this.leftInit,o=this.rightInit,l=this.upInit,f=this.downInit,d=!1,m=!0,p=!1,v=!1,T=!1,R=!1,k=!1;const B=this.width,Z=this.height;for(;m;){m=!1;let oe=!0;for(;(oe||!v)&&o<B;)oe=this.containsBlackPoint(l,f,o,!1),oe?(o++,m=!0,v=!0):v||o++;if(o>=B){d=!0;break}let ce=!0;for(;(ce||!T)&&f<Z;)ce=this.containsBlackPoint(r,o,f,!0),ce?(f++,m=!0,T=!0):T||f++;if(f>=Z){d=!0;break}let Ce=!0;for(;(Ce||!R)&&r>=0;)Ce=this.containsBlackPoint(l,f,r,!1),Ce?(r--,m=!0,R=!0):R||r--;if(r<0){d=!0;break}let Le=!0;for(;(Le||!k)&&l>=0;)Le=this.containsBlackPoint(r,o,l,!0),Le?(l--,m=!0,k=!0):k||l--;if(l<0){d=!0;break}m&&(p=!0)}if(!d&&p){const oe=o-r;let ce=null;for(let it=1;ce===null&&it<oe;it++)ce=this.getBlackPointOnSegment(r,f-it,r+it,f);if(ce==null)throw new te;let Ce=null;for(let it=1;Ce===null&&it<oe;it++)Ce=this.getBlackPointOnSegment(r,l+it,r+it,l);if(Ce==null)throw new te;let Le=null;for(let it=1;Le===null&&it<oe;it++)Le=this.getBlackPointOnSegment(o,l+it,o-it,l);if(Le==null)throw new te;let nt=null;for(let it=1;nt===null&&it<oe;it++)nt=this.getBlackPointOnSegment(o,f-it,o-it,f);if(nt==null)throw new te;return this.centerEdges(nt,ce,Le,Ce)}else throw new te}getBlackPointOnSegment(r,o,l,f){const d=Be.round(Be.distance(r,o,l,f)),m=(l-r)/d,p=(f-o)/d,v=this.image;for(let T=0;T<d;T++){const R=Be.round(r+T*m),k=Be.round(o+T*p);if(v.get(R,k))return new Ue(R,k)}return null}centerEdges(r,o,l,f){const d=r.getX(),m=r.getY(),p=o.getX(),v=o.getY(),T=l.getX(),R=l.getY(),k=f.getX(),B=f.getY(),Z=We.CORR;return d<this.width/2?[new Ue(k-Z,B+Z),new Ue(p+Z,v+Z),new Ue(T-Z,R-Z),new Ue(d+Z,m-Z)]:[new Ue(k+Z,B+Z),new Ue(p+Z,v-Z),new Ue(T-Z,R+Z),new Ue(d-Z,m-Z)]}containsBlackPoint(r,o,l,f){const d=this.image;if(f){for(let m=r;m<=o;m++)if(d.get(m,l))return!0}else for(let m=r;m<=o;m++)if(d.get(l,m))return!0;return!1}}We.INIT_SIZE=10,We.CORR=1;class Et{static checkAndNudgePoints(r,o){const l=r.getWidth(),f=r.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const p=Math.floor(o[m]),v=Math.floor(o[m+1]);if(p<-1||p>l||v<-1||v>f)throw new te;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),v===-1?(o[m+1]=0,d=!0):v===f&&(o[m+1]=f-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const p=Math.floor(o[m]),v=Math.floor(o[m+1]);if(p<-1||p>l||v<-1||v>f)throw new te;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),v===-1?(o[m+1]=0,d=!0):v===f&&(o[m+1]=f-1,d=!0)}}}class et{constructor(r,o,l,f,d,m,p,v,T){this.a11=r,this.a21=o,this.a31=l,this.a12=f,this.a22=d,this.a32=m,this.a13=p,this.a23=v,this.a33=T}static quadrilateralToQuadrilateral(r,o,l,f,d,m,p,v,T,R,k,B,Z,oe,ce,Ce){const Le=et.quadrilateralToSquare(r,o,l,f,d,m,p,v);return et.squareToQuadrilateral(T,R,k,B,Z,oe,ce,Ce).times(Le)}transformPoints(r){const o=r.length,l=this.a11,f=this.a12,d=this.a13,m=this.a21,p=this.a22,v=this.a23,T=this.a31,R=this.a32,k=this.a33;for(let B=0;B<o;B+=2){const Z=r[B],oe=r[B+1],ce=d*Z+v*oe+k;r[B]=(l*Z+m*oe+T)/ce,r[B+1]=(f*Z+p*oe+R)/ce}}transformPointsWithValues(r,o){const l=this.a11,f=this.a12,d=this.a13,m=this.a21,p=this.a22,v=this.a23,T=this.a31,R=this.a32,k=this.a33,B=r.length;for(let Z=0;Z<B;Z++){const oe=r[Z],ce=o[Z],Ce=d*oe+v*ce+k;r[Z]=(l*oe+m*ce+T)/Ce,o[Z]=(f*oe+p*ce+R)/Ce}}static squareToQuadrilateral(r,o,l,f,d,m,p,v){const T=r-l+d-p,R=o-f+m-v;if(T===0&&R===0)return new et(l-r,d-l,r,f-o,m-f,o,0,0,1);{const k=l-d,B=p-d,Z=f-m,oe=v-m,ce=k*oe-B*Z,Ce=(T*oe-B*R)/ce,Le=(k*R-T*Z)/ce;return new et(l-r+Ce*l,p-r+Le*p,r,f-o+Ce*f,v-o+Le*v,o,Ce,Le,1)}}static quadrilateralToSquare(r,o,l,f,d,m,p,v){return et.squareToQuadrilateral(r,o,l,f,d,m,p,v).buildAdjoint()}buildAdjoint(){return new et(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new et(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class at extends Et{sampleGrid(r,o,l,f,d,m,p,v,T,R,k,B,Z,oe,ce,Ce,Le,nt,it){const $e=et.quadrilateralToQuadrilateral(f,d,m,p,v,T,R,k,B,Z,oe,ce,Ce,Le,nt,it);return this.sampleGridWithTransform(r,o,l,$e)}sampleGridWithTransform(r,o,l,f){if(o<=0||l<=0)throw new te;const d=new ve(o,l),m=new Float32Array(2*o);for(let p=0;p<l;p++){const v=m.length,T=p+.5;for(let R=0;R<v;R+=2)m[R]=R/2+.5,m[R+1]=T;f.transformPoints(m),Et.checkAndNudgePoints(r,m);try{for(let R=0;R<v;R+=2)r.get(Math.floor(m[R]),Math.floor(m[R+1]))&&d.set(R/2,p)}catch{throw new te}}return d}}class It{static setGridSampler(r){It.gridSampler=r}static getInstance(){return It.gridSampler}}It.gridSampler=new at;class sn{constructor(r,o){this.x=r,this.y=o}toResultPoint(){return new Ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Nn{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let f=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new ot(f,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new te;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],o),this.sampleLine(r[1],r[2],o),this.sampleLine(r[2],r[3],o),this.sampleLine(r[3],r[0],o)]);this.shift=this.getRotation(l,o);let f=0;for(let m=0;m<4;m++){let p=l[(this.shift+m)%4];this.compact?(f<<=7,f+=p>>1&127):(f<<=10,f+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,o){let l=0;r.forEach((f,d,m)=>{let p=(f>>o-2<<1)+(f&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let f=0;f<4;f++)if(se.bitCount(l^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new te}getCorrectedParameterData(r,o){let l,f;o?(l=7,f=2):(l=10,f=4);let d=l-f,m=new Int32Array(l);for(let v=l-1;v>=0;--v)m[v]=r&15,r>>=4;try{new Ne(ft.AZTEC_PARAM).decode(m,d)}catch{throw new te}let p=0;for(let v=0;v<f;v++)p=(p<<4)+m[v];return p}getBullsEyeCorners(r){let o=r,l=r,f=r,d=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let k=this.getFirstDifferent(o,m,1,-1),B=this.getFirstDifferent(l,m,1,1),Z=this.getFirstDifferent(f,m,-1,1),oe=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let ce=this.distancePoint(oe,k)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(ce<.75||ce>1.25||!this.isWhiteOrBlackRectangle(k,B,Z,oe))break}o=k,l=B,f=Z,d=oe,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new te;this.compact=this.nbCenterLayers===5;let p=new Ue(o.getX()+.5,o.getY()-.5),v=new Ue(l.getX()+.5,l.getY()+.5),T=new Ue(f.getX()-.5,f.getY()+.5),R=new Ue(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,v,T,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,o,l,f;try{let p=new We(this.image).detect();r=p[0],o=p[1],l=p[2],f=p[3]}catch{let v=this.image.getWidth()/2,T=this.image.getHeight()/2;r=this.getFirstDifferent(new sn(v+7,T-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new sn(v+7,T+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new sn(v-7,T+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new sn(v-7,T-7),!1,-1,-1).toResultPoint()}let d=Be.round((r.getX()+f.getX()+o.getX()+l.getX())/4),m=Be.round((r.getY()+f.getY()+o.getY()+l.getY())/4);try{let p=new We(this.image,15,d,m).detect();r=p[0],o=p[1],l=p[2],f=p[3]}catch{r=this.getFirstDifferent(new sn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new sn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new sn(d-7,m+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new sn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=Be.round((r.getX()+f.getX()+o.getX()+l.getX())/4),m=Be.round((r.getY()+f.getY()+o.getY()+l.getY())/4),new sn(d,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,o,l,f,d){let m=It.getInstance(),p=this.getDimension(),v=p/2-this.nbCenterLayers,T=p/2+this.nbCenterLayers;return m.sampleGrid(r,p,p,v,v,T,v,T,T,v,T,o.getX(),o.getY(),l.getX(),l.getY(),f.getX(),f.getY(),d.getX(),d.getY())}sampleLine(r,o,l){let f=0,d=this.distanceResultPoint(r,o),m=d/l,p=r.getX(),v=r.getY(),T=m*(o.getX()-r.getX())/d,R=m*(o.getY()-r.getY())/d;for(let k=0;k<l;k++)this.image.get(Be.round(p+k*T),Be.round(v+k*R))&&(f|=1<<l-k-1);return f}isWhiteOrBlackRectangle(r,o,l,f){let d=3;r=new sn(r.getX()-d,r.getY()+d),o=new sn(o.getX()-d,o.getY()-d),l=new sn(l.getX()+d,l.getY()-d),f=new sn(f.getX()+d,f.getY()+d);let m=this.getColor(f,r);if(m===0)return!1;let p=this.getColor(r,o);return p!==m||(p=this.getColor(o,l),p!==m)?!1:(p=this.getColor(l,f),p===m)}getColor(r,o){let l=this.distancePoint(r,o),f=(o.getX()-r.getX())/l,d=(o.getY()-r.getY())/l,m=0,p=r.getX(),v=r.getY(),T=this.image.get(r.getX(),r.getY()),R=Math.ceil(l);for(let B=0;B<R;B++)p+=f,v+=d,this.image.get(Be.round(p),Be.round(v))!==T&&m++;let k=m/l;return k>.1&&k<.9?0:k<=.1===T?1:-1}getFirstDifferent(r,o,l,f){let d=r.getX()+l,m=r.getY()+f;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=f;for(d-=l,m-=f;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=f;return m-=f,new sn(d,m)}expandSquare(r,o,l){let f=l/(2*o),d=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),p=(r[0].getX()+r[2].getX())/2,v=(r[0].getY()+r[2].getY())/2,T=new Ue(p+f*d,v+f*m),R=new Ue(p-f*d,v-f*m);d=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),p=(r[1].getX()+r[3].getX())/2,v=(r[1].getY()+r[3].getY())/2;let k=new Ue(p+f*d,v+f*m),B=new Ue(p-f*d,v-f*m);return[T,k,R,B]}isValid(r,o){return r>=0&&r<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(r){let o=Be.round(r.getX()),l=Be.round(r.getY());return this.isValid(o,l)}distancePoint(r,o){return Be.distance(r.getX(),r.getY(),o.getX(),o.getY())}distanceResultPoint(r,o){return Be.distance(r.getX(),r.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(se.truncDivision(this.nbLayers-4,8)+1)+15}}class Qn{decode(r,o=null){let l=null,f=new Nn(r.getBlackMatrix()),d=null,m=null;try{let R=f.detectMirror(!1);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new De().decode(R)}catch(R){l=R}if(m==null)try{let R=f.detectMirror(!0);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new De().decode(R)}catch(R){throw l??R}let p=new Se(m.getText(),m.getRawBytes(),m.getNumBits(),d,Ve.AZTEC,re.currentTimeMillis()),v=m.getByteSegments();v!=null&&p.putMetadata(st.BYTE_SEGMENTS,v);let T=m.getECLevel();return T!=null&&p.putMetadata(st.ERROR_CORRECTION_LEVEL,T),p}reportFoundResultPoints(r,o){if(r!=null){let l=r.get(Pe.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((f,d,m)=>{l.foundPossibleResultPoint(f)})}}reset(){}}class sr extends Fe{constructor(r=500){super(new Qn,r)}}class Jt{decode(r,o){try{return this.doDecode(r,o)}catch{if(o&&o.get(Pe.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),m=this.doDecode(d,o),p=m.getResultMetadata();let v=270;p!==null&&p.get(st.ORIENTATION)===!0&&(v=v+p.get(st.ORIENTATION)%360),m.putMetadata(st.ORIENTATION,v);const T=m.getResultPoints();if(T!==null){const R=d.getHeight();for(let k=0;k<T.length;k++)T[k]=new Ue(R-T[k].getY()-1,T[k].getX())}return m}else throw new te}}reset(){}doDecode(r,o){const l=r.getWidth(),f=r.getHeight();let d=new fe(l);const m=o&&o.get(Pe.TRY_HARDER)===!0,p=Math.max(1,f>>(m?8:5));let v;m?v=f:v=15;const T=Math.trunc(f/2);for(let R=0;R<v;R++){const k=Math.trunc((R+1)/2),B=(R&1)===0,Z=T+p*(B?k:-k);if(Z<0||Z>=f)break;try{d=r.getBlackRow(Z,d)}catch{continue}for(let oe=0;oe<2;oe++){if(oe===1&&(d.reverse(),o&&o.get(Pe.NEED_RESULT_POINT_CALLBACK)===!0)){const ce=new Map;o.forEach((Ce,Le)=>ce.set(Le,Ce)),ce.delete(Pe.NEED_RESULT_POINT_CALLBACK),o=ce}try{const ce=this.decodeRow(Z,d,o);if(oe===1){ce.putMetadata(st.ORIENTATION,180);const Ce=ce.getResultPoints();Ce!==null&&(Ce[0]=new Ue(l-Ce[0].getX()-1,Ce[0].getY()),Ce[1]=new Ue(l-Ce[1].getX()-1,Ce[1].getY()))}return ce}catch{}}}throw new te}static recordPattern(r,o,l){const f=l.length;for(let T=0;T<f;T++)l[T]=0;const d=r.getSize();if(o>=d)throw new te;let m=!r.get(o),p=0,v=o;for(;v<d;){if(r.get(v)!==m)l[p]++;else{if(++p===f)break;l[p]=1,m=!m}v++}if(!(p===f||p===f-1&&v===d))throw new te}static recordPatternInReverse(r,o,l){let f=l.length,d=r.get(o);for(;o>0&&f>=0;)r.get(--o)!==d&&(f--,d=!d);if(f>=0)throw new te;Jt.recordPattern(r,o+1,l)}static patternMatchVariance(r,o,l){const f=r.length;let d=0,m=0;for(let T=0;T<f;T++)d+=r[T],m+=o[T];if(d<m)return Number.POSITIVE_INFINITY;const p=d/m;l*=p;let v=0;for(let T=0;T<f;T++){const R=r[T],k=o[T]*p,B=R>k?R-k:k-R;if(B>l)return Number.POSITIVE_INFINITY;v+=B}return v/d}}class He extends Jt{static findStartPattern(r){const o=r.getSize(),l=r.getNextSet(0);let f=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,p=!1;const v=6;for(let T=l;T<o;T++)if(r.get(T)!==p)d[f]++;else{if(f===v-1){let R=He.MAX_AVG_VARIANCE,k=-1;for(let B=He.CODE_START_A;B<=He.CODE_START_C;B++){const Z=Jt.patternMatchVariance(d,He.CODE_PATTERNS[B],He.MAX_INDIVIDUAL_VARIANCE);Z<R&&(R=Z,k=B)}if(k>=0&&r.isRange(Math.max(0,m-(T-m)/2),m,!1))return Int32Array.from([m,T,k]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[f-1]=0,d[f]=0,f--}else f++;d[f]=1,p=!p}throw new te}static decodeCode(r,o,l){Jt.recordPattern(r,l,o);let f=He.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<He.CODE_PATTERNS.length;m++){const p=He.CODE_PATTERNS[m],v=this.patternMatchVariance(o,p,He.MAX_INDIVIDUAL_VARIANCE);v<f&&(f=v,d=m)}if(d>=0)return d;throw new te}decodeRow(r,o,l){const f=l&&l.get(Pe.ASSUME_GS1)===!0,d=He.findStartPattern(o),m=d[2];let p=0;const v=new Uint8Array(20);v[p++]=m;let T;switch(m){case He.CODE_START_A:T=He.CODE_CODE_A;break;case He.CODE_START_B:T=He.CODE_CODE_B;break;case He.CODE_START_C:T=He.CODE_CODE_C;break;default:throw new z}let R=!1,k=!1,B="",Z=d[0],oe=d[1];const ce=Int32Array.from([0,0,0,0,0,0]);let Ce=0,Le=0,nt=m,it=0,$e=!0,en=!1,Lt=!1;for(;!R;){const da=k;switch(k=!1,Ce=Le,Le=He.decodeCode(o,ce,oe),v[p++]=Le,Le!==He.CODE_STOP&&($e=!0),Le!==He.CODE_STOP&&(it++,nt+=it*Le),Z=oe,oe+=ce.reduce((Gu,es)=>Gu+es,0),Le){case He.CODE_START_A:case He.CODE_START_B:case He.CODE_START_C:throw new z}switch(T){case He.CODE_CODE_A:if(Le<64)Lt===en?B+=String.fromCharCode(32+Le):B+=String.fromCharCode(32+Le+128),Lt=!1;else if(Le<96)Lt===en?B+=String.fromCharCode(Le-64):B+=String.fromCharCode(Le+64),Lt=!1;else switch(Le!==He.CODE_STOP&&($e=!1),Le){case He.CODE_FNC_1:f&&(B.length===0?B+="]C1":B+="");break;case He.CODE_FNC_2:case He.CODE_FNC_3:break;case He.CODE_FNC_4_A:!en&&Lt?(en=!0,Lt=!1):en&&Lt?(en=!1,Lt=!1):Lt=!0;break;case He.CODE_SHIFT:k=!0,T=He.CODE_CODE_B;break;case He.CODE_CODE_B:T=He.CODE_CODE_B;break;case He.CODE_CODE_C:T=He.CODE_CODE_C;break;case He.CODE_STOP:R=!0;break}break;case He.CODE_CODE_B:if(Le<96)Lt===en?B+=String.fromCharCode(32+Le):B+=String.fromCharCode(32+Le+128),Lt=!1;else switch(Le!==He.CODE_STOP&&($e=!1),Le){case He.CODE_FNC_1:f&&(B.length===0?B+="]C1":B+="");break;case He.CODE_FNC_2:case He.CODE_FNC_3:break;case He.CODE_FNC_4_B:!en&&Lt?(en=!0,Lt=!1):en&&Lt?(en=!1,Lt=!1):Lt=!0;break;case He.CODE_SHIFT:k=!0,T=He.CODE_CODE_A;break;case He.CODE_CODE_A:T=He.CODE_CODE_A;break;case He.CODE_CODE_C:T=He.CODE_CODE_C;break;case He.CODE_STOP:R=!0;break}break;case He.CODE_CODE_C:if(Le<100)Le<10&&(B+="0"),B+=Le;else switch(Le!==He.CODE_STOP&&($e=!1),Le){case He.CODE_FNC_1:f&&(B.length===0?B+="]C1":B+="");break;case He.CODE_CODE_A:T=He.CODE_CODE_A;break;case He.CODE_CODE_B:T=He.CODE_CODE_B;break;case He.CODE_STOP:R=!0;break}break}da&&(T=T===He.CODE_CODE_A?He.CODE_CODE_B:He.CODE_CODE_A)}const hi=oe-Z;if(oe=o.getNextUnset(oe),!o.isRange(oe,Math.min(o.getSize(),oe+(oe-Z)/2),!1))throw new te;if(nt-=it*Ce,nt%103!==Ce)throw new U;const Yi=B.length;if(Yi===0)throw new te;Yi>0&&$e&&(T===He.CODE_CODE_C?B=B.substring(0,Yi-2):B=B.substring(0,Yi-1));const fi=(d[1]+d[0])/2,Pn=Z+hi/2,Kr=v.length,ki=new Uint8Array(Kr);for(let da=0;da<Kr;da++)ki[da]=v[da];const fa=[new Ue(fi,r),new Ue(Pn,r)];return new Se(B,ki,0,fa,Ve.CODE_128,new Date().getTime())}}He.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],He.MAX_AVG_VARIANCE=.25,He.MAX_INDIVIDUAL_VARIANCE=.7,He.CODE_SHIFT=98,He.CODE_CODE_C=99,He.CODE_CODE_B=100,He.CODE_CODE_A=101,He.CODE_FNC_1=102,He.CODE_FNC_2=97,He.CODE_FNC_3=96,He.CODE_FNC_4_A=101,He.CODE_FNC_4_B=100,He.CODE_START_A=103,He.CODE_START_B=104,He.CODE_START_C=105,He.CODE_STOP=106;class xn extends Jt{constructor(r=!1,o=!1){super(),this.usingCheckDigit=r,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,o,l){let f=this.counters;f.fill(0),this.decodeRowResult="";let d=xn.findAsteriskPattern(o,f),m=o.getNextSet(d[1]),p=o.getSize(),v,T;do{xn.recordPattern(o,m,f);let ce=xn.toNarrowWidePattern(f);if(ce<0)throw new te;v=xn.patternToChar(ce),this.decodeRowResult+=v,T=m;for(let Ce of f)m+=Ce;m=o.getNextSet(m)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ce of f)R+=ce;let k=m-T-R;if(m!==p&&k*2<R)throw new te;if(this.usingCheckDigit){let ce=this.decodeRowResult.length-1,Ce=0;for(let Le=0;Le<ce;Le++)Ce+=xn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Le));if(this.decodeRowResult.charAt(ce)!==xn.ALPHABET_STRING.charAt(Ce%43))throw new U;this.decodeRowResult=this.decodeRowResult.substring(0,ce)}if(this.decodeRowResult.length===0)throw new te;let B;this.extendedMode?B=xn.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let Z=(d[1]+d[0])/2,oe=T+R/2;return new Se(B,null,0,[new Ue(Z,r),new Ue(oe,r)],Ve.CODE_39,new Date().getTime())}static findAsteriskPattern(r,o){let l=r.getSize(),f=r.getNextSet(0),d=0,m=f,p=!1,v=o.length;for(let T=f;T<l;T++)if(r.get(T)!==p)o[d]++;else{if(d===v-1){if(this.toNarrowWidePattern(o)===xn.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((T-m)/2)),m,!1))return[m,T];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,p=!p}throw new te}static toNarrowWidePattern(r){let o=r.length,l=0,f;do{let d=2147483647;for(let v of r)v<d&&v>l&&(d=v);l=d,f=0;let m=0,p=0;for(let v=0;v<o;v++){let T=r[v];T>l&&(p|=1<<o-1-v,f++,m+=T)}if(f===3){for(let v=0;v<o&&f>0;v++){let T=r[v];if(T>l&&(f--,T*2>=m))return-1}return p}}while(f>3);return-1}static patternToChar(r){for(let o=0;o<xn.CHARACTER_ENCODINGS.length;o++)if(xn.CHARACTER_ENCODINGS[o]===r)return xn.ALPHABET_STRING.charAt(o);if(r===xn.ASTERISK_ENCODING)return"*";throw new te}static decodeExtended(r){let o=r.length,l="";for(let f=0;f<o;f++){let d=r.charAt(f);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=r.charAt(f+1),p="\0";switch(d){case"+":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)+32);else throw new z;break;case"$":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)-64);else throw new z;break;case"%":if(m>="A"&&m<="E")p=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")p=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")p=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")p="\0";else if(m==="V")p="@";else if(m==="W")p="`";else if(m==="X"||m==="Y"||m==="Z")p="";else throw new z;break;case"/":if(m>="A"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")p=":";else throw new z;break}l+=p,f++}else l+=d}return l}}xn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",xn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],xn.ASTERISK_ENCODING=148;class Ut extends Jt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,o,l){let f=this.decodeStart(o),d=this.decodeEnd(o),m=new W;Ut.decodeMiddle(o,f[1],d[0],m);let p=m.toString(),v=null;l!=null&&(v=l.get(Pe.ALLOWED_LENGTHS)),v==null&&(v=Ut.DEFAULT_ALLOWED_LENGTHS);let T=p.length,R=!1,k=0;for(let oe of v){if(T===oe){R=!0;break}oe>k&&(k=oe)}if(!R&&T>k&&(R=!0),!R)throw new z;const B=[new Ue(f[1],r),new Ue(d[0],r)];return new Se(p,null,0,B,Ve.ITF,new Date().getTime())}static decodeMiddle(r,o,l,f){let d=new Int32Array(10),m=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),m.fill(0),p.fill(0);o<l;){Jt.recordPattern(r,o,d);for(let T=0;T<5;T++){let R=2*T;m[T]=d[R],p[T]=d[R+1]}let v=Ut.decodeDigit(m);f.append(v.toString()),v=this.decodeDigit(p),f.append(v.toString()),d.forEach(function(T){o+=T})}}decodeStart(r){let o=Ut.skipWhiteSpace(r),l=Ut.findGuardPattern(r,o,Ut.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let f=o-1;l>0&&f>=0&&!r.get(f);f--)l--;if(l!==0)throw new te}static skipWhiteSpace(r){const o=r.getSize(),l=r.getNextSet(0);if(l===o)throw new te;return l}decodeEnd(r){r.reverse();try{let o=Ut.skipWhiteSpace(r),l;try{l=Ut.findGuardPattern(r,o,Ut.END_PATTERN_REVERSED[0])}catch(d){d instanceof te&&(l=Ut.findGuardPattern(r,o,Ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let f=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-f,l}finally{r.reverse()}}static findGuardPattern(r,o,l){let f=l.length,d=new Int32Array(f),m=r.getSize(),p=!1,v=0,T=o;d.fill(0);for(let R=o;R<m;R++)if(r.get(R)!==p)d[v]++;else{if(v===f-1){if(Jt.patternMatchVariance(d,l,Ut.MAX_INDIVIDUAL_VARIANCE)<Ut.MAX_AVG_VARIANCE)return[T,R];T+=d[0]+d[1],re.arraycopy(d,2,d,0,v-1),d[v-1]=0,d[v]=0,v--}else v++;d[v]=1,p=!p}throw new te}static decodeDigit(r){let o=Ut.MAX_AVG_VARIANCE,l=-1,f=Ut.PATTERNS.length;for(let d=0;d<f;d++){let m=Ut.PATTERNS[d],p=Jt.patternMatchVariance(r,m,Ut.MAX_INDIVIDUAL_VARIANCE);p<o?(o=p,l=d):p===o&&(l=-1)}if(l>=0)return l%10;throw new te}}Ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ut.MAX_AVG_VARIANCE=.38,Ut.MAX_INDIVIDUAL_VARIANCE=.5,Ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ut.START_PATTERN=Int32Array.from([1,1,1,1]),Ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Xt extends Jt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let o=!1,l,f=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=Xt.findGuardPattern(r,f,!1,this.START_END_PATTERN,d);let m=l[0];f=l[1];let p=m-(f-m);p>=0&&(o=r.isRange(p,m,!1))}return l}static checkChecksum(r){return Xt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return Xt.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let f=o-1;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}static decodeEnd(r,o){return Xt.findGuardPattern(r,o,!1,Xt.START_END_PATTERN,new Int32Array(Xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,o,l,f){return this.findGuardPattern(r,o,l,f,new Int32Array(f.length))}static findGuardPattern(r,o,l,f,d){let m=r.getSize();o=l?r.getNextUnset(o):r.getNextSet(o);let p=0,v=o,T=f.length,R=l;for(let k=o;k<m;k++)if(r.get(k)!==R)d[p]++;else{if(p===T-1){if(Jt.patternMatchVariance(d,f,Xt.MAX_INDIVIDUAL_VARIANCE)<Xt.MAX_AVG_VARIANCE)return Int32Array.from([v,k]);v+=d[0]+d[1];let B=d.slice(2,d.length-1);for(let Z=0;Z<p-1;Z++)d[Z]=B[Z];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,R=!R}throw new te}static decodeDigit(r,o,l,f){this.recordPattern(r,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,p=f.length;for(let v=0;v<p;v++){let T=f[v],R=Jt.patternMatchVariance(o,T,Xt.MAX_INDIVIDUAL_VARIANCE);R<d&&(d=R,m=v)}if(m>=0)return m;throw new te}}Xt.MAX_AVG_VARIANCE=.48,Xt.MAX_INDIVIDUAL_VARIANCE=.7,Xt.START_END_PATTERN=Int32Array.from([1,1,1]),Xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class zn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),p=zn.parseExtensionString(m),v=[new Ue((l[0]+l[1])/2,r),new Ue(d,r)],T=new Se(m,null,0,v,Ve.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&T.putAllMetadata(p),T}decodeMiddle(r,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1],p=0;for(let T=0;T<5&&m<d;T++){let R=Xt.decodeDigit(r,f,m,Xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let k of f)m+=k;R>=10&&(p|=1<<4-T),T!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new te;let v=this.determineCheckDigit(p);if(zn.extensionChecksum(l.toString())!==v)throw new te;return m}static extensionChecksum(r){let o=r.length,l=0;for(let f=o-2;f>=0;f-=2)l+=r.charAt(f).charCodeAt(0)-48;l*=3;for(let f=o-1;f>=0;f-=2)l+=r.charAt(f).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let o=0;o<10;o++)if(r===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new te}static parseExtensionString(r){if(r.length!==5)return null;let o=zn.parseExtension5String(r);return o==null?null:new Map([[st.SUGGESTED_PRICE,o]])}static parseExtension5String(r){let o;switch(r.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(r.substring(1)),f=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+f+"."+m}}class Or{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),p=Or.parseExtensionString(m),v=[new Ue((l[0]+l[1])/2,r),new Ue(d,r)],T=new Se(m,null,0,v,Ve.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&T.putAllMetadata(p),T}decodeMiddle(r,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1],p=0;for(let v=0;v<2&&m<d;v++){let T=Xt.decodeDigit(r,f,m,Xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let R of f)m+=R;T>=10&&(p|=1<<1-v),v!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new te;if(parseInt(l.toString())%4!==p)throw new te;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[st.ISSUE_NUMBER,parseInt(r)]])}}class Gr{static decodeRow(r,o,l){let f=Xt.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new zn().decodeRow(r,o,f)}catch{return new Or().decodeRow(r,o,f)}}}Gr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class zt extends Xt{constructor(){super(),this.decodeRowStringBuffer="",zt.L_AND_G_PATTERNS=zt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let o=zt.L_PATTERNS[r-10],l=new Int32Array(o.length);for(let f=0;f<o.length;f++)l[f]=o[o.length-f-1];zt.L_AND_G_PATTERNS[r]=l}}decodeRow(r,o,l){let f=zt.findStartGuardPattern(o),d=l==null?null:l.get(Pe.NEED_RESULT_POINT_CALLBACK);if(d!=null){const $e=new Ue((f[0]+f[1])/2,r);d.foundPossibleResultPoint($e)}let m=this.decodeMiddle(o,f,this.decodeRowStringBuffer),p=m.rowOffset,v=m.resultString;if(d!=null){const $e=new Ue(p,r);d.foundPossibleResultPoint($e)}let T=this.decodeEnd(o,p);if(d!=null){const $e=new Ue((T[0]+T[1])/2,r);d.foundPossibleResultPoint($e)}let R=T[1],k=R+(R-T[0]);if(k>=o.getSize()||!o.isRange(R,k,!1))throw new te;let B=v.toString();if(B.length<8)throw new z;if(!zt.checkChecksum(B))throw new U;let Z=(f[1]+f[0])/2,oe=(T[1]+T[0])/2,ce=this.getBarcodeFormat(),Ce=[new Ue(Z,r),new Ue(oe,r)],Le=new Se(B,null,0,Ce,ce,new Date().getTime()),nt=0;try{let $e=Gr.decodeRow(r,o,T[1]);Le.putMetadata(st.UPC_EAN_EXTENSION,$e.getText()),Le.putAllMetadata($e.getResultMetadata()),Le.addResultPoints($e.getResultPoints()),nt=$e.getText().length}catch{}let it=l==null?null:l.get(Pe.ALLOWED_EAN_EXTENSIONS);if(it!=null){let $e=!1;for(let en in it)if(nt.toString()===en){$e=!0;break}if(!$e)throw new te}return Le}decodeEnd(r,o){return zt.findGuardPattern(r,o,!1,zt.START_END_PATTERN,new Int32Array(zt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return zt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return zt.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let f=o-1;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}}class Kn extends zt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1],p=0;for(let T=0;T<6&&m<d;T++){let R=zt.decodeDigit(r,f,m,zt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let k of f)m+=k;R>=10&&(p|=1<<5-T)}l=Kn.determineFirstDigit(l,p),m=zt.findGuardPattern(r,m,!0,zt.MIDDLE_PATTERN,new Int32Array(zt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&m<d;T++){let R=zt.decodeDigit(r,f,m,zt.L_PATTERNS);l+=String.fromCharCode(48+R);for(let k of f)m+=k}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Ve.EAN_13}static determineFirstDigit(r,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new te}}Kn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class qr extends zt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1];for(let v=0;v<4&&m<d;v++){let T=zt.decodeDigit(r,f,m,zt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let R of f)m+=R}m=zt.findGuardPattern(r,m,!0,zt.MIDDLE_PATTERN,new Int32Array(zt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&m<d;v++){let T=zt.decodeDigit(r,f,m,zt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let R of f)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Ve.EAN_8}}class pr extends zt{constructor(){super(...arguments),this.ean13Reader=new Kn}getBarcodeFormat(){return Ve.UPC_A}decode(r,o){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,o,l))}decodeMiddle(r,o,l){return this.ean13Reader.decodeMiddle(r,o,l)}maybeReturnResult(r){let o=r.getText();if(o.charAt(0)==="0"){let l=new Se(o.substring(1),null,null,r.getResultPoints(),Ve.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new te}reset(){this.ean13Reader.reset()}}class Ln extends zt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,o,l){const f=this.decodeMiddleCounters.map(T=>T);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const d=r.getSize();let m=o[1],p=0;for(let T=0;T<6&&m<d;T++){const R=Ln.decodeDigit(r,f,m,Ln.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let k of f)m+=k;R>=10&&(p|=1<<5-T)}let v=Ln.determineNumSysAndCheckDigit(l,p);return{rowOffset:m,resultString:v}}decodeEnd(r,o){return Ln.findGuardPatternWithoutCounters(r,o,!0,Ln.MIDDLE_END_PATTERN)}checkChecksum(r){return zt.checkChecksum(Ln.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,o){for(let l=0;l<=1;l++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][f]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+f);return d+r+m}throw te.getNotFoundInstance()}getBarcodeFormat(){return Ve.UPC_E}static convertUPCEtoUPCA(r){const o=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new W;l.append(r.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(f),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(f);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Ln.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ln.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Tr extends Jt{constructor(r){super();let o=r==null?null:r.get(Pe.POSSIBLE_FORMATS),l=[];s(o)?(l.push(new Kn),l.push(new pr),l.push(new qr),l.push(new Ln)):(o.indexOf(Ve.EAN_13)>-1&&l.push(new Kn),o.indexOf(Ve.UPC_A)>-1&&l.push(new pr),o.indexOf(Ve.EAN_8)>-1&&l.push(new qr),o.indexOf(Ve.UPC_E)>-1&&l.push(new Ln)),this.readers=l}decodeRow(r,o,l){for(let f of this.readers)try{const d=f.decodeRow(r,o,l),m=d.getBarcodeFormat()===Ve.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(Pe.POSSIBLE_FORMATS),v=p==null||p.includes(Ve.UPC_A);if(m&&v){const T=d.getRawBytes(),R=new Se(d.getText().substring(1),T,T?T.length:null,d.getResultPoints(),Ve.UPC_A);return R.putAllMetadata(d.getResultMetadata()),R}return d}catch{}throw new te}reset(){for(let r of this.readers)r.reset()}}class Hn extends Jt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,o){for(let l=0;l<o.length;l++)if(Jt.patternMatchVariance(r,o[l],Hn.MAX_INDIVIDUAL_VARIANCE)<Hn.MAX_AVG_VARIANCE)return l;throw new te}static count(r){return Be.sum(new Int32Array(r))}static increment(r,o){let l=0,f=o[0];for(let d=1;d<r.length;d++)o[d]>f&&(f=o[d],l=d);r[l]++}static decrement(r,o){let l=0,f=o[0];for(let d=1;d<r.length;d++)o[d]<f&&(f=o[d],l=d);r[l]--}static isFinderPattern(r){let o=r[0]+r[1],l=o+r[2]+r[3],f=o/l;if(f>=Hn.MIN_FINDER_PATTERN_RATIO&&f<=Hn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let p of r)p>m&&(m=p),p<d&&(d=p);return m<10*d}return!1}}Hn.MAX_AVG_VARIANCE=.2,Hn.MAX_INDIVIDUAL_VARIANCE=.45,Hn.MIN_FINDER_PATTERN_RATIO=9.5/12,Hn.MAX_FINDER_PATTERN_RATIO=12.5/14;class yr{constructor(r,o){this.value=r,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof yr))return!1;const o=r;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class bi{constructor(r,o,l,f,d){this.value=r,this.startEnd=o,this.value=r,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Ue(l,d)),this.resultPoints.push(new Ue(f,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof bi))return!1;const o=r;return this.value===o.value}hashCode(){return this.value}}class an{constructor(){}static getRSSvalue(r,o,l){let f=0;for(let v of r)f+=v;let d=0,m=0,p=r.length;for(let v=0;v<p-1;v++){let T;for(T=1,m|=1<<v;T<r[v];T++,m&=~(1<<v)){let R=an.combins(f-T-1,p-v-2);if(l&&m===0&&f-T-(p-v-1)>=p-v-1&&(R-=an.combins(f-T-(p-v),p-v-2)),p-v-1>1){let k=0;for(let B=f-T-(p-v-2);B>o;B--)k+=an.combins(f-T-B-1,p-v-3);R-=k*(p-1-v)}else f-T>o&&R--;d+=R}f-=T}return d}static combins(r,o){let l,f;r-o>o?(f=o,l=r-o):(f=r-o,l=o);let d=1,m=1;for(let p=r;p>l;p--)d*=p,m<=f&&(d/=m,m++);for(;m<=f;)d/=m,m++;return d}}class Fs{static buildBitArray(r){let o=r.length*2-1;r[r.length-1].getRightChar()==null&&(o-=1);let l=12*o,f=new fe(l),d=0,p=r[0].getRightChar().getValue();for(let v=11;v>=0;--v)p&1<<v&&f.set(d),d++;for(let v=1;v<r.length;++v){let T=r[v],R=T.getLeftChar().getValue();for(let k=11;k>=0;--k)R&1<<k&&f.set(d),d++;if(T.getRightChar()!=null){let k=T.getRightChar().getValue();for(let B=11;B>=0;--B)k&1<<B&&f.set(d),d++}}return f}}class hr{constructor(r,o){o?this.decodedInformation=null:(this.finished=r,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class xr{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class tr extends xr{constructor(r,o){super(r),this.value=o}getValue(){return this.value}isFNC1(){return this.value===tr.FNC1}}tr.FNC1="$";class ci extends xr{constructor(r,o,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Zn extends xr{constructor(r,o,l){if(super(r),o<0||o>10||l<0||l>10)throw new z;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Zn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Zn.FNC1}isAnyFNC1(){return this.firstDigit===Zn.FNC1||this.secondDigit===Zn.FNC1}}Zn.FNC1=10;class lt{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new te;let o=r.substring(0,2);for(let d of lt.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===lt.VARIABLE_LENGTH?lt.processVariableAI(2,d[2],r):lt.processFixedAI(2,d[1],r);if(r.length<3)throw new te;let l=r.substring(0,3);for(let d of lt.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===lt.VARIABLE_LENGTH?lt.processVariableAI(3,d[2],r):lt.processFixedAI(3,d[1],r);for(let d of lt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===lt.VARIABLE_LENGTH?lt.processVariableAI(4,d[2],r):lt.processFixedAI(4,d[1],r);if(r.length<4)throw new te;let f=r.substring(0,4);for(let d of lt.FOUR_DIGIT_DATA_LENGTH)if(d[0]===f)return d[1]===lt.VARIABLE_LENGTH?lt.processVariableAI(4,d[2],r):lt.processFixedAI(4,d[1],r);throw new te}static processFixedAI(r,o,l){if(l.length<r)throw new te;let f=l.substring(0,r);if(l.length<r+o)throw new te;let d=l.substring(r,r+o),m=l.substring(r+o),p="("+f+")"+d,v=lt.parseFieldsInGeneralPurpose(m);return v==null?p:p+v}static processVariableAI(r,o,l){let f=l.substring(0,r),d;l.length<r+o?d=l.length:d=r+o;let m=l.substring(r,d),p=l.substring(d),v="("+f+")"+m,T=lt.parseFieldsInGeneralPurpose(p);return T==null?v:v+T}}lt.VARIABLE_LENGTH=[],lt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",lt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",lt.VARIABLE_LENGTH,20],["22",lt.VARIABLE_LENGTH,29],["30",lt.VARIABLE_LENGTH,8],["37",lt.VARIABLE_LENGTH,8],["90",lt.VARIABLE_LENGTH,30],["91",lt.VARIABLE_LENGTH,30],["92",lt.VARIABLE_LENGTH,30],["93",lt.VARIABLE_LENGTH,30],["94",lt.VARIABLE_LENGTH,30],["95",lt.VARIABLE_LENGTH,30],["96",lt.VARIABLE_LENGTH,30],["97",lt.VARIABLE_LENGTH,3],["98",lt.VARIABLE_LENGTH,30],["99",lt.VARIABLE_LENGTH,30]],lt.THREE_DIGIT_DATA_LENGTH=[["240",lt.VARIABLE_LENGTH,30],["241",lt.VARIABLE_LENGTH,30],["242",lt.VARIABLE_LENGTH,6],["250",lt.VARIABLE_LENGTH,30],["251",lt.VARIABLE_LENGTH,30],["253",lt.VARIABLE_LENGTH,17],["254",lt.VARIABLE_LENGTH,20],["400",lt.VARIABLE_LENGTH,30],["401",lt.VARIABLE_LENGTH,30],["402",17],["403",lt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",lt.VARIABLE_LENGTH,20],["421",lt.VARIABLE_LENGTH,15],["422",3],["423",lt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],lt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",lt.VARIABLE_LENGTH,15],["391",lt.VARIABLE_LENGTH,18],["392",lt.VARIABLE_LENGTH,15],["393",lt.VARIABLE_LENGTH,18],["703",lt.VARIABLE_LENGTH,30]],lt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",lt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",lt.VARIABLE_LENGTH,20],["8003",lt.VARIABLE_LENGTH,30],["8004",lt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",lt.VARIABLE_LENGTH,30],["8008",lt.VARIABLE_LENGTH,12],["8018",18],["8020",lt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",lt.VARIABLE_LENGTH,70],["8200",lt.VARIABLE_LENGTH,70]];class Cn{constructor(r){this.buffer=new W,this.information=r}decodeAllCodes(r,o){let l=o,f=null;do{let d=this.decodeGeneralPurposeField(l,f),m=lt.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&r.append(m),d.isRemaining()?f=""+d.getRemainingValue():f=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let o=r;o<r+3;++o)if(this.information.get(o))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Zn(this.information.getSize(),Zn.FNC1,Zn.FNC1):new Zn(this.information.getSize(),d-1,Zn.FNC1)}let o=this.extractNumericValueFromBitArray(r,7),l=(o-8)/11,f=(o-8)%11;return new Zn(r+7,l,f)}extractNumericValueFromBitArray(r,o){return Cn.extractNumericValueFromBitArray(this.information,r,o)}static extractNumericValueFromBitArray(r,o,l){let f=0;for(let d=0;d<l;++d)r.get(o+d)&&(f|=1<<l-d-1);return f}decodeGeneralPurposeField(r,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ci(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ci(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),r=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),r=o.isFinished()):(o=this.parseNumericBlock(),r=o.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let o;return r.isSecondDigitFNC1()?o=new ci(this.current.getPosition(),this.buffer.toString()):o=new ci(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new hr(!0,o)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let o=new ci(this.current.getPosition(),this.buffer.toString());return new hr(!0,o)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new hr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new ci(this.current.getPosition(),this.buffer.toString());return new hr(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new hr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new ci(this.current.getPosition(),this.buffer.toString());return new hr(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new hr(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(r,8);return f>=232&&f<253}decodeIsoIec646(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new tr(r+5,tr.FNC1);if(o>=5&&o<15)return new tr(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new tr(r+7,""+(l+1));if(l>=90&&l<116)return new tr(r+7,""+(l+7));let f=this.extractNumericValueFromBitArray(r,8),d;switch(f){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new z}return new tr(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new tr(r+5,tr.FNC1);if(o>=5&&o<15)return new tr(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new tr(r+6,""+(l+33));let f;switch(l){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new le("Decoding invalid alphanumeric value: "+l)}return new tr(r+6,f)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<5&&o+r<this.information.getSize();++o)if(o===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+o))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let o=r;o<r+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<4&&o+r<this.information.getSize();++o)if(this.information.get(r+o))return!1;return!0}}class jn{constructor(r){this.information=r,this.generalDecoder=new Cn(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Mn extends jn{constructor(r){super(r)}encodeCompressedGtin(r,o){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,o,l)}encodeCompressedGtinWithoutAI(r,o,l){for(let f=0;f<4;++f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}Mn.appendCheckDigit(r,l)}static appendCheckDigit(r,o){let l=0;for(let f=0;f<13;f++){let d=r.charAt(f+o).charCodeAt(0)-48;l+=f&1?d:3*d}l=10-l%10,l===10&&(l=0),r.append(l)}}Mn.GTIN_SIZE=40;class Sr extends Mn{constructor(r){super(r)}parseInformation(){let r=new W;r.append("(01)");let o=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Sr.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,Sr.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(r,Sr.HEADER_SIZE+44)}}Sr.HEADER_SIZE=4;class ri extends jn{constructor(r){super(r)}parseInformation(){let r=new W;return this.getGeneralDecoder().decodeAllCodes(r,ri.HEADER_SIZE)}}ri.HEADER_SIZE=5;class Ir extends Mn{constructor(r){super(r)}encodeCompressedWeight(r,o,l){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(r,f);let d=this.checkWeight(f),m=1e5;for(let p=0;p<5;++p)d/m===0&&r.append("0"),m/=10;r.append(d)}}class kr extends Ir{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=kr.HEADER_SIZE+Ir.GTIN_SIZE+kr.WEIGHT_SIZE)throw new te;let r=new W;return this.encodeCompressedGtin(r,kr.HEADER_SIZE),this.encodeCompressedWeight(r,kr.HEADER_SIZE+Ir.GTIN_SIZE,kr.WEIGHT_SIZE),r.toString()}}kr.HEADER_SIZE=5,kr.WEIGHT_SIZE=15;class Yr extends kr{constructor(r){super(r)}addWeightCode(r,o){r.append("(3103)")}checkWeight(r){return r}}class us extends kr{constructor(r){super(r)}addWeightCode(r,o){o<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class K extends Mn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<K.HEADER_SIZE+Mn.GTIN_SIZE)throw new te;let r=new W;this.encodeCompressedGtin(r,K.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(K.HEADER_SIZE+Mn.GTIN_SIZE,K.LAST_DIGIT_SIZE);r.append("(392"),r.append(o),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(K.HEADER_SIZE+Mn.GTIN_SIZE+K.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}K.HEADER_SIZE=8,K.LAST_DIGIT_SIZE=2;class xe extends Mn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<xe.HEADER_SIZE+Mn.GTIN_SIZE)throw new te;let r=new W;this.encodeCompressedGtin(r,xe.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(xe.HEADER_SIZE+Mn.GTIN_SIZE,xe.LAST_DIGIT_SIZE);r.append("(393"),r.append(o),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(xe.HEADER_SIZE+Mn.GTIN_SIZE+xe.LAST_DIGIT_SIZE,xe.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let f=this.getGeneralDecoder().decodeGeneralPurposeField(xe.HEADER_SIZE+Mn.GTIN_SIZE+xe.LAST_DIGIT_SIZE+xe.FIRST_THREE_DIGITS_SIZE,null);return r.append(f.getNewString()),r.toString()}}xe.HEADER_SIZE=8,xe.LAST_DIGIT_SIZE=2,xe.FIRST_THREE_DIGITS_SIZE=10;class V extends Ir{constructor(r,o,l){super(r),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=V.HEADER_SIZE+V.GTIN_SIZE+V.WEIGHT_SIZE+V.DATE_SIZE)throw new te;let r=new W;return this.encodeCompressedGtin(r,V.HEADER_SIZE),this.encodeCompressedWeight(r,V.HEADER_SIZE+V.GTIN_SIZE,V.WEIGHT_SIZE),this.encodeCompressedDate(r,V.HEADER_SIZE+V.GTIN_SIZE+V.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,V.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let f=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),d/10==0&&r.append("0"),r.append(d),f/10==0&&r.append("0"),r.append(f)}addWeightCode(r,o){r.append("("),r.append(this.firstAIdigits),r.append(o/1e5),r.append(")")}checkWeight(r){return r%1e5}}V.HEADER_SIZE=8,V.WEIGHT_SIZE=20,V.DATE_SIZE=16;function ae(O){try{if(O.get(1))return new Sr(O);if(!O.get(2))return new ri(O);switch(Cn.extractNumericValueFromBitArray(O,1,4)){case 4:return new Yr(O);case 5:return new us(O)}switch(Cn.extractNumericValueFromBitArray(O,1,5)){case 12:return new K(O);case 13:return new xe(O)}switch(Cn.extractNumericValueFromBitArray(O,1,7)){case 56:return new V(O,"310","11");case 57:return new V(O,"320","11");case 58:return new V(O,"310","13");case 59:return new V(O,"320","13");case 60:return new V(O,"310","15");case 61:return new V(O,"320","15");case 62:return new V(O,"310","17");case 63:return new V(O,"320","17")}}catch(r){throw console.log(r),new le("unknown decoder: "+O)}}class je{constructor(r,o,l,f){this.leftchar=r,this.rightchar=o,this.finderpattern=l,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,o){return r instanceof je?je.equalsOrNull(r.leftchar,o.leftchar)&&je.equalsOrNull(r.rightchar,o.rightchar)&&je.equalsOrNull(r.finderpattern,o.finderpattern):!1}static equalsOrNull(r,o){return r===null?o===null:je.equals(r,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class tt{constructor(r,o,l){this.pairs=r,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,o){return r instanceof tt?this.checkEqualitity(r,o)&&r.wasReversed===o.wasReversed:!1}checkEqualitity(r,o){if(!r||!o)return;let l;return r.forEach((f,d)=>{o.forEach(m=>{f.getLeftChar().getValue()===m.getLeftChar().getValue()&&f.getRightChar().getValue()===m.getRightChar().getValue()&&f.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class he extends Hn{constructor(r){super(...arguments),this.pairs=new Array(he.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,o,l){this.pairs.length=0,this.startFromEven=!1;try{return he.constructResult(this.decodeRow2pairs(r,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,he.constructResult(this.decodeRow2pairs(r,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,r))}catch(d){if(d instanceof te){if(!this.pairs.length)throw new te;l=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(r,!1),f){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new te}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),o}checkRows(r,o){for(let l=o;l<this.rows.length;l++){let f=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(f.getPairs()),!he.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(f);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new te}static isValidSequence(r){for(let o of he.FINDER_PATTERN_SEQUENCES){if(r.length>o.length)continue;let l=!0;for(let f=0;f<r.length;f++)if(r[f].getFinderPattern().getValue()!=o[f]){l=!1;break}if(l)return!0}return!1}storeRow(r,o){let l=0,f=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){d=m.isEquivalent(this.pairs);break}f=m.isEquivalent(this.pairs),l++}d||f||he.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new tt(this.pairs,r,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,o){for(let l of o)if(l.getPairs().length!==r.length){for(let f of l.getPairs())for(let d of r)if(je.equals(f,d))break}}static isPartialRow(r,o){for(let l of o){let f=!0;for(let d of r){let m=!1;for(let p of l.getPairs())if(d.equals(p)){m=!0;break}if(!m){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(r){let o=Fs.buildBitArray(r),f=ae(o).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],m[0],m[1]];return new Se(f,null,null,p,Ve.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),o=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let f=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let v=this.pairs.get(p);f+=v.getLeftChar().getChecksumPortion(),d++;let T=v.getRightChar();T!=null&&(f+=T.getChecksumPortion(),d++)}return f%=211,211*(d-4)+f==o.getValue()}static getNextSecondBar(r,o){let l;return r.get(o)?(l=r.getNextUnset(o),l=r.getNextSet(l)):(l=r.getNextSet(o),l=r.getNextUnset(l)),l}retrieveNextPair(r,o,l){let f=o.length%2==0;this.startFromEven&&(f=!f);let d,m=!0,p=-1;do this.findNextPair(r,o,p),d=this.parseFoundFinderPattern(r,l,f),d==null?p=he.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let v=this.decodeDataCharacter(r,d,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new te;let T;try{T=this.decodeDataCharacter(r,d,f,!1)}catch(R){T=null,this.verbose&&console.log(R)}return new je(v,T,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,o,l){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let p=o.length%2!=0;this.startFromEven&&(p=!p);let v=!1;for(;m<d&&(v=!r.get(m),!!v);)m++;let T=0,R=m;for(let k=m;k<d;k++)if(r.get(k)!=v)f[T]++;else{if(T==3){if(p&&he.reverseCounters(f),he.isFinderPattern(f)){this.startEnd[0]=R,this.startEnd[1]=k;return}p&&he.reverseCounters(f),R+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,T--}else T++;f[T]=1,v=!v}throw new te}static reverseCounters(r){let o=r.length;for(let l=0;l<o/2;++l){let f=r[l];r[l]=r[o-l-1],r[o-l-1]=f}}parseFoundFinderPattern(r,o,l){let f,d,m;if(l){let T=this.startEnd[0]-1;for(;T>=0&&!r.get(T);)T--;T++,f=this.startEnd[0]-T,d=T,m=this.startEnd[1]}else d=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),f=m-this.startEnd[1];let p=this.getDecodeFinderCounters();re.arraycopy(p,0,p,1,p.length-1),p[0]=f;let v;try{v=this.parseFinderValue(p,he.FINDER_PATTERNS)}catch{return null}return new bi(v,[d,m],d,m,o)}decodeDataCharacter(r,o,l,f){let d=this.getDataCharacterCounters();for(let Pn=0;Pn<d.length;Pn++)d[Pn]=0;if(f)he.recordPatternInReverse(r,o.getStartEnd()[0],d);else{he.recordPattern(r,o.getStartEnd()[1],d);for(let Pn=0,Kr=d.length-1;Pn<Kr;Pn++,Kr--){let ki=d[Pn];d[Pn]=d[Kr],d[Kr]=ki}}let m=17,p=Be.sum(new Int32Array(d))/m,v=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(p-v)/v>.3)throw new te;let T=this.getOddCounts(),R=this.getEvenCounts(),k=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Pn=0;Pn<d.length;Pn++){let Kr=1*d[Pn]/p,ki=Kr+.5;if(ki<1){if(Kr<.3)throw new te;ki=1}else if(ki>8){if(Kr>8.7)throw new te;ki=8}let fa=Pn/2;Pn&1?(R[fa]=ki,B[fa]=Kr-ki):(T[fa]=ki,k[fa]=Kr-ki)}this.adjustOddEvenCounts(m);let Z=4*o.getValue()+(l?0:2)+(f?0:1)-1,oe=0,ce=0;for(let Pn=T.length-1;Pn>=0;Pn--){if(he.isNotA1left(o,l,f)){let Kr=he.WEIGHTS[Z][2*Pn];ce+=T[Pn]*Kr}oe+=T[Pn]}let Ce=0;for(let Pn=R.length-1;Pn>=0;Pn--)if(he.isNotA1left(o,l,f)){let Kr=he.WEIGHTS[Z][2*Pn+1];Ce+=R[Pn]*Kr}let Le=ce+Ce;if(oe&1||oe>13||oe<4)throw new te;let nt=(13-oe)/2,it=he.SYMBOL_WIDEST[nt],$e=9-it,en=an.getRSSvalue(T,it,!0),Lt=an.getRSSvalue(R,$e,!1),hi=he.EVEN_TOTAL_SUBSET[nt],Yi=he.GSUM[nt],fi=en*hi+Lt+Yi;return new yr(fi,Le)}static isNotA1left(r,o,l){return!(r.getValue()==0&&o&&l)}adjustOddEvenCounts(r){let o=Be.sum(new Int32Array(this.getOddCounts())),l=Be.sum(new Int32Array(this.getEvenCounts())),f=!1,d=!1;o>13?d=!0:o<4&&(f=!0);let m=!1,p=!1;l>13?p=!0:l<4&&(m=!0);let v=o+l-r,T=(o&1)==1,R=(l&1)==0;if(v==1)if(T){if(R)throw new te;d=!0}else{if(!R)throw new te;p=!0}else if(v==-1)if(T){if(R)throw new te;f=!0}else{if(!R)throw new te;m=!0}else if(v==0){if(T){if(!R)throw new te;o<l?(f=!0,p=!0):(d=!0,m=!0)}else if(R)throw new te}else throw new te;if(f){if(d)throw new te;he.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&he.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new te;he.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&he.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}he.SYMBOL_WIDEST=[7,5,4,3,1],he.EVEN_TOTAL_SUBSET=[4,20,52,104,204],he.GSUM=[0,348,1388,2948,3988],he.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],he.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],he.FINDER_PAT_A=0,he.FINDER_PAT_B=1,he.FINDER_PAT_C=2,he.FINDER_PAT_D=3,he.FINDER_PAT_E=4,he.FINDER_PAT_F=5,he.FINDER_PATTERN_SEQUENCES=[[he.FINDER_PAT_A,he.FINDER_PAT_A],[he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B],[he.FINDER_PAT_A,he.FINDER_PAT_C,he.FINDER_PAT_B,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_C],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F]],he.MAX_PAIRS=11;class ut extends yr{constructor(r,o,l){super(r,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class bt extends Hn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,o,l){const f=this.decodePair(o,!1,r,l);bt.addOrTally(this.possibleLeftPairs,f),o.reverse();let d=this.decodePair(o,!0,r,l);bt.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&bt.checkChecksum(m,p))return bt.constructResult(m,p)}throw new te}static addOrTally(r,o){if(o==null)return;let l=!1;for(let f of r)if(f.getValue()===o.getValue()){f.incrementCount(),l=!0;break}l||r.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,o){let l=4537077*r.getValue()+o.getValue(),f=new String(l).toString(),d=new W;for(let T=13-f.length;T>0;T--)d.append("0");d.append(f);let m=0;for(let T=0;T<13;T++){let R=d.charAt(T).charCodeAt(0)-48;m+=T&1?R:3*R}m=10-m%10,m===10&&(m=0),d.append(m.toString());let p=r.getFinderPattern().getResultPoints(),v=o.getFinderPattern().getResultPoints();return new Se(d.toString(),null,0,[p[0],p[1],v[0],v[1]],Ve.RSS_14,new Date().getTime())}static checkChecksum(r,o){let l=(r.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*r.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,l===f}decodePair(r,o,l,f){try{let d=this.findFinderPattern(r,o),m=this.parseFoundFinderPattern(r,l,o,d),p=f==null?null:f.get(Pe.NEED_RESULT_POINT_CALLBACK);if(p!=null){let R=(d[0]+d[1])/2;o&&(R=r.getSize()-1-R),p.foundPossibleResultPoint(new Ue(R,l))}let v=this.decodeDataCharacter(r,m,!0),T=this.decodeDataCharacter(r,m,!1);return new ut(1597*v.getValue()+T.getValue(),v.getChecksumPortion()+4*T.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,o,l){let f=this.getDataCharacterCounters();for(let Ce=0;Ce<f.length;Ce++)f[Ce]=0;if(l)Jt.recordPatternInReverse(r,o.getStartEnd()[0],f);else{Jt.recordPattern(r,o.getStartEnd()[1]+1,f);for(let Ce=0,Le=f.length-1;Ce<Le;Ce++,Le--){let nt=f[Ce];f[Ce]=f[Le],f[Le]=nt}}let d=l?16:15,m=Be.sum(new Int32Array(f))/d,p=this.getOddCounts(),v=this.getEvenCounts(),T=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let Ce=0;Ce<f.length;Ce++){let Le=f[Ce]/m,nt=Math.floor(Le+.5);nt<1?nt=1:nt>8&&(nt=8);let it=Math.floor(Ce/2);Ce&1?(v[it]=nt,R[it]=Le-nt):(p[it]=nt,T[it]=Le-nt)}this.adjustOddEvenCounts(l,d);let k=0,B=0;for(let Ce=p.length-1;Ce>=0;Ce--)B*=9,B+=p[Ce],k+=p[Ce];let Z=0,oe=0;for(let Ce=v.length-1;Ce>=0;Ce--)Z*=9,Z+=v[Ce],oe+=v[Ce];let ce=B+3*Z;if(l){if(k&1||k>12||k<4)throw new te;let Ce=(12-k)/2,Le=bt.OUTSIDE_ODD_WIDEST[Ce],nt=9-Le,it=an.getRSSvalue(p,Le,!1),$e=an.getRSSvalue(v,nt,!0),en=bt.OUTSIDE_EVEN_TOTAL_SUBSET[Ce],Lt=bt.OUTSIDE_GSUM[Ce];return new yr(it*en+$e+Lt,ce)}else{if(oe&1||oe>10||oe<4)throw new te;let Ce=(10-oe)/2,Le=bt.INSIDE_ODD_WIDEST[Ce],nt=9-Le,it=an.getRSSvalue(p,Le,!0),$e=an.getRSSvalue(v,nt,!1),en=bt.INSIDE_ODD_TOTAL_SUBSET[Ce],Lt=bt.INSIDE_GSUM[Ce];return new yr($e*en+it+Lt,ce)}}findFinderPattern(r,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let f=r.getSize(),d=!1,m=0;for(;m<f&&(d=!r.get(m),o!==d);)m++;let p=0,v=m;for(let T=m;T<f;T++)if(r.get(T)!==d)l[p]++;else{if(p===3){if(Hn.isFinderPattern(l))return[v,T];v+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new te}parseFoundFinderPattern(r,o,l,f){let d=r.get(f[0]),m=f[0]-1;for(;m>=0&&d!==r.get(m);)m--;m++;const p=f[0]-m,v=this.getDecodeFinderCounters(),T=new Int32Array(v.length);re.arraycopy(v,0,T,1,v.length-1),T[0]=p;const R=this.parseFinderValue(T,bt.FINDER_PATTERNS);let k=m,B=f[1];return l&&(k=r.getSize()-1-k,B=r.getSize()-1-B),new bi(R,[m,f[1]],k,B,o)}adjustOddEvenCounts(r,o){let l=Be.sum(new Int32Array(this.getOddCounts())),f=Be.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,p=!1,v=!1;r?(l>12?m=!0:l<4&&(d=!0),f>12?v=!0:f<4&&(p=!0)):(l>11?m=!0:l<5&&(d=!0),f>10?v=!0:f<4&&(p=!0));let T=l+f-o,R=(l&1)===(r?1:0),k=(f&1)===1;if(T===1)if(R){if(k)throw new te;m=!0}else{if(!k)throw new te;v=!0}else if(T===-1)if(R){if(k)throw new te;d=!0}else{if(!k)throw new te;p=!0}else if(T===0){if(R){if(!k)throw new te;l<f?(d=!0,v=!0):(m=!0,p=!0)}else if(k)throw new te}else throw new te;if(d){if(m)throw new te;Hn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Hn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(v)throw new te;Hn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&Hn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],bt.OUTSIDE_GSUM=[0,161,961,2015,2715],bt.INSIDE_GSUM=[0,336,1036,1516],bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],bt.INSIDE_ODD_WIDEST=[2,4,6,8],bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Bt extends Jt{constructor(r,o){super(),this.readers=[],this.verbose=o===!0;const l=r?r.get(Pe.POSSIBLE_FORMATS):null,f=r&&r.get(Pe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ve.EAN_13)||l.includes(Ve.UPC_A)||l.includes(Ve.EAN_8)||l.includes(Ve.UPC_E))&&this.readers.push(new Tr(r)),l.includes(Ve.CODE_39)&&this.readers.push(new xn(f)),l.includes(Ve.CODE_128)&&this.readers.push(new He),l.includes(Ve.ITF)&&this.readers.push(new Ut),l.includes(Ve.RSS_14)&&this.readers.push(new bt),l.includes(Ve.RSS_EXPANDED)&&this.readers.push(new he(this.verbose))):(this.readers.push(new Tr(r)),this.readers.push(new xn),this.readers.push(new Tr(r)),this.readers.push(new He),this.readers.push(new Ut),this.readers.push(new bt),this.readers.push(new he(this.verbose)))}decodeRow(r,o,l){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(r,o,l)}catch{}throw new te}reset(){this.readers.forEach(r=>r.reset())}}class nn extends Fe{constructor(r=500,o){super(new Bt(o),r,o)}}class jt{constructor(r,o,l){this.ecCodewords=r,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Nt{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ct{constructor(r,o,l,f,d,m){this.versionNumber=r,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=d,this.ecBlocks=m;let p=0;const v=m.getECCodewords(),T=m.getECBlocks();for(let R of T)p+=R.getCount()*(R.getDataCodewords()+v);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,o){if(r&1||o&1)throw new z;for(let l of Ct.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===o)return l;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new Ct(1,10,10,8,8,new jt(5,new Nt(1,3))),new Ct(2,12,12,10,10,new jt(7,new Nt(1,5))),new Ct(3,14,14,12,12,new jt(10,new Nt(1,8))),new Ct(4,16,16,14,14,new jt(12,new Nt(1,12))),new Ct(5,18,18,16,16,new jt(14,new Nt(1,18))),new Ct(6,20,20,18,18,new jt(18,new Nt(1,22))),new Ct(7,22,22,20,20,new jt(20,new Nt(1,30))),new Ct(8,24,24,22,22,new jt(24,new Nt(1,36))),new Ct(9,26,26,24,24,new jt(28,new Nt(1,44))),new Ct(10,32,32,14,14,new jt(36,new Nt(1,62))),new Ct(11,36,36,16,16,new jt(42,new Nt(1,86))),new Ct(12,40,40,18,18,new jt(48,new Nt(1,114))),new Ct(13,44,44,20,20,new jt(56,new Nt(1,144))),new Ct(14,48,48,22,22,new jt(68,new Nt(1,174))),new Ct(15,52,52,24,24,new jt(42,new Nt(2,102))),new Ct(16,64,64,14,14,new jt(56,new Nt(2,140))),new Ct(17,72,72,16,16,new jt(36,new Nt(4,92))),new Ct(18,80,80,18,18,new jt(48,new Nt(4,114))),new Ct(19,88,88,20,20,new jt(56,new Nt(4,144))),new Ct(20,96,96,22,22,new jt(68,new Nt(4,174))),new Ct(21,104,104,24,24,new jt(56,new Nt(6,136))),new Ct(22,120,120,18,18,new jt(68,new Nt(6,175))),new Ct(23,132,132,20,20,new jt(62,new Nt(8,163))),new Ct(24,144,144,22,22,new jt(62,new Nt(8,156),new Nt(2,155))),new Ct(25,8,18,6,16,new jt(7,new Nt(1,5))),new Ct(26,8,32,6,14,new jt(11,new Nt(1,10))),new Ct(27,12,26,10,24,new jt(14,new Nt(1,16))),new Ct(28,12,36,10,16,new jt(18,new Nt(1,22))),new Ct(29,16,36,14,16,new jt(24,new Nt(1,32))),new Ct(30,16,48,14,22,new jt(28,new Nt(1,49)))]}}Ct.VERSIONS=Ct.buildVersions();class Rn{constructor(r){const o=r.getHeight();if(o<8||o>144||o&1)throw new z;this.version=Rn.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new ve(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const o=r.getHeight(),l=r.getWidth();return Ct.getVersionForDimensions(o,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,f=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let p=!1,v=!1,T=!1,R=!1;do if(l===d&&f===0&&!p)r[o++]=this.readCorner1(d,m)&255,l-=2,f+=2,p=!0;else if(l===d-2&&f===0&&m&3&&!v)r[o++]=this.readCorner2(d,m)&255,l-=2,f+=2,v=!0;else if(l===d+4&&f===2&&!(m&7)&&!T)r[o++]=this.readCorner3(d,m)&255,l-=2,f+=2,T=!0;else if(l===d-2&&f===0&&(m&7)===4&&!R)r[o++]=this.readCorner4(d,m)&255,l-=2,f+=2,R=!0;else{do l<d&&f>=0&&!this.readMappingMatrix.get(f,l)&&(r[o++]=this.readUtah(l,f,d,m)&255),l-=2,f+=2;while(l>=0&&f<m);l+=1,f+=3;do l>=0&&f<m&&!this.readMappingMatrix.get(f,l)&&(r[o++]=this.readUtah(l,f,d,m)&255),l+=2,f-=2;while(l<d&&f>=0);l+=3,f+=1}while(l<d||f<m);if(o!==this.version.getTotalCodewords())throw new z;return r}readModule(r,o,l,f){return r<0&&(r+=l,o+=4-(l+4&7)),o<0&&(o+=f,r+=4-(f+4&7)),this.readMappingMatrix.set(o,r),this.mappingBitMatrix.get(o,r)}readUtah(r,o,l,f){let d=0;return this.readModule(r-2,o-2,l,f)&&(d|=1),d<<=1,this.readModule(r-2,o-1,l,f)&&(d|=1),d<<=1,this.readModule(r-1,o-2,l,f)&&(d|=1),d<<=1,this.readModule(r-1,o-1,l,f)&&(d|=1),d<<=1,this.readModule(r-1,o,l,f)&&(d|=1),d<<=1,this.readModule(r,o-2,l,f)&&(d|=1),d<<=1,this.readModule(r,o-1,l,f)&&(d|=1),d<<=1,this.readModule(r,o,l,f)&&(d|=1),d}readCorner1(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,1,r,o)&&(l|=1),l<<=1,this.readModule(r-1,2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}readCorner2(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-4,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner3(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-3,r,o)&&(l|=1),l<<=1,this.readModule(1,o-2,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner4(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}extractDataRegion(r){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==o)throw new N("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/f|0,p=l/d|0,v=m*f,T=p*d,R=new ve(T,v);for(let k=0;k<m;++k){const B=k*f;for(let Z=0;Z<p;++Z){const oe=Z*d;for(let ce=0;ce<f;++ce){const Ce=k*(f+2)+1+ce,Le=B+ce;for(let nt=0;nt<d;++nt){const it=Z*(d+2)+1+nt;if(r.get(it,Ce)){const $e=oe+nt;R.set($e,Le)}}}}}return R}}class ar{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o){const l=o.getECBlocks();let f=0;const d=l.getECBlocks();for(let ce of d)f+=ce.getCount();const m=new Array(f);let p=0;for(let ce of d)for(let Ce=0;Ce<ce.getCount();Ce++){const Le=ce.getDataCodewords(),nt=l.getECCodewords()+Le;m[p++]=new ar(Le,new Uint8Array(nt))}const T=m[0].codewords.length-l.getECCodewords(),R=T-1;let k=0;for(let ce=0;ce<R;ce++)for(let Ce=0;Ce<p;Ce++)m[Ce].codewords[ce]=r[k++];const B=o.getVersionNumber()===24,Z=B?8:p;for(let ce=0;ce<Z;ce++)m[ce].codewords[T-1]=r[k++];const oe=m[0].codewords.length;for(let ce=T;ce<oe;ce++)for(let Ce=0;Ce<p;Ce++){const Le=B?(Ce+8)%p:Ce,nt=B&&Le>7?ce-1:ce;m[Le].codewords[nt]=r[k++]}if(k!==r.length)throw new N;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class fr{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new N(""+r);let o=0,l=this.bitOffset,f=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,p=r<m?r:m,v=m-p,T=255>>8-p<<v;o=(d[f]&T)>>v,r-=p,l+=p,l===8&&(l=0,f++)}if(r>0){for(;r>=8;)o=o<<8|d[f]&255,f++,r-=8;if(r>0){const m=8-r,p=255>>m<<m;o=o<<r|(d[f]&p)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Wt;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(Wt||(Wt={}));class Ei{static decode(r){const o=new fr(r),l=new W,f=new W,d=new Array;let m=Wt.ASCII_ENCODE;do if(m===Wt.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,f);else{switch(m){case Wt.C40_ENCODE:this.decodeC40Segment(o,l);break;case Wt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Wt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Wt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Wt.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new z}m=Wt.ASCII_ENCODE}while(m!==Wt.PAD_ENCODE&&o.available()>0);return f.length()>0&&l.append(f.toString()),new vt(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,o,l){let f=!1;do{let d=r.readBits(8);if(d===0)throw new z;if(d<=128)return f&&(d+=128),o.append(String.fromCharCode(d-1)),Wt.ASCII_ENCODE;if(d===129)return Wt.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return Wt.C40_ENCODE;case 231:return Wt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Wt.ANSIX12_ENCODE;case 239:return Wt.TEXT_ENCODE;case 240:return Wt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new z;break}}while(r.available()>0);return Wt.ASCII_ENCODE}static decodeC40Segment(r,o){let l=!1;const f=[];let d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),f);for(let p=0;p<3;p++){const v=f[p];switch(d){case 0:if(v<3)d=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else throw new z;break;case 1:l?(o.append(String.fromCharCode(v+128)),l=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else switch(v){case 27:o.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:l?(o.append(String.fromCharCode(v+224)),l=!1):o.append(String.fromCharCode(v+96)),d=0;break;default:throw new z}}}while(r.available()>0)}static decodeTextSegment(r,o){let l=!1,f=[],d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),f);for(let p=0;p<3;p++){const v=f[p];switch(d){case 0:if(v<3)d=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else throw new z;break;case 1:l?(o.append(String.fromCharCode(v+128)),l=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else switch(v){case 27:o.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T),d=0}else throw new z;break;default:throw new z}}}while(r.available()>0)}static decodeAnsiX12Segment(r,o){const l=[];do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new z;break}}}while(r.available()>0)}static parseTwoBytes(r,o,l){let f=(r<<8)+o-1,d=Math.floor(f/1600);l[0]=d,f-=d*1600,d=Math.floor(f/40),l[1]=d,l[2]=f-d*40}static decodeEdifactSegment(r,o){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let f=r.readBits(6);if(f===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}f&32||(f|=64),o.append(String.fromCharCode(f))}}while(r.available()>0)}static decodeBase256Segment(r,o,l){let f=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),f++);let m;if(d===0?m=r.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(r.readBits(8),f++),m<0)throw new z;const p=new Uint8Array(m);for(let v=0;v<m;v++){if(r.available()<8)throw new z;p[v]=this.unrandomize255State(r.readBits(8),f++)}l.push(p);try{o.append(J.decode(p,ee.ISO88591))}catch(v){throw new le("Platform does not support required encoding: "+v.message)}}static unrandomize255State(r,o){const l=149*o%255+1,f=r-l;return f>=0?f:f+256}}Ei.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ei.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ei.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ei.TEXT_SHIFT2_SET_CHARS=Ei.C40_SHIFT2_SET_CHARS,Ei.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ha{constructor(){this.rsDecoder=new Ne(ft.DATA_MATRIX_FIELD_256)}decode(r){const o=new Rn(r),l=o.getVersion(),f=o.readCodewords(),d=ar.getDataBlocks(f,l);let m=0;for(let T of d)m+=T.getNumDataCodewords();const p=new Uint8Array(m),v=d.length;for(let T=0;T<v;T++){const R=d[T],k=R.getCodewords(),B=R.getNumDataCodewords();this.correctErrors(k,B);for(let Z=0;Z<B;Z++)p[Z*v+T]=k[Z]}return Ei.decode(p)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new U}for(let f=0;f<o;f++)r[f]=l[f]}}class Dn{constructor(r){this.image=r,this.rectangleDetector=new We(this.image)}detect(){const r=this.rectangleDetector.detect();let o=this.detectSolid1(r);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new te;o=this.shiftToModuleCenter(o);const l=o[0],f=o[1],d=o[2],m=o[3];let p=this.transitionsBetween(l,m)+1,v=this.transitionsBetween(d,m)+1;(p&1)===1&&(p+=1),(v&1)===1&&(v+=1),4*p<7*v&&4*v<7*p&&(p=v=Math.max(p,v));let T=Dn.sampleGrid(this.image,l,f,d,m,p,v);return new Mt(T,[l,f,d,m])}static shiftPoint(r,o,l){let f=(o.getX()-r.getX())/(l+1),d=(o.getY()-r.getY())/(l+1);return new Ue(r.getX()+f,r.getY()+d)}static moveAway(r,o,l){let f=r.getX(),d=r.getY();return f<o?f-=1:f+=1,d<l?d-=1:d+=1,new Ue(f,d)}detectSolid1(r){let o=r[0],l=r[1],f=r[3],d=r[2],m=this.transitionsBetween(o,l),p=this.transitionsBetween(l,f),v=this.transitionsBetween(f,d),T=this.transitionsBetween(d,o),R=m,k=[d,o,l,f];return R>p&&(R=p,k[0]=o,k[1]=l,k[2]=f,k[3]=d),R>v&&(R=v,k[0]=l,k[1]=f,k[2]=d,k[3]=o),R>T&&(k[0]=f,k[1]=d,k[2]=o,k[3]=l),k}detectSolid2(r){let o=r[0],l=r[1],f=r[2],d=r[3],m=this.transitionsBetween(o,d),p=Dn.shiftPoint(l,f,(m+1)*4),v=Dn.shiftPoint(f,l,(m+1)*4),T=this.transitionsBetween(p,o),R=this.transitionsBetween(v,d);return T<R?(r[0]=o,r[1]=l,r[2]=f,r[3]=d):(r[0]=l,r[1]=f,r[2]=d,r[3]=o),r}correctTopRight(r){let o=r[0],l=r[1],f=r[2],d=r[3],m=this.transitionsBetween(o,d),p=this.transitionsBetween(l,d),v=Dn.shiftPoint(o,l,(p+1)*4),T=Dn.shiftPoint(f,l,(m+1)*4);m=this.transitionsBetween(v,d),p=this.transitionsBetween(T,d);let R=new Ue(d.getX()+(f.getX()-l.getX())/(m+1),d.getY()+(f.getY()-l.getY())/(m+1)),k=new Ue(d.getX()+(o.getX()-l.getX())/(p+1),d.getY()+(o.getY()-l.getY())/(p+1));if(!this.isValid(R))return this.isValid(k)?k:null;if(!this.isValid(k))return R;let B=this.transitionsBetween(v,R)+this.transitionsBetween(T,R),Z=this.transitionsBetween(v,k)+this.transitionsBetween(T,k);return B>Z?R:k}shiftToModuleCenter(r){let o=r[0],l=r[1],f=r[2],d=r[3],m=this.transitionsBetween(o,d)+1,p=this.transitionsBetween(f,d)+1,v=Dn.shiftPoint(o,l,p*4),T=Dn.shiftPoint(f,l,m*4);m=this.transitionsBetween(v,d)+1,p=this.transitionsBetween(T,d)+1,(m&1)===1&&(m+=1),(p&1)===1&&(p+=1);let R=(o.getX()+l.getX()+f.getX()+d.getX())/4,k=(o.getY()+l.getY()+f.getY()+d.getY())/4;o=Dn.moveAway(o,R,k),l=Dn.moveAway(l,R,k),f=Dn.moveAway(f,R,k),d=Dn.moveAway(d,R,k);let B,Z;return v=Dn.shiftPoint(o,l,p*4),v=Dn.shiftPoint(v,d,m*4),B=Dn.shiftPoint(l,o,p*4),B=Dn.shiftPoint(B,f,m*4),T=Dn.shiftPoint(f,d,p*4),T=Dn.shiftPoint(T,l,m*4),Z=Dn.shiftPoint(d,f,p*4),Z=Dn.shiftPoint(Z,o,m*4),[v,B,T,Z]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,o,l,f,d,m,p){return It.getInstance().sampleGrid(r,m,p,.5,.5,m-.5,.5,m-.5,p-.5,.5,p-.5,o.getX(),o.getY(),d.getX(),d.getY(),f.getX(),f.getY(),l.getX(),l.getY())}transitionsBetween(r,o){let l=Math.trunc(r.getX()),f=Math.trunc(r.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),p=Math.abs(m-f)>Math.abs(d-l);if(p){let ce=l;l=f,f=ce,ce=d,d=m,m=ce}let v=Math.abs(d-l),T=Math.abs(m-f),R=-v/2,k=f<m?1:-1,B=l<d?1:-1,Z=0,oe=this.image.get(p?f:l,p?l:f);for(let ce=l,Ce=f;ce!==d;ce+=B){let Le=this.image.get(p?Ce:ce,p?ce:Ce);if(Le!==oe&&(Z++,oe=Le),R+=T,R>0){if(Ce===m)break;Ce+=k,R-=v}}return Z}}class vi{constructor(){this.decoder=new Ha}decode(r,o=null){let l,f;if(o!=null&&o.has(Pe.PURE_BARCODE)){const T=vi.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(T),f=vi.NO_POINTS}else{const T=new Dn(r.getBlackMatrix()).detect();l=this.decoder.decode(T.getBits()),f=T.getPoints()}const d=l.getRawBytes(),m=new Se(l.getText(),d,8*d.length,f,Ve.DATA_MATRIX,re.currentTimeMillis()),p=l.getByteSegments();p!=null&&m.putMetadata(st.BYTE_SEGMENTS,p);const v=l.getECLevel();return v!=null&&m.putMetadata(st.ERROR_CORRECTION_LEVEL,v),m}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o==null||l==null)throw new te;const f=this.moduleSize(o,r);let d=o[1];const m=l[1];let p=o[0];const T=(l[0]-p+1)/f,R=(m-d+1)/f;if(T<=0||R<=0)throw new te;const k=f/2;d+=k,p+=k;const B=new ve(T,R);for(let Z=0;Z<R;Z++){const oe=d+Z*f;for(let ce=0;ce<T;ce++)r.get(p+ce*f,oe)&&B.set(ce,Z)}return B}static moduleSize(r,o){const l=o.getWidth();let f=r[0];const d=r[1];for(;f<l&&o.get(f,d);)f++;if(f===l)throw new te;const m=f-r[0];if(m===0)throw new te;return m}}vi.NO_POINTS=[];class cn extends Fe{constructor(r=500){super(new vi,r)}}var Ht;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(Ht||(Ht={}));class Ot{constructor(r,o,l){this.value=r,this.stringValue=o,this.bits=l,Ot.FOR_BITS.set(l,this),Ot.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Ot.L;case"M":return Ot.M;case"Q":return Ot.Q;case"H":return Ot.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Ot))return!1;const o=r;return this.value===o.value}static forBits(r){if(r<0||r>=Ot.FOR_BITS.size)throw new N;return Ot.FOR_BITS.get(r)}}Ot.FOR_BITS=new Map,Ot.FOR_VALUE=new Map,Ot.L=new Ot(Ht.L,"L",1),Ot.M=new Ot(Ht.M,"M",0),Ot.Q=new Ot(Ht.Q,"Q",3),Ot.H=new Ot(Ht.H,"H",2);class vn{constructor(r){this.errorCorrectionLevel=Ot.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,o){return se.bitCount(r^o)}static decodeFormatInformation(r,o){const l=vn.doDecodeFormatInformation(r,o);return l!==null?l:vn.doDecodeFormatInformation(r^vn.FORMAT_INFO_MASK_QR,o^vn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,o){let l=Number.MAX_SAFE_INTEGER,f=0;for(const d of vn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===r||m===o)return new vn(d[1]);let p=vn.numBitsDiffering(r,m);p<l&&(f=d[1],l=p),r!==o&&(p=vn.numBitsDiffering(o,m),p<l&&(f=d[1],l=p))}return l<=3?new vn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof vn))return!1;const o=r;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}vn.FORMAT_INFO_MASK_QR=21522,vn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class be{constructor(r,...o){this.ecCodewordsPerBlock=r,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const o=this.ecBlocks;for(const l of o)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class q{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class rt{constructor(r,o,...l){this.versionNumber=r,this.alignmentPatternCenters=o,this.ecBlocks=l;let f=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const p of m)f+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new z;try{return this.getVersionForNumber((r-17)/4)}catch{throw new z}}static getVersionForNumber(r){if(r<1||r>40)throw new N;return rt.VERSIONS[r-1]}static decodeVersionInformation(r){let o=Number.MAX_SAFE_INTEGER,l=0;for(let f=0;f<rt.VERSION_DECODE_INFO.length;f++){const d=rt.VERSION_DECODE_INFO[f];if(d===r)return rt.getVersionForNumber(f+7);const m=vn.numBitsDiffering(r,d);m<o&&(l=f+7,o=m)}return o<=3?rt.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),o=new ve(r);o.setRegion(0,0,9,9),o.setRegion(r-8,0,8,9),o.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let f=0;f<l;f++){const d=this.alignmentPatternCenters[f]-2;for(let m=0;m<l;m++)f===0&&(m===0||m===l-1)||f===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,r-17),o.setRegion(9,6,r-17,1),this.versionNumber>6&&(o.setRegion(r-11,0,3,6),o.setRegion(0,r-11,6,3)),o}toString(){return""+this.versionNumber}}rt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),rt.VERSIONS=[new rt(1,new Int32Array(0),new be(7,new q(1,19)),new be(10,new q(1,16)),new be(13,new q(1,13)),new be(17,new q(1,9))),new rt(2,Int32Array.from([6,18]),new be(10,new q(1,34)),new be(16,new q(1,28)),new be(22,new q(1,22)),new be(28,new q(1,16))),new rt(3,Int32Array.from([6,22]),new be(15,new q(1,55)),new be(26,new q(1,44)),new be(18,new q(2,17)),new be(22,new q(2,13))),new rt(4,Int32Array.from([6,26]),new be(20,new q(1,80)),new be(18,new q(2,32)),new be(26,new q(2,24)),new be(16,new q(4,9))),new rt(5,Int32Array.from([6,30]),new be(26,new q(1,108)),new be(24,new q(2,43)),new be(18,new q(2,15),new q(2,16)),new be(22,new q(2,11),new q(2,12))),new rt(6,Int32Array.from([6,34]),new be(18,new q(2,68)),new be(16,new q(4,27)),new be(24,new q(4,19)),new be(28,new q(4,15))),new rt(7,Int32Array.from([6,22,38]),new be(20,new q(2,78)),new be(18,new q(4,31)),new be(18,new q(2,14),new q(4,15)),new be(26,new q(4,13),new q(1,14))),new rt(8,Int32Array.from([6,24,42]),new be(24,new q(2,97)),new be(22,new q(2,38),new q(2,39)),new be(22,new q(4,18),new q(2,19)),new be(26,new q(4,14),new q(2,15))),new rt(9,Int32Array.from([6,26,46]),new be(30,new q(2,116)),new be(22,new q(3,36),new q(2,37)),new be(20,new q(4,16),new q(4,17)),new be(24,new q(4,12),new q(4,13))),new rt(10,Int32Array.from([6,28,50]),new be(18,new q(2,68),new q(2,69)),new be(26,new q(4,43),new q(1,44)),new be(24,new q(6,19),new q(2,20)),new be(28,new q(6,15),new q(2,16))),new rt(11,Int32Array.from([6,30,54]),new be(20,new q(4,81)),new be(30,new q(1,50),new q(4,51)),new be(28,new q(4,22),new q(4,23)),new be(24,new q(3,12),new q(8,13))),new rt(12,Int32Array.from([6,32,58]),new be(24,new q(2,92),new q(2,93)),new be(22,new q(6,36),new q(2,37)),new be(26,new q(4,20),new q(6,21)),new be(28,new q(7,14),new q(4,15))),new rt(13,Int32Array.from([6,34,62]),new be(26,new q(4,107)),new be(22,new q(8,37),new q(1,38)),new be(24,new q(8,20),new q(4,21)),new be(22,new q(12,11),new q(4,12))),new rt(14,Int32Array.from([6,26,46,66]),new be(30,new q(3,115),new q(1,116)),new be(24,new q(4,40),new q(5,41)),new be(20,new q(11,16),new q(5,17)),new be(24,new q(11,12),new q(5,13))),new rt(15,Int32Array.from([6,26,48,70]),new be(22,new q(5,87),new q(1,88)),new be(24,new q(5,41),new q(5,42)),new be(30,new q(5,24),new q(7,25)),new be(24,new q(11,12),new q(7,13))),new rt(16,Int32Array.from([6,26,50,74]),new be(24,new q(5,98),new q(1,99)),new be(28,new q(7,45),new q(3,46)),new be(24,new q(15,19),new q(2,20)),new be(30,new q(3,15),new q(13,16))),new rt(17,Int32Array.from([6,30,54,78]),new be(28,new q(1,107),new q(5,108)),new be(28,new q(10,46),new q(1,47)),new be(28,new q(1,22),new q(15,23)),new be(28,new q(2,14),new q(17,15))),new rt(18,Int32Array.from([6,30,56,82]),new be(30,new q(5,120),new q(1,121)),new be(26,new q(9,43),new q(4,44)),new be(28,new q(17,22),new q(1,23)),new be(28,new q(2,14),new q(19,15))),new rt(19,Int32Array.from([6,30,58,86]),new be(28,new q(3,113),new q(4,114)),new be(26,new q(3,44),new q(11,45)),new be(26,new q(17,21),new q(4,22)),new be(26,new q(9,13),new q(16,14))),new rt(20,Int32Array.from([6,34,62,90]),new be(28,new q(3,107),new q(5,108)),new be(26,new q(3,41),new q(13,42)),new be(30,new q(15,24),new q(5,25)),new be(28,new q(15,15),new q(10,16))),new rt(21,Int32Array.from([6,28,50,72,94]),new be(28,new q(4,116),new q(4,117)),new be(26,new q(17,42)),new be(28,new q(17,22),new q(6,23)),new be(30,new q(19,16),new q(6,17))),new rt(22,Int32Array.from([6,26,50,74,98]),new be(28,new q(2,111),new q(7,112)),new be(28,new q(17,46)),new be(30,new q(7,24),new q(16,25)),new be(24,new q(34,13))),new rt(23,Int32Array.from([6,30,54,78,102]),new be(30,new q(4,121),new q(5,122)),new be(28,new q(4,47),new q(14,48)),new be(30,new q(11,24),new q(14,25)),new be(30,new q(16,15),new q(14,16))),new rt(24,Int32Array.from([6,28,54,80,106]),new be(30,new q(6,117),new q(4,118)),new be(28,new q(6,45),new q(14,46)),new be(30,new q(11,24),new q(16,25)),new be(30,new q(30,16),new q(2,17))),new rt(25,Int32Array.from([6,32,58,84,110]),new be(26,new q(8,106),new q(4,107)),new be(28,new q(8,47),new q(13,48)),new be(30,new q(7,24),new q(22,25)),new be(30,new q(22,15),new q(13,16))),new rt(26,Int32Array.from([6,30,58,86,114]),new be(28,new q(10,114),new q(2,115)),new be(28,new q(19,46),new q(4,47)),new be(28,new q(28,22),new q(6,23)),new be(30,new q(33,16),new q(4,17))),new rt(27,Int32Array.from([6,34,62,90,118]),new be(30,new q(8,122),new q(4,123)),new be(28,new q(22,45),new q(3,46)),new be(30,new q(8,23),new q(26,24)),new be(30,new q(12,15),new q(28,16))),new rt(28,Int32Array.from([6,26,50,74,98,122]),new be(30,new q(3,117),new q(10,118)),new be(28,new q(3,45),new q(23,46)),new be(30,new q(4,24),new q(31,25)),new be(30,new q(11,15),new q(31,16))),new rt(29,Int32Array.from([6,30,54,78,102,126]),new be(30,new q(7,116),new q(7,117)),new be(28,new q(21,45),new q(7,46)),new be(30,new q(1,23),new q(37,24)),new be(30,new q(19,15),new q(26,16))),new rt(30,Int32Array.from([6,26,52,78,104,130]),new be(30,new q(5,115),new q(10,116)),new be(28,new q(19,47),new q(10,48)),new be(30,new q(15,24),new q(25,25)),new be(30,new q(23,15),new q(25,16))),new rt(31,Int32Array.from([6,30,56,82,108,134]),new be(30,new q(13,115),new q(3,116)),new be(28,new q(2,46),new q(29,47)),new be(30,new q(42,24),new q(1,25)),new be(30,new q(23,15),new q(28,16))),new rt(32,Int32Array.from([6,34,60,86,112,138]),new be(30,new q(17,115)),new be(28,new q(10,46),new q(23,47)),new be(30,new q(10,24),new q(35,25)),new be(30,new q(19,15),new q(35,16))),new rt(33,Int32Array.from([6,30,58,86,114,142]),new be(30,new q(17,115),new q(1,116)),new be(28,new q(14,46),new q(21,47)),new be(30,new q(29,24),new q(19,25)),new be(30,new q(11,15),new q(46,16))),new rt(34,Int32Array.from([6,34,62,90,118,146]),new be(30,new q(13,115),new q(6,116)),new be(28,new q(14,46),new q(23,47)),new be(30,new q(44,24),new q(7,25)),new be(30,new q(59,16),new q(1,17))),new rt(35,Int32Array.from([6,30,54,78,102,126,150]),new be(30,new q(12,121),new q(7,122)),new be(28,new q(12,47),new q(26,48)),new be(30,new q(39,24),new q(14,25)),new be(30,new q(22,15),new q(41,16))),new rt(36,Int32Array.from([6,24,50,76,102,128,154]),new be(30,new q(6,121),new q(14,122)),new be(28,new q(6,47),new q(34,48)),new be(30,new q(46,24),new q(10,25)),new be(30,new q(2,15),new q(64,16))),new rt(37,Int32Array.from([6,28,54,80,106,132,158]),new be(30,new q(17,122),new q(4,123)),new be(28,new q(29,46),new q(14,47)),new be(30,new q(49,24),new q(10,25)),new be(30,new q(24,15),new q(46,16))),new rt(38,Int32Array.from([6,32,58,84,110,136,162]),new be(30,new q(4,122),new q(18,123)),new be(28,new q(13,46),new q(32,47)),new be(30,new q(48,24),new q(14,25)),new be(30,new q(42,15),new q(32,16))),new rt(39,Int32Array.from([6,26,54,82,110,138,166]),new be(30,new q(20,117),new q(4,118)),new be(28,new q(40,47),new q(7,48)),new be(30,new q(43,24),new q(22,25)),new be(30,new q(10,15),new q(67,16))),new rt(40,Int32Array.from([6,30,58,86,114,142,170]),new be(30,new q(19,118),new q(6,119)),new be(28,new q(18,47),new q(31,48)),new be(30,new q(34,24),new q(34,25)),new be(30,new q(20,15),new q(61,16)))];var mn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(mn||(mn={}));class Gn{constructor(r,o){this.value=r,this.isMasked=o}unmaskBitMatrix(r,o){for(let l=0;l<o;l++)for(let f=0;f<o;f++)this.isMasked(l,f)&&r.flip(f,l)}}Gn.values=new Map([[mn.DATA_MASK_000,new Gn(mn.DATA_MASK_000,(O,r)=>(O+r&1)===0)],[mn.DATA_MASK_001,new Gn(mn.DATA_MASK_001,(O,r)=>(O&1)===0)],[mn.DATA_MASK_010,new Gn(mn.DATA_MASK_010,(O,r)=>r%3===0)],[mn.DATA_MASK_011,new Gn(mn.DATA_MASK_011,(O,r)=>(O+r)%3===0)],[mn.DATA_MASK_100,new Gn(mn.DATA_MASK_100,(O,r)=>(Math.floor(O/2)+Math.floor(r/3)&1)===0)],[mn.DATA_MASK_101,new Gn(mn.DATA_MASK_101,(O,r)=>O*r%6===0)],[mn.DATA_MASK_110,new Gn(mn.DATA_MASK_110,(O,r)=>O*r%6<3)],[mn.DATA_MASK_111,new Gn(mn.DATA_MASK_111,(O,r)=>(O+r+O*r%3&1)===0)]]);class Xr{constructor(r){const o=r.getHeight();if(o<21||(o&3)!==1)throw new z;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const o=this.bitMatrix.getHeight();let l=0;const f=o-7;for(let d=o-1;d>=f;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=vn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),o=Math.floor((r-17)/4);if(o<=6)return rt.getVersionForNumber(o);let l=0;const f=r-11;for(let m=5;m>=0;m--)for(let p=r-9;p>=f;p--)l=this.copyBit(p,m,l);let d=rt.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let p=r-9;p>=f;p--)l=this.copyBit(m,p,l);if(d=rt.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new z}copyBit(r,o,l){return(this.isMirror?this.bitMatrix.get(o,r):this.bitMatrix.get(r,o))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),o=this.readVersion(),l=Gn.values.get(r.getDataMask()),f=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,f);const d=o.buildFunctionPattern();let m=!0;const p=new Uint8Array(o.getTotalCodewords());let v=0,T=0,R=0;for(let k=f-1;k>0;k-=2){k===6&&k--;for(let B=0;B<f;B++){const Z=m?f-1-B:B;for(let oe=0;oe<2;oe++)d.get(k-oe,Z)||(R++,T<<=1,this.bitMatrix.get(k-oe,Z)&&(T|=1),R===8&&(p[v++]=T,R=0,T=0))}m=!m}if(v!==o.getTotalCodewords())throw new z;return p}remask(){if(this.parsedFormatInfo===null)return;const r=Gn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let o=0,l=r.getWidth();o<l;o++)for(let f=o+1,d=r.getHeight();f<d;f++)r.get(o,f)!==r.get(f,o)&&(r.flip(f,o),r.flip(o,f))}}class Ui{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o,l){if(r.length!==o.getTotalCodewords())throw new N;const f=o.getECBlocksForLevel(l);let d=0;const m=f.getECBlocks();for(const oe of m)d+=oe.getCount();const p=new Array(d);let v=0;for(const oe of m)for(let ce=0;ce<oe.getCount();ce++){const Ce=oe.getDataCodewords(),Le=f.getECCodewordsPerBlock()+Ce;p[v++]=new Ui(Ce,new Uint8Array(Le))}const T=p[0].codewords.length;let R=p.length-1;for(;R>=0&&p[R].codewords.length!==T;)R--;R++;const k=T-f.getECCodewordsPerBlock();let B=0;for(let oe=0;oe<k;oe++)for(let ce=0;ce<v;ce++)p[ce].codewords[oe]=r[B++];for(let oe=R;oe<v;oe++)p[oe].codewords[k]=r[B++];const Z=p[0].codewords.length;for(let oe=k;oe<Z;oe++)for(let ce=0;ce<v;ce++){const Ce=ce<R?oe:oe+1;p[ce].codewords[Ce]=r[B++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var qn;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(qn||(qn={}));class _t{constructor(r,o,l,f){this.value=r,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=f,_t.FOR_BITS.set(f,this),_t.FOR_VALUE.set(r,this)}static forBits(r){const o=_t.FOR_BITS.get(r);if(o===void 0)throw new N;return o}getCharacterCountBits(r){const o=r.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof _t))return!1;const o=r;return this.value===o.value}toString(){return this.stringValue}}_t.FOR_BITS=new Map,_t.FOR_VALUE=new Map,_t.TERMINATOR=new _t(qn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),_t.NUMERIC=new _t(qn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),_t.ALPHANUMERIC=new _t(qn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),_t.STRUCTURED_APPEND=new _t(qn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),_t.BYTE=new _t(qn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),_t.ECI=new _t(qn.ECI,"ECI",Int32Array.from([0,0,0]),7),_t.KANJI=new _t(qn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),_t.FNC1_FIRST_POSITION=new _t(qn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),_t.FNC1_SECOND_POSITION=new _t(qn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),_t.HANZI=new _t(qn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class wn{static decode(r,o,l,f){const d=new fr(r);let m=new W;const p=new Array;let v=-1,T=-1;try{let R=null,k=!1,B;do{if(d.available()<4)B=_t.TERMINATOR;else{const Z=d.readBits(4);B=_t.forBits(Z)}switch(B){case _t.TERMINATOR:break;case _t.FNC1_FIRST_POSITION:case _t.FNC1_SECOND_POSITION:k=!0;break;case _t.STRUCTURED_APPEND:if(d.available()<16)throw new z;v=d.readBits(8),T=d.readBits(8);break;case _t.ECI:const Z=wn.parseECIValue(d);if(R=L.getCharacterSetECIByValue(Z),R===null)throw new z;break;case _t.HANZI:const oe=d.readBits(4),ce=d.readBits(B.getCharacterCountBits(o));oe===wn.GB2312_SUBSET&&wn.decodeHanziSegment(d,m,ce);break;default:const Ce=d.readBits(B.getCharacterCountBits(o));switch(B){case _t.NUMERIC:wn.decodeNumericSegment(d,m,Ce);break;case _t.ALPHANUMERIC:wn.decodeAlphanumericSegment(d,m,Ce,k);break;case _t.BYTE:wn.decodeByteSegment(d,m,Ce,R,p,f);break;case _t.KANJI:wn.decodeKanjiSegment(d,m,Ce);break;default:throw new z}break}}while(B!==_t.TERMINATOR)}catch{throw new z}return new vt(r,m.toString(),p.length===0?null:p,l===null?null:l.toString(),v,T)}static decodeHanziSegment(r,o,l){if(l*13>r.available())throw new z;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/96<<8&4294967295|m%96;p<959?p+=41377:p+=42657,f[d]=p>>8&255,f[d+1]=p&255,d+=2,l--}try{o.append(J.decode(f,ee.GB2312))}catch(m){throw new z(m)}}static decodeKanjiSegment(r,o,l){if(l*13>r.available())throw new z;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/192<<8&4294967295|m%192;p<7936?p+=33088:p+=49472,f[d]=p>>8,f[d+1]=p,d+=2,l--}try{o.append(J.decode(f,ee.SHIFT_JIS))}catch(m){throw new z(m)}}static decodeByteSegment(r,o,l,f,d,m){if(8*l>r.available())throw new z;const p=new Uint8Array(l);for(let T=0;T<l;T++)p[T]=r.readBits(8);let v;f===null?v=ee.guessEncoding(p,m):v=f.getName();try{o.append(J.decode(p,v))}catch(T){throw new z(T)}d.push(p)}static toAlphaNumericChar(r){if(r>=wn.ALPHANUMERIC_CHARS.length)throw new z;return wn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,o,l,f){const d=o.length();for(;l>1;){if(r.available()<11)throw new z;const m=r.readBits(11);o.append(wn.toAlphaNumericChar(Math.floor(m/45))),o.append(wn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new z;o.append(wn.toAlphaNumericChar(r.readBits(6)))}if(f)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(r,o,l){for(;l>=3;){if(r.available()<10)throw new z;const f=r.readBits(10);if(f>=1e3)throw new z;o.append(wn.toAlphaNumericChar(Math.floor(f/100))),o.append(wn.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(wn.toAlphaNumericChar(f%10)),l-=3}if(l===2){if(r.available()<7)throw new z;const f=r.readBits(7);if(f>=100)throw new z;o.append(wn.toAlphaNumericChar(Math.floor(f/10))),o.append(wn.toAlphaNumericChar(f%10))}else if(l===1){if(r.available()<4)throw new z;const f=r.readBits(4);if(f>=10)throw new z;o.append(wn.toAlphaNumericChar(f))}}static parseECIValue(r){const o=r.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const l=r.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=r.readBits(16);return(o&31)<<16&4294967295|l}throw new z}}wn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",wn.GB2312_SUBSET=1;class zs{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const o=r[0];r[0]=r[2],r[2]=o}}class Hs{constructor(){this.rsDecoder=new Ne(ft.QR_CODE_FIELD_256)}decodeBooleanArray(r,o){return this.decodeBitMatrix(ve.parseFromBooleanArray(r),o)}decodeBitMatrix(r,o){const l=new Xr(r);let f=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){f=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new zs(!0)),d}catch(d){throw f!==null?f:d}}decodeBitMatrixParser(r,o){const l=r.readVersion(),f=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),m=Ui.getDataBlocks(d,l,f);let p=0;for(const R of m)p+=R.getNumDataCodewords();const v=new Uint8Array(p);let T=0;for(const R of m){const k=R.getCodewords(),B=R.getNumDataCodewords();this.correctErrors(k,B);for(let Z=0;Z<B;Z++)v[T++]=k[Z]}return wn.decode(v,l,f,o)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new U}for(let f=0;f<o;f++)r[f]=l[f]}}class Wr extends Ue{constructor(r,o,l){super(r,o),this.estimatedModuleSize=l}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const f=Math.abs(r-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const f=(this.getX()+o)/2,d=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new Wr(f,d,m)}}class Lr{constructor(r,o,l,f,d,m,p){this.image=r,this.startX=o,this.startY=l,this.width=f,this.height=d,this.moduleSize=m,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,o=this.height,l=this.width,f=r+l,d=this.startY+o/2,m=new Int32Array(3),p=this.image;for(let v=0;v<o;v++){const T=d+(v&1?-Math.floor((v+1)/2):Math.floor((v+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=r;for(;R<f&&!p.get(R,T);)R++;let k=0;for(;R<f;){if(p.get(R,T))if(k===1)m[1]++;else if(k===2){if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,T,R);if(B!==null)return B}m[0]=m[2],m[1]=1,m[2]=0,k=1}else m[++k]++;else k===1&&k++,m[k]++;R++}if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,T,f);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new te}static centerFromEnd(r,o){return o-r[2]-r[1]/2}foundPatternCross(r){const o=this.moduleSize,l=o/2;for(let f=0;f<3;f++)if(Math.abs(o-r[f])>=l)return!1;return!0}crossCheckVertical(r,o,l,f){const d=this.image,m=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let v=r;for(;v>=0&&d.get(o,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&!d.get(o,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=r+1;v<m&&d.get(o,v)&&p[1]<=l;)p[1]++,v++;if(v===m||p[1]>l)return NaN;for(;v<m&&!d.get(o,v)&&p[2]<=l;)p[2]++,v++;if(p[2]>l)return NaN;const T=p[0]+p[1]+p[2];return 5*Math.abs(T-f)>=2*f?NaN:this.foundPatternCross(p)?Lr.centerFromEnd(p,v):NaN}handlePossibleCenter(r,o,l){const f=r[0]+r[1]+r[2],d=Lr.centerFromEnd(r,l),m=this.crossCheckVertical(o,d,2*r[1],f);if(!isNaN(m)){const p=(r[0]+r[1]+r[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(p,m,d))return T.combineEstimate(m,d,p);const v=new Wr(d,m,p);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class Di extends Ue{constructor(r,o,l,f){super(r,o),this.estimatedModuleSize=l,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const f=Math.abs(r-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const f=this.count+1,d=(this.count*this.getX()+o)/f,m=(this.count*this.getY()+r)/f,p=(this.count*this.estimatedModuleSize+l)/f;return new Di(d,m,p,f)}}class _i{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Un{constructor(r,o){this.image=r,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const o=r!=null&&r.get(Pe.TRY_HARDER)!==void 0,l=r!=null&&r.get(Pe.PURE_BARCODE)!==void 0,f=this.image,d=f.getHeight(),m=f.getWidth();let p=Math.floor(3*d/(4*Un.MAX_MODULES));(p<Un.MIN_SKIP||o)&&(p=Un.MIN_SKIP);let v=!1;const T=new Int32Array(5);for(let k=p-1;k<d&&!v;k+=p){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let B=0;for(let Z=0;Z<m;Z++)if(f.get(Z,k))(B&1)===1&&B++,T[B]++;else if(B&1)T[B]++;else if(B===4)if(Un.foundPatternCross(T)){if(this.handlePossibleCenter(T,k,Z,l)===!0)if(p=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const ce=this.findRowSkip();ce>T[2]&&(k+=ce-T[2]-p,Z=m-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,B=3;continue}B=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,B=3;else T[++B]++;Un.foundPatternCross(T)&&this.handlePossibleCenter(T,k,m,l)===!0&&(p=T[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Ue.orderBestPatterns(R),new _i(R)}static centerFromEnd(r,o){return o-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let o=0;for(let d=0;d<5;d++){const m=r[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,f=l/2;return Math.abs(l-r[0])<f&&Math.abs(l-r[1])<f&&Math.abs(3*l-r[2])<3*f&&Math.abs(l-r[3])<f&&Math.abs(l-r[4])<f}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,o,l,f){const d=this.getCrossCheckStateCount();let m=0;const p=this.image;for(;r>=m&&o>=m&&p.get(o-m,r-m);)d[2]++,m++;if(r<m||o<m)return!1;for(;r>=m&&o>=m&&!p.get(o-m,r-m)&&d[1]<=l;)d[1]++,m++;if(r<m||o<m||d[1]>l)return!1;for(;r>=m&&o>=m&&p.get(o-m,r-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const v=p.getHeight(),T=p.getWidth();for(m=1;r+m<v&&o+m<T&&p.get(o+m,r+m);)d[2]++,m++;if(r+m>=v||o+m>=T)return!1;for(;r+m<v&&o+m<T&&!p.get(o+m,r+m)&&d[3]<l;)d[3]++,m++;if(r+m>=v||o+m>=T||d[3]>=l)return!1;for(;r+m<v&&o+m<T&&p.get(o+m,r+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const R=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(R-f)<2*f&&Un.foundPatternCross(d)}crossCheckVertical(r,o,l,f){const d=this.image,m=d.getHeight(),p=this.getCrossCheckStateCount();let v=r;for(;v>=0&&d.get(o,v);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(o,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&d.get(o,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=r+1;v<m&&d.get(o,v);)p[2]++,v++;if(v===m)return NaN;for(;v<m&&!d.get(o,v)&&p[3]<l;)p[3]++,v++;if(v===m||p[3]>=l)return NaN;for(;v<m&&d.get(o,v)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const T=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(T-f)>=2*f?NaN:Un.foundPatternCross(p)?Un.centerFromEnd(p,v):NaN}crossCheckHorizontal(r,o,l,f){const d=this.image,m=d.getWidth(),p=this.getCrossCheckStateCount();let v=r;for(;v>=0&&d.get(v,o);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(v,o)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&d.get(v,o)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=r+1;v<m&&d.get(v,o);)p[2]++,v++;if(v===m)return NaN;for(;v<m&&!d.get(v,o)&&p[3]<l;)p[3]++,v++;if(v===m||p[3]>=l)return NaN;for(;v<m&&d.get(v,o)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const T=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(T-f)>=f?NaN:Un.foundPatternCross(p)?Un.centerFromEnd(p,v):NaN}handlePossibleCenter(r,o,l,f){const d=r[0]+r[1]+r[2]+r[3]+r[4];let m=Un.centerFromEnd(r,l),p=this.crossCheckVertical(o,Math.floor(m),r[2],d);if(!isNaN(p)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(p),r[2],d),!isNaN(m)&&(!f||this.crossCheckDiagonal(Math.floor(p),Math.floor(m),r[2],d)))){const v=d/7;let T=!1;const R=this.possibleCenters;for(let k=0,B=R.length;k<B;k++){const Z=R[k];if(Z.aboutEquals(v,p,m)){R[k]=Z.combineEstimate(p,m,v),T=!0;break}}if(!T){const k=new Di(m,p,v);R.push(k),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(k)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=Un.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Un.CENTER_QUORUM&&(r++,o+=m.getEstimatedModuleSize());if(r<3)return!1;const f=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-f);return d<=.05*o}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new te;const o=this.possibleCenters;let l;if(r>3){let f=0,d=0;for(const v of this.possibleCenters){const T=v.getEstimatedModuleSize();f+=T,d+=T*T}l=f/r;let m=Math.sqrt(d/r-l*l);o.sort((v,T)=>{const R=Math.abs(T.getEstimatedModuleSize()-l),k=Math.abs(v.getEstimatedModuleSize()-l);return R<k?-1:R>k?1:0});const p=Math.max(.2*l,m);for(let v=0;v<o.length&&o.length>3;v++){const T=o[v];Math.abs(T.getEstimatedModuleSize()-l)>p&&(o.splice(v,1),v--)}}if(o.length>3){let f=0;for(const d of o)f+=d.getEstimatedModuleSize();l=f/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const p=Math.abs(m.getEstimatedModuleSize()-l),v=Math.abs(d.getEstimatedModuleSize()-l);return p<v?1:p>v?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Un.CENTER_QUORUM=2,Un.MIN_SKIP=3,Un.MAX_MODULES=57;class Mi{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Pe.NEED_RESULT_POINT_CALLBACK);const l=new Un(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const o=r.getTopLeft(),l=r.getTopRight(),f=r.getBottomLeft(),d=this.calculateModuleSize(o,l,f);if(d<1)throw new te("No pattern found in proccess finder.");const m=Mi.computeDimension(o,l,f,d),p=rt.getProvisionalVersionForDimension(m),v=p.getDimensionForVersion()-7;let T=null;if(p.getAlignmentPatternCenters().length>0){const Z=l.getX()-o.getX()+f.getX(),oe=l.getY()-o.getY()+f.getY(),ce=1-3/v,Ce=Math.floor(o.getX()+ce*(Z-o.getX())),Le=Math.floor(o.getY()+ce*(oe-o.getY()));for(let nt=4;nt<=16;nt<<=1)try{T=this.findAlignmentInRegion(d,Ce,Le,nt);break}catch(it){if(!(it instanceof te))throw it}}const R=Mi.createTransform(o,l,f,T,m),k=Mi.sampleGrid(this.image,R,m);let B;return T===null?B=[f,o,l]:B=[f,o,l,T],new Mt(k,B)}static createTransform(r,o,l,f,d){const m=d-3.5;let p,v,T,R;return f!==null?(p=f.getX(),v=f.getY(),T=m-3,R=T):(p=o.getX()-r.getX()+l.getX(),v=o.getY()-r.getY()+l.getY(),T=m,R=m),et.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,T,R,3.5,m,r.getX(),r.getY(),o.getX(),o.getY(),p,v,l.getX(),l.getY())}static sampleGrid(r,o,l){return It.getInstance().sampleGridWithTransform(r,l,l,o)}static computeDimension(r,o,l,f){const d=Be.round(Ue.distance(r,o)/f),m=Be.round(Ue.distance(r,l)/f);let p=Math.floor((d+m)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new te("Dimensions could be not found.")}return p}calculateModuleSize(r,o,l){return(this.calculateModuleSizeOneWay(r,o)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?f/7:isNaN(f)?l/7:(l+f)/14}sizeOfBlackWhiteBlackRunBothWays(r,o,l,f){let d=this.sizeOfBlackWhiteBlackRun(r,o,l,f),m=1,p=r-(l-r);p<0?(m=r/(r-p),p=0):p>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(p-r),p=this.image.getWidth()-1);let v=Math.floor(o-(f-o)*m);return m=1,v<0?(m=o/(o-v),v=0):v>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(v-o),v=this.image.getHeight()-1),p=Math.floor(r+(p-r)*m),d+=this.sizeOfBlackWhiteBlackRun(r,o,p,v),d-1}sizeOfBlackWhiteBlackRun(r,o,l,f){const d=Math.abs(f-o)>Math.abs(l-r);if(d){let Z=r;r=o,o=Z,Z=l,l=f,f=Z}const m=Math.abs(l-r),p=Math.abs(f-o);let v=-m/2;const T=r<l?1:-1,R=o<f?1:-1;let k=0;const B=l+T;for(let Z=r,oe=o;Z!==B;Z+=T){const ce=d?oe:Z,Ce=d?Z:oe;if(k===1===this.image.get(ce,Ce)){if(k===2)return Be.distance(Z,oe,r,o);k++}if(v+=p,v>0){if(oe===f)break;oe+=R,v-=m}}return k===2?Be.distance(l+T,f,r,o):NaN}findAlignmentInRegion(r,o,l,f){const d=Math.floor(f*r),m=Math.max(0,o-d),p=Math.min(this.image.getWidth()-1,o+d);if(p-m<r*3)throw new te("Alignment top exceeds estimated module size.");const v=Math.max(0,l-d),T=Math.min(this.image.getHeight()-1,l+d);if(T-v<r*3)throw new te("Alignment bottom exceeds estimated module size.");return new Lr(this.image,m,v,p-m,T-v,r,this.resultPointCallback).find()}}class Vi{constructor(){this.decoder=new Hs}getDecoder(){return this.decoder}decode(r,o){let l,f;if(o!=null&&o.get(Pe.PURE_BARCODE)!==void 0){const v=Vi.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(v,o),f=Vi.NO_POINTS}else{const v=new Mi(r.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(v.getBits(),o),f=v.getPoints()}l.getOther()instanceof zs&&l.getOther().applyMirroredCorrection(f);const d=new Se(l.getText(),l.getRawBytes(),void 0,f,Ve.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(st.BYTE_SEGMENTS,m);const p=l.getECLevel();return p!==null&&d.putMetadata(st.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(st.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(st.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o===null||l===null)throw new te;const f=this.moduleSize(o,r);let d=o[1],m=l[1],p=o[0],v=l[0];if(p>=v||d>=m)throw new te;if(m-d!==v-p&&(v=p+(m-d),v>=r.getWidth()))throw new te;const T=Math.round((v-p+1)/f),R=Math.round((m-d+1)/f);if(T<=0||R<=0)throw new te;if(R!==T)throw new te;const k=Math.floor(f/2);d+=k,p+=k;const B=p+Math.floor((T-1)*f)-v;if(B>0){if(B>k)throw new te;p-=B}const Z=d+Math.floor((R-1)*f)-m;if(Z>0){if(Z>k)throw new te;d-=Z}const oe=new ve(T,R);for(let ce=0;ce<R;ce++){const Ce=d+Math.floor(ce*f);for(let Le=0;Le<T;Le++)r.get(p+Math.floor(Le*f),Ce)&&oe.set(Le,ce)}return oe}static moduleSize(r,o){const l=o.getHeight(),f=o.getWidth();let d=r[0],m=r[1],p=!0,v=0;for(;d<f&&m<l;){if(p!==o.get(d,m)){if(++v===5)break;p=!p}d++,m++}if(d===f||m===l)throw new te;return(d-r[0])/7}}Vi.NO_POINTS=new Array;class Rt{PDF417Common(){}static getBitCountSum(r){return Be.sum(r)}static toIntArray(r){if(r==null||!r.length)return Rt.EMPTY_INT_ARRAY;const o=new Int32Array(r.length);let l=0;for(const f of r)o[l++]=f;return o}static getCodeword(r){const o=ue.binarySearch(Rt.SYMBOL_TABLE,r&262143);return o<0?-1:(Rt.CODEWORD_TABLE[o]-1)%Rt.NUMBER_OF_CODEWORDS}}Rt.NUMBER_OF_CODEWORDS=929,Rt.MAX_CODEWORDS_IN_BARCODE=Rt.NUMBER_OF_CODEWORDS-1,Rt.MIN_ROWS_IN_BARCODE=3,Rt.MAX_ROWS_IN_BARCODE=90,Rt.MODULES_IN_CODEWORD=17,Rt.MODULES_IN_STOP_PATTERN=18,Rt.BARS_IN_MODULE=8,Rt.EMPTY_INT_ARRAY=new Int32Array([]),Rt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Rt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class la{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class kt{static detectMultiple(r,o,l){let f=r.getBlackMatrix(),d=kt.detect(l,f);return d.length||(f=f.clone(),f.rotate180(),d=kt.detect(l,f)),new la(f,d)}static detect(r,o){const l=new Array;let f=0,d=0,m=!1;for(;f<o.getHeight();){const p=kt.findVertices(o,f,d);if(p[0]==null&&p[3]==null){if(!m)break;m=!1,d=0;for(const v of l)v[1]!=null&&(f=Math.trunc(Math.max(f,v[1].getY()))),v[3]!=null&&(f=Math.max(f,Math.trunc(v[3].getY())));f+=kt.ROW_STEP;continue}if(m=!0,l.push(p),!r)break;p[2]!=null?(d=Math.trunc(p[2].getX()),f=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),f=Math.trunc(p[4].getY()))}return l}static findVertices(r,o,l){const f=r.getHeight(),d=r.getWidth(),m=new Array(8);return kt.copyToResult(m,kt.findRowsWithPattern(r,f,d,o,l,kt.START_PATTERN),kt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),kt.copyToResult(m,kt.findRowsWithPattern(r,f,d,o,l,kt.STOP_PATTERN),kt.INDEXES_STOP_PATTERN),m}static copyToResult(r,o,l){for(let f=0;f<l.length;f++)r[l[f]]=o[f]}static findRowsWithPattern(r,o,l,f,d,m){const p=new Array(4);let v=!1;const T=new Int32Array(m.length);for(;f<o;f+=kt.ROW_STEP){let k=kt.findGuardPattern(r,d,f,l,!1,m,T);if(k!=null){for(;f>0;){const B=kt.findGuardPattern(r,d,--f,l,!1,m,T);if(B!=null)k=B;else{f++;break}}p[0]=new Ue(k[0],f),p[1]=new Ue(k[1],f),v=!0;break}}let R=f+1;if(v){let k=0,B=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;R<o;R++){const Z=kt.findGuardPattern(r,B[0],R,l,!1,m,T);if(Z!=null&&Math.abs(B[0]-Z[0])<kt.MAX_PATTERN_DRIFT&&Math.abs(B[1]-Z[1])<kt.MAX_PATTERN_DRIFT)B=Z,k=0;else{if(k>kt.SKIPPED_ROW_COUNT_MAX)break;k++}}R-=k+1,p[2]=new Ue(B[0],R),p[3]=new Ue(B[1],R)}return R-f<kt.BARCODE_MIN_HEIGHT&&ue.fill(p,null),p}static findGuardPattern(r,o,l,f,d,m,p){ue.fillWithin(p,0,p.length,0);let v=o,T=0;for(;r.get(v,l)&&v>0&&T++<kt.MAX_PIXEL_DRIFT;)v--;let R=v,k=0,B=m.length;for(let Z=d;R<f;R++)if(r.get(R,l)!==Z)p[k]++;else{if(k===B-1){if(kt.patternMatchVariance(p,m,kt.MAX_INDIVIDUAL_VARIANCE)<kt.MAX_AVG_VARIANCE)return new Int32Array([v,R]);v+=p[0]+p[1],re.arraycopy(p,2,p,0,k-1),p[k-1]=0,p[k]=0,k--}else k++;p[k]=1,Z=!Z}return k===B-1&&kt.patternMatchVariance(p,m,kt.MAX_INDIVIDUAL_VARIANCE)<kt.MAX_AVG_VARIANCE?new Int32Array([v,R-1]):null}static patternMatchVariance(r,o,l){let f=r.length,d=0,m=0;for(let T=0;T<f;T++)d+=r[T],m+=o[T];if(d<m)return 1/0;let p=d/m;l*=p;let v=0;for(let T=0;T<f;T++){let R=r[T],k=o[T]*p,B=R>k?R-k:k-R;if(B>l)return 1/0;v+=B}return v/d}}kt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),kt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),kt.MAX_AVG_VARIANCE=.42,kt.MAX_INDIVIDUAL_VARIANCE=.8,kt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),kt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),kt.MAX_PIXEL_DRIFT=3,kt.MAX_PATTERN_DRIFT=5,kt.SKIPPED_ROW_COUNT_MAX=25,kt.ROW_STEP=5,kt.BARCODE_MIN_HEIGHT=10;class nr{constructor(r,o){if(o.length===0)throw new N;this.field=r;let l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-f),re.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let f=0;for(let d of this.coefficients)f=this.field.add(f,d);return f}let o=this.coefficients[0],l=this.coefficients.length;for(let f=1;f<l;f++)o=this.field.add(this.field.multiply(r,o),this.coefficients[f]);return o}add(r){if(!this.field.equals(r.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let f=new Int32Array(l.length),d=l.length-o.length;re.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=this.field.add(o[m-d],l[m]);return new nr(this.field,f)}subtract(r){if(!this.field.equals(r.field))throw new N("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof nr?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new nr(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,f=r.coefficients,d=f.length,m=new Int32Array(l+d-1);for(let p=0;p<l;p++){let v=o[p];for(let T=0;T<d;T++)m[p+T]=this.field.add(m[p+T],this.field.multiply(v,f[T]))}return new nr(this.field,m)}negative(){let r=this.coefficients.length,o=new Int32Array(r);for(let l=0;l<r;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new nr(this.field,o)}multiplyScalar(r){if(r===0)return new nr(this.field,new Int32Array([0]));if(r===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let f=0;f<o;f++)l[f]=this.field.multiply(this.coefficients[f],r);return new nr(this.field,l)}multiplyByMonomial(r,o){if(r<0)throw new N;if(o===0)return new nr(this.field,new Int32Array([0]));let l=this.coefficients.length,f=new Int32Array(l+r);for(let d=0;d<l;d++)f[d]=this.field.multiply(this.coefficients[d],o);return new nr(this.field,f)}toString(){let r=new W;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(o===0||l!==1)&&r.append(l),o!==0&&(o===1?r.append("x"):(r.append("x^"),r.append(o))))}return r.toString()}}class hs{add(r,o){return(r+o)%this.modulus}subtract(r,o){return(this.modulus+r-o)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new N;return this.logTable[r]}inverse(r){if(r===0)throw new Ft;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class fs extends hs{constructor(r,o){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let f=0;f<r;f++)this.expTable[f]=l,l=l*o%r;for(let f=0;f<r-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new nr(this,new Int32Array([0])),this.one=new nr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new N;if(o===0)return this.zero;let l=new Int32Array(r+1);return l[0]=o,new nr(this,l)}}fs.PDF417_GF=new fs(Rt.NUMBER_OF_CODEWORDS,3);class ds{constructor(){this.field=fs.PDF417_GF}decode(r,o,l){let f=new nr(this.field,r),d=new Int32Array(o),m=!1;for(let oe=o;oe>0;oe--){let ce=f.evaluateAt(this.field.exp(oe));d[o-oe]=ce,ce!==0&&(m=!0)}if(!m)return 0;let p=this.field.getOne();if(l!=null)for(const oe of l){let ce=this.field.exp(r.length-1-oe),Ce=new nr(this.field,new Int32Array([this.field.subtract(0,ce),1]));p=p.multiply(Ce)}let v=new nr(this.field,d),T=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),v,o),R=T[0],k=T[1],B=this.findErrorLocations(R),Z=this.findErrorMagnitudes(k,R,B);for(let oe=0;oe<B.length;oe++){let ce=r.length-1-this.field.log(B[oe]);if(ce<0)throw U.getChecksumInstance();r[ce]=this.field.subtract(r[ce],Z[oe])}return B.length}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){let B=r;r=o,o=B}let f=r,d=o,m=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let B=f,Z=m;if(f=d,m=p,f.isZero())throw U.getChecksumInstance();d=B;let oe=this.field.getZero(),ce=f.getCoefficient(f.getDegree()),Ce=this.field.inverse(ce);for(;d.getDegree()>=f.getDegree()&&!d.isZero();){let Le=d.getDegree()-f.getDegree(),nt=this.field.multiply(d.getCoefficient(d.getDegree()),Ce);oe=oe.add(this.field.buildMonomial(Le,nt)),d=d.subtract(f.multiplyByMonomial(Le,nt))}p=oe.multiply(m).subtract(Z).negative()}let v=p.getCoefficient(0);if(v===0)throw U.getChecksumInstance();let T=this.field.inverse(v),R=p.multiply(T),k=d.multiply(T);return[R,k]}findErrorLocations(r){let o=r.getDegree(),l=new Int32Array(o),f=0;for(let d=1;d<this.field.getSize()&&f<o;d++)r.evaluateAt(d)===0&&(l[f]=this.field.inverse(d),f++);if(f!==o)throw U.getChecksumInstance();return l}findErrorMagnitudes(r,o,l){let f=o.getDegree(),d=new Int32Array(f);for(let T=1;T<=f;T++)d[f-T]=this.field.multiply(T,o.getCoefficient(T));let m=new nr(this.field,d),p=l.length,v=new Int32Array(p);for(let T=0;T<p;T++){let R=this.field.inverse(l[T]),k=this.field.subtract(0,r.evaluateAt(R)),B=this.field.inverse(m.evaluateAt(R));v[T]=this.field.multiply(k,B)}return v}}class Zi{constructor(r,o,l,f,d){r instanceof Zi?this.constructor_2(r):this.constructor_1(r,o,l,f,d)}constructor_1(r,o,l,f,d){const m=o==null||l==null,p=f==null||d==null;if(m&&p)throw new te;m?(o=new Ue(0,f.getY()),l=new Ue(0,d.getY())):p&&(f=new Ue(r.getWidth()-1,o.getY()),d=new Ue(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=o,this.bottomLeft=l,this.topRight=f,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(f.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,o){return r==null?o:o==null?r:new Zi(r.image,r.topLeft,r.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(r,o,l){let f=this.topLeft,d=this.bottomLeft,m=this.topRight,p=this.bottomRight;if(r>0){let v=l?this.topLeft:this.topRight,T=Math.trunc(v.getY()-r);T<0&&(T=0);let R=new Ue(v.getX(),T);l?f=R:m=R}if(o>0){let v=l?this.bottomLeft:this.bottomRight,T=Math.trunc(v.getY()+o);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let R=new Ue(v.getX(),T);l?d=R:p=R}return new Zi(this.image,f,d,m,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class gs{constructor(r,o,l,f){this.columnCount=r,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ci{constructor(){this.buffer=""}static form(r,o){let l=-1;function f(m,p,v,T,R,k){if(m==="%%")return"%";if(o[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let B=R?parseInt(R.substr(1)):void 0,Z;switch(k){case"s":Z=o[l];break;case"c":Z=o[l][0];break;case"f":Z=parseFloat(o[l]).toFixed(m);break;case"p":Z=parseFloat(o[l]).toPrecision(m);break;case"e":Z=parseFloat(o[l]).toExponential(m);break;case"x":Z=parseInt(o[l]).toString(B||16);break;case"d":Z=parseFloat(parseInt(o[l],B||10).toPrecision(m)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(B);let oe=parseInt(v),ce=v&&v[0]+""=="0"?"0":" ";for(;Z.length<oe;)Z=p!==void 0?Z+ce:ce+Z;return Z}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,f)}format(r,...o){this.buffer+=Ci.form(r,o)}toString(){return this.buffer}}class Is{constructor(r){this.boundingBox=new Zi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let o=this.getCodeword(r);if(o!=null)return o;for(let l=1;l<Is.MAX_NEARBY_DISTANCE;l++){let f=this.imageRowToCodewordIndex(r)-l;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(r)+l,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,o){this.codewords[this.imageRowToCodewordIndex(r)]=o}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Ci;let o=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return r.toString()}}Is.MAX_NEARBY_DISTANCE=5;class or{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let o=this.values.get(r);o==null&&(o=0),o++,this.values.set(r,o)}getValue(){let r=-1,o=new Array;for(const[l,f]of this.values.entries()){const d={getKey:()=>l,getValue:()=>f};d.getValue()>r?(r=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===r&&o.push(d.getKey())}return Rt.toIntArray(o)}getConfidence(r){return this.values.get(r)}}class _n extends Is{constructor(r,o){super(r),this._isLeft=o}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,r);let l=this.getBoundingBox(),f=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),v=-1,T=1,R=0;for(let k=m;k<p;k++){if(o[k]==null)continue;let B=o[k],Z=B.getRowNumber()-v;if(Z===0)R++;else if(Z===1)T=Math.max(T,R),R=1,v=B.getRowNumber();else if(Z<0||B.getRowNumber()>=r.getRowCount()||Z>k)o[k]=null;else{let oe;T>2?oe=(T-2)*Z:oe=Z;let ce=oe>=k;for(let Ce=1;Ce<=oe&&!ce;Ce++)ce=o[k-Ce]!=null;ce?o[k]=null:(v=B.getRowNumber(),R=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let o=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let f=l.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(r){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),p=this.getCodewords(),v=-1;for(let T=d;T<m;T++){if(p[T]==null)continue;let R=p[T];R.setRowNumberAsRowIndicatorColumn();let k=R.getRowNumber()-v;k===0||(k===1?v=R.getRowNumber():R.getRowNumber()>=r.getRowCount()?p[T]=null:v=R.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),o=new or,l=new or,f=new or,d=new or;for(let p of r){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let v=p.getValue()%30,T=p.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:l.setValue(v*3+1);break;case 1:d.setValue(v/3),f.setValue(v%3);break;case 2:o.setValue(v+1);break}}if(o.getValue().length===0||l.getValue().length===0||f.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+f.getValue()[0]<Rt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+f.getValue()[0]>Rt.MAX_ROWS_IN_BARCODE)return null;let m=new gs(o.getValue()[0],l.getValue()[0],f.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,o){for(let l=0;l<r.length;l++){let f=r[l];if(r[l]==null)continue;let d=f.getValue()%30,m=f.getRowNumber();if(m>o.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==o.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ms{constructor(r,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Rt.MAX_CODEWORDS_IN_BARCODE,o;do o=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let f=0;f<l.length;f++)l[f]!=null&&(l[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&o[l]!=null&&r[l].getRowNumber()===o[l].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let d=this.detectionResultColumns[f].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=ms.adjustRowNumberIfValid(f,d,p),p.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=ms.adjustRowNumberIfValid(f,d,p),p.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),o=0):++o),o}adjustRowNumbers(r,o,l){if(!this.detectionResultColumns[r-1])return;let f=l[o],d=this.detectionResultColumns[r-1].getCodewords(),m=d;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let p=new Array(14);p[2]=d[o],p[3]=m[o],o>0&&(p[0]=l[o-1],p[4]=d[o-1],p[5]=m[o-1]),o>1&&(p[8]=l[o-2],p[10]=d[o-2],p[11]=m[o-2]),o<l.length-1&&(p[1]=l[o+1],p[6]=d[o+1],p[7]=m[o+1]),o<l.length-2&&(p[9]=l[o+2],p[12]=d[o+2],p[13]=m[o+2]);for(let v of p)if(ms.adjustRowNumber(f,v))return}static adjustRowNumber(r,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===r.getBucket()?(r.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,o){this.detectionResultColumns[r]=o}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Ci;for(let l=0;l<r.getCodewords().length;l++){o.format("CW %3d:",l);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[f].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class $i{constructor(r,o,l,f){this.rowNumber=$i.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==$i.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}$i.BARCODE_ROW_UNKNOWN=-1;class Qr{static initialize(){for(let r=0;r<Rt.SYMBOL_TABLE.length;r++){let o=Rt.SYMBOL_TABLE[r],l=o&1;for(let f=0;f<Rt.BARS_IN_MODULE;f++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,Qr.RATIOS_TABLE[r]||(Qr.RATIOS_TABLE[r]=new Array(Rt.BARS_IN_MODULE)),Qr.RATIOS_TABLE[r][Rt.BARS_IN_MODULE-f-1]=Math.fround(d/Rt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let o=Qr.getDecodedCodewordValue(Qr.sampleBitCounts(r));return o!==-1?o:Qr.getClosestDecodedValue(r)}static sampleBitCounts(r){let o=Be.sum(r),l=new Int32Array(Rt.BARS_IN_MODULE),f=0,d=0;for(let m=0;m<Rt.MODULES_IN_CODEWORD;m++){let p=o/(2*Rt.MODULES_IN_CODEWORD)+m*o/Rt.MODULES_IN_CODEWORD;d+r[f]<=p&&(d+=r[f],f++),l[f]++}return l}static getDecodedCodewordValue(r){let o=Qr.getBitValue(r);return Rt.getCodeword(o)===-1?-1:o}static getBitValue(r){let o=0;for(let l=0;l<r.length;l++)for(let f=0;f<r[l];f++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(r){let o=Be.sum(r),l=new Array(Rt.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/o);let f=Ye.MAX_VALUE,d=-1;this.bSymbolTableReady||Qr.initialize();for(let m=0;m<Qr.RATIOS_TABLE.length;m++){let p=0,v=Qr.RATIOS_TABLE[m];for(let T=0;T<Rt.BARS_IN_MODULE;T++){let R=Math.fround(v[T]-l[T]);if(p+=Math.fround(R*R),p>=f)break}p<f&&(f=p,d=Rt.SYMBOL_TABLE[m])}return d}}Qr.bSymbolTableReady=!1,Qr.RATIOS_TABLE=new Array(Rt.SYMBOL_TABLE.length).map(O=>new Array(Rt.BARS_IN_MODULE));class ca{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class ua{static parseLong(r,o=void 0){return parseInt(r,o)}}class Ji extends w{}Ji.kind="NullPointerException";class ha{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,o,l){if(r==null)throw new Ji;if(o<0||o>r.length||l<0||o+l>r.length||o+l<0)throw new Y;if(l===0)return;for(let f=0;f<l;f++)this.write(r[o+f])}flush(){}close(){}}class Fi extends w{}class yl extends ha{constructor(r=32){if(super(),this.count=0,r<0)throw new N("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Fi;l=se.MAX_VALUE}this.buf=ue.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,o,l){if(o<0||o>r.length||l<0||o+l-r.length>0)throw new Y;this.ensureCapacity(this.count+l),re.arraycopy(r,o,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ue.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var An;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(An||(An={}));function Gs(){if(typeof window<"u")return window.BigInt||null;if(typeof Fh<"u")return Fh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ns;function zi(O){if(typeof Ns>"u"&&(Ns=Gs()),Ns===null)throw new Error("BigInt is not supported!");return Ns(O)}function Ga(){let O=[];O[0]=zi(1);let r=zi(900);O[1]=r;for(let o=2;o<16;o++)O[o]=O[o-1]*r;return O}class Oe{static decode(r,o){let l=new W(""),f=L.ISO8859_1;l.enableDecoding(f);let d=1,m=r[d++],p=new ca;for(;d<r[0];){switch(m){case Oe.TEXT_COMPACTION_MODE_LATCH:d=Oe.textCompaction(r,d,l);break;case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:d=Oe.byteCompaction(m,r,f,d,l);break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case Oe.NUMERIC_COMPACTION_MODE_LATCH:d=Oe.numericCompaction(r,d,l);break;case Oe.ECI_CHARSET:L.getCharacterSetECIByValue(r[d++]);break;case Oe.ECI_GENERAL_PURPOSE:d+=2;break;case Oe.ECI_USER_DEFINED:d++;break;case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=Oe.decodeMacroBlock(r,d,p);break;case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:throw new z;default:d--,d=Oe.textCompaction(r,d,l);break}if(d<r.length)m=r[d++];else throw z.getFormatInstance()}if(l.length()===0)throw z.getFormatInstance();let v=new vt(null,l.toString(),null,o);return v.setOther(p),v}static decodeMacroBlock(r,o,l){if(o+Oe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw z.getFormatInstance();let f=new Int32Array(Oe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<Oe.NUMBER_OF_SEQUENCE_CODEWORDS;p++,o++)f[p]=r[o];l.setSegmentIndex(se.parseInt(Oe.decodeBase900toBase10(f,Oe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new W;o=Oe.textCompaction(r,o,d),l.setFileId(d.toString());let m=-1;for(r[o]===Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<r[0];)switch(r[o]){case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,r[o]){case Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new W;o=Oe.textCompaction(r,o+1,p),l.setFileName(p.toString());break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new W;o=Oe.textCompaction(r,o+1,v),l.setSender(v.toString());break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new W;o=Oe.textCompaction(r,o+1,T),l.setAddressee(T.toString());break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new W;o=Oe.numericCompaction(r,o+1,R),l.setSegmentCount(se.parseInt(R.toString()));break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let k=new W;o=Oe.numericCompaction(r,o+1,k),l.setTimestamp(ua.parseLong(k.toString()));break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new W;o=Oe.numericCompaction(r,o+1,B),l.setChecksum(se.parseInt(B.toString()));break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Z=new W;o=Oe.numericCompaction(r,o+1,Z),l.setFileSize(ua.parseLong(Z.toString()));break;default:throw z.getFormatInstance()}break;case Oe.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(m!==-1){let p=o-m;l.isLastSegment()&&p--,l.setOptionalData(ue.copyOfRange(r,m,m+p))}return o}static textCompaction(r,o,l){let f=new Int32Array((r[0]-o)*2),d=new Int32Array((r[0]-o)*2),m=0,p=!1;for(;o<r[0]&&!p;){let v=r[o++];if(v<Oe.TEXT_COMPACTION_MODE_LATCH)f[m]=v/30,f[m+1]=v%30,m+=2;else switch(v){case Oe.TEXT_COMPACTION_MODE_LATCH:f[m++]=Oe.TEXT_COMPACTION_MODE_LATCH;break;case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.NUMERIC_COMPACTION_MODE_LATCH:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:o--,p=!0;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[m]=Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=r[o++],d[m]=v,m++;break}}return Oe.decodeTextCompaction(f,d,m,l),o}static decodeTextCompaction(r,o,l,f){let d=An.ALPHA,m=An.ALPHA,p=0;for(;p<l;){let v=r[p],T="";switch(d){case An.ALPHA:if(v<26)T=String.fromCharCode(65+v);else switch(v){case 26:T=" ";break;case Oe.LL:d=An.LOWER;break;case Oe.ML:d=An.MIXED;break;case Oe.PS:m=d,d=An.PUNCT_SHIFT;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:d=An.ALPHA;break}break;case An.LOWER:if(v<26)T=String.fromCharCode(97+v);else switch(v){case 26:T=" ";break;case Oe.AS:m=d,d=An.ALPHA_SHIFT;break;case Oe.ML:d=An.MIXED;break;case Oe.PS:m=d,d=An.PUNCT_SHIFT;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:d=An.ALPHA;break}break;case An.MIXED:if(v<Oe.PL)T=Oe.MIXED_CHARS[v];else switch(v){case Oe.PL:d=An.PUNCT;break;case 26:T=" ";break;case Oe.LL:d=An.LOWER;break;case Oe.AL:d=An.ALPHA;break;case Oe.PS:m=d,d=An.PUNCT_SHIFT;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:d=An.ALPHA;break}break;case An.PUNCT:if(v<Oe.PAL)T=Oe.PUNCT_CHARS[v];else switch(v){case Oe.PAL:d=An.ALPHA;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:d=An.ALPHA;break}break;case An.ALPHA_SHIFT:if(d=m,v<26)T=String.fromCharCode(65+v);else switch(v){case 26:T=" ";break;case Oe.TEXT_COMPACTION_MODE_LATCH:d=An.ALPHA;break}break;case An.PUNCT_SHIFT:if(d=m,v<Oe.PAL)T=Oe.PUNCT_CHARS[v];else switch(v){case Oe.PAL:d=An.ALPHA;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:d=An.ALPHA;break}break}T!==""&&f.append(T),p++}}static byteCompaction(r,o,l,f,d){let m=new yl,p=0,v=0,T=!1;switch(r){case Oe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),k=o[f++];for(;f<o[0]&&!T;)switch(R[p++]=k,v=900*v+k,k=o[f++],k){case Oe.TEXT_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.NUMERIC_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:f--,T=!0;break;default:if(p%5===0&&p>0){for(let B=0;B<6;++B)m.write(Number(zi(v)>>zi(8*(5-B))));v=0,p=0}break}f===o[0]&&k<Oe.TEXT_COMPACTION_MODE_LATCH&&(R[p++]=k);for(let B=0;B<p;B++)m.write(R[B]);break;case Oe.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!T;){let B=o[f++];if(B<Oe.TEXT_COMPACTION_MODE_LATCH)p++,v=900*v+B;else switch(B){case Oe.TEXT_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.NUMERIC_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:f--,T=!0;break}if(p%5===0&&p>0){for(let Z=0;Z<6;++Z)m.write(Number(zi(v)>>zi(8*(5-Z))));v=0,p=0}}break}return d.append(J.decode(m.toByteArray(),l)),f}static numericCompaction(r,o,l){let f=0,d=!1,m=new Int32Array(Oe.MAX_NUMERIC_CODEWORDS);for(;o<r[0]&&!d;){let p=r[o++];if(o===r[0]&&(d=!0),p<Oe.TEXT_COMPACTION_MODE_LATCH)m[f]=p,f++;else switch(p){case Oe.TEXT_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(f%Oe.MAX_NUMERIC_CODEWORDS===0||p===Oe.NUMERIC_COMPACTION_MODE_LATCH||d)&&f>0&&(l.append(Oe.decodeBase900toBase10(m,f)),f=0)}return o}static decodeBase900toBase10(r,o){let l=zi(0);for(let d=0;d<o;d++)l+=Oe.EXP900[o-d-1]*zi(r[d]);let f=l.toString();if(f.charAt(0)!=="1")throw new z;return f.substring(1)}}Oe.TEXT_COMPACTION_MODE_LATCH=900,Oe.BYTE_COMPACTION_MODE_LATCH=901,Oe.NUMERIC_COMPACTION_MODE_LATCH=902,Oe.BYTE_COMPACTION_MODE_LATCH_6=924,Oe.ECI_USER_DEFINED=925,Oe.ECI_GENERAL_PURPOSE=926,Oe.ECI_CHARSET=927,Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Oe.MACRO_PDF417_TERMINATOR=922,Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Oe.MAX_NUMERIC_CODEWORDS=15,Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Oe.PL=25,Oe.LL=27,Oe.AS=27,Oe.ML=28,Oe.AL=28,Oe.PS=29,Oe.PAL=29,Oe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Oe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Oe.EXP900=Gs()?Ga():[],Oe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Gt{constructor(){}static decode(r,o,l,f,d,m,p){let v=new Zi(r,o,l,f,d),T=null,R=null,k;for(let oe=!0;;oe=!1){if(o!=null&&(T=Gt.getRowIndicatorColumn(r,v,o,!0,m,p)),f!=null&&(R=Gt.getRowIndicatorColumn(r,v,f,!1,m,p)),k=Gt.merge(T,R),k==null)throw te.getNotFoundInstance();let ce=k.getBoundingBox();if(oe&&ce!=null&&(ce.getMinY()<v.getMinY()||ce.getMaxY()>v.getMaxY()))v=ce;else break}k.setBoundingBox(v);let B=k.getBarcodeColumnCount()+1;k.setDetectionResultColumn(0,T),k.setDetectionResultColumn(B,R);let Z=T!=null;for(let oe=1;oe<=B;oe++){let ce=Z?oe:B-oe;if(k.getDetectionResultColumn(ce)!==void 0)continue;let Ce;ce===0||ce===B?Ce=new _n(v,ce===0):Ce=new Is(v),k.setDetectionResultColumn(ce,Ce);let Le=-1,nt=Le;for(let it=v.getMinY();it<=v.getMaxY();it++){if(Le=Gt.getStartColumn(k,ce,it,Z),Le<0||Le>v.getMaxX()){if(nt===-1)continue;Le=nt}let $e=Gt.detectCodeword(r,v.getMinX(),v.getMaxX(),Z,Le,it,m,p);$e!=null&&(Ce.setCodeword(it,$e),nt=Le,m=Math.min(m,$e.getWidth()),p=Math.max(p,$e.getWidth()))}}return Gt.createDecoderResult(k)}static merge(r,o){if(r==null&&o==null)return null;let l=Gt.getBarcodeMetadata(r,o);if(l==null)return null;let f=Zi.merge(Gt.adjustBoundingBox(r),Gt.adjustBoundingBox(o));return new ms(l,f)}static adjustBoundingBox(r){if(r==null)return null;let o=r.getRowHeights();if(o==null)return null;let l=Gt.getMax(o),f=0;for(let p of o)if(f+=l-p,p>0)break;let d=r.getCodewords();for(let p=0;f>0&&d[p]==null;p++)f--;let m=0;for(let p=o.length-1;p>=0&&(m+=l-o[p],!(o[p]>0));p--);for(let p=d.length-1;m>0&&d[p]==null;p--)m--;return r.getBoundingBox().addMissingRows(f,m,r.isLeft())}static getMax(r){let o=-1;for(let l of r)o=Math.max(o,l);return o}static getBarcodeMetadata(r,o){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==f.getColumnCount()&&l.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&l.getRowCount()!==f.getRowCount()?null:l}static getRowIndicatorColumn(r,o,l,f,d,m){let p=new _n(o,f);for(let v=0;v<2;v++){let T=v===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let k=Math.trunc(Math.trunc(l.getY()));k<=o.getMaxY()&&k>=o.getMinY();k+=T){let B=Gt.detectCodeword(r,0,r.getWidth(),f,R,k,d,m);B!=null&&(p.setCodeword(k,B),f?R=B.getStartX():R=B.getEndX())}}return p}static adjustCodewordCount(r,o){let l=o[0][1],f=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Gt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(f.length===0){if(d<1||d>Rt.MAX_CODEWORDS_IN_BARCODE)throw te.getNotFoundInstance();l.setValue(d)}else f[0]!==d&&l.setValue(d)}static createDecoderResult(r){let o=Gt.createBarcodeMatrix(r);Gt.adjustCodewordCount(r,o);let l=new Array,f=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],m=new Array;for(let v=0;v<r.getBarcodeRowCount();v++)for(let T=0;T<r.getBarcodeColumnCount();T++){let R=o[v][T+1].getValue(),k=v*r.getBarcodeColumnCount()+T;R.length===0?l.push(k):R.length===1?f[k]=R[0]:(m.push(k),d.push(R))}let p=new Array(d.length);for(let v=0;v<p.length;v++)p[v]=d[v];return Gt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),f,Rt.toIntArray(l),Rt.toIntArray(m),p)}static createDecoderResultFromAmbiguousValues(r,o,l,f,d){let m=new Int32Array(f.length),p=100;for(;p-- >0;){for(let v=0;v<m.length;v++)o[f[v]]=d[v][m[v]];try{return Gt.decodeCodewords(o,r,l)}catch(v){if(!(v instanceof U))throw v}if(m.length===0)throw U.getChecksumInstance();for(let v=0;v<m.length;v++)if(m[v]<d[v].length-1){m[v]++;break}else if(m[v]=0,v===m.length-1)throw U.getChecksumInstance()}throw U.getChecksumInstance()}static createBarcodeMatrix(r){let o=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let d=0;d<o[f].length;d++)o[f][d]=new or;let l=0;for(let f of r.getDetectionResultColumns()){if(f!=null){for(let d of f.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(r,o){return o>=0&&o<=r.getBarcodeColumnCount()+1}static getStartColumn(r,o,l,f){let d=f?1:-1,m=null;if(Gt.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return f?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return f?m.getStartX():m.getEndX();if(Gt.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return f?m.getEndX():m.getStartX();let p=0;for(;Gt.isValidBarcodeColumn(r,o-d);){o-=d;for(let v of r.getDetectionResultColumn(o).getCodewords())if(v!=null)return(f?v.getEndX():v.getStartX())+d*p*(v.getEndX()-v.getStartX());p++}return f?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,o,l,f,d,m,p,v){d=Gt.adjustCodewordStartColumn(r,o,l,f,d,m);let T=Gt.getModuleBitCount(r,o,l,f,d,m);if(T==null)return null;let R,k=Be.sum(T);if(f)R=d+k;else{for(let oe=0;oe<T.length/2;oe++){let ce=T[oe];T[oe]=T[T.length-1-oe],T[T.length-1-oe]=ce}R=d,d=R-k}if(!Gt.checkCodewordSkew(k,p,v))return null;let B=Qr.getDecodedValue(T),Z=Rt.getCodeword(B);return Z===-1?null:new $i(d,R,Gt.getCodewordBucketNumber(B),Z)}static getModuleBitCount(r,o,l,f,d,m){let p=d,v=new Int32Array(8),T=0,R=f?1:-1,k=f;for(;(f?p<l:p>=o)&&T<v.length;)r.get(p,m)===k?(v[T]++,p+=R):(T++,k=!k);return T===v.length||p===(f?l:o)&&T===v.length-1?v:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,o,l,f,d,m){let p=d,v=f?-1:1;for(let T=0;T<2;T++){for(;(f?p>=o:p<l)&&f===r.get(p,m);){if(Math.abs(d-p)>Gt.CODEWORD_SKEW_SIZE)return d;p+=v}v=-v,f=!f}return p}static checkCodewordSkew(r,o,l){return o-Gt.CODEWORD_SKEW_SIZE<=r&&r<=l+Gt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,o,l){if(r.length===0)throw z.getFormatInstance();let f=1<<o+1,d=Gt.correctErrors(r,l,f);Gt.verifyCodewordCount(r,f);let m=Oe.decode(r,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(r,o,l){if(o!=null&&o.length>l/2+Gt.MAX_ERRORS||l<0||l>Gt.MAX_EC_CODEWORDS)throw U.getChecksumInstance();return Gt.errorCorrection.decode(r,l,o)}static verifyCodewordCount(r,o){if(r.length<4)throw z.getFormatInstance();let l=r[0];if(l>r.length)throw z.getFormatInstance();if(l===0)if(o<r.length)r[0]=r.length-o;else throw z.getFormatInstance()}static getBitCountForCodeword(r){let o=new Int32Array(8),l=0,f=o.length-1;for(;!((r&1)!==l&&(l=r&1,f--,f<0));)o[f]++,r>>=1;return o}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Gt.getCodewordBucketNumber(Gt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let o=new Ci;for(let l=0;l<r.length;l++){o.format("Row %2d: ",l);for(let f=0;f<r[l].length;f++){let d=r[l][f];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}Gt.CODEWORD_SKEW_SIZE=2,Gt.MAX_ERRORS=3,Gt.MAX_EC_CODEWORDS=512,Gt.errorCorrection=new ds;class Nr{decode(r,o=null){let l=Nr.decode(r,o,!1);if(l==null||l.length===0||l[0]==null)throw te.getNotFoundInstance();return l[0]}decodeMultiple(r,o=null){try{return Nr.decode(r,o,!0)}catch(l){throw l instanceof z||l instanceof U?te.getNotFoundInstance():l}}static decode(r,o,l){const f=new Array,d=kt.detectMultiple(r,o,l);for(const m of d.getPoints()){const p=Gt.decode(d.getBits(),m[4],m[5],m[6],m[7],Nr.getMinCodewordWidth(m),Nr.getMaxCodewordWidth(m)),v=new Se(p.getText(),p.getRawBytes(),void 0,m,Ve.PDF_417);v.putMetadata(st.ERROR_CORRECTION_LEVEL,p.getECLevel());const T=p.getOther();T!=null&&v.putMetadata(st.PDF417_EXTRA_METADATA,T),f.push(v)}return f.map(m=>m)}static getMaxWidth(r,o){return r==null||o==null?0:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMinWidth(r,o){return r==null||o==null?se.MAX_VALUE:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Nr.getMaxWidth(r[0],r[4]),Nr.getMaxWidth(r[6],r[2])*Rt.MODULES_IN_CODEWORD/Rt.MODULES_IN_STOP_PATTERN),Math.max(Nr.getMaxWidth(r[1],r[5]),Nr.getMaxWidth(r[7],r[3])*Rt.MODULES_IN_CODEWORD/Rt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Nr.getMinWidth(r[0],r[4]),Nr.getMinWidth(r[6],r[2])*Rt.MODULES_IN_CODEWORD/Rt.MODULES_IN_STOP_PATTERN),Math.min(Nr.getMinWidth(r[1],r[5]),Nr.getMinWidth(r[7],r[3])*Rt.MODULES_IN_CODEWORD/Rt.MODULES_IN_STOP_PATTERN)))}reset(){}}class qs extends w{}qs.kind="ReaderException";class Ys{constructor(r,o){this.verbose=r===!0,o&&this.setHints(o)}decode(r,o){return o&&this.setHints(o),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const o=!s(r)&&r.get(Pe.TRY_HARDER)===!0,l=s(r)?null:r.get(Pe.POSSIBLE_FORMATS),f=new Array;if(!s(l)){const d=l.some(m=>m===Ve.UPC_A||m===Ve.UPC_E||m===Ve.EAN_13||m===Ve.EAN_8||m===Ve.CODABAR||m===Ve.CODE_39||m===Ve.CODE_93||m===Ve.CODE_128||m===Ve.ITF||m===Ve.RSS_14||m===Ve.RSS_EXPANDED);d&&!o&&f.push(new Bt(r,this.verbose)),l.includes(Ve.QR_CODE)&&f.push(new Vi),l.includes(Ve.DATA_MATRIX)&&f.push(new vi),l.includes(Ve.AZTEC)&&f.push(new Qn),l.includes(Ve.PDF_417)&&f.push(new Nr),d&&o&&f.push(new Bt(r,this.verbose))}f.length===0&&(o||f.push(new Bt(r,this.verbose)),f.push(new Vi),f.push(new vi),f.push(new Qn),f.push(new Nr),o&&f.push(new Bt(r,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new qs("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(r,this.hints)}catch(l){if(l instanceof qs)continue}throw new te("No MultiFormat Readers were able to detect the code.")}}class xl extends Fe{constructor(r=null,o=500){const l=new Ys;l.setHints(r),super(l,o)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class wl extends Fe{constructor(r=500){super(new Nr,r)}}class Bo extends Fe{constructor(r=500){super(new Vi,r)}}var Rs;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(Rs||(Rs={}));var lr=Rs;class Xs{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new xt(r,Int32Array.from([1])))}buildGenerator(r){const o=this.cachedGenerators;if(r>=o.length){let l=o[o.length-1];const f=this.field;for(let d=o.length;d<=r;d++){const m=l.multiply(new xt(f,Int32Array.from([1,f.exp(d-1+f.getGeneratorBase())])));o.push(m),l=m}}return o[r]}encode(r,o){if(o===0)throw new N("No error correction bytes");const l=r.length-o;if(l<=0)throw new N("No data bytes provided");const f=this.buildGenerator(o),d=new Int32Array(l);re.arraycopy(r,0,d,0,l);let m=new xt(this.field,d);m=m.multiplyByMonomial(o,1);const v=m.divide(f)[1].getCoefficients(),T=o-v.length;for(let R=0;R<T;R++)r[l+R]=0;re.arraycopy(v,0,r,l+T,v.length)}}class Yn{constructor(){}static applyMaskPenaltyRule1(r){return Yn.applyMaskPenaltyRule1Internal(r,!0)+Yn.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let o=0;const l=r.getArray(),f=r.getWidth(),d=r.getHeight();for(let m=0;m<d-1;m++){const p=l[m];for(let v=0;v<f-1;v++){const T=p[v];T===p[v+1]&&T===l[m+1][v]&&T===l[m+1][v+1]&&o++}}return Yn.N2*o}static applyMaskPenaltyRule3(r){let o=0;const l=r.getArray(),f=r.getWidth(),d=r.getHeight();for(let m=0;m<d;m++)for(let p=0;p<f;p++){const v=l[m];p+6<f&&v[p]===1&&v[p+1]===0&&v[p+2]===1&&v[p+3]===1&&v[p+4]===1&&v[p+5]===0&&v[p+6]===1&&(Yn.isWhiteHorizontal(v,p-4,p)||Yn.isWhiteHorizontal(v,p+7,p+11))&&o++,m+6<d&&l[m][p]===1&&l[m+1][p]===0&&l[m+2][p]===1&&l[m+3][p]===1&&l[m+4][p]===1&&l[m+5][p]===0&&l[m+6][p]===1&&(Yn.isWhiteVertical(l,p,m-4,m)||Yn.isWhiteVertical(l,p,m+7,m+11))&&o++}return o*Yn.N3}static isWhiteHorizontal(r,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let f=o;f<l;f++)if(r[f]===1)return!1;return!0}static isWhiteVertical(r,o,l,f){l=Math.max(l,0),f=Math.min(f,r.length);for(let d=l;d<f;d++)if(r[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let o=0;const l=r.getArray(),f=r.getWidth(),d=r.getHeight();for(let v=0;v<d;v++){const T=l[v];for(let R=0;R<f;R++)T[R]===1&&o++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*Yn.N4}static getDataMaskBit(r,o,l){let f,d;switch(r){case 0:f=l+o&1;break;case 1:f=l&1;break;case 2:f=o%3;break;case 3:f=(l+o)%3;break;case 4:f=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,f=(d&1)+d%3;break;case 6:d=l*o,f=(d&1)+d%3&1;break;case 7:d=l*o,f=d%3+(l+o&1)&1;break;default:throw new N("Invalid mask pattern: "+r)}return f===0}static applyMaskPenaltyRule1Internal(r,o){let l=0;const f=o?r.getHeight():r.getWidth(),d=o?r.getWidth():r.getHeight(),m=r.getArray();for(let p=0;p<f;p++){let v=0,T=-1;for(let R=0;R<d;R++){const k=o?m[p][R]:m[R][p];k===T?v++:(v>=5&&(l+=Yn.N1+(v-5)),v=1,T=k)}v>=5&&(l+=Yn.N1+(v-5))}return l}}Yn.N1=3,Yn.N2=3,Yn.N3=40,Yn.N4=10;class Ws{constructor(r,o){this.width=r,this.height=o;const l=new Array(o);for(let f=0;f!==o;f++)l[f]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,o){return this.bytes[o][r]}getArray(){return this.bytes}setNumber(r,o,l){this.bytes[o][r]=l}setBoolean(r,o,l){this.bytes[o][r]=l?1:0}clear(r){for(const o of this.bytes)ue.fill(o,r)}equals(r){if(!(r instanceof Ws))return!1;const o=r;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,f=this.height;l<f;++l){const d=this.bytes[l],m=o.bytes[l];for(let p=0,v=this.width;p<v;++p)if(d[p]!==m[p])return!1}return!0}toString(){const r=new W;for(let o=0,l=this.height;o<l;++o){const f=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(f[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class ui{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new W;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<ui.NUM_MASK_PATTERNS}}ui.NUM_MASK_PATTERNS=8;class Tn extends w{}Tn.kind="WriterException";class Tt{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,o,l,f,d){Tt.clearMatrix(d),Tt.embedBasicPatterns(l,d),Tt.embedTypeInfo(o,f,d),Tt.maybeEmbedVersionInfo(l,d),Tt.embedDataBits(r,f,d)}static embedBasicPatterns(r,o){Tt.embedPositionDetectionPatternsAndSeparators(o),Tt.embedDarkDotAtLeftBottomCorner(o),Tt.maybeEmbedPositionAdjustmentPatterns(r,o),Tt.embedTimingPatterns(o)}static embedTypeInfo(r,o,l){const f=new fe;Tt.makeTypeInfoBits(r,o,f);for(let d=0,m=f.getSize();d<m;++d){const p=f.get(f.getSize()-1-d),v=Tt.TYPE_INFO_COORDINATES[d],T=v[0],R=v[1];if(l.setBoolean(T,R,p),d<8){const k=l.getWidth()-d-1;l.setBoolean(k,8,p)}else{const B=l.getHeight()-7+(d-8);l.setBoolean(8,B,p)}}}static maybeEmbedVersionInfo(r,o){if(r.getVersionNumber()<7)return;const l=new fe;Tt.makeVersionInfoBits(r,l);let f=6*3-1;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const p=l.get(f);f--,o.setBoolean(d,o.getHeight()-11+m,p),o.setBoolean(o.getHeight()-11+m,d,p)}}static embedDataBits(r,o,l){let f=0,d=-1,m=l.getWidth()-1,p=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);p>=0&&p<l.getHeight();){for(let v=0;v<2;++v){const T=m-v;if(!Tt.isEmpty(l.get(T,p)))continue;let R;f<r.getSize()?(R=r.get(f),++f):R=!1,o!==255&&Yn.getDataMaskBit(o,T,p)&&(R=!R),l.setBoolean(T,p,R)}p+=d}d=-d,p+=d,m-=2}if(f!==r.getSize())throw new Tn("Not all bits consumed: "+f+"/"+r.getSize())}static findMSBSet(r){return 32-se.numberOfLeadingZeros(r)}static calculateBCHCode(r,o){if(o===0)throw new N("0 polynomial");const l=Tt.findMSBSet(o);for(r<<=l-1;Tt.findMSBSet(r)>=l;)r^=o<<Tt.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,o,l){if(!ui.isValidMaskPattern(o))throw new Tn("Invalid mask pattern");const f=r.getBits()<<3|o;l.appendBits(f,5);const d=Tt.calculateBCHCode(f,Tt.TYPE_INFO_POLY);l.appendBits(d,10);const m=new fe;if(m.appendBits(Tt.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Tn("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,o){o.appendBits(r.getVersionNumber(),6);const l=Tt.calculateBCHCode(r.getVersionNumber(),Tt.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Tn("should not happen but we got: "+o.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let o=8;o<r.getWidth()-8;++o){const l=(o+1)%2;Tt.isEmpty(r.get(o,6))&&r.setNumber(o,6,l),Tt.isEmpty(r.get(6,o))&&r.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Tn;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,o,l){for(let f=0;f<8;++f){if(!Tt.isEmpty(l.get(r+f,o)))throw new Tn;l.setNumber(r+f,o,0)}}static embedVerticalSeparationPattern(r,o,l){for(let f=0;f<7;++f){if(!Tt.isEmpty(l.get(r,o+f)))throw new Tn;l.setNumber(r,o+f,0)}}static embedPositionAdjustmentPattern(r,o,l){for(let f=0;f<5;++f){const d=Tt.POSITION_ADJUSTMENT_PATTERN[f];for(let m=0;m<5;++m)l.setNumber(r+m,o+f,d[m])}}static embedPositionDetectionPattern(r,o,l){for(let f=0;f<7;++f){const d=Tt.POSITION_DETECTION_PATTERN[f];for(let m=0;m<7;++m)l.setNumber(r+m,o+f,d[m])}}static embedPositionDetectionPatternsAndSeparators(r){const o=Tt.POSITION_DETECTION_PATTERN[0].length;Tt.embedPositionDetectionPattern(0,0,r),Tt.embedPositionDetectionPattern(r.getWidth()-o,0,r),Tt.embedPositionDetectionPattern(0,r.getWidth()-o,r);const l=8;Tt.embedHorizontalSeparationPattern(0,l-1,r),Tt.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),Tt.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const f=7;Tt.embedVerticalSeparationPattern(f,0,r),Tt.embedVerticalSeparationPattern(r.getHeight()-f-1,0,r),Tt.embedVerticalSeparationPattern(f,r.getHeight()-f,r)}static maybeEmbedPositionAdjustmentPatterns(r,o){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,f=Tt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=f.length;d!==m;d++){const p=f[d];if(p>=0)for(let v=0;v!==m;v++){const T=f[v];T>=0&&Tt.isEmpty(o.get(T,p))&&Tt.embedPositionAdjustmentPattern(T-2,p-2,o)}}}}Tt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Tt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Tt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Tt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Tt.VERSION_INFO_POLY=7973,Tt.TYPE_INFO_POLY=1335,Tt.TYPE_INFO_MASK_PATTERN=21522;class bl{constructor(r,o){this.dataBytes=r,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class On{constructor(){}static calculateMaskPenalty(r){return Yn.applyMaskPenaltyRule1(r)+Yn.applyMaskPenaltyRule2(r)+Yn.applyMaskPenaltyRule3(r)+Yn.applyMaskPenaltyRule4(r)}static encode(r,o,l=null){let f=On.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(lr.CHARACTER_SET)!==void 0;d&&(f=l.get(lr.CHARACTER_SET).toString());const m=this.chooseMode(r,f),p=new fe;if(m===_t.BYTE&&(d||On.DEFAULT_BYTE_MODE_ENCODING!==f)){const it=L.getCharacterSetECIByName(f);it!==void 0&&this.appendECI(it,p)}this.appendModeInfo(m,p);const v=new fe;this.appendBytes(r,m,v,f);let T;if(l!==null&&l.get(lr.QR_VERSION)!==void 0){const it=Number.parseInt(l.get(lr.QR_VERSION).toString(),10);T=rt.getVersionForNumber(it);const $e=this.calculateBitsNeeded(m,p,v,T);if(!this.willFit($e,T,o))throw new Tn("Data too big for requested version")}else T=this.recommendVersion(o,m,p,v);const R=new fe;R.appendBitArray(p);const k=m===_t.BYTE?v.getSizeInBytes():r.length;this.appendLengthInfo(k,T,m,R),R.appendBitArray(v);const B=T.getECBlocksForLevel(o),Z=T.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(Z,R);const oe=this.interleaveWithECBytes(R,T.getTotalCodewords(),Z,B.getNumBlocks()),ce=new ui;ce.setECLevel(o),ce.setMode(m),ce.setVersion(T);const Ce=T.getDimensionForVersion(),Le=new Ws(Ce,Ce),nt=this.chooseMaskPattern(oe,o,T,Le);return ce.setMaskPattern(nt),Tt.buildMatrix(oe,o,T,nt,Le),ce.setMatrix(Le),ce}static recommendVersion(r,o,l,f){const d=this.calculateBitsNeeded(o,l,f,rt.getVersionForNumber(1)),m=this.chooseVersion(d,r),p=this.calculateBitsNeeded(o,l,f,m);return this.chooseVersion(p,r)}static calculateBitsNeeded(r,o,l,f){return o.getSize()+r.getCharacterCountBits(f)+l.getSize()}static getAlphanumericCode(r){return r<On.ALPHANUMERIC_TABLE.length?On.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,o=null){if(L.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(r))return _t.KANJI;let l=!1,f=!1;for(let d=0,m=r.length;d<m;++d){const p=r.charAt(d);if(On.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)f=!0;else return _t.BYTE}return f?_t.ALPHANUMERIC:l?_t.NUMERIC:_t.BYTE}static isOnlyDoubleByteKanji(r){let o;try{o=J.encode(r,L.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let f=0;f<l;f+=2){const d=o[f]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,o,l,f){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let p=0;p<ui.NUM_MASK_PATTERNS;p++){Tt.buildMatrix(r,o,l,p,f);let v=this.calculateMaskPenalty(f);v<d&&(d=v,m=p)}return m}static chooseVersion(r,o){for(let l=1;l<=40;l++){const f=rt.getVersionForNumber(l);if(On.willFit(r,f,o))return f}throw new Tn("Data too big")}static willFit(r,o,l){const f=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),p=f-m,v=(r+7)/8;return p>=v}static terminateBits(r,o){const l=r*8;if(o.getSize()>l)throw new Tn("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let m=f;m<8;m++)o.appendBit(!1);const d=r-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits(m&1?17:236,8);if(o.getSize()!==l)throw new Tn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,o,l,f,d,m){if(f>=l)throw new Tn("Block ID too large");const p=r%l,v=l-p,T=Math.floor(r/l),R=T+1,k=Math.floor(o/l),B=k+1,Z=T-k,oe=R-B;if(Z!==oe)throw new Tn("EC bytes mismatch");if(l!==v+p)throw new Tn("RS blocks mismatch");if(r!==(k+Z)*v+(B+oe)*p)throw new Tn("Total bytes mismatch");f<v?(d[0]=k,m[0]=Z):(d[0]=B,m[0]=oe)}static interleaveWithECBytes(r,o,l,f){if(r.getSizeInBytes()!==l)throw new Tn("Number of bits and data bytes does not match");let d=0,m=0,p=0;const v=new Array;for(let R=0;R<f;++R){const k=new Int32Array(1),B=new Int32Array(1);On.getNumDataBytesAndNumECBytesForBlockID(o,l,f,R,k,B);const Z=k[0],oe=new Uint8Array(Z);r.toBytes(8*d,oe,0,Z);const ce=On.generateECBytes(oe,B[0]);v.push(new bl(oe,ce)),m=Math.max(m,Z),p=Math.max(p,ce.length),d+=k[0]}if(l!==d)throw new Tn("Data bytes does not match offset");const T=new fe;for(let R=0;R<m;++R)for(const k of v){const B=k.getDataBytes();R<B.length&&T.appendBits(B[R],8)}for(let R=0;R<p;++R)for(const k of v){const B=k.getErrorCorrectionBytes();R<B.length&&T.appendBits(B[R],8)}if(o!==T.getSizeInBytes())throw new Tn("Interleaving error: "+o+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(r,o){const l=r.length,f=new Int32Array(l+o);for(let m=0;m<l;m++)f[m]=r[m]&255;new Xs(ft.QR_CODE_FIELD_256).encode(f,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=f[l+m];return d}static appendModeInfo(r,o){o.appendBits(r.getBits(),4)}static appendLengthInfo(r,o,l,f){const d=l.getCharacterCountBits(o);if(r>=1<<d)throw new Tn(r+" is bigger than "+((1<<d)-1));f.appendBits(r,d)}static appendBytes(r,o,l,f){switch(o){case _t.NUMERIC:On.appendNumericBytes(r,l);break;case _t.ALPHANUMERIC:On.appendAlphanumericBytes(r,l);break;case _t.BYTE:On.append8BitBytes(r,l,f);break;case _t.KANJI:On.appendKanjiBytes(r,l);break;default:throw new Tn("Invalid mode: "+o)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const o=On.getDigit(r);return o>=0&&o<=9}static appendNumericBytes(r,o){const l=r.length;let f=0;for(;f<l;){const d=On.getDigit(r.charAt(f));if(f+2<l){const m=On.getDigit(r.charAt(f+1)),p=On.getDigit(r.charAt(f+2));o.appendBits(d*100+m*10+p,10),f+=3}else if(f+1<l){const m=On.getDigit(r.charAt(f+1));o.appendBits(d*10+m,7),f+=2}else o.appendBits(d,4),f++}}static appendAlphanumericBytes(r,o){const l=r.length;let f=0;for(;f<l;){const d=On.getAlphanumericCode(r.charCodeAt(f));if(d===-1)throw new Tn;if(f+1<l){const m=On.getAlphanumericCode(r.charCodeAt(f+1));if(m===-1)throw new Tn;o.appendBits(d*45+m,11),f+=2}else o.appendBits(d,6),f++}}static append8BitBytes(r,o,l){let f;try{f=J.encode(r,l)}catch(d){throw new Tn(d)}for(let d=0,m=f.length;d!==m;d++){const p=f[d];o.appendBits(p,8)}}static appendKanjiBytes(r,o){let l;try{l=J.encode(r,L.SJIS)}catch(d){throw new Tn(d)}const f=l.length;for(let d=0;d<f;d+=2){const m=l[d]&255,p=l[d+1]&255,v=m<<8&4294967295|p;let T=-1;if(v>=33088&&v<=40956?T=v-33088:v>=57408&&v<=60351&&(T=v-49472),T===-1)throw new Tn("Invalid byte sequence");const R=(T>>8)*192+(T&255);o.appendBits(R,13)}}static appendECI(r,o){o.appendBits(_t.ECI.getBits(),4),o.appendBits(r.getValue(),8)}}On.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),On.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class Hi{write(r,o,l,f=null){if(r.length===0)throw new N("Found empty contents");if(o<0||l<0)throw new N("Requested dimensions are too small: "+o+"x"+l);let d=Ot.L,m=Hi.QUIET_ZONE_SIZE;f!==null&&(f.get(lr.ERROR_CORRECTION)!==void 0&&(d=Ot.fromString(f.get(lr.ERROR_CORRECTION).toString())),f.get(lr.MARGIN)!==void 0&&(m=Number.parseInt(f.get(lr.MARGIN).toString(),10)));const p=On.encode(r,d,f);return this.renderResult(p,o,l,m)}writeToDom(r,o,l,f,d=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(o,l,f,d);r&&r.appendChild(m)}renderResult(r,o,l,f){const d=r.getMatrix();if(d===null)throw new le;const m=d.getWidth(),p=d.getHeight(),v=m+f*2,T=p+f*2,R=Math.max(o,v),k=Math.max(l,T),B=Math.min(Math.floor(R/v),Math.floor(k/T)),Z=Math.floor((R-m*B)/2),oe=Math.floor((k-p*B)/2),ce=this.createSVGElement(R,k);for(let Ce=0,Le=oe;Ce<p;Ce++,Le+=B)for(let nt=0,it=Z;nt<m;nt++,it+=B)if(d.get(nt,Ce)===1){const $e=this.createSvgRectElement(it,Le,B,B);ce.appendChild($e)}return ce}createSVGElement(r,o){const l=document.createElementNS(Hi.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(r,o,l,f){const d=document.createElementNS(Hi.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",f.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Hi.QUIET_ZONE_SIZE=4,Hi.SVG_NS="http://www.w3.org/2000/svg";class wr{encode(r,o,l,f,d){if(r.length===0)throw new N("Found empty contents");if(o!==Ve.QR_CODE)throw new N("Can only encode QR_CODE, but got "+o);if(l<0||f<0)throw new N(`Requested dimensions are too small: ${l}x${f}`);let m=Ot.L,p=wr.QUIET_ZONE_SIZE;d!==null&&(d.get(lr.ERROR_CORRECTION)!==void 0&&(m=Ot.fromString(d.get(lr.ERROR_CORRECTION).toString())),d.get(lr.MARGIN)!==void 0&&(p=Number.parseInt(d.get(lr.MARGIN).toString(),10)));const v=On.encode(r,m,d);return wr.renderResult(v,l,f,p)}static renderResult(r,o,l,f){const d=r.getMatrix();if(d===null)throw new le;const m=d.getWidth(),p=d.getHeight(),v=m+f*2,T=p+f*2,R=Math.max(o,v),k=Math.max(l,T),B=Math.min(Math.floor(R/v),Math.floor(k/T)),Z=Math.floor((R-m*B)/2),oe=Math.floor((k-p*B)/2),ce=new ve(R,k);for(let Ce=0,Le=oe;Ce<p;Ce++,Le+=B)for(let nt=0,it=Z;nt<m;nt++,it+=B)d.get(nt,Ce)===1&&ce.setRegion(it,Le,B,B);return ce}}wr.QUIET_ZONE_SIZE=4;class El{encode(r,o,l,f,d){let m;switch(o){case Ve.QR_CODE:m=new wr;break;default:throw new N("No encoder available for format "+o)}return m.encode(r,o,l,f,d)}}class Oi extends Xe{constructor(r,o,l,f,d,m,p,v){if(super(m,p),this.yuvData=r,this.dataWidth=o,this.dataHeight=l,this.left=f,this.top=d,f+m>o||d+p>l)throw new N("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(m,p)}getRow(r,o){if(r<0||r>=this.getHeight())throw new N("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(r+this.top)*this.dataWidth+this.left;return re.arraycopy(this.yuvData,f,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=r*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return re.arraycopy(this.yuvData,d,f,0,l),f;for(let m=0;m<o;m++){const p=m*r;re.arraycopy(this.yuvData,d,f,p,r),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(r,o,l,f){return new Oi(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+o,l,f,!1)}renderThumbnail(){const r=this.getWidth()/Oi.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Oi.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*o),f=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const p=m*r;for(let v=0;v<r;v++){const T=f[d+v*Oi.THUMBNAIL_SCALE_FACTOR]&255;l[p+v]=4278190080|T*65793}d+=this.dataWidth*Oi.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Oi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Oi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,o){const l=this.yuvData;for(let f=0,d=this.top*this.dataWidth+this.left;f<o;f++,d+=this.dataWidth){const m=d+r/2;for(let p=d,v=d+r-1;p<m;p++,v--){const T=l[p];l[p]=l[v],l[v]=T}}}invert(){return new ht(this)}}Oi.THUMBNAIL_SCALE_FACTOR=2;class Gi extends Xe{constructor(r,o,l,f,d,m,p){if(super(o,l),this.dataWidth=f,this.dataHeight=d,this.left=m,this.top=p,r.BYTES_PER_ELEMENT===4){const v=o*l,T=new Uint8ClampedArray(v);for(let R=0;R<v;R++){const k=r[R],B=k>>16&255,Z=k>>7&510,oe=k&255;T[R]=(B+Z+oe)/4&255}this.luminances=T}else this.luminances=r;if(f===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(r,o){if(r<0||r>=this.getHeight())throw new N("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(r+this.top)*this.dataWidth+this.left;return re.arraycopy(this.luminances,f,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=r*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return re.arraycopy(this.luminances,d,f,0,l),f;for(let m=0;m<o;m++){const p=m*r;re.arraycopy(this.luminances,d,f,p,r),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(r,o,l,f){return new Gi(this.luminances,l,f,this.dataWidth,this.dataHeight,this.left+r,this.top+o)}invert(){return new ht(this)}}class x extends L{static forName(r){return this.getCharacterSetECIByName(r)}}class I{}I.ISO_8859_1=L.ISO8859_1;class D{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class G{static singletonList(r){return[r]}static min(r,o){return r.sort(o)[0]}}class _e{constructor(r){this.previous=r}getPrevious(){return this.previous}}class ke extends _e{constructor(r,o,l){super(r),this.value=o,this.bitCount=l}appendTo(r,o){r.appendBits(this.value,this.bitCount)}add(r,o){return new ke(this,r,o)}addBinaryShift(r,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ke(this,r,o)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+se.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class ct extends ke{constructor(r,o,l){super(r,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(r,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(r,o){return new ct(this,r,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function un(O,r,o){return new ct(O,r,o)}function rr(O,r,o){return new ke(O,r,o)}const hn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Xn=0,cr=1,br=2,Pr=3,Rr=4,jo=new ke(null,0,0),qa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Hu(O){for(let r of O)ue.fill(r,-1);return O[Xn][Rr]=0,O[cr][Rr]=0,O[cr][Xn]=28,O[Pr][Rr]=0,O[br][Rr]=0,O[br][Xn]=15,O}const Ec=Hu(ue.createInt32Array(6,6));class qi{constructor(r,o,l,f){this.token=r,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,o){let l=this.bitCount,f=this.token;if(r!==this.mode){let m=qa[this.mode][r];f=rr(f,m&65535,m>>16),l+=m>>16}let d=r===br?4:5;return f=rr(f,o,d),new qi(f,r,0,l+d)}shiftAndAppend(r,o){let l=this.token,f=this.mode===br?4:5;return l=rr(l,Ec[this.mode][r],f),l=rr(l,o,5),new qi(l,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(r){let o=this.token,l=this.mode,f=this.bitCount;if(this.mode===Rr||this.mode===br){let p=qa[l][Xn];o=rr(o,p&65535,p>>16),f+=p>>16,l=Xn}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new qi(o,l,this.binaryShiftByteCount+1,f+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=un(o,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new qi(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let o=this.bitCount+(qa[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?o+=qi.calculateBinaryShiftCost(r)-qi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(o+=10),o<=r.bitCount}toBitArray(r){let o=[];for(let f=this.endBinaryShift(r.length).token;f!==null;f=f.getPrevious())o.unshift(f);let l=new fe;for(const f of o)f.appendTo(l,r);return l}toString(){return ee.format("%s bits=%d bytes=%d",hn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}qi.INITIAL_STATE=new qi(jo,Xn,0,0);function vc(O){const r=ee.getCharCode(" "),o=ee.getCharCode("."),l=ee.getCharCode(",");O[Xn][r]=1;const f=ee.getCharCode("Z"),d=ee.getCharCode("A");for(let B=d;B<=f;B++)O[Xn][B]=B-d+2;O[cr][r]=1;const m=ee.getCharCode("z"),p=ee.getCharCode("a");for(let B=p;B<=m;B++)O[cr][B]=B-p+2;O[br][r]=1;const v=ee.getCharCode("9"),T=ee.getCharCode("0");for(let B=T;B<=v;B++)O[br][B]=B-T+2;O[br][l]=12,O[br][o]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<R.length;B++)O[Pr][ee.getCharCode(R[B])]=B;const k=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<k.length;B++)ee.getCharCode(k[B])>0&&(O[Rr][ee.getCharCode(k[B])]=B);return O}const vl=vc(ue.createInt32Array(5,256));class Ya{constructor(r){this.text=r}encode(){const r=ee.getCharCode(" "),o=ee.getCharCode(`
`);let l=G.singletonList(qi.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case ee.getCharCode("\r"):m=p===o?2:0;break;case ee.getCharCode("."):m=p===r?3:0;break;case ee.getCharCode(","):m=p===r?4:0;break;case ee.getCharCode(":"):m=p===r?5:0;break;default:m=0}m>0?(l=Ya.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return G.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,o){const l=[];for(let f of r)this.updateStateForChar(f,o,l);return Ya.simplifyStates(l)}updateStateForChar(r,o,l){let f=this.text[o]&255,d=vl[r.getMode()][f]>0,m=null;for(let p=0;p<=Rr;p++){let v=vl[p][f];if(v>0){if(m==null&&(m=r.endBinaryShift(o)),!d||p===r.getMode()||p===br){const T=m.latchAndAppend(p,v);l.push(T)}if(!d&&Ec[r.getMode()][p]>=0){const T=m.shiftAndAppend(p,v);l.push(T)}}}if(r.getBinaryShiftByteCount()>0||vl[r.getMode()][f]===0){let p=r.addBinaryShiftChar(o);l.push(p)}}static updateStateListForPair(r,o,l){const f=[];for(let d of r)this.updateStateForPair(d,o,l,f);return this.simplifyStates(f)}static updateStateForPair(r,o,l,f){let d=r.endBinaryShift(o);if(f.push(d.latchAndAppend(Rr,l)),r.getMode()!==Rr&&f.push(d.shiftAndAppend(Rr,l)),l===3||l===4){let m=d.latchAndAppend(br,16-l).latchAndAppend(br,1);f.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(m)}}static simplifyStates(r){let o=[];for(const l of r){let f=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){f=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}f&&o.push(l)}return o}}class fn{constructor(){}static encodeBytes(r){return fn.encode(r,fn.DEFAULT_EC_PERCENT,fn.DEFAULT_AZTEC_LAYERS)}static encode(r,o,l){let f=new Ya(r).encode(),d=se.truncDivision(f.getSize()*o,100)+11,m=f.getSize()+d,p,v,T,R,k;if(l!==fn.DEFAULT_AZTEC_LAYERS){if(p=l<0,v=Math.abs(l),v>(p?fn.MAX_NB_BITS_COMPACT:fn.MAX_NB_BITS))throw new N(ee.format("Illegal value %s for layers",l));T=fn.totalBitsInLayer(v,p),R=fn.WORD_SIZE[v];let $e=T-T%R;if(k=fn.stuffBits(f,R),k.getSize()+d>$e)throw new N("Data to large for user specified layer");if(p&&k.getSize()>R*64)throw new N("Data to large for user specified layer")}else{R=0,k=null;for(let $e=0;;$e++){if($e>fn.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(p=$e<=3,v=p?$e+1:$e,T=fn.totalBitsInLayer(v,p),m>T)continue;(k==null||R!==fn.WORD_SIZE[v])&&(R=fn.WORD_SIZE[v],k=fn.stuffBits(f,R));let en=T-T%R;if(!(p&&k.getSize()>R*64)&&k.getSize()+d<=en)break}}let B=fn.generateCheckWords(k,T,R),Z=k.getSize()/R,oe=fn.generateModeMessage(p,v,Z),ce=(p?11:14)+v*4,Ce=new Int32Array(ce),Le;if(p){Le=ce;for(let $e=0;$e<Ce.length;$e++)Ce[$e]=$e}else{Le=ce+1+2*se.truncDivision(se.truncDivision(ce,2)-1,15);let $e=se.truncDivision(ce,2),en=se.truncDivision(Le,2);for(let Lt=0;Lt<$e;Lt++){let hi=Lt+se.truncDivision(Lt,15);Ce[$e-Lt-1]=en-hi-1,Ce[$e+Lt]=en+hi+1}}let nt=new ve(Le);for(let $e=0,en=0;$e<v;$e++){let Lt=(v-$e)*4+(p?9:12);for(let hi=0;hi<Lt;hi++){let Yi=hi*2;for(let fi=0;fi<2;fi++)B.get(en+Yi+fi)&&nt.set(Ce[$e*2+fi],Ce[$e*2+hi]),B.get(en+Lt*2+Yi+fi)&&nt.set(Ce[$e*2+hi],Ce[ce-1-$e*2-fi]),B.get(en+Lt*4+Yi+fi)&&nt.set(Ce[ce-1-$e*2-fi],Ce[ce-1-$e*2-hi]),B.get(en+Lt*6+Yi+fi)&&nt.set(Ce[ce-1-$e*2-hi],Ce[$e*2+fi])}en+=Lt*8}if(fn.drawModeMessage(nt,p,Le,oe),p)fn.drawBullsEye(nt,se.truncDivision(Le,2),5);else{fn.drawBullsEye(nt,se.truncDivision(Le,2),7);for(let $e=0,en=0;$e<se.truncDivision(ce,2)-1;$e+=15,en+=16)for(let Lt=se.truncDivision(Le,2)&1;Lt<Le;Lt+=2)nt.set(se.truncDivision(Le,2)-en,Lt),nt.set(se.truncDivision(Le,2)+en,Lt),nt.set(Lt,se.truncDivision(Le,2)-en),nt.set(Lt,se.truncDivision(Le,2)+en)}let it=new D;return it.setCompact(p),it.setSize(Le),it.setLayers(v),it.setCodeWords(Z),it.setMatrix(nt),it}static drawBullsEye(r,o,l){for(let f=0;f<l;f+=2)for(let d=o-f;d<=o+f;d++)r.set(d,o-f),r.set(d,o+f),r.set(o-f,d),r.set(o+f,d);r.set(o-l,o-l),r.set(o-l+1,o-l),r.set(o-l,o-l+1),r.set(o+l,o-l),r.set(o+l,o-l+1),r.set(o+l,o+l-1)}static generateModeMessage(r,o,l){let f=new fe;return r?(f.appendBits(o-1,2),f.appendBits(l-1,6),f=fn.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(l-1,11),f=fn.generateCheckWords(f,40,4)),f}static drawModeMessage(r,o,l,f){let d=se.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let p=d-3+m;f.get(m)&&r.set(p,d-5),f.get(m+7)&&r.set(d+5,p),f.get(20-m)&&r.set(p,d+5),f.get(27-m)&&r.set(d-5,p)}else for(let m=0;m<10;m++){let p=d-5+m+se.truncDivision(m,5);f.get(m)&&r.set(p,d-7),f.get(m+10)&&r.set(d+7,p),f.get(29-m)&&r.set(p,d+7),f.get(39-m)&&r.set(d-7,p)}}static generateCheckWords(r,o,l){let f=r.getSize()/l,d=new Xs(fn.getGF(l)),m=se.truncDivision(o,l),p=fn.bitsToWords(r,l,m);d.encode(p,m-f);let v=o%l,T=new fe;T.appendBits(0,v);for(const R of Array.from(p))T.appendBits(R,l);return T}static bitsToWords(r,o,l){let f=new Int32Array(l),d,m;for(d=0,m=r.getSize()/o;d<m;d++){let p=0;for(let v=0;v<o;v++)p|=r.get(d*o+v)?1<<o-v-1:0;f[d]=p}return f}static getGF(r){switch(r){case 4:return ft.AZTEC_PARAM;case 6:return ft.AZTEC_DATA_6;case 8:return ft.AZTEC_DATA_8;case 10:return ft.AZTEC_DATA_10;case 12:return ft.AZTEC_DATA_12;default:throw new N("Unsupported word size "+r)}}static stuffBits(r,o){let l=new fe,f=r.getSize(),d=(1<<o)-2;for(let m=0;m<f;m+=o){let p=0;for(let v=0;v<o;v++)(m+v>=f||r.get(m+v))&&(p|=1<<o-1-v);(p&d)===d?(l.appendBits(p&d,o),m--):p&d?l.appendBits(p,o):(l.appendBits(p|1,o),m--)}return l}static totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}fn.DEFAULT_EC_PERCENT=33,fn.DEFAULT_AZTEC_LAYERS=0,fn.MAX_NB_BITS=32,fn.MAX_NB_BITS_COMPACT=4,fn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class _l{encode(r,o,l,f){return this.encodeWithHints(r,o,l,f,null)}encodeWithHints(r,o,l,f,d){let m=I.ISO_8859_1,p=fn.DEFAULT_EC_PERCENT,v=fn.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(lr.CHARACTER_SET)&&(m=x.forName(d.get(lr.CHARACTER_SET).toString())),d.has(lr.ERROR_CORRECTION)&&(p=se.parseInt(d.get(lr.ERROR_CORRECTION).toString())),d.has(lr.AZTEC_LAYERS)&&(v=se.parseInt(d.get(lr.AZTEC_LAYERS).toString()))),_l.encodeLayers(r,o,l,f,m,p,v)}static encodeLayers(r,o,l,f,d,m,p){if(o!==Ve.AZTEC)throw new N("Can only encode AZTEC, but got "+o);let v=fn.encode(ee.getBytes(r,d),m,p);return _l.renderResult(v,l,f)}static renderResult(r,o,l){let f=r.getMatrix();if(f==null)throw new le;let d=f.getWidth(),m=f.getHeight(),p=Math.max(o,d),v=Math.max(l,m),T=Math.min(p/d,v/m),R=(p-d*T)/2,k=(v-m*T)/2,B=new ve(p,v);for(let Z=0,oe=k;Z<m;Z++,oe+=T)for(let ce=0,Ce=R;ce<d;ce++,Ce+=T)f.get(ce,Z)&&B.setRegion(Ce,oe,T,T);return B}}t.AbstractExpandedDecoder=jn,t.ArgumentException=S,t.ArithmeticException=Ft,t.AztecCode=D,t.AztecCodeReader=Qn,t.AztecCodeWriter=_l,t.AztecDecoder=De,t.AztecDetector=Nn,t.AztecDetectorResult=ot,t.AztecEncoder=fn,t.AztecHighLevelEncoder=Ya,t.AztecPoint=sn,t.BarcodeFormat=Ve,t.Binarizer=X,t.BinaryBitmap=P,t.BitArray=fe,t.BitMatrix=ve,t.BitSource=fr,t.BrowserAztecCodeReader=sr,t.BrowserBarcodeReader=nn,t.BrowserCodeReader=Fe,t.BrowserDatamatrixCodeReader=cn,t.BrowserMultiFormatReader=xl,t.BrowserPDF417Reader=wl,t.BrowserQRCodeReader=Bo,t.BrowserQRCodeSvgWriter=Hi,t.CharacterSetECI=L,t.ChecksumException=U,t.Code128Reader=He,t.Code39Reader=xn,t.DataMatrixDecodedBitStreamParser=Ei,t.DataMatrixReader=vi,t.DecodeHintType=Pe,t.DecoderResult=vt,t.DefaultGridSampler=at,t.DetectorResult=Mt,t.EAN13Reader=Kn,t.EncodeHintType=lr,t.Exception=w,t.FormatException=z,t.GenericGF=ft,t.GenericGFPoly=xt,t.GlobalHistogramBinarizer=Ae,t.GridSampler=Et,t.GridSamplerInstance=It,t.HTMLCanvasElementLuminanceSource=Q,t.HybridBinarizer=Te,t.ITFReader=Ut,t.IllegalArgumentException=N,t.IllegalStateException=le,t.InvertedLuminanceSource=ht,t.LuminanceSource=Xe,t.MathUtils=Be,t.MultiFormatOneDReader=Bt,t.MultiFormatReader=Ys,t.MultiFormatWriter=El,t.NotFoundException=te,t.OneDReader=Jt,t.PDF417DecodedBitStreamParser=Oe,t.PDF417DecoderErrorCorrection=ds,t.PDF417Reader=Nr,t.PDF417ResultMetadata=ca,t.PerspectiveTransform=et,t.PlanarYUVLuminanceSource=Oi,t.QRCodeByteMatrix=Ws,t.QRCodeDataMask=Gn,t.QRCodeDecodedBitStreamParser=wn,t.QRCodeDecoderErrorCorrectionLevel=Ot,t.QRCodeDecoderFormatInformation=vn,t.QRCodeEncoder=On,t.QRCodeEncoderQRCode=ui,t.QRCodeMaskUtil=Yn,t.QRCodeMatrixUtil=Tt,t.QRCodeMode=_t,t.QRCodeReader=Vi,t.QRCodeVersion=rt,t.QRCodeWriter=wr,t.RGBLuminanceSource=Gi,t.RSS14Reader=bt,t.RSSExpandedReader=he,t.ReaderException=qs,t.ReedSolomonDecoder=Ne,t.ReedSolomonEncoder=Xs,t.ReedSolomonException=qe,t.Result=Se,t.ResultMetadataType=st,t.ResultPoint=Ue,t.StringUtils=ee,t.UnsupportedOperationException=F,t.VideoInputDevice=ge,t.WhiteRectangleDetector=We,t.WriterException=Tn,t.ZXingArrays=ue,t.ZXingCharset=x,t.ZXingInteger=se,t.ZXingStandardCharsets=I,t.ZXingStringBuilder=W,t.ZXingStringEncoding=J,t.ZXingSystem=re,t.createAbstractExpandedDecoder=ae,Object.defineProperty(t,"__esModule",{value:!0})})}(gu,gu.exports)),gu.exports}var ir=JN();const eR=Of(ir),tR=e_({__proto__:null,default:eR},[ir]);var Ax=function(){function i(e,t,s){if(this.formatMap=new Map([[pt.QR_CODE,ir.BarcodeFormat.QR_CODE],[pt.AZTEC,ir.BarcodeFormat.AZTEC],[pt.CODABAR,ir.BarcodeFormat.CODABAR],[pt.CODE_39,ir.BarcodeFormat.CODE_39],[pt.CODE_93,ir.BarcodeFormat.CODE_93],[pt.CODE_128,ir.BarcodeFormat.CODE_128],[pt.DATA_MATRIX,ir.BarcodeFormat.DATA_MATRIX],[pt.MAXICODE,ir.BarcodeFormat.MAXICODE],[pt.ITF,ir.BarcodeFormat.ITF],[pt.EAN_13,ir.BarcodeFormat.EAN_13],[pt.EAN_8,ir.BarcodeFormat.EAN_8],[pt.PDF_417,ir.BarcodeFormat.PDF_417],[pt.RSS_14,ir.BarcodeFormat.RSS_14],[pt.RSS_EXPANDED,ir.BarcodeFormat.RSS_EXPANDED],[pt.UPC_A,ir.BarcodeFormat.UPC_A],[pt.UPC_E,ir.BarcodeFormat.UPC_E],[pt.UPC_EAN_EXTENSION,ir.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!tR)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=s;var c=this.createZXingFormats(e),h=new Map;h.set(ir.DecodeHintType.POSSIBLE_FORMATS,c),h.set(ir.DecodeHintType.TRY_HARDER,!1),this.hints=h}return i.prototype.decodeAsync=function(e){var t=this;return new Promise(function(s,c){try{s(t.decode(e))}catch(h){c(h)}})},i.prototype.decode=function(e){var t=new ir.MultiFormatReader(this.verbose,this.hints),s=new ir.HTMLCanvasElementLuminanceSource(e),c=new ir.BinaryBitmap(new ir.HybridBinarizer(s)),h=t.decode(c);return{text:h.text,format:OE.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return t},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}(),nR=function(i,e,t,s){function c(h){return h instanceof t?h:new t(function(y){y(h)})}return new(t||(t=Promise))(function(h,y){function _(S){try{w(s.next(S))}catch(N){y(N)}}function E(S){try{w(s.throw(S))}catch(N){y(N)}}function w(S){S.done?h(S.value):c(S.value).then(_,E)}w((s=s.apply(i,e||[])).next())})},rR=function(i,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(S){return E([w,S])}}function E(w){if(s)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(s=1,c&&(h=w[0]&2?c.return:w[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,w[1])).done)return h;switch(c=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){t.label=w[1];break}if(w[0]===6&&t.label<h[1]){t.label=h[1],h=w;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(w);break}h[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{s=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Tx=function(){function i(e,t,s){if(this.formatMap=new Map([[pt.QR_CODE,"qr_code"],[pt.AZTEC,"aztec"],[pt.CODABAR,"codabar"],[pt.CODE_39,"code_39"],[pt.CODE_93,"code_93"],[pt.CODE_128,"code_128"],[pt.DATA_MATRIX,"data_matrix"],[pt.ITF,"itf"],[pt.EAN_13,"ean_13"],[pt.EAN_8,"ean_8"],[pt.PDF_417,"pdf417"],[pt.UPC_A,"upc_a"],[pt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=s;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return nR(this,void 0,void 0,function(){var t,s;return rR(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(t),[2,{text:s.rawValue,format:OE.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var t=null,s=0,c=0,h=e;c<h.length;c++){var y=h[c],_=y.boundingBox.width*y.boundingBox.height;_>s&&(s=_,t=y)}if(!t)throw"No largest barcode found";return t},i.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}(),Sx=function(i,e,t,s){function c(h){return h instanceof t?h:new t(function(y){y(h)})}return new(t||(t=Promise))(function(h,y){function _(S){try{w(s.next(S))}catch(N){y(N)}}function E(S){try{w(s.throw(S))}catch(N){y(N)}}function w(S){S.done?h(S.value):c(S.value).then(_,E)}w((s=s.apply(i,e||[])).next())})},Ix=function(i,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(S){return E([w,S])}}function E(w){if(s)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(s=1,c&&(h=w[0]&2?c.return:w[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,w[1])).done)return h;switch(c=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){t.label=w[1];break}if(w[0]===6&&t.label<h[1]){t.label=h[1],h=w;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(w);break}h[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{s=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},iR=function(){function i(e,t,s,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,t&&Tx.isSupported()?(this.primaryDecoder=new Tx(e,s,c),this.secondaryDecoder=new Ax(e,s,c)):this.primaryDecoder=new Ax(e,s,c)}return i.prototype.decodeAsync=function(e){return Sx(this,void 0,void 0,function(){var t;return Ix(this,function(s){switch(s.label){case 0:t=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return Sx(this,void 0,void 0,function(){var t,s;return Ix(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(s=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,s=this.executionResults;t<s.length;t++){var c=s[t];e+=c}var h=e/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}(),Gg=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),Df=function(i,e,t,s){function c(h){return h instanceof t?h:new t(function(y){y(h)})}return new(t||(t=Promise))(function(h,y){function _(S){try{w(s.next(S))}catch(N){y(N)}}function E(S){try{w(s.throw(S))}catch(N){y(N)}}function w(S){S.done?h(S.value):c(S.value).then(_,E)}w((s=s.apply(i,e||[])).next())})},Mf=function(i,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(S){return E([w,S])}}function E(w){if(s)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(s=1,c&&(h=w[0]&2?c.return:w[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,w[1])).done)return h;switch(c=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){t.label=w[1];break}if(w[0]===6&&t.label<h[1]){t.label=h[1],h=w;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(w);break}h[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{s=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},BE=function(){function i(e,t){this.name=e,this.track=t}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var t={};t[this.name]=e;var s={advanced:[t]};return this.track.applyConstraints(s)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},i}(),sR=function(i){Gg(e,i);function e(t,s){return i.call(this,t,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var s={};s[this.name]=t;var c={advanced:[s]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),s=t[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(BE),aR=function(i){Gg(e,i);function e(t){return i.call(this,"zoom",t)||this}return e}(sR),oR=function(i){Gg(e,i);function e(t){return i.call(this,"torch",t)||this}return e}(BE),lR=function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new aR(this.track)},i.prototype.torchFeature=function(){return new oR(this.track)},i}(),cR=function(){function i(e,t,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var s=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,t,s,c){return Df(this,void 0,void 0,function(){var h,y;return Mf(this,function(_){switch(_.label){case 0:return h=new i(e,t,c),s.aspectRatio?(y={aspectRatio:s.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:_.sent(),_.label=2;case 2:return h.setupSurface(),[2,h]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var t=this,s=function(){setTimeout(e,200),t.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return Df(this,void 0,void 0,function(){return Mf(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,s){var c=e.mediaStream.getVideoTracks(),h=c.length,y=0;e.mediaStream.getVideoTracks().forEach(function(_){e.mediaStream.removeTrack(_),_.stop(),++y,y>=h&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},i.prototype.getCapabilities=function(){return new lR(this.getFirstTrackOrFail())},i}(),uR=function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,t,s){return Df(this,void 0,void 0,function(){return Mf(this,function(c){return[2,cR.create(e,this.mediaStream,t,s)]})})},i.create=function(e){return Df(this,void 0,void 0,function(){var t,s;return Mf(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return s=c.sent(),[2,new i(s)]}})})},i}(),Nx=function(i,e,t,s){function c(h){return h instanceof t?h:new t(function(y){y(h)})}return new(t||(t=Promise))(function(h,y){function _(S){try{w(s.next(S))}catch(N){y(N)}}function E(S){try{w(s.throw(S))}catch(N){y(N)}}function w(S){S.done?h(S.value):c(S.value).then(_,E)}w((s=s.apply(i,e||[])).next())})},Rx=function(i,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(S){return E([w,S])}}function E(w){if(s)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(s=1,c&&(h=w[0]&2?c.return:w[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,w[1])).done)return h;switch(c=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){t.label=w[1];break}if(w[0]===6&&t.label<h[1]){t.label=h[1],h=w;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(w);break}h[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{s=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},hR=function(){function i(){}return i.failIfNotSupported=function(){return Nx(this,void 0,void 0,function(){return Rx(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return Nx(this,void 0,void 0,function(){return Rx(this,function(t){return[2,uR.create(e)]})})},i}(),fR=function(i,e,t,s){function c(h){return h instanceof t?h:new t(function(y){y(h)})}return new(t||(t=Promise))(function(h,y){function _(S){try{w(s.next(S))}catch(N){y(N)}}function E(S){try{w(s.throw(S))}catch(N){y(N)}}function w(S){S.done?h(S.value):c(S.value).then(_,E)}w((s=s.apply(i,e||[])).next())})},dR=function(i,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(S){return E([w,S])}}function E(w){if(s)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(s=1,c&&(h=w[0]&2?c.return:w[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,w[1])).done)return h;switch(c=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){t.label=w[1];break}if(w[0]===6&&t.label<h[1]){t.label=h[1],h=w;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(w);break}h[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{s=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},gR=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=Jl.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=Jl.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return fR(this,void 0,void 0,function(){var e,t,s,c,h,y,_;return dR(this,function(E){switch(E.label){case 0:return e=function(w){for(var S=w.getVideoTracks(),N=0,P=S;N<P.length;N++){var U=P[N];U.enabled=!1,U.stop(),w.removeTrack(U)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=E.sent(),c=[],h=0,y=s;h<y.length;h++)_=y[h],_.kind==="videoinput"&&c.push({id:_.deviceId,label:_.label});return e(t),[2,c]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var s=function(h){for(var y=[],_=0,E=h;_<E.length;_++){var w=E[_];w.kind==="video"&&y.push({id:w.id,label:w.label})}e(y)},c=MediaStreamTrack;c.getSources(s)})},i}(),Ar;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(Ar||(Ar={}));var mR=function(){function i(){this.state=Ar.NOT_STARTED,this.onGoingTransactionNewState=Ar.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===Ar.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ar.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ar.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ar.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ar.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case Ar.UNKNOWN:throw"Transition from unknown is not allowed";case Ar.NOT_STARTED:this.failIfNewStateIs(e,[Ar.PAUSED]);break;case Ar.SCANNING:break;case Ar.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,t){for(var s=0,c=t;s<c.length;s++){var h=c[s];if(e===h)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i}(),pR=function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===Ar.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==Ar.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ar.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===Ar.PAUSED},i}(),yR=function(){function i(){}return i.create=function(){return new pR(new mR)},i}(),xR=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),ss=function(i){xR(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(ks),wR=function(){function i(e,t){this.logger=t,this.fps=ss.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ss.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?PE.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!ta(this.qrbox)},i.create=function(e,t){return new i(e,t)},i}(),Dx=function(){function i(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof t=="boolean"?this.verbose=t===!0:t&&(s=t,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new LE(this.verbose),this.qrcode=new iR(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=yR.create()}return i.prototype.start=function(e,t,s,c){var h=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;c?y=c:y=this.verbose?this.logger.log:function(){};var _=wR.create(t,this.logger);this.clearElement();var E=!1;_.videoConstraints&&(_.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=E,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:ss.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var N=this,P=this.stateManagerProxy.startTransition(Ar.SCANNING);return new Promise(function(U,X){var re=w?_.videoConstraints:N.createVideoConstraints(e);if(!re){P.cancel(),X("videoConstraints should be defined");return}var Y={};(!w||_.aspectRatio)&&(Y.aspectRatio=_.aspectRatio);var ye={onRenderSurfaceReady:function(ue,se){N.setupUi(ue,se,_),N.isScanning=!0,N.foreverScan(_,s,y)}};hR.failIfNotSupported().then(function(ue){ue.create(re).then(function(se){return se.render(h.element,Y,ye).then(function(fe){N.renderedCamera=fe,P.execute(),U(null)}).catch(function(fe){P.cancel(),X(fe)})}).catch(function(se){P.cancel(),X(Jl.errorGettingUserMedia(se))})}).catch(function(ue){P.cancel(),X(Jl.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ar.PAUSED),this.showPausedState(),(ta(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Ar.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Ar.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var h=document.getElementById(ss.SHADED_REGION_ELEMENT_ID);h&&e.element.removeChild(h)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),s(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(s){return s.decodedText})},i.prototype.scanFileV2=function(e,t){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ta(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,h){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var y=new Image;y.onload=function(){var _=y.width,E=y.height,w=document.getElementById(s.elementId),S=w.clientWidth?w.clientWidth:ss.DEFAULT_WIDTH,N=Math.max(w.clientHeight?w.clientHeight:E,ss.FILE_SCAN_MIN_HEIGHT),P=s.computeCanvasDrawConfig(_,E,S,N);if(t){var U=s.createCanvasElement(S,N,"qr-canvas-visible");U.style.display="inline-block",w.appendChild(U);var X=U.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=S,X.canvas.height=N,X.drawImage(y,0,0,_,E,P.x,P.y,P.width,P.height)}var re=ss.FILE_SCAN_HIDDEN_CANVAS_PADDING,Y=Math.max(y.width,P.width),ye=Math.max(y.height,P.height),ue=Y+2*re,se=ye+2*re,fe=s.createCanvasElement(ue,se);w.appendChild(fe);var we=fe.getContext("2d");if(!we)throw"Unable to get 2d context from canvas";we.canvas.width=ue,we.canvas.height=se,we.drawImage(y,0,0,_,E,re,re,Y,ye);try{s.qrcode.decodeRobustlyAsync(fe).then(function(Pe){c(vx.createFromQrcodeResult(Pe))}).catch(h)}catch(Pe){h("QR code parse error, error = ".concat(Pe))}},y.onerror=h,y.onabort=h,y.onstalled=h,y.onsuspend=h,y.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return gR.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!PE.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var t=[pt.QR_CODE,pt.AZTEC,pt.CODABAR,pt.CODE_39,pt.CODE_93,pt.CODE_128,pt.DATA_MATRIX,pt.MAXICODE,pt.ITF,pt.EAN_13,pt.EAN_8,pt.PDF_417,pt.RSS_14,pt.RSS_EXPANDED,pt.UPC_A,pt.UPC_E,pt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],c=0,h=e.formatsToSupport;c<h.length;c++){var y=h[c];KN(y)?s.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ta(e))return!0;if(!ta(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ta(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return ta(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,t,s){var c=this,h=s.qrbox;this.validateQrboxConfig(h);var y=this.toQrdimensions(e,t,h),_=function(w){if(w<ss.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ss.MIN_QR_BOX_SIZE,"px.")},E=function(w){return w>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};_(y.width),_(y.height),y.width=E(y.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,t,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return s},i.prototype.setupUi=function(e,t,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,s);var c=ta(s.qrbox)?{width:e,height:t}:s.qrbox;this.validateQrboxConfig(c);var h=this.toQrdimensions(e,t,c);h.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=s.isShadedBoxEnabled()&&h.height<=t,_={x:0,y:0,width:e,height:t},E=y?this.getShadedRegionBounds(e,t,h):_,w=this.createCanvasElement(E.width,E.height),S={willReadFrequently:!0},N=w.getContext("2d",S);N.canvas.width=E.width,N.canvas.height=E.height,this.element.append(w),y&&this.possiblyInsertShadingElement(this.element,e,t,h),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=N,this.canvasElement=w},i.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Jl.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},i.prototype.scanContext=function(e,t){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,vx.createFromQrcodeResult(c)),s.possiblyUpdateShaders(!0),!0}).catch(function(c){s.possiblyUpdateShaders(!1);var h=Jl.codeParseError(c);return t(h,kE.createFrom(h)),!1})},i.prototype.foreverScan=function(e,t,s){var c=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),y=h.videoWidth/h.clientWidth,_=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*y,w=this.qrRegion.height*_,S=this.qrRegion.x*y,N=this.qrRegion.y*_;this.context.drawImage(h,S,N,E,w,0,0,this.qrRegion.width,this.qrRegion.height);var P=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,s)},c.getTimeoutFps(e.fps))};this.scanContext(t,s).then(function(U){!U&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,s).finally(function(){P()})):P()}).catch(function(U){c.logger.logError("Error happend while scanning context",U),P()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",s="deviceId",c={user:!0,environment:!0},h="exact",y=function(X){if(X in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(X,"'")},_=Object.keys(e);if(_.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(_.length," keys");var E=Object.keys(e)[0];if(E!==t&&E!==s)throw"Only '".concat(t,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(E===t){var w=e.facingMode;if(typeof w=="string"){if(y(w))return{facingMode:w}}else if(typeof w=="object")if(h in w){if(y(w["".concat(h)]))return{facingMode:{exact:w["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var S=typeof w;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var N=e.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(h in N)return{deviceId:{exact:N["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var P=typeof N;throw"Invalid type of 'deviceId' = ".concat(P)}}}var U=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(U)},i.prototype.computeCanvasDrawConfig=function(e,t,s,c){if(e<=s&&t<=c){var h=(s-e)/2,y=(c-t)/2;return{x:h,y,width:e,height:t}}else{var _=e,E=t;return e>s&&(t=s/e*t,e=s),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(_,"X").concat(E)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,s,c)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?ss.BORDER_SHADER_MATCH_COLOR:ss.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,t,s){var c=e,h=t,y=document.createElement("canvas");return y.style.width="".concat(c,"px"),y.style.height="".concat(h,"px"),y.style.display="none",y.id=ta(s)?"qr-canvas":s,y},i.prototype.getShadedRegionBounds=function(e,t,s){if(s.width>e||s.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(t-s.height)/2,width:s.width,height:s.height}},i.prototype.possiblyInsertShadingElement=function(e,t,s,c){if(!(t-c.width<1||s-c.height<1)){var h=document.createElement("div");h.style.position="absolute";var y=(t-c.width)/2,_=(s-c.height)/2;if(h.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(ss.SHADED_REGION_ELEMENT_ID),t-c.width<11||s-c.height<11)this.hasBorderShaders=!1;else{var E=5,w=40;this.insertShaderBorders(h,w,E,-E,null,0,!0),this.insertShaderBorders(h,w,E,-E,null,0,!1),this.insertShaderBorders(h,w,E,null,-E,0,!0),this.insertShaderBorders(h,w,E,null,-E,0,!1),this.insertShaderBorders(h,E,w+E,-E,null,-E,!0),this.insertShaderBorders(h,E,w+E,null,-E,-E,!0),this.insertShaderBorders(h,E,w+E,-E,null,-E,!1),this.insertShaderBorders(h,E,w+E,null,-E,-E,!1),this.hasBorderShaders=!0}e.append(h)}},i.prototype.insertShaderBorders=function(e,t,s,c,h,y,_){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=ss.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(t,"px"),E.style.height="".concat(s,"px"),c!==null&&(E.style.top="".concat(c,"px")),h!==null&&(E.style.bottom="".concat(h,"px")),_?E.style.left="".concat(y,"px"):E.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),e.appendChild(E)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i}(),qg="data:image/svg+xml;base64,",bR=qg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ER=qg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Mx=qg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",vR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Ox=function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i}(),_R=function(){function i(){this.data=Ox.createDefault();var e=localStorage.getItem(i.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},i.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=Ox.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i}(),CR=function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=_x.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var s=document.createElement("br"),c=document.createElement("br");this.infoDiv.appendChild(s),this.infoDiv.appendChild(c);var h=document.createElement("a");h.innerText=_x.reportIssues(),h.href="https://github.com/mebjas/html5-qrcode/issues",h.target="new",h.style.color="white",this.infoDiv.appendChild(h),e.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i}(),AR=function(){function i(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Mx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(s){return t.onHoverIn()},this.infoIcon.onmouseout=function(s){return t.onHoverOut()},this.infoIcon.onclick=function(s){return t.onClick()},e.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=vR,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Mx,this.infoIcon.style.opacity="0.6")},i}(),TR=function(){function i(){var e=this;this.infoDiv=new CR,this.infoIcon=new AR(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return i.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},i}(),SR=function(i,e,t,s){function c(h){return h instanceof t?h:new t(function(y){y(h)})}return new(t||(t=Promise))(function(h,y){function _(S){try{w(s.next(S))}catch(N){y(N)}}function E(S){try{w(s.throw(S))}catch(N){y(N)}}function w(S){S.done?h(S.value):c(S.value).then(_,E)}w((s=s.apply(i,e||[])).next())})},IR=function(i,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(S){return E([w,S])}}function E(w){if(s)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(s=1,c&&(h=w[0]&2?c.return:w[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,w[1])).done)return h;switch(c=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){t.label=w[1];break}if(w[0]===6&&t.label<h[1]){t.label=h[1],h=w;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(w);break}h[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{s=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},kx=function(){function i(){}return i.hasPermissions=function(){return SR(this,void 0,void 0,function(){var e,t,s,c;return IR(this,function(h){switch(h.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=h.sent(),t=0,s=e;t<s.length;t++)if(c=s[t],c.kind==="videoinput"&&c.label)return[2,!0];return[2,!1]}})})},i}(),mo=function(){function i(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var s=t[e];if(i.isCameraScanType(s))return!0}return!1},i.isCameraScanType=function(e){return e===Mo.SCAN_TYPE_CAMERA},i.isFileScanType=function(e){return e===Mo.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return ks.DEFAULT_SUPPORTED_SCAN_TYPE;var t=ks.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var s=0,c=e;s<c.length;s++){var h=c[s];if(!ks.DEFAULT_SUPPORTED_SCAN_TYPE.includes(h))throw"Unsupported scan type ".concat(h)}return e},i}(),os=function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i}(),Oa=function(){function i(){}return i.createElement=function(e,t){var s=document.createElement(e);return s.id=t,s.classList.add(os.ALL_ELEMENT_CLASS),e==="button"&&s.setAttribute("type","button"),s},i}(),jE=function(i,e,t,s){function c(h){return h instanceof t?h:new t(function(y){y(h)})}return new(t||(t=Promise))(function(h,y){function _(S){try{w(s.next(S))}catch(N){y(N)}}function E(S){try{w(s.throw(S))}catch(N){y(N)}}function w(S){S.done?h(S.value):c(S.value).then(_,E)}w((s=s.apply(i,e||[])).next())})},UE=function(i,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(S){return E([w,S])}}function E(w){if(s)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(s=1,c&&(h=w[0]&2?c.return:w[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,w[1])).done)return h;switch(c=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){t.label=w[1];break}if(w[0]===6&&t.label<h[1]){t.label=h[1],h=w;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(w);break}h[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{s=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Lx=function(){function i(e,t,s){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=s}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return jE(this,void 0,void 0,function(){var e,t;return UE(this,function(s){switch(s.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return s.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=s.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?Bn.torchOffButton():Bn.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},i.prototype.propagateFailure=function(e,t){var s=e?Bn.torchOnFailedMessage():Bn.torchOffFailedMessage();t&&(s+="; Error = "+t),this.onTorchActionFailureCallback(s)},i.prototype.reset=function(){this.isTorchOn=!1},i}(),NR=function(){function i(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Oa.createElement("button",os.TORCH_BUTTON_ID),this.torchController=new Lx(e,this,t)}return i.prototype.render=function(e,t){var s=this;this.torchButton.innerText=Bn.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var c=this;this.torchButton.addEventListener("click",function(h){return jE(s,void 0,void 0,function(){return UE(this,function(y){switch(y.label){case 0:return[4,c.torchController.flipState()];case 1:return y.sent(),c.torchController.isTorchEnabled()?(c.torchButton.classList.remove(os.TORCH_BUTTON_CLASS_TORCH_OFF),c.torchButton.classList.add(os.TORCH_BUTTON_CLASS_TORCH_ON)):(c.torchButton.classList.remove(os.TORCH_BUTTON_CLASS_TORCH_ON),c.torchButton.classList.add(os.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(e){this.torchController=new Lx(e,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(e){this.torchButton.innerText=e},i.prototype.reset=function(){this.torchButton.innerText=Bn.torchOnButton(),this.torchController.reset()},i.create=function(e,t,s,c){var h=new i(t,c);return h.render(e,s),h},i}(),RR=function(){function i(e,t,s){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var c=document.createElement("label");c.setAttribute("for",this.getFileScanInputId()),c.style.display="inline-block",this.fileBasedScanRegion.appendChild(c),this.fileSelectionButton=Oa.createElement("button",os.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(_){c.click()}),c.append(this.fileSelectionButton),this.fileScanInput=Oa.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",c.appendChild(this.fileScanInput);var h=this;this.fileScanInput.addEventListener("change",function(_){if(!(_==null||_.target==null)){var E=_.target;if(!(E.files&&E.files.length===0)){var w=E.files,S=w[0],N=S.name;h.setImageNameToButton(N),s(S)}}});var y=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(y),this.fileBasedScanRegion.addEventListener("dragenter",function(_){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(_){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(_){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(_){_.stopPropagation(),_.preventDefault(),h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder();var E=_.dataTransfer;if(E){var w=E.files;if(!w||w.length===0)return;for(var S=!1,N=0;N<w.length;++N){var P=w.item(N);if(P){var U=/image.*/;if(P.type.match(U)){S=!0;var X=P.name;h.setImageNameToButton(X),s(P),y.innerText=Bn.dragAndDropMessage();break}}}S||(y.innerText=Bn.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Bn.dragAndDropMessage(),e.style.fontWeight="400",e},i.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var s=e.substring(0,8),c=e.length,h=e.substring(c-8,c);e="".concat(s,"....").concat(h)}var y=Bn.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=y},i.prototype.setInitialValueToButton=function(){var e=Bn.fileSelectionChooseImage()+" - "+Bn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(e,t,s){var c=new i(e,t,s);return c},i}(),DR=function(){function i(e){this.selectElement=Oa.createElement("select",os.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return i.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var s=this.cameras.length;if(s===0)throw new Error("No cameras found");if(s===1)t.style.display="none";else{var c=Bn.selectCamera();t.innerText="".concat(c," (").concat(this.cameras.length,")  ")}for(var h=1,y=0,_=this.cameras;y<_.length;y++){var E=_[y],w=E.id,S=E.label==null?w:E.label;(!S||S==="")&&(S=[Bn.anonymousCameraPrefix(),h++].join(" "));var N=document.createElement("option");N.value=w,N.innerText=S,this.options.push(N),this.selectElement.appendChild(N)}t.appendChild(this.selectElement),e.appendChild(t)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(e){for(var t=0,s=this.options;t<s.length;t++){var c=s[t];if(c.value===e)return!0}return!1},i.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(e,t){var s=new i(t);return s.render(e),s},i}(),MR=function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Oa.createElement("input",os.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var s=Bn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(s),this.rangeText.style.marginRight="10px";var c=this;this.rangeInput.addEventListener("input",function(){return c.onValueChange()}),this.rangeInput.addEventListener("change",function(){return c.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var e=Bn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(e,t,s,c){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=c.toString(),this.rangeInput.value=s.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(e,t){var s=new i;return s.render(e,t),s},i}(),as;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(as||(as={}));function OR(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function kR(i,e){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:e}}var Px=function(){function i(e,t,s){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=s===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new mo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new LE(this.verbose),this.persistedDataManager=new _R,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(e,t){var s=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(h,y){if(e)e(h,y);else{if(s.lastMatchFound===h)return;s.lastMatchFound=h,s.setHeaderMessage(Bn.lastMatch(h),as.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(h,y){t&&t(h,y)};var c=document.getElementById(this.elementId);if(!c)throw"HTML Element with id=".concat(this.elementId," not found");c.innerHTML="",this.createBasicLayout(c),this.html5Qrcode=new Dx(this.getScanRegionId(),kR(this.config,this.verbose))},i.prototype.pause=function(e){(ta(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var e=this,t=function(){var s=document.getElementById(e.elementId);s&&(s.innerHTML="",e.resetBasicLayout(s))};return this.html5Qrcode?new Promise(function(s,c){if(!e.html5Qrcode){s();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(h){if(!e.html5Qrcode){s();return}e.html5Qrcode.clear(),t(),s()}).catch(function(h){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",h),c(h)}):(e.html5Qrcode.clear(),t(),s())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(e){return e?(e.fps||(e.fps=ks.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!ks.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=ks.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=ks.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:ks.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ks.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ks.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),s=this.getScanRegionId();t.id=s,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),mo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var c=document.createElement("div"),h=this.getDashboardId();c.id=h,c.style.width="100%",e.appendChild(c),this.setupInitialDashboard(c)},i.prototype.resetBasicLayout=function(e){e.style.border="none"},i.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var s=new TR;s.renderInto(t);var c=document.createElement("div");c.id=this.getHeaderMessageContainerId(),c.style.display="none",c.style.textAlign="center",c.style.fontSize="14px",c.style.padding="2px 10px",c.style.margin="4px",c.style.borderTop="1px solid #f6f6f6",t.appendChild(c)},i.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},i.prototype.createCameraListUi=function(e,t,s){var c=this;c.showHideScanTypeSwapLink(!1),c.setHeaderMessage(Bn.cameraPermissionRequesting());var h=function(){s||c.createPermissionButton(e,t)};Dx.getCameras().then(function(y){c.persistedDataManager.setHasPermission(!0),c.showHideScanTypeSwapLink(!0),c.resetHeaderMessage(),y&&y.length>0?(e.removeChild(t),c.renderCameraSelection(y)):(c.setHeaderMessage(Bn.noCameraFound(),as.STATUS_WARNING),h())}).catch(function(y){c.persistedDataManager.setHasPermission(!1),s?s.disabled=!1:h(),c.setHeaderMessage(y,as.STATUS_WARNING),c.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(e,t){var s=this,c=Oa.createElement("button",this.getCameraPermissionButtonId());c.innerText=Bn.cameraPermissionTitle(),c.addEventListener("click",function(){c.disabled=!0,s.createCameraListUi(e,t,c)}),t.appendChild(c)},i.prototype.createPermissionsUi=function(e,t){var s=this;if(mo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){kx.hasPermissions().then(function(c){c?s.createCameraListUi(e,t):(s.persistedDataManager.setHasPermission(!1),s.createPermissionButton(e,t))}).catch(function(c){s.persistedDataManager.setHasPermission(!1),s.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},i.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var s=document.createElement("div");s.id=this.getDashboardSectionCameraScanRegionId(),s.style.display=mo.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(s);var c=document.createElement("div");c.style.textAlign="center",s.appendChild(c),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(s,c),this.renderFileScanUi(t)},i.prototype.renderFileScanUi=function(e){var t=mo.isFileScanType(this.currentScanType),s=this,c=function(h){if(!s.html5Qrcode)throw"html5Qrcode not defined";mo.isFileScanType(s.currentScanType)&&(s.setHeaderMessage(Bn.loadingImage()),s.html5Qrcode.scanFileV2(h,!0).then(function(y){s.resetHeaderMessage(),s.qrCodeSuccessCallback(y.decodedText,y)}).catch(function(y){s.setHeaderMessage(y,as.STATUS_WARNING),s.qrCodeErrorCallback(y,kE.createFrom(y))}))};this.fileSelectionUi=RR.create(e,t,c)},i.prototype.renderCameraSelection=function(e){var t=this,s=this,c=document.getElementById(this.getDashboardSectionCameraScanRegionId());c.style.textAlign="center";var h=MR.create(c,!1),y=function(re){var Y=re.zoomFeature();if(Y.isSupported()){h.setOnCameraZoomValueChangeCallback(function(ue){Y.apply(ue)});var ye=1;t.config.defaultZoomValueIfSupported&&(ye=t.config.defaultZoomValueIfSupported),ye=ZN(ye,Y.min(),Y.max()),h.setValues(Y.min(),Y.max(),ye,Y.step()),h.show()}},_=DR.create(c,e),E=document.createElement("span"),w=Oa.createElement("button",os.CAMERA_START_BUTTON_ID);w.innerText=Bn.scanButtonStartScanningText(),E.appendChild(w);var S=Oa.createElement("button",os.CAMERA_STOP_BUTTON_ID);S.innerText=Bn.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,E.appendChild(S);var N,P=function(re){if(!re.torchFeature().isSupported()){N&&N.hide();return}N?N.updateTorchCapability(re.torchFeature()):N=NR.create(E,re.torchFeature(),{display:"none",marginLeft:"5px"},function(Y){s.setHeaderMessage(Y,as.STATUS_WARNING)}),N.show()};c.appendChild(E);var U=function(re){re||(w.style.display="none"),w.innerText=Bn.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,re&&(w.style.display="inline-block")};if(w.addEventListener("click",function(re){w.innerText=Bn.scanButtonScanningStarting(),_.disable(),w.disabled=!0,w.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&s.showHideScanTypeSwapLink(!1),s.resetHeaderMessage();var Y=_.getValue();s.persistedDataManager.setLastUsedCameraId(Y),s.html5Qrcode.start(Y,OR(s.config),s.qrCodeSuccessCallback,s.qrCodeErrorCallback).then(function(ye){S.disabled=!1,S.style.display="inline-block",U(!1);var ue=s.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&P(ue),t.config.showZoomSliderIfSupported===!0&&y(ue)}).catch(function(ye){s.showHideScanTypeSwapLink(!0),_.enable(),U(!0),s.setHeaderMessage(ye,as.STATUS_WARNING)})}),_.hasSingleItem()&&w.click(),S.addEventListener("click",function(re){if(!s.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,s.html5Qrcode.stop().then(function(Y){t.scanTypeSelector.hasMoreThanOneScanType()&&s.showHideScanTypeSwapLink(!0),_.enable(),w.disabled=!1,S.style.display="none",w.style.display="inline-block",N&&(N.reset(),N.hide()),h.removeOnCameraZoomValueChangeCallback(),h.hide(),s.insertCameraScanImageToScanRegion()}).catch(function(Y){S.disabled=!1,s.setHeaderMessage(Y,as.STATUS_WARNING)})}),s.persistedDataManager.getLastUsedCameraId()){var X=s.persistedDataManager.getLastUsedCameraId();_.hasValue(X)?(_.setValue(X),w.click()):s.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var e=this,t=Bn.textIfCameraScanSelected(),s=Bn.textIfFileScanSelected(),c=document.getElementById(this.getDashboardSectionId()),h=document.createElement("div");h.style.textAlign="center";var y=Oa.createElement("span",this.getDashboardSectionSwapLinkId());y.style.textDecoration="underline",y.style.cursor="pointer",y.innerText=mo.isCameraScanType(this.currentScanType)?t:s,y.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,mo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),y.innerText=s,e.currentScanType=Mo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),y.innerText=t,e.currentScanType=Mo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),h.appendChild(y),c.appendChild(h)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){kx.hasPermissions().then(function(s){if(s){var c=document.getElementById(t.getCameraPermissionButtonId());if(!c)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";c.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(s){t.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},i.prototype.setHeaderMessage=function(e,t){t||(t=as.STATUS_DEFAULT);var s=this.getHeaderMessageDiv();switch(s.innerText=e,s.style.display="block",t){case as.STATUS_SUCCESS:s.style.background="rgba(106, 175, 80, 0.26)",s.style.color="#477735";break;case as.STATUS_WARNING:s.style.background="rgba(203, 36, 49, 0.14)",s.style.color="#cb2431";break;case as.STATUS_DEFAULT:default:s.style.background="rgba(0, 0, 0, 0)",s.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(s){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=bR,this.cameraScanImage.alt=Bn.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(s){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ER,this.fileScanImage.alt=Bn.fileScanAltText()},i.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return os.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return os.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i}();const LR=({photoURL:i,name:e,email:t,size:s="medium"})=>{const[c,h]=ie.useState(!0),[y,_]=ie.useState(!1),E={small:"w-8 h-8",medium:"w-12 h-12",large:"w-16 h-16"},w=()=>e?e.split(" ").map(U=>U[0]).join("").toUpperCase().substring(0,2):t?t[0].toUpperCase():"N/A",S=()=>{const U=e||t||"default",X=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],re=U.split("").reduce((Y,ye)=>Y+ye.charCodeAt(0),0)%X.length;return X[re]},N=()=>{h(!1),_(!1)},P=()=>{h(!1),_(!0)};return!i||y?C.jsx("div",{className:`${E[s]} rounded-full flex items-center justify-center ${S()}`,children:C.jsx("span",{className:"text-white font-semibold",children:w()})}):C.jsxs("div",{className:`${E[s]} rounded-full relative overflow-hidden`,children:[c&&C.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${S()}`,children:C.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}),C.jsx("img",{src:i,alt:e||"Profile",className:`${E[s]} object-cover ${c?"opacity-0":"opacity-100"} transition-opacity duration-300`,onLoad:N,onError:P})]})},Bx=({imageUrl:i,altText:e,className:t=""})=>{const[s,c]=ie.useState(!0),[h,y]=ie.useState(!1),_=()=>{c(!1)},E=()=>{c(!1),y(!0)};return C.jsxs("div",{className:`relative w-full h-40 bg-blue-100 rounded-md overflow-hidden ${t}`,children:[s&&C.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:C.jsx("div",{className:"w-8 h-8 border-4 border-blue-300 border-t-blue-500 rounded-full animate-spin"})}),h?C.jsx("div",{className:"w-full h-full bg-blue-300 flex items-center justify-center",children:C.jsx("span",{className:"text-white font-medium",children:"No Image"})}):C.jsx("img",{src:i,alt:e||"Classroom",className:`w-full h-full object-cover ${s?"opacity-0":"opacity-100"} transition-opacity duration-300`,onLoad:_,onError:E})]})};function PR(){var xt,Ft,ft,qe,le,Ne;const i=za(Ki),e=Po(Ki),t=Vs(),[s,c]=ie.useState(!0),[h,y]=ie.useState(null);ie.useEffect(()=>{console.log("Current user:",h),console.log("User is authenticated:",!!h)},[h]);const[_,E]=ie.useState([]),[w,S]=ie.useState(null),[N,P]=ie.useState(!0),[U,X]=ie.useState(null),[re,Y]=ie.useState([]),[ye,ue]=ie.useState({}),[se,fe]=ie.useState(!1),[we,Pe]=ie.useState(!1),[z,j]=ie.useState(""),[L,F]=ie.useState({type:"",text:""}),J=ie.useRef(null),[ee,W]=ie.useState(!1),[ve,te]=ie.useState({type:"",text:""}),[Ae,Te]=ie.useState(!1),Xe=ie.useRef(null),[ht,Q]=ie.useState([]);ie.useEffect(()=>{const pe=Uf(i,De=>{console.log("Auth state changed, user:",De),y(De),c(!1),!De&&!s&&t("/")});return()=>pe()},[i,t]),ie.useEffect(()=>{if(!s&&!h){t("/");return}if(!s&&h){const pe=async()=>{try{const Be=Zt(e,"users",h.uid),Ye=await zr(Be);Ye.exists()&&S(Ye.data())}catch(Be){console.error("Error loading user profile:",Be)}},De=async()=>{try{P(!0);const Be=Iu(dx(e,"students"),Nu("stdid","==",h.uid)),Ye=await Jr(Be),Ue=[];Ye.forEach(We=>{const Et=We.ref.parent.parent;Et&&Ue.push(zr(Et))});const ot=(await Promise.all(Ue)).map(We=>({id:We.id,...We.data()})).filter(We=>We.info&&We.info.name);E(ot)}catch(Be){console.error("Error loading classrooms:",Be)}finally{P(!1)}};pe(),De()}},[s,h,e,t]);const ge=async()=>{try{await i.signOut(),t("/")}catch(pe){console.error("Error signing out:",pe)}},Re=async pe=>{P(!0);try{X(pe),ue({}),await Fe(pe.id);const De=await Jr(li(e,"classroom",pe.id,"checkin"));let Be=[];for(const Ye of De.docs){const Ue=Ye.data(),Mt=li(e,"classroom",pe.id,"checkin",Ye.id,"question");(await Jr(Mt)).forEach(We=>{const Et=We.data();Et.question_show&&Be.push({checkinId:Ye.id,checkinCode:Ue.code||"-",questionDocId:We.id,...Et})})}Be.sort((Ye,Ue)=>(Ye.question_no||0)-(Ue.question_no||0)),Y(Be)}catch(De){console.error("Error loading quiz:",De)}finally{P(!1)}},Fe=async pe=>{try{const De=await Jr(li(e,"classroom",pe,"checkin"));let Be=[];for(const Ye of De.docs){const Ue=Ye.data(),Mt=Zt(e,"classroom",pe,"checkin",Ye.id,"students",h.uid),ot=await zr(Mt);if(ot.exists()){const We=ot.data();Be.push({id:Ye.id,code:Ue.code,date:Ue.date,checkinTime:We.date,status:Ue.status})}}Be.sort((Ye,Ue)=>new Date(Ue.date)-new Date(Ye.date)),Q(Be)}catch(De){console.error("Error fetching check-in history:",De)}},Se=()=>{X(null),Y([]),ue({})},$=(pe,De)=>{ue(Be=>({...Be,[pe]:De}))},Ve=async pe=>{const De=ye[pe.questionDocId]||"";if(!De.trim()){alert("Please enter an answer or select a choice");return}try{const Be=Zt(e,"classroom",U.id,"checkin",pe.checkinId,"answers",String(pe.question_no));await Bi(Be,{text:pe.question_text},{merge:!0});const Ye=Zt(Be,"students",h.uid),Ue=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await Bi(Ye,{time:Ue,answer:De}),alert("Answer submitted!")}catch(Be){console.error("Error submitting answer:",Be),alert("Failed to submit answer.")}},dt=async pe=>{if(pe.preventDefault(),!z.trim()){F({type:"error",text:"กรุณาใส่รหัสห้องเรียน"});return}try{const De=Zt(e,"classroom",z);if(!(await zr(De)).exists()){F({type:"error",text:"ไม่พบห้องเรียนที่ระบุ กรุณาตรวจสอบรหัสอีกครั้ง"});return}const Ye=Zt(e,"classroom",z,"students",h.uid);if((await zr(Ye)).exists()){F({type:"error",text:"คุณได้ลงทะเบียนในห้องเรียนนี้แล้ว"});return}await Bi(Ye,{stdid:h.uid,name:(w==null?void 0:w.name)||h.email,status:0}),F({type:"success",text:"ลงทะเบียนสำเร็จ! รอการยืนยันจากอาจารย์"});const Mt=Iu(dx(e,"students"),Nu("stdid","==",h.uid)),ot=await Jr(Mt),We=[];ot.forEach(at=>{const It=at.ref.parent.parent;It&&We.push(zr(It))});const et=(await Promise.all(We)).map(at=>({id:at.id,...at.data()}));E(et),setTimeout(()=>{Pe(!1),j(""),F({type:"",text:""})},2e3)}catch(De){console.error("Error registering for classroom:",De),F({type:"error",text:"เกิดข้อผิดพลาดในการลงทะเบียน โปรดลองอีกครั้ง"})}},st=pe=>{try{const De=/\/register-classroom\/([^/?\s]+)/,Be=pe.match(De);if(Be&&Be[1]){const Ye=Be[1];j(Ye),dt({preventDefault:()=>{}})}else F({type:"error",text:"รูปแบบ QR Code ไม่ถูกต้อง"})}catch(De){console.error("Error processing QR code:",De),F({type:"error",text:"ไม่สามารถประมวลผล QR Code ได้"})}},vt=async pe=>{try{Te(!0);const De=/\/student-checkin\/([^/?\s]+)\/([^/?\s]+)/,Be=pe.match(De);if(!Be||!Be[1]||!Be[2]){te({type:"error",text:"QR Code ไม่ถูกต้องสำหรับการเช็คชื่อ"});return}const Ye=Be[1],Ue=Be[2];if(U&&U.id!==Ye){te({type:"error",text:"QR Code นี้ไม่ตรงกับห้องเรียนที่คุณเลือก"});return}const Mt=Zt(e,"classroom",Ye,"students",h.uid),ot=await zr(Mt);if(!ot.exists()){te({type:"error",text:"คุณไม่ได้ลงทะเบียนในห้องเรียนนี้"});return}const We=Zt(e,"classroom",Ye,"checkin",Ue),Et=await zr(We);if(!Et.exists()){te({type:"error",text:"ไม่พบรายการเช็คชื่อ หรือการเช็คชื่อถูกยกเลิก"});return}const et=Et.data();if(et.status===0){te({type:"error",text:"การเช็คชื่อนี้ถูกปิดใช้งานชั่วคราว กรุณาติดต่ออาจารย์"});return}if(et.status===2){te({type:"error",text:"การเช็คชื่อนี้ได้สิ้นสุดแล้ว"});return}const at=Zt(e,"classroom",Ye,"checkin",Ue,"students",h.uid);if((await zr(at)).exists()){te({type:"info",text:"คุณได้เช็คชื่อในคาบเรียนนี้แล้ว"});return}const sn=ot.data(),Nn=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await Bi(at,{stdid:h.uid,name:(w==null?void 0:w.name)||h.email,remark:"",date:Nn}),await Bi(Zt(e,"classroom",Ye,"checkin",Ue,"scores",h.uid),{uid:h.uid,stdid:h.uid,name:(w==null?void 0:w.name)||h.email,remark:"",dates:Nn,score:1,status:1}),te({type:"success",text:"เช็คชื่อสำเร็จ! 🎉"}),setTimeout(()=>{W(!1),te({type:"",text:""})},3e3)}catch(De){console.error("Error processing check-in QR code:",De),te({type:"error",text:"เกิดข้อผิดพลาดในการเช็คชื่อ โปรดลองใหม่อีกครั้ง"})}finally{Te(!1)}},mt=pe=>{te({type:"",text:""}),W(!0)};return ie.useEffect(()=>{if(we&&!J.current){const pe=new Px("qr-reader",{fps:10,qrbox:250},!1);return pe.render(De=>{st(De),pe.clear()},De=>{}),J.current=pe,()=>{J.current&&(J.current.clear(),J.current=null)}}},[we]),ie.useEffect(()=>{if(ee&&!Xe.current){const pe=new Px("checkin-qr-reader",{fps:10,qrbox:250},!1);return pe.render(De=>{vt(De),pe.clear()},De=>{}),Xe.current=pe,()=>{Xe.current&&(Xe.current.clear(),Xe.current=null)}}},[ee]),ie.useEffect(()=>{console.log("Loading state:",N),console.log("Selected classroom:",U)},[N,U]),s?C.jsx("div",{className:"flex items-center justify-center h-screen bg-blue-50",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-2"}),C.jsx("p",{className:"text-blue-800",children:"กำลังตรวจสอบการเข้าสู่ระบบ..."})]})}):h?C.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[C.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-3xl font-bold mb-6",children:"Student Classroom"}),C.jsx("div",{className:"mb-4",children:U?C.jsx("button",{onClick:Se,className:"hover:text-blue-300 transition",children:"กลับสู่รายการห้องเรียน"}):C.jsx("button",{onClick:()=>t("/student-dashboard"),className:"hover:text-blue-300 transition",children:"ห้องเรียนของฉัน"})})]}),C.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700",children:[C.jsx(LR,{photoURL:w==null?void 0:w.photo,name:w==null?void 0:w.name,email:h==null?void 0:h.email,size:"medium"}),C.jsxs("div",{className:"ml-4",children:[C.jsx("p",{className:"font-bold",children:(w==null?void 0:w.name)||(h==null?void 0:h.email)}),C.jsx("p",{className:"text-sm",children:"Status : Student"})]})]})]}),C.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[U?C.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน : ",((xt=U.info)==null?void 0:xt.name)||"Unknown"]}):C.jsx("h1",{className:"text-3xl font-bold text-blue-900",children:"ห้องเรียนของฉัน"}),C.jsx("button",{onClick:()=>fe(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),N&&C.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"Loading..."}),!N&&!U&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"mb-6",children:C.jsx("button",{onClick:()=>Pe(!0),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH text-lg shadow-md",children:"ลงทะเบียนห้องเรียนใหม่"})}),_.length===0?C.jsxs("div",{className:"text-center",children:[C.jsx("p",{className:"text-gray-600 mb-4",children:"คุณยังไม่ได้อยู่ในห้องเรียนใด ๆ"}),C.jsx("button",{onClick:()=>Pe(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH text-lg shadow-md mx-auto",children:"ลงทะเบียนห้องเรียนใหม่"})]}):C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:_.map(pe=>{const De=pe.info||{};return C.jsxs("div",{className:"border rounded-lg shadow-md p-4 bg-white hover:shadow-xl transition cursor-pointer",onClick:()=>Re(pe),children:[C.jsx(Bx,{imageUrl:De.photo,altText:De.name,className:"mb-4"}),C.jsx("h2",{className:"text-xl font-bold text-blue-900",children:De.name}),C.jsxs("p",{className:"text-blue-700 text-lg",children:["Code : ",De.code]}),C.jsxs("p",{className:"text-blue-700 text-lg",children:["Room : ",De.room]})]},pe.id)})})]}),!N&&U&&C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500",children:[C.jsx("div",{className:"flex justify-between items-center",children:C.jsxs("h2",{className:"text-2xl font-bold text-blue-900 font-ChakraPetchTH",children:[C.jsx("span",{className:"inline-block mr-2",children:"📚"}),"ข้อมูลห้องเรียน"]})}),C.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsxs("p",{className:"text-gray-700 mb-2",children:[C.jsx("span",{className:"font-bold",children:"รหัสวิชา:"})," ",((Ft=U.info)==null?void 0:Ft.code)||"N/A"]}),C.jsxs("p",{className:"text-gray-700 mb-2",children:[C.jsx("span",{className:"font-bold",children:"ชื่อวิชา:"})," ",((ft=U.info)==null?void 0:ft.name)||"N/A"]}),C.jsxs("p",{className:"text-gray-700 mb-2",children:[C.jsx("span",{className:"font-bold",children:"ห้องเรียน:"})," ",((qe=U.info)==null?void 0:qe.room)||"N/A"]})]}),((le=U.info)==null?void 0:le.photo)&&C.jsx("div",{className:"flex justify-center",children:C.jsx(Bx,{imageUrl:U.info.photo,altText:U.info.name,className:"w-full max-w-xs rounded-md"})})]})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsxs("h2",{className:"text-2xl font-bold text-blue-900 font-ChakraPetchTH",children:[C.jsx("span",{className:"inline-block mr-2",children:"✅"}),"การเช็คชื่อเข้าเรียน"]}),C.jsxs("button",{onClick:()=>mt(),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH shadow-md flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"เช็คชื่อเข้าเรียน"]})]}),C.jsxs("div",{className:"mt-3",children:[C.jsxs("p",{className:"text-gray-600 bg-blue-50 p-4 rounded-lg border border-blue-100 mb-4",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 inline-block mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"กดปุ่มเช็คชื่อเพื่อสแกน QR Code ที่อาจารย์แสดง เพื่อบันทึกการเข้าเรียนของคุณ"]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("h3",{className:"text-lg font-ChakraPetchTH font-semibold text-blue-800 mb-2",children:"ประวัติการเช็คชื่อของคุณ"}),ht.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border-collapse",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-green-50",children:[C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"ลำดับ"}),C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"รหัสการเช็คชื่อ"}),C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"วันที่เช็คชื่อ"}),C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"เช็คชื่อเมื่อ"}),C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"สถานะ"})]})}),C.jsx("tbody",{children:ht.map((pe,De)=>C.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:De+1}),C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:pe.code}),C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:pe.date}),C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:pe.checkinTime}),C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:pe.status===1?C.jsxs("span",{className:"text-green-600 flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"เปิดใช้งาน"]}):pe.status===0?C.jsxs("span",{className:"text-red-600 flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"ปิดใช้งาน"]}):C.jsxs("span",{className:"text-gray-600 flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"เสร็จสิ้น"]})})]},pe.id))})]})}):C.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),C.jsx("p",{className:"text-gray-600 font-ChakraPetchTH",children:"คุณยังไม่มีประวัติการเช็คชื่อในห้องเรียนนี้"})]})]})]})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-indigo-500",children:[C.jsxs("h2",{className:"text-2xl font-bold text-blue-900 font-ChakraPetchTH mb-4",children:[C.jsx("span",{className:"inline-block mr-2",children:"📝"}),"แบบทดสอบ (Quiz)"]}),re.length===0?C.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),C.jsx("p",{className:"text-gray-600 font-ChakraPetchTH",children:"ยังไม่มีควิซในขณะนี้"}),C.jsx("p",{className:"text-gray-500 text-sm font-ChakraPetchTH mt-1",children:"อาจารย์จะเพิ่มควิซเมื่อต้องการให้คุณตอบคำถาม"})]}):C.jsx("div",{className:"space-y-6",children:re.map(pe=>{const De=ye[pe.questionDocId]||"";return C.jsxs("div",{className:"border-2 border-indigo-100 p-6 rounded-lg hover:bg-indigo-50 transition bg-white",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsxs("h3",{className:"font-semibold text-lg text-indigo-900 font-ChakraPetchTH",children:["คำถาม #",pe.question_no]}),C.jsxs("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm",children:["รหัสเช็คชื่อ: ",pe.checkinCode||"-"]})]}),C.jsx("p",{className:"font-medium mb-4 text-gray-800 font-ChakraPetchTH",children:pe.question_text}),pe.question_type==="objective"&&Array.isArray(pe.choices)&&pe.choices.length>0?C.jsx("div",{className:"flex flex-col space-y-3 mb-4 bg-white p-4 rounded-lg border border-indigo-100",children:pe.choices.map((Be,Ye)=>C.jsxs("label",{className:"flex items-center space-x-3 p-2 rounded hover:bg-indigo-50 cursor-pointer",children:[C.jsx("input",{type:"radio",name:`q_${pe.questionDocId}`,value:Be,checked:De===Be,onChange:Ue=>$(pe.questionDocId,Ue.target.value),className:"h-5 w-5 text-indigo-600"}),C.jsx("span",{className:"font-ChakraPetchTH",children:Be})]},Ye))}):C.jsx("textarea",{placeholder:"พิมพ์คำตอบของคุณที่นี่...",className:"w-full p-3 border border-indigo-200 rounded-lg focus:ring focus:ring-indigo-200 focus:outline-none mb-4",rows:"3",value:De,onChange:Be=>$(pe.questionDocId,Be.target.value)}),C.jsxs("button",{onClick:()=>Ve(pe),className:"bg-indigo-600 text-white px-5 py-2 rounded-lg hover:bg-indigo-700 transition font-ChakraPetchTH flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"ส่งคำตอบ"]})]},pe.questionDocId)})})]})]}),se&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),C.jsx("div",{className:"mt-2",children:C.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),C.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[C.jsx("button",{type:"button",onClick:()=>{fe(!1),ge()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),C.jsx("button",{type:"button",onClick:()=>fe(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]}),we&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ลงทะเบียนห้องเรียน"}),C.jsxs("div",{className:"mt-2",children:[C.jsxs("form",{onSubmit:dt,children:[C.jsx("input",{type:"text",placeholder:"รหัสห้องเรียน",className:"w-full p-2 border rounded mb-2",value:z,onChange:pe=>j(pe.target.value)}),C.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"ลงทะเบียน"})]}),L.text&&C.jsx("p",{className:`mt-2 text-sm ${L.type==="error"?"text-red-600":"text-green-600"}`,children:L.text}),C.jsxs("div",{className:"mt-4",children:[C.jsx("h4",{className:"text-md font-ChakraPetchTH mb-2",children:"หรือสแกน QR Code"}),C.jsx("div",{id:"qr-reader",className:"w-full rounded overflow-hidden",style:{maxWidth:"100%"}})]})]})]})]})}),C.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:C.jsx("button",{type:"button",onClick:()=>Pe(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})})]})})})]}),ee&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsxs("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:["เช็คชื่อเข้าเรียน",U&&C.jsx("span",{className:"text-blue-600 ml-2",children:(Ne=U.info)==null?void 0:Ne.name})]}),C.jsxs("div",{className:"mt-2",children:[C.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"กรุณาสแกน QR Code ที่อาจารย์แสดงเพื่อเช็คชื่อเข้าเรียน"}),ve.text&&C.jsx("div",{className:`p-3 rounded mb-4 ${ve.type==="error"?"bg-red-100 text-red-700":ve.type==="success"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:C.jsx("p",{className:"text-sm font-ChakraPetchTH",children:ve.text})}),C.jsx("div",{id:"checkin-qr-reader",className:"w-full rounded overflow-hidden",style:{maxWidth:"100%"}})]})]})]})}),C.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:C.jsx("button",{type:"button",onClick:()=>W(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ปิด"})})]})})})]})]})]}):null}function BR(){const i=Vs(),e=za(),t=Po(Ki),[s,c]=ie.useState(!0),[h,y]=ie.useState(null),{classroomId:_}=H1(),[E]=MC(),w=E.get("checkinId")||"",[S,N]=ie.useState(null),[P,U]=ie.useState([]),[X,re]=ie.useState(""),[Y,ye]=ie.useState(""),[ue,se]=ie.useState(!1),[fe,we]=ie.useState("subjective"),[Pe,z]=ie.useState([""]),[j,L]=ie.useState(null),[F,J]=ie.useState(null),[ee,W]=ie.useState([]),[ve,te]=ie.useState(!1),[Ae,Te]=ie.useState({type:"",message:""}),[Xe,ht]=ie.useState(!1);ie.useEffect(()=>{const qe=Uf(e,le=>{y(le),c(!1),!le&&!s&&i("/")});return()=>qe()},[e,i,s]),ie.useEffect(()=>{async function qe(){if(h){const le=Zt(t,"users",h.uid),Ne=await zr(le);Ne.exists()&&N(Ne.data())}}!s&&h&&qe()},[h,t,s]),ie.useEffect(()=>{async function qe(){if(!(!_||!w))try{const le=li(t,"classroom",_,"checkin",w,"question"),Ne=await Jr(le),pe=[];if(Ne.forEach(De=>{pe.push({id:De.id,...De.data()})}),pe.sort((De,Be)=>De.question_no-Be.question_no),U(pe),!j){const De=pe.length>0?Math.max(...pe.map(Be=>Be.question_no))+1:1;re(De.toString())}}catch(le){console.error("Error loading questions:",le)}}qe()},[t,_,w,j]);const Q=(qe,le,Ne=3e3)=>{Te({type:qe,message:le}),setTimeout(()=>{Te({type:"",message:""})},Ne)},ge=async()=>{if(!_||!w){Q("error","ไม่พบ classroomId หรือ checkinId");return}if(!X||!Y){Q("error","กรุณากรอกหมายเลขและข้อความคำถาม");return}try{const qe=j||EE(),le=Zt(t,"classroom",_,"checkin",w,"question",qe);await Bi(le,{question_no:parseInt(X,10),question_text:Y,question_show:ue,question_type:fe,choices:fe==="objective"?Pe.filter(De=>De.trim()!==""):[]}),Q("success",j?"แก้ไขคำถามสำเร็จ":"สร้างคำถามสำเร็จ");const Ne=await Jr(li(t,"classroom",_,"checkin",w,"question")),pe=[];Ne.forEach(De=>{pe.push({id:De.id,...De.data()})}),pe.sort((De,Be)=>De.question_no-Be.question_no),U(pe),Re()}catch(qe){console.error("Error saving question:",qe),Q("error","เกิดข้อผิดพลาดในการบันทึกคำถาม")}},Re=()=>{ye(""),se(!1),we("subjective"),z([""]),L(null);const qe=P.length>0?Math.max(...P.map(le=>parseInt(le.question_no)))+1:1;re(qe.toString())},Fe=qe=>{L(qe.id),re(qe.question_no),ye(qe.question_text),se(qe.question_show),we(qe.question_type||"subjective"),qe.choices&&Array.isArray(qe.choices)?z(qe.choices):z([""])},Se=async qe=>{if(window.confirm("คุณแน่ใจหรือไม่ที่จะลบคำถามนี้?"))try{await du(Zt(t,"classroom",_,"checkin",w,"question",qe)),Q("success","ลบคำถามสำเร็จ"),U(le=>le.filter(Ne=>Ne.id!==qe))}catch(le){console.error("Error deleting question:",le),Q("error","ไม่สามารถลบคำถามได้")}},$=async qe=>{try{const le=Zt(t,"classroom",_,"checkin",w,"question",qe.id);await sl(le,{question_show:!qe.question_show}),U(Ne=>Ne.map(pe=>pe.id===qe.id?{...pe,question_show:!qe.question_show}:pe))}catch(le){console.error("Error toggling question_show:",le)}},Ve=()=>{z(qe=>[...qe,""])},dt=(qe,le)=>{z(Ne=>{const pe=[...Ne];return pe[qe]=le,pe})},st=qe=>{z(le=>{const Ne=[...le];return Ne.splice(qe,1),Ne})},vt=async qe=>{if(!_||!w){alert("ไม่พบ classroomId หรือ checkinId");return}const le=String(qe.question_no);J(qe),W([]),te(!0);try{const Ne=Zt(t,"classroom",_,"checkin",w,"answers",le);await Bi(Ne,{text:qe.question_text},{merge:!0});const pe=li(Ne,"students"),De=await Jr(pe),Be=[];for(const Ye of De.docs){const Ue=Ye.data(),Mt=Ye.id,ot=Zt(t,"classroom",_,"checkin",w,"students",Mt),We=await zr(ot);let Et="(ไม่มีชื่อ)";We.exists()&&(Et=We.data().name||"(ไม่มีชื่อ)"),Be.push({studentDocId:Mt,name:Et,...Ue})}W(Be)}catch(Ne){console.error("Error loading student answers:",Ne),alert("ไม่สามารถโหลดคำตอบนักเรียนได้")}finally{te(!1)}},mt=()=>{J(null),W([])},xt=(qe,le)=>{W(Ne=>{const pe=[...Ne];return pe[qe]={...pe[qe],score:le},pe})},Ft=async qe=>{if(!F)return;const le=ee[qe],Ne=String(F.question_no);if(le.score==null||le.score===""){alert("กรุณากรอกคะแนนให้ถูกต้อง");return}try{const pe=Zt(t,"classroom",_,"checkin",w,"answers",Ne),De=Zt(pe,"students",le.studentDocId);await sl(De,{score:Number(le.score)}),alert(`บันทึกคะแนนสำเร็จสำหรับนักเรียน: ${le.studentDocId}`)}catch(pe){console.error("Error saving score:",pe),alert("ไม่สามารถบันทึกคะแนนได้")}},ft=async()=>{try{await Dw(e),i("/")}catch(qe){console.error("Error signing out:",qe)}};return s?C.jsx("div",{className:"min-h-screen flex items-center justify-center bg-blue-50",children:C.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-md",children:[C.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-4"}),C.jsx("p",{className:"text-blue-800 font-ChakraPetchTH",children:"กำลังตรวจสอบการเข้าสู่ระบบ..."})]})}):h?C.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[C.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-4xl font-ChakraPetchTH mb-8",children:"สร้างควิซ"}),C.jsx("ul",{className:"space-y-4",children:C.jsx("li",{children:C.jsx("button",{onClick:()=>i("/dashboard"),className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"กลับไปแดชบอร์ด"})})})]}),C.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",onClick:()=>i("/edit-profile"),children:[S&&S.photo?C.jsx("img",{src:S.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):C.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:C.jsx("span",{className:"text-lg text-white",children:"N/A"})}),C.jsxs("div",{children:[C.jsx("p",{className:"font-bold font-ChakraPetchTH",children:(S==null?void 0:S.name)||(h==null?void 0:h.email)||"User"}),h&&C.jsx("p",{className:"text-blue-200 text-sm font-ChakraPetchTH",children:h.email})]})]})]}),C.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"สร้าง/จัดการควิซ"}),C.jsx("button",{onClick:()=>ht(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition font-ChakraPetchTH",children:"ออกจากระบบ"})]}),Ae.message&&C.jsx("div",{className:`mb-4 p-3 rounded-md ${Ae.type==="success"?"bg-green-100 text-green-800":Ae.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:C.jsx("p",{className:"font-ChakraPetchTH",children:Ae.message})}),C.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[C.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["รหัสห้องเรียน: ",_||"N/A"," | รหัสเช็คอิน: ",w||"N/A"]}),C.jsxs("div",{className:"mb-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[C.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:j?`แก้ไขคำถาม (ID: ${j})`:"สร้างคำถามใหม่"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"หมายเลขคำถาม"}),C.jsx("input",{type:"number",className:`w-full p-2 border rounded ${j?"":"bg-gray-100"}`,value:X,onChange:qe=>re(qe.target.value),readOnly:!j}),!j&&C.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"หมายเลขคำถามถูกสร้างโดยอัตโนมัติ"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"แสดงคำถาม?"}),C.jsxs("div",{className:"flex items-center mt-2",children:[C.jsx("input",{type:"checkbox",id:"questionShow",checked:ue,onChange:qe=>se(qe.target.checked),className:"h-5 w-5 text-blue-600"}),C.jsx("label",{htmlFor:"questionShow",className:"ml-2 text-gray-700",children:ue?"แสดงให้นักเรียนเห็น":"ซ่อนจากนักเรียน"})]})]})]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ประเภทคำถาม"}),C.jsxs("select",{className:"p-2 border rounded w-full md:w-auto",value:fe,onChange:qe=>we(qe.target.value),children:[C.jsx("option",{value:"subjective",children:"อัตนัย (เขียนตอบ)"}),C.jsx("option",{value:"objective",children:"ปรนัย (ตัวเลือก)"})]})]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ข้อความคำถาม"}),C.jsx("textarea",{className:"w-full p-2 border rounded",rows:3,value:Y,onChange:qe=>ye(qe.target.value),placeholder:"พิมพ์คำถามที่นี่..."})]}),fe==="objective"&&C.jsxs("div",{className:"mt-4",children:[C.jsx("label",{className:"block text-blue-700 mb-2 font-ChakraPetchTH",children:"ตัวเลือก"}),Pe.map((qe,le)=>C.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[C.jsx("div",{className:"flex-none w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center",children:String.fromCharCode(65+le)}),C.jsx("input",{type:"text",className:"flex-1 p-2 border rounded",value:qe,onChange:Ne=>dt(le,Ne.target.value),placeholder:`ตัวเลือกที่ ${le+1}`}),Pe.length>1&&C.jsx("button",{onClick:()=>st(le),className:"bg-red-500 text-white px-3 py-1 rounded-full hover:bg-red-600 transition flex-none",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},le)),C.jsxs("button",{onClick:Ve,className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH flex items-center mt-2",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"เพิ่มตัวเลือก"]})]}),C.jsxs("div",{className:"mt-6 flex flex-wrap gap-2",children:[C.jsxs("button",{onClick:ge,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),j?"อัปเดตคำถาม":"บันทึกคำถาม"]}),j&&C.jsxs("button",{onClick:Re,className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"ยกเลิก"]})]})]}),C.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-2 text-blue-900",children:"รายการคำถาม"}),P.length===0?C.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำถาม"}):C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ลำดับ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ข้อความคำถาม"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ประเภท"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"แสดง?"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"การดำเนินการ"})]})}),C.jsx("tbody",{children:P.map(qe=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:qe.question_no}),C.jsx("td",{className:"border p-2",children:qe.question_text}),C.jsx("td",{className:"border p-2",children:qe.question_type==="objective"?"ปรนัย":"อัตนัย"}),C.jsx("td",{className:"border p-2",children:qe.question_show?"ใช่":"ไม่ใช่"}),C.jsxs("td",{className:"border p-2",children:[C.jsx("button",{onClick:()=>Fe(qe),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition font-ChakraPetchTH mr-2",children:"แก้ไข"}),C.jsx("button",{onClick:()=>$(qe),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition font-ChakraPetchTH mr-2",children:"สลับแสดง"}),C.jsx("button",{onClick:()=>Se(qe.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition font-ChakraPetchTH mr-2",children:"ลบ"}),C.jsx("button",{onClick:()=>vt(qe),className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition font-ChakraPetchTH",children:"ให้คะแนน"})]})]},qe.id))})]})}),F&&C.jsxs("div",{className:"mt-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsxs("h3",{className:"text-lg font-ChakraPetchTH",children:["คำตอบนักเรียนสำหรับคำถามที่ #",F.question_no]}),C.jsx("button",{onClick:mt,className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH",children:"ปิด"})]}),ve?C.jsx("p",{className:"font-ChakraPetchTH",children:"กำลังโหลดคำตอบ..."}):ee.length===0?C.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำตอบนักเรียน"}):C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คำตอบ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"เวลา"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คะแนน"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ดำเนินการ"})]})}),C.jsx("tbody",{children:ee.map((qe,le)=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:qe.studentDocId}),C.jsx("td",{className:"border p-2",children:qe.name}),C.jsx("td",{className:"border p-2",children:qe.answer||"-"}),C.jsx("td",{className:"border p-2",children:qe.time||"-"}),C.jsx("td",{className:"border p-2",children:C.jsx("input",{type:"number",className:"w-20 p-1 border rounded",value:qe.score||"",onChange:Ne=>xt(le,Ne.target.value)})}),C.jsx("td",{className:"border p-2",children:C.jsx("button",{onClick:()=>Ft(le),className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH",children:"บันทึก"})})]},qe.studentDocId))})]})})]})]})]}),Xe&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),C.jsx("div",{className:"mt-2",children:C.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),C.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[C.jsx("button",{type:"button",onClick:()=>{ht(!1),ft()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),C.jsx("button",{type:"button",onClick:()=>ht(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]})]}):null}function jR(){const i=Po(Ki),e=za(Ki),t=e.currentUser,s=Vs(),{classroomId:c}=H1(),[h,y]=ie.useState(null),[_,E]=ie.useState(null),[w,S]=ie.useState([]),[N,P]=ie.useState(!0);ie.useEffect(()=>{if(!t){s("/");return}(async()=>{try{const re=Zt(i,"users",t.uid),Y=await zr(re);Y.exists()&&y(Y.data());const ye=Zt(i,"classroom",c),ue=await zr(ye);ue.exists()&&E(ue.data().info||{});const se=li(i,"classroom",c,"checkin"),fe=await Jr(se);let we=[];for(const Pe of fe.docs){const z=Pe.id,j=li(i,"classroom",c,"checkin",z,"question");(await Jr(j)).forEach(F=>{const J=F.data();J.question_show===!0&&we.push({checkinId:z,id:F.id,question_no:J.question_no,question_text:J.question_text,question_show:J.question_show})})}we.sort((Pe,z)=>Pe.question_no-z.question_no),S(we)}catch(re){console.error("Error loading data for student detail:",re)}finally{P(!1)}})()},[i,t,s,c]);const U=async()=>{try{await e.signOut(),s("/")}catch(X){console.error("Error signing out:",X)}};return t?N?C.jsx("div",{children:"Loading..."}):C.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[C.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-2xl mb-6",children:"Student Classroom"}),C.jsx("button",{onClick:()=>s("/student-dashboard"),className:"hover:text-blue-300 transition",children:"Back to My Classes"})]}),C.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",children:[h&&h.photo?C.jsx("img",{src:h.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):C.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:C.jsx("span",{className:"text-lg text-white",children:"N/A"})}),C.jsxs("div",{children:[C.jsx("p",{className:"font-bold",children:(h==null?void 0:h.name)||t.email}),C.jsx("p",{className:"text-sm",children:"Status: Student"})]})]})]}),C.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsxs("h1",{className:"text-3xl",children:[(_==null?void 0:_.name)||"Unknown"," - Quiz"]}),C.jsx("button",{onClick:U,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Sign Out"})]}),C.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[C.jsx("h2",{className:"text-xl font-bold mb-4",children:"Questions (ที่ question_show = true)"}),w.length===0?C.jsx("p",{children:"No questions yet."}):C.jsx("ul",{className:"space-y-2",children:w.map(X=>C.jsxs("li",{className:"border p-2 rounded hover:bg-blue-50",children:[C.jsxs("span",{className:"font-semibold",children:["Question #",X.question_no,":"]})," ",X.question_text,C.jsxs("span",{className:"ml-4 italic text-sm text-gray-500",children:["(Checkin: ",X.checkinId,")"]})]},`${X.checkinId}-${X.id}`))})]})]})]}):null}var l1,jx;function UR(){return jx||(jx=1,l1=function(i){var e={};function t(s){if(e[s])return e[s].exports;var c=e[s]={i:s,l:!1,exports:{}};return i[s].call(c.exports,c,c.exports,t),c.l=!0,c.exports}return t.m=i,t.c=e,t.d=function(s,c,h){t.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:h})},t.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},t.t=function(s,c){if(1&c&&(s=t(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var h=Object.create(null);if(t.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var y in s)t.d(h,y,(function(_){return s[_]}).bind(null,y));return h},t.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(c,"a",c),c},t.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},t.p="",t(t.s=9)}([function(i,e){i.exports=kf()},function(i,e,t){var s;/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var c={}.hasOwnProperty;function h(){for(var y=[],_=0;_<arguments.length;_++){var E=arguments[_];if(E){var w=typeof E;if(w==="string"||w==="number")y.push(E);else if(Array.isArray(E)&&E.length){var S=h.apply(null,E);S&&y.push(S)}else if(w==="object")for(var N in E)c.call(E,N)&&E[N]&&y.push(N)}}return y.join(" ")}i.exports?(h.default=h,i.exports=h):(s=(function(){return h}).apply(e,[]))===void 0||(i.exports=s)})()},function(i,e,t){(function(s){var c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,_=/^0o[0-7]+$/i,E=parseInt,w=typeof s=="object"&&s&&s.Object===Object&&s,S=typeof self=="object"&&self&&self.Object===Object&&self,N=w||S||Function("return this")(),P=Object.prototype.toString,U=N.Symbol,X=U?U.prototype:void 0,re=X?X.toString:void 0;function Y(fe){if(typeof fe=="string")return fe;if(ue(fe))return re?re.call(fe):"";var we=fe+"";return we=="0"&&1/fe==-1/0?"-0":we}function ye(fe){var we=typeof fe;return!!fe&&(we=="object"||we=="function")}function ue(fe){return typeof fe=="symbol"||function(we){return!!we&&typeof we=="object"}(fe)&&P.call(fe)=="[object Symbol]"}function se(fe){return fe?(fe=function(we){if(typeof we=="number")return we;if(ue(we))return NaN;if(ye(we)){var Pe=typeof we.valueOf=="function"?we.valueOf():we;we=ye(Pe)?Pe+"":Pe}if(typeof we!="string")return we===0?we:+we;we=we.replace(c,"");var z=y.test(we);return z||_.test(we)?E(we.slice(2),z?2:8):h.test(we)?NaN:+we}(fe))===1/0||fe===-1/0?17976931348623157e292*(fe<0?-1:1):fe==fe?fe:0:fe===0?fe:0}i.exports=function(fe,we,Pe){var z,j,L,F;return fe=(z=fe)==null?"":Y(z),j=function(J){var ee=se(J),W=ee%1;return ee==ee?W?ee-W:ee:0}(Pe),L=0,F=fe.length,j==j&&(F!==void 0&&(j=j<=F?j:F),L!==void 0&&(j=j>=L?j:L)),Pe=j,we=Y(we),fe.slice(Pe,Pe+we.length)==we}}).call(this,t(3))},function(i,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}i.exports=t},function(i,e,t){(function(s){var c=/^\[object .+?Constructor\]$/,h=typeof s=="object"&&s&&s.Object===Object&&s,y=typeof self=="object"&&self&&self.Object===Object&&self,_=h||y||Function("return this")(),E,w=Array.prototype,S=Function.prototype,N=Object.prototype,P=_["__core-js_shared__"],U=(E=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",X=S.toString,re=N.hasOwnProperty,Y=N.toString,ye=RegExp("^"+X.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=w.splice,se=J(_,"Map"),fe=J(Object,"create");function we(ve){var te=-1,Ae=ve?ve.length:0;for(this.clear();++te<Ae;){var Te=ve[te];this.set(Te[0],Te[1])}}function Pe(ve){var te=-1,Ae=ve?ve.length:0;for(this.clear();++te<Ae;){var Te=ve[te];this.set(Te[0],Te[1])}}function z(ve){var te=-1,Ae=ve?ve.length:0;for(this.clear();++te<Ae;){var Te=ve[te];this.set(Te[0],Te[1])}}function j(ve,te){for(var Ae,Te,Xe=ve.length;Xe--;)if((Ae=ve[Xe][0])===(Te=te)||Ae!=Ae&&Te!=Te)return Xe;return-1}function L(ve){return!(!W(ve)||(te=ve,U&&U in te))&&(function(Ae){var Te=W(Ae)?Y.call(Ae):"";return Te=="[object Function]"||Te=="[object GeneratorFunction]"}(ve)||function(Ae){var Te=!1;if(Ae!=null&&typeof Ae.toString!="function")try{Te=!!(Ae+"")}catch{}return Te}(ve)?ye:c).test(function(Ae){if(Ae!=null){try{return X.call(Ae)}catch{}try{return Ae+""}catch{}}return""}(ve));var te}function F(ve,te){var Ae,Te,Xe=ve.__data__;return((Te=typeof(Ae=te))=="string"||Te=="number"||Te=="symbol"||Te=="boolean"?Ae!=="__proto__":Ae===null)?Xe[typeof te=="string"?"string":"hash"]:Xe.map}function J(ve,te){var Ae=function(Te,Xe){return Te==null?void 0:Te[Xe]}(ve,te);return L(Ae)?Ae:void 0}function ee(ve,te){if(typeof ve!="function"||te&&typeof te!="function")throw new TypeError("Expected a function");var Ae=function(){var Te=arguments,Xe=te?te.apply(this,Te):Te[0],ht=Ae.cache;if(ht.has(Xe))return ht.get(Xe);var Q=ve.apply(this,Te);return Ae.cache=ht.set(Xe,Q),Q};return Ae.cache=new(ee.Cache||z),Ae}function W(ve){var te=typeof ve;return!!ve&&(te=="object"||te=="function")}we.prototype.clear=function(){this.__data__=fe?fe(null):{}},we.prototype.delete=function(ve){return this.has(ve)&&delete this.__data__[ve]},we.prototype.get=function(ve){var te=this.__data__;if(fe){var Ae=te[ve];return Ae==="__lodash_hash_undefined__"?void 0:Ae}return re.call(te,ve)?te[ve]:void 0},we.prototype.has=function(ve){var te=this.__data__;return fe?te[ve]!==void 0:re.call(te,ve)},we.prototype.set=function(ve,te){return this.__data__[ve]=fe&&te===void 0?"__lodash_hash_undefined__":te,this},Pe.prototype.clear=function(){this.__data__=[]},Pe.prototype.delete=function(ve){var te=this.__data__,Ae=j(te,ve);return!(Ae<0)&&(Ae==te.length-1?te.pop():ue.call(te,Ae,1),!0)},Pe.prototype.get=function(ve){var te=this.__data__,Ae=j(te,ve);return Ae<0?void 0:te[Ae][1]},Pe.prototype.has=function(ve){return j(this.__data__,ve)>-1},Pe.prototype.set=function(ve,te){var Ae=this.__data__,Te=j(Ae,ve);return Te<0?Ae.push([ve,te]):Ae[Te][1]=te,this},z.prototype.clear=function(){this.__data__={hash:new we,map:new(se||Pe),string:new we}},z.prototype.delete=function(ve){return F(this,ve).delete(ve)},z.prototype.get=function(ve){return F(this,ve).get(ve)},z.prototype.has=function(ve){return F(this,ve).has(ve)},z.prototype.set=function(ve,te){return F(this,ve).set(ve,te),this},ee.Cache=z,i.exports=ee}).call(this,t(3))},function(i,e,t){(function(s){var c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,_=/^0o[0-7]+$/i,E=parseInt,w=typeof s=="object"&&s&&s.Object===Object&&s,S=typeof self=="object"&&self&&self.Object===Object&&self,N=w||S||Function("return this")(),P=Object.prototype.toString,U=Math.max,X=Math.min,re=function(){return N.Date.now()};function Y(ue){var se=typeof ue;return!!ue&&(se=="object"||se=="function")}function ye(ue){if(typeof ue=="number")return ue;if(function(we){return typeof we=="symbol"||function(Pe){return!!Pe&&typeof Pe=="object"}(we)&&P.call(we)=="[object Symbol]"}(ue))return NaN;if(Y(ue)){var se=typeof ue.valueOf=="function"?ue.valueOf():ue;ue=Y(se)?se+"":se}if(typeof ue!="string")return ue===0?ue:+ue;ue=ue.replace(c,"");var fe=y.test(ue);return fe||_.test(ue)?E(ue.slice(2),fe?2:8):h.test(ue)?NaN:+ue}i.exports=function(ue,se,fe){var we,Pe,z,j,L,F,J=0,ee=!1,W=!1,ve=!0;if(typeof ue!="function")throw new TypeError("Expected a function");function te(ge){var Re=we,Fe=Pe;return we=Pe=void 0,J=ge,j=ue.apply(Fe,Re)}function Ae(ge){return J=ge,L=setTimeout(Xe,se),ee?te(ge):j}function Te(ge){var Re=ge-F;return F===void 0||Re>=se||Re<0||W&&ge-J>=z}function Xe(){var ge=re();if(Te(ge))return ht(ge);L=setTimeout(Xe,function(Re){var Fe=se-(Re-F);return W?X(Fe,z-(Re-J)):Fe}(ge))}function ht(ge){return L=void 0,ve&&we?te(ge):(we=Pe=void 0,j)}function Q(){var ge=re(),Re=Te(ge);if(we=arguments,Pe=this,F=ge,Re){if(L===void 0)return Ae(F);if(W)return L=setTimeout(Xe,se),te(F)}return L===void 0&&(L=setTimeout(Xe,se)),j}return se=ye(se)||0,Y(fe)&&(ee=!!fe.leading,z=(W="maxWait"in fe)?U(ye(fe.maxWait)||0,se):z,ve="trailing"in fe?!!fe.trailing:ve),Q.cancel=function(){L!==void 0&&clearTimeout(L),J=0,we=F=Pe=L=void 0},Q.flush=function(){return L===void 0?j:ht(re())},Q}}).call(this,t(3))},function(i,e,t){(function(s,c){var h="[object Arguments]",y="[object Map]",_="[object Object]",E="[object Set]",w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/,N=/^\./,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,U=/\\(\\)?/g,X=/^\[object .+?Constructor\]$/,re=/^(?:0|[1-9]\d*)$/,Y={};Y["[object Float32Array]"]=Y["[object Float64Array]"]=Y["[object Int8Array]"]=Y["[object Int16Array]"]=Y["[object Int32Array]"]=Y["[object Uint8Array]"]=Y["[object Uint8ClampedArray]"]=Y["[object Uint16Array]"]=Y["[object Uint32Array]"]=!0,Y[h]=Y["[object Array]"]=Y["[object ArrayBuffer]"]=Y["[object Boolean]"]=Y["[object DataView]"]=Y["[object Date]"]=Y["[object Error]"]=Y["[object Function]"]=Y[y]=Y["[object Number]"]=Y[_]=Y["[object RegExp]"]=Y[E]=Y["[object String]"]=Y["[object WeakMap]"]=!1;var ye=typeof s=="object"&&s&&s.Object===Object&&s,ue=typeof self=="object"&&self&&self.Object===Object&&self,se=ye||ue||Function("return this")(),fe=e&&!e.nodeType&&e,we=fe&&typeof c=="object"&&c&&!c.nodeType&&c,Pe=we&&we.exports===fe&&ye.process,z=function(){try{return Pe&&Pe.binding("util")}catch{}}(),j=z&&z.isTypedArray;function L(K,xe,V,ae){var je=-1,tt=K?K.length:0;for(ae&&tt&&(V=K[++je]);++je<tt;)V=xe(V,K[je],je,K);return V}function F(K,xe){for(var V=-1,ae=K?K.length:0;++V<ae;)if(xe(K[V],V,K))return!0;return!1}function J(K,xe,V,ae,je){return je(K,function(tt,he,ut){V=ae?(ae=!1,tt):xe(V,tt,he,ut)}),V}function ee(K){var xe=!1;if(K!=null&&typeof K.toString!="function")try{xe=!!(K+"")}catch{}return xe}function W(K){var xe=-1,V=Array(K.size);return K.forEach(function(ae,je){V[++xe]=[je,ae]}),V}function ve(K){var xe=-1,V=Array(K.size);return K.forEach(function(ae){V[++xe]=ae}),V}var te,Ae,Te,Xe=Array.prototype,ht=Function.prototype,Q=Object.prototype,ge=se["__core-js_shared__"],Re=(te=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||""))?"Symbol(src)_1."+te:"",Fe=ht.toString,Se=Q.hasOwnProperty,$=Q.toString,Ve=RegExp("^"+Fe.call(Se).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=se.Symbol,st=se.Uint8Array,vt=Q.propertyIsEnumerable,mt=Xe.splice,xt=(Ae=Object.keys,Te=Object,function(K){return Ae(Te(K))}),Ft=Ln(se,"DataView"),ft=Ln(se,"Map"),qe=Ln(se,"Promise"),le=Ln(se,"Set"),Ne=Ln(se,"WeakMap"),pe=Ln(Object,"create"),De=xr(Ft),Be=xr(ft),Ye=xr(qe),Ue=xr(le),Mt=xr(Ne),ot=dt?dt.prototype:void 0,We=ot?ot.valueOf:void 0,Et=ot?ot.toString:void 0;function et(K){var xe=-1,V=K?K.length:0;for(this.clear();++xe<V;){var ae=K[xe];this.set(ae[0],ae[1])}}function at(K){var xe=-1,V=K?K.length:0;for(this.clear();++xe<V;){var ae=K[xe];this.set(ae[0],ae[1])}}function It(K){var xe=-1,V=K?K.length:0;for(this.clear();++xe<V;){var ae=K[xe];this.set(ae[0],ae[1])}}function sn(K){var xe=-1,V=K?K.length:0;for(this.__data__=new It;++xe<V;)this.add(K[xe])}function Nn(K){this.__data__=new at(K)}function Qn(K,xe){var V=lt(K)||Zn(K)?function(he,ut){for(var bt=-1,Bt=Array(he);++bt<he;)Bt[bt]=ut(bt);return Bt}(K.length,String):[],ae=V.length,je=!!ae;for(var tt in K)!Se.call(K,tt)||je&&(tt=="length"||Hn(tt,ae))||V.push(tt);return V}function sr(K,xe){for(var V=K.length;V--;)if(ci(K[V][0],xe))return V;return-1}et.prototype.clear=function(){this.__data__=pe?pe(null):{}},et.prototype.delete=function(K){return this.has(K)&&delete this.__data__[K]},et.prototype.get=function(K){var xe=this.__data__;if(pe){var V=xe[K];return V==="__lodash_hash_undefined__"?void 0:V}return Se.call(xe,K)?xe[K]:void 0},et.prototype.has=function(K){var xe=this.__data__;return pe?xe[K]!==void 0:Se.call(xe,K)},et.prototype.set=function(K,xe){return this.__data__[K]=pe&&xe===void 0?"__lodash_hash_undefined__":xe,this},at.prototype.clear=function(){this.__data__=[]},at.prototype.delete=function(K){var xe=this.__data__,V=sr(xe,K);return!(V<0)&&(V==xe.length-1?xe.pop():mt.call(xe,V,1),!0)},at.prototype.get=function(K){var xe=this.__data__,V=sr(xe,K);return V<0?void 0:xe[V][1]},at.prototype.has=function(K){return sr(this.__data__,K)>-1},at.prototype.set=function(K,xe){var V=this.__data__,ae=sr(V,K);return ae<0?V.push([K,xe]):V[ae][1]=xe,this},It.prototype.clear=function(){this.__data__={hash:new et,map:new(ft||at),string:new et}},It.prototype.delete=function(K){return pr(this,K).delete(K)},It.prototype.get=function(K){return pr(this,K).get(K)},It.prototype.has=function(K){return pr(this,K).has(K)},It.prototype.set=function(K,xe){return pr(this,K).set(K,xe),this},sn.prototype.add=sn.prototype.push=function(K){return this.__data__.set(K,"__lodash_hash_undefined__"),this},sn.prototype.has=function(K){return this.__data__.has(K)},Nn.prototype.clear=function(){this.__data__=new at},Nn.prototype.delete=function(K){return this.__data__.delete(K)},Nn.prototype.get=function(K){return this.__data__.get(K)},Nn.prototype.has=function(K){return this.__data__.has(K)},Nn.prototype.set=function(K,xe){var V=this.__data__;if(V instanceof at){var ae=V.__data__;if(!ft||ae.length<199)return ae.push([K,xe]),this;V=this.__data__=new It(ae)}return V.set(K,xe),this};var Jt,He=(Jt=function(K,xe){return K&&xn(K,xe,Yr)},function(K,xe){if(K==null)return K;if(!Cn(K))return Jt(K,xe);for(var V=K.length,ae=-1,je=Object(K);++ae<V&&xe(je[ae],ae,je)!==!1;);return K}),xn=function(K){return function(xe,V,ae){for(var je=-1,tt=Object(xe),he=ae(xe),ut=he.length;ut--;){var bt=he[++je];if(V(tt[bt],bt,tt)===!1)break}return xe}}();function Ut(K,xe){for(var V=0,ae=(xe=yr(xe,K)?[xe]:Kn(xe)).length;K!=null&&V<ae;)K=K[hr(xe[V++])];return V&&V==ae?K:void 0}function Xt(K,xe){return K!=null&&xe in Object(K)}function zn(K,xe,V,ae,je){return K===xe||(K==null||xe==null||!Sr(K)&&!ri(xe)?K!=K&&xe!=xe:function(tt,he,ut,bt,Bt,nn){var jt=lt(tt),Nt=lt(he),Ct="[object Array]",Rn="[object Array]";jt||(Ct=(Ct=Tr(tt))==h?_:Ct),Nt||(Rn=(Rn=Tr(he))==h?_:Rn);var ar=Ct==_&&!ee(tt),fr=Rn==_&&!ee(he),Wt=Ct==Rn;if(Wt&&!ar)return nn||(nn=new Nn),jt||kr(tt)?qr(tt,he,ut,bt,Bt,nn):function(cn,Ht,Ot,vn,be,q,rt){switch(Ot){case"[object DataView]":if(cn.byteLength!=Ht.byteLength||cn.byteOffset!=Ht.byteOffset)return!1;cn=cn.buffer,Ht=Ht.buffer;case"[object ArrayBuffer]":return!(cn.byteLength!=Ht.byteLength||!vn(new st(cn),new st(Ht)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ci(+cn,+Ht);case"[object Error]":return cn.name==Ht.name&&cn.message==Ht.message;case"[object RegExp]":case"[object String]":return cn==Ht+"";case y:var mn=W;case E:var Gn=2&q;if(mn||(mn=ve),cn.size!=Ht.size&&!Gn)return!1;var Xr=rt.get(cn);if(Xr)return Xr==Ht;q|=1,rt.set(cn,Ht);var Ui=qr(mn(cn),mn(Ht),vn,be,q,rt);return rt.delete(cn),Ui;case"[object Symbol]":if(We)return We.call(cn)==We.call(Ht)}return!1}(tt,he,Ct,ut,bt,Bt,nn);if(!(2&Bt)){var Ei=ar&&Se.call(tt,"__wrapped__"),Ha=fr&&Se.call(he,"__wrapped__");if(Ei||Ha){var Dn=Ei?tt.value():tt,vi=Ha?he.value():he;return nn||(nn=new Nn),ut(Dn,vi,bt,Bt,nn)}}return Wt?(nn||(nn=new Nn),function(cn,Ht,Ot,vn,be,q){var rt=2&be,mn=Yr(cn),Gn=mn.length,Xr=Yr(Ht).length;if(Gn!=Xr&&!rt)return!1;for(var Ui=Gn;Ui--;){var qn=mn[Ui];if(!(rt?qn in Ht:Se.call(Ht,qn)))return!1}var _t=q.get(cn);if(_t&&q.get(Ht))return _t==Ht;var wn=!0;q.set(cn,Ht),q.set(Ht,cn);for(var zs=rt;++Ui<Gn;){qn=mn[Ui];var Hs=cn[qn],Wr=Ht[qn];if(vn)var Lr=rt?vn(Wr,Hs,qn,Ht,cn,q):vn(Hs,Wr,qn,cn,Ht,q);if(!(Lr===void 0?Hs===Wr||Ot(Hs,Wr,vn,be,q):Lr)){wn=!1;break}zs||(zs=qn=="constructor")}if(wn&&!zs){var Di=cn.constructor,_i=Ht.constructor;Di==_i||!("constructor"in cn)||!("constructor"in Ht)||typeof Di=="function"&&Di instanceof Di&&typeof _i=="function"&&_i instanceof _i||(wn=!1)}return q.delete(cn),q.delete(Ht),wn}(tt,he,ut,bt,Bt,nn)):!1}(K,xe,zn,V,ae,je))}function Or(K){return!(!Sr(K)||function(xe){return!!Re&&Re in xe}(K))&&(jn(K)||ee(K)?Ve:X).test(xr(K))}function Gr(K){return typeof K=="function"?K:K==null?us:typeof K=="object"?lt(K)?function(ae,je){return yr(ae)&&bi(je)?an(hr(ae),je):function(tt){var he=function(ut,bt,Bt){var nn=ut==null?void 0:Ut(ut,bt);return nn===void 0?Bt:nn}(tt,ae);return he===void 0&&he===je?function(ut,bt){return ut!=null&&function(Bt,nn,jt){nn=yr(nn,Bt)?[nn]:Kn(nn);for(var Nt,Ct=-1,Rn=nn.length;++Ct<Rn;){var ar=hr(nn[Ct]);if(!(Nt=Bt!=null&&jt(Bt,ar)))break;Bt=Bt[ar]}return Nt||!!(Rn=Bt?Bt.length:0)&&Mn(Rn)&&Hn(ar,Rn)&&(lt(Bt)||Zn(Bt))}(ut,bt,Xt)}(tt,ae):zn(je,he,void 0,3)}}(K[0],K[1]):function(ae){var je=function(tt){for(var he=Yr(tt),ut=he.length;ut--;){var bt=he[ut],Bt=tt[bt];he[ut]=[bt,Bt,bi(Bt)]}return he}(ae);return je.length==1&&je[0][2]?an(je[0][0],je[0][1]):function(tt){return tt===ae||function(he,ut,bt,Bt){var nn=bt.length,jt=nn;if(he==null)return!jt;for(he=Object(he);nn--;){var Nt=bt[nn];if(Nt[2]?Nt[1]!==he[Nt[0]]:!(Nt[0]in he))return!1}for(;++nn<jt;){var Ct=(Nt=bt[nn])[0],Rn=he[Ct],ar=Nt[1];if(Nt[2]){if(Rn===void 0&&!(Ct in he))return!1}else{var fr=new Nn,Wt;if(!(Wt===void 0?zn(ar,Rn,Bt,3,fr):Wt))return!1}}return!0}(tt,ae,je)}}(K):yr(xe=K)?(V=hr(xe),function(ae){return ae==null?void 0:ae[V]}):function(ae){return function(je){return Ut(je,ae)}}(xe);var xe,V}function zt(K){if(V=(xe=K)&&xe.constructor,ae=typeof V=="function"&&V.prototype||Q,xe!==ae)return xt(K);var xe,V,ae,je=[];for(var tt in Object(K))Se.call(K,tt)&&tt!="constructor"&&je.push(tt);return je}function Kn(K){return lt(K)?K:Fs(K)}function qr(K,xe,V,ae,je,tt){var he=2&je,ut=K.length,bt=xe.length;if(ut!=bt&&!(he&&bt>ut))return!1;var Bt=tt.get(K);if(Bt&&tt.get(xe))return Bt==xe;var nn=-1,jt=!0,Nt=1&je?new sn:void 0;for(tt.set(K,xe),tt.set(xe,K);++nn<ut;){var Ct=K[nn],Rn=xe[nn];if(ae)var ar=he?ae(Rn,Ct,nn,xe,K,tt):ae(Ct,Rn,nn,K,xe,tt);if(ar!==void 0){if(ar)continue;jt=!1;break}if(Nt){if(!F(xe,function(fr,Wt){if(!Nt.has(Wt)&&(Ct===fr||V(Ct,fr,ae,je,tt)))return Nt.add(Wt)})){jt=!1;break}}else if(Ct!==Rn&&!V(Ct,Rn,ae,je,tt)){jt=!1;break}}return tt.delete(K),tt.delete(xe),jt}function pr(K,xe){var V,ae,je=K.__data__;return((ae=typeof(V=xe))=="string"||ae=="number"||ae=="symbol"||ae=="boolean"?V!=="__proto__":V===null)?je[typeof xe=="string"?"string":"hash"]:je.map}function Ln(K,xe){var V=function(ae,je){return ae==null?void 0:ae[je]}(K,xe);return Or(V)?V:void 0}var Tr=function(K){return $.call(K)};function Hn(K,xe){return!!(xe=xe??9007199254740991)&&(typeof K=="number"||re.test(K))&&K>-1&&K%1==0&&K<xe}function yr(K,xe){if(lt(K))return!1;var V=typeof K;return!(V!="number"&&V!="symbol"&&V!="boolean"&&K!=null&&!Ir(K))||S.test(K)||!w.test(K)||xe!=null&&K in Object(xe)}function bi(K){return K==K&&!Sr(K)}function an(K,xe){return function(V){return V!=null&&V[K]===xe&&(xe!==void 0||K in Object(V))}}(Ft&&Tr(new Ft(new ArrayBuffer(1)))!="[object DataView]"||ft&&Tr(new ft)!=y||qe&&Tr(qe.resolve())!="[object Promise]"||le&&Tr(new le)!=E||Ne&&Tr(new Ne)!="[object WeakMap]")&&(Tr=function(K){var xe=$.call(K),V=xe==_?K.constructor:void 0,ae=V?xr(V):void 0;if(ae)switch(ae){case De:return"[object DataView]";case Be:return y;case Ye:return"[object Promise]";case Ue:return E;case Mt:return"[object WeakMap]"}return xe});var Fs=tr(function(K){var xe;K=(xe=K)==null?"":function(ae){if(typeof ae=="string")return ae;if(Ir(ae))return Et?Et.call(ae):"";var je=ae+"";return je=="0"&&1/ae==-1/0?"-0":je}(xe);var V=[];return N.test(K)&&V.push(""),K.replace(P,function(ae,je,tt,he){V.push(tt?he.replace(U,"$1"):je||ae)}),V});function hr(K){if(typeof K=="string"||Ir(K))return K;var xe=K+"";return xe=="0"&&1/K==-1/0?"-0":xe}function xr(K){if(K!=null){try{return Fe.call(K)}catch{}try{return K+""}catch{}}return""}function tr(K,xe){if(typeof K!="function"||xe&&typeof xe!="function")throw new TypeError("Expected a function");var V=function(){var ae=arguments,je=xe?xe.apply(this,ae):ae[0],tt=V.cache;if(tt.has(je))return tt.get(je);var he=K.apply(this,ae);return V.cache=tt.set(je,he),he};return V.cache=new(tr.Cache||It),V}function ci(K,xe){return K===xe||K!=K&&xe!=xe}function Zn(K){return function(xe){return ri(xe)&&Cn(xe)}(K)&&Se.call(K,"callee")&&(!vt.call(K,"callee")||$.call(K)==h)}tr.Cache=It;var lt=Array.isArray;function Cn(K){return K!=null&&Mn(K.length)&&!jn(K)}function jn(K){var xe=Sr(K)?$.call(K):"";return xe=="[object Function]"||xe=="[object GeneratorFunction]"}function Mn(K){return typeof K=="number"&&K>-1&&K%1==0&&K<=9007199254740991}function Sr(K){var xe=typeof K;return!!K&&(xe=="object"||xe=="function")}function ri(K){return!!K&&typeof K=="object"}function Ir(K){return typeof K=="symbol"||ri(K)&&$.call(K)=="[object Symbol]"}var kr=j?function(K){return function(xe){return K(xe)}}(j):function(K){return ri(K)&&Mn(K.length)&&!!Y[$.call(K)]};function Yr(K){return Cn(K)?Qn(K):zt(K)}function us(K){return K}c.exports=function(K,xe,V){var ae=lt(K)?L:J,je=arguments.length<3;return ae(K,Gr(xe),V,je,He)}}).call(this,t(3),t(7)(i))},function(i,e){i.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(i,e){String.prototype.padEnd||(String.prototype.padEnd=function(t,s){return t>>=0,s=String(s!==void 0?s:" "),this.length>t?String(this):((t-=this.length)>s.length&&(s+=s.repeat(t/s.length)),String(this)+s.slice(0,t))})},function(i,e,t){function s(Q,ge,Re){return ge in Q?Object.defineProperty(Q,ge,{value:Re,enumerable:!0,configurable:!0,writable:!0}):Q[ge]=Re,Q}function c(Q){if(Symbol.iterator in Object(Q)||Object.prototype.toString.call(Q)==="[object Arguments]")return Array.from(Q)}function h(Q){return function(ge){if(Array.isArray(ge)){for(var Re=0,Fe=new Array(ge.length);Re<ge.length;Re++)Fe[Re]=ge[Re];return Fe}}(Q)||c(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(Q){if(Array.isArray(Q))return Q}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function E(Q,ge){if(!(Q instanceof ge))throw new TypeError("Cannot call a class as a function")}function w(Q,ge){for(var Re=0;Re<ge.length;Re++){var Fe=ge[Re];Fe.enumerable=Fe.enumerable||!1,Fe.configurable=!0,"value"in Fe&&(Fe.writable=!0),Object.defineProperty(Q,Fe.key,Fe)}}function S(Q){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge})(Q)}function N(Q){return(N=typeof Symbol=="function"&&S(Symbol.iterator)==="symbol"?function(ge){return S(ge)}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":S(ge)})(Q)}function P(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function U(Q){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(ge){return ge.__proto__||Object.getPrototypeOf(ge)})(Q)}function X(Q,ge){return(X=Object.setPrototypeOf||function(Re,Fe){return Re.__proto__=Fe,Re})(Q,ge)}t.r(e);var re=t(0),Y=t.n(re),ye=t(5),ue=t.n(ye),se=t(4),fe=t.n(se),we=t(6),Pe=t.n(we),z=t(2),j=t.n(z),L=t(1),F=t.n(L);t(8);function J(Q,ge){return y(Q)||function(Re,Fe){var Se=[],$=!0,Ve=!1,dt=void 0;try{for(var st,vt=Re[Symbol.iterator]();!($=(st=vt.next()).done)&&(Se.push(st.value),!Fe||Se.length!==Fe);$=!0);}catch(mt){Ve=!0,dt=mt}finally{try{$||vt.return==null||vt.return()}finally{if(Ve)throw dt}}return Se}(Q,ge)||_()}var ee=[["Afghanistan",["asia"],"af","93"],["Albania",["europe"],"al","355"],["Algeria",["africa","north-africa"],"dz","213"],["Andorra",["europe"],"ad","376"],["Angola",["africa"],"ao","244"],["Antigua and Barbuda",["america","carribean"],"ag","1268"],["Argentina",["america","south-america"],"ar","54","(..) ........",0,["11","221","223","261","264","2652","280","2905","291","2920","2966","299","341","342","343","351","376","379","381","3833","385","387","388"]],["Armenia",["asia","ex-ussr"],"am","374",".. ......"],["Aruba",["america","carribean"],"aw","297"],["Australia",["oceania"],"au","61","(..) .... ....",0,["2","3","4","7","8","02","03","04","07","08"]],["Austria",["europe","eu-union"],"at","43"],["Azerbaijan",["asia","ex-ussr"],"az","994","(..) ... .. .."],["Bahamas",["america","carribean"],"bs","1242"],["Bahrain",["middle-east"],"bh","973"],["Bangladesh",["asia"],"bd","880"],["Barbados",["america","carribean"],"bb","1246"],["Belarus",["europe","ex-ussr"],"by","375","(..) ... .. .."],["Belgium",["europe","eu-union"],"be","32","... .. .. .."],["Belize",["america","central-america"],"bz","501"],["Benin",["africa"],"bj","229"],["Bhutan",["asia"],"bt","975"],["Bolivia",["america","south-america"],"bo","591"],["Bosnia and Herzegovina",["europe","ex-yugos"],"ba","387"],["Botswana",["africa"],"bw","267"],["Brazil",["america","south-america"],"br","55","(..) ........."],["British Indian Ocean Territory",["asia"],"io","246"],["Brunei",["asia"],"bn","673"],["Bulgaria",["europe","eu-union"],"bg","359"],["Burkina Faso",["africa"],"bf","226"],["Burundi",["africa"],"bi","257"],["Cambodia",["asia"],"kh","855"],["Cameroon",["africa"],"cm","237"],["Canada",["america","north-america"],"ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde",["africa"],"cv","238"],["Caribbean Netherlands",["america","carribean"],"bq","599","",1],["Central African Republic",["africa"],"cf","236"],["Chad",["africa"],"td","235"],["Chile",["america","south-america"],"cl","56"],["China",["asia"],"cn","86","..-........."],["Colombia",["america","south-america"],"co","57","... ... ...."],["Comoros",["africa"],"km","269"],["Congo",["africa"],"cd","243"],["Congo",["africa"],"cg","242"],["Costa Rica",["america","central-america"],"cr","506","....-...."],["Côte d’Ivoire",["africa"],"ci","225",".. .. .. .."],["Croatia",["europe","eu-union","ex-yugos"],"hr","385"],["Cuba",["america","carribean"],"cu","53"],["Curaçao",["america","carribean"],"cw","599","",0],["Cyprus",["europe","eu-union"],"cy","357",".. ......"],["Czech Republic",["europe","eu-union"],"cz","420","... ... ..."],["Denmark",["europe","eu-union","baltic"],"dk","45",".. .. .. .."],["Djibouti",["africa"],"dj","253"],["Dominica",["america","carribean"],"dm","1767"],["Dominican Republic",["america","carribean"],"do","1","",2,["809","829","849"]],["Ecuador",["america","south-america"],"ec","593"],["Egypt",["africa","north-africa"],"eg","20"],["El Salvador",["america","central-america"],"sv","503","....-...."],["Equatorial Guinea",["africa"],"gq","240"],["Eritrea",["africa"],"er","291"],["Estonia",["europe","eu-union","ex-ussr","baltic"],"ee","372",".... ......"],["Ethiopia",["africa"],"et","251"],["Fiji",["oceania"],"fj","679"],["Finland",["europe","eu-union","baltic"],"fi","358",".. ... .. .."],["France",["europe","eu-union"],"fr","33",". .. .. .. .."],["French Guiana",["america","south-america"],"gf","594"],["French Polynesia",["oceania"],"pf","689"],["Gabon",["africa"],"ga","241"],["Gambia",["africa"],"gm","220"],["Georgia",["asia","ex-ussr"],"ge","995"],["Germany",["europe","eu-union","baltic"],"de","49",".... ........"],["Ghana",["africa"],"gh","233"],["Greece",["europe","eu-union"],"gr","30"],["Grenada",["america","carribean"],"gd","1473"],["Guadeloupe",["america","carribean"],"gp","590","",0],["Guam",["oceania"],"gu","1671"],["Guatemala",["america","central-america"],"gt","502","....-...."],["Guinea",["africa"],"gn","224"],["Guinea-Bissau",["africa"],"gw","245"],["Guyana",["america","south-america"],"gy","592"],["Haiti",["america","carribean"],"ht","509","....-...."],["Honduras",["america","central-america"],"hn","504"],["Hong Kong",["asia"],"hk","852",".... ...."],["Hungary",["europe","eu-union"],"hu","36"],["Iceland",["europe"],"is","354","... ...."],["India",["asia"],"in","91",".....-....."],["Indonesia",["asia"],"id","62"],["Iran",["middle-east"],"ir","98","... ... ...."],["Iraq",["middle-east"],"iq","964"],["Ireland",["europe","eu-union"],"ie","353",".. ......."],["Israel",["middle-east"],"il","972","... ... ...."],["Italy",["europe","eu-union"],"it","39","... .......",0],["Jamaica",["america","carribean"],"jm","1876"],["Japan",["asia"],"jp","81",".. .... ...."],["Jordan",["middle-east"],"jo","962"],["Kazakhstan",["asia","ex-ussr"],"kz","7","... ...-..-..",1,["310","311","312","313","315","318","321","324","325","326","327","336","7172","73622"]],["Kenya",["africa"],"ke","254"],["Kiribati",["oceania"],"ki","686"],["Kosovo",["europe","ex-yugos"],"xk","383"],["Kuwait",["middle-east"],"kw","965"],["Kyrgyzstan",["asia","ex-ussr"],"kg","996","... ... ..."],["Laos",["asia"],"la","856"],["Latvia",["europe","eu-union","ex-ussr","baltic"],"lv","371",".. ... ..."],["Lebanon",["middle-east"],"lb","961"],["Lesotho",["africa"],"ls","266"],["Liberia",["africa"],"lr","231"],["Libya",["africa","north-africa"],"ly","218"],["Liechtenstein",["europe"],"li","423"],["Lithuania",["europe","eu-union","ex-ussr","baltic"],"lt","370"],["Luxembourg",["europe","eu-union"],"lu","352"],["Macau",["asia"],"mo","853"],["Macedonia",["europe","ex-yugos"],"mk","389"],["Madagascar",["africa"],"mg","261"],["Malawi",["africa"],"mw","265"],["Malaysia",["asia"],"my","60","..-....-...."],["Maldives",["asia"],"mv","960"],["Mali",["africa"],"ml","223"],["Malta",["europe","eu-union"],"mt","356"],["Marshall Islands",["oceania"],"mh","692"],["Martinique",["america","carribean"],"mq","596"],["Mauritania",["africa"],"mr","222"],["Mauritius",["africa"],"mu","230"],["Mexico",["america","central-america"],"mx","52","... ... ....",0,["55","81","33","656","664","998","774","229"]],["Micronesia",["oceania"],"fm","691"],["Moldova",["europe"],"md","373","(..) ..-..-.."],["Monaco",["europe"],"mc","377"],["Mongolia",["asia"],"mn","976"],["Montenegro",["europe","ex-yugos"],"me","382"],["Morocco",["africa","north-africa"],"ma","212"],["Mozambique",["africa"],"mz","258"],["Myanmar",["asia"],"mm","95"],["Namibia",["africa"],"na","264"],["Nauru",["africa"],"nr","674"],["Nepal",["asia"],"np","977"],["Netherlands",["europe","eu-union"],"nl","31",".. ........"],["New Caledonia",["oceania"],"nc","687"],["New Zealand",["oceania"],"nz","64","...-...-...."],["Nicaragua",["america","central-america"],"ni","505"],["Niger",["africa"],"ne","227"],["Nigeria",["africa"],"ng","234"],["North Korea",["asia"],"kp","850"],["Norway",["europe","baltic"],"no","47","... .. ..."],["Oman",["middle-east"],"om","968"],["Pakistan",["asia"],"pk","92","...-......."],["Palau",["oceania"],"pw","680"],["Palestine",["middle-east"],"ps","970"],["Panama",["america","central-america"],"pa","507"],["Papua New Guinea",["oceania"],"pg","675"],["Paraguay",["america","south-america"],"py","595"],["Peru",["america","south-america"],"pe","51"],["Philippines",["asia"],"ph","63",".... ......."],["Poland",["europe","eu-union","baltic"],"pl","48","...-...-..."],["Portugal",["europe","eu-union"],"pt","351"],["Puerto Rico",["america","carribean"],"pr","1","",3,["787","939"]],["Qatar",["middle-east"],"qa","974"],["Réunion",["africa"],"re","262"],["Romania",["europe","eu-union"],"ro","40"],["Russia",["europe","asia","ex-ussr","baltic"],"ru","7","(...) ...-..-..",0],["Rwanda",["africa"],"rw","250"],["Saint Kitts and Nevis",["america","carribean"],"kn","1869"],["Saint Lucia",["america","carribean"],"lc","1758"],["Saint Vincent and the Grenadines",["america","carribean"],"vc","1784"],["Samoa",["oceania"],"ws","685"],["San Marino",["europe"],"sm","378"],["São Tomé and Príncipe",["africa"],"st","239"],["Saudi Arabia",["middle-east"],"sa","966"],["Senegal",["africa"],"sn","221"],["Serbia",["europe","ex-yugos"],"rs","381"],["Seychelles",["africa"],"sc","248"],["Sierra Leone",["africa"],"sl","232"],["Singapore",["asia"],"sg","65","....-...."],["Slovakia",["europe","eu-union"],"sk","421"],["Slovenia",["europe","eu-union","ex-yugos"],"si","386"],["Solomon Islands",["oceania"],"sb","677"],["Somalia",["africa"],"so","252"],["South Africa",["africa"],"za","27"],["South Korea",["asia"],"kr","82","... .... ...."],["South Sudan",["africa","north-africa"],"ss","211"],["Spain",["europe","eu-union"],"es","34","... ... ..."],["Sri Lanka",["asia"],"lk","94"],["Sudan",["africa"],"sd","249"],["Suriname",["america","south-america"],"sr","597"],["Swaziland",["africa"],"sz","268"],["Sweden",["europe","eu-union","baltic"],"se","46","(...) ...-..."],["Switzerland",["europe"],"ch","41",".. ... .. .."],["Syria",["middle-east"],"sy","963"],["Taiwan",["asia"],"tw","886"],["Tajikistan",["asia","ex-ussr"],"tj","992"],["Tanzania",["africa"],"tz","255"],["Thailand",["asia"],"th","66"],["Timor-Leste",["asia"],"tl","670"],["Togo",["africa"],"tg","228"],["Tonga",["oceania"],"to","676"],["Trinidad and Tobago",["america","carribean"],"tt","1868"],["Tunisia",["africa","north-africa"],"tn","216"],["Turkey",["europe"],"tr","90","... ... .. .."],["Turkmenistan",["asia","ex-ussr"],"tm","993"],["Tuvalu",["asia"],"tv","688"],["Uganda",["africa"],"ug","256"],["Ukraine",["europe","ex-ussr"],"ua","380","(..) ... .. .."],["United Arab Emirates",["middle-east"],"ae","971"],["United Kingdom",["europe","eu-union"],"gb","44",".... ......"],["United States",["america","north-america"],"us","1","(...) ...-....",0,["907","205","251","256","334","479","501","870","480","520","602","623","928","209","213","310","323","408","415","510","530","559","562","619","626","650","661","707","714","760","805","818","831","858","909","916","925","949","951","303","719","970","203","860","202","302","239","305","321","352","386","407","561","727","772","813","850","863","904","941","954","229","404","478","706","770","912","808","319","515","563","641","712","208","217","309","312","618","630","708","773","815","847","219","260","317","574","765","812","316","620","785","913","270","502","606","859","225","318","337","504","985","413","508","617","781","978","301","410","207","231","248","269","313","517","586","616","734","810","906","989","218","320","507","612","651","763","952","314","417","573","636","660","816","228","601","662","406","252","336","704","828","910","919","701","308","402","603","201","609","732","856","908","973","505","575","702","775","212","315","516","518","585","607","631","716","718","845","914","216","330","419","440","513","614","740","937","405","580","918","503","541","215","412","570","610","717","724","814","401","803","843","864","605","423","615","731","865","901","931","210","214","254","281","325","361","409","432","512","713","806","817","830","903","915","936","940","956","972","979","435","801","276","434","540","703","757","804","802","206","253","360","425","509","262","414","608","715","920","304","307"]],["Uruguay",["america","south-america"],"uy","598"],["Uzbekistan",["asia","ex-ussr"],"uz","998",".. ... .. .."],["Vanuatu",["oceania"],"vu","678"],["Vatican City",["europe"],"va","39",".. .... ....",1],["Venezuela",["america","south-america"],"ve","58"],["Vietnam",["asia"],"vn","84"],["Yemen",["middle-east"],"ye","967"],["Zambia",["africa"],"zm","260"],["Zimbabwe",["africa"],"zw","263"]],W=[["American Samoa",["oceania"],"as","1684"],["Anguilla",["america","carribean"],"ai","1264"],["Bermuda",["america","north-america"],"bm","1441"],["British Virgin Islands",["america","carribean"],"vg","1284"],["Cayman Islands",["america","carribean"],"ky","1345"],["Cook Islands",["oceania"],"ck","682"],["Falkland Islands",["america","south-america"],"fk","500"],["Faroe Islands",["europe"],"fo","298"],["Gibraltar",["europe"],"gi","350"],["Greenland",["america"],"gl","299"],["Jersey",["europe","eu-union"],"je","44",".... ......"],["Montserrat",["america","carribean"],"ms","1664"],["Niue",["asia"],"nu","683"],["Norfolk Island",["oceania"],"nf","672"],["Northern Mariana Islands",["oceania"],"mp","1670"],["Saint Barthélemy",["america","carribean"],"bl","590","",1],["Saint Helena",["africa"],"sh","290"],["Saint Martin",["america","carribean"],"mf","590","",2],["Saint Pierre and Miquelon",["america","north-america"],"pm","508"],["Sint Maarten",["america","carribean"],"sx","1721"],["Tokelau",["oceania"],"tk","690"],["Turks and Caicos Islands",["america","carribean"],"tc","1649"],["U.S. Virgin Islands",["america","carribean"],"vi","1340"],["Wallis and Futuna",["oceania"],"wf","681"]];function ve(Q,ge,Re,Fe,Se){return!Re||Se?Q+"".padEnd(ge.length,".")+" "+Fe:Q+"".padEnd(ge.length,".")+" "+Re}function te(Q,ge,Re,Fe,Se){var $,Ve,dt=[];return Ve=ge===!0,[($=[]).concat.apply($,h(Q.map(function(st){var vt={name:st[0],regions:st[1],iso2:st[2],countryCode:st[3],dialCode:st[3],format:ve(Re,st[3],st[4],Fe,Se),priority:st[5]||0},mt=[];return st[6]&&st[6].map(function(xt){var Ft=function(ft){for(var qe=1;qe<arguments.length;qe++){var le=arguments[qe]!=null?arguments[qe]:{},Ne=Object.keys(le);typeof Object.getOwnPropertySymbols=="function"&&(Ne=Ne.concat(Object.getOwnPropertySymbols(le).filter(function(pe){return Object.getOwnPropertyDescriptor(le,pe).enumerable}))),Ne.forEach(function(pe){s(ft,pe,le[pe])})}return ft}({},vt);Ft.dialCode=st[3]+xt,Ft.isAreaCode=!0,Ft.areaCodeLength=xt.length,mt.push(Ft)}),mt.length>0?(vt.mainCode=!0,Ve||ge.constructor.name==="Array"&&ge.includes(st[2])?(vt.hasAreaCodes=!0,[vt].concat(mt)):(dt=dt.concat(mt),[vt])):[vt]}))),dt]}function Ae(Q,ge,Re,Fe){if(Re!==null){var Se=Object.keys(Re),$=Object.values(Re);Se.forEach(function(Ve,dt){if(Fe)return Q.push([Ve,$[dt]]);var st=Q.findIndex(function(mt){return mt[0]===Ve});if(st===-1){var vt=[Ve];vt[ge]=$[dt],Q.push(vt)}else Q[st][ge]=$[dt]})}}function Te(Q,ge){return ge.length===0?Q:Q.map(function(Re){var Fe=ge.findIndex(function($){return $[0]===Re[2]});if(Fe===-1)return Re;var Se=ge[Fe];return Se[1]&&(Re[4]=Se[1]),Se[3]&&(Re[5]=Se[3]),Se[2]&&(Re[6]=Se[2]),Re})}var Xe=function Q(ge,Re,Fe,Se,$,Ve,dt,st,vt,mt,xt,Ft,ft,qe){E(this,Q),this.filterRegions=function(ot,We){if(typeof ot=="string"){var Et=ot;return We.filter(function(et){return et.regions.some(function(at){return at===Et})})}return We.filter(function(et){return ot.map(function(at){return et.regions.some(function(It){return It===at})}).some(function(at){return at})})},this.sortTerritories=function(ot,We){var Et=[].concat(h(ot),h(We));return Et.sort(function(et,at){return et.name<at.name?-1:et.name>at.name?1:0}),Et},this.getFilteredCountryList=function(ot,We,Et){return ot.length===0?We:Et?ot.map(function(et){var at=We.find(function(It){return It.iso2===et});if(at)return at}).filter(function(et){return et}):We.filter(function(et){return ot.some(function(at){return at===et.iso2})})},this.localizeCountries=function(ot,We,Et){for(var et=0;et<ot.length;et++)We[ot[et].iso2]!==void 0?ot[et].localName=We[ot[et].iso2]:We[ot[et].name]!==void 0&&(ot[et].localName=We[ot[et].name]);return Et||ot.sort(function(at,It){return at.localName<It.localName?-1:at.localName>It.localName?1:0}),ot},this.getCustomAreas=function(ot,We){for(var Et=[],et=0;et<We.length;et++){var at=JSON.parse(JSON.stringify(ot));at.dialCode+=We[et],Et.push(at)}return Et},this.excludeCountries=function(ot,We){return We.length===0?ot:ot.filter(function(Et){return!We.includes(Et.iso2)})};var le=function(ot,We,Et){var et=[];return Ae(et,1,ot,!0),Ae(et,3,We),Ae(et,2,Et),et}(st,vt,mt),Ne=Te(JSON.parse(JSON.stringify(ee)),le),pe=Te(JSON.parse(JSON.stringify(W)),le),De=J(te(Ne,ge,Ft,ft,qe),2),Be=De[0],Ye=De[1];if(Re){var Ue=J(te(pe,ge,Ft,ft,qe),2),Mt=Ue[0];Ue[1],Be=this.sortTerritories(Mt,Be)}Fe&&(Be=this.filterRegions(Fe,Be)),this.onlyCountries=this.localizeCountries(this.excludeCountries(this.getFilteredCountryList(Se,Be,dt.includes("onlyCountries")),Ve),xt,dt.includes("onlyCountries")),this.preferredCountries=$.length===0?[]:this.localizeCountries(this.getFilteredCountryList($,Be,dt.includes("preferredCountries")),xt,dt.includes("preferredCountries")),this.hiddenAreaCodes=this.excludeCountries(this.getFilteredCountryList(Se,Ye),Ve)},ht=function(Q){function ge(Se){var $;E(this,ge),($=function(le,Ne){return!Ne||N(Ne)!=="object"&&typeof Ne!="function"?P(le):Ne}(this,U(ge).call(this,Se))).getProbableCandidate=fe()(function(le){return le&&le.length!==0?$.state.onlyCountries.filter(function(Ne){return j()(Ne.name.toLowerCase(),le.toLowerCase())},P(P($)))[0]:null}),$.guessSelectedCountry=fe()(function(le,Ne,pe,De){var Be;if($.props.enableAreaCodes===!1&&(De.some(function(Mt){if(j()(le,Mt.dialCode))return pe.some(function(ot){if(Mt.iso2===ot.iso2&&ot.mainCode)return Be=ot,!0}),!0}),Be))return Be;var Ye=pe.find(function(Mt){return Mt.iso2==Ne});if(le.trim()==="")return Ye;var Ue=pe.reduce(function(Mt,ot){return j()(le,ot.dialCode)&&(ot.dialCode.length>Mt.dialCode.length||ot.dialCode.length===Mt.dialCode.length&&ot.priority<Mt.priority)?ot:Mt},{dialCode:"",priority:10001},P(P($)));return Ue.name?Ue:Ye}),$.updateCountry=function(le){var Ne,pe=$.state.onlyCountries;(Ne=le.indexOf(0)>="0"&&le.indexOf(0)<="9"?pe.find(function(De){return De.dialCode==+le}):pe.find(function(De){return De.iso2==le}))&&Ne.dialCode&&$.setState({selectedCountry:Ne,formattedNumber:$.props.disableCountryCode?"":$.formatNumber(Ne.dialCode,Ne)})},$.scrollTo=function(le,Ne){if(le){var pe=$.dropdownRef;if(pe&&document.body){var De=pe.offsetHeight,Be=pe.getBoundingClientRect().top+document.body.scrollTop,Ye=Be+De,Ue=le,Mt=Ue.getBoundingClientRect(),ot=Ue.offsetHeight,We=Mt.top+document.body.scrollTop,Et=We+ot,et=We-Be+pe.scrollTop,at=De/2-ot/2;if($.props.enableSearch?We<Be+32:We<Be)Ne&&(et-=at),pe.scrollTop=et;else if(Et>Ye){Ne&&(et+=at);var It=De-ot;pe.scrollTop=et-It}}}},$.scrollToTop=function(){var le=$.dropdownRef;le&&document.body&&(le.scrollTop=0)},$.formatNumber=function(le,Ne){if(!Ne)return le;var pe,De=Ne.format,Be=$.props,Ye=Be.disableCountryCode,Ue=Be.enableAreaCodeStretch,Mt=Be.enableLongNumbers,ot=Be.autoFormat;if(Ye?((pe=De.split(" ")).shift(),pe=pe.join(" ")):Ue&&Ne.isAreaCode?((pe=De.split(" "))[1]=pe[1].replace(/\.+/,"".padEnd(Ne.areaCodeLength,".")),pe=pe.join(" ")):pe=De,!le||le.length===0)return Ye?"":$.props.prefix;if(le&&le.length<2||!pe||!ot)return Ye?le:$.props.prefix+le;var We,Et=Pe()(pe,function(et,at){if(et.remainingText.length===0)return et;if(at!==".")return{formattedText:et.formattedText+at,remainingText:et.remainingText};var It,sn=y(It=et.remainingText)||c(It)||_(),Nn=sn[0],Qn=sn.slice(1);return{formattedText:et.formattedText+Nn,remainingText:Qn}},{formattedText:"",remainingText:le.split("")});return(We=Mt?Et.formattedText+Et.remainingText.join(""):Et.formattedText).includes("(")&&!We.includes(")")&&(We+=")"),We},$.cursorToEnd=function(){var le=$.numberInputRef;if(document.activeElement===le){le.focus();var Ne=le.value.length;le.value.charAt(Ne-1)===")"&&(Ne-=1),le.setSelectionRange(Ne,Ne)}},$.getElement=function(le){return $["flag_no_".concat(le)]},$.getCountryData=function(){return $.state.selectedCountry?{name:$.state.selectedCountry.name||"",dialCode:$.state.selectedCountry.dialCode||"",countryCode:$.state.selectedCountry.iso2||"",format:$.state.selectedCountry.format||""}:{}},$.handleFlagDropdownClick=function(le){if(le.preventDefault(),$.state.showDropdown||!$.props.disabled){var Ne=$.state,pe=Ne.preferredCountries,De=Ne.onlyCountries,Be=Ne.selectedCountry,Ye=$.concatPreferredCountries(pe,De).findIndex(function(Ue){return Ue.dialCode===Be.dialCode&&Ue.iso2===Be.iso2});$.setState({showDropdown:!$.state.showDropdown,highlightCountryIndex:Ye},function(){$.state.showDropdown&&$.scrollTo($.getElement($.state.highlightCountryIndex))})}},$.handleInput=function(le){var Ne=le.target.value,pe=$.props,De=pe.prefix,Be=pe.onChange,Ye=$.props.disableCountryCode?"":De,Ue=$.state.selectedCountry,Mt=$.state.freezeSelection;if(!$.props.countryCodeEditable){var ot=De+(Ue.hasAreaCodes?$.state.onlyCountries.find(function(He){return He.iso2===Ue.iso2&&He.mainCode}).dialCode:Ue.dialCode);if(Ne.slice(0,ot.length)!==ot)return}if(Ne===De)return Be&&Be("",$.getCountryData(),le,""),$.setState({formattedNumber:""});if(!(Ne.replace(/\D/g,"").length>15&&($.props.enableLongNumbers===!1||typeof $.props.enableLongNumbers=="number"&&Ne.replace(/\D/g,"").length>$.props.enableLongNumbers))&&Ne!==$.state.formattedNumber){le.preventDefault?le.preventDefault():le.returnValue=!1;var We=$.props.country,Et=$.state,et=Et.onlyCountries,at=Et.selectedCountry,It=Et.hiddenAreaCodes;if(Be&&le.persist(),Ne.length>0){var sn=Ne.replace(/\D/g,"");(!$.state.freezeSelection||at&&at.dialCode.length>sn.length)&&(Ue=$.props.disableCountryGuess?at:$.guessSelectedCountry(sn.substring(0,6),We,et,It)||at,Mt=!1),Ye=$.formatNumber(sn,Ue),Ue=Ue.dialCode?Ue:at}var Nn=le.target.selectionStart,Qn=le.target.selectionStart,sr=$.state.formattedNumber,Jt=Ye.length-sr.length;$.setState({formattedNumber:Ye,freezeSelection:Mt,selectedCountry:Ue},function(){Jt>0&&(Qn-=Jt),Ye.charAt(Ye.length-1)==")"?$.numberInputRef.setSelectionRange(Ye.length-1,Ye.length-1):Qn>0&&sr.length>=Ye.length?$.numberInputRef.setSelectionRange(Qn,Qn):Nn<sr.length&&$.numberInputRef.setSelectionRange(Nn,Nn),Be&&Be(Ye.replace(/[^0-9]+/g,""),$.getCountryData(),le,Ye)})}},$.handleInputClick=function(le){$.setState({showDropdown:!1}),$.props.onClick&&$.props.onClick(le,$.getCountryData())},$.handleDoubleClick=function(le){var Ne=le.target.value.length;le.target.setSelectionRange(0,Ne)},$.handleFlagItemClick=function(le,Ne){var pe=$.state.selectedCountry,De=$.state.onlyCountries.find(function(Mt){return Mt==le});if(De){var Be=$.state.formattedNumber.replace(" ","").replace("(","").replace(")","").replace("-",""),Ye=Be.length>1?Be.replace(pe.dialCode,De.dialCode):De.dialCode,Ue=$.formatNumber(Ye.replace(/\D/g,""),De);$.setState({showDropdown:!1,selectedCountry:De,freezeSelection:!0,formattedNumber:Ue,searchValue:""},function(){$.cursorToEnd(),$.props.onChange&&$.props.onChange(Ue.replace(/[^0-9]+/g,""),$.getCountryData(),Ne,Ue)})}},$.handleInputFocus=function(le){$.numberInputRef&&$.numberInputRef.value===$.props.prefix&&$.state.selectedCountry&&!$.props.disableCountryCode&&$.setState({formattedNumber:$.props.prefix+$.state.selectedCountry.dialCode},function(){$.props.jumpCursorToEnd&&setTimeout($.cursorToEnd,0)}),$.setState({placeholder:""}),$.props.onFocus&&$.props.onFocus(le,$.getCountryData()),$.props.jumpCursorToEnd&&setTimeout($.cursorToEnd,0)},$.handleInputBlur=function(le){le.target.value||$.setState({placeholder:$.props.placeholder}),$.props.onBlur&&$.props.onBlur(le,$.getCountryData())},$.handleInputCopy=function(le){if($.props.copyNumbersOnly){var Ne=window.getSelection().toString().replace(/[^0-9]+/g,"");le.clipboardData.setData("text/plain",Ne),le.preventDefault()}},$.getHighlightCountryIndex=function(le){var Ne=$.state.highlightCountryIndex+le;return Ne<0||Ne>=$.state.onlyCountries.length+$.state.preferredCountries.length?Ne-le:$.props.enableSearch&&Ne>$.getSearchFilteredCountries().length?0:Ne},$.searchCountry=function(){var le=$.getProbableCandidate($.state.queryString)||$.state.onlyCountries[0],Ne=$.state.onlyCountries.findIndex(function(pe){return pe==le})+$.state.preferredCountries.length;$.scrollTo($.getElement(Ne),!0),$.setState({queryString:"",highlightCountryIndex:Ne})},$.handleKeydown=function(le){var Ne=$.props.keys,pe=le.target.className;if(pe.includes("selected-flag")&&le.which===Ne.ENTER&&!$.state.showDropdown)return $.handleFlagDropdownClick(le);if(pe.includes("form-control")&&(le.which===Ne.ENTER||le.which===Ne.ESC))return le.target.blur();if($.state.showDropdown&&!$.props.disabled&&(!pe.includes("search-box")||le.which===Ne.UP||le.which===Ne.DOWN||le.which===Ne.ENTER||le.which===Ne.ESC&&le.target.value==="")){le.preventDefault?le.preventDefault():le.returnValue=!1;var De=function(Be){$.setState({highlightCountryIndex:$.getHighlightCountryIndex(Be)},function(){$.scrollTo($.getElement($.state.highlightCountryIndex),!0)})};switch(le.which){case Ne.DOWN:De(1);break;case Ne.UP:De(-1);break;case Ne.ENTER:$.props.enableSearch?$.handleFlagItemClick($.getSearchFilteredCountries()[$.state.highlightCountryIndex]||$.getSearchFilteredCountries()[0],le):$.handleFlagItemClick([].concat(h($.state.preferredCountries),h($.state.onlyCountries))[$.state.highlightCountryIndex],le);break;case Ne.ESC:case Ne.TAB:$.setState({showDropdown:!1},$.cursorToEnd);break;default:(le.which>=Ne.A&&le.which<=Ne.Z||le.which===Ne.SPACE)&&$.setState({queryString:$.state.queryString+String.fromCharCode(le.which)},$.state.debouncedQueryStingSearcher)}}},$.handleInputKeyDown=function(le){var Ne=$.props,pe=Ne.keys,De=Ne.onEnterKeyPress,Be=Ne.onKeyDown;le.which===pe.ENTER&&De&&De(le),Be&&Be(le)},$.handleClickOutside=function(le){$.dropdownRef&&!$.dropdownContainerRef.contains(le.target)&&$.state.showDropdown&&$.setState({showDropdown:!1})},$.handleSearchChange=function(le){var Ne=le.currentTarget.value,pe=$.state,De=pe.preferredCountries,Be=pe.selectedCountry,Ye=0;if(Ne===""&&Be){var Ue=$.state.onlyCountries;Ye=$.concatPreferredCountries(De,Ue).findIndex(function(Mt){return Mt==Be}),setTimeout(function(){return $.scrollTo($.getElement(Ye))},100)}$.setState({searchValue:Ne,highlightCountryIndex:Ye})},$.concatPreferredCountries=function(le,Ne){return le.length>0?h(new Set(le.concat(Ne))):Ne},$.getDropdownCountryName=function(le){return le.localName||le.name},$.getSearchFilteredCountries=function(){var le=$.state,Ne=le.preferredCountries,pe=le.onlyCountries,De=le.searchValue,Be=$.props.enableSearch,Ye=$.concatPreferredCountries(Ne,pe),Ue=De.trim().toLowerCase().replace("+","");if(Be&&Ue){if(/^\d+$/.test(Ue))return Ye.filter(function(We){var Et=We.dialCode;return["".concat(Et)].some(function(et){return et.toLowerCase().includes(Ue)})});var Mt=Ye.filter(function(We){var Et=We.iso2;return["".concat(Et)].some(function(et){return et.toLowerCase().includes(Ue)})}),ot=Ye.filter(function(We){var Et=We.name,et=We.localName;return We.iso2,["".concat(Et),"".concat(et||"")].some(function(at){return at.toLowerCase().includes(Ue)})});return $.scrollToTop(),h(new Set([].concat(Mt,ot)))}return Ye},$.getCountryDropdownList=function(){var le=$.state,Ne=le.preferredCountries,pe=le.highlightCountryIndex,De=le.showDropdown,Be=le.searchValue,Ye=$.props,Ue=Ye.disableDropdown,Mt=Ye.prefix,ot=$.props,We=ot.enableSearch,Et=ot.searchNotFound,et=ot.disableSearchIcon,at=ot.searchClass,It=ot.searchStyle,sn=ot.searchPlaceholder,Nn=ot.autocompleteSearch,Qn=$.getSearchFilteredCountries().map(function(He,xn){var Ut=pe===xn,Xt=F()({country:!0,preferred:He.iso2==="us"||He.iso2==="gb",active:He.iso2==="us",highlight:Ut}),zn="flag ".concat(He.iso2);return Y.a.createElement("li",Object.assign({ref:function(Or){return $["flag_no_".concat(xn)]=Or},key:"flag_no_".concat(xn),"data-flag-key":"flag_no_".concat(xn),className:Xt,"data-dial-code":"1",tabIndex:Ue?"-1":"0","data-country-code":He.iso2,onClick:function(Or){return $.handleFlagItemClick(He,Or)},role:"option"},Ut?{"aria-selected":!0}:{}),Y.a.createElement("div",{className:zn}),Y.a.createElement("span",{className:"country-name"},$.getDropdownCountryName(He)),Y.a.createElement("span",{className:"dial-code"},He.format?$.formatNumber(He.dialCode,He):Mt+He.dialCode))}),sr=Y.a.createElement("li",{key:"dashes",className:"divider"});Ne.length>0&&(!We||We&&!Be.trim())&&Qn.splice(Ne.length,0,sr);var Jt=F()(s({"country-list":!0,hide:!De},$.props.dropdownClass,!0));return Y.a.createElement("ul",{ref:function(He){return!We&&He&&He.focus(),$.dropdownRef=He},className:Jt,style:$.props.dropdownStyle,role:"listbox",tabIndex:"0"},We&&Y.a.createElement("li",{className:F()(s({search:!0},at,at))},!et&&Y.a.createElement("span",{className:F()(s({"search-emoji":!0},"".concat(at,"-emoji"),at)),role:"img","aria-label":"Magnifying glass"},"🔎"),Y.a.createElement("input",{className:F()(s({"search-box":!0},"".concat(at,"-box"),at)),style:It,type:"search",placeholder:sn,autoFocus:!0,autoComplete:Nn?"on":"off",value:Be,onChange:$.handleSearchChange})),Qn.length>0?Qn:Y.a.createElement("li",{className:"no-entries-message"},Y.a.createElement("span",null,Et)))};var Ve,dt=new Xe(Se.enableAreaCodes,Se.enableTerritories,Se.regions,Se.onlyCountries,Se.preferredCountries,Se.excludeCountries,Se.preserveOrder,Se.masks,Se.priority,Se.areaCodes,Se.localization,Se.prefix,Se.defaultMask,Se.alwaysDefaultMask),st=dt.onlyCountries,vt=dt.preferredCountries,mt=dt.hiddenAreaCodes,xt=Se.value?Se.value.replace(/\D/g,""):"";Ve=Se.disableInitialCountryGuess?0:xt.length>1?$.guessSelectedCountry(xt.substring(0,6),Se.country,st,mt)||0:Se.country&&st.find(function(le){return le.iso2==Se.country})||0;var Ft,ft=xt.length<2&&Ve&&!j()(xt,Ve.dialCode)?Ve.dialCode:"";Ft=xt===""&&Ve===0?"":$.formatNumber((Se.disableCountryCode?"":ft)+xt,Ve.name?Ve:void 0);var qe=st.findIndex(function(le){return le==Ve});return $.state={showDropdown:Se.showDropdown,formattedNumber:Ft,onlyCountries:st,preferredCountries:vt,hiddenAreaCodes:mt,selectedCountry:Ve,highlightCountryIndex:qe,queryString:"",freezeSelection:!1,debouncedQueryStingSearcher:ue()($.searchCountry,250),searchValue:""},$}var Re,Fe;return function(Se,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");Se.prototype=Object.create($&&$.prototype,{constructor:{value:Se,writable:!0,configurable:!0}}),$&&X(Se,$)}(ge,Q),Re=ge,(Fe=[{key:"componentDidMount",value:function(){document.addEventListener&&this.props.enableClickOutside&&document.addEventListener("mousedown",this.handleClickOutside),this.props.onMount&&this.props.onMount(this.state.formattedNumber.replace(/[^0-9]+/g,""),this.getCountryData(),this.state.formattedNumber)}},{key:"componentWillUnmount",value:function(){document.removeEventListener&&this.props.enableClickOutside&&document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"componentDidUpdate",value:function(Se,$,Ve){Se.country!==this.props.country?this.updateCountry(this.props.country):Se.value!==this.props.value&&this.updateFormattedNumber(this.props.value)}},{key:"updateFormattedNumber",value:function(Se){if(Se===null)return this.setState({selectedCountry:0,formattedNumber:""});var $=this.state,Ve=$.onlyCountries,dt=$.selectedCountry,st=$.hiddenAreaCodes,vt=this.props,mt=vt.country,xt=vt.prefix;if(Se==="")return this.setState({selectedCountry:dt,formattedNumber:""});var Ft,ft,qe=Se.replace(/\D/g,"");if(dt&&j()(Se,xt+dt.dialCode))ft=this.formatNumber(qe,dt),this.setState({formattedNumber:ft});else{var le=(Ft=this.props.disableCountryGuess?dt:this.guessSelectedCountry(qe.substring(0,6),mt,Ve,st)||dt)&&j()(qe,xt+Ft.dialCode)?Ft.dialCode:"";ft=this.formatNumber((this.props.disableCountryCode?"":le)+qe,Ft||void 0),this.setState({selectedCountry:Ft,formattedNumber:ft})}}},{key:"render",value:function(){var Se,$,Ve,dt=this,st=this.state,vt=st.onlyCountries,mt=st.selectedCountry,xt=st.showDropdown,Ft=st.formattedNumber,ft=st.hiddenAreaCodes,qe=this.props,le=qe.disableDropdown,Ne=qe.renderStringAsFlag,pe=qe.isValid,De=qe.defaultErrorMessage,Be=qe.specialLabel;if(typeof pe=="boolean")$=pe;else{var Ye=pe(Ft.replace(/\D/g,""),mt,vt,ft);typeof Ye=="boolean"?($=Ye)===!1&&(Ve=De):($=!1,Ve=Ye)}var Ue=F()((s(Se={},this.props.containerClass,!0),s(Se,"react-tel-input",!0),Se)),Mt=F()({arrow:!0,up:xt}),ot=F()(s({"form-control":!0,"invalid-number":!$,open:xt},this.props.inputClass,!0)),We=F()({"selected-flag":!0,open:xt}),Et=F()(s({"flag-dropdown":!0,"invalid-number":!$,open:xt},this.props.buttonClass,!0)),et="flag ".concat(mt&&mt.iso2);return Y.a.createElement("div",{className:"".concat(Ue," ").concat(this.props.className),style:this.props.style||this.props.containerStyle,onKeyDown:this.handleKeydown},Be&&Y.a.createElement("div",{className:"special-label"},Be),Ve&&Y.a.createElement("div",{className:"invalid-number-message"},Ve),Y.a.createElement("input",Object.assign({className:ot,style:this.props.inputStyle,onChange:this.handleInput,onClick:this.handleInputClick,onDoubleClick:this.handleDoubleClick,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onCopy:this.handleInputCopy,value:Ft,onKeyDown:this.handleInputKeyDown,placeholder:this.props.placeholder,disabled:this.props.disabled,type:"tel"},this.props.inputProps,{ref:function(at){dt.numberInputRef=at,typeof dt.props.inputProps.ref=="function"?dt.props.inputProps.ref(at):typeof dt.props.inputProps.ref=="object"&&(dt.props.inputProps.ref.current=at)}})),Y.a.createElement("div",{className:Et,style:this.props.buttonStyle,ref:function(at){return dt.dropdownContainerRef=at}},Ne?Y.a.createElement("div",{className:We},Ne):Y.a.createElement("div",{onClick:le?void 0:this.handleFlagDropdownClick,className:We,title:mt?"".concat(mt.localName||mt.name,": + ").concat(mt.dialCode):"",tabIndex:le?"-1":"0",role:"button","aria-haspopup":"listbox","aria-expanded":!!xt||void 0},Y.a.createElement("div",{className:et},!le&&Y.a.createElement("div",{className:Mt}))),xt&&this.getCountryDropdownList()))}}])&&w(Re.prototype,Fe),ge}(Y.a.Component);ht.defaultProps={country:"",value:"",onlyCountries:[],preferredCountries:[],excludeCountries:[],placeholder:"1 (702) 123-4567",searchPlaceholder:"search",searchNotFound:"No entries to show",flagsImagePath:"./flags.png",disabled:!1,containerStyle:{},inputStyle:{},buttonStyle:{},dropdownStyle:{},searchStyle:{},containerClass:"",inputClass:"",buttonClass:"",dropdownClass:"",searchClass:"",className:"",autoFormat:!0,enableAreaCodes:!1,enableTerritories:!1,disableCountryCode:!1,disableDropdown:!1,enableLongNumbers:!1,countryCodeEditable:!0,enableSearch:!1,disableSearchIcon:!1,disableInitialCountryGuess:!1,disableCountryGuess:!1,regions:"",inputProps:{},localization:{},masks:null,priority:null,areaCodes:null,preserveOrder:[],defaultMask:"... ... ... ... ..",alwaysDefaultMask:!1,prefix:"+",copyNumbersOnly:!0,renderStringAsFlag:"",autocompleteSearch:!1,jumpCursorToEnd:!0,enableAreaCodeStretch:!1,enableClickOutside:!0,showDropdown:!1,isValid:!0,defaultErrorMessage:"",specialLabel:"Phone",onEnterKeyPress:null,keys:{UP:38,DOWN:40,RIGHT:39,LEFT:37,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,SPACE:32,TAB:9}},e.default=ht}])),l1}var VR=UR();const FR=Of(VR);function zR(){const i=Vs(),e=za(Ki),t=Po(Ki),[s,c]=ie.useState(!0),[h,y]=ie.useState({fullName:"",password:"",confirmPassword:"",phone:""}),[_,E]=ie.useState({}),[w,S]=ie.useState(""),[N,P]=ie.useState(null),[U,X]=ie.useState(null);ie.useEffect(()=>{const fe=Uf(e,async we=>{var Pe;if(P(we),we)try{const z=Zt(t,"users",we.uid),j=await zr(z);if(j.exists()){const L=j.data();if(X(L),L.phone){const F=(Pe=L==null?void 0:L.classroom)==null?void 0:Pe.status;i(F===1?"/dashboard":"/student-dashboard")}else we.displayName&&y(F=>({...F,fullName:we.displayName}))}}catch(z){console.error("Error checking user data:",z)}else i("/");c(!1)});return()=>fe()},[e,t,i]);const re=fe=>{const{name:we,value:Pe}=fe.target;y(z=>({...z,[we]:Pe})),_[we]&&E(z=>({...z,[we]:""}))},Y=fe=>{y(we=>({...we,phone:fe})),_.phone&&E(we=>({...we,phone:""}))},ye=()=>{const fe={};return h.fullName.trim()||(fe.fullName="กรุณากรอกชื่อ-นามสกุล"),h.password.length<6&&(fe.password="รหัสผ่านต้องมีอย่างน้อย 6 ตัวอักษร"),h.password!==h.confirmPassword&&(fe.confirmPassword="รหัสผ่านไม่ตรงกัน"),(!h.phone||h.phone.length<8)&&(fe.phone="กรุณากรอกเบอร์โทรศัพท์ที่ถูกต้อง"),E(fe),Object.keys(fe).length===0},ue=async fe=>{var we;if(fe.preventDefault(),S(""),!!ye())try{if(c(!0),!N)throw new Error("กรุณาเข้าสู่ระบบก่อนทำการลงทะเบียน");N.providerData.some(F=>F.providerId==="password")&&await sS(N,h.password);const Pe=Zt(t,"users",N.uid),z=await zr(Pe);z.exists()?await sl(Pe,{name:h.fullName,phone:h.phone,email:N.email,photo:N.photoURL,classroom:z.data().classroom||{cid:"",status:2}}):await Bi(Pe,{name:h.fullName,email:N.email,phone:h.phone,photo:N.photoURL,classroom:{cid:"",status:2}}),((we=(await zr(Pe)).data().classroom)==null?void 0:we.status)===1?i("/dashboard"):i("/student-dashboard")}catch(Pe){console.error("Registration error:",Pe),S(`เกิดข้อผิดพลาด: ${Pe.message}`)}finally{c(!1)}},se=()=>{e.signOut().then(()=>{i("/")})};return s?C.jsx("div",{className:"flex items-center justify-center h-screen bg-blue-50",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-2"}),C.jsx("p",{className:"text-blue-800 font-ChakraPetchTH",children:"กำลังตรวจสอบข้อมูล..."})]})}):C.jsxs("div",{className:"min-h-screen flex",children:[C.jsx("div",{className:"w-1/2 bg-gradient-to-br from-blue-200 to-blue-500 flex items-center justify-center p-6",children:C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-5xl font-ChakraPetchTH text-white mb-4",children:"ลงทะเบียน"}),C.jsx("h2",{className:"text-4xl font-ChakraPetchTH text-white mb-3",children:"ข้อมูลส่วนตัว"}),C.jsx("h3",{className:"text-3xl font-InterEN text-white",children:"Complete Your Profile"}),C.jsx("div",{className:"mt-12 w-24 h-1 bg-white/50 mx-auto rounded-full"})]})}),C.jsx("div",{className:"w-1/2 bg-white flex items-center justify-center p-6",children:C.jsxs("div",{className:"w-full max-w-md",children:[C.jsxs("div",{className:"mb-8 text-center",children:[C.jsx("h2",{className:"text-3xl font-ChakraPetchTH text-gray-800 mb-2",children:"กรอกข้อมูลเพิ่มเติม"}),C.jsx("p",{className:"text-gray-500 font-ChakraPetchTH",children:"กรุณากรอกข้อมูลให้ครบถ้วนเพื่อเข้าใช้งานระบบ"})]}),w&&C.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mb-6 shadow-sm",children:C.jsx("p",{className:"font-ChakraPetchTH",children:w})}),C.jsxs("form",{onSubmit:ue,className:"bg-white/80 rounded-lg p-6 shadow-sm border border-gray-100",children:[C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block font-ChakraPetchTH text-gray-700 text-sm font-medium mb-2",htmlFor:"fullName",children:"ชื่อ-นามสกุล"}),C.jsx("input",{type:"text",name:"fullName",id:"fullName",placeholder:"ชื่อ นามสกุล",value:h.fullName,onChange:re,className:"w-full px-4 py-3 border font-ChakraPetchTH border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),_.fullName&&C.jsx("p",{className:"text-red-500 font-ChakraPetchTH text-xs mt-1",children:_.fullName})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block font-ChakraPetchTH text-gray-700 text-sm font-medium mb-2",htmlFor:"password",children:"รหัสผ่าน"}),C.jsx("input",{type:"password",name:"password",id:"password",placeholder:"อย่างน้อย 6 ตัวอักษร",value:h.password,onChange:re,className:"w-full px-4 py-3 border font-ChakraPetchTH border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),_.password&&C.jsx("p",{className:"text-red-500 font-ChakraPetchTH text-xs mt-1",children:_.password})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("label",{className:"block font-ChakraPetchTH text-gray-700 text-sm font-medium mb-2",htmlFor:"confirmPassword",children:"ยืนยันรหัสผ่าน"}),C.jsx("input",{type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"ยืนยันรหัสผ่าน",value:h.confirmPassword,onChange:re,className:"w-full px-4 py-3 border font-ChakraPetchTH border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),_.confirmPassword&&C.jsx("p",{className:"text-red-500 font-ChakraPetchTH text-xs mt-1",children:_.confirmPassword})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("label",{className:"block font-ChakraPetchTH text-gray-700 text-sm font-medium mb-2",htmlFor:"phone",children:"เบอร์โทรศัพท์"}),C.jsx(FR,{country:"th",value:h.phone,onChange:Y,inputProps:{name:"phone",required:!0,className:"w-full px-4 py-3 pl-20 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"},containerClass:"relative",buttonStyle:{background:"transparent",border:"none",position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",zIndex:10},dropdownStyle:{width:"300px"},containerStyle:{width:"100%",height:"48px"},enableSearch:!0,searchPlaceholder:"ค้นหาประเทศ..."}),_.phone&&C.jsx("p",{className:"text-red-500 font-ChakraPetchTH text-xs mt-1",children:_.phone})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-ChakraPetchTH py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"ลงทะเบียน"}),C.jsx("button",{type:"button",onClick:se,className:"bg-gray-500 hover:bg-gray-700 text-white font-ChakraPetchTH py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"ยกเลิก"})]})]})]})})]})}function HR(){return C.jsx(SC,{children:C.jsxs(nC,{children:[C.jsx(ea,{path:"/",element:C.jsx(ON,{})}),C.jsx(ea,{path:"/register",element:C.jsx(zR,{})}),C.jsx(ea,{path:"/dashboard",element:C.jsx(XN,{})}),C.jsx(ea,{path:"/student-dashboard",element:C.jsx(PR,{})}),C.jsx(ea,{path:"/edit-profile",element:C.jsx(WN,{})}),C.jsx(ea,{path:"/edit-classroom/:cid",element:C.jsx(QN,{})}),C.jsx(ea,{path:"/create-quiz/:classroomId",element:C.jsx(BR,{})}),C.jsx(ea,{path:"/student-classroom/:classroomId",element:C.jsx(jR,{})}),C.jsx(ea,{path:"*",element:C.jsx(eC,{to:"/",replace:!0})})]})})}h_.createRoot(document.getElementById("root")).render(C.jsx(Fr.StrictMode,{children:C.jsx(HR,{})}));
