function Kv(i,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in i)){const f=Object.getOwnPropertyDescriptor(a,c);f&&Object.defineProperty(i,c,f.get?f:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function t(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=t(c);fetch(c.href,f)}})();var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var U0={exports:{}},su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2;function Zv(){if(I2)return su;I2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,c,f){var y=null;if(f!==void 0&&(y=""+f),c.key!==void 0&&(y=""+c.key),"key"in c){f={};for(var b in c)b!=="key"&&(f[b]=c[b])}else f=c;return c=f.ref,{$$typeof:i,type:a,key:y,ref:c!==void 0?c:null,props:f}}return su.Fragment=e,su.jsx=t,su.jsxs=t,su}var N2;function $v(){return N2||(N2=1,U0.exports=Zv()),U0.exports}var C=$v(),V0={exports:{}},Lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R2;function Jv(){if(R2)return Lt;R2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.iterator;function P(te){return te===null||typeof te!="object"?null:(te=R&&te[R]||te["@@iterator"],typeof te=="function"?te:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,ee={};function W(te,Ne,Pe){this.props=te,this.context=Ne,this.refs=ee,this.updater=Pe||F}W.prototype.isReactComponent={},W.prototype.setState=function(te,Ne){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,Ne,"setState")},W.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function de(){}de.prototype=W.prototype;function fe(te,Ne,Pe){this.props=te,this.context=Ne,this.refs=ee,this.updater=Pe||F}var ie=fe.prototype=new de;ie.constructor=fe,Y(ie,W.prototype),ie.isPureReactComponent=!0;var _e=Array.isArray,Be={H:null,A:null,T:null,S:null},ke=Object.prototype.hasOwnProperty;function z(te,Ne,Pe,He,ze,yt){return Pe=yt.ref,{$$typeof:i,type:te,key:Ne,ref:Pe!==void 0?Pe:null,props:yt}}function V(te,Ne){return z(te.type,Ne,void 0,void 0,void 0,te.props)}function k(te){return typeof te=="object"&&te!==null&&te.$$typeof===i}function G(te){var Ne={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Pe){return Ne[Pe]})}var K=/\/+/g;function $(te,Ne){return typeof te=="object"&&te!==null&&te.key!=null?G(""+te.key):Ne.toString(36)}function X(){}function Oe(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(X,X):(te.status="pending",te.then(function(Ne){te.status==="pending"&&(te.status="fulfilled",te.value=Ne)},function(Ne){te.status==="pending"&&(te.status="rejected",te.reason=Ne)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function oe(te,Ne,Pe,He,ze){var yt=typeof te;(yt==="undefined"||yt==="boolean")&&(te=null);var Re=!1;if(te===null)Re=!0;else switch(yt){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(te.$$typeof){case i:case e:Re=!0;break;case S:return Re=te._init,oe(Re(te._payload),Ne,Pe,He,ze)}}if(Re)return ze=ze(te),Re=He===""?"."+$(te,0):He,_e(ze)?(Pe="",Re!=null&&(Pe=Re.replace(K,"$&/")+"/"),oe(ze,Ne,Pe,"",function(nt){return nt})):ze!=null&&(k(ze)&&(ze=V(ze,Pe+(ze.key==null||te&&te.key===ze.key?"":(""+ze.key).replace(K,"$&/")+"/")+Re)),Ne.push(ze)),1;Re=0;var Ue=He===""?".":He+":";if(_e(te))for(var Fe=0;Fe<te.length;Fe++)He=te[Fe],yt=Ue+$(He,Fe),Re+=oe(He,Ne,Pe,yt,ze);else if(Fe=P(te),typeof Fe=="function")for(te=Fe.call(te),Fe=0;!(He=te.next()).done;)He=He.value,yt=Ue+$(He,Fe++),Re+=oe(He,Ne,Pe,yt,ze);else if(yt==="object"){if(typeof te.then=="function")return oe(Oe(te),Ne,Pe,He,ze);throw Ne=String(te),Error("Objects are not valid as a React child (found: "+(Ne==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":Ne)+"). If you meant to render a collection of children, use an array instead.")}return Re}function Ie(te,Ne,Pe){if(te==null)return te;var He=[],ze=0;return oe(te,He,"","",function(yt){return Ne.call(Pe,yt,ze++)}),He}function Ae(te){if(te._status===-1){var Ne=te._result;Ne=Ne(),Ne.then(function(Pe){(te._status===0||te._status===-1)&&(te._status=1,te._result=Pe)},function(Pe){(te._status===0||te._status===-1)&&(te._status=2,te._result=Pe)}),te._status===-1&&(te._status=0,te._result=Ne)}if(te._status===1)return te._result.default;throw te._result}var Qe=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(Ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)};function lt(){}return Lt.Children={map:Ie,forEach:function(te,Ne,Pe){Ie(te,function(){Ne.apply(this,arguments)},Pe)},count:function(te){var Ne=0;return Ie(te,function(){Ne++}),Ne},toArray:function(te){return Ie(te,function(Ne){return Ne})||[]},only:function(te){if(!k(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Lt.Component=W,Lt.Fragment=t,Lt.Profiler=c,Lt.PureComponent=fe,Lt.StrictMode=a,Lt.Suspense=_,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Be,Lt.act=function(){throw Error("act(...) is not supported in production builds of React.")},Lt.cache=function(te){return function(){return te.apply(null,arguments)}},Lt.cloneElement=function(te,Ne,Pe){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var He=Y({},te.props),ze=te.key,yt=void 0;if(Ne!=null)for(Re in Ne.ref!==void 0&&(yt=void 0),Ne.key!==void 0&&(ze=""+Ne.key),Ne)!ke.call(Ne,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&Ne.ref===void 0||(He[Re]=Ne[Re]);var Re=arguments.length-2;if(Re===1)He.children=Pe;else if(1<Re){for(var Ue=Array(Re),Fe=0;Fe<Re;Fe++)Ue[Fe]=arguments[Fe+2];He.children=Ue}return z(te.type,ze,void 0,void 0,yt,He)},Lt.createContext=function(te){return te={$$typeof:y,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:f,_context:te},te},Lt.createElement=function(te,Ne,Pe){var He,ze={},yt=null;if(Ne!=null)for(He in Ne.key!==void 0&&(yt=""+Ne.key),Ne)ke.call(Ne,He)&&He!=="key"&&He!=="__self"&&He!=="__source"&&(ze[He]=Ne[He]);var Re=arguments.length-2;if(Re===1)ze.children=Pe;else if(1<Re){for(var Ue=Array(Re),Fe=0;Fe<Re;Fe++)Ue[Fe]=arguments[Fe+2];ze.children=Ue}if(te&&te.defaultProps)for(He in Re=te.defaultProps,Re)ze[He]===void 0&&(ze[He]=Re[He]);return z(te,yt,void 0,void 0,null,ze)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(te){return{$$typeof:b,render:te}},Lt.isValidElement=k,Lt.lazy=function(te){return{$$typeof:S,_payload:{_status:-1,_result:te},_init:Ae}},Lt.memo=function(te,Ne){return{$$typeof:w,type:te,compare:Ne===void 0?null:Ne}},Lt.startTransition=function(te){var Ne=Be.T,Pe={};Be.T=Pe;try{var He=te(),ze=Be.S;ze!==null&&ze(Pe,He),typeof He=="object"&&He!==null&&typeof He.then=="function"&&He.then(lt,Qe)}catch(yt){Qe(yt)}finally{Be.T=Ne}},Lt.unstable_useCacheRefresh=function(){return Be.H.useCacheRefresh()},Lt.use=function(te){return Be.H.use(te)},Lt.useActionState=function(te,Ne,Pe){return Be.H.useActionState(te,Ne,Pe)},Lt.useCallback=function(te,Ne){return Be.H.useCallback(te,Ne)},Lt.useContext=function(te){return Be.H.useContext(te)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(te,Ne){return Be.H.useDeferredValue(te,Ne)},Lt.useEffect=function(te,Ne){return Be.H.useEffect(te,Ne)},Lt.useId=function(){return Be.H.useId()},Lt.useImperativeHandle=function(te,Ne,Pe){return Be.H.useImperativeHandle(te,Ne,Pe)},Lt.useInsertionEffect=function(te,Ne){return Be.H.useInsertionEffect(te,Ne)},Lt.useLayoutEffect=function(te,Ne){return Be.H.useLayoutEffect(te,Ne)},Lt.useMemo=function(te,Ne){return Be.H.useMemo(te,Ne)},Lt.useOptimistic=function(te,Ne){return Be.H.useOptimistic(te,Ne)},Lt.useReducer=function(te,Ne,Pe){return Be.H.useReducer(te,Ne,Pe)},Lt.useRef=function(te){return Be.H.useRef(te)},Lt.useState=function(te){return Be.H.useState(te)},Lt.useSyncExternalStore=function(te,Ne,Pe){return Be.H.useSyncExternalStore(te,Ne,Pe)},Lt.useTransition=function(){return Be.H.useTransition()},Lt.version="19.0.0",Lt}var D2;function B1(){return D2||(D2=1,V0.exports=Jv()),V0.exports}var J=B1();const wr=P1(J);var F0={exports:{}},au={},z0={exports:{}},H0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2;function eb(){return M2||(M2=1,function(i){function e(Ie,Ae){var Qe=Ie.length;Ie.push(Ae);e:for(;0<Qe;){var lt=Qe-1>>>1,te=Ie[lt];if(0<c(te,Ae))Ie[lt]=Ae,Ie[Qe]=te,Qe=lt;else break e}}function t(Ie){return Ie.length===0?null:Ie[0]}function a(Ie){if(Ie.length===0)return null;var Ae=Ie[0],Qe=Ie.pop();if(Qe!==Ae){Ie[0]=Qe;e:for(var lt=0,te=Ie.length,Ne=te>>>1;lt<Ne;){var Pe=2*(lt+1)-1,He=Ie[Pe],ze=Pe+1,yt=Ie[ze];if(0>c(He,Qe))ze<te&&0>c(yt,He)?(Ie[lt]=yt,Ie[ze]=Qe,lt=ze):(Ie[lt]=He,Ie[Pe]=Qe,lt=Pe);else if(ze<te&&0>c(yt,Qe))Ie[lt]=yt,Ie[ze]=Qe,lt=ze;else break e}}return Ae}function c(Ie,Ae){var Qe=Ie.sortIndex-Ae.sortIndex;return Qe!==0?Qe:Ie.id-Ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;i.unstable_now=function(){return f.now()}}else{var y=Date,b=y.now();i.unstable_now=function(){return y.now()-b}}var _=[],w=[],S=1,R=null,P=3,F=!1,Y=!1,ee=!1,W=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function ie(Ie){for(var Ae=t(w);Ae!==null;){if(Ae.callback===null)a(w);else if(Ae.startTime<=Ie)a(w),Ae.sortIndex=Ae.expirationTime,e(_,Ae);else break;Ae=t(w)}}function _e(Ie){if(ee=!1,ie(Ie),!Y)if(t(_)!==null)Y=!0,Oe();else{var Ae=t(w);Ae!==null&&oe(_e,Ae.startTime-Ie)}}var Be=!1,ke=-1,z=5,V=-1;function k(){return!(i.unstable_now()-V<z)}function G(){if(Be){var Ie=i.unstable_now();V=Ie;var Ae=!0;try{e:{Y=!1,ee&&(ee=!1,de(ke),ke=-1),F=!0;var Qe=P;try{t:{for(ie(Ie),R=t(_);R!==null&&!(R.expirationTime>Ie&&k());){var lt=R.callback;if(typeof lt=="function"){R.callback=null,P=R.priorityLevel;var te=lt(R.expirationTime<=Ie);if(Ie=i.unstable_now(),typeof te=="function"){R.callback=te,ie(Ie),Ae=!0;break t}R===t(_)&&a(_),ie(Ie)}else a(_);R=t(_)}if(R!==null)Ae=!0;else{var Ne=t(w);Ne!==null&&oe(_e,Ne.startTime-Ie),Ae=!1}}break e}finally{R=null,P=Qe,F=!1}Ae=void 0}}finally{Ae?K():Be=!1}}}var K;if(typeof fe=="function")K=function(){fe(G)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,X=$.port2;$.port1.onmessage=G,K=function(){X.postMessage(null)}}else K=function(){W(G,0)};function Oe(){Be||(Be=!0,K())}function oe(Ie,Ae){ke=W(function(){Ie(i.unstable_now())},Ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ie){Ie.callback=null},i.unstable_continueExecution=function(){Y||F||(Y=!0,Oe())},i.unstable_forceFrameRate=function(Ie){0>Ie||125<Ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<Ie?Math.floor(1e3/Ie):5},i.unstable_getCurrentPriorityLevel=function(){return P},i.unstable_getFirstCallbackNode=function(){return t(_)},i.unstable_next=function(Ie){switch(P){case 1:case 2:case 3:var Ae=3;break;default:Ae=P}var Qe=P;P=Ae;try{return Ie()}finally{P=Qe}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Ie,Ae){switch(Ie){case 1:case 2:case 3:case 4:case 5:break;default:Ie=3}var Qe=P;P=Ie;try{return Ae()}finally{P=Qe}},i.unstable_scheduleCallback=function(Ie,Ae,Qe){var lt=i.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?lt+Qe:lt):Qe=lt,Ie){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Qe+te,Ie={id:S++,callback:Ae,priorityLevel:Ie,startTime:Qe,expirationTime:te,sortIndex:-1},Qe>lt?(Ie.sortIndex=Qe,e(w,Ie),t(_)===null&&Ie===t(w)&&(ee?(de(ke),ke=-1):ee=!0,oe(_e,Qe-lt))):(Ie.sortIndex=te,e(_,Ie),Y||F||(Y=!0,Oe())),Ie},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(Ie){var Ae=P;return function(){var Qe=P;P=Ae;try{return Ie.apply(this,arguments)}finally{P=Qe}}}}(H0)),H0}var O2;function tb(){return O2||(O2=1,z0.exports=eb()),z0.exports}var G0={exports:{}},ai={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L2;function nb(){if(L2)return ai;L2=1;var i=B1();function e(_){var w="https://react.dev/errors/"+_;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)w+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+_+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(_,w,S){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:R==null?null:""+R,children:_,containerInfo:w,implementation:S}}var y=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(_,w){if(_==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return ai.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,ai.createPortal=function(_,w){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(e(299));return f(_,w,null,S)},ai.flushSync=function(_){var w=y.T,S=a.p;try{if(y.T=null,a.p=2,_)return _()}finally{y.T=w,a.p=S,a.d.f()}},ai.preconnect=function(_,w){typeof _=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,a.d.C(_,w))},ai.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},ai.preinit=function(_,w){if(typeof _=="string"&&w&&typeof w.as=="string"){var S=w.as,R=b(S,w.crossOrigin),P=typeof w.integrity=="string"?w.integrity:void 0,F=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;S==="style"?a.d.S(_,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:R,integrity:P,fetchPriority:F}):S==="script"&&a.d.X(_,{crossOrigin:R,integrity:P,fetchPriority:F,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},ai.preinitModule=function(_,w){if(typeof _=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var S=b(w.as,w.crossOrigin);a.d.M(_,{crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&a.d.M(_)},ai.preload=function(_,w){if(typeof _=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var S=w.as,R=b(S,w.crossOrigin);a.d.L(_,S,{crossOrigin:R,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},ai.preloadModule=function(_,w){if(typeof _=="string")if(w){var S=b(w.as,w.crossOrigin);a.d.m(_,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else a.d.m(_)},ai.requestFormReset=function(_){a.d.r(_)},ai.unstable_batchedUpdates=function(_,w){return _(w)},ai.useFormState=function(_,w,S){return y.H.useFormState(_,w,S)},ai.useFormStatus=function(){return y.H.useHostTransitionStatus()},ai.version="19.0.0",ai}var k2;function rb(){if(k2)return G0.exports;k2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),G0.exports=nb(),G0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2;function ib(){if(P2)return au;P2=1;var i=tb(),e=B1(),t=rb();function a(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var f=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),F=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),_e=Symbol.for("react.memo_cache_sentinel"),Be=Symbol.iterator;function ke(n){return n===null||typeof n!="object"?null:(n=Be&&n[Be]||n["@@iterator"],typeof n=="function"?n:null)}var z=Symbol.for("react.client.reference");function V(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case b:return"Portal";case S:return"Profiler";case w:return"StrictMode";case ee:return"Suspense";case W:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case F:return(n.displayName||"Context")+".Provider";case P:return(n._context.displayName||"Context")+".Consumer";case Y:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return s=n.displayName||null,s!==null?s:V(n.type)||"Memo";case fe:s=n._payload,n=n._init;try{return V(n(s))}catch{}}return null}var k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=Object.assign,K,$;function X(n){if(K===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);K=s&&s[1]||"",$=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+K+n+$}var Oe=!1;function oe(n,s){if(!n||Oe)return"";Oe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(ve){var pe=ve}Reflect.construct(n,[],Me)}else{try{Me.call()}catch(ve){pe=ve}n.call(Me.prototype)}}else{try{throw Error()}catch(ve){pe=ve}(Me=n())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(ve){if(ve&&pe&&typeof ve.stack=="string")return[ve.stack,pe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=g.DetermineComponentFrameRoot(),M=A[0],j=A[1];if(M&&j){var Q=M.split(`
`),ae=j.split(`
`);for(E=g=0;g<Q.length&&!Q[g].includes("DetermineComponentFrameRoot");)g++;for(;E<ae.length&&!ae[E].includes("DetermineComponentFrameRoot");)E++;if(g===Q.length||E===ae.length)for(g=Q.length-1,E=ae.length-1;1<=g&&0<=E&&Q[g]!==ae[E];)E--;for(;1<=g&&0<=E;g--,E--)if(Q[g]!==ae[E]){if(g!==1||E!==1)do if(g--,E--,0>E||Q[g]!==ae[E]){var be=`
`+Q[g].replace(" at new "," at ");return n.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",n.displayName)),be}while(1<=g&&0<=E);break}}}finally{Oe=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?X(u):""}function Ie(n){switch(n.tag){case 26:case 27:case 5:return X(n.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return n=oe(n.type,!1),n;case 11:return n=oe(n.type.render,!1),n;case 1:return n=oe(n.type,!0),n;default:return""}}function Ae(n){try{var s="";do s+=Ie(n),n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Qe(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function lt(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function te(n){if(Qe(n)!==n)throw Error(a(188))}function Ne(n){var s=n.alternate;if(!s){if(s=Qe(n),s===null)throw Error(a(188));return s!==n?null:n}for(var u=n,g=s;;){var E=u.return;if(E===null)break;var A=E.alternate;if(A===null){if(g=E.return,g!==null){u=g;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===u)return te(E),n;if(A===g)return te(E),s;A=A.sibling}throw Error(a(188))}if(u.return!==g.return)u=E,g=A;else{for(var M=!1,j=E.child;j;){if(j===u){M=!0,u=E,g=A;break}if(j===g){M=!0,g=E,u=A;break}j=j.sibling}if(!M){for(j=A.child;j;){if(j===u){M=!0,u=A,g=E;break}if(j===g){M=!0,g=A,u=E;break}j=j.sibling}if(!M)throw Error(a(189))}}if(u.alternate!==g)throw Error(a(190))}if(u.tag!==3)throw Error(a(188));return u.stateNode.current===u?n:s}function Pe(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=Pe(n),s!==null)return s;n=n.sibling}return null}var He=Array.isArray,ze=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},Re=[],Ue=-1;function Fe(n){return{current:n}}function nt(n){0>Ue||(n.current=Re[Ue],Re[Ue]=null,Ue--)}function tt(n,s){Ue++,Re[Ue]=n.current,n.current=s}var gt=Fe(null),An=Fe(null),xt=Fe(null),We=Fe(null);function Ze(n,s){switch(tt(xt,s),tt(An,n),tt(gt,null),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?r2(s):0;break;default:if(n=n===8?s.parentNode:s,s=n.tagName,n=n.namespaceURI)n=r2(n),s=i2(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}nt(gt),tt(gt,s)}function st(){nt(gt),nt(An),nt(xt)}function at(n){n.memoizedState!==null&&tt(We,n);var s=gt.current,u=i2(s,n.type);s!==u&&(tt(An,n),tt(gt,u))}function it(n){An.current===n&&(nt(gt),nt(An)),We.current===n&&(nt(We),eu._currentValue=yt)}var mt=Object.prototype.hasOwnProperty,_t=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,fr=i.unstable_shouldYield,Br=i.unstable_requestPaint,It=i.unstable_now,xi=i.unstable_getCurrentPriorityLevel,en=i.unstable_ImmediatePriority,yn=i.unstable_UserBlockingPriority,Ln=i.unstable_NormalPriority,Kn=i.unstable_LowPriority,Ls=i.unstable_IdlePriority,Pi=i.log,Bi=i.unstable_setDisableYieldValue,un=null,Le=null;function Cn(n){if(Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(un,n,void 0,(n.current.flags&128)===128)}catch{}}function Ot(n){if(typeof Pi=="function"&&Bi(n),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(un,n)}catch{}}var Pt=Math.clz32?Math.clz32:jr,sr=Math.log,yi=Math.LN2;function jr(n){return n>>>=0,n===0?32:31-(sr(n)/yi|0)|0}var Rt=128,qn=4194304;function ei(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ur(n,s){var u=n.pendingLanes;if(u===0)return 0;var g=0,E=n.suspendedLanes,A=n.pingedLanes,M=n.warmLanes;n=n.finishedLanes!==0;var j=u&134217727;return j!==0?(u=j&~E,u!==0?g=ei(u):(A&=j,A!==0?g=ei(A):n||(M=j&~M,M!==0&&(g=ei(M))))):(j=u&~E,j!==0?g=ei(j):A!==0?g=ei(A):n||(M=u&~M,M!==0&&(g=ei(M)))),g===0?0:s!==0&&s!==g&&!(s&E)&&(E=g&-g,M=s&-s,E>=M||E===32&&(M&4194176)!==0)?s:g}function Zn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function es(n,s){switch(n){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vn(){var n=Rt;return Rt<<=1,!(Rt&4194176)&&(Rt=128),n}function Vr(){var n=qn;return qn<<=1,!(qn&62914560)&&(qn=4194304),n}function ji(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function tn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Pa(n,s,u,g,E,A){var M=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var j=n.entanglements,Q=n.expirationTimes,ae=n.hiddenUpdates;for(u=M&~u;0<u;){var be=31-Pt(u),Me=1<<be;j[be]=0,Q[be]=-1;var pe=ae[be];if(pe!==null)for(ae[be]=null,be=0;be<pe.length;be++){var ve=pe[be];ve!==null&&(ve.lane&=-536870913)}u&=~Me}g!==0&&Ir(n,g,0),A!==0&&E===0&&n.tag!==0&&(n.suspendedLanes|=A&~(M&~s))}function Ir(n,s,u){n.pendingLanes|=s,n.suspendedLanes&=~s;var g=31-Pt(s);n.entangledLanes|=s,n.entanglements[g]=n.entanglements[g]|1073741824|u&4194218}function wi(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var g=31-Pt(u),E=1<<g;E&s|n[g]&s&&(n[g]|=s),u&=~E}}function ar(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function Ei(){var n=ze.p;return n!==0?n:(n=window.event,n===void 0?32:v2(n.type))}function Yn(n,s){var u=ze.p;try{return ze.p=n,s()}finally{ze.p=u}}var Ke=Math.random().toString(36).slice(2),wn="__reactFiber$"+Ke,kn="__reactProps$"+Ke,Nn="__reactContainer$"+Ke,ti="__reactEvents$"+Ke,Ui="__reactListeners$"+Ke,Fr="__reactHandles$"+Ke,Nr="__reactResources$"+Ke,_i="__reactMarker$"+Ke;function ks(n){delete n[wn],delete n[kn],delete n[ti],delete n[Ui],delete n[Fr]}function dn(n){var s=n[wn];if(s)return s;for(var u=n.parentNode;u;){if(s=u[Nn]||u[wn]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=o2(n);n!==null;){if(u=n[wn])return u;n=o2(n)}return s}n=u,u=n.parentNode}return null}function En(n){if(n=n[wn]||n[Nn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Z(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(a(33))}function Ee(n){var s=n[Nr];return s||(s=n[Nr]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ye(n){n[_i]=!0}var Ct=new Set,me={};function bt(n,s){Ft(n,s),Ft(n+"Capture",s)}function Ft(n,s){for(me[n]=s,n=0;n<s.length;n++)Ct.add(s[n])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qt={},zt={};function Bt(n){return mt.call(zt,n)?!0:mt.call(qt,n)?!1:yc.test(n)?zt[n]=!0:(qt[n]=!0,!1)}function ts(n,s,u){if(Bt(s))if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+u)}}function ns(n,s,u){if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+u)}}function ni(n,s,u,g){if(g===null)n.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(s,u,""+g)}}function Zt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Vi(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wc(n){var s=Vi(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),g=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var E=u.get,A=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return E.call(this)},set:function(M){g=""+M,A.call(this,M)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function gn(n){n._valueTracker||(n._valueTracker=wc(n))}function vi(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),g="";return n&&(g=Vi(n)?n.checked?"true":"false":n.value),n=g,n!==u?(s.setValue(n),!0):!1}function Ba(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ri=/[\n"\\]/g;function vt(n){return n.replace(ri,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Pn(n,s,u,g,E,A,M,j){n.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.type=M:n.removeAttribute("type"),s!=null?M==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Zt(s)):n.value!==""+Zt(s)&&(n.value=""+Zt(s)):M!=="submit"&&M!=="reset"||n.removeAttribute("value"),s!=null?H(n,M,Zt(s)):u!=null?H(n,M,Zt(u)):g!=null&&n.removeAttribute("value"),E==null&&A!=null&&(n.defaultChecked=!!A),E!=null&&(n.checked=E&&typeof E!="function"&&typeof E!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.name=""+Zt(j):n.removeAttribute("name")}function ue(n,s,u,g,E,A,M,j){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.type=A),s!=null||u!=null){if(!(A!=="submit"&&A!=="reset"||s!=null))return;u=u!=null?""+Zt(u):"",s=s!=null?""+Zt(s):u,j||s===n.value||(n.value=s),n.defaultValue=s}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,n.checked=j?n.checked:!!g,n.defaultChecked=!!g,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(n.name=M)}function H(n,s,u){s==="number"&&Ba(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function qe(n,s,u,g){if(n=n.options,s){s={};for(var E=0;E<u.length;E++)s["$"+u[E]]=!0;for(u=0;u<n.length;u++)E=s.hasOwnProperty("$"+n[u].value),n[u].selected!==E&&(n[u].selected=E),E&&g&&(n[u].defaultSelected=!0)}else{for(u=""+Zt(u),s=null,E=0;E<n.length;E++){if(n[E].value===u){n[E].selected=!0,g&&(n[E].defaultSelected=!0);return}s!==null||n[E].disabled||(s=n[E])}s!==null&&(s.selected=!0)}}function Rn(n,s,u){if(s!=null&&(s=""+Zt(s),s!==n.value&&(n.value=s),u==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=u!=null?""+Zt(u):""}function or(n,s,u,g){if(s==null){if(g!=null){if(u!=null)throw Error(a(92));if(He(g)){if(1<g.length)throw Error(a(93));g=g[0]}u=g}u==null&&(u=""),s=u}u=Zt(s),n.defaultValue=u,g=n.textContent,g===u&&g!==""&&g!==null&&(n.value=g)}function bi(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var Ro=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rr(n,s,u){var g=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":g?n.setProperty(s,u):typeof u!="number"||u===0||Ro.has(s)?s==="float"?n.cssFloat=u:n[s]=(""+u).trim():n[s]=u+"px"}function ct(n,s,u){if(s!=null&&typeof s!="object")throw Error(a(62));if(n=n.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?n.setProperty(g,""):g==="float"?n.cssFloat="":n[g]="");for(var E in s)g=s[E],s.hasOwnProperty(E)&&u[E]!==g&&Rr(n,E,g)}else for(var A in s)s.hasOwnProperty(A)&&Rr(n,A,s[A])}function mn(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ec=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ai(n){return Ec.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var zr=null;function Ps(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Es=null,_n=null;function hi(n){var s=En(n);if(s&&(n=s.stateNode)){var u=n[kn]||null;e:switch(n=s.stateNode,s.type){case"input":if(Pn(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+vt(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var g=u[s];if(g!==n&&g.form===n.form){var E=g[kn]||null;if(!E)throw Error(a(90));Pn(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(s=0;s<u.length;s++)g=u[s],g.form===n.form&&vi(g)}break e;case"textarea":Rn(n,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&qe(n,!!u.multiple,s,!1)}}}var Ci=!1;function ft(n,s,u){if(Ci)return n(s,u);Ci=!0;try{var g=n(s);return g}finally{if(Ci=!1,(Es!==null||_n!==null)&&(_h(),Es&&(s=Es,n=_n,_n=Es=null,hi(s),n)))for(s=0;s<n.length;s++)hi(n[s])}}function ta(n,s){var u=n.stateNode;if(u===null)return null;var g=u[kn]||null;if(g===null)return null;u=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(a(231,s,typeof u));return u}var pt=!1;if(dr)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){pt=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{pt=!1}var rs=null,is=null,ss=null;function Fi(){if(ss)return ss;var n,s=is,u=s.length,g,E="value"in rs?rs.value:rs.textContent,A=E.length;for(n=0;n<u&&s[n]===E[n];n++);var M=u-n;for(g=1;g<=M&&s[u-g]===E[A-g];g++);return ss=E.slice(n,1<g?1-g:void 0)}function as(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ii(){return!0}function _s(){return!1}function Fn(n){function s(u,g,E,A,M){this._reactName=u,this._targetInst=E,this.type=g,this.nativeEvent=A,this.target=M,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(u=n[j],this[j]=u?u(A):A[j]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ii:_s,this.isPropagationStopped=_s,this}return G(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),s}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},os=Fn(sn),zi=G({},sn,{view:0,detail:0}),_r=Fn(zi),na,ra,Hi,ia=G({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Hi&&(Hi&&n.type==="mousemove"?(na=n.screenX-Hi.screenX,ra=n.screenY-Hi.screenY):ra=na=0,Hi=n),na)},movementY:function(n){return"movementY"in n?n.movementY:ra}}),Ti=Fn(ia),fl=G({},ia,{dataTransfer:0}),an=Fn(fl),Bs=G({},zi,{relatedTarget:0}),vs=Fn(Bs),Si=G({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=Fn(Si),xe=G({},sn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tt=Fn(xe),lr=G({},sn,{data:0}),js=Fn(lr),Us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Do(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=gl[n])?!!s[n]:!1}function bs(){return Do}var zn=G({},zi,{key:function(n){if(n.key){var s=Us[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=as(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?dl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(n){return n.type==="keypress"?as(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?as(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Vs=Fn(zn),Tn=G({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fs=Fn(Tn),Hr=G({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),on=Fn(Hr),ut=G({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ml=Fn(ut),hn=G({},ia,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ii=Fn(hn),$n=G({},sn,{newState:0,oldState:0}),pl=Fn($n),fi=[9,13,27,32],Ni=dr&&"CompositionEvent"in window,x=null;dr&&"documentMode"in document&&(x=document.documentMode);var I=dr&&"TextEvent"in window&&!x,D=dr&&(!Ni||x&&8<x&&11>=x),U=" ",ce=!1;function ye(n,s){switch(n){case"keyup":return fi.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yt=!1;function jn(n,s){switch(n){case"compositionend":return Xe(s);case"keypress":return s.which!==32?null:(ce=!0,U);case"textInput":return n=s.data,n===U&&ce?null:n;default:return null}}function Xt(n,s){if(Yt)return n==="compositionend"||!Ni&&ye(n,s)?(n=Fi(),ss=is=rs=null,Yt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return D&&s.locale!=="ko"?null:s.data;default:return null}}var Sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Sn[n.type]:s==="textarea"}function Jn(n,s,u,g){Es?_n?_n.push(g):_n=[g]:Es=g,s=Th(s,"onChange"),0<s.length&&(u=new os("onChange","change",null,u,g),n.push({event:u,listeners:s}))}var gr=null,cr=null;function Mo(n){$p(n,0)}function Ua(n){var s=Z(n);if(vi(s))return n}function Hu(n,s){if(n==="change")return s}var _c=!1;if(dr){var Ri;if(dr){var vc="oninput"in document;if(!vc){var xl=document.createElement("div");xl.setAttribute("oninput","return;"),vc=typeof xl.oninput=="function"}Ri=vc}else Ri=!1;_c=Ri&&(!document.documentMode||9<document.documentMode)}function Va(){gr&&(gr.detachEvent("onpropertychange",Qt),cr=gr=null)}function Qt(n){if(n.propertyName==="value"&&Ua(cr)){var s=[];Jn(s,cr,n,Ps(n)),ft(Mo,s)}}function yl(n,s,u){n==="focusin"?(Va(),gr=s,cr=u,gr.attachEvent("onpropertychange",Qt)):n==="focusout"&&Va()}function O(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ua(cr)}function r(n,s){if(n==="click")return Ua(s)}function o(n,s){if(n==="input"||n==="change")return Ua(s)}function l(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var h=typeof Object.is=="function"?Object.is:l;function d(n,s){if(h(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),g=Object.keys(s);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var E=u[g];if(!mt.call(s,E)||!h(n[E],s[E]))return!1}return!0}function m(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function p(n,s){var u=m(n);n=0;for(var g;u;){if(u.nodeType===3){if(g=n+u.textContent.length,n<=s&&g>=s)return{node:u,offset:s-n};n=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=m(u)}}function v(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?v(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function T(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Ba(n.document);s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=Ba(n.document)}return s}function N(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function L(n,s){var u=T(s);s=n.focusedElem;var g=n.selectionRange;if(u!==s&&s&&s.ownerDocument&&v(s.ownerDocument.documentElement,s)){if(g!==null&&N(s)){if(n=g.start,u=g.end,u===void 0&&(u=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(u,s.value.length);else if(u=(n=s.ownerDocument||document)&&n.defaultView||window,u.getSelection){u=u.getSelection();var E=s.textContent.length,A=Math.min(g.start,E);g=g.end===void 0?A:Math.min(g.end,E),!u.extend&&A>g&&(E=g,g=A,A=E),E=p(s,A);var M=p(s,g);E&&M&&(u.rangeCount!==1||u.anchorNode!==E.node||u.anchorOffset!==E.offset||u.focusNode!==M.node||u.focusOffset!==M.offset)&&(n=n.createRange(),n.setStart(E.node,E.offset),u.removeAllRanges(),A>g?(u.addRange(n),u.extend(M.node,M.offset)):(n.setEnd(M.node,M.offset),u.addRange(n)))}}for(n=[],u=s;u=u.parentNode;)u.nodeType===1&&n.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)u=n[s],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var B=dr&&"documentMode"in document&&11>=document.documentMode,q=null,ne=null,re=null,he=!1;function we(n,s,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;he||q==null||q!==Ba(g)||(g=q,"selectionStart"in g&&N(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),re&&d(re,g)||(re=g,g=Th(ne,"onSelect"),0<g.length&&(s=new os("onSelect","select",null,s,u),n.push({event:s,listeners:g}),s.target=q)))}function je(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var Ve={animationend:je("Animation","AnimationEnd"),animationiteration:je("Animation","AnimationIteration"),animationstart:je("Animation","AnimationStart"),transitionrun:je("Transition","TransitionRun"),transitionstart:je("Transition","TransitionStart"),transitioncancel:je("Transition","TransitionCancel"),transitionend:je("Transition","TransitionEnd")},De={},jt={};dr&&(jt=document.createElement("div").style,"AnimationEvent"in window||(delete Ve.animationend.animation,delete Ve.animationiteration.animation,delete Ve.animationstart.animation),"TransitionEvent"in window||delete Ve.transitionend.transition);function wt(n){if(De[n])return De[n];if(!Ve[n])return n;var s=Ve[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in jt)return De[n]=s[u];return n}var Gr=wt("animationend"),Di=wt("animationiteration"),qr=wt("animationstart"),pn=wt("transitionrun"),vr=wt("transitionstart"),di=wt("transitioncancel"),sa=wt("transitionend"),aa=new Map,Gu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Gi(n,s){aa.set(n,s),bt(s,[n])}var ls=[],wl=0,nd=0;function qu(){for(var n=wl,s=nd=wl=0;s<n;){var u=ls[s];ls[s++]=null;var g=ls[s];ls[s++]=null;var E=ls[s];ls[s++]=null;var A=ls[s];if(ls[s++]=null,g!==null&&E!==null){var M=g.pending;M===null?E.next=E:(E.next=M.next,M.next=E),g.pending=E}A!==0&&Gg(u,E,A)}}function Yu(n,s,u,g){ls[wl++]=n,ls[wl++]=s,ls[wl++]=u,ls[wl++]=g,nd|=g,n.lanes|=g,n=n.alternate,n!==null&&(n.lanes|=g)}function rd(n,s,u,g){return Yu(n,s,u,g),Xu(n)}function Fa(n,s){return Yu(n,null,null,s),Xu(n)}function Gg(n,s,u){n.lanes|=u;var g=n.alternate;g!==null&&(g.lanes|=u);for(var E=!1,A=n.return;A!==null;)A.childLanes|=u,g=A.alternate,g!==null&&(g.childLanes|=u),A.tag===22&&(n=A.stateNode,n===null||n._visibility&1||(E=!0)),n=A,A=A.return;E&&s!==null&&n.tag===3&&(A=n.stateNode,E=31-Pt(u),A=A.hiddenUpdates,n=A[E],n===null?A[E]=[s]:n.push(s),s.lane=u|536870912)}function Xu(n){if(50<Xc)throw Xc=0,c0=null,Error(a(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var El={},qg=new WeakMap;function cs(n,s){if(typeof n=="object"&&n!==null){var u=qg.get(n);return u!==void 0?u:(s={value:n,source:s,stack:Ae(s)},qg.set(n,s),s)}return{value:n,source:s,stack:Ae(s)}}var _l=[],vl=0,Qu=null,Wu=0,us=[],hs=0,Oo=null,oa=1,la="";function Lo(n,s){_l[vl++]=Wu,_l[vl++]=Qu,Qu=n,Wu=s}function Yg(n,s,u){us[hs++]=oa,us[hs++]=la,us[hs++]=Oo,Oo=n;var g=oa;n=la;var E=32-Pt(g)-1;g&=~(1<<E),u+=1;var A=32-Pt(s)+E;if(30<A){var M=E-E%5;A=(g&(1<<M)-1).toString(32),g>>=M,E-=M,oa=1<<32-Pt(s)+E|u<<E|g,la=A+n}else oa=1<<A|u<<E|g,la=n}function id(n){n.return!==null&&(Lo(n,1),Yg(n,1,0))}function sd(n){for(;n===Qu;)Qu=_l[--vl],_l[vl]=null,Wu=_l[--vl],_l[vl]=null;for(;n===Oo;)Oo=us[--hs],us[hs]=null,la=us[--hs],us[hs]=null,oa=us[--hs],us[hs]=null}var gi=null,Yr=null,ln=!1,As=null,zs=!1,ad=Error(a(519));function ko(n){var s=Error(a(418,""));throw Cc(cs(s,n)),ad}function Xg(n){var s=n.stateNode,u=n.type,g=n.memoizedProps;switch(s[wn]=n,s[kn]=g,u){case"dialog":$t("cancel",s),$t("close",s);break;case"iframe":case"object":case"embed":$t("load",s);break;case"video":case"audio":for(u=0;u<Wc.length;u++)$t(Wc[u],s);break;case"source":$t("error",s);break;case"img":case"image":case"link":$t("error",s),$t("load",s);break;case"details":$t("toggle",s);break;case"input":$t("invalid",s),ue(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),gn(s);break;case"select":$t("invalid",s);break;case"textarea":$t("invalid",s),or(s,g.value,g.defaultValue,g.children),gn(s)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||g.suppressHydrationWarning===!0||n2(s.textContent,u)?(g.popover!=null&&($t("beforetoggle",s),$t("toggle",s)),g.onScroll!=null&&$t("scroll",s),g.onScrollEnd!=null&&$t("scrollend",s),g.onClick!=null&&(s.onclick=Sh),s=!0):s=!1,s||ko(n)}function Qg(n){for(gi=n.return;gi;)switch(gi.tag){case 3:case 27:zs=!0;return;case 5:case 13:zs=!1;return;default:gi=gi.return}}function bc(n){if(n!==gi)return!1;if(!ln)return Qg(n),ln=!0,!1;var s=!1,u;if((u=n.tag!==3&&n.tag!==27)&&((u=n.tag===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||T0(n.type,n.memoizedProps)),u=!u),u&&(s=!0),s&&Yr&&ko(n),Qg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(u=n.data,u==="/$"){if(s===0){Yr=Ts(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++;n=n.nextSibling}Yr=null}}else Yr=gi?Ts(n.stateNode.nextSibling):null;return!0}function Ac(){Yr=gi=null,ln=!1}function Cc(n){As===null?As=[n]:As.push(n)}var Tc=Error(a(460)),Wg=Error(a(474)),od={then:function(){}};function Kg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ku(){}function Zg(n,s,u){switch(u=n[u],u===void 0?n.push(s):u!==s&&(s.then(Ku,Ku),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Tc?Error(a(483)):n;default:if(typeof s.status=="string")s.then(Ku,Ku);else{if(n=Dn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=s,n.status="pending",n.then(function(g){if(s.status==="pending"){var E=s;E.status="fulfilled",E.value=g}},function(g){if(s.status==="pending"){var E=s;E.status="rejected",E.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Tc?Error(a(483)):n}throw Sc=s,Tc}}var Sc=null;function $g(){if(Sc===null)throw Error(a(459));var n=Sc;return Sc=null,n}var bl=null,Ic=0;function Zu(n){var s=Ic;return Ic+=1,bl===null&&(bl=[]),Zg(bl,n,s)}function Nc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function $u(n,s){throw s.$$typeof===f?Error(a(525)):(n=Object.prototype.toString.call(s),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Jg(n){var s=n._init;return s(n._payload)}function em(n){function s(le,se){if(n){var ge=le.deletions;ge===null?(le.deletions=[se],le.flags|=16):ge.push(se)}}function u(le,se){if(!n)return null;for(;se!==null;)s(le,se),se=se.sibling;return null}function g(le){for(var se=new Map;le!==null;)le.key!==null?se.set(le.key,le):se.set(le.index,le),le=le.sibling;return se}function E(le,se){return le=Ja(le,se),le.index=0,le.sibling=null,le}function A(le,se,ge){return le.index=ge,n?(ge=le.alternate,ge!==null?(ge=ge.index,ge<se?(le.flags|=33554434,se):ge):(le.flags|=33554434,se)):(le.flags|=1048576,se)}function M(le){return n&&le.alternate===null&&(le.flags|=33554434),le}function j(le,se,ge,Ce){return se===null||se.tag!==6?(se=t0(ge,le.mode,Ce),se.return=le,se):(se=E(se,ge),se.return=le,se)}function Q(le,se,ge,Ce){var rt=ge.type;return rt===_?be(le,se,ge.props.children,Ce,ge.key):se!==null&&(se.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===fe&&Jg(rt)===se.type)?(se=E(se,ge.props),Nc(se,ge),se.return=le,se):(se=ph(ge.type,ge.key,ge.props,null,le.mode,Ce),Nc(se,ge),se.return=le,se)}function ae(le,se,ge,Ce){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=n0(ge,le.mode,Ce),se.return=le,se):(se=E(se,ge.children||[]),se.return=le,se)}function be(le,se,ge,Ce,rt){return se===null||se.tag!==7?(se=qo(ge,le.mode,Ce,rt),se.return=le,se):(se=E(se,ge),se.return=le,se)}function Me(le,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=t0(""+se,le.mode,ge),se.return=le,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case y:return ge=ph(se.type,se.key,se.props,null,le.mode,ge),Nc(ge,se),ge.return=le,ge;case b:return se=n0(se,le.mode,ge),se.return=le,se;case fe:var Ce=se._init;return se=Ce(se._payload),Me(le,se,ge)}if(He(se)||ke(se))return se=qo(se,le.mode,ge,null),se.return=le,se;if(typeof se.then=="function")return Me(le,Zu(se),ge);if(se.$$typeof===F)return Me(le,dh(le,se),ge);$u(le,se)}return null}function pe(le,se,ge,Ce){var rt=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return rt!==null?null:j(le,se,""+ge,Ce);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:return ge.key===rt?Q(le,se,ge,Ce):null;case b:return ge.key===rt?ae(le,se,ge,Ce):null;case fe:return rt=ge._init,ge=rt(ge._payload),pe(le,se,ge,Ce)}if(He(ge)||ke(ge))return rt!==null?null:be(le,se,ge,Ce,null);if(typeof ge.then=="function")return pe(le,se,Zu(ge),Ce);if(ge.$$typeof===F)return pe(le,se,dh(le,ge),Ce);$u(le,ge)}return null}function ve(le,se,ge,Ce,rt){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return le=le.get(ge)||null,j(se,le,""+Ce,rt);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return le=le.get(Ce.key===null?ge:Ce.key)||null,Q(se,le,Ce,rt);case b:return le=le.get(Ce.key===null?ge:Ce.key)||null,ae(se,le,Ce,rt);case fe:var Vt=Ce._init;return Ce=Vt(Ce._payload),ve(le,se,ge,Ce,rt)}if(He(Ce)||ke(Ce))return le=le.get(ge)||null,be(se,le,Ce,rt,null);if(typeof Ce.then=="function")return ve(le,se,ge,Zu(Ce),rt);if(Ce.$$typeof===F)return ve(le,se,ge,dh(se,Ce),rt);$u(se,Ce)}return null}function ot(le,se,ge,Ce){for(var rt=null,Vt=null,ht=se,Et=se=0,Or=null;ht!==null&&Et<ge.length;Et++){ht.index>Et?(Or=ht,ht=null):Or=ht.sibling;var cn=pe(le,ht,ge[Et],Ce);if(cn===null){ht===null&&(ht=Or);break}n&&ht&&cn.alternate===null&&s(le,ht),se=A(cn,se,Et),Vt===null?rt=cn:Vt.sibling=cn,Vt=cn,ht=Or}if(Et===ge.length)return u(le,ht),ln&&Lo(le,Et),rt;if(ht===null){for(;Et<ge.length;Et++)ht=Me(le,ge[Et],Ce),ht!==null&&(se=A(ht,se,Et),Vt===null?rt=ht:Vt.sibling=ht,Vt=ht);return ln&&Lo(le,Et),rt}for(ht=g(ht);Et<ge.length;Et++)Or=ve(ht,le,Et,ge[Et],Ce),Or!==null&&(n&&Or.alternate!==null&&ht.delete(Or.key===null?Et:Or.key),se=A(Or,se,Et),Vt===null?rt=Or:Vt.sibling=Or,Vt=Or);return n&&ht.forEach(function(ao){return s(le,ao)}),ln&&Lo(le,Et),rt}function Dt(le,se,ge,Ce){if(ge==null)throw Error(a(151));for(var rt=null,Vt=null,ht=se,Et=se=0,Or=null,cn=ge.next();ht!==null&&!cn.done;Et++,cn=ge.next()){ht.index>Et?(Or=ht,ht=null):Or=ht.sibling;var ao=pe(le,ht,cn.value,Ce);if(ao===null){ht===null&&(ht=Or);break}n&&ht&&ao.alternate===null&&s(le,ht),se=A(ao,se,Et),Vt===null?rt=ao:Vt.sibling=ao,Vt=ao,ht=Or}if(cn.done)return u(le,ht),ln&&Lo(le,Et),rt;if(ht===null){for(;!cn.done;Et++,cn=ge.next())cn=Me(le,cn.value,Ce),cn!==null&&(se=A(cn,se,Et),Vt===null?rt=cn:Vt.sibling=cn,Vt=cn);return ln&&Lo(le,Et),rt}for(ht=g(ht);!cn.done;Et++,cn=ge.next())cn=ve(ht,le,Et,cn.value,Ce),cn!==null&&(n&&cn.alternate!==null&&ht.delete(cn.key===null?Et:cn.key),se=A(cn,se,Et),Vt===null?rt=cn:Vt.sibling=cn,Vt=cn);return n&&ht.forEach(function(Wv){return s(le,Wv)}),ln&&Lo(le,Et),rt}function nr(le,se,ge,Ce){if(typeof ge=="object"&&ge!==null&&ge.type===_&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:e:{for(var rt=ge.key;se!==null;){if(se.key===rt){if(rt=ge.type,rt===_){if(se.tag===7){u(le,se.sibling),Ce=E(se,ge.props.children),Ce.return=le,le=Ce;break e}}else if(se.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===fe&&Jg(rt)===se.type){u(le,se.sibling),Ce=E(se,ge.props),Nc(Ce,ge),Ce.return=le,le=Ce;break e}u(le,se);break}else s(le,se);se=se.sibling}ge.type===_?(Ce=qo(ge.props.children,le.mode,Ce,ge.key),Ce.return=le,le=Ce):(Ce=ph(ge.type,ge.key,ge.props,null,le.mode,Ce),Nc(Ce,ge),Ce.return=le,le=Ce)}return M(le);case b:e:{for(rt=ge.key;se!==null;){if(se.key===rt)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){u(le,se.sibling),Ce=E(se,ge.children||[]),Ce.return=le,le=Ce;break e}else{u(le,se);break}else s(le,se);se=se.sibling}Ce=n0(ge,le.mode,Ce),Ce.return=le,le=Ce}return M(le);case fe:return rt=ge._init,ge=rt(ge._payload),nr(le,se,ge,Ce)}if(He(ge))return ot(le,se,ge,Ce);if(ke(ge)){if(rt=ke(ge),typeof rt!="function")throw Error(a(150));return ge=rt.call(ge),Dt(le,se,ge,Ce)}if(typeof ge.then=="function")return nr(le,se,Zu(ge),Ce);if(ge.$$typeof===F)return nr(le,se,dh(le,ge),Ce);$u(le,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(u(le,se.sibling),Ce=E(se,ge),Ce.return=le,le=Ce):(u(le,se),Ce=t0(ge,le.mode,Ce),Ce.return=le,le=Ce),M(le)):u(le,se)}return function(le,se,ge,Ce){try{Ic=0;var rt=nr(le,se,ge,Ce);return bl=null,rt}catch(ht){if(ht===Tc)throw ht;var Vt=ms(29,ht,null,le.mode);return Vt.lanes=Ce,Vt.return=le,Vt}finally{}}}var Po=em(!0),tm=em(!1),Al=Fe(null),Ju=Fe(0);function nm(n,s){n=wa,tt(Ju,n),tt(Al,s),wa=n|s.baseLanes}function ld(){tt(Ju,wa),tt(Al,Al.current)}function cd(){wa=Ju.current,nt(Al),nt(Ju)}var fs=Fe(null),Hs=null;function za(n){var s=n.alternate;tt(br,br.current&1),tt(fs,n),Hs===null&&(s===null||Al.current!==null||s.memoizedState!==null)&&(Hs=n)}function rm(n){if(n.tag===22){if(tt(br,br.current),tt(fs,n),Hs===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Hs=n)}}else Ha()}function Ha(){tt(br,br.current),tt(fs,fs.current)}function ca(n){nt(fs),Hs===n&&(Hs=null),nt(br)}var br=Fe(0);function eh(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var P_=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(u,g){n.push(g)}};this.abort=function(){s.aborted=!0,n.forEach(function(u){return u()})}},B_=i.unstable_scheduleCallback,j_=i.unstable_NormalPriority,Ar={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ud(){return{controller:new P_,data:new Map,refCount:0}}function Rc(n){n.refCount--,n.refCount===0&&B_(j_,function(){n.controller.abort()})}var Dc=null,hd=0,Cl=0,Tl=null;function U_(n,s){if(Dc===null){var u=Dc=[];hd=0,Cl=x0(),Tl={status:"pending",value:void 0,then:function(g){u.push(g)}}}return hd++,s.then(im,im),s}function im(){if(--hd===0&&Dc!==null){Tl!==null&&(Tl.status="fulfilled");var n=Dc;Dc=null,Cl=0,Tl=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function V_(n,s){var u=[],g={status:"pending",value:null,reason:null,then:function(E){u.push(E)}};return n.then(function(){g.status="fulfilled",g.value=s;for(var E=0;E<u.length;E++)(0,u[E])(s)},function(E){for(g.status="rejected",g.reason=E,E=0;E<u.length;E++)(0,u[E])(void 0)}),g}var sm=k.S;k.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&U_(n,s),sm!==null&&sm(n,s)};var Bo=Fe(null);function fd(){var n=Bo.current;return n!==null?n:Dn.pooledCache}function th(n,s){s===null?tt(Bo,Bo.current):tt(Bo,s.pool)}function am(){var n=fd();return n===null?null:{parent:Ar._currentValue,pool:n}}var Ga=0,Ut=null,vn=null,mr=null,nh=!1,Sl=!1,jo=!1,rh=0,Mc=0,Il=null,F_=0;function ur(){throw Error(a(321))}function dd(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!h(n[u],s[u]))return!1;return!0}function gd(n,s,u,g,E,A){return Ga=A,Ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,k.H=n===null||n.memoizedState===null?Uo:qa,jo=!1,A=u(g,E),jo=!1,Sl&&(A=lm(s,u,g,E)),om(n),A}function om(n){k.H=Gs;var s=vn!==null&&vn.next!==null;if(Ga=0,mr=vn=Ut=null,nh=!1,Mc=0,Il=null,s)throw Error(a(300));n===null||Dr||(n=n.dependencies,n!==null&&fh(n)&&(Dr=!0))}function lm(n,s,u,g){Ut=n;var E=0;do{if(Sl&&(Il=null),Mc=0,Sl=!1,25<=E)throw Error(a(301));if(E+=1,mr=vn=null,n.updateQueue!=null){var A=n.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}k.H=Vo,A=s(u,g)}while(Sl);return A}function z_(){var n=k.H,s=n.useState()[0];return s=typeof s.then=="function"?Oc(s):s,n=n.useState()[0],(vn!==null?vn.memoizedState:null)!==n&&(Ut.flags|=1024),s}function md(){var n=rh!==0;return rh=0,n}function pd(n,s,u){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~u}function xd(n){if(nh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}nh=!1}Ga=0,mr=vn=Ut=null,Sl=!1,Mc=rh=0,Il=null}function Mi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Ut.memoizedState=mr=n:mr=mr.next=n,mr}function pr(){if(vn===null){var n=Ut.alternate;n=n!==null?n.memoizedState:null}else n=vn.next;var s=mr===null?Ut.memoizedState:mr.next;if(s!==null)mr=s,vn=n;else{if(n===null)throw Ut.alternate===null?Error(a(467)):Error(a(310));vn=n,n={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},mr===null?Ut.memoizedState=mr=n:mr=mr.next=n}return mr}var ih;ih=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Oc(n){var s=Mc;return Mc+=1,Il===null&&(Il=[]),n=Zg(Il,n,s),s=Ut,(mr===null?s.memoizedState:mr.next)===null&&(s=s.alternate,k.H=s===null||s.memoizedState===null?Uo:qa),n}function sh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Oc(n);if(n.$$typeof===F)return si(n)}throw Error(a(438,String(n)))}function yd(n){var s=null,u=Ut.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var g=Ut.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(E){return E.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=ih(),Ut.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(n),g=0;g<n;g++)u[g]=_e;return s.index++,u}function ua(n,s){return typeof s=="function"?s(n):s}function ah(n){var s=pr();return wd(s,vn,n)}function wd(n,s,u){var g=n.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=u;var E=n.baseQueue,A=g.pending;if(A!==null){if(E!==null){var M=E.next;E.next=A.next,A.next=M}s.baseQueue=E=A,g.pending=null}if(A=n.baseState,E===null)n.memoizedState=A;else{s=E.next;var j=M=null,Q=null,ae=s,be=!1;do{var Me=ae.lane&-536870913;if(Me!==ae.lane?(nn&Me)===Me:(Ga&Me)===Me){var pe=ae.revertLane;if(pe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),Me===Cl&&(be=!0);else if((Ga&pe)===pe){ae=ae.next,pe===Cl&&(be=!0);continue}else Me={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Q===null?(j=Q=Me,M=A):Q=Q.next=Me,Ut.lanes|=pe,eo|=pe;Me=ae.action,jo&&u(A,Me),A=ae.hasEagerState?ae.eagerState:u(A,Me)}else pe={lane:Me,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Q===null?(j=Q=pe,M=A):Q=Q.next=pe,Ut.lanes|=Me,eo|=Me;ae=ae.next}while(ae!==null&&ae!==s);if(Q===null?M=A:Q.next=j,!h(A,n.memoizedState)&&(Dr=!0,be&&(u=Tl,u!==null)))throw u;n.memoizedState=A,n.baseState=M,n.baseQueue=Q,g.lastRenderedState=A}return E===null&&(g.lanes=0),[n.memoizedState,g.dispatch]}function Ed(n){var s=pr(),u=s.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=n;var g=u.dispatch,E=u.pending,A=s.memoizedState;if(E!==null){u.pending=null;var M=E=E.next;do A=n(A,M.action),M=M.next;while(M!==E);h(A,s.memoizedState)||(Dr=!0),s.memoizedState=A,s.baseQueue===null&&(s.baseState=A),u.lastRenderedState=A}return[A,g]}function cm(n,s,u){var g=Ut,E=pr(),A=ln;if(A){if(u===void 0)throw Error(a(407));u=u()}else u=s();var M=!h((vn||E).memoizedState,u);if(M&&(E.memoizedState=u,Dr=!0),E=E.queue,bd(fm.bind(null,g,E,n),[n]),E.getSnapshot!==s||M||mr!==null&&mr.memoizedState.tag&1){if(g.flags|=2048,Nl(9,hm.bind(null,g,E,u,s),{destroy:void 0},null),Dn===null)throw Error(a(349));A||Ga&60||um(g,s,u)}return u}function um(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=Ut.updateQueue,s===null?(s=ih(),Ut.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function hm(n,s,u,g){s.value=u,s.getSnapshot=g,dm(s)&&gm(n)}function fm(n,s,u){return u(function(){dm(s)&&gm(n)})}function dm(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!h(n,u)}catch{return!0}}function gm(n){var s=Fa(n,2);s!==null&&mi(s,n,2)}function _d(n){var s=Mi();if(typeof n=="function"){var u=n;if(n=u(),jo){Ot(!0);try{u()}finally{Ot(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:n},s}function mm(n,s,u,g){return n.baseState=u,wd(n,vn,typeof g=="function"?g:ua)}function H_(n,s,u,g,E){if(ch(n))throw Error(a(485));if(n=s.action,n!==null){var A={payload:E,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){A.listeners.push(M)}};k.T!==null?u(!0):A.isTransition=!1,g(A),u=s.pending,u===null?(A.next=s.pending=A,pm(s,A)):(A.next=u.next,s.pending=u.next=A)}}function pm(n,s){var u=s.action,g=s.payload,E=n.state;if(s.isTransition){var A=k.T,M={};k.T=M;try{var j=u(E,g),Q=k.S;Q!==null&&Q(M,j),xm(n,s,j)}catch(ae){vd(n,s,ae)}finally{k.T=A}}else try{A=u(E,g),xm(n,s,A)}catch(ae){vd(n,s,ae)}}function xm(n,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){ym(n,s,g)},function(g){return vd(n,s,g)}):ym(n,s,u)}function ym(n,s,u){s.status="fulfilled",s.value=u,wm(s),n.state=u,s=n.pending,s!==null&&(u=s.next,u===s?n.pending=null:(u=u.next,s.next=u,pm(n,u)))}function vd(n,s,u){var g=n.pending;if(n.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=u,wm(s),s=s.next;while(s!==g)}n.action=null}function wm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Em(n,s){return s}function _m(n,s){if(ln){var u=Dn.formState;if(u!==null){e:{var g=Ut;if(ln){if(Yr){t:{for(var E=Yr,A=zs;E.nodeType!==8;){if(!A){E=null;break t}if(E=Ts(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){Yr=Ts(E.nextSibling),g=E.data==="F!";break e}}ko(g)}g=!1}g&&(s=u[0])}}return u=Mi(),u.memoizedState=u.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Em,lastRenderedState:s},u.queue=g,u=Um.bind(null,Ut,g),g.dispatch=u,g=_d(!1),A=Id.bind(null,Ut,!1,g.queue),g=Mi(),E={state:s,dispatch:null,action:n,pending:null},g.queue=E,u=H_.bind(null,Ut,E,A,u),E.dispatch=u,g.memoizedState=n,[s,u,!1]}function vm(n){var s=pr();return bm(s,vn,n)}function bm(n,s,u){s=wd(n,s,Em)[0],n=ah(ua)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Oc(s):s;var g=pr(),E=g.queue,A=E.dispatch;return u!==g.memoizedState&&(Ut.flags|=2048,Nl(9,G_.bind(null,E,u),{destroy:void 0},null)),[s,A,n]}function G_(n,s){n.action=s}function Am(n){var s=pr(),u=vn;if(u!==null)return bm(s,u,n);pr(),s=s.memoizedState,u=pr();var g=u.queue.dispatch;return u.memoizedState=n,[s,g,!1]}function Nl(n,s,u,g){return n={tag:n,create:s,inst:u,deps:g,next:null},s=Ut.updateQueue,s===null&&(s=ih(),Ut.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=n.next=n:(g=u.next,u.next=n,n.next=g,s.lastEffect=n),n}function Cm(){return pr().memoizedState}function oh(n,s,u,g){var E=Mi();Ut.flags|=n,E.memoizedState=Nl(1|s,u,{destroy:void 0},g===void 0?null:g)}function lh(n,s,u,g){var E=pr();g=g===void 0?null:g;var A=E.memoizedState.inst;vn!==null&&g!==null&&dd(g,vn.memoizedState.deps)?E.memoizedState=Nl(s,u,A,g):(Ut.flags|=n,E.memoizedState=Nl(1|s,u,A,g))}function Tm(n,s){oh(8390656,8,n,s)}function bd(n,s){lh(2048,8,n,s)}function Sm(n,s){return lh(4,2,n,s)}function Im(n,s){return lh(4,4,n,s)}function Nm(n,s){if(typeof s=="function"){n=n();var u=s(n);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Rm(n,s,u){u=u!=null?u.concat([n]):null,lh(4,4,Nm.bind(null,s,n),u)}function Ad(){}function Dm(n,s){var u=pr();s=s===void 0?null:s;var g=u.memoizedState;return s!==null&&dd(s,g[1])?g[0]:(u.memoizedState=[n,s],n)}function Mm(n,s){var u=pr();s=s===void 0?null:s;var g=u.memoizedState;if(s!==null&&dd(s,g[1]))return g[0];if(g=n(),jo){Ot(!0);try{n()}finally{Ot(!1)}}return u.memoizedState=[g,s],g}function Cd(n,s,u){return u===void 0||Ga&1073741824?n.memoizedState=s:(n.memoizedState=u,n=Lp(),Ut.lanes|=n,eo|=n,u)}function Om(n,s,u,g){return h(u,s)?u:Al.current!==null?(n=Cd(n,u,g),h(n,s)||(Dr=!0),n):Ga&42?(n=Lp(),Ut.lanes|=n,eo|=n,s):(Dr=!0,n.memoizedState=u)}function Lm(n,s,u,g,E){var A=ze.p;ze.p=A!==0&&8>A?A:8;var M=k.T,j={};k.T=j,Id(n,!1,s,u);try{var Q=E(),ae=k.S;if(ae!==null&&ae(j,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var be=V_(Q,g);Lc(n,s,be,Qi(n))}else Lc(n,s,g,Qi(n))}catch(Me){Lc(n,s,{then:function(){},status:"rejected",reason:Me},Qi())}finally{ze.p=A,k.T=M}}function q_(){}function Td(n,s,u,g){if(n.tag!==5)throw Error(a(476));var E=km(n).queue;Lm(n,E,s,yt,u===null?q_:function(){return Pm(n),u(g)})}function km(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:yt},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:u},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Pm(n){var s=km(n).next.queue;Lc(n,s,{},Qi())}function Sd(){return si(eu)}function Bm(){return pr().memoizedState}function jm(){return pr().memoizedState}function Y_(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var u=Qi();n=Qa(u);var g=Wa(s,n,u);g!==null&&(mi(g,s,u),Bc(g,s,u)),s={cache:ud()},n.payload=s;return}s=s.return}}function X_(n,s,u){var g=Qi();u={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},ch(n)?Vm(s,u):(u=rd(n,s,u,g),u!==null&&(mi(u,n,g),Fm(u,s,g)))}function Um(n,s,u){var g=Qi();Lc(n,s,u,g)}function Lc(n,s,u,g){var E={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(ch(n))Vm(s,E);else{var A=n.alternate;if(n.lanes===0&&(A===null||A.lanes===0)&&(A=s.lastRenderedReducer,A!==null))try{var M=s.lastRenderedState,j=A(M,u);if(E.hasEagerState=!0,E.eagerState=j,h(j,M))return Yu(n,s,E,0),Dn===null&&qu(),!1}catch{}finally{}if(u=rd(n,s,E,g),u!==null)return mi(u,n,g),Fm(u,s,g),!0}return!1}function Id(n,s,u,g){if(g={lane:2,revertLane:x0(),action:g,hasEagerState:!1,eagerState:null,next:null},ch(n)){if(s)throw Error(a(479))}else s=rd(n,u,g,2),s!==null&&mi(s,n,2)}function ch(n){var s=n.alternate;return n===Ut||s!==null&&s===Ut}function Vm(n,s){Sl=nh=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function Fm(n,s,u){if(u&4194176){var g=s.lanes;g&=n.pendingLanes,u|=g,s.lanes=u,wi(n,u)}}var Gs={readContext:si,use:sh,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useLayoutEffect:ur,useInsertionEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useSyncExternalStore:ur,useId:ur};Gs.useCacheRefresh=ur,Gs.useMemoCache=ur,Gs.useHostTransitionStatus=ur,Gs.useFormState=ur,Gs.useActionState=ur,Gs.useOptimistic=ur;var Uo={readContext:si,use:sh,useCallback:function(n,s){return Mi().memoizedState=[n,s===void 0?null:s],n},useContext:si,useEffect:Tm,useImperativeHandle:function(n,s,u){u=u!=null?u.concat([n]):null,oh(4194308,4,Nm.bind(null,s,n),u)},useLayoutEffect:function(n,s){return oh(4194308,4,n,s)},useInsertionEffect:function(n,s){oh(4,2,n,s)},useMemo:function(n,s){var u=Mi();s=s===void 0?null:s;var g=n();if(jo){Ot(!0);try{n()}finally{Ot(!1)}}return u.memoizedState=[g,s],g},useReducer:function(n,s,u){var g=Mi();if(u!==void 0){var E=u(s);if(jo){Ot(!0);try{u(s)}finally{Ot(!1)}}}else E=s;return g.memoizedState=g.baseState=E,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:E},g.queue=n,n=n.dispatch=X_.bind(null,Ut,n),[g.memoizedState,n]},useRef:function(n){var s=Mi();return n={current:n},s.memoizedState=n},useState:function(n){n=_d(n);var s=n.queue,u=Um.bind(null,Ut,s);return s.dispatch=u,[n.memoizedState,u]},useDebugValue:Ad,useDeferredValue:function(n,s){var u=Mi();return Cd(u,n,s)},useTransition:function(){var n=_d(!1);return n=Lm.bind(null,Ut,n.queue,!0,!1),Mi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,u){var g=Ut,E=Mi();if(ln){if(u===void 0)throw Error(a(407));u=u()}else{if(u=s(),Dn===null)throw Error(a(349));nn&60||um(g,s,u)}E.memoizedState=u;var A={value:u,getSnapshot:s};return E.queue=A,Tm(fm.bind(null,g,A,n),[n]),g.flags|=2048,Nl(9,hm.bind(null,g,A,u,s),{destroy:void 0},null),u},useId:function(){var n=Mi(),s=Dn.identifierPrefix;if(ln){var u=la,g=oa;u=(g&~(1<<32-Pt(g)-1)).toString(32)+u,s=":"+s+"R"+u,u=rh++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=F_++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},useCacheRefresh:function(){return Mi().memoizedState=Y_.bind(null,Ut)}};Uo.useMemoCache=yd,Uo.useHostTransitionStatus=Sd,Uo.useFormState=_m,Uo.useActionState=_m,Uo.useOptimistic=function(n){var s=Mi();s.memoizedState=s.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Id.bind(null,Ut,!0,u),u.dispatch=s,[n,s]};var qa={readContext:si,use:sh,useCallback:Dm,useContext:si,useEffect:bd,useImperativeHandle:Rm,useInsertionEffect:Sm,useLayoutEffect:Im,useMemo:Mm,useReducer:ah,useRef:Cm,useState:function(){return ah(ua)},useDebugValue:Ad,useDeferredValue:function(n,s){var u=pr();return Om(u,vn.memoizedState,n,s)},useTransition:function(){var n=ah(ua)[0],s=pr().memoizedState;return[typeof n=="boolean"?n:Oc(n),s]},useSyncExternalStore:cm,useId:Bm};qa.useCacheRefresh=jm,qa.useMemoCache=yd,qa.useHostTransitionStatus=Sd,qa.useFormState=vm,qa.useActionState=vm,qa.useOptimistic=function(n,s){var u=pr();return mm(u,vn,n,s)};var Vo={readContext:si,use:sh,useCallback:Dm,useContext:si,useEffect:bd,useImperativeHandle:Rm,useInsertionEffect:Sm,useLayoutEffect:Im,useMemo:Mm,useReducer:Ed,useRef:Cm,useState:function(){return Ed(ua)},useDebugValue:Ad,useDeferredValue:function(n,s){var u=pr();return vn===null?Cd(u,n,s):Om(u,vn.memoizedState,n,s)},useTransition:function(){var n=Ed(ua)[0],s=pr().memoizedState;return[typeof n=="boolean"?n:Oc(n),s]},useSyncExternalStore:cm,useId:Bm};Vo.useCacheRefresh=jm,Vo.useMemoCache=yd,Vo.useHostTransitionStatus=Sd,Vo.useFormState=Am,Vo.useActionState=Am,Vo.useOptimistic=function(n,s){var u=pr();return vn!==null?mm(u,vn,n,s):(u.baseState=n,[n,u.queue.dispatch])};function Nd(n,s,u,g){s=n.memoizedState,u=u(g,s),u=u==null?s:G({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Rd={isMounted:function(n){return(n=n._reactInternals)?Qe(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var g=Qi(),E=Qa(g);E.payload=s,u!=null&&(E.callback=u),s=Wa(n,E,g),s!==null&&(mi(s,n,g),Bc(s,n,g))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var g=Qi(),E=Qa(g);E.tag=1,E.payload=s,u!=null&&(E.callback=u),s=Wa(n,E,g),s!==null&&(mi(s,n,g),Bc(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=Qi(),g=Qa(u);g.tag=2,s!=null&&(g.callback=s),s=Wa(n,g,u),s!==null&&(mi(s,n,u),Bc(s,n,u))}};function zm(n,s,u,g,E,A,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,A,M):s.prototype&&s.prototype.isPureReactComponent?!d(u,g)||!d(E,A):!0}function Hm(n,s,u,g){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,g),s.state!==n&&Rd.enqueueReplaceState(s,s.state,null)}function Fo(n,s){var u=s;if("ref"in s){u={};for(var g in s)g!=="ref"&&(u[g]=s[g])}if(n=n.defaultProps){u===s&&(u=G({},u));for(var E in n)u[E]===void 0&&(u[E]=n[E])}return u}var uh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Gm(n){uh(n)}function qm(n){console.error(n)}function Ym(n){uh(n)}function hh(n,s){try{var u=n.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function Xm(n,s,u){try{var g=n.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Dd(n,s,u){return u=Qa(u),u.tag=3,u.payload={element:null},u.callback=function(){hh(n,s)},u}function Qm(n){return n=Qa(n),n.tag=3,n}function Wm(n,s,u,g){var E=u.type.getDerivedStateFromError;if(typeof E=="function"){var A=g.value;n.payload=function(){return E(A)},n.callback=function(){Xm(s,u,g)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(n.callback=function(){Xm(s,u,g),typeof E!="function"&&(to===null?to=new Set([this]):to.add(this));var j=g.stack;this.componentDidCatch(g.value,{componentStack:j!==null?j:""})})}function Q_(n,s,u,g,E){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=u.alternate,s!==null&&Pc(s,u,E,!0),u=fs.current,u!==null){switch(u.tag){case 13:return Hs===null?f0():u.alternate===null&&tr===0&&(tr=3),u.flags&=-257,u.flags|=65536,u.lanes=E,g===od?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([g]):s.add(g),g0(n,g,E)),!1;case 22:return u.flags|=65536,g===od?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([g]):u.add(g)),g0(n,g,E)),!1}throw Error(a(435,u.tag))}return g0(n,g,E),f0(),!1}if(ln)return s=fs.current,s!==null?(!(s.flags&65536)&&(s.flags|=256),s.flags|=65536,s.lanes=E,g!==ad&&(n=Error(a(422),{cause:g}),Cc(cs(n,u)))):(g!==ad&&(s=Error(a(423),{cause:g}),Cc(cs(s,u))),n=n.current.alternate,n.flags|=65536,E&=-E,n.lanes|=E,g=cs(g,u),E=Dd(n.stateNode,g,E),Yd(n,E),tr!==4&&(tr=2)),!1;var A=Error(a(520),{cause:g});if(A=cs(A,u),qc===null?qc=[A]:qc.push(A),tr!==4&&(tr=2),s===null)return!0;g=cs(g,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,n=E&-E,u.lanes|=n,n=Dd(u.stateNode,g,n),Yd(u,n),!1;case 1:if(s=u.type,A=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(to===null||!to.has(A))))return u.flags|=65536,E&=-E,u.lanes|=E,E=Qm(E),Wm(E,n,u,g),Yd(u,E),!1}u=u.return}while(u!==null);return!1}var Km=Error(a(461)),Dr=!1;function Xr(n,s,u,g){s.child=n===null?tm(s,null,u,g):Po(s,n.child,u,g)}function Zm(n,s,u,g,E){u=u.render;var A=s.ref;if("ref"in g){var M={};for(var j in g)j!=="ref"&&(M[j]=g[j])}else M=g;return Ho(s),g=gd(n,s,u,M,A,E),j=md(),n!==null&&!Dr?(pd(n,s,E),ha(n,s,E)):(ln&&j&&id(s),s.flags|=1,Xr(n,s,g,E),s.child)}function $m(n,s,u,g,E){if(n===null){var A=u.type;return typeof A=="function"&&!e0(A)&&A.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=A,Jm(n,s,A,g,E)):(n=ph(u.type,null,g,s,s.mode,E),n.ref=s.ref,n.return=s,s.child=n)}if(A=n.child,!Vd(n,E)){var M=A.memoizedProps;if(u=u.compare,u=u!==null?u:d,u(M,g)&&n.ref===s.ref)return ha(n,s,E)}return s.flags|=1,n=Ja(A,g),n.ref=s.ref,n.return=s,s.child=n}function Jm(n,s,u,g,E){if(n!==null){var A=n.memoizedProps;if(d(A,g)&&n.ref===s.ref)if(Dr=!1,s.pendingProps=g=A,Vd(n,E))n.flags&131072&&(Dr=!0);else return s.lanes=n.lanes,ha(n,s,E)}return Md(n,s,u,g,E)}function ep(n,s,u){var g=s.pendingProps,E=g.children,A=(s.stateNode._pendingVisibility&2)!==0,M=n!==null?n.memoizedState:null;if(kc(n,s),g.mode==="hidden"||A){if(s.flags&128){if(g=M!==null?M.baseLanes|u:u,n!==null){for(E=s.child=n.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;s.childLanes=A&~g}else s.childLanes=0,s.child=null;return tp(n,s,g,u)}if(u&536870912)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&th(s,M!==null?M.cachePool:null),M!==null?nm(s,M):ld(),rm(s);else return s.lanes=s.childLanes=536870912,tp(n,s,M!==null?M.baseLanes|u:u,u)}else M!==null?(th(s,M.cachePool),nm(s,M),Ha(),s.memoizedState=null):(n!==null&&th(s,null),ld(),Ha());return Xr(n,s,E,u),s.child}function tp(n,s,u,g){var E=fd();return E=E===null?null:{parent:Ar._currentValue,pool:E},s.memoizedState={baseLanes:u,cachePool:E},n!==null&&th(s,null),ld(),rm(s),n!==null&&Pc(n,s,g,!0),null}function kc(n,s){var u=s.ref;if(u===null)n!==null&&n.ref!==null&&(s.flags|=2097664);else{if(typeof u!="function"&&typeof u!="object")throw Error(a(284));(n===null||n.ref!==u)&&(s.flags|=2097664)}}function Md(n,s,u,g,E){return Ho(s),u=gd(n,s,u,g,void 0,E),g=md(),n!==null&&!Dr?(pd(n,s,E),ha(n,s,E)):(ln&&g&&id(s),s.flags|=1,Xr(n,s,u,E),s.child)}function np(n,s,u,g,E,A){return Ho(s),s.updateQueue=null,u=lm(s,g,u,E),om(n),g=md(),n!==null&&!Dr?(pd(n,s,A),ha(n,s,A)):(ln&&g&&id(s),s.flags|=1,Xr(n,s,u,A),s.child)}function rp(n,s,u,g,E){if(Ho(s),s.stateNode===null){var A=El,M=u.contextType;typeof M=="object"&&M!==null&&(A=si(M)),A=new u(g,A),s.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Rd,s.stateNode=A,A._reactInternals=s,A=s.stateNode,A.props=g,A.state=s.memoizedState,A.refs={},Gd(s),M=u.contextType,A.context=typeof M=="object"&&M!==null?si(M):El,A.state=s.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(Nd(s,u,M,g),A.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(M=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),M!==A.state&&Rd.enqueueReplaceState(A,A.state,null),Uc(s,g,A,E),jc(),A.state=s.memoizedState),typeof A.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(n===null){A=s.stateNode;var j=s.memoizedProps,Q=Fo(u,j);A.props=Q;var ae=A.context,be=u.contextType;M=El,typeof be=="object"&&be!==null&&(M=si(be));var Me=u.getDerivedStateFromProps;be=typeof Me=="function"||typeof A.getSnapshotBeforeUpdate=="function",j=s.pendingProps!==j,be||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(j||ae!==M)&&Hm(s,A,g,M),Xa=!1;var pe=s.memoizedState;A.state=pe,Uc(s,g,A,E),jc(),ae=s.memoizedState,j||pe!==ae||Xa?(typeof Me=="function"&&(Nd(s,u,Me,g),ae=s.memoizedState),(Q=Xa||zm(s,u,Q,g,pe,ae,M))?(be||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(s.flags|=4194308)):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=ae),A.props=g,A.state=ae,A.context=M,g=Q):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{A=s.stateNode,qd(n,s),M=s.memoizedProps,be=Fo(u,M),A.props=be,Me=s.pendingProps,pe=A.context,ae=u.contextType,Q=El,typeof ae=="object"&&ae!==null&&(Q=si(ae)),j=u.getDerivedStateFromProps,(ae=typeof j=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(M!==Me||pe!==Q)&&Hm(s,A,g,Q),Xa=!1,pe=s.memoizedState,A.state=pe,Uc(s,g,A,E),jc();var ve=s.memoizedState;M!==Me||pe!==ve||Xa||n!==null&&n.dependencies!==null&&fh(n.dependencies)?(typeof j=="function"&&(Nd(s,u,j,g),ve=s.memoizedState),(be=Xa||zm(s,u,be,g,pe,ve,Q)||n!==null&&n.dependencies!==null&&fh(n.dependencies))?(ae||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,ve,Q),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,ve,Q)),typeof A.componentDidUpdate=="function"&&(s.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof A.componentDidUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=ve),A.props=g,A.state=ve,A.context=Q,g=be):(typeof A.componentDidUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&pe===n.memoizedState||(s.flags|=1024),g=!1)}return A=g,kc(n,s),g=(s.flags&128)!==0,A||g?(A=s.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:A.render(),s.flags|=1,n!==null&&g?(s.child=Po(s,n.child,null,E),s.child=Po(s,null,u,E)):Xr(n,s,u,E),s.memoizedState=A.state,n=s.child):n=ha(n,s,E),n}function ip(n,s,u,g){return Ac(),s.flags|=256,Xr(n,s,u,g),s.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Ld(n){return{baseLanes:n,cachePool:am()}}function kd(n,s,u){return n=n!==null?n.childLanes&~u:0,s&&(n|=ps),n}function sp(n,s,u){var g=s.pendingProps,E=!1,A=(s.flags&128)!==0,M;if((M=A)||(M=n!==null&&n.memoizedState===null?!1:(br.current&2)!==0),M&&(E=!0,s.flags&=-129),M=(s.flags&32)!==0,s.flags&=-33,n===null){if(ln){if(E?za(s):Ha(),ln){var j=Yr,Q;if(Q=j){e:{for(Q=j,j=zs;Q.nodeType!==8;){if(!j){j=null;break e}if(Q=Ts(Q.nextSibling),Q===null){j=null;break e}}j=Q}j!==null?(s.memoizedState={dehydrated:j,treeContext:Oo!==null?{id:oa,overflow:la}:null,retryLane:536870912},Q=ms(18,null,null,0),Q.stateNode=j,Q.return=s,s.child=Q,gi=s,Yr=null,Q=!0):Q=!1}Q||ko(s)}if(j=s.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return j.data==="$!"?s.lanes=16:s.lanes=536870912,null;ca(s)}return j=g.children,g=g.fallback,E?(Ha(),E=s.mode,j=Bd({mode:"hidden",children:j},E),g=qo(g,E,u,null),j.return=s,g.return=s,j.sibling=g,s.child=j,E=s.child,E.memoizedState=Ld(u),E.childLanes=kd(n,M,u),s.memoizedState=Od,g):(za(s),Pd(s,j))}if(Q=n.memoizedState,Q!==null&&(j=Q.dehydrated,j!==null)){if(A)s.flags&256?(za(s),s.flags&=-257,s=jd(n,s,u)):s.memoizedState!==null?(Ha(),s.child=n.child,s.flags|=128,s=null):(Ha(),E=g.fallback,j=s.mode,g=Bd({mode:"visible",children:g.children},j),E=qo(E,j,u,null),E.flags|=2,g.return=s,E.return=s,g.sibling=E,s.child=g,Po(s,n.child,null,u),g=s.child,g.memoizedState=Ld(u),g.childLanes=kd(n,M,u),s.memoizedState=Od,s=E);else if(za(s),j.data==="$!"){if(M=j.nextSibling&&j.nextSibling.dataset,M)var ae=M.dgst;M=ae,g=Error(a(419)),g.stack="",g.digest=M,Cc({value:g,source:null,stack:null}),s=jd(n,s,u)}else if(Dr||Pc(n,s,u,!1),M=(u&n.childLanes)!==0,Dr||M){if(M=Dn,M!==null){if(g=u&-u,g&42)g=1;else switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=64;break;case 268435456:g=134217728;break;default:g=0}if(g=g&(M.suspendedLanes|u)?0:g,g!==0&&g!==Q.retryLane)throw Q.retryLane=g,Fa(n,g),mi(M,n,g),Km}j.data==="$?"||f0(),s=jd(n,s,u)}else j.data==="$?"?(s.flags|=128,s.child=n.child,s=cv.bind(null,n),j._reactRetry=s,s=null):(n=Q.treeContext,Yr=Ts(j.nextSibling),gi=s,ln=!0,As=null,zs=!1,n!==null&&(us[hs++]=oa,us[hs++]=la,us[hs++]=Oo,oa=n.id,la=n.overflow,Oo=s),s=Pd(s,g.children),s.flags|=4096);return s}return E?(Ha(),E=g.fallback,j=s.mode,Q=n.child,ae=Q.sibling,g=Ja(Q,{mode:"hidden",children:g.children}),g.subtreeFlags=Q.subtreeFlags&31457280,ae!==null?E=Ja(ae,E):(E=qo(E,j,u,null),E.flags|=2),E.return=s,g.return=s,g.sibling=E,s.child=g,g=E,E=s.child,j=n.child.memoizedState,j===null?j=Ld(u):(Q=j.cachePool,Q!==null?(ae=Ar._currentValue,Q=Q.parent!==ae?{parent:ae,pool:ae}:Q):Q=am(),j={baseLanes:j.baseLanes|u,cachePool:Q}),E.memoizedState=j,E.childLanes=kd(n,M,u),s.memoizedState=Od,g):(za(s),u=n.child,n=u.sibling,u=Ja(u,{mode:"visible",children:g.children}),u.return=s,u.sibling=null,n!==null&&(M=s.deletions,M===null?(s.deletions=[n],s.flags|=16):M.push(n)),s.child=u,s.memoizedState=null,u)}function Pd(n,s){return s=Bd({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Bd(n,s){return Dp(n,s,0,null)}function jd(n,s,u){return Po(s,n.child,null,u),n=Pd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ap(n,s,u){n.lanes|=s;var g=n.alternate;g!==null&&(g.lanes|=s),zd(n.return,s,u)}function Ud(n,s,u,g,E){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:E}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=u,A.tailMode=E)}function op(n,s,u){var g=s.pendingProps,E=g.revealOrder,A=g.tail;if(Xr(n,s,g.children,u),g=br.current,g&2)g=g&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ap(n,u,s);else if(n.tag===19)ap(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}switch(tt(br,g),E){case"forwards":for(u=s.child,E=null;u!==null;)n=u.alternate,n!==null&&eh(n)===null&&(E=u),u=u.sibling;u=E,u===null?(E=s.child,s.child=null):(E=u.sibling,u.sibling=null),Ud(s,!1,E,u,A);break;case"backwards":for(u=null,E=s.child,s.child=null;E!==null;){if(n=E.alternate,n!==null&&eh(n)===null){s.child=E;break}n=E.sibling,E.sibling=u,u=E,E=n}Ud(s,!0,u,null,A);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ha(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),eo|=s.lanes,!(u&s.childLanes))if(n!==null){if(Pc(n,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(a(153));if(s.child!==null){for(n=s.child,u=Ja(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=Ja(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function Vd(n,s){return n.lanes&s?!0:(n=n.dependencies,!!(n!==null&&fh(n)))}function W_(n,s,u){switch(s.tag){case 3:Ze(s,s.stateNode.containerInfo),Ya(s,Ar,n.memoizedState.cache),Ac();break;case 27:case 5:at(s);break;case 4:Ze(s,s.stateNode.containerInfo);break;case 10:Ya(s,s.type,s.memoizedProps.value);break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(za(s),s.flags|=128,null):u&s.child.childLanes?sp(n,s,u):(za(s),n=ha(n,s,u),n!==null?n.sibling:null);za(s);break;case 19:var E=(n.flags&128)!==0;if(g=(u&s.childLanes)!==0,g||(Pc(n,s,u,!1),g=(u&s.childLanes)!==0),E){if(g)return op(n,s,u);s.flags|=128}if(E=s.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),tt(br,br.current),g)break;return null;case 22:case 23:return s.lanes=0,ep(n,s,u);case 24:Ya(s,Ar,n.memoizedState.cache)}return ha(n,s,u)}function lp(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps)Dr=!0;else{if(!Vd(n,u)&&!(s.flags&128))return Dr=!1,W_(n,s,u);Dr=!!(n.flags&131072)}else Dr=!1,ln&&s.flags&1048576&&Yg(s,Wu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var g=s.elementType,E=g._init;if(g=E(g._payload),s.type=g,typeof g=="function")e0(g)?(n=Fo(g,n),s.tag=1,s=rp(null,s,g,n,u)):(s.tag=0,s=Md(null,s,g,n,u));else{if(g!=null){if(E=g.$$typeof,E===Y){s.tag=11,s=Zm(null,s,g,n,u);break e}else if(E===de){s.tag=14,s=$m(null,s,g,n,u);break e}}throw s=V(g)||g,Error(a(306,s,""))}}return s;case 0:return Md(n,s,s.type,s.pendingProps,u);case 1:return g=s.type,E=Fo(g,s.pendingProps),rp(n,s,g,E,u);case 3:e:{if(Ze(s,s.stateNode.containerInfo),n===null)throw Error(a(387));var A=s.pendingProps;E=s.memoizedState,g=E.element,qd(n,s),Uc(s,A,null,u);var M=s.memoizedState;if(A=M.cache,Ya(s,Ar,A),A!==E.cache&&Hd(s,[Ar],u,!0),jc(),A=M.element,E.isDehydrated)if(E={element:A,isDehydrated:!1,cache:M.cache},s.updateQueue.baseState=E,s.memoizedState=E,s.flags&256){s=ip(n,s,A,u);break e}else if(A!==g){g=cs(Error(a(424)),s),Cc(g),s=ip(n,s,A,u);break e}else for(Yr=Ts(s.stateNode.containerInfo.firstChild),gi=s,ln=!0,As=null,zs=!0,u=tm(s,null,A,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ac(),A===g){s=ha(n,s,u);break e}Xr(n,s,A,u)}s=s.child}return s;case 26:return kc(n,s),n===null?(u=h2(s.type,null,s.pendingProps,null))?s.memoizedState=u:ln||(u=s.type,n=s.pendingProps,g=Ih(xt.current).createElement(u),g[wn]=s,g[kn]=n,Qr(g,u,n),Ye(g),s.stateNode=g):s.memoizedState=h2(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return at(s),n===null&&ln&&(g=s.stateNode=l2(s.type,s.pendingProps,xt.current),gi=s,zs=!0,Yr=Ts(g.firstChild)),g=s.pendingProps.children,n!==null||ln?Xr(n,s,g,u):s.child=Po(s,null,g,u),kc(n,s),s.child;case 5:return n===null&&ln&&((E=g=Yr)&&(g=Cv(g,s.type,s.pendingProps,zs),g!==null?(s.stateNode=g,gi=s,Yr=Ts(g.firstChild),zs=!1,E=!0):E=!1),E||ko(s)),at(s),E=s.type,A=s.pendingProps,M=n!==null?n.memoizedProps:null,g=A.children,T0(E,A)?g=null:M!==null&&T0(E,M)&&(s.flags|=32),s.memoizedState!==null&&(E=gd(n,s,z_,null,null,u),eu._currentValue=E),kc(n,s),Xr(n,s,g,u),s.child;case 6:return n===null&&ln&&((n=u=Yr)&&(u=Tv(u,s.pendingProps,zs),u!==null?(s.stateNode=u,gi=s,Yr=null,n=!0):n=!1),n||ko(s)),null;case 13:return sp(n,s,u);case 4:return Ze(s,s.stateNode.containerInfo),g=s.pendingProps,n===null?s.child=Po(s,null,g,u):Xr(n,s,g,u),s.child;case 11:return Zm(n,s,s.type,s.pendingProps,u);case 7:return Xr(n,s,s.pendingProps,u),s.child;case 8:return Xr(n,s,s.pendingProps.children,u),s.child;case 12:return Xr(n,s,s.pendingProps.children,u),s.child;case 10:return g=s.pendingProps,Ya(s,s.type,g.value),Xr(n,s,g.children,u),s.child;case 9:return E=s.type._context,g=s.pendingProps.children,Ho(s),E=si(E),g=g(E),s.flags|=1,Xr(n,s,g,u),s.child;case 14:return $m(n,s,s.type,s.pendingProps,u);case 15:return Jm(n,s,s.type,s.pendingProps,u);case 19:return op(n,s,u);case 22:return ep(n,s,u);case 24:return Ho(s),g=si(Ar),n===null?(E=fd(),E===null&&(E=Dn,A=ud(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=u),E=A),s.memoizedState={parent:g,cache:E},Gd(s),Ya(s,Ar,E)):(n.lanes&u&&(qd(n,s),Uc(s,null,null,u),jc()),E=n.memoizedState,A=s.memoizedState,E.parent!==g?(E={parent:g,cache:g},s.memoizedState=E,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=E),Ya(s,Ar,g)):(g=A.cache,Ya(s,Ar,g),g!==E.cache&&Hd(s,[Ar],u,!0))),Xr(n,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}var Fd=Fe(null),zo=null,fa=null;function Ya(n,s,u){tt(Fd,s._currentValue),s._currentValue=u}function da(n){n._currentValue=Fd.current,nt(Fd)}function zd(n,s,u){for(;n!==null;){var g=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),n===u)break;n=n.return}}function Hd(n,s,u,g){var E=n.child;for(E!==null&&(E.return=n);E!==null;){var A=E.dependencies;if(A!==null){var M=E.child;A=A.firstContext;e:for(;A!==null;){var j=A;A=E;for(var Q=0;Q<s.length;Q++)if(j.context===s[Q]){A.lanes|=u,j=A.alternate,j!==null&&(j.lanes|=u),zd(A.return,u,n),g||(M=null);break e}A=j.next}}else if(E.tag===18){if(M=E.return,M===null)throw Error(a(341));M.lanes|=u,A=M.alternate,A!==null&&(A.lanes|=u),zd(M,u,n),M=null}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===n){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}}function Pc(n,s,u,g){n=null;for(var E=s,A=!1;E!==null;){if(!A){if(E.flags&524288)A=!0;else if(E.flags&262144)break}if(E.tag===10){var M=E.alternate;if(M===null)throw Error(a(387));if(M=M.memoizedProps,M!==null){var j=E.type;h(E.pendingProps.value,M.value)||(n!==null?n.push(j):n=[j])}}else if(E===We.current){if(M=E.alternate,M===null)throw Error(a(387));M.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(n!==null?n.push(eu):n=[eu])}E=E.return}n!==null&&Hd(s,n,u,g),s.flags|=262144}function fh(n){for(n=n.firstContext;n!==null;){if(!h(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ho(n){zo=n,fa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function si(n){return cp(zo,n)}function dh(n,s){return zo===null&&Ho(n),cp(n,s)}function cp(n,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},fa===null){if(n===null)throw Error(a(308));fa=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else fa=fa.next=s;return u}var Xa=!1;function Gd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Qa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Wa(n,s,u){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,Qn&2){var E=g.pending;return E===null?s.next=s:(s.next=E.next,E.next=s),g.pending=s,s=Xu(n),Gg(n,null,u),s}return Yu(n,g,s,u),Xu(n)}function Bc(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194176)!==0)){var g=s.lanes;g&=n.pendingLanes,u|=g,s.lanes=u,wi(n,u)}}function Yd(n,s){var u=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var E=null,A=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};A===null?E=A=M:A=A.next=M,u=u.next}while(u!==null);A===null?E=A=s:A=A.next=s}else E=A=s;u={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:g.shared,callbacks:g.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}var Xd=!1;function jc(){if(Xd){var n=Tl;if(n!==null)throw n}}function Uc(n,s,u,g){Xd=!1;var E=n.updateQueue;Xa=!1;var A=E.firstBaseUpdate,M=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var Q=j,ae=Q.next;Q.next=null,M===null?A=ae:M.next=ae,M=Q;var be=n.alternate;be!==null&&(be=be.updateQueue,j=be.lastBaseUpdate,j!==M&&(j===null?be.firstBaseUpdate=ae:j.next=ae,be.lastBaseUpdate=Q))}if(A!==null){var Me=E.baseState;M=0,be=ae=Q=null,j=A;do{var pe=j.lane&-536870913,ve=pe!==j.lane;if(ve?(nn&pe)===pe:(g&pe)===pe){pe!==0&&pe===Cl&&(Xd=!0),be!==null&&(be=be.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var ot=n,Dt=j;pe=s;var nr=u;switch(Dt.tag){case 1:if(ot=Dt.payload,typeof ot=="function"){Me=ot.call(nr,Me,pe);break e}Me=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=Dt.payload,pe=typeof ot=="function"?ot.call(nr,Me,pe):ot,pe==null)break e;Me=G({},Me,pe);break e;case 2:Xa=!0}}pe=j.callback,pe!==null&&(n.flags|=64,ve&&(n.flags|=8192),ve=E.callbacks,ve===null?E.callbacks=[pe]:ve.push(pe))}else ve={lane:pe,tag:j.tag,payload:j.payload,callback:j.callback,next:null},be===null?(ae=be=ve,Q=Me):be=be.next=ve,M|=pe;if(j=j.next,j===null){if(j=E.shared.pending,j===null)break;ve=j,j=ve.next,ve.next=null,E.lastBaseUpdate=ve,E.shared.pending=null}}while(!0);be===null&&(Q=Me),E.baseState=Q,E.firstBaseUpdate=ae,E.lastBaseUpdate=be,A===null&&(E.shared.lanes=0),eo|=M,n.lanes=M,n.memoizedState=Me}}function up(n,s){if(typeof n!="function")throw Error(a(191,n));n.call(s)}function hp(n,s){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)up(u[n],s)}function Vc(n,s){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var E=g.next;u=E;do{if((u.tag&n)===n){g=void 0;var A=u.create,M=u.inst;g=A(),M.destroy=g}u=u.next}while(u!==E)}}catch(j){In(s,s.return,j)}}function Ka(n,s,u){try{var g=s.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var A=E.next;g=A;do{if((g.tag&n)===n){var M=g.inst,j=M.destroy;if(j!==void 0){M.destroy=void 0,E=s;var Q=u;try{j()}catch(ae){In(E,Q,ae)}}}g=g.next}while(g!==A)}}catch(ae){In(s,s.return,ae)}}function fp(n){var s=n.updateQueue;if(s!==null){var u=n.stateNode;try{hp(s,u)}catch(g){In(n,n.return,g)}}}function dp(n,s,u){u.props=Fo(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(g){In(n,s,g)}}function Go(n,s){try{var u=n.ref;if(u!==null){var g=n.stateNode;switch(n.tag){case 26:case 27:case 5:var E=g;break;default:E=g}typeof u=="function"?n.refCleanup=u(E):u.current=E}}catch(A){In(n,s,A)}}function qi(n,s){var u=n.ref,g=n.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(E){In(n,s,E)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(E){In(n,s,E)}else u.current=null}function gp(n){var s=n.type,u=n.memoizedProps,g=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(E){In(n,n.return,E)}}function mp(n,s,u){try{var g=n.stateNode;Ev(g,n.type,u,s),g[kn]=s}catch(E){In(n,n.return,E)}}function pp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Qd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wd(n,s,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Sh));else if(g!==4&&g!==27&&(n=n.child,n!==null))for(Wd(n,s,u),n=n.sibling;n!==null;)Wd(n,s,u),n=n.sibling}function gh(n,s,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(g!==4&&g!==27&&(n=n.child,n!==null))for(gh(n,s,u),n=n.sibling;n!==null;)gh(n,s,u),n=n.sibling}var ga=!1,er=!1,Kd=!1,xp=typeof WeakSet=="function"?WeakSet:Set,Mr=null,yp=!1;function K_(n,s){if(n=n.containerInfo,A0=Lh,n=T(n),N(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var E=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{u.nodeType,A.nodeType}catch{u=null;break e}var M=0,j=-1,Q=-1,ae=0,be=0,Me=n,pe=null;t:for(;;){for(var ve;Me!==u||E!==0&&Me.nodeType!==3||(j=M+E),Me!==A||g!==0&&Me.nodeType!==3||(Q=M+g),Me.nodeType===3&&(M+=Me.nodeValue.length),(ve=Me.firstChild)!==null;)pe=Me,Me=ve;for(;;){if(Me===n)break t;if(pe===u&&++ae===E&&(j=M),pe===A&&++be===g&&(Q=M),(ve=Me.nextSibling)!==null)break;Me=pe,pe=Me.parentNode}Me=ve}u=j===-1||Q===-1?null:{start:j,end:Q}}else u=null}u=u||{start:0,end:0}}else u=null;for(C0={focusedElem:n,selectionRange:u},Lh=!1,Mr=s;Mr!==null;)if(s=Mr,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Mr=n;else for(;Mr!==null;){switch(s=Mr,A=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&A!==null){n=void 0,u=s,E=A.memoizedProps,A=A.memoizedState,g=u.stateNode;try{var ot=Fo(u.type,E,u.elementType===u.type);n=g.getSnapshotBeforeUpdate(ot,A),g.__reactInternalSnapshotBeforeUpdate=n}catch(Dt){In(u,u.return,Dt)}}break;case 3:if(n&1024){if(n=s.stateNode.containerInfo,u=n.nodeType,u===9)N0(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":N0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(a(163))}if(n=s.sibling,n!==null){n.return=s.return,Mr=n;break}Mr=s.return}return ot=yp,yp=!1,ot}function wp(n,s,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:pa(n,u),g&4&&Vc(5,u);break;case 1:if(pa(n,u),g&4)if(n=u.stateNode,s===null)try{n.componentDidMount()}catch(j){In(u,u.return,j)}else{var E=Fo(u.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(E,s,n.__reactInternalSnapshotBeforeUpdate)}catch(j){In(u,u.return,j)}}g&64&&fp(u),g&512&&Go(u,u.return);break;case 3:if(pa(n,u),g&64&&(g=u.updateQueue,g!==null)){if(n=null,u.child!==null)switch(u.child.tag){case 27:case 5:n=u.child.stateNode;break;case 1:n=u.child.stateNode}try{hp(g,n)}catch(j){In(u,u.return,j)}}break;case 26:pa(n,u),g&512&&Go(u,u.return);break;case 27:case 5:pa(n,u),s===null&&g&4&&gp(u),g&512&&Go(u,u.return);break;case 12:pa(n,u);break;case 13:pa(n,u),g&4&&vp(n,u);break;case 22:if(E=u.memoizedState!==null||ga,!E){s=s!==null&&s.memoizedState!==null||er;var A=ga,M=er;ga=E,(er=s)&&!M?Za(n,u,(u.subtreeFlags&8772)!==0):pa(n,u),ga=A,er=M}g&512&&(u.memoizedProps.mode==="manual"?Go(u,u.return):qi(u,u.return));break;default:pa(n,u)}}function Ep(n){var s=n.alternate;s!==null&&(n.alternate=null,Ep(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ks(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var xr=null,Yi=!1;function ma(n,s,u){for(u=u.child;u!==null;)_p(n,s,u),u=u.sibling}function _p(n,s,u){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(un,u)}catch{}switch(u.tag){case 26:er||qi(u,s),ma(n,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:er||qi(u,s);var g=xr,E=Yi;for(xr=u.stateNode,ma(n,s,u),u=u.stateNode,s=u.attributes;s.length;)u.removeAttributeNode(s[0]);ks(u),xr=g,Yi=E;break;case 5:er||qi(u,s);case 6:E=xr;var A=Yi;if(xr=null,ma(n,s,u),xr=E,Yi=A,xr!==null)if(Yi)try{n=xr,g=u.stateNode,n.nodeType===8?n.parentNode.removeChild(g):n.removeChild(g)}catch(M){In(u,s,M)}else try{xr.removeChild(u.stateNode)}catch(M){In(u,s,M)}break;case 18:xr!==null&&(Yi?(s=xr,u=u.stateNode,s.nodeType===8?I0(s.parentNode,u):s.nodeType===1&&I0(s,u),iu(s)):I0(xr,u.stateNode));break;case 4:g=xr,E=Yi,xr=u.stateNode.containerInfo,Yi=!0,ma(n,s,u),xr=g,Yi=E;break;case 0:case 11:case 14:case 15:er||Ka(2,u,s),er||Ka(4,u,s),ma(n,s,u);break;case 1:er||(qi(u,s),g=u.stateNode,typeof g.componentWillUnmount=="function"&&dp(u,s,g)),ma(n,s,u);break;case 21:ma(n,s,u);break;case 22:er||qi(u,s),er=(g=er)||u.memoizedState!==null,ma(n,s,u),er=g;break;default:ma(n,s,u)}}function vp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{iu(n)}catch(u){In(s,s.return,u)}}function Z_(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new xp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new xp),s;default:throw Error(a(435,n.tag))}}function Zd(n,s){var u=Z_(n);s.forEach(function(g){var E=uv.bind(null,n,g);u.has(g)||(u.add(g),g.then(E,E))})}function ds(n,s){var u=s.deletions;if(u!==null)for(var g=0;g<u.length;g++){var E=u[g],A=n,M=s,j=M;e:for(;j!==null;){switch(j.tag){case 27:case 5:xr=j.stateNode,Yi=!1;break e;case 3:xr=j.stateNode.containerInfo,Yi=!0;break e;case 4:xr=j.stateNode.containerInfo,Yi=!0;break e}j=j.return}if(xr===null)throw Error(a(160));_p(A,M,E),xr=null,Yi=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)bp(s,n),s=s.sibling}var Cs=null;function bp(n,s){var u=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ds(s,n),gs(n),g&4&&(Ka(3,n,n.return),Vc(3,n),Ka(5,n,n.return));break;case 1:ds(s,n),gs(n),g&512&&(er||u===null||qi(u,u.return)),g&64&&ga&&(n=n.updateQueue,n!==null&&(g=n.callbacks,g!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var E=Cs;if(ds(s,n),gs(n),g&512&&(er||u===null||qi(u,u.return)),g&4){var A=u!==null?u.memoizedState:null;if(g=n.memoizedState,u===null)if(g===null)if(n.stateNode===null){e:{g=n.type,u=n.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":A=E.getElementsByTagName("title")[0],(!A||A[_i]||A[wn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(g),E.head.insertBefore(A,E.querySelector("head > title"))),Qr(A,g,u),A[wn]=n,Ye(A),g=A;break e;case"link":var M=g2("link","href",E).get(g+(u.href||""));if(M){for(var j=0;j<M.length;j++)if(A=M[j],A.getAttribute("href")===(u.href==null?null:u.href)&&A.getAttribute("rel")===(u.rel==null?null:u.rel)&&A.getAttribute("title")===(u.title==null?null:u.title)&&A.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(j,1);break t}}A=E.createElement(g),Qr(A,g,u),E.head.appendChild(A);break;case"meta":if(M=g2("meta","content",E).get(g+(u.content||""))){for(j=0;j<M.length;j++)if(A=M[j],A.getAttribute("content")===(u.content==null?null:""+u.content)&&A.getAttribute("name")===(u.name==null?null:u.name)&&A.getAttribute("property")===(u.property==null?null:u.property)&&A.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&A.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(j,1);break t}}A=E.createElement(g),Qr(A,g,u),E.head.appendChild(A);break;default:throw Error(a(468,g))}A[wn]=n,Ye(A),g=A}n.stateNode=g}else m2(E,n.type,n.stateNode);else n.stateNode=d2(E,g,n.memoizedProps);else A!==g?(A===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):A.count--,g===null?m2(E,n.type,n.stateNode):d2(E,g,n.memoizedProps)):g===null&&n.stateNode!==null&&mp(n,n.memoizedProps,u.memoizedProps)}break;case 27:if(g&4&&n.alternate===null){E=n.stateNode,A=n.memoizedProps;try{for(var Q=E.firstChild;Q;){var ae=Q.nextSibling,be=Q.nodeName;Q[_i]||be==="HEAD"||be==="BODY"||be==="SCRIPT"||be==="STYLE"||be==="LINK"&&Q.rel.toLowerCase()==="stylesheet"||E.removeChild(Q),Q=ae}for(var Me=n.type,pe=E.attributes;pe.length;)E.removeAttributeNode(pe[0]);Qr(E,Me,A),E[wn]=n,E[kn]=A}catch(ot){In(n,n.return,ot)}}case 5:if(ds(s,n),gs(n),g&512&&(er||u===null||qi(u,u.return)),n.flags&32){E=n.stateNode;try{bi(E,"")}catch(ot){In(n,n.return,ot)}}g&4&&n.stateNode!=null&&(E=n.memoizedProps,mp(n,E,u!==null?u.memoizedProps:E)),g&1024&&(Kd=!0);break;case 6:if(ds(s,n),gs(n),g&4){if(n.stateNode===null)throw Error(a(162));g=n.memoizedProps,u=n.stateNode;try{u.nodeValue=g}catch(ot){In(n,n.return,ot)}}break;case 3:if(Dh=null,E=Cs,Cs=Nh(s.containerInfo),ds(s,n),Cs=E,gs(n),g&4&&u!==null&&u.memoizedState.isDehydrated)try{iu(s.containerInfo)}catch(ot){In(n,n.return,ot)}Kd&&(Kd=!1,Ap(n));break;case 4:g=Cs,Cs=Nh(n.stateNode.containerInfo),ds(s,n),gs(n),Cs=g;break;case 12:ds(s,n),gs(n);break;case 13:ds(s,n),gs(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(a0=It()),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Zd(n,g)));break;case 22:if(g&512&&(er||u===null||qi(u,u.return)),Q=n.memoizedState!==null,ae=u!==null&&u.memoizedState!==null,be=ga,Me=er,ga=be||Q,er=Me||ae,ds(s,n),er=Me,ga=be,gs(n),s=n.stateNode,s._current=n,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,g&8192&&(s._visibility=Q?s._visibility&-2:s._visibility|1,Q&&(s=ga||er,u===null||ae||s||Rl(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(u=null,s=n;;){if(s.tag===5||s.tag===26||s.tag===27){if(u===null){ae=u=s;try{if(E=ae.stateNode,Q)A=E.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=ae.stateNode,j=ae.memoizedProps.style;var ve=j!=null&&j.hasOwnProperty("display")?j.display:null;M.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(ot){In(ae,ae.return,ot)}}}else if(s.tag===6){if(u===null){ae=s;try{ae.stateNode.nodeValue=Q?"":ae.memoizedProps}catch(ot){In(ae,ae.return,ot)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=n.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Zd(n,u))));break;case 19:ds(s,n),gs(n),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Zd(n,g)));break;case 21:break;default:ds(s,n),gs(n)}}function gs(n){var s=n.flags;if(s&2){try{if(n.tag!==27){e:{for(var u=n.return;u!==null;){if(pp(u)){var g=u;break e}u=u.return}throw Error(a(160))}switch(g.tag){case 27:var E=g.stateNode,A=Qd(n);gh(n,A,E);break;case 5:var M=g.stateNode;g.flags&32&&(bi(M,""),g.flags&=-33);var j=Qd(n);gh(n,j,M);break;case 3:case 4:var Q=g.stateNode.containerInfo,ae=Qd(n);Wd(n,ae,Q);break;default:throw Error(a(161))}}}catch(be){In(n,n.return,be)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Ap(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Ap(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function pa(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)wp(n,s.alternate,s),s=s.sibling}function Rl(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ka(4,s,s.return),Rl(s);break;case 1:qi(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&dp(s,s.return,u),Rl(s);break;case 26:case 27:case 5:qi(s,s.return),Rl(s);break;case 22:qi(s,s.return),s.memoizedState===null&&Rl(s);break;default:Rl(s)}n=n.sibling}}function Za(n,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,E=n,A=s,M=A.flags;switch(A.tag){case 0:case 11:case 15:Za(E,A,u),Vc(4,A);break;case 1:if(Za(E,A,u),g=A,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ae){In(g,g.return,ae)}if(g=A,E=g.updateQueue,E!==null){var j=g.stateNode;try{var Q=E.shared.hiddenCallbacks;if(Q!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Q.length;E++)up(Q[E],j)}catch(ae){In(g,g.return,ae)}}u&&M&64&&fp(A),Go(A,A.return);break;case 26:case 27:case 5:Za(E,A,u),u&&g===null&&M&4&&gp(A),Go(A,A.return);break;case 12:Za(E,A,u);break;case 13:Za(E,A,u),u&&M&4&&vp(E,A);break;case 22:A.memoizedState===null&&Za(E,A,u),Go(A,A.return);break;default:Za(E,A,u)}s=s.sibling}}function $d(n,s){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&Rc(u))}function Jd(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Rc(n))}function $a(n,s,u,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cp(n,s,u,g),s=s.sibling}function Cp(n,s,u,g){var E=s.flags;switch(s.tag){case 0:case 11:case 15:$a(n,s,u,g),E&2048&&Vc(9,s);break;case 3:$a(n,s,u,g),E&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Rc(n)));break;case 12:if(E&2048){$a(n,s,u,g),n=s.stateNode;try{var A=s.memoizedProps,M=A.id,j=A.onPostCommit;typeof j=="function"&&j(M,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Q){In(s,s.return,Q)}}else $a(n,s,u,g);break;case 23:break;case 22:A=s.stateNode,s.memoizedState!==null?A._visibility&4?$a(n,s,u,g):Fc(n,s):A._visibility&4?$a(n,s,u,g):(A._visibility|=4,Dl(n,s,u,g,(s.subtreeFlags&10256)!==0)),E&2048&&$d(s.alternate,s);break;case 24:$a(n,s,u,g),E&2048&&Jd(s.alternate,s);break;default:$a(n,s,u,g)}}function Dl(n,s,u,g,E){for(E=E&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var A=n,M=s,j=u,Q=g,ae=M.flags;switch(M.tag){case 0:case 11:case 15:Dl(A,M,j,Q,E),Vc(8,M);break;case 23:break;case 22:var be=M.stateNode;M.memoizedState!==null?be._visibility&4?Dl(A,M,j,Q,E):Fc(A,M):(be._visibility|=4,Dl(A,M,j,Q,E)),E&&ae&2048&&$d(M.alternate,M);break;case 24:Dl(A,M,j,Q,E),E&&ae&2048&&Jd(M.alternate,M);break;default:Dl(A,M,j,Q,E)}s=s.sibling}}function Fc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=n,g=s,E=g.flags;switch(g.tag){case 22:Fc(u,g),E&2048&&$d(g.alternate,g);break;case 24:Fc(u,g),E&2048&&Jd(g.alternate,g);break;default:Fc(u,g)}s=s.sibling}}var zc=8192;function Ml(n){if(n.subtreeFlags&zc)for(n=n.child;n!==null;)Tp(n),n=n.sibling}function Tp(n){switch(n.tag){case 26:Ml(n),n.flags&zc&&n.memoizedState!==null&&Uv(Cs,n.memoizedState,n.memoizedProps);break;case 5:Ml(n);break;case 3:case 4:var s=Cs;Cs=Nh(n.stateNode.containerInfo),Ml(n),Cs=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=zc,zc=16777216,Ml(n),zc=s):Ml(n));break;default:Ml(n)}}function Sp(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Hc(n){var s=n.deletions;if(n.flags&16){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Mr=g,Np(g,n)}Sp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ip(n),n=n.sibling}function Ip(n){switch(n.tag){case 0:case 11:case 15:Hc(n),n.flags&2048&&Ka(9,n,n.return);break;case 3:Hc(n);break;case 12:Hc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&4&&(n.return===null||n.return.tag!==13)?(s._visibility&=-5,mh(n)):Hc(n);break;default:Hc(n)}}function mh(n){var s=n.deletions;if(n.flags&16){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Mr=g,Np(g,n)}Sp(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ka(8,s,s.return),mh(s);break;case 22:u=s.stateNode,u._visibility&4&&(u._visibility&=-5,mh(s));break;default:mh(s)}n=n.sibling}}function Np(n,s){for(;Mr!==null;){var u=Mr;switch(u.tag){case 0:case 11:case 15:Ka(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Rc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Mr=g;else e:for(u=n;Mr!==null;){g=Mr;var E=g.sibling,A=g.return;if(Ep(g),g===u){Mr=null;break e}if(E!==null){E.return=A,Mr=E;break e}Mr=A}}}function $_(n,s,u,g){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(n,s,u,g){return new $_(n,s,u,g)}function e0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ja(n,s){var u=n.alternate;return u===null?(u=ms(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&31457280,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function Rp(n,s){n.flags&=31457282;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,s=u.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ph(n,s,u,g,E,A){var M=0;if(g=n,typeof n=="function")e0(n)&&(M=1);else if(typeof n=="string")M=Bv(n,u,gt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case _:return qo(u.children,E,A,s);case w:M=8,E|=24;break;case S:return n=ms(12,u,s,E|2),n.elementType=S,n.lanes=A,n;case ee:return n=ms(13,u,s,E),n.elementType=ee,n.lanes=A,n;case W:return n=ms(19,u,s,E),n.elementType=W,n.lanes=A,n;case ie:return Dp(u,E,A,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:case F:M=10;break e;case P:M=9;break e;case Y:M=11;break e;case de:M=14;break e;case fe:M=16,g=null;break e}M=29,u=Error(a(130,n===null?"null":typeof n,"")),g=null}return s=ms(M,u,s,E),s.elementType=n,s.type=g,s.lanes=A,s}function qo(n,s,u,g){return n=ms(7,n,g,s),n.lanes=u,n}function Dp(n,s,u,g){n=ms(22,n,g,s),n.elementType=ie,n.lanes=u;var E={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var A=E._current;if(A===null)throw Error(a(456));if(!(E._pendingVisibility&2)){var M=Fa(A,2);M!==null&&(E._pendingVisibility|=2,mi(M,A,2))}},attach:function(){var A=E._current;if(A===null)throw Error(a(456));if(E._pendingVisibility&2){var M=Fa(A,2);M!==null&&(E._pendingVisibility&=-3,mi(M,A,2))}}};return n.stateNode=E,n}function t0(n,s,u){return n=ms(6,n,null,s),n.lanes=u,n}function n0(n,s,u){return s=ms(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function xa(n){n.flags|=4}function Mp(n,s){if(s.type!=="stylesheet"||s.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!p2(s)){if(s=fs.current,s!==null&&((nn&4194176)===nn?Hs!==null:(nn&62914560)!==nn&&!(nn&536870912)||s!==Hs))throw Sc=od,Wg;n.flags|=8192}}function xh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Vr():536870912,n.lanes|=s,Ll|=s)}function Gc(n,s){if(!ln)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function Xn(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,g=0;if(s)for(var E=n.child;E!==null;)u|=E.lanes|E.childLanes,g|=E.subtreeFlags&31457280,g|=E.flags&31457280,E.return=n,E=E.sibling;else for(E=n.child;E!==null;)u|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=n,E=E.sibling;return n.subtreeFlags|=g,n.childLanes=u,s}function J_(n,s,u){var g=s.pendingProps;switch(sd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(s),null;case 1:return Xn(s),null;case 3:return u=s.stateNode,g=null,n!==null&&(g=n.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),da(Ar),st(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(bc(s)?xa(s):n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,As!==null&&(u0(As),As=null))),Xn(s),null;case 26:return u=s.memoizedState,n===null?(xa(s),u!==null?(Xn(s),Mp(s,u)):(Xn(s),s.flags&=-16777217)):u?u!==n.memoizedState?(xa(s),Xn(s),Mp(s,u)):(Xn(s),s.flags&=-16777217):(n.memoizedProps!==g&&xa(s),Xn(s),s.flags&=-16777217),null;case 27:it(s),u=xt.current;var E=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==g&&xa(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Xn(s),null}n=gt.current,bc(s)?Xg(s):(n=l2(E,g,u),s.stateNode=n,xa(s))}return Xn(s),null;case 5:if(it(s),u=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==g&&xa(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Xn(s),null}if(n=gt.current,bc(s))Xg(s);else{switch(E=Ih(xt.current),n){case 1:n=E.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:n=E.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":n=E.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":n=E.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof g.is=="string"?E.createElement("select",{is:g.is}):E.createElement("select"),g.multiple?n.multiple=!0:g.size&&(n.size=g.size);break;default:n=typeof g.is=="string"?E.createElement(u,{is:g.is}):E.createElement(u)}}n[wn]=s,n[kn]=g;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)n.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=n;e:switch(Qr(n,u,g),u){case"button":case"input":case"select":case"textarea":n=!!g.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&xa(s)}}return Xn(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==g&&xa(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(n=xt.current,bc(s)){if(n=s.stateNode,u=s.memoizedProps,g=null,E=gi,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}n[wn]=s,n=!!(n.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||n2(n.nodeValue,u)),n||ko(s)}else n=Ih(n).createTextNode(g),n[wn]=s,s.stateNode=n}return Xn(s),null;case 13:if(g=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(E=bc(s),g!==null&&g.dehydrated!==null){if(n===null){if(!E)throw Error(a(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[wn]=s}else Ac(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Xn(s),E=!1}else As!==null&&(u0(As),As=null),E=!0;if(!E)return s.flags&256?(ca(s),s):(ca(s),null)}if(ca(s),s.flags&128)return s.lanes=u,s;if(u=g!==null,n=n!==null&&n.memoizedState!==null,u){g=s.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool);var A=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==E&&(g.flags|=2048)}return u!==n&&u&&(s.child.flags|=8192),xh(s,s.updateQueue),Xn(s),null;case 4:return st(),n===null&&_0(s.stateNode.containerInfo),Xn(s),null;case 10:return da(s.type),Xn(s),null;case 19:if(nt(br),E=s.memoizedState,E===null)return Xn(s),null;if(g=(s.flags&128)!==0,A=E.rendering,A===null)if(g)Gc(E,!1);else{if(tr!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(A=eh(n),A!==null){for(s.flags|=128,Gc(E,!1),n=A.updateQueue,s.updateQueue=n,xh(s,n),s.subtreeFlags=0,n=u,u=s.child;u!==null;)Rp(u,n),u=u.sibling;return tt(br,br.current&1|2),s.child}n=n.sibling}E.tail!==null&&It()>yh&&(s.flags|=128,g=!0,Gc(E,!1),s.lanes=4194304)}else{if(!g)if(n=eh(A),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,xh(s,n),Gc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!ln)return Xn(s),null}else 2*It()-E.renderingStartTime>yh&&u!==536870912&&(s.flags|=128,g=!0,Gc(E,!1),s.lanes=4194304);E.isBackwards?(A.sibling=s.child,s.child=A):(n=E.last,n!==null?n.sibling=A:s.child=A,E.last=A)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=It(),s.sibling=null,n=br.current,tt(br,g?n&1|2:n&1),s):(Xn(s),null);case 22:case 23:return ca(s),cd(),g=s.memoizedState!==null,n!==null?n.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?u&536870912&&!(s.flags&128)&&(Xn(s),s.subtreeFlags&6&&(s.flags|=8192)):Xn(s),u=s.updateQueue,u!==null&&xh(s,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==u&&(s.flags|=2048),n!==null&&nt(Bo),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),da(Ar),Xn(s),null;case 25:return null}throw Error(a(156,s.tag))}function ev(n,s){switch(sd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return da(Ar),st(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return it(s),null;case 13:if(ca(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Ac()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return nt(br),null;case 4:return st(),null;case 10:return da(s.type),null;case 22:case 23:return ca(s),cd(),n!==null&&nt(Bo),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return da(Ar),null;case 25:return null;default:return null}}function Op(n,s){switch(sd(s),s.tag){case 3:da(Ar),st();break;case 26:case 27:case 5:it(s);break;case 4:st();break;case 13:ca(s);break;case 19:nt(br);break;case 10:da(s.type);break;case 22:case 23:ca(s),cd(),n!==null&&nt(Bo);break;case 24:da(Ar)}}var tv={getCacheForType:function(n){var s=si(Ar),u=s.data.get(n);return u===void 0&&(u=n(),s.data.set(n,u)),u}},nv=typeof WeakMap=="function"?WeakMap:Map,Qn=0,Dn=null,Ht=null,nn=0,Mn=0,Xi=null,ya=!1,Ol=!1,r0=!1,wa=0,tr=0,eo=0,Yo=0,i0=0,ps=0,Ll=0,qc=null,qs=null,s0=!1,a0=0,yh=1/0,wh=null,to=null,Eh=!1,Xo=null,Yc=0,o0=0,l0=null,Xc=0,c0=null;function Qi(){if(Qn&2&&nn!==0)return nn&-nn;if(k.T!==null){var n=Cl;return n!==0?n:x0()}return Ei()}function Lp(){ps===0&&(ps=!(nn&536870912)||ln?Vn():536870912);var n=fs.current;return n!==null&&(n.flags|=32),ps}function mi(n,s,u){(n===Dn&&Mn===2||n.cancelPendingCommit!==null)&&(kl(n,0),Ea(n,nn,ps,!1)),tn(n,u),(!(Qn&2)||n!==Dn)&&(n===Dn&&(!(Qn&2)&&(Yo|=u),tr===4&&Ea(n,nn,ps,!1)),Ys(n))}function kp(n,s,u){if(Qn&6)throw Error(a(327));var g=!u&&(s&60)===0&&(s&n.expiredLanes)===0||Zn(n,s),E=g?sv(n,s):d0(n,s,!0),A=g;do{if(E===0){Ol&&!g&&Ea(n,s,0,!1);break}else if(E===6)Ea(n,s,0,!ya);else{if(u=n.current.alternate,A&&!rv(u)){E=d0(n,s,!1),A=!1;continue}if(E===2){if(A=s,n.errorRecoveryDisabledLanes&A)var M=0;else M=n.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){s=M;e:{var j=n;E=qc;var Q=j.current.memoizedState.isDehydrated;if(Q&&(kl(j,M).flags|=256),M=d0(j,M,!1),M!==2){if(r0&&!Q){j.errorRecoveryDisabledLanes|=A,Yo|=A,E=4;break e}A=qs,qs=E,A!==null&&u0(A)}E=M}if(A=!1,E!==2)continue}}if(E===1){kl(n,0),Ea(n,s,0,!0);break}e:{switch(g=n,E){case 0:case 1:throw Error(a(345));case 4:if((s&4194176)===s){Ea(g,s,ps,!ya);break e}break;case 2:qs=null;break;case 3:case 5:break;default:throw Error(a(329))}if(g.finishedWork=u,g.finishedLanes=s,(s&62914560)===s&&(A=a0+300-It(),10<A)){if(Ea(g,s,ps,!ya),Ur(g,0)!==0)break e;g.timeoutHandle=s2(Pp.bind(null,g,u,qs,wh,s0,s,ps,Yo,Ll,ya,2,-0,0),A);break e}Pp(g,u,qs,wh,s0,s,ps,Yo,Ll,ya,0,-0,0)}}break}while(!0);Ys(n)}function u0(n){qs===null?qs=n:qs.push.apply(qs,n)}function Pp(n,s,u,g,E,A,M,j,Q,ae,be,Me,pe){var ve=s.subtreeFlags;if((ve&8192||(ve&16785408)===16785408)&&(Jc={stylesheets:null,count:0,unsuspend:jv},Tp(s),s=Vv(),s!==null)){n.cancelPendingCommit=s(Hp.bind(null,n,u,g,E,M,j,Q,1,Me,pe)),Ea(n,A,M,!ae);return}Hp(n,u,g,E,M,j,Q,be,Me,pe)}function rv(n){for(var s=n;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var E=u[g],A=E.getSnapshot;E=E.value;try{if(!h(A(),E))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ea(n,s,u,g){s&=~i0,s&=~Yo,n.suspendedLanes|=s,n.pingedLanes&=~s,g&&(n.warmLanes|=s),g=n.expirationTimes;for(var E=s;0<E;){var A=31-Pt(E),M=1<<A;g[A]=-1,E&=~M}u!==0&&Ir(n,u,s)}function _h(){return Qn&6?!0:(Qc(0),!1)}function h0(){if(Ht!==null){if(Mn===0)var n=Ht.return;else n=Ht,fa=zo=null,xd(n),bl=null,Ic=0,n=Ht;for(;n!==null;)Op(n.alternate,n),n=n.return;Ht=null}}function kl(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,vv(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),h0(),Dn=n,Ht=u=Ja(n.current,null),nn=s,Mn=0,Xi=null,ya=!1,Ol=Zn(n,s),r0=!1,Ll=ps=i0=Yo=eo=tr=0,qs=qc=null,s0=!1,s&8&&(s|=s&32);var g=n.entangledLanes;if(g!==0)for(n=n.entanglements,g&=s;0<g;){var E=31-Pt(g),A=1<<E;s|=n[E],g&=~A}return wa=s,qu(),u}function Bp(n,s){Ut=null,k.H=Gs,s===Tc?(s=$g(),Mn=3):s===Wg?(s=$g(),Mn=4):Mn=s===Km?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Xi=s,Ht===null&&(tr=1,hh(n,cs(s,n.current)))}function jp(){var n=k.H;return k.H=Gs,n===null?Gs:n}function Up(){var n=k.A;return k.A=tv,n}function f0(){tr=4,ya||(nn&4194176)!==nn&&fs.current!==null||(Ol=!0),!(eo&134217727)&&!(Yo&134217727)||Dn===null||Ea(Dn,nn,ps,!1)}function d0(n,s,u){var g=Qn;Qn|=2;var E=jp(),A=Up();(Dn!==n||nn!==s)&&(wh=null,kl(n,s)),s=!1;var M=tr;e:do try{if(Mn!==0&&Ht!==null){var j=Ht,Q=Xi;switch(Mn){case 8:h0(),M=6;break e;case 3:case 2:case 6:fs.current===null&&(s=!0);var ae=Mn;if(Mn=0,Xi=null,Pl(n,j,Q,ae),u&&Ol){M=0;break e}break;default:ae=Mn,Mn=0,Xi=null,Pl(n,j,Q,ae)}}iv(),M=tr;break}catch(be){Bp(n,be)}while(!0);return s&&n.shellSuspendCounter++,fa=zo=null,Qn=g,k.H=E,k.A=A,Ht===null&&(Dn=null,nn=0,qu()),M}function iv(){for(;Ht!==null;)Vp(Ht)}function sv(n,s){var u=Qn;Qn|=2;var g=jp(),E=Up();Dn!==n||nn!==s?(wh=null,yh=It()+500,kl(n,s)):Ol=Zn(n,s);e:do try{if(Mn!==0&&Ht!==null){s=Ht;var A=Xi;t:switch(Mn){case 1:Mn=0,Xi=null,Pl(n,s,A,1);break;case 2:if(Kg(A)){Mn=0,Xi=null,Fp(s);break}s=function(){Mn===2&&Dn===n&&(Mn=7),Ys(n)},A.then(s,s);break e;case 3:Mn=7;break e;case 4:Mn=5;break e;case 7:Kg(A)?(Mn=0,Xi=null,Fp(s)):(Mn=0,Xi=null,Pl(n,s,A,7));break;case 5:var M=null;switch(Ht.tag){case 26:M=Ht.memoizedState;case 5:case 27:var j=Ht;if(!M||p2(M)){Mn=0,Xi=null;var Q=j.sibling;if(Q!==null)Ht=Q;else{var ae=j.return;ae!==null?(Ht=ae,vh(ae)):Ht=null}break t}}Mn=0,Xi=null,Pl(n,s,A,5);break;case 6:Mn=0,Xi=null,Pl(n,s,A,6);break;case 8:h0(),tr=6;break e;default:throw Error(a(462))}}av();break}catch(be){Bp(n,be)}while(!0);return fa=zo=null,k.H=g,k.A=E,Qn=u,Ht!==null?0:(Dn=null,nn=0,qu(),tr)}function av(){for(;Ht!==null&&!fr();)Vp(Ht)}function Vp(n){var s=lp(n.alternate,n,wa);n.memoizedProps=n.pendingProps,s===null?vh(n):Ht=s}function Fp(n){var s=n,u=s.alternate;switch(s.tag){case 15:case 0:s=np(u,s,s.pendingProps,s.type,void 0,nn);break;case 11:s=np(u,s,s.pendingProps,s.type.render,s.ref,nn);break;case 5:xd(s);default:Op(u,s),s=Ht=Rp(s,wa),s=lp(u,s,wa)}n.memoizedProps=n.pendingProps,s===null?vh(n):Ht=s}function Pl(n,s,u,g){fa=zo=null,xd(s),bl=null,Ic=0;var E=s.return;try{if(Q_(n,E,s,u,nn)){tr=1,hh(n,cs(u,n.current)),Ht=null;return}}catch(A){if(E!==null)throw Ht=E,A;tr=1,hh(n,cs(u,n.current)),Ht=null;return}s.flags&32768?(ln||g===1?n=!0:Ol||nn&536870912?n=!1:(ya=n=!0,(g===2||g===3||g===6)&&(g=fs.current,g!==null&&g.tag===13&&(g.flags|=16384))),zp(s,n)):vh(s)}function vh(n){var s=n;do{if(s.flags&32768){zp(s,ya);return}n=s.return;var u=J_(s.alternate,s,wa);if(u!==null){Ht=u;return}if(s=s.sibling,s!==null){Ht=s;return}Ht=s=n}while(s!==null);tr===0&&(tr=5)}function zp(n,s){do{var u=ev(n.alternate,n);if(u!==null){u.flags&=32767,Ht=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(n=n.sibling,n!==null)){Ht=n;return}Ht=n=u}while(n!==null);tr=6,Ht=null}function Hp(n,s,u,g,E,A,M,j,Q,ae){var be=k.T,Me=ze.p;try{ze.p=2,k.T=null,ov(n,s,u,g,Me,E,A,M,j,Q,ae)}finally{k.T=be,ze.p=Me}}function ov(n,s,u,g,E,A,M,j){do Bl();while(Xo!==null);if(Qn&6)throw Error(a(327));var Q=n.finishedWork;if(g=n.finishedLanes,Q===null)return null;if(n.finishedWork=null,n.finishedLanes=0,Q===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var ae=Q.lanes|Q.childLanes;if(ae|=nd,Pa(n,g,ae,A,M,j),n===Dn&&(Ht=Dn=null,nn=0),!(Q.subtreeFlags&10256)&&!(Q.flags&10256)||Eh||(Eh=!0,o0=ae,l0=u,hv(Ln,function(){return Bl(),null})),u=(Q.flags&15990)!==0,Q.subtreeFlags&15990||u?(u=k.T,k.T=null,A=ze.p,ze.p=2,M=Qn,Qn|=4,K_(n,Q),bp(Q,n),L(C0,n.containerInfo),Lh=!!A0,C0=A0=null,n.current=Q,wp(n,Q.alternate,Q),Br(),Qn=M,ze.p=A,k.T=u):n.current=Q,Eh?(Eh=!1,Xo=n,Yc=g):Gp(n,ae),ae=n.pendingLanes,ae===0&&(to=null),Cn(Q.stateNode),Ys(n),s!==null)for(E=n.onRecoverableError,Q=0;Q<s.length;Q++)ae=s[Q],E(ae.value,{componentStack:ae.stack});return Yc&3&&Bl(),ae=n.pendingLanes,g&4194218&&ae&42?n===c0?Xc++:(Xc=0,c0=n):Xc=0,Qc(0),null}function Gp(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Rc(s)))}function Bl(){if(Xo!==null){var n=Xo,s=o0;o0=0;var u=ar(Yc),g=k.T,E=ze.p;try{if(ze.p=32>u?32:u,k.T=null,Xo===null)var A=!1;else{u=l0,l0=null;var M=Xo,j=Yc;if(Xo=null,Yc=0,Qn&6)throw Error(a(331));var Q=Qn;if(Qn|=4,Ip(M.current),Cp(M,M.current,j,u),Qn=Q,Qc(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(un,M)}catch{}A=!0}return A}finally{ze.p=E,k.T=g,Gp(n,s)}}return!1}function qp(n,s,u){s=cs(u,s),s=Dd(n.stateNode,s,2),n=Wa(n,s,2),n!==null&&(tn(n,2),Ys(n))}function In(n,s,u){if(n.tag===3)qp(n,n,u);else for(;s!==null;){if(s.tag===3){qp(s,n,u);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(to===null||!to.has(g))){n=cs(u,n),u=Qm(2),g=Wa(s,u,2),g!==null&&(Wm(u,g,s,n),tn(g,2),Ys(g));break}}s=s.return}}function g0(n,s,u){var g=n.pingCache;if(g===null){g=n.pingCache=new nv;var E=new Set;g.set(s,E)}else E=g.get(s),E===void 0&&(E=new Set,g.set(s,E));E.has(u)||(r0=!0,E.add(u),n=lv.bind(null,n,s,u),s.then(n,n))}function lv(n,s,u){var g=n.pingCache;g!==null&&g.delete(s),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,Dn===n&&(nn&u)===u&&(tr===4||tr===3&&(nn&62914560)===nn&&300>It()-a0?!(Qn&2)&&kl(n,0):i0|=u,Ll===nn&&(Ll=0)),Ys(n)}function Yp(n,s){s===0&&(s=Vr()),n=Fa(n,s),n!==null&&(tn(n,s),Ys(n))}function cv(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),Yp(n,u)}function uv(n,s){var u=0;switch(n.tag){case 13:var g=n.stateNode,E=n.memoizedState;E!==null&&(u=E.retryLane);break;case 19:g=n.stateNode;break;case 22:g=n.stateNode._retryCache;break;default:throw Error(a(314))}g!==null&&g.delete(s),Yp(n,u)}function hv(n,s){return _t(n,s)}var bh=null,jl=null,m0=!1,Ah=!1,p0=!1,Qo=0;function Ys(n){n!==jl&&n.next===null&&(jl===null?bh=jl=n:jl=jl.next=n),Ah=!0,m0||(m0=!0,dv(fv))}function Qc(n,s){if(!p0&&Ah){p0=!0;do for(var u=!1,g=bh;g!==null;){if(n!==0){var E=g.pendingLanes;if(E===0)var A=0;else{var M=g.suspendedLanes,j=g.pingedLanes;A=(1<<31-Pt(42|n)+1)-1,A&=E&~(M&~j),A=A&201326677?A&201326677|1:A?A|2:0}A!==0&&(u=!0,Wp(g,A))}else A=nn,A=Ur(g,g===Dn?A:0),!(A&3)||Zn(g,A)||(u=!0,Wp(g,A));g=g.next}while(u);p0=!1}}function fv(){Ah=m0=!1;var n=0;Qo!==0&&(_v()&&(n=Qo),Qo=0);for(var s=It(),u=null,g=bh;g!==null;){var E=g.next,A=Xp(g,s);A===0?(g.next=null,u===null?bh=E:u.next=E,E===null&&(jl=u)):(u=g,(n!==0||A&3)&&(Ah=!0)),g=E}Qc(n)}function Xp(n,s){for(var u=n.suspendedLanes,g=n.pingedLanes,E=n.expirationTimes,A=n.pendingLanes&-62914561;0<A;){var M=31-Pt(A),j=1<<M,Q=E[M];Q===-1?(!(j&u)||j&g)&&(E[M]=es(j,s)):Q<=s&&(n.expiredLanes|=j),A&=~j}if(s=Dn,u=nn,u=Ur(n,n===s?u:0),g=n.callbackNode,u===0||n===s&&Mn===2||n.cancelPendingCommit!==null)return g!==null&&g!==null&&Ge(g),n.callbackNode=null,n.callbackPriority=0;if(!(u&3)||Zn(n,u)){if(s=u&-u,s===n.callbackPriority)return s;switch(g!==null&&Ge(g),ar(u)){case 2:case 8:u=yn;break;case 32:u=Ln;break;case 268435456:u=Ls;break;default:u=Ln}return g=Qp.bind(null,n),u=_t(u,g),n.callbackPriority=s,n.callbackNode=u,s}return g!==null&&g!==null&&Ge(g),n.callbackPriority=2,n.callbackNode=null,2}function Qp(n,s){var u=n.callbackNode;if(Bl()&&n.callbackNode!==u)return null;var g=nn;return g=Ur(n,n===Dn?g:0),g===0?null:(kp(n,g,s),Xp(n,It()),n.callbackNode!=null&&n.callbackNode===u?Qp.bind(null,n):null)}function Wp(n,s){if(Bl())return null;kp(n,s,!0)}function dv(n){bv(function(){Qn&6?_t(en,n):n()})}function x0(){return Qo===0&&(Qo=Vn()),Qo}function Kp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ai(""+n)}function Zp(n,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,n.id&&u.setAttribute("form",n.id),s.parentNode.insertBefore(u,s),n=new FormData(n),u.parentNode.removeChild(u),n}function gv(n,s,u,g,E){if(s==="submit"&&u&&u.stateNode===E){var A=Kp((E[kn]||null).action),M=g.submitter;M&&(s=(s=M[kn]||null)?Kp(s.formAction):M.getAttribute("formAction"),s!==null&&(A=s,M=null));var j=new os("action","action",null,g,E);n.push({event:j,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Qo!==0){var Q=M?Zp(E,M):new FormData(E);Td(u,{pending:!0,data:Q,method:E.method,action:A},null,Q)}}else typeof A=="function"&&(j.preventDefault(),Q=M?Zp(E,M):new FormData(E),Td(u,{pending:!0,data:Q,method:E.method,action:A},A,Q))},currentTarget:E}]})}}for(var y0=0;y0<Gu.length;y0++){var w0=Gu[y0],mv=w0.toLowerCase(),pv=w0[0].toUpperCase()+w0.slice(1);Gi(mv,"on"+pv)}Gi(Gr,"onAnimationEnd"),Gi(Di,"onAnimationIteration"),Gi(qr,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(pn,"onTransitionRun"),Gi(vr,"onTransitionStart"),Gi(di,"onTransitionCancel"),Gi(sa,"onTransitionEnd"),Ft("onMouseEnter",["mouseout","mouseover"]),Ft("onMouseLeave",["mouseout","mouseover"]),Ft("onPointerEnter",["pointerout","pointerover"]),Ft("onPointerLeave",["pointerout","pointerover"]),bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function $p(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var g=n[u],E=g.event;g=g.listeners;e:{var A=void 0;if(s)for(var M=g.length-1;0<=M;M--){var j=g[M],Q=j.instance,ae=j.currentTarget;if(j=j.listener,Q!==A&&E.isPropagationStopped())break e;A=j,E.currentTarget=ae;try{A(E)}catch(be){uh(be)}E.currentTarget=null,A=Q}else for(M=0;M<g.length;M++){if(j=g[M],Q=j.instance,ae=j.currentTarget,j=j.listener,Q!==A&&E.isPropagationStopped())break e;A=j,E.currentTarget=ae;try{A(E)}catch(be){uh(be)}E.currentTarget=null,A=Q}}}}function $t(n,s){var u=s[ti];u===void 0&&(u=s[ti]=new Set);var g=n+"__bubble";u.has(g)||(Jp(s,n,2,!1),u.add(g))}function E0(n,s,u){var g=0;s&&(g|=4),Jp(u,n,g,s)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function _0(n){if(!n[Ch]){n[Ch]=!0,Ct.forEach(function(u){u!=="selectionchange"&&(xv.has(u)||E0(u,!1,n),E0(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ch]||(s[Ch]=!0,E0("selectionchange",!1,s))}}function Jp(n,s,u,g){switch(v2(s)){case 2:var E=Hv;break;case 8:E=Gv;break;default:E=L0}u=E.bind(null,s,u,n),E=void 0,!pt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(E=!0),g?E!==void 0?n.addEventListener(s,u,{capture:!0,passive:E}):n.addEventListener(s,u,!0):E!==void 0?n.addEventListener(s,u,{passive:E}):n.addEventListener(s,u,!1)}function v0(n,s,u,g,E){var A=g;if(!(s&1)&&!(s&2)&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var j=g.stateNode.containerInfo;if(j===E||j.nodeType===8&&j.parentNode===E)break;if(M===4)for(M=g.return;M!==null;){var Q=M.tag;if((Q===3||Q===4)&&(Q=M.stateNode.containerInfo,Q===E||Q.nodeType===8&&Q.parentNode===E))return;M=M.return}for(;j!==null;){if(M=dn(j),M===null)return;if(Q=M.tag,Q===5||Q===6||Q===26||Q===27){g=A=M;continue e}j=j.parentNode}}g=g.return}ft(function(){var ae=A,be=Ps(u),Me=[];e:{var pe=aa.get(n);if(pe!==void 0){var ve=os,ot=n;switch(n){case"keypress":if(as(u)===0)break e;case"keydown":case"keyup":ve=Vs;break;case"focusin":ot="focus",ve=vs;break;case"focusout":ot="blur",ve=vs;break;case"beforeblur":case"afterblur":ve=vs;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Ti;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=on;break;case Gr:case Di:case qr:ve=ja;break;case sa:ve=ml;break;case"scroll":case"scrollend":ve=_r;break;case"wheel":ve=Ii;break;case"copy":case"cut":case"paste":ve=Tt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Fs;break;case"toggle":case"beforetoggle":ve=pl}var Dt=(s&4)!==0,nr=!Dt&&(n==="scroll"||n==="scrollend"),le=Dt?pe!==null?pe+"Capture":null:pe;Dt=[];for(var se=ae,ge;se!==null;){var Ce=se;if(ge=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||ge===null||le===null||(Ce=ta(se,le),Ce!=null&&Dt.push(Kc(se,Ce,ge))),nr)break;se=se.return}0<Dt.length&&(pe=new ve(pe,ot,null,u,be),Me.push({event:pe,listeners:Dt}))}}if(!(s&7)){e:{if(pe=n==="mouseover"||n==="pointerover",ve=n==="mouseout"||n==="pointerout",pe&&u!==zr&&(ot=u.relatedTarget||u.fromElement)&&(dn(ot)||ot[Nn]))break e;if((ve||pe)&&(pe=be.window===be?be:(pe=be.ownerDocument)?pe.defaultView||pe.parentWindow:window,ve?(ot=u.relatedTarget||u.toElement,ve=ae,ot=ot?dn(ot):null,ot!==null&&(nr=Qe(ot),Dt=ot.tag,ot!==nr||Dt!==5&&Dt!==27&&Dt!==6)&&(ot=null)):(ve=null,ot=ae),ve!==ot)){if(Dt=Ti,Ce="onMouseLeave",le="onMouseEnter",se="mouse",(n==="pointerout"||n==="pointerover")&&(Dt=Fs,Ce="onPointerLeave",le="onPointerEnter",se="pointer"),nr=ve==null?pe:Z(ve),ge=ot==null?pe:Z(ot),pe=new Dt(Ce,se+"leave",ve,u,be),pe.target=nr,pe.relatedTarget=ge,Ce=null,dn(be)===ae&&(Dt=new Dt(le,se+"enter",ot,u,be),Dt.target=ge,Dt.relatedTarget=nr,Ce=Dt),nr=Ce,ve&&ot)t:{for(Dt=ve,le=ot,se=0,ge=Dt;ge;ge=Ul(ge))se++;for(ge=0,Ce=le;Ce;Ce=Ul(Ce))ge++;for(;0<se-ge;)Dt=Ul(Dt),se--;for(;0<ge-se;)le=Ul(le),ge--;for(;se--;){if(Dt===le||le!==null&&Dt===le.alternate)break t;Dt=Ul(Dt),le=Ul(le)}Dt=null}else Dt=null;ve!==null&&e2(Me,pe,ve,Dt,!1),ot!==null&&nr!==null&&e2(Me,nr,ot,Dt,!0)}}e:{if(pe=ae?Z(ae):window,ve=pe.nodeName&&pe.nodeName.toLowerCase(),ve==="select"||ve==="input"&&pe.type==="file")var rt=Hu;else if(Hn(pe))if(_c)rt=o;else{rt=O;var Vt=yl}else ve=pe.nodeName,!ve||ve.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?ae&&mn(ae.elementType)&&(rt=Hu):rt=r;if(rt&&(rt=rt(n,ae))){Jn(Me,rt,u,be);break e}Vt&&Vt(n,pe,ae),n==="focusout"&&ae&&pe.type==="number"&&ae.memoizedProps.value!=null&&H(pe,"number",pe.value)}switch(Vt=ae?Z(ae):window,n){case"focusin":(Hn(Vt)||Vt.contentEditable==="true")&&(q=Vt,ne=ae,re=null);break;case"focusout":re=ne=q=null;break;case"mousedown":he=!0;break;case"contextmenu":case"mouseup":case"dragend":he=!1,we(Me,u,be);break;case"selectionchange":if(B)break;case"keydown":case"keyup":we(Me,u,be)}var ht;if(Ni)e:{switch(n){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else Yt?ye(n,u)&&(Et="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Et="onCompositionStart");Et&&(D&&u.locale!=="ko"&&(Yt||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Yt&&(ht=Fi()):(rs=be,is="value"in rs?rs.value:rs.textContent,Yt=!0)),Vt=Th(ae,Et),0<Vt.length&&(Et=new js(Et,n,null,u,be),Me.push({event:Et,listeners:Vt}),ht?Et.data=ht:(ht=Xe(u),ht!==null&&(Et.data=ht)))),(ht=I?jn(n,u):Xt(n,u))&&(Et=Th(ae,"onBeforeInput"),0<Et.length&&(Vt=new js("onBeforeInput","beforeinput",null,u,be),Me.push({event:Vt,listeners:Et}),Vt.data=ht)),gv(Me,n,ae,u,be)}$p(Me,s)})}function Kc(n,s,u){return{instance:n,listener:s,currentTarget:u}}function Th(n,s){for(var u=s+"Capture",g=[];n!==null;){var E=n,A=E.stateNode;E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=ta(n,u),E!=null&&g.unshift(Kc(n,E,A)),E=ta(n,s),E!=null&&g.push(Kc(n,E,A))),n=n.return}return g}function Ul(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function e2(n,s,u,g,E){for(var A=s._reactName,M=[];u!==null&&u!==g;){var j=u,Q=j.alternate,ae=j.stateNode;if(j=j.tag,Q!==null&&Q===g)break;j!==5&&j!==26&&j!==27||ae===null||(Q=ae,E?(ae=ta(u,A),ae!=null&&M.unshift(Kc(u,ae,Q))):E||(ae=ta(u,A),ae!=null&&M.push(Kc(u,ae,Q)))),u=u.return}M.length!==0&&n.push({event:s,listeners:M})}var yv=/\r\n?/g,wv=/\u0000|\uFFFD/g;function t2(n){return(typeof n=="string"?n:""+n).replace(yv,`
`).replace(wv,"")}function n2(n,s){return s=t2(s),t2(n)===s}function Sh(){}function bn(n,s,u,g,E,A){switch(u){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||bi(n,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&bi(n,""+g);break;case"className":ns(n,"class",g);break;case"tabIndex":ns(n,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(n,u,g);break;case"style":ct(n,g,A);break;case"data":if(s!=="object"){ns(n,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||u!=="href")){n.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=Ai(""+g),n.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(u==="formAction"?(s!=="input"&&bn(n,s,"name",E.name,E,null),bn(n,s,"formEncType",E.formEncType,E,null),bn(n,s,"formMethod",E.formMethod,E,null),bn(n,s,"formTarget",E.formTarget,E,null)):(bn(n,s,"encType",E.encType,E,null),bn(n,s,"method",E.method,E,null),bn(n,s,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=Ai(""+g),n.setAttribute(u,g);break;case"onClick":g!=null&&(n.onclick=Sh);break;case"onScroll":g!=null&&$t("scroll",n);break;case"onScrollEnd":g!=null&&$t("scrollend",n);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(u=g.__html,u!=null){if(E.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"multiple":n.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":n.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){n.removeAttribute("xlink:href");break}u=Ai(""+g),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""+g):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":g===!0?n.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,g):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?n.setAttribute(u,g):n.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?n.removeAttribute(u):n.setAttribute(u,g);break;case"popover":$t("beforetoggle",n),$t("toggle",n),ts(n,"popover",g);break;case"xlinkActuate":ni(n,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":ni(n,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":ni(n,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":ni(n,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":ni(n,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":ni(n,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":ni(n,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":ni(n,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":ni(n,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ts(n,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=hl.get(u)||u,ts(n,u,g))}}function b0(n,s,u,g,E,A){switch(u){case"style":ct(n,g,A);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(u=g.__html,u!=null){if(E.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"children":typeof g=="string"?bi(n,g):(typeof g=="number"||typeof g=="bigint")&&bi(n,""+g);break;case"onScroll":g!=null&&$t("scroll",n);break;case"onScrollEnd":g!=null&&$t("scrollend",n);break;case"onClick":g!=null&&(n.onclick=Sh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!me.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(E=u.endsWith("Capture"),s=u.slice(2,E?u.length-7:void 0),A=n[kn]||null,A=A!=null?A[u]:null,typeof A=="function"&&n.removeEventListener(s,A,E),typeof g=="function")){typeof A!="function"&&A!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(s,g,E);break e}u in n?n[u]=g:g===!0?n.setAttribute(u,""):ts(n,u,g)}}}function Qr(n,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",n),$t("load",n);var g=!1,E=!1,A;for(A in u)if(u.hasOwnProperty(A)){var M=u[A];if(M!=null)switch(A){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:bn(n,s,A,M,u,null)}}E&&bn(n,s,"srcSet",u.srcSet,u,null),g&&bn(n,s,"src",u.src,u,null);return;case"input":$t("invalid",n);var j=A=M=E=null,Q=null,ae=null;for(g in u)if(u.hasOwnProperty(g)){var be=u[g];if(be!=null)switch(g){case"name":E=be;break;case"type":M=be;break;case"checked":Q=be;break;case"defaultChecked":ae=be;break;case"value":A=be;break;case"defaultValue":j=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(a(137,s));break;default:bn(n,s,g,be,u,null)}}ue(n,A,j,Q,ae,M,E,!1),gn(n);return;case"select":$t("invalid",n),g=M=A=null;for(E in u)if(u.hasOwnProperty(E)&&(j=u[E],j!=null))switch(E){case"value":A=j;break;case"defaultValue":M=j;break;case"multiple":g=j;default:bn(n,s,E,j,u,null)}s=A,u=M,n.multiple=!!g,s!=null?qe(n,!!g,s,!1):u!=null&&qe(n,!!g,u,!0);return;case"textarea":$t("invalid",n),A=E=g=null;for(M in u)if(u.hasOwnProperty(M)&&(j=u[M],j!=null))switch(M){case"value":g=j;break;case"defaultValue":E=j;break;case"children":A=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(91));break;default:bn(n,s,M,j,u,null)}or(n,g,E,A),gn(n);return;case"option":for(Q in u)if(u.hasOwnProperty(Q)&&(g=u[Q],g!=null))switch(Q){case"selected":n.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:bn(n,s,Q,g,u,null)}return;case"dialog":$t("cancel",n),$t("close",n);break;case"iframe":case"object":$t("load",n);break;case"video":case"audio":for(g=0;g<Wc.length;g++)$t(Wc[g],n);break;case"image":$t("error",n),$t("load",n);break;case"details":$t("toggle",n);break;case"embed":case"source":case"link":$t("error",n),$t("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in u)if(u.hasOwnProperty(ae)&&(g=u[ae],g!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:bn(n,s,ae,g,u,null)}return;default:if(mn(s)){for(be in u)u.hasOwnProperty(be)&&(g=u[be],g!==void 0&&b0(n,s,be,g,u,void 0));return}}for(j in u)u.hasOwnProperty(j)&&(g=u[j],g!=null&&bn(n,s,j,g,u,null))}function Ev(n,s,u,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,M=null,j=null,Q=null,ae=null,be=null;for(ve in u){var Me=u[ve];if(u.hasOwnProperty(ve)&&Me!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":Q=Me;default:g.hasOwnProperty(ve)||bn(n,s,ve,null,g,Me)}}for(var pe in g){var ve=g[pe];if(Me=u[pe],g.hasOwnProperty(pe)&&(ve!=null||Me!=null))switch(pe){case"type":A=ve;break;case"name":E=ve;break;case"checked":ae=ve;break;case"defaultChecked":be=ve;break;case"value":M=ve;break;case"defaultValue":j=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(a(137,s));break;default:ve!==Me&&bn(n,s,pe,ve,g,Me)}}Pn(n,M,j,Q,ae,be,A,E);return;case"select":ve=M=j=pe=null;for(A in u)if(Q=u[A],u.hasOwnProperty(A)&&Q!=null)switch(A){case"value":break;case"multiple":ve=Q;default:g.hasOwnProperty(A)||bn(n,s,A,null,g,Q)}for(E in g)if(A=g[E],Q=u[E],g.hasOwnProperty(E)&&(A!=null||Q!=null))switch(E){case"value":pe=A;break;case"defaultValue":j=A;break;case"multiple":M=A;default:A!==Q&&bn(n,s,E,A,g,Q)}s=j,u=M,g=ve,pe!=null?qe(n,!!u,pe,!1):!!g!=!!u&&(s!=null?qe(n,!!u,s,!0):qe(n,!!u,u?[]:"",!1));return;case"textarea":ve=pe=null;for(j in u)if(E=u[j],u.hasOwnProperty(j)&&E!=null&&!g.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:bn(n,s,j,null,g,E)}for(M in g)if(E=g[M],A=u[M],g.hasOwnProperty(M)&&(E!=null||A!=null))switch(M){case"value":pe=E;break;case"defaultValue":ve=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==A&&bn(n,s,M,E,g,A)}Rn(n,pe,ve);return;case"option":for(var ot in u)if(pe=u[ot],u.hasOwnProperty(ot)&&pe!=null&&!g.hasOwnProperty(ot))switch(ot){case"selected":n.selected=!1;break;default:bn(n,s,ot,null,g,pe)}for(Q in g)if(pe=g[Q],ve=u[Q],g.hasOwnProperty(Q)&&pe!==ve&&(pe!=null||ve!=null))switch(Q){case"selected":n.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:bn(n,s,Q,pe,g,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dt in u)pe=u[Dt],u.hasOwnProperty(Dt)&&pe!=null&&!g.hasOwnProperty(Dt)&&bn(n,s,Dt,null,g,pe);for(ae in g)if(pe=g[ae],ve=u[ae],g.hasOwnProperty(ae)&&pe!==ve&&(pe!=null||ve!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(137,s));break;default:bn(n,s,ae,pe,g,ve)}return;default:if(mn(s)){for(var nr in u)pe=u[nr],u.hasOwnProperty(nr)&&pe!==void 0&&!g.hasOwnProperty(nr)&&b0(n,s,nr,void 0,g,pe);for(be in g)pe=g[be],ve=u[be],!g.hasOwnProperty(be)||pe===ve||pe===void 0&&ve===void 0||b0(n,s,be,pe,g,ve);return}}for(var le in u)pe=u[le],u.hasOwnProperty(le)&&pe!=null&&!g.hasOwnProperty(le)&&bn(n,s,le,null,g,pe);for(Me in g)pe=g[Me],ve=u[Me],!g.hasOwnProperty(Me)||pe===ve||pe==null&&ve==null||bn(n,s,Me,pe,g,ve)}var A0=null,C0=null;function Ih(n){return n.nodeType===9?n:n.ownerDocument}function r2(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i2(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function T0(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var S0=null;function _v(){var n=window.event;return n&&n.type==="popstate"?n===S0?!1:(S0=n,!0):(S0=null,!1)}var s2=typeof setTimeout=="function"?setTimeout:void 0,vv=typeof clearTimeout=="function"?clearTimeout:void 0,a2=typeof Promise=="function"?Promise:void 0,bv=typeof queueMicrotask=="function"?queueMicrotask:typeof a2<"u"?function(n){return a2.resolve(null).then(n).catch(Av)}:s2;function Av(n){setTimeout(function(){throw n})}function I0(n,s){var u=s,g=0;do{var E=u.nextSibling;if(n.removeChild(u),E&&E.nodeType===8)if(u=E.data,u==="/$"){if(g===0){n.removeChild(E),iu(s);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=E}while(u);iu(s)}function N0(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":N0(u),ks(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function Cv(n,s,u,g){for(;n.nodeType===1;){var E=u;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(g){if(!n[_i])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(A=n.getAttribute("rel"),A==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(A!==E.rel||n.getAttribute("href")!==(E.href==null?null:E.href)||n.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||n.getAttribute("title")!==(E.title==null?null:E.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(A=n.getAttribute("src"),(A!==(E.src==null?null:E.src)||n.getAttribute("type")!==(E.type==null?null:E.type)||n.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&n.getAttribute("name")===A)return n}else return n;if(n=Ts(n.nextSibling),n===null)break}return null}function Tv(n,s,u){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=Ts(n.nextSibling),n===null))return null;return n}function Ts(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}function o2(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}function l2(n,s,u){switch(s=Ih(u),n){case"html":if(n=s.documentElement,!n)throw Error(a(452));return n;case"head":if(n=s.head,!n)throw Error(a(453));return n;case"body":if(n=s.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}var xs=new Map,c2=new Set;function Nh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var _a=ze.d;ze.d={f:Sv,r:Iv,D:Nv,C:Rv,L:Dv,m:Mv,X:Lv,S:Ov,M:kv};function Sv(){var n=_a.f(),s=_h();return n||s}function Iv(n){var s=En(n);s!==null&&s.tag===5&&s.type==="form"?Pm(s):_a.r(n)}var Vl=typeof document>"u"?null:document;function u2(n,s,u){var g=Vl;if(g&&typeof s=="string"&&s){var E=vt(s);E='link[rel="'+n+'"][href="'+E+'"]',typeof u=="string"&&(E+='[crossorigin="'+u+'"]'),c2.has(E)||(c2.add(E),n={rel:n,crossOrigin:u,href:s},g.querySelector(E)===null&&(s=g.createElement("link"),Qr(s,"link",n),Ye(s),g.head.appendChild(s)))}}function Nv(n){_a.D(n),u2("dns-prefetch",n,null)}function Rv(n,s){_a.C(n,s),u2("preconnect",n,s)}function Dv(n,s,u){_a.L(n,s,u);var g=Vl;if(g&&n&&s){var E='link[rel="preload"][as="'+vt(s)+'"]';s==="image"&&u&&u.imageSrcSet?(E+='[imagesrcset="'+vt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(E+='[imagesizes="'+vt(u.imageSizes)+'"]')):E+='[href="'+vt(n)+'"]';var A=E;switch(s){case"style":A=Fl(n);break;case"script":A=zl(n)}xs.has(A)||(n=G({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:n,as:s},u),xs.set(A,n),g.querySelector(E)!==null||s==="style"&&g.querySelector(Zc(A))||s==="script"&&g.querySelector($c(A))||(s=g.createElement("link"),Qr(s,"link",n),Ye(s),g.head.appendChild(s)))}}function Mv(n,s){_a.m(n,s);var u=Vl;if(u&&n){var g=s&&typeof s.as=="string"?s.as:"script",E='link[rel="modulepreload"][as="'+vt(g)+'"][href="'+vt(n)+'"]',A=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=zl(n)}if(!xs.has(A)&&(n=G({rel:"modulepreload",href:n},s),xs.set(A,n),u.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($c(A)))return}g=u.createElement("link"),Qr(g,"link",n),Ye(g),u.head.appendChild(g)}}}function Ov(n,s,u){_a.S(n,s,u);var g=Vl;if(g&&n){var E=Ee(g).hoistableStyles,A=Fl(n);s=s||"default";var M=E.get(A);if(!M){var j={loading:0,preload:null};if(M=g.querySelector(Zc(A)))j.loading=5;else{n=G({rel:"stylesheet",href:n,"data-precedence":s},u),(u=xs.get(A))&&R0(n,u);var Q=M=g.createElement("link");Ye(Q),Qr(Q,"link",n),Q._p=new Promise(function(ae,be){Q.onload=ae,Q.onerror=be}),Q.addEventListener("load",function(){j.loading|=1}),Q.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Rh(M,s,g)}M={type:"stylesheet",instance:M,count:1,state:j},E.set(A,M)}}}function Lv(n,s){_a.X(n,s);var u=Vl;if(u&&n){var g=Ee(u).hoistableScripts,E=zl(n),A=g.get(E);A||(A=u.querySelector($c(E)),A||(n=G({src:n,async:!0},s),(s=xs.get(E))&&D0(n,s),A=u.createElement("script"),Ye(A),Qr(A,"link",n),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(E,A))}}function kv(n,s){_a.M(n,s);var u=Vl;if(u&&n){var g=Ee(u).hoistableScripts,E=zl(n),A=g.get(E);A||(A=u.querySelector($c(E)),A||(n=G({src:n,async:!0,type:"module"},s),(s=xs.get(E))&&D0(n,s),A=u.createElement("script"),Ye(A),Qr(A,"link",n),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(E,A))}}function h2(n,s,u,g){var E=(E=xt.current)?Nh(E):null;if(!E)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Fl(u.href),u=Ee(E).hoistableStyles,g=u.get(s),g||(g={type:"style",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=Fl(u.href);var A=Ee(E).hoistableStyles,M=A.get(n);if(M||(E=E.ownerDocument||E,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(n,M),(A=E.querySelector(Zc(n)))&&!A._p&&(M.instance=A,M.state.loading=5),xs.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},xs.set(n,u),A||Pv(E,n,u,M.state))),s&&g===null)throw Error(a(528,""));return M}if(s&&g!==null)throw Error(a(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=zl(u),u=Ee(E).hoistableScripts,g=u.get(s),g||(g={type:"script",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Fl(n){return'href="'+vt(n)+'"'}function Zc(n){return'link[rel="stylesheet"]['+n+"]"}function f2(n){return G({},n,{"data-precedence":n.precedence,precedence:null})}function Pv(n,s,u,g){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=n.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),Qr(s,"link",u),Ye(s),n.head.appendChild(s))}function zl(n){return'[src="'+vt(n)+'"]'}function $c(n){return"script[async]"+n}function d2(n,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var g=n.querySelector('style[data-href~="'+vt(u.href)+'"]');if(g)return s.instance=g,Ye(g),g;var E=G({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(n.ownerDocument||n).createElement("style"),Ye(g),Qr(g,"style",E),Rh(g,u.precedence,n),s.instance=g;case"stylesheet":E=Fl(u.href);var A=n.querySelector(Zc(E));if(A)return s.state.loading|=4,s.instance=A,Ye(A),A;g=f2(u),(E=xs.get(E))&&R0(g,E),A=(n.ownerDocument||n).createElement("link"),Ye(A);var M=A;return M._p=new Promise(function(j,Q){M.onload=j,M.onerror=Q}),Qr(A,"link",g),s.state.loading|=4,Rh(A,u.precedence,n),s.instance=A;case"script":return A=zl(u.src),(E=n.querySelector($c(A)))?(s.instance=E,Ye(E),E):(g=u,(E=xs.get(A))&&(g=G({},u),D0(g,E)),n=n.ownerDocument||n,E=n.createElement("script"),Ye(E),Qr(E,"link",g),n.head.appendChild(E),s.instance=E);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&!(s.state.loading&4)&&(g=s.instance,s.state.loading|=4,Rh(g,u.precedence,n));return s.instance}function Rh(n,s,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,A=E,M=0;M<g.length;M++){var j=g[M];if(j.dataset.precedence===s)A=j;else if(A!==E)break}A?A.parentNode.insertBefore(n,A.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(n,s.firstChild))}function R0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function D0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Dh=null;function g2(n,s,u){if(Dh===null){var g=new Map,E=Dh=new Map;E.set(u,g)}else E=Dh,g=E.get(u),g||(g=new Map,E.set(u,g));if(g.has(n))return g;for(g.set(n,null),u=u.getElementsByTagName(n),E=0;E<u.length;E++){var A=u[E];if(!(A[_i]||A[wn]||n==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var M=A.getAttribute(s)||"";M=n+M;var j=g.get(M);j?j.push(A):g.set(M,[A])}}return g}function m2(n,s,u){n=n.ownerDocument||n,n.head.insertBefore(u,s==="title"?n.querySelector("head > title"):null)}function Bv(n,s,u){if(u===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function p2(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var Jc=null;function jv(){}function Uv(n,s,u){if(Jc===null)throw Error(a(475));var g=Jc;if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&!(s.state.loading&4)){if(s.instance===null){var E=Fl(u.href),A=n.querySelector(Zc(E));if(A){n=A._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(g.count++,g=Mh.bind(g),n.then(g,g)),s.state.loading|=4,s.instance=A,Ye(A);return}A=n.ownerDocument||n,u=f2(u),(E=xs.get(E))&&R0(u,E),A=A.createElement("link"),Ye(A);var M=A;M._p=new Promise(function(j,Q){M.onload=j,M.onerror=Q}),Qr(A,"link",u),s.instance=A}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(s,n),(n=s.state.preload)&&!(s.state.loading&3)&&(g.count++,s=Mh.bind(g),n.addEventListener("load",s),n.addEventListener("error",s))}}function Vv(){if(Jc===null)throw Error(a(475));var n=Jc;return n.stylesheets&&n.count===0&&M0(n,n.stylesheets),0<n.count?function(s){var u=setTimeout(function(){if(n.stylesheets&&M0(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(u)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)M0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Oh=null;function M0(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Oh=new Map,s.forEach(Fv,n),Oh=null,Mh.call(n))}function Fv(n,s){if(!(s.state.loading&4)){var u=Oh.get(n);if(u)var g=u.get(null);else{u=new Map,Oh.set(n,u);for(var E=n.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var M=E[A];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),g=M)}g&&u.set(null,g)}E=s.instance,M=E.getAttribute("data-precedence"),A=u.get(M)||g,A===g&&u.set(null,E),u.set(M,E),this.count++,g=Mh.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),A?A.parentNode.insertBefore(E,A.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(E,n.firstChild)),s.state.loading|=4}}var eu={$$typeof:F,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function zv(n,s,u,g,E,A,M,j){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.hiddenUpdates=ji(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function x2(n,s,u,g,E,A,M,j,Q,ae,be,Me){return n=new zv(n,s,u,M,j,Q,ae,Me),s=1,A===!0&&(s|=24),A=ms(3,null,null,s),n.current=A,A.stateNode=n,s=ud(),s.refCount++,n.pooledCache=s,s.refCount++,A.memoizedState={element:g,isDehydrated:u,cache:s},Gd(A),n}function y2(n){return n?(n=El,n):El}function w2(n,s,u,g,E,A){E=y2(E),g.context===null?g.context=E:g.pendingContext=E,g=Qa(s),g.payload={element:u},A=A===void 0?null:A,A!==null&&(g.callback=A),u=Wa(n,g,s),u!==null&&(mi(u,n,s),Bc(u,n,s))}function E2(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function O0(n,s){E2(n,s),(n=n.alternate)&&E2(n,s)}function _2(n){if(n.tag===13){var s=Fa(n,67108864);s!==null&&mi(s,n,67108864),O0(n,67108864)}}var Lh=!0;function Hv(n,s,u,g){var E=k.T;k.T=null;var A=ze.p;try{ze.p=2,L0(n,s,u,g)}finally{ze.p=A,k.T=E}}function Gv(n,s,u,g){var E=k.T;k.T=null;var A=ze.p;try{ze.p=8,L0(n,s,u,g)}finally{ze.p=A,k.T=E}}function L0(n,s,u,g){if(Lh){var E=k0(g);if(E===null)v0(n,s,g,kh,u),b2(n,g);else if(Yv(E,n,s,u,g))g.stopPropagation();else if(b2(n,g),s&4&&-1<qv.indexOf(n)){for(;E!==null;){var A=En(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var M=ei(A.pendingLanes);if(M!==0){var j=A;for(j.pendingLanes|=2,j.entangledLanes|=2;M;){var Q=1<<31-Pt(M);j.entanglements[1]|=Q,M&=~Q}Ys(A),!(Qn&6)&&(yh=It()+500,Qc(0))}}break;case 13:j=Fa(A,2),j!==null&&mi(j,A,2),_h(),O0(A,2)}if(A=k0(g),A===null&&v0(n,s,g,kh,u),A===E)break;E=A}E!==null&&g.stopPropagation()}else v0(n,s,g,null,u)}}function k0(n){return n=Ps(n),P0(n)}var kh=null;function P0(n){if(kh=null,n=dn(n),n!==null){var s=Qe(n);if(s===null)n=null;else{var u=s.tag;if(u===13){if(n=lt(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return kh=n,null}function v2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xi()){case en:return 2;case yn:return 8;case Ln:case Kn:return 32;case Ls:return 268435456;default:return 32}default:return 32}}var B0=!1,no=null,ro=null,io=null,tu=new Map,nu=new Map,so=[],qv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b2(n,s){switch(n){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":tu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(s.pointerId)}}function ru(n,s,u,g,E,A){return n===null||n.nativeEvent!==A?(n={blockedOn:s,domEventName:u,eventSystemFlags:g,nativeEvent:A,targetContainers:[E]},s!==null&&(s=En(s),s!==null&&_2(s)),n):(n.eventSystemFlags|=g,s=n.targetContainers,E!==null&&s.indexOf(E)===-1&&s.push(E),n)}function Yv(n,s,u,g,E){switch(s){case"focusin":return no=ru(no,n,s,u,g,E),!0;case"dragenter":return ro=ru(ro,n,s,u,g,E),!0;case"mouseover":return io=ru(io,n,s,u,g,E),!0;case"pointerover":var A=E.pointerId;return tu.set(A,ru(tu.get(A)||null,n,s,u,g,E)),!0;case"gotpointercapture":return A=E.pointerId,nu.set(A,ru(nu.get(A)||null,n,s,u,g,E)),!0}return!1}function A2(n){var s=dn(n.target);if(s!==null){var u=Qe(s);if(u!==null){if(s=u.tag,s===13){if(s=lt(u),s!==null){n.blockedOn=s,Yn(n.priority,function(){if(u.tag===13){var g=Qi(),E=Fa(u,g);E!==null&&mi(E,u,g),O0(u,g)}});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ph(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=k0(n.nativeEvent);if(u===null){u=n.nativeEvent;var g=new u.constructor(u.type,u);zr=g,u.target.dispatchEvent(g),zr=null}else return s=En(u),s!==null&&_2(s),n.blockedOn=u,!1;s.shift()}return!0}function C2(n,s,u){Ph(n)&&u.delete(s)}function Xv(){B0=!1,no!==null&&Ph(no)&&(no=null),ro!==null&&Ph(ro)&&(ro=null),io!==null&&Ph(io)&&(io=null),tu.forEach(C2),nu.forEach(C2)}function Bh(n,s){n.blockedOn===s&&(n.blockedOn=null,B0||(B0=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Xv)))}var jh=null;function T2(n){jh!==n&&(jh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){jh===n&&(jh=null);for(var s=0;s<n.length;s+=3){var u=n[s],g=n[s+1],E=n[s+2];if(typeof g!="function"){if(P0(g||u)===null)continue;break}var A=En(u);A!==null&&(n.splice(s,3),s-=3,Td(A,{pending:!0,data:E,method:u.method,action:g},g,E))}}))}function iu(n){function s(Q){return Bh(Q,n)}no!==null&&Bh(no,n),ro!==null&&Bh(ro,n),io!==null&&Bh(io,n),tu.forEach(s),nu.forEach(s);for(var u=0;u<so.length;u++){var g=so[u];g.blockedOn===n&&(g.blockedOn=null)}for(;0<so.length&&(u=so[0],u.blockedOn===null);)A2(u),u.blockedOn===null&&so.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var E=u[g],A=u[g+1],M=E[kn]||null;if(typeof A=="function")M||T2(u);else if(M){var j=null;if(A&&A.hasAttribute("formAction")){if(E=A,M=A[kn]||null)j=M.formAction;else if(P0(E)!==null)continue}else j=M.action;typeof j=="function"?u[g+1]=j:(u.splice(g,3),g-=3),T2(u)}}}function j0(n){this._internalRoot=n}Uh.prototype.render=j0.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(a(409));var u=s.current,g=Qi();w2(u,g,n,s,null,null)},Uh.prototype.unmount=j0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;n.tag===0&&Bl(),w2(n.current,2,null,n,null,null),_h(),s[Nn]=null}};function Uh(n){this._internalRoot=n}Uh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ei();n={blockedOn:null,target:n,priority:s};for(var u=0;u<so.length&&s!==0&&s<so[u].priority;u++);so.splice(u,0,n),u===0&&A2(n)}};var S2=e.version;if(S2!=="19.0.0")throw Error(a(527,S2,"19.0.0"));ze.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=Ne(s),n=n!==null?Pe(n):null,n=n===null?null:n.stateNode,n};var Qv={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:k,findFiberByHostInstance:dn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{un=Vh.inject(Qv),Le=Vh}catch{}}return au.createRoot=function(n,s){if(!c(n))throw Error(a(299));var u=!1,g="",E=Gm,A=qm,M=Ym,j=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(E=s.onUncaughtError),s.onCaughtError!==void 0&&(A=s.onCaughtError),s.onRecoverableError!==void 0&&(M=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(j=s.unstable_transitionCallbacks)),s=x2(n,1,!1,null,null,u,g,E,A,M,j,null),n[Nn]=s.current,_0(n.nodeType===8?n.parentNode:n),new j0(s)},au.hydrateRoot=function(n,s,u){if(!c(n))throw Error(a(299));var g=!1,E="",A=Gm,M=qm,j=Ym,Q=null,ae=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(E=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(j=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Q=u.unstable_transitionCallbacks),u.formState!==void 0&&(ae=u.formState)),s=x2(n,1,!0,s,u??null,g,E,A,M,j,Q,ae),s.context=y2(null),u=s.current,g=Qi(),E=Qa(g),E.callback=null,Wa(u,E,g),s.current.lanes=g,tn(s,g),Ys(s),n[Nn]=s.current,_0(n),new Uh(s)},au.version="19.0.0",au}var B2;function sb(){if(B2)return F0.exports;B2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),F0.exports=ib(),F0.exports}var ab=sb();const ob=P1(ab);var ou={},j2;function lb(){if(j2)return ou;j2=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.parse=y,ou.serialize=w;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,c=Object.prototype.toString,f=(()=>{const P=function(){};return P.prototype=Object.create(null),P})();function y(P,F){const Y=new f,ee=P.length;if(ee<2)return Y;const W=(F==null?void 0:F.decode)||S;let de=0;do{const fe=P.indexOf("=",de);if(fe===-1)break;const ie=P.indexOf(";",de),_e=ie===-1?ee:ie;if(fe>_e){de=P.lastIndexOf(";",fe-1)+1;continue}const Be=b(P,de,fe),ke=_(P,fe,Be),z=P.slice(Be,ke);if(Y[z]===void 0){let V=b(P,fe+1,_e),k=_(P,_e,V);const G=W(P.slice(V,k));Y[z]=G}de=_e+1}while(de<ee);return Y}function b(P,F,Y){do{const ee=P.charCodeAt(F);if(ee!==32&&ee!==9)return F}while(++F<Y);return Y}function _(P,F,Y){for(;F>Y;){const ee=P.charCodeAt(--F);if(ee!==32&&ee!==9)return F+1}return Y}function w(P,F,Y){const ee=(Y==null?void 0:Y.encode)||encodeURIComponent;if(!i.test(P))throw new TypeError(`argument name is invalid: ${P}`);const W=ee(F);if(!e.test(W))throw new TypeError(`argument val is invalid: ${F}`);let de=P+"="+W;if(!Y)return de;if(Y.maxAge!==void 0){if(!Number.isInteger(Y.maxAge))throw new TypeError(`option maxAge is invalid: ${Y.maxAge}`);de+="; Max-Age="+Y.maxAge}if(Y.domain){if(!t.test(Y.domain))throw new TypeError(`option domain is invalid: ${Y.domain}`);de+="; Domain="+Y.domain}if(Y.path){if(!a.test(Y.path))throw new TypeError(`option path is invalid: ${Y.path}`);de+="; Path="+Y.path}if(Y.expires){if(!R(Y.expires)||!Number.isFinite(Y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${Y.expires}`);de+="; Expires="+Y.expires.toUTCString()}if(Y.httpOnly&&(de+="; HttpOnly"),Y.secure&&(de+="; Secure"),Y.partitioned&&(de+="; Partitioned"),Y.priority)switch(typeof Y.priority=="string"?Y.priority.toLowerCase():void 0){case"low":de+="; Priority=Low";break;case"medium":de+="; Priority=Medium";break;case"high":de+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${Y.priority}`)}if(Y.sameSite)switch(typeof Y.sameSite=="string"?Y.sameSite.toLowerCase():Y.sameSite){case!0:case"strict":de+="; SameSite=Strict";break;case"lax":de+="; SameSite=Lax";break;case"none":de+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${Y.sameSite}`)}return de}function S(P){if(P.indexOf("%")===-1)return P;try{return decodeURIComponent(P)}catch{return P}}function R(P){return c.call(P)==="[object Date]"}return ou}lb();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var U2="popstate";function cb(i={}){function e(c,f){let{pathname:y="/",search:b="",hash:_=""}=il(c.location.hash.substring(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),s1("",{pathname:y,search:b,hash:_},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function t(c,f){let y=c.document.querySelector("base"),b="";if(y&&y.getAttribute("href")){let _=c.location.href,w=_.indexOf("#");b=w===-1?_:_.slice(0,w)}return b+"#"+(typeof f=="string"?f:Eu(f))}function a(c,f){Ji(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return hb(e,t,a,i)}function Gn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Ji(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ub(){return Math.random().toString(36).substring(2,10)}function V2(i,e){return{usr:i.state,key:i.key,idx:e}}function s1(i,e,t=null,a){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?il(e):e,state:t,key:e&&e.key||a||ub()}}function Eu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function il(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let a=i.indexOf("?");a>=0&&(e.search=i.substring(a),i=i.substring(0,a)),i&&(e.pathname=i)}return e}function hb(i,e,t,a={}){let{window:c=document.defaultView,v5Compat:f=!1}=a,y=c.history,b="POP",_=null,w=S();w==null&&(w=0,y.replaceState({...y.state,idx:w},""));function S(){return(y.state||{idx:null}).idx}function R(){b="POP";let W=S(),de=W==null?null:W-w;w=W,_&&_({action:b,location:ee.location,delta:de})}function P(W,de){b="PUSH";let fe=s1(ee.location,W,de);t&&t(fe,W),w=S()+1;let ie=V2(fe,w),_e=ee.createHref(fe);try{y.pushState(ie,"",_e)}catch(Be){if(Be instanceof DOMException&&Be.name==="DataCloneError")throw Be;c.location.assign(_e)}f&&_&&_({action:b,location:ee.location,delta:1})}function F(W,de){b="REPLACE";let fe=s1(ee.location,W,de);t&&t(fe,W),w=S();let ie=V2(fe,w),_e=ee.createHref(fe);y.replaceState(ie,"",_e),f&&_&&_({action:b,location:ee.location,delta:0})}function Y(W){let de=c.location.origin!=="null"?c.location.origin:c.location.href,fe=typeof W=="string"?W:Eu(W);return fe=fe.replace(/ $/,"%20"),Gn(de,`No window.location.(origin|href) available to create URL for href: ${fe}`),new URL(fe,de)}let ee={get action(){return b},get location(){return i(c,y)},listen(W){if(_)throw new Error("A history only accepts one active listener");return c.addEventListener(U2,R),_=W,()=>{c.removeEventListener(U2,R),_=null}},createHref(W){return e(c,W)},createURL:Y,encodeLocation(W){let de=Y(W);return{pathname:de.pathname,search:de.search,hash:de.hash}},push:P,replace:F,go(W){return y.go(W)}};return ee}function ky(i,e,t="/"){return fb(i,e,t,!1)}function fb(i,e,t,a){let c=typeof e=="string"?il(e):e,f=wo(c.pathname||"/",t);if(f==null)return null;let y=Py(i);db(y);let b=null;for(let _=0;b==null&&_<y.length;++_){let w=Ab(f);b=vb(y[_],w,a)}return b}function Py(i,e=[],t=[],a=""){let c=(f,y,b)=>{let _={relativePath:b===void 0?f.path||"":b,caseSensitive:f.caseSensitive===!0,childrenIndex:y,route:f};_.relativePath.startsWith("/")&&(Gn(_.relativePath.startsWith(a),`Absolute route path "${_.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(a.length));let w=Ia([a,_.relativePath]),S=t.concat(_);f.children&&f.children.length>0&&(Gn(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Py(f.children,e,S,w)),!(f.path==null&&!f.index)&&e.push({path:w,score:Eb(w,f.index),routesMeta:S})};return i.forEach((f,y)=>{var b;if(f.path===""||!((b=f.path)!=null&&b.includes("?")))c(f,y);else for(let _ of By(f.path))c(f,y,_)}),e}function By(i){let e=i.split("/");if(e.length===0)return[];let[t,...a]=e,c=t.endsWith("?"),f=t.replace(/\?$/,"");if(a.length===0)return c?[f,""]:[f];let y=By(a.join("/")),b=[];return b.push(...y.map(_=>_===""?f:[f,_].join("/"))),c&&b.push(...y),b.map(_=>i.startsWith("/")&&_===""?"/":_)}function db(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:_b(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var gb=/^:[\w-]+$/,mb=3,pb=2,xb=1,yb=10,wb=-2,F2=i=>i==="*";function Eb(i,e){let t=i.split("/"),a=t.length;return t.some(F2)&&(a+=wb),e&&(a+=pb),t.filter(c=>!F2(c)).reduce((c,f)=>c+(gb.test(f)?mb:f===""?xb:yb),a)}function _b(i,e){return i.length===e.length&&i.slice(0,-1).every((a,c)=>a===e[c])?i[i.length-1]-e[e.length-1]:0}function vb(i,e,t=!1){let{routesMeta:a}=i,c={},f="/",y=[];for(let b=0;b<a.length;++b){let _=a[b],w=b===a.length-1,S=f==="/"?e:e.slice(f.length)||"/",R=cf({path:_.relativePath,caseSensitive:_.caseSensitive,end:w},S),P=_.route;if(!R&&w&&t&&!a[a.length-1].route.index&&(R=cf({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},S)),!R)return null;Object.assign(c,R.params),y.push({params:c,pathname:Ia([f,R.pathname]),pathnameBase:Ib(Ia([f,R.pathnameBase])),route:P}),R.pathnameBase!=="/"&&(f=Ia([f,R.pathnameBase]))}return y}function cf(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,a]=bb(i.path,i.caseSensitive,i.end),c=e.match(t);if(!c)return null;let f=c[0],y=f.replace(/(.)\/+$/,"$1"),b=c.slice(1);return{params:a.reduce((w,{paramName:S,isOptional:R},P)=>{if(S==="*"){let Y=b[P]||"";y=f.slice(0,f.length-Y.length).replace(/(.)\/+$/,"$1")}const F=b[P];return R&&!F?w[S]=void 0:w[S]=(F||"").replace(/%2F/g,"/"),w},{}),pathname:f,pathnameBase:y,pattern:i}}function bb(i,e=!1,t=!0){Ji(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let a=[],c="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,b,_)=>(a.push({paramName:b,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(a.push({paramName:"*"}),c+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":i!==""&&i!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),a]}function Ab(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ji(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function wo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=i.charAt(t);return a&&a!=="/"?null:i.slice(t)||"/"}function Cb(i,e="/"){let{pathname:t,search:a="",hash:c=""}=typeof i=="string"?il(i):i;return{pathname:t?t.startsWith("/")?t:Tb(t,e):e,search:Nb(a),hash:Rb(c)}}function Tb(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function q0(i,e,t,a){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Sb(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function j1(i){let e=Sb(i);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function U1(i,e,t,a=!1){let c;typeof i=="string"?c=il(i):(c={...i},Gn(!c.pathname||!c.pathname.includes("?"),q0("?","pathname","search",c)),Gn(!c.pathname||!c.pathname.includes("#"),q0("#","pathname","hash",c)),Gn(!c.search||!c.search.includes("#"),q0("#","search","hash",c)));let f=i===""||c.pathname==="",y=f?"/":c.pathname,b;if(y==null)b=t;else{let R=e.length-1;if(!a&&y.startsWith("..")){let P=y.split("/");for(;P[0]==="..";)P.shift(),R-=1;c.pathname=P.join("/")}b=R>=0?e[R]:"/"}let _=Cb(c,b),w=y&&y!=="/"&&y.endsWith("/"),S=(f||y===".")&&t.endsWith("/");return!_.pathname.endsWith("/")&&(w||S)&&(_.pathname+="/"),_}var Ia=i=>i.join("/").replace(/\/\/+/g,"/"),Ib=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Nb=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Rb=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Db(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var jy=["POST","PUT","PATCH","DELETE"];new Set(jy);var Mb=["GET",...jy];new Set(Mb);var uc=J.createContext(null);uc.displayName="DataRouter";var Of=J.createContext(null);Of.displayName="DataRouterState";var Uy=J.createContext({isTransitioning:!1});Uy.displayName="ViewTransition";var Ob=J.createContext(new Map);Ob.displayName="Fetchers";var Lb=J.createContext(null);Lb.displayName="Await";var Ms=J.createContext(null);Ms.displayName="Navigation";var Ru=J.createContext(null);Ru.displayName="Location";var Os=J.createContext({outlet:null,matches:[],isDataRoute:!1});Os.displayName="Route";var V1=J.createContext(null);V1.displayName="RouteError";function kb(i,{relative:e}={}){Gn(hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=J.useContext(Ms),{hash:c,pathname:f,search:y}=Du(i,{relative:e}),b=f;return t!=="/"&&(b=f==="/"?t:Ia([t,f])),a.createHref({pathname:b,search:y,hash:c})}function hc(){return J.useContext(Ru)!=null}function La(){return Gn(hc(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(Ru).location}var Vy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fy(i){J.useContext(Ms).static||J.useLayoutEffect(i)}function ea(){let{isDataRoute:i}=J.useContext(Os);return i?Qb():Pb()}function Pb(){Gn(hc(),"useNavigate() may be used only in the context of a <Router> component.");let i=J.useContext(uc),{basename:e,navigator:t}=J.useContext(Ms),{matches:a}=J.useContext(Os),{pathname:c}=La(),f=JSON.stringify(j1(a)),y=J.useRef(!1);return Fy(()=>{y.current=!0}),J.useCallback((_,w={})=>{if(Ji(y.current,Vy),!y.current)return;if(typeof _=="number"){t.go(_);return}let S=U1(_,JSON.parse(f),c,w.relative==="path");i==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Ia([e,S.pathname])),(w.replace?t.replace:t.push)(S,w.state,w)},[e,t,f,c,i])}J.createContext(null);function F1(){let{matches:i}=J.useContext(Os),e=i[i.length-1];return e?e.params:{}}function Du(i,{relative:e}={}){let{matches:t}=J.useContext(Os),{pathname:a}=La(),c=JSON.stringify(j1(t));return J.useMemo(()=>U1(i,JSON.parse(c),a,e==="path"),[i,c,a,e])}function Bb(i,e){return zy(i,e)}function zy(i,e,t,a){var fe;Gn(hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c,static:f}=J.useContext(Ms),{matches:y}=J.useContext(Os),b=y[y.length-1],_=b?b.params:{},w=b?b.pathname:"/",S=b?b.pathnameBase:"/",R=b&&b.route;{let ie=R&&R.path||"";Hy(w,!R||ie.endsWith("*")||ie.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${ie}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ie}"> to <Route path="${ie==="/"?"*":`${ie}/*`}">.`)}let P=La(),F;if(e){let ie=typeof e=="string"?il(e):e;Gn(S==="/"||((fe=ie.pathname)==null?void 0:fe.startsWith(S)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${ie.pathname}" was given in the \`location\` prop.`),F=ie}else F=P;let Y=F.pathname||"/",ee=Y;if(S!=="/"){let ie=S.replace(/^\//,"").split("/");ee="/"+Y.replace(/^\//,"").split("/").slice(ie.length).join("/")}let W=!f&&t&&t.matches&&t.matches.length>0?t.matches:ky(i,{pathname:ee});Ji(R||W!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Ji(W==null||W[W.length-1].route.element!==void 0||W[W.length-1].route.Component!==void 0||W[W.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let de=zb(W&&W.map(ie=>Object.assign({},ie,{params:Object.assign({},_,ie.params),pathname:Ia([S,c.encodeLocation?c.encodeLocation(ie.pathname).pathname:ie.pathname]),pathnameBase:ie.pathnameBase==="/"?S:Ia([S,c.encodeLocation?c.encodeLocation(ie.pathnameBase).pathname:ie.pathnameBase])})),y,t,a);return e&&de?J.createElement(Ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},de):de}function jb(){let i=Xb(),e=Db(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,a="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:a},f={padding:"2px 4px",backgroundColor:a},y=null;return console.error("Error handled by React Router default ErrorBoundary:",i),y=J.createElement(J.Fragment,null,J.createElement("p",null,"💿 Hey developer 👋"),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:f},"ErrorBoundary")," or"," ",J.createElement("code",{style:f},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),t?J.createElement("pre",{style:c},t):null,y)}var Ub=J.createElement(jb,null),Vb=class extends J.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?J.createElement(Os.Provider,{value:this.props.routeContext},J.createElement(V1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Fb({routeContext:i,match:e,children:t}){let a=J.useContext(uc);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),J.createElement(Os.Provider,{value:i},t)}function zb(i,e=[],t=null,a=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let c=i,f=t==null?void 0:t.errors;if(f!=null){let _=c.findIndex(w=>w.route.id&&(f==null?void 0:f[w.route.id])!==void 0);Gn(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),c=c.slice(0,Math.min(c.length,_+1))}let y=!1,b=-1;if(t)for(let _=0;_<c.length;_++){let w=c[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(b=_),w.route.id){let{loaderData:S,errors:R}=t,P=w.route.loader&&!S.hasOwnProperty(w.route.id)&&(!R||R[w.route.id]===void 0);if(w.route.lazy||P){y=!0,b>=0?c=c.slice(0,b+1):c=[c[0]];break}}}return c.reduceRight((_,w,S)=>{let R,P=!1,F=null,Y=null;t&&(R=f&&w.route.id?f[w.route.id]:void 0,F=w.route.errorElement||Ub,y&&(b<0&&S===0?(Hy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,Y=null):b===S&&(P=!0,Y=w.route.hydrateFallbackElement||null)));let ee=e.concat(c.slice(0,S+1)),W=()=>{let de;return R?de=F:P?de=Y:w.route.Component?de=J.createElement(w.route.Component,null):w.route.element?de=w.route.element:de=_,J.createElement(Fb,{match:w,routeContext:{outlet:_,matches:ee,isDataRoute:t!=null},children:de})};return t&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?J.createElement(Vb,{location:t.location,revalidation:t.revalidation,component:F,error:R,children:W(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):W()},null)}function z1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hb(i){let e=J.useContext(uc);return Gn(e,z1(i)),e}function Gb(i){let e=J.useContext(Of);return Gn(e,z1(i)),e}function qb(i){let e=J.useContext(Os);return Gn(e,z1(i)),e}function H1(i){let e=qb(i),t=e.matches[e.matches.length-1];return Gn(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function Yb(){return H1("useRouteId")}function Xb(){var a;let i=J.useContext(V1),e=Gb("useRouteError"),t=H1("useRouteError");return i!==void 0?i:(a=e.errors)==null?void 0:a[t]}function Qb(){let{router:i}=Hb("useNavigate"),e=H1("useNavigate"),t=J.useRef(!1);return Fy(()=>{t.current=!0}),J.useCallback(async(c,f={})=>{Ji(t.current,Vy),t.current&&(typeof c=="number"?i.navigate(c):await i.navigate(c,{fromRouteId:e,...f}))},[i,e])}var z2={};function Hy(i,e,t){!e&&!z2[i]&&(z2[i]=!0,Ji(!1,t))}J.memo(Wb);function Wb({routes:i,future:e,state:t}){return zy(i,void 0,t,e)}function Kb({to:i,replace:e,state:t,relative:a}){Gn(hc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=J.useContext(Ms);Ji(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=J.useContext(Os),{pathname:y}=La(),b=ea(),_=U1(i,j1(f),y,a==="path"),w=JSON.stringify(_);return J.useEffect(()=>{b(JSON.parse(w),{replace:e,state:t,relative:a})},[b,w,a,e,t]),null}function va(i){Gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Zb({basename:i="/",children:e=null,location:t,navigationType:a="POP",navigator:c,static:f=!1}){Gn(!hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=i.replace(/^\/*/,"/"),b=J.useMemo(()=>({basename:y,navigator:c,static:f,future:{}}),[y,c,f]);typeof t=="string"&&(t=il(t));let{pathname:_="/",search:w="",hash:S="",state:R=null,key:P="default"}=t,F=J.useMemo(()=>{let Y=wo(_,y);return Y==null?null:{location:{pathname:Y,search:w,hash:S,state:R,key:P},navigationType:a}},[y,_,w,S,R,P,a]);return Ji(F!=null,`<Router basename="${y}"> is not able to match the URL "${_}${w}${S}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:J.createElement(Ms.Provider,{value:b},J.createElement(Ru.Provider,{children:e,value:F}))}function $b({children:i,location:e}){return Bb(a1(i),e)}function a1(i,e=[]){let t=[];return J.Children.forEach(i,(a,c)=>{if(!J.isValidElement(a))return;let f=[...e,c];if(a.type===J.Fragment){t.push.apply(t,a1(a.props.children,f));return}Gn(a.type===va,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let y={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(y.children=a1(a.props.children,f)),t.push(y)}),t}var Wh="get",Kh="application/x-www-form-urlencoded";function Lf(i){return i!=null&&typeof i.tagName=="string"}function Jb(i){return Lf(i)&&i.tagName.toLowerCase()==="button"}function eA(i){return Lf(i)&&i.tagName.toLowerCase()==="form"}function tA(i){return Lf(i)&&i.tagName.toLowerCase()==="input"}function nA(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function rA(i,e){return i.button===0&&(!e||e==="_self")&&!nA(i)}function o1(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let a=i[t];return e.concat(Array.isArray(a)?a.map(c=>[t,c]):[[t,a]])},[]))}function iA(i,e){let t=o1(i);return e&&e.forEach((a,c)=>{t.has(c)||e.getAll(c).forEach(f=>{t.append(c,f)})}),t}var zh=null;function sA(){if(zh===null)try{new FormData(document.createElement("form"),0),zh=!1}catch{zh=!0}return zh}var aA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Y0(i){return i!=null&&!aA.has(i)?(Ji(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kh}"`),null):i}function oA(i,e){let t,a,c,f,y;if(eA(i)){let b=i.getAttribute("action");a=b?wo(b,e):null,t=i.getAttribute("method")||Wh,c=Y0(i.getAttribute("enctype"))||Kh,f=new FormData(i)}else if(Jb(i)||tA(i)&&(i.type==="submit"||i.type==="image")){let b=i.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=i.getAttribute("formaction")||b.getAttribute("action");if(a=_?wo(_,e):null,t=i.getAttribute("formmethod")||b.getAttribute("method")||Wh,c=Y0(i.getAttribute("formenctype"))||Y0(b.getAttribute("enctype"))||Kh,f=new FormData(b,i),!sA()){let{name:w,type:S,value:R}=i;if(S==="image"){let P=w?`${w}.`:"";f.append(`${P}x`,"0"),f.append(`${P}y`,"0")}else w&&f.append(w,R)}}else{if(Lf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wh,a=null,c=Kh,y=i}return f&&c==="text/plain"&&(y=f,f=void 0),{action:a,method:t.toLowerCase(),encType:c,formData:f,body:y}}function G1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function lA(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cA(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function uA(i,e,t){let a=await Promise.all(i.map(async c=>{let f=e.routes[c.route.id];if(f){let y=await lA(f,t);return y.links?y.links():[]}return[]}));return gA(a.flat(1).filter(cA).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function H2(i,e,t,a,c,f){let y=(_,w)=>t[w]?_.route.id!==t[w].route.id:!0,b=(_,w)=>{var S;return t[w].pathname!==_.pathname||((S=t[w].route.path)==null?void 0:S.endsWith("*"))&&t[w].params["*"]!==_.params["*"]};return f==="assets"?e.filter((_,w)=>y(_,w)||b(_,w)):f==="data"?e.filter((_,w)=>{var R;let S=a.routes[_.route.id];if(!S||!S.hasLoader)return!1;if(y(_,w)||b(_,w))return!0;if(_.route.shouldRevalidate){let P=_.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((R=t[0])==null?void 0:R.params)||{},nextUrl:new URL(i,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof P=="boolean")return P}return!0}):[]}function hA(i,e){return fA(i.map(t=>{let a=e.routes[t.route.id];if(!a)return[];let c=[a.module];return a.imports&&(c=c.concat(a.imports)),c}).flat(1))}function fA(i){return[...new Set(i)]}function dA(i){let e={},t=Object.keys(i).sort();for(let a of t)e[a]=i[a];return e}function gA(i,e){let t=new Set;return new Set(e),i.reduce((a,c)=>{let f=JSON.stringify(dA(c));return t.has(f)||(t.add(f),a.push({key:f,link:c})),a},[])}function mA(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function pA(){let i=J.useContext(uc);return G1(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function xA(){let i=J.useContext(Of);return G1(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var q1=J.createContext(void 0);q1.displayName="FrameworkContext";function Gy(){let i=J.useContext(q1);return G1(i,"You must render this element inside a <HydratedRouter> element"),i}function yA(i,e){let t=J.useContext(q1),[a,c]=J.useState(!1),[f,y]=J.useState(!1),{onFocus:b,onBlur:_,onMouseEnter:w,onMouseLeave:S,onTouchStart:R}=e,P=J.useRef(null);J.useEffect(()=>{if(i==="render"&&y(!0),i==="viewport"){let ee=de=>{de.forEach(fe=>{y(fe.isIntersecting)})},W=new IntersectionObserver(ee,{threshold:.5});return P.current&&W.observe(P.current),()=>{W.disconnect()}}},[i]),J.useEffect(()=>{if(a){let ee=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(ee)}}},[a]);let F=()=>{c(!0)},Y=()=>{c(!1),y(!1)};return t?i!=="intent"?[f,P,{}]:[f,P,{onFocus:lu(b,F),onBlur:lu(_,Y),onMouseEnter:lu(w,F),onMouseLeave:lu(S,Y),onTouchStart:lu(R,F)}]:[!1,P,{}]}function lu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function wA({page:i,...e}){let{router:t}=pA(),a=J.useMemo(()=>ky(t.routes,i,t.basename),[t.routes,i,t.basename]);return a?J.createElement(_A,{page:i,matches:a,...e}):null}function EA(i){let{manifest:e,routeModules:t}=Gy(),[a,c]=J.useState([]);return J.useEffect(()=>{let f=!1;return uA(i,e,t).then(y=>{f||c(y)}),()=>{f=!0}},[i,e,t]),a}function _A({page:i,matches:e,...t}){let a=La(),{manifest:c,routeModules:f}=Gy(),{loaderData:y,matches:b}=xA(),_=J.useMemo(()=>H2(i,e,b,c,a,"data"),[i,e,b,c,a]),w=J.useMemo(()=>H2(i,e,b,c,a,"assets"),[i,e,b,c,a]),S=J.useMemo(()=>{if(i===a.pathname+a.search+a.hash)return[];let F=new Set,Y=!1;if(e.forEach(W=>{var fe;let de=c.routes[W.route.id];!de||!de.hasLoader||(!_.some(ie=>ie.route.id===W.route.id)&&W.route.id in y&&((fe=f[W.route.id])!=null&&fe.shouldRevalidate)||de.hasClientLoader?Y=!0:F.add(W.route.id))}),F.size===0)return[];let ee=mA(i);return Y&&F.size>0&&ee.searchParams.set("_routes",e.filter(W=>F.has(W.route.id)).map(W=>W.route.id).join(",")),[ee.pathname+ee.search]},[y,a,c,_,e,i,f]),R=J.useMemo(()=>hA(w,c),[w,c]),P=EA(w);return J.createElement(J.Fragment,null,S.map(F=>J.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...t})),R.map(F=>J.createElement("link",{key:F,rel:"modulepreload",href:F,...t})),P.map(({key:F,link:Y})=>J.createElement("link",{key:F,...Y})))}function vA(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var qy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qy&&(window.__reactRouterVersion="7.1.5")}catch{}function bA({basename:i,children:e,window:t}){let a=J.useRef();a.current==null&&(a.current=cb({window:t,v5Compat:!0}));let c=a.current,[f,y]=J.useState({action:c.action,location:c.location}),b=J.useCallback(_=>{J.startTransition(()=>y(_))},[y]);return J.useLayoutEffect(()=>c.listen(b),[c,b]),J.createElement(Zb,{basename:i,children:e,location:f.location,navigationType:f.action,navigator:c})}var Yy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xy=J.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:c,reloadDocument:f,replace:y,state:b,target:_,to:w,preventScrollReset:S,viewTransition:R,...P},F){let{basename:Y}=J.useContext(Ms),ee=typeof w=="string"&&Yy.test(w),W,de=!1;if(typeof w=="string"&&ee&&(W=w,qy))try{let k=new URL(window.location.href),G=w.startsWith("//")?new URL(k.protocol+w):new URL(w),K=wo(G.pathname,Y);G.origin===k.origin&&K!=null?w=K+G.search+G.hash:de=!0}catch{Ji(!1,`<Link to="${w}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let fe=kb(w,{relative:c}),[ie,_e,Be]=yA(a,P),ke=SA(w,{replace:y,state:b,target:_,preventScrollReset:S,relative:c,viewTransition:R});function z(k){e&&e(k),k.defaultPrevented||ke(k)}let V=J.createElement("a",{...P,...Be,href:W||fe,onClick:de||f?e:z,ref:vA(F,_e),target:_,"data-discover":!ee&&t==="render"?"true":void 0});return ie&&!ee?J.createElement(J.Fragment,null,V,J.createElement(wA,{page:fe})):V});Xy.displayName="Link";var AA=J.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:c=!1,style:f,to:y,viewTransition:b,children:_,...w},S){let R=Du(y,{relative:w.relative}),P=La(),F=J.useContext(Of),{navigator:Y,basename:ee}=J.useContext(Ms),W=F!=null&&OA(R)&&b===!0,de=Y.encodeLocation?Y.encodeLocation(R).pathname:R.pathname,fe=P.pathname,ie=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;t||(fe=fe.toLowerCase(),ie=ie?ie.toLowerCase():null,de=de.toLowerCase()),ie&&ee&&(ie=wo(ie,ee)||ie);const _e=de!=="/"&&de.endsWith("/")?de.length-1:de.length;let Be=fe===de||!c&&fe.startsWith(de)&&fe.charAt(_e)==="/",ke=ie!=null&&(ie===de||!c&&ie.startsWith(de)&&ie.charAt(de.length)==="/"),z={isActive:Be,isPending:ke,isTransitioning:W},V=Be?e:void 0,k;typeof a=="function"?k=a(z):k=[a,Be?"active":null,ke?"pending":null,W?"transitioning":null].filter(Boolean).join(" ");let G=typeof f=="function"?f(z):f;return J.createElement(Xy,{...w,"aria-current":V,className:k,ref:S,style:G,to:y,viewTransition:b},typeof _=="function"?_(z):_)});AA.displayName="NavLink";var CA=J.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:c,state:f,method:y=Wh,action:b,onSubmit:_,relative:w,preventScrollReset:S,viewTransition:R,...P},F)=>{let Y=DA(),ee=MA(b,{relative:w}),W=y.toLowerCase()==="get"?"get":"post",de=typeof b=="string"&&Yy.test(b),fe=ie=>{if(_&&_(ie),ie.defaultPrevented)return;ie.preventDefault();let _e=ie.nativeEvent.submitter,Be=(_e==null?void 0:_e.getAttribute("formmethod"))||y;Y(_e||ie.currentTarget,{fetcherKey:e,method:Be,navigate:t,replace:c,state:f,relative:w,preventScrollReset:S,viewTransition:R})};return J.createElement("form",{ref:F,method:W,action:ee,onSubmit:a?_:fe,...P,"data-discover":!de&&i==="render"?"true":void 0})});CA.displayName="Form";function TA(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qy(i){let e=J.useContext(uc);return Gn(e,TA(i)),e}function SA(i,{target:e,replace:t,state:a,preventScrollReset:c,relative:f,viewTransition:y}={}){let b=ea(),_=La(),w=Du(i,{relative:f});return J.useCallback(S=>{if(rA(S,e)){S.preventDefault();let R=t!==void 0?t:Eu(_)===Eu(w);b(i,{replace:R,state:a,preventScrollReset:c,relative:f,viewTransition:y})}},[_,b,w,t,a,e,i,c,f,y])}function IA(i){Ji(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=J.useRef(o1(i)),t=J.useRef(!1),a=La(),c=J.useMemo(()=>iA(a.search,t.current?null:e.current),[a.search]),f=ea(),y=J.useCallback((b,_)=>{const w=o1(typeof b=="function"?b(c):b);t.current=!0,f("?"+w,_)},[f,c]);return[c,y]}var NA=0,RA=()=>`__${String(++NA)}__`;function DA(){let{router:i}=Qy("useSubmit"),{basename:e}=J.useContext(Ms),t=Yb();return J.useCallback(async(a,c={})=>{let{action:f,method:y,encType:b,formData:_,body:w}=oA(a,e);if(c.navigate===!1){let S=c.fetcherKey||RA();await i.fetch(S,t,c.action||f,{preventScrollReset:c.preventScrollReset,formData:_,body:w,formMethod:c.method||y,formEncType:c.encType||b,flushSync:c.flushSync})}else await i.navigate(c.action||f,{preventScrollReset:c.preventScrollReset,formData:_,body:w,formMethod:c.method||y,formEncType:c.encType||b,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,e,t])}function MA(i,{relative:e}={}){let{basename:t}=J.useContext(Ms),a=J.useContext(Os);Gn(a,"useFormAction must be used inside a RouteContext");let[c]=a.matches.slice(-1),f={...Du(i||".",{relative:e})},y=La();if(i==null){f.search=y.search;let b=new URLSearchParams(f.search),_=b.getAll("index");if(_.some(S=>S==="")){b.delete("index"),_.filter(R=>R).forEach(R=>b.append("index",R));let S=b.toString();f.search=S?`?${S}`:""}}return(!i||i===".")&&c.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(f.pathname=f.pathname==="/"?t:Ia([t,f.pathname])),Eu(f)}function OA(i,e={}){let t=J.useContext(Uy);Gn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Qy("useViewTransitionState"),c=Du(i,{relative:e.relative});if(!t.isTransitioning)return!1;let f=wo(t.currentLocation.pathname,a)||t.currentLocation.pathname,y=wo(t.nextLocation.pathname,a)||t.nextLocation.pathname;return cf(c.pathname,y)!=null||cf(c.pathname,f)!=null}new TextEncoder;var G2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=function(i){const e=[];let t=0;for(let a=0;a<i.length;a++){let c=i.charCodeAt(a);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(c=65536+((c&1023)<<10)+(i.charCodeAt(++a)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},LA=function(i){const e=[];let t=0,a=0;for(;t<i.length;){const c=i[t++];if(c<128)e[a++]=String.fromCharCode(c);else if(c>191&&c<224){const f=i[t++];e[a++]=String.fromCharCode((c&31)<<6|f&63)}else if(c>239&&c<365){const f=i[t++],y=i[t++],b=i[t++],_=((c&7)<<18|(f&63)<<12|(y&63)<<6|b&63)-65536;e[a++]=String.fromCharCode(55296+(_>>10)),e[a++]=String.fromCharCode(56320+(_&1023))}else{const f=i[t++],y=i[t++];e[a++]=String.fromCharCode((c&15)<<12|(f&63)<<6|y&63)}}return e.join("")},Ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let c=0;c<i.length;c+=3){const f=i[c],y=c+1<i.length,b=y?i[c+1]:0,_=c+2<i.length,w=_?i[c+2]:0,S=f>>2,R=(f&3)<<4|b>>4;let P=(b&15)<<2|w>>6,F=w&63;_||(F=64,y||(P=64)),a.push(t[S],t[R],t[P],t[F])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Wy(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):LA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let c=0;c<i.length;){const f=t[i.charAt(c++)],b=c<i.length?t[i.charAt(c)]:0;++c;const w=c<i.length?t[i.charAt(c)]:64;++c;const R=c<i.length?t[i.charAt(c)]:64;if(++c,f==null||b==null||w==null||R==null)throw new kA;const P=f<<2|b>>4;if(a.push(P),w!==64){const F=b<<4&240|w>>2;if(a.push(F),R!==64){const Y=w<<6&192|R;a.push(Y)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class kA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PA=function(i){const e=Wy(i);return Ky.encodeByteArray(e,!0)},uf=function(i){return PA(i).replace(/\./g,"")},Zy=function(i){try{return Ky.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=()=>BA().__FIREBASE_DEFAULTS__,UA=()=>{if(typeof process>"u"||typeof G2>"u")return;const i=G2.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},VA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Zy(i[1]);return e&&JSON.parse(e)},kf=()=>{try{return jA()||UA()||VA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},$y=i=>{var e,t;return(t=(e=kf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},FA=i=>{const e=$y(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},Jy=()=>{var i;return(i=kf())===null||i===void 0?void 0:i.config},ew=i=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",c=i.iat||0,f=i.sub||i.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:c,exp:c+3600,auth_time:c,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}}},i);return[uf(JSON.stringify(t)),uf(JSON.stringify(y)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ui())}function qA(){var i;const e=(i=kf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function QA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WA(){const i=ui();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function KA(){return!qA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZA(){try{return typeof indexedDB=="object"}catch{return!1}}function $A(){return new Promise((i,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(a);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(a),i(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{var f;e(((f=c.error)===null||f===void 0?void 0:f.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="FirebaseError";class ka extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=JA,Object.setPrototypeOf(this,ka.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mu.prototype.create)}}class Mu{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},c=`${this.service}/${e}`,f=this.errors[e],y=f?eC(f,a):"Error",b=`${this.serviceName}: ${y} (${c}).`;return new ka(c,b,a)}}function eC(i,e){return i.replace(tC,(t,a)=>{const c=e[a];return c!=null?String(c):`<${a}?>`})}const tC=/\{\$([^}]+)}/g;function nC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function hf(i,e){if(i===e)return!0;const t=Object.keys(i),a=Object.keys(e);for(const c of t){if(!a.includes(c))return!1;const f=i[c],y=e[c];if(q2(f)&&q2(y)){if(!hf(f,y))return!1}else if(f!==y)return!1}for(const c of a)if(!t.includes(c))return!1;return!0}function q2(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(i){const e=[];for(const[t,a]of Object.entries(i))Array.isArray(a)?a.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function rC(i,e){const t=new iC(i,e);return t.subscribe.bind(t)}class iC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let c;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");sC(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:a},c.next===void 0&&(c.next=X0),c.error===void 0&&(c.error=X0),c.complete===void 0&&(c.complete=X0);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),f}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sC(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function X0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(i){return i&&i._delegate?i._delegate:i}class Jo{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new zA;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&a.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),c=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(f){if(c)return null;throw f}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lC(e))try{this.getOrInitializeService({instanceIdentifier:Wo})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const f=this.getOrInitializeService({instanceIdentifier:c});a.resolve(f)}catch{}}}}clearInstance(e=Wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wo){return this.instances.has(e)}getOptions(e=Wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[f,y]of this.instancesDeferred.entries()){const b=this.normalizeInstanceIdentifier(f);a===b&&y.resolve(c)}return c}onInit(e,t){var a;const c=this.normalizeInstanceIdentifier(t),f=(a=this.onInitCallbacks.get(c))!==null&&a!==void 0?a:new Set;f.add(e),this.onInitCallbacks.set(c,f);const y=this.instances.get(c);return y&&e(y,c),()=>{f.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const c of a)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:oC(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Wo){return this.component?this.component.multipleInstances?e:Wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oC(i){return i===Wo?void 0:i}function lC(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Wt||(Wt={}));const uC={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},hC=Wt.INFO,fC={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},dC=(i,e,...t)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),c=fC[e];if(c)console[c](`[${a}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Y1{constructor(e){this.name=e,this._logLevel=hC,this._logHandler=dC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...e),this._logHandler(this,Wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...e),this._logHandler(this,Wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...e),this._logHandler(this,Wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...e),this._logHandler(this,Wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...e),this._logHandler(this,Wt.ERROR,...e)}}const gC=(i,e)=>e.some(t=>i instanceof t);let Y2,X2;function mC(){return Y2||(Y2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pC(){return X2||(X2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tw=new WeakMap,l1=new WeakMap,nw=new WeakMap,Q0=new WeakMap,X1=new WeakMap;function xC(i){const e=new Promise((t,a)=>{const c=()=>{i.removeEventListener("success",f),i.removeEventListener("error",y)},f=()=>{t(go(i.result)),c()},y=()=>{a(i.error),c()};i.addEventListener("success",f),i.addEventListener("error",y)});return e.then(t=>{t instanceof IDBCursor&&tw.set(t,i)}).catch(()=>{}),X1.set(e,i),e}function yC(i){if(l1.has(i))return;const e=new Promise((t,a)=>{const c=()=>{i.removeEventListener("complete",f),i.removeEventListener("error",y),i.removeEventListener("abort",y)},f=()=>{t(),c()},y=()=>{a(i.error||new DOMException("AbortError","AbortError")),c()};i.addEventListener("complete",f),i.addEventListener("error",y),i.addEventListener("abort",y)});l1.set(i,e)}let c1={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return l1.get(i);if(e==="objectStoreNames")return i.objectStoreNames||nw.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return go(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function wC(i){c1=i(c1)}function EC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=i.call(W0(this),e,...t);return nw.set(a,e.sort?e.sort():[e]),go(a)}:pC().includes(i)?function(...e){return i.apply(W0(this),e),go(tw.get(this))}:function(...e){return go(i.apply(W0(this),e))}}function _C(i){return typeof i=="function"?EC(i):(i instanceof IDBTransaction&&yC(i),gC(i,mC())?new Proxy(i,c1):i)}function go(i){if(i instanceof IDBRequest)return xC(i);if(Q0.has(i))return Q0.get(i);const e=_C(i);return e!==i&&(Q0.set(i,e),X1.set(e,i)),e}const W0=i=>X1.get(i);function vC(i,e,{blocked:t,upgrade:a,blocking:c,terminated:f}={}){const y=indexedDB.open(i,e),b=go(y);return a&&y.addEventListener("upgradeneeded",_=>{a(go(y.result),_.oldVersion,_.newVersion,go(y.transaction),_)}),t&&y.addEventListener("blocked",_=>t(_.oldVersion,_.newVersion,_)),b.then(_=>{f&&_.addEventListener("close",()=>f()),c&&_.addEventListener("versionchange",w=>c(w.oldVersion,w.newVersion,w))}).catch(()=>{}),b}const bC=["get","getKey","getAll","getAllKeys","count"],AC=["put","add","delete","clear"],K0=new Map;function Q2(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(K0.get(e))return K0.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,c=AC.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(c||bC.includes(t)))return;const f=async function(y,...b){const _=this.transaction(y,c?"readwrite":"readonly");let w=_.store;return a&&(w=w.index(b.shift())),(await Promise.all([w[t](...b),c&&_.done]))[0]};return K0.set(e,f),f}wC(i=>({...i,get:(e,t,a)=>Q2(e,t)||i.get(e,t,a),has:(e,t)=>!!Q2(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TC(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function TC(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const u1="@firebase/app",W2="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Y1("@firebase/app"),SC="@firebase/app-compat",IC="@firebase/analytics-compat",NC="@firebase/analytics",RC="@firebase/app-check-compat",DC="@firebase/app-check",MC="@firebase/auth",OC="@firebase/auth-compat",LC="@firebase/database",kC="@firebase/data-connect",PC="@firebase/database-compat",BC="@firebase/functions",jC="@firebase/functions-compat",UC="@firebase/installations",VC="@firebase/installations-compat",FC="@firebase/messaging",zC="@firebase/messaging-compat",HC="@firebase/performance",GC="@firebase/performance-compat",qC="@firebase/remote-config",YC="@firebase/remote-config-compat",XC="@firebase/storage",QC="@firebase/storage-compat",WC="@firebase/firestore",KC="@firebase/vertexai",ZC="@firebase/firestore-compat",$C="firebase",JC="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="[DEFAULT]",eT={[u1]:"fire-core",[SC]:"fire-core-compat",[NC]:"fire-analytics",[IC]:"fire-analytics-compat",[DC]:"fire-app-check",[RC]:"fire-app-check-compat",[MC]:"fire-auth",[OC]:"fire-auth-compat",[LC]:"fire-rtdb",[kC]:"fire-data-connect",[PC]:"fire-rtdb-compat",[BC]:"fire-fn",[jC]:"fire-fn-compat",[UC]:"fire-iid",[VC]:"fire-iid-compat",[FC]:"fire-fcm",[zC]:"fire-fcm-compat",[HC]:"fire-perf",[GC]:"fire-perf-compat",[qC]:"fire-rc",[YC]:"fire-rc-compat",[XC]:"fire-gcs",[QC]:"fire-gcs-compat",[WC]:"fire-fst",[ZC]:"fire-fst-compat",[KC]:"fire-vertex","fire-js":"fire-js",[$C]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Map,tT=new Map,f1=new Map;function K2(i,e){try{i.container.addComponent(e)}catch(t){Ra.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ec(i){const e=i.name;if(f1.has(e))return Ra.debug(`There were multiple attempts to register component ${e}.`),!1;f1.set(e,i);for(const t of ff.values())K2(t,i);for(const t of tT.values())K2(t,i);return!0}function Q1(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Is(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mo=new Mu("app","Firebase",nT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=JC;function rw(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const a=Object.assign({name:h1,automaticDataCollectionEnabled:!1},e),c=a.name;if(typeof c!="string"||!c)throw mo.create("bad-app-name",{appName:String(c)});if(t||(t=Jy()),!t)throw mo.create("no-options");const f=ff.get(c);if(f){if(hf(t,f.options)&&hf(a,f.config))return f;throw mo.create("duplicate-app",{appName:c})}const y=new cC(c);for(const _ of f1.values())y.addComponent(_);const b=new rT(t,a,y);return ff.set(c,b),b}function iw(i=h1){const e=ff.get(i);if(!e&&i===h1&&Jy())return rw();if(!e)throw mo.create("no-app",{appName:i});return e}function po(i,e,t){var a;let c=(a=eT[i])!==null&&a!==void 0?a:i;t&&(c+=`-${t}`);const f=c.match(/\s|\//),y=e.match(/\s|\//);if(f||y){const b=[`Unable to register library "${c}" with version "${e}":`];f&&b.push(`library name "${c}" contains illegal characters (whitespace or "/")`),f&&y&&b.push("and"),y&&b.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ra.warn(b.join(" "));return}ec(new Jo(`${c}-version`,()=>({library:c,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="firebase-heartbeat-database",sT=1,_u="firebase-heartbeat-store";let Z0=null;function sw(){return Z0||(Z0=vC(iT,sT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(_u)}catch(t){console.warn(t)}}}}).catch(i=>{throw mo.create("idb-open",{originalErrorMessage:i.message})})),Z0}async function aT(i){try{const t=(await sw()).transaction(_u),a=await t.objectStore(_u).get(aw(i));return await t.done,a}catch(e){if(e instanceof ka)Ra.warn(e.message);else{const t=mo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ra.warn(t.message)}}}async function Z2(i,e){try{const a=(await sw()).transaction(_u,"readwrite");await a.objectStore(_u).put(e,aw(i)),await a.done}catch(t){if(t instanceof ka)Ra.warn(t.message);else{const a=mo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ra.warn(a.message)}}}function aw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=1024,lT=30;class cT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hT(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=$2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(y=>y.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:c}),this._heartbeatsCache.heartbeats.length>lT){const y=fT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(y,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ra.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$2(),{heartbeatsToSend:a,unsentEntries:c}=uT(this._heartbeatsCache.heartbeats),f=uf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(t){return Ra.warn(t),""}}}function $2(){return new Date().toISOString().substring(0,10)}function uT(i,e=oT){const t=[];let a=i.slice();for(const c of i){const f=t.find(y=>y.agent===c.agent);if(f){if(f.dates.push(c.date),J2(t)>e){f.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),J2(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class hT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZA()?$A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return Z2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return Z2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...e.heartbeats]})}else return}}function J2(i){return uf(JSON.stringify({version:2,heartbeats:i})).length}function fT(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let a=1;a<i.length;a++)i[a].date<t&&(t=i[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(i){ec(new Jo("platform-logger",e=>new CC(e),"PRIVATE")),ec(new Jo("heartbeat",e=>new cT(e),"PRIVATE")),po(u1,W2,i),po(u1,W2,"esm2017"),po("fire-js","")}dT("");function W1(i,e){var t={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(i);c<a.length;c++)e.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(i,a[c])&&(t[a[c]]=i[a[c]]);return t}function ow(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gT=ow,lw=new Mu("auth","Firebase",ow());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new Y1("@firebase/auth");function mT(i,...e){df.logLevel<=Wt.WARN&&df.warn(`Auth (${fc}): ${i}`,...e)}function Zh(i,...e){df.logLevel<=Wt.ERROR&&df.error(`Auth (${fc}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(i,...e){throw Z1(i,...e)}function Ns(i,...e){return Z1(i,...e)}function K1(i,e,t){const a=Object.assign(Object.assign({},gT()),{[e]:t});return new Mu("auth","Firebase",a).create(e,{appName:i.name})}function $o(i){return K1(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pT(i,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&$s(i,"argument-error"),K1(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Z1(i,...e){if(typeof i!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(t,...a)}return lw.create(i,...e)}function St(i,e,...t){if(!i)throw Z1(e,...t)}function Aa(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Zh(e),new Error(e)}function Da(i,e){i||Aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function xT(){return ex()==="http:"||ex()==="https:"}function ex(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xT()||XA()||"connection"in navigator)?navigator.onLine:!0}function wT(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Da(t>e,"Short delay should be less than long delay!"),this.isMobile=GA()||QA()}get(){return yT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(i,e){Da(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=new Lu(3e4,6e4);function J1(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function sl(i,e,t,a,c={}){return uw(i,c,async()=>{let f={},y={};a&&(e==="GET"?y=a:f={body:JSON.stringify(a)});const b=Ou(Object.assign({key:i.config.apiKey},y)).slice(1),_=await i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);const w=Object.assign({method:e,headers:_},f);return YA()||(w.referrerPolicy="no-referrer"),cw.fetch()(hw(i,i.config.apiHost,t,b),w)})}async function uw(i,e,t){i._canInitEmulator=!1;const a=Object.assign(Object.assign({},ET),e);try{const c=new bT(i),f=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const y=await f.json();if("needConfirmation"in y)throw Hh(i,"account-exists-with-different-credential",y);if(f.ok&&!("errorMessage"in y))return y;{const b=f.ok?y.errorMessage:y.error.message,[_,w]=b.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(i,"credential-already-in-use",y);if(_==="EMAIL_EXISTS")throw Hh(i,"email-already-in-use",y);if(_==="USER_DISABLED")throw Hh(i,"user-disabled",y);const S=a[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw K1(i,S,w);$s(i,S)}}catch(c){if(c instanceof ka)throw c;$s(i,"network-request-failed",{message:String(c)})}}async function vT(i,e,t,a,c={}){const f=await sl(i,e,t,a,c);return"mfaPendingCredential"in f&&$s(i,"multi-factor-auth-required",{_serverResponse:f}),f}function hw(i,e,t,a){const c=`${e}${t}?${a}`;return i.config.emulator?$1(i.config,c):`${i.config.apiScheme}://${c}`}class bT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Ns(this.auth,"network-request-failed")),_T.get())})}}function Hh(i,e,t){const a={appName:i.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const c=Ns(i,e,a);return c.customData._tokenResponse=t,c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(i,e){return sl(i,"POST","/v1/accounts:delete",e)}async function fw(i,e){return sl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CT(i,e=!1){const t=$r(i),a=await t.getIdToken(e),c=eg(a);St(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const f=typeof c.firebase=="object"?c.firebase:void 0,y=f==null?void 0:f.sign_in_provider;return{claims:c,token:a,authTime:mu($0(c.auth_time)),issuedAtTime:mu($0(c.iat)),expirationTime:mu($0(c.exp)),signInProvider:y||null,signInSecondFactor:(f==null?void 0:f.sign_in_second_factor)||null}}function $0(i){return Number(i)*1e3}function eg(i){const[e,t,a]=i.split(".");if(e===void 0||t===void 0||a===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const c=Zy(t);return c?JSON.parse(c):(Zh("Failed to decode base64 JWT payload"),null)}catch(c){return Zh("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function tx(i){const e=eg(i);return St(e,"internal-error"),St(typeof e.exp<"u","internal-error"),St(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(i,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ka&&TT(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function TT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const c=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,c)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(i){var e;const t=i.auth,a=await i.getIdToken(),c=await tc(i,fw(t,{idToken:a}));St(c==null?void 0:c.users.length,t,"internal-error");const f=c.users[0];i._notifyReloadListener(f);const y=!((e=f.providerUserInfo)===null||e===void 0)&&e.length?dw(f.providerUserInfo):[],b=NT(i.providerData,y),_=i.isAnonymous,w=!(i.email&&f.passwordHash)&&!(b!=null&&b.length),S=_?w:!1,R={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:b,metadata:new g1(f.createdAt,f.lastLoginAt),isAnonymous:S};Object.assign(i,R)}async function IT(i){const e=$r(i);await gf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NT(i,e){return[...i.filter(a=>!e.some(c=>c.providerId===a.providerId)),...e]}function dw(i){return i.map(e=>{var{providerId:t}=e,a=W1(e,["providerId"]);return{providerId:t,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(i,e){const t=await uw(i,{},async()=>{const a=Ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:f}=i.config,y=hw(i,c,"/v1/token",`key=${f}`),b=await i._getAdditionalHeaders();return b["Content-Type"]="application/x-www-form-urlencoded",cw.fetch()(y,{method:"POST",headers:b,body:a})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DT(i,e){return sl(i,"POST","/v2/accounts:revokeToken",J1(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){St(e.idToken,"internal-error"),St(typeof e.idToken<"u","internal-error"),St(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){St(e.length!==0,"internal-error");const t=tx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:c,expiresIn:f}=await RT(e,t);this.updateTokensAndExpiration(a,c,Number(f))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:c,expirationTime:f}=t,y=new Wl;return a&&(St(typeof a=="string","internal-error",{appName:e}),y.refreshToken=a),c&&(St(typeof c=="string","internal-error",{appName:e}),y.accessToken=c),f&&(St(typeof f=="number","internal-error",{appName:e}),y.expirationTime=f),y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(i,e){St(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ca{constructor(e){var{uid:t,auth:a,stsTokenManager:c}=e,f=W1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ST(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=a,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new g1(f.createdAt||void 0,f.lastLoginAt||void 0)}async getIdToken(e){const t=await tc(this,this.stsTokenManager.getToken(this.auth,e));return St(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return CT(this,e)}reload(){return IT(this)}_assign(e){this!==e&&(St(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ca(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await gf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Is(this.auth.app))return Promise.reject($o(this.auth));const e=await this.getIdToken();return await tc(this,AT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var a,c,f,y,b,_,w,S;const R=(a=t.displayName)!==null&&a!==void 0?a:void 0,P=(c=t.email)!==null&&c!==void 0?c:void 0,F=(f=t.phoneNumber)!==null&&f!==void 0?f:void 0,Y=(y=t.photoURL)!==null&&y!==void 0?y:void 0,ee=(b=t.tenantId)!==null&&b!==void 0?b:void 0,W=(_=t._redirectEventId)!==null&&_!==void 0?_:void 0,de=(w=t.createdAt)!==null&&w!==void 0?w:void 0,fe=(S=t.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:ie,emailVerified:_e,isAnonymous:Be,providerData:ke,stsTokenManager:z}=t;St(ie&&z,e,"internal-error");const V=Wl.fromJSON(this.name,z);St(typeof ie=="string",e,"internal-error"),oo(R,e.name),oo(P,e.name),St(typeof _e=="boolean",e,"internal-error"),St(typeof Be=="boolean",e,"internal-error"),oo(F,e.name),oo(Y,e.name),oo(ee,e.name),oo(W,e.name),oo(de,e.name),oo(fe,e.name);const k=new Ca({uid:ie,auth:e,email:P,emailVerified:_e,displayName:R,isAnonymous:Be,photoURL:Y,phoneNumber:F,tenantId:ee,stsTokenManager:V,createdAt:de,lastLoginAt:fe});return ke&&Array.isArray(ke)&&(k.providerData=ke.map(G=>Object.assign({},G))),W&&(k._redirectEventId=W),k}static async _fromIdTokenResponse(e,t,a=!1){const c=new Wl;c.updateFromServerResponse(t);const f=new Ca({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:a});return await gf(f),f}static async _fromGetAccountInfoResponse(e,t,a){const c=t.users[0];St(c.localId!==void 0,"internal-error");const f=c.providerUserInfo!==void 0?dw(c.providerUserInfo):[],y=!(c.email&&c.passwordHash)&&!(f!=null&&f.length),b=new Wl;b.updateFromIdToken(a);const _=new Ca({uid:c.localId,auth:e,stsTokenManager:b,isAnonymous:y}),w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new g1(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(f!=null&&f.length)};return Object.assign(_,w),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map;function Ta(i){Da(i instanceof Function,"Expected a class definition");let e=nx.get(i);return e?(Da(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,nx.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gw.type="NONE";const rx=gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(i,e,t){return`firebase:${i}:${e}:${t}`}class Kl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:c,name:f}=this.auth;this.fullUserKey=$h(this.userKey,c.apiKey,f),this.fullPersistenceKey=$h("persistence",c.apiKey,f),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ca._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Kl(Ta(rx),e,a);const c=(await Promise.all(t.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let f=c[0]||Ta(rx);const y=$h(a,e.config.apiKey,e.name);let b=null;for(const w of t)try{const S=await w._get(y);if(S){const R=Ca._fromJSON(e,S);w!==f&&(b=R),f=w;break}}catch{}const _=c.filter(w=>w._shouldAllowMigration);return!f._shouldAllowMigration||!_.length?new Kl(f,e,a):(f=_[0],b&&await f._set(y,b.toJSON()),await Promise.all(t.map(async w=>{if(w!==f)try{await w._remove(y)}catch{}})),new Kl(f,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ew(e))return"Blackberry";if(_w(e))return"Webos";if(pw(e))return"Safari";if((e.includes("chrome/")||xw(e))&&!e.includes("edge/"))return"Chrome";if(ww(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function mw(i=ui()){return/firefox\//i.test(i)}function pw(i=ui()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xw(i=ui()){return/crios\//i.test(i)}function yw(i=ui()){return/iemobile/i.test(i)}function ww(i=ui()){return/android/i.test(i)}function Ew(i=ui()){return/blackberry/i.test(i)}function _w(i=ui()){return/webos/i.test(i)}function tg(i=ui()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function MT(i=ui()){var e;return tg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OT(){return WA()&&document.documentMode===10}function vw(i=ui()){return tg(i)||ww(i)||_w(i)||Ew(i)||/windows phone/i.test(i)||yw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(i,e=[]){let t;switch(i){case"Browser":t=ix(ui());break;case"Worker":t=`${ix(ui())}-${i}`;break;default:t=i}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fc}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=f=>new Promise((y,b)=>{try{const _=e(f);y(_)}catch(_){b(_)}});a.onAbort=t,this.queue.push(a);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT(i,e={}){return sl(i,"GET","/v2/passwordPolicy",J1(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=6;class BT{constructor(e){var t,a,c,f;const y=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=y.minPasswordLength)!==null&&t!==void 0?t:PT,y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=y.maxPasswordLength),y.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=y.containsLowercaseCharacter),y.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=y.containsUppercaseCharacter),y.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=y.containsNumericCharacter),y.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=y.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(c=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&c!==void 0?c:"",this.forceUpgradeOnSignin=(f=e.forceUpgradeOnSignin)!==null&&f!==void 0?f:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,a,c,f,y,b;const _={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,_),this.validatePasswordCharacterOptions(e,_),_.isValid&&(_.isValid=(t=_.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),_.isValid&&(_.isValid=(a=_.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),_.isValid&&(_.isValid=(c=_.containsLowercaseLetter)!==null&&c!==void 0?c:!0),_.isValid&&(_.isValid=(f=_.containsUppercaseLetter)!==null&&f!==void 0?f:!0),_.isValid&&(_.isValid=(y=_.containsNumericCharacter)!==null&&y!==void 0?y:!0),_.isValid&&(_.isValid=(b=_.containsNonAlphanumericCharacter)!==null&&b!==void 0?b:!0),_}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let c=0;c<e.length;c++)a=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,c,f){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,t,a,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sx(this),this.idTokenSubscription=new sx(this),this.beforeStateQueue=new LT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ta(t)),this._initializationPromise=this.queue(async()=>{var a,c;if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fw(this,{idToken:e}),a=await Ca._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Is(this.app)){const y=this.app.settings.authIdToken;return y?new Promise(b=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(y).then(b,b))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let c=a,f=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const y=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,b=c==null?void 0:c._redirectEventId,_=await this.tryRedirectSignIn(e);(!y||y===b)&&(_!=null&&_.user)&&(c=_.user,f=!0)}if(!c)return this.directlySetCurrentUser(null);if(!c._redirectEventId){if(f)try{await this.beforeStateQueue.runMiddleware(c)}catch(y){c=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(y))}return c?this.reloadAndSetCurrentUserOrClear(c):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===c._redirectEventId?this.directlySetCurrentUser(c):this.reloadAndSetCurrentUserOrClear(c)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Is(this.app))return Promise.reject($o(this));const t=e?$r(e):null;return t&&St(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&St(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Is(this.app)?Promise.reject($o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Is(this.app)?Promise.reject($o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kT(this),t=new BT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mu("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await DT(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ta(e)||this._popupRedirectResolver;St(t,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[Ta(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,c){if(this._deleted)return()=>{};const f=typeof t=="function"?t:t.next.bind(t);let y=!1;const b=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(b,this,"internal-error"),b.then(()=>{y||f(this.currentUser)}),typeof t=="function"){const _=e.addObserver(t,a,c);return()=>{y=!0,_()}}else{const _=e.addObserver(t);return()=>{y=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(t["X-Firebase-Client"]=a);const c=await this._getAppCheckToken();return c&&(t["X-Firebase-AppCheck"]=c),t}async _getAppCheckToken(){var e;if(Is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&mT(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Pf(i){return $r(i)}class sx{constructor(e){this.auth=e,this.observer=null,this.addObserver=rC(t=>this.observer=t)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ng={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UT(i){ng=i}function VT(i){return ng.loadJS(i)}function FT(){return ng.gapiScript}function zT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(i,e){const t=Q1(i,"auth");if(t.isInitialized()){const c=t.getImmediate(),f=t.getOptions();if(hf(f,e??{}))return c;$s(c,"already-initialized")}return t.initialize({options:e})}function GT(i,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(Ta);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function qT(i,e,t){const a=Pf(i);St(a._canInitEmulator,a,"emulator-config-failed"),St(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const c=!1,f=Aw(e),{host:y,port:b}=YT(e),_=b===null?"":`:${b}`;a.config.emulator={url:`${f}//${y}${_}/`},a.settings.appVerificationDisabledForTesting=!0,a.emulatorConfig=Object.freeze({host:y,port:b,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:c})}),XT()}function Aw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function YT(i){const e=Aw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(a);if(c){const f=c[1];return{host:f,port:ax(a.substr(f.length+1))}}else{const[f,y]=a.split(":");return{host:f,port:ax(y)}}}function ax(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function XT(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Aa("not implemented")}_getIdTokenResponse(e){return Aa("not implemented")}_linkToIdToken(e,t){return Aa("not implemented")}_getReauthenticationResolver(e){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(i,e){return vT(i,"POST","/v1/accounts:signInWithIdp",J1(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="http://localhost";class el extends Cw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$s("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:c}=t,f=W1(t,["providerId","signInMethod"]);if(!a||!c)return null;const y=new el(a,c);return y.idToken=f.idToken||void 0,y.accessToken=f.accessToken||void 0,y.secret=f.secret,y.nonce=f.nonce,y.pendingToken=f.pendingToken||null,y}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Zl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:QT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends rg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends ku{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.FACEBOOK_SIGN_IN_METHOD="facebook.com";co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return el._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ba.credential(t,a)}catch{return null}}}ba.GOOGLE_SIGN_IN_METHOD="google.com";ba.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends ku{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.GITHUB_SIGN_IN_METHOD="github.com";uo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends ku{constructor(){super("twitter.com")}static credential(e,t){return el._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ho.credential(t,a)}catch{return null}}}ho.TWITTER_SIGN_IN_METHOD="twitter.com";ho.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,c=!1){const f=await Ca._fromIdTokenResponse(e,a,c),y=ox(a);return new nc({user:f,providerId:y,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const c=ox(a);return new nc({user:e,providerId:c,_tokenResponse:a,operationType:t})}}function ox(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends ka{constructor(e,t,a,c){var f;super(t.code,t.message),this.operationType=a,this.user=c,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:(f=e.tenantId)!==null&&f!==void 0?f:void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,c){return new mf(e,t,a,c)}}function Tw(i,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(i,f,e,a):f})}async function WT(i,e,t=!1){const a=await tc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return nc._forOperation(i,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(i,e,t=!1){const{auth:a}=i;if(Is(a.app))return Promise.reject($o(a));const c="reauthenticate";try{const f=await tc(i,Tw(a,c,e,i),t);St(f.idToken,a,"internal-error");const y=eg(f.idToken);St(y,a,"internal-error");const{sub:b}=y;return St(i.uid===b,a,"user-mismatch"),nc._forOperation(i,c,f)}catch(f){throw(f==null?void 0:f.code)==="auth/user-not-found"&&$s(a,"user-mismatch"),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(i,e,t=!1){if(Is(i.app))return Promise.reject($o(i));const a="signIn",c=await Tw(i,a,e),f=await nc._fromIdTokenResponse(i,a,c);return t||await i._updateCurrentUser(f.user),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(i,e){return sl(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const a=$r(i),f={idToken:await a.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},y=await tc(a,$T(a.auth,f));a.displayName=y.displayName||null,a.photoURL=y.photoUrl||null;const b=a.providerData.find(({providerId:_})=>_==="password");b&&(b.displayName=a.displayName,b.photoURL=a.photoURL),await a._updateTokensIfNecessary(y)}function eS(i,e,t,a){return $r(i).onIdTokenChanged(e,t,a)}function tS(i,e,t){return $r(i).beforeAuthStateChanged(e,t)}function Sw(i){return $r(i).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=1e3,rS=10;class Nw extends Iw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),c=this.localCache[t];a!==c&&e(t,c,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((y,b,_)=>{this.notifyListeners(y,_)});return}const a=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const y=this.storage.getItem(a);!t&&this.localCache[a]===y||this.notifyListeners(a,y)},f=this.storage.getItem(a);OT()&&f!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,rS):c()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const c of Array.from(a))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},nS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nw.type="LOCAL";const iS=Nw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Iw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rw.type="SESSION";const Dw=Rw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const a=new Bf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:c,data:f}=t.data,y=this.handlersMap[c];if(!(y!=null&&y.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:c});const b=Array.from(y).map(async w=>w(t.origin,f)),_=await sS(b);t.ports[0].postMessage({status:"done",eventId:a,eventType:c,response:_})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(i="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let f,y;return new Promise((b,_)=>{const w=ig("",20);c.port1.start();const S=setTimeout(()=>{_(new Error("unsupported_event"))},a);y={messageChannel:c,onMessage(R){const P=R;if(P.data.eventId===w)switch(P.data.status){case"ack":clearTimeout(S),f=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),b(P.data.response);break;default:clearTimeout(S),clearTimeout(f),_(new Error("invalid_response"));break}}},this.handlers.add(y),c.port1.addEventListener("message",y.onMessage),this.target.postMessage({eventType:e,eventId:w,data:t},[c.port2])}).finally(()=>{y&&this.removeMessageHandler(y)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(){return window}function oS(i){Ws().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(){return typeof Ws().WorkerGlobalScope<"u"&&typeof Ws().importScripts=="function"}async function lS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cS(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function uS(){return Mw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="firebaseLocalStorageDb",hS=1,xf="firebaseLocalStorage",Lw="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jf(i,e){return i.transaction([xf],e?"readwrite":"readonly").objectStore(xf)}function fS(){const i=indexedDB.deleteDatabase(Ow);return new Pu(i).toPromise()}function m1(){const i=indexedDB.open(Ow,hS);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(xf,{keyPath:Lw})}catch(c){t(c)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(xf)?e(a):(a.close(),await fS(),e(await m1()))})})}async function lx(i,e,t){const a=jf(i,!0).put({[Lw]:e,value:t});return new Pu(a).toPromise()}async function dS(i,e){const t=jf(i,!1).get(e),a=await new Pu(t).toPromise();return a===void 0?null:a.value}function cx(i,e){const t=jf(i,!0).delete(e);return new Pu(t).toPromise()}const gS=800,mS=3;class kw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>mS)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bf._getInstance(uS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await lS(),!this.activeServiceWorker)return;this.sender=new aS(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((t=a[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await m1();return await lx(e,pf,"1"),await cx(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>lx(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>dS(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const f=jf(c,!1).getAll();return new Pu(f).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:c,value:f}of e)a.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(f)&&(this.notifyListeners(c,f),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!a.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const c of Array.from(a))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kw.type="LOCAL";const pS=kw;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(i,e){return e?Ta(e):(St(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends Cw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xS(i){return ZT(i.auth,new sg(i),i.bypassAuthState)}function yS(i){const{auth:e,user:t}=i;return St(t,e,"internal-error"),KT(t,new sg(i),i.bypassAuthState)}async function wS(i){const{auth:e,user:t}=i;return St(t,e,"internal-error"),WT(t,new sg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t,a,c,f=!1){this.auth=e,this.resolver=a,this.user=c,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:c,tenantId:f,error:y,type:b}=e;if(y){this.reject(y);return}const _={auth:this.auth,requestUri:t,sessionId:a,tenantId:f||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(b)(_))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xS;case"linkViaPopup":case"linkViaRedirect":return wS;case"reauthViaPopup":case"reauthViaRedirect":return yS;default:$s(this.auth,"internal-error")}}resolve(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new Lu(2e3,1e4);async function _S(i,e,t){if(Is(i.app))return Promise.reject(Ns(i,"operation-not-supported-in-this-environment"));const a=Pf(i);pT(i,e,rg);const c=Pw(a,t);return new Ko(a,"signInViaPopup",e,c).executeNotNull()}class Ko extends Bw{constructor(e,t,a,c,f){super(e,t,c,f),this.provider=a,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return St(e,this.auth,"internal-error"),e}async onExecution(){Da(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if(!((a=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ES.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="pendingRedirect",Jh=new Map;class bS extends Bw{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const a=await AS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AS(i,e){const t=SS(e),a=TS(i);if(!await a._isAvailable())return!1;const c=await a._get(t)==="true";return await a._remove(t),c}function CS(i,e){Jh.set(i._key(),e)}function TS(i){return Ta(i._redirectPersistence)}function SS(i){return $h(vS,i.config.apiKey,i.name)}async function IS(i,e,t=!1){if(Is(i.app))return Promise.reject($o(i));const a=Pf(i),c=Pw(a,e),y=await new bS(a,c,t).execute();return y&&!t&&(delete y.user._redirectEventId,await a._persistUserIfCurrent(y.user),await a._setRedirectUser(null,e)),y}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=10*60*1e3;class RS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!jw(e)){const c=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";t.onError(Ns(this.auth,c))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NS&&this.cachedEventUids.clear(),this.cachedEventUids.has(ux(e))}saveEventToCache(e){this.cachedEventUids.add(ux(e)),this.lastProcessedEventTime=Date.now()}}function ux(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function jw({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(i,e={}){return sl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LS=/^https?/;async function kS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await MS(i);for(const t of e)try{if(PS(t))return}catch{}$s(i,"unauthorized-domain")}function PS(i){const e=d1(),{protocol:t,hostname:a}=new URL(e);if(i.startsWith("chrome-extension://")){const y=new URL(i);return y.hostname===""&&a===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&y.hostname===a}if(!LS.test(t))return!1;if(OS.test(i))return a===i;const c=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Lu(3e4,6e4);function hx(){const i=Ws().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function jS(i){return new Promise((e,t)=>{var a,c,f;function y(){hx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hx(),t(Ns(i,"network-request-failed"))},timeout:BS.get()})}if(!((c=(a=Ws().gapi)===null||a===void 0?void 0:a.iframes)===null||c===void 0)&&c.Iframe)e(gapi.iframes.getContext());else if(!((f=Ws().gapi)===null||f===void 0)&&f.load)y();else{const b=zT("iframefcb");return Ws()[b]=()=>{gapi.load?y():t(Ns(i,"network-request-failed"))},VT(`${FT()}?onload=${b}`).catch(_=>t(_))}}).catch(e=>{throw ef=null,e})}let ef=null;function US(i){return ef=ef||jS(i),ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new Lu(5e3,15e3),FS="__/auth/iframe",zS="emulator/auth/iframe",HS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qS(i){const e=i.config;St(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?$1(e,zS):`https://${i.config.authDomain}/${FS}`,a={apiKey:e.apiKey,appName:i.name,v:fc},c=GS.get(i.config.apiHost);c&&(a.eid=c);const f=i._getFrameworks();return f.length&&(a.fw=f.join(",")),`${t}?${Ou(a).slice(1)}`}async function YS(i){const e=await US(i),t=Ws().gapi;return St(t,i,"internal-error"),e.open({where:document.body,url:qS(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HS,dontclear:!0},a=>new Promise(async(c,f)=>{await a.restyle({setHideOnLeave:!1});const y=Ns(i,"network-request-failed"),b=Ws().setTimeout(()=>{f(y)},VS.get());function _(){Ws().clearTimeout(b),c(a)}a.ping(_).then(_,()=>{f(y)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QS=500,WS=600,KS="_blank",ZS="http://localhost";class fx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $S(i,e,t,a=QS,c=WS){const f=Math.max((window.screen.availHeight-c)/2,0).toString(),y=Math.max((window.screen.availWidth-a)/2,0).toString();let b="";const _=Object.assign(Object.assign({},XS),{width:a.toString(),height:c.toString(),top:f,left:y}),w=ui().toLowerCase();t&&(b=xw(w)?KS:t),mw(w)&&(e=e||ZS,_.scrollbars="yes");const S=Object.entries(_).reduce((P,[F,Y])=>`${P}${F}=${Y},`,"");if(MT(w)&&b!=="_self")return JS(e||"",b),new fx(null);const R=window.open(e||"",b,S);St(R,i,"popup-blocked");try{R.focus()}catch{}return new fx(R)}function JS(i,e){const t=document.createElement("a");t.href=i,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="__/auth/handler",t3="emulator/auth/handler",n3=encodeURIComponent("fac");async function dx(i,e,t,a,c,f){St(i.config.authDomain,i,"auth-domain-config-required"),St(i.config.apiKey,i,"invalid-api-key");const y={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:a,v:fc,eventId:c};if(e instanceof rg){e.setDefaultLanguage(i.languageCode),y.providerId=e.providerId||"",nC(e.getCustomParameters())||(y.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,R]of Object.entries({}))y[S]=R}if(e instanceof ku){const S=e.getScopes().filter(R=>R!=="");S.length>0&&(y.scopes=S.join(","))}i.tenantId&&(y.tid=i.tenantId);const b=y;for(const S of Object.keys(b))b[S]===void 0&&delete b[S];const _=await i._getAppCheckToken(),w=_?`#${n3}=${encodeURIComponent(_)}`:"";return`${r3(i)}?${Ou(b).slice(1)}${w}`}function r3({config:i}){return i.emulator?$1(i,t3):`https://${i.authDomain}/${e3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="webStorageSupport";class i3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dw,this._completeRedirectFn=IS,this._overrideRedirectResult=CS}async _openPopup(e,t,a,c){var f;Da((f=this.eventManagers[e._key()])===null||f===void 0?void 0:f.manager,"_initialize() not called before _openPopup()");const y=await dx(e,t,a,d1(),c);return $S(e,y,ig())}async _openRedirect(e,t,a,c){await this._originValidation(e);const f=await dx(e,t,a,d1(),c);return oS(f),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:f}=this.eventManagers[t];return c?Promise.resolve(c):(Da(f,"If manager is not set, promise should be"),f)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await YS(e),a=new RS(e);return t.register("authEvent",c=>(St(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:a.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(J0,{type:J0},c=>{var f;const y=(f=c==null?void 0:c[0])===null||f===void 0?void 0:f[J0];y!==void 0&&t(!!y),$s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vw()||pw()||tg()}}const s3=i3;var gx="@firebase/auth",mx="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l3(i){ec(new Jo("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),f=e.getProvider("app-check-internal"),{apiKey:y,authDomain:b}=a.options;St(y&&!y.includes(":"),"invalid-api-key",{appName:a.name});const _={apiKey:y,authDomain:b,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bw(i)},w=new jT(a,c,f,_);return GT(w,t),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),ec(new Jo("auth-internal",e=>{const t=Pf(e.getProvider("auth").getImmediate());return(a=>new a3(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),po(gx,mx,o3(i)),po(gx,mx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=5*60,u3=ew("authIdTokenMaxAge")||c3;let px=null;const h3=i=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>u3)return;const c=t==null?void 0:t.token;px!==c&&(px=c,await fetch(i,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function So(i=iw()){const e=Q1(i,"auth");if(e.isInitialized())return e.getImmediate();const t=HT(i,{popupRedirectResolver:s3,persistence:[pS,iS,Dw]}),a=ew("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const f=new URL(a,location.origin);if(location.origin===f.origin){const y=h3(f.toString());tS(t,y,()=>y(t.currentUser)),eS(t,b=>y(b))}}const c=$y("auth");return c&&qT(t,`http://${c}`),t}function f3(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}UT({loadJS(i){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=e,a.onerror=c=>{const f=Ns("internal-error");f.customData=c,t(f)},a.type="text/javascript",a.charset="UTF-8",f3().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l3("Browser");var xx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xo,Uw;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(z,V){function k(){}k.prototype=V.prototype,z.D=V.prototype,z.prototype=new k,z.prototype.constructor=z,z.C=function(G,K,$){for(var X=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)X[Oe-2]=arguments[Oe];return V.prototype[K].apply(G,X)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(z,V,k){k||(k=0);var G=Array(16);if(typeof V=="string")for(var K=0;16>K;++K)G[K]=V.charCodeAt(k++)|V.charCodeAt(k++)<<8|V.charCodeAt(k++)<<16|V.charCodeAt(k++)<<24;else for(K=0;16>K;++K)G[K]=V[k++]|V[k++]<<8|V[k++]<<16|V[k++]<<24;V=z.g[0],k=z.g[1],K=z.g[2];var $=z.g[3],X=V+($^k&(K^$))+G[0]+3614090360&4294967295;V=k+(X<<7&4294967295|X>>>25),X=$+(K^V&(k^K))+G[1]+3905402710&4294967295,$=V+(X<<12&4294967295|X>>>20),X=K+(k^$&(V^k))+G[2]+606105819&4294967295,K=$+(X<<17&4294967295|X>>>15),X=k+(V^K&($^V))+G[3]+3250441966&4294967295,k=K+(X<<22&4294967295|X>>>10),X=V+($^k&(K^$))+G[4]+4118548399&4294967295,V=k+(X<<7&4294967295|X>>>25),X=$+(K^V&(k^K))+G[5]+1200080426&4294967295,$=V+(X<<12&4294967295|X>>>20),X=K+(k^$&(V^k))+G[6]+2821735955&4294967295,K=$+(X<<17&4294967295|X>>>15),X=k+(V^K&($^V))+G[7]+4249261313&4294967295,k=K+(X<<22&4294967295|X>>>10),X=V+($^k&(K^$))+G[8]+1770035416&4294967295,V=k+(X<<7&4294967295|X>>>25),X=$+(K^V&(k^K))+G[9]+2336552879&4294967295,$=V+(X<<12&4294967295|X>>>20),X=K+(k^$&(V^k))+G[10]+4294925233&4294967295,K=$+(X<<17&4294967295|X>>>15),X=k+(V^K&($^V))+G[11]+2304563134&4294967295,k=K+(X<<22&4294967295|X>>>10),X=V+($^k&(K^$))+G[12]+1804603682&4294967295,V=k+(X<<7&4294967295|X>>>25),X=$+(K^V&(k^K))+G[13]+4254626195&4294967295,$=V+(X<<12&4294967295|X>>>20),X=K+(k^$&(V^k))+G[14]+2792965006&4294967295,K=$+(X<<17&4294967295|X>>>15),X=k+(V^K&($^V))+G[15]+1236535329&4294967295,k=K+(X<<22&4294967295|X>>>10),X=V+(K^$&(k^K))+G[1]+4129170786&4294967295,V=k+(X<<5&4294967295|X>>>27),X=$+(k^K&(V^k))+G[6]+3225465664&4294967295,$=V+(X<<9&4294967295|X>>>23),X=K+(V^k&($^V))+G[11]+643717713&4294967295,K=$+(X<<14&4294967295|X>>>18),X=k+($^V&(K^$))+G[0]+3921069994&4294967295,k=K+(X<<20&4294967295|X>>>12),X=V+(K^$&(k^K))+G[5]+3593408605&4294967295,V=k+(X<<5&4294967295|X>>>27),X=$+(k^K&(V^k))+G[10]+38016083&4294967295,$=V+(X<<9&4294967295|X>>>23),X=K+(V^k&($^V))+G[15]+3634488961&4294967295,K=$+(X<<14&4294967295|X>>>18),X=k+($^V&(K^$))+G[4]+3889429448&4294967295,k=K+(X<<20&4294967295|X>>>12),X=V+(K^$&(k^K))+G[9]+568446438&4294967295,V=k+(X<<5&4294967295|X>>>27),X=$+(k^K&(V^k))+G[14]+3275163606&4294967295,$=V+(X<<9&4294967295|X>>>23),X=K+(V^k&($^V))+G[3]+4107603335&4294967295,K=$+(X<<14&4294967295|X>>>18),X=k+($^V&(K^$))+G[8]+1163531501&4294967295,k=K+(X<<20&4294967295|X>>>12),X=V+(K^$&(k^K))+G[13]+2850285829&4294967295,V=k+(X<<5&4294967295|X>>>27),X=$+(k^K&(V^k))+G[2]+4243563512&4294967295,$=V+(X<<9&4294967295|X>>>23),X=K+(V^k&($^V))+G[7]+1735328473&4294967295,K=$+(X<<14&4294967295|X>>>18),X=k+($^V&(K^$))+G[12]+2368359562&4294967295,k=K+(X<<20&4294967295|X>>>12),X=V+(k^K^$)+G[5]+4294588738&4294967295,V=k+(X<<4&4294967295|X>>>28),X=$+(V^k^K)+G[8]+2272392833&4294967295,$=V+(X<<11&4294967295|X>>>21),X=K+($^V^k)+G[11]+1839030562&4294967295,K=$+(X<<16&4294967295|X>>>16),X=k+(K^$^V)+G[14]+4259657740&4294967295,k=K+(X<<23&4294967295|X>>>9),X=V+(k^K^$)+G[1]+2763975236&4294967295,V=k+(X<<4&4294967295|X>>>28),X=$+(V^k^K)+G[4]+1272893353&4294967295,$=V+(X<<11&4294967295|X>>>21),X=K+($^V^k)+G[7]+4139469664&4294967295,K=$+(X<<16&4294967295|X>>>16),X=k+(K^$^V)+G[10]+3200236656&4294967295,k=K+(X<<23&4294967295|X>>>9),X=V+(k^K^$)+G[13]+681279174&4294967295,V=k+(X<<4&4294967295|X>>>28),X=$+(V^k^K)+G[0]+3936430074&4294967295,$=V+(X<<11&4294967295|X>>>21),X=K+($^V^k)+G[3]+3572445317&4294967295,K=$+(X<<16&4294967295|X>>>16),X=k+(K^$^V)+G[6]+76029189&4294967295,k=K+(X<<23&4294967295|X>>>9),X=V+(k^K^$)+G[9]+3654602809&4294967295,V=k+(X<<4&4294967295|X>>>28),X=$+(V^k^K)+G[12]+3873151461&4294967295,$=V+(X<<11&4294967295|X>>>21),X=K+($^V^k)+G[15]+530742520&4294967295,K=$+(X<<16&4294967295|X>>>16),X=k+(K^$^V)+G[2]+3299628645&4294967295,k=K+(X<<23&4294967295|X>>>9),X=V+(K^(k|~$))+G[0]+4096336452&4294967295,V=k+(X<<6&4294967295|X>>>26),X=$+(k^(V|~K))+G[7]+1126891415&4294967295,$=V+(X<<10&4294967295|X>>>22),X=K+(V^($|~k))+G[14]+2878612391&4294967295,K=$+(X<<15&4294967295|X>>>17),X=k+($^(K|~V))+G[5]+4237533241&4294967295,k=K+(X<<21&4294967295|X>>>11),X=V+(K^(k|~$))+G[12]+1700485571&4294967295,V=k+(X<<6&4294967295|X>>>26),X=$+(k^(V|~K))+G[3]+2399980690&4294967295,$=V+(X<<10&4294967295|X>>>22),X=K+(V^($|~k))+G[10]+4293915773&4294967295,K=$+(X<<15&4294967295|X>>>17),X=k+($^(K|~V))+G[1]+2240044497&4294967295,k=K+(X<<21&4294967295|X>>>11),X=V+(K^(k|~$))+G[8]+1873313359&4294967295,V=k+(X<<6&4294967295|X>>>26),X=$+(k^(V|~K))+G[15]+4264355552&4294967295,$=V+(X<<10&4294967295|X>>>22),X=K+(V^($|~k))+G[6]+2734768916&4294967295,K=$+(X<<15&4294967295|X>>>17),X=k+($^(K|~V))+G[13]+1309151649&4294967295,k=K+(X<<21&4294967295|X>>>11),X=V+(K^(k|~$))+G[4]+4149444226&4294967295,V=k+(X<<6&4294967295|X>>>26),X=$+(k^(V|~K))+G[11]+3174756917&4294967295,$=V+(X<<10&4294967295|X>>>22),X=K+(V^($|~k))+G[2]+718787259&4294967295,K=$+(X<<15&4294967295|X>>>17),X=k+($^(K|~V))+G[9]+3951481745&4294967295,z.g[0]=z.g[0]+V&4294967295,z.g[1]=z.g[1]+(K+(X<<21&4294967295|X>>>11))&4294967295,z.g[2]=z.g[2]+K&4294967295,z.g[3]=z.g[3]+$&4294967295}a.prototype.u=function(z,V){V===void 0&&(V=z.length);for(var k=V-this.blockSize,G=this.B,K=this.h,$=0;$<V;){if(K==0)for(;$<=k;)c(this,z,$),$+=this.blockSize;if(typeof z=="string"){for(;$<V;)if(G[K++]=z.charCodeAt($++),K==this.blockSize){c(this,G),K=0;break}}else for(;$<V;)if(G[K++]=z[$++],K==this.blockSize){c(this,G),K=0;break}}this.h=K,this.o+=V},a.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var V=1;V<z.length-8;++V)z[V]=0;var k=8*this.o;for(V=z.length-8;V<z.length;++V)z[V]=k&255,k/=256;for(this.u(z),z=Array(16),V=k=0;4>V;++V)for(var G=0;32>G;G+=8)z[k++]=this.g[V]>>>G&255;return z};function f(z,V){var k=b;return Object.prototype.hasOwnProperty.call(k,z)?k[z]:k[z]=V(z)}function y(z,V){this.h=V;for(var k=[],G=!0,K=z.length-1;0<=K;K--){var $=z[K]|0;G&&$==V||(k[K]=$,G=!1)}this.g=k}var b={};function _(z){return-128<=z&&128>z?f(z,function(V){return new y([V|0],0>V?-1:0)}):new y([z|0],0>z?-1:0)}function w(z){if(isNaN(z)||!isFinite(z))return R;if(0>z)return W(w(-z));for(var V=[],k=1,G=0;z>=k;G++)V[G]=z/k|0,k*=4294967296;return new y(V,0)}function S(z,V){if(z.length==0)throw Error("number format error: empty string");if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(z.charAt(0)=="-")return W(S(z.substring(1),V));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=w(Math.pow(V,8)),G=R,K=0;K<z.length;K+=8){var $=Math.min(8,z.length-K),X=parseInt(z.substring(K,K+$),V);8>$?($=w(Math.pow(V,$)),G=G.j($).add(w(X))):(G=G.j(k),G=G.add(w(X)))}return G}var R=_(0),P=_(1),F=_(16777216);i=y.prototype,i.m=function(){if(ee(this))return-W(this).m();for(var z=0,V=1,k=0;k<this.g.length;k++){var G=this.i(k);z+=(0<=G?G:4294967296+G)*V,V*=4294967296}return z},i.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(Y(this))return"0";if(ee(this))return"-"+W(this).toString(z);for(var V=w(Math.pow(z,6)),k=this,G="";;){var K=_e(k,V).g;k=de(k,K.j(V));var $=((0<k.g.length?k.g[0]:k.h)>>>0).toString(z);if(k=K,Y(k))return $+G;for(;6>$.length;)$="0"+$;G=$+G}},i.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function Y(z){if(z.h!=0)return!1;for(var V=0;V<z.g.length;V++)if(z.g[V]!=0)return!1;return!0}function ee(z){return z.h==-1}i.l=function(z){return z=de(this,z),ee(z)?-1:Y(z)?0:1};function W(z){for(var V=z.g.length,k=[],G=0;G<V;G++)k[G]=~z.g[G];return new y(k,~z.h).add(P)}i.abs=function(){return ee(this)?W(this):this},i.add=function(z){for(var V=Math.max(this.g.length,z.g.length),k=[],G=0,K=0;K<=V;K++){var $=G+(this.i(K)&65535)+(z.i(K)&65535),X=($>>>16)+(this.i(K)>>>16)+(z.i(K)>>>16);G=X>>>16,$&=65535,X&=65535,k[K]=X<<16|$}return new y(k,k[k.length-1]&-2147483648?-1:0)};function de(z,V){return z.add(W(V))}i.j=function(z){if(Y(this)||Y(z))return R;if(ee(this))return ee(z)?W(this).j(W(z)):W(W(this).j(z));if(ee(z))return W(this.j(W(z)));if(0>this.l(F)&&0>z.l(F))return w(this.m()*z.m());for(var V=this.g.length+z.g.length,k=[],G=0;G<2*V;G++)k[G]=0;for(G=0;G<this.g.length;G++)for(var K=0;K<z.g.length;K++){var $=this.i(G)>>>16,X=this.i(G)&65535,Oe=z.i(K)>>>16,oe=z.i(K)&65535;k[2*G+2*K]+=X*oe,fe(k,2*G+2*K),k[2*G+2*K+1]+=$*oe,fe(k,2*G+2*K+1),k[2*G+2*K+1]+=X*Oe,fe(k,2*G+2*K+1),k[2*G+2*K+2]+=$*Oe,fe(k,2*G+2*K+2)}for(G=0;G<V;G++)k[G]=k[2*G+1]<<16|k[2*G];for(G=V;G<2*V;G++)k[G]=0;return new y(k,0)};function fe(z,V){for(;(z[V]&65535)!=z[V];)z[V+1]+=z[V]>>>16,z[V]&=65535,V++}function ie(z,V){this.g=z,this.h=V}function _e(z,V){if(Y(V))throw Error("division by zero");if(Y(z))return new ie(R,R);if(ee(z))return V=_e(W(z),V),new ie(W(V.g),W(V.h));if(ee(V))return V=_e(z,W(V)),new ie(W(V.g),V.h);if(30<z.g.length){if(ee(z)||ee(V))throw Error("slowDivide_ only works with positive integers.");for(var k=P,G=V;0>=G.l(z);)k=Be(k),G=Be(G);var K=ke(k,1),$=ke(G,1);for(G=ke(G,2),k=ke(k,2);!Y(G);){var X=$.add(G);0>=X.l(z)&&(K=K.add(k),$=X),G=ke(G,1),k=ke(k,1)}return V=de(z,K.j(V)),new ie(K,V)}for(K=R;0<=z.l(V);){for(k=Math.max(1,Math.floor(z.m()/V.m())),G=Math.ceil(Math.log(k)/Math.LN2),G=48>=G?1:Math.pow(2,G-48),$=w(k),X=$.j(V);ee(X)||0<X.l(z);)k-=G,$=w(k),X=$.j(V);Y($)&&($=P),K=K.add($),z=de(z,X)}return new ie(K,z)}i.A=function(z){return _e(this,z).h},i.and=function(z){for(var V=Math.max(this.g.length,z.g.length),k=[],G=0;G<V;G++)k[G]=this.i(G)&z.i(G);return new y(k,this.h&z.h)},i.or=function(z){for(var V=Math.max(this.g.length,z.g.length),k=[],G=0;G<V;G++)k[G]=this.i(G)|z.i(G);return new y(k,this.h|z.h)},i.xor=function(z){for(var V=Math.max(this.g.length,z.g.length),k=[],G=0;G<V;G++)k[G]=this.i(G)^z.i(G);return new y(k,this.h^z.h)};function Be(z){for(var V=z.g.length+1,k=[],G=0;G<V;G++)k[G]=z.i(G)<<1|z.i(G-1)>>>31;return new y(k,z.h)}function ke(z,V){var k=V>>5;V%=32;for(var G=z.g.length-k,K=[],$=0;$<G;$++)K[$]=0<V?z.i($+k)>>>V|z.i($+k+1)<<32-V:z.i($+k);return new y(K,z.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Uw=a,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.A,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=w,y.fromString=S,xo=y}).apply(typeof xx<"u"?xx:typeof self<"u"?self:typeof window<"u"?window:{});var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vw,cu,Fw,tf,p1,zw,Hw,Gw;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,I,D){return x==Array.prototype||x==Object.prototype||(x[I]=D.value),x};function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gh=="object"&&Gh];for(var I=0;I<x.length;++I){var D=x[I];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var a=t(this);function c(x,I){if(I)e:{var D=a;x=x.split(".");for(var U=0;U<x.length-1;U++){var ce=x[U];if(!(ce in D))break e;D=D[ce]}x=x[x.length-1],U=D[x],I=I(U),I!=U&&I!=null&&e(D,x,{configurable:!0,writable:!0,value:I})}}function f(x,I){x instanceof String&&(x+="");var D=0,U=!1,ce={next:function(){if(!U&&D<x.length){var ye=D++;return{value:I(ye,x[ye]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}c("Array.prototype.values",function(x){return x||function(){return f(this,function(I,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var y=y||{},b=this||self;function _(x){var I=typeof x;return I=I!="object"?I:x?Array.isArray(x)?"array":I:"null",I=="array"||I=="object"&&typeof x.length=="number"}function w(x){var I=typeof x;return I=="object"&&x!=null||I=="function"}function S(x,I,D){return x.call.apply(x.bind,arguments)}function R(x,I,D){if(!x)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,U),x.apply(I,ce)}}return function(){return x.apply(I,arguments)}}function P(x,I,D){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:R,P.apply(null,arguments)}function F(x,I){var D=Array.prototype.slice.call(arguments,1);return function(){var U=D.slice();return U.push.apply(U,arguments),x.apply(this,U)}}function Y(x,I){function D(){}D.prototype=I.prototype,x.aa=I.prototype,x.prototype=new D,x.prototype.constructor=x,x.Qb=function(U,ce,ye){for(var Xe=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)Xe[Yt-2]=arguments[Yt];return I.prototype[ce].apply(U,Xe)}}function ee(x){const I=x.length;if(0<I){const D=Array(I);for(let U=0;U<I;U++)D[U]=x[U];return D}return[]}function W(x,I){for(let D=1;D<arguments.length;D++){const U=arguments[D];if(_(U)){const ce=x.length||0,ye=U.length||0;x.length=ce+ye;for(let Xe=0;Xe<ye;Xe++)x[ce+Xe]=U[Xe]}else x.push(U)}}class de{constructor(I,D){this.i=I,this.j=D,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function fe(x){return/^[\s\xa0]*$/.test(x)}function ie(){var x=b.navigator;return x&&(x=x.userAgent)?x:""}function _e(x){return _e[" "](x),x}_e[" "]=function(){};var Be=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function ke(x,I,D){for(const U in x)I.call(D,x[U],U,x)}function z(x,I){for(const D in x)I.call(void 0,x[D],D,x)}function V(x){const I={};for(const D in x)I[D]=x[D];return I}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(x,I){let D,U;for(let ce=1;ce<arguments.length;ce++){U=arguments[ce];for(D in U)x[D]=U[D];for(let ye=0;ye<k.length;ye++)D=k[ye],Object.prototype.hasOwnProperty.call(U,D)&&(x[D]=U[D])}}function K(x){var I=1;x=x.split(":");const D=[];for(;0<I&&x.length;)D.push(x.shift()),I--;return x.length&&D.push(x.join(":")),D}function $(x){b.setTimeout(()=>{throw x},0)}function X(){var x=lt;let I=null;return x.g&&(I=x.g,x.g=x.g.next,x.g||(x.h=null),I.next=null),I}class Oe{constructor(){this.h=this.g=null}add(I,D){const U=oe.get();U.set(I,D),this.h?this.h.next=U:this.g=U,this.h=U}}var oe=new de(()=>new Ie,x=>x.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(I,D){this.h=I,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Qe=!1,lt=new Oe,te=()=>{const x=b.Promise.resolve(void 0);Ae=()=>{x.then(Ne)}};var Ne=()=>{for(var x;x=X();){try{x.h.call(x.g)}catch(D){$(D)}var I=oe;I.j(x),100>I.h&&(I.h++,x.next=I.g,I.g=x)}Qe=!1};function Pe(){this.s=this.s,this.C=this.C}Pe.prototype.s=!1,Pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(x,I){this.type=x,this.g=this.target=I,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var ze=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var x=!1,I=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const D=()=>{};b.addEventListener("test",D,I),b.removeEventListener("test",D,I)}catch{}return x}();function yt(x,I){if(He.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var D=this.type=x.type,U=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=I,I=x.relatedTarget){if(Be){e:{try{_e(I.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(I=null)}}else D=="mouseover"?I=x.fromElement:D=="mouseout"&&(I=x.toElement);this.relatedTarget=I,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:Re[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&yt.aa.h.call(this)}}Y(yt,He);var Re={2:"touch",3:"pen",4:"mouse"};yt.prototype.h=function(){yt.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function nt(x,I,D,U,ce){this.listener=x,this.proxy=null,this.src=I,this.type=D,this.capture=!!U,this.ha=ce,this.key=++Fe,this.da=this.fa=!1}function tt(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function gt(x){this.src=x,this.g={},this.h=0}gt.prototype.add=function(x,I,D,U,ce){var ye=x.toString();x=this.g[ye],x||(x=this.g[ye]=[],this.h++);var Xe=xt(x,I,U,ce);return-1<Xe?(I=x[Xe],D||(I.fa=!1)):(I=new nt(I,this.src,ye,!!U,ce),I.fa=D,x.push(I)),I};function An(x,I){var D=I.type;if(D in x.g){var U=x.g[D],ce=Array.prototype.indexOf.call(U,I,void 0),ye;(ye=0<=ce)&&Array.prototype.splice.call(U,ce,1),ye&&(tt(I),x.g[D].length==0&&(delete x.g[D],x.h--))}}function xt(x,I,D,U){for(var ce=0;ce<x.length;++ce){var ye=x[ce];if(!ye.da&&ye.listener==I&&ye.capture==!!D&&ye.ha==U)return ce}return-1}var We="closure_lm_"+(1e6*Math.random()|0),Ze={};function st(x,I,D,U,ce){if(Array.isArray(I)){for(var ye=0;ye<I.length;ye++)st(x,I[ye],D,U,ce);return null}return D=xi(D),x&&x[Ue]?x.K(I,D,w(U)?!!U.capture:!1,ce):at(x,I,D,!1,U,ce)}function at(x,I,D,U,ce,ye){if(!I)throw Error("Invalid event type");var Xe=w(ce)?!!ce.capture:!!ce,Yt=Br(x);if(Yt||(x[We]=Yt=new gt(x)),D=Yt.add(I,D,U,Xe,ye),D.proxy)return D;if(U=it(),D.proxy=U,U.src=x,U.listener=D,x.addEventListener)ze||(ce=Xe),ce===void 0&&(ce=!1),x.addEventListener(I.toString(),U,ce);else if(x.attachEvent)x.attachEvent(Ge(I.toString()),U);else if(x.addListener&&x.removeListener)x.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return D}function it(){function x(D){return I.call(x.src,x.listener,D)}const I=fr;return x}function mt(x,I,D,U,ce){if(Array.isArray(I))for(var ye=0;ye<I.length;ye++)mt(x,I[ye],D,U,ce);else U=w(U)?!!U.capture:!!U,D=xi(D),x&&x[Ue]?(x=x.i,I=String(I).toString(),I in x.g&&(ye=x.g[I],D=xt(ye,D,U,ce),-1<D&&(tt(ye[D]),Array.prototype.splice.call(ye,D,1),ye.length==0&&(delete x.g[I],x.h--)))):x&&(x=Br(x))&&(I=x.g[I.toString()],x=-1,I&&(x=xt(I,D,U,ce)),(D=-1<x?I[x]:null)&&_t(D))}function _t(x){if(typeof x!="number"&&x&&!x.da){var I=x.src;if(I&&I[Ue])An(I.i,x);else{var D=x.type,U=x.proxy;I.removeEventListener?I.removeEventListener(D,U,x.capture):I.detachEvent?I.detachEvent(Ge(D),U):I.addListener&&I.removeListener&&I.removeListener(U),(D=Br(I))?(An(D,x),D.h==0&&(D.src=null,I[We]=null)):tt(x)}}}function Ge(x){return x in Ze?Ze[x]:Ze[x]="on"+x}function fr(x,I){if(x.da)x=!0;else{I=new yt(I,this);var D=x.listener,U=x.ha||x.src;x.fa&&_t(x),x=D.call(U,I)}return x}function Br(x){return x=x[We],x instanceof gt?x:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function xi(x){return typeof x=="function"?x:(x[It]||(x[It]=function(I){return x.handleEvent(I)}),x[It])}function en(){Pe.call(this),this.i=new gt(this),this.M=this,this.F=null}Y(en,Pe),en.prototype[Ue]=!0,en.prototype.removeEventListener=function(x,I,D,U){mt(this,x,I,D,U)};function yn(x,I){var D,U=x.F;if(U)for(D=[];U;U=U.F)D.push(U);if(x=x.M,U=I.type||I,typeof I=="string")I=new He(I,x);else if(I instanceof He)I.target=I.target||x;else{var ce=I;I=new He(U,x),G(I,ce)}if(ce=!0,D)for(var ye=D.length-1;0<=ye;ye--){var Xe=I.g=D[ye];ce=Ln(Xe,U,!0,I)&&ce}if(Xe=I.g=x,ce=Ln(Xe,U,!0,I)&&ce,ce=Ln(Xe,U,!1,I)&&ce,D)for(ye=0;ye<D.length;ye++)Xe=I.g=D[ye],ce=Ln(Xe,U,!1,I)&&ce}en.prototype.N=function(){if(en.aa.N.call(this),this.i){var x=this.i,I;for(I in x.g){for(var D=x.g[I],U=0;U<D.length;U++)tt(D[U]);delete x.g[I],x.h--}}this.F=null},en.prototype.K=function(x,I,D,U){return this.i.add(String(x),I,!1,D,U)},en.prototype.L=function(x,I,D,U){return this.i.add(String(x),I,!0,D,U)};function Ln(x,I,D,U){if(I=x.i.g[String(I)],!I)return!0;I=I.concat();for(var ce=!0,ye=0;ye<I.length;++ye){var Xe=I[ye];if(Xe&&!Xe.da&&Xe.capture==D){var Yt=Xe.listener,jn=Xe.ha||Xe.src;Xe.fa&&An(x.i,Xe),ce=Yt.call(jn,U)!==!1&&ce}}return ce&&!U.defaultPrevented}function Kn(x,I,D){if(typeof x=="function")D&&(x=P(x,D));else if(x&&typeof x.handleEvent=="function")x=P(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:b.setTimeout(x,I||0)}function Ls(x){x.g=Kn(()=>{x.g=null,x.i&&(x.i=!1,Ls(x))},x.l);const I=x.h;x.h=null,x.m.apply(null,I)}class Pi extends Pe{constructor(I,D){super(),this.m=I,this.l=D,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Ls(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(x){Pe.call(this),this.h=x,this.g={}}Y(Bi,Pe);var un=[];function Le(x){ke(x.g,function(I,D){this.g.hasOwnProperty(D)&&_t(I)},x),x.g={}}Bi.prototype.N=function(){Bi.aa.N.call(this),Le(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cn=b.JSON.stringify,Ot=b.JSON.parse,Pt=class{stringify(x){return b.JSON.stringify(x,void 0)}parse(x){return b.JSON.parse(x,void 0)}};function sr(){}sr.prototype.h=null;function yi(x){return x.h||(x.h=x.i())}function jr(){}var Rt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qn(){He.call(this,"d")}Y(qn,He);function ei(){He.call(this,"c")}Y(ei,He);var Ur={},Zn=null;function es(){return Zn=Zn||new en}Ur.La="serverreachability";function Vn(x){He.call(this,Ur.La,x)}Y(Vn,He);function Vr(x){const I=es();yn(I,new Vn(I))}Ur.STAT_EVENT="statevent";function ji(x,I){He.call(this,Ur.STAT_EVENT,x),this.stat=I}Y(ji,He);function tn(x){const I=es();yn(I,new ji(I,x))}Ur.Ma="timingevent";function Pa(x,I){He.call(this,Ur.Ma,x),this.size=I}Y(Pa,He);function Ir(x,I){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){x()},I)}function wi(){this.g=!0}wi.prototype.xa=function(){this.g=!1};function ar(x,I,D,U,ce,ye){x.info(function(){if(x.g)if(ye)for(var Xe="",Yt=ye.split("&"),jn=0;jn<Yt.length;jn++){var Xt=Yt[jn].split("=");if(1<Xt.length){var Sn=Xt[0];Xt=Xt[1];var Hn=Sn.split("_");Xe=2<=Hn.length&&Hn[1]=="type"?Xe+(Sn+"="+Xt+"&"):Xe+(Sn+"=redacted&")}}else Xe=null;else Xe=ye;return"XMLHTTP REQ ("+U+") [attempt "+ce+"]: "+I+`
`+D+`
`+Xe})}function Ei(x,I,D,U,ce,ye,Xe){x.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ce+"]: "+I+`
`+D+`
`+ye+" "+Xe})}function Yn(x,I,D,U){x.info(function(){return"XMLHTTP TEXT ("+I+"): "+wn(x,D)+(U?" "+U:"")})}function Ke(x,I){x.info(function(){return"TIMEOUT: "+I})}wi.prototype.info=function(){};function wn(x,I){if(!x.g)return I;if(!I)return null;try{var D=JSON.parse(I);if(D){for(x=0;x<D.length;x++)if(Array.isArray(D[x])){var U=D[x];if(!(2>U.length)){var ce=U[1];if(Array.isArray(ce)&&!(1>ce.length)){var ye=ce[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var Xe=1;Xe<ce.length;Xe++)ce[Xe]=""}}}}return Cn(D)}catch{return I}}var kn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function Ui(){}Y(Ui,sr),Ui.prototype.g=function(){return new XMLHttpRequest},Ui.prototype.i=function(){return{}},ti=new Ui;function Fr(x,I,D,U){this.j=x,this.i=I,this.l=D,this.R=U||1,this.U=new Bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nr}function Nr(){this.i=null,this.g="",this.h=!1}var _i={},ks={};function dn(x,I,D){x.L=1,x.v=Rn(vt(I)),x.m=D,x.P=!0,En(x,null)}function En(x,I){x.F=Date.now(),Ye(x),x.A=vt(x.v);var D=x.A,U=x.R;Array.isArray(U)||(U=[String(U)]),_n(D.i,"t",U),x.C=0,D=x.j.J,x.h=new Nr,x.g=ml(x.j,D?I:null,!x.m),0<x.O&&(x.M=new Pi(P(x.Y,x,x.g),x.O)),I=x.U,D=x.g,U=x.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(un[0]=ce.toString()),ce=un);for(var ye=0;ye<ce.length;ye++){var Xe=st(D,ce[ye],U||I.handleEvent,!1,I.h||I);if(!Xe)break;I.g[Xe.key]=Xe}I=x.H?V(x.H):{},x.m?(x.u||(x.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,I)):(x.u="GET",x.g.ea(x.A,x.u,null,I)),Vr(),ar(x.i,x.u,x.A,x.l,x.R,x.m)}Fr.prototype.ca=function(x){x=x.target;const I=this.M;I&&Ti(x)==3?I.j():this.Y(x)},Fr.prototype.Y=function(x){try{if(x==this.g)e:{const Hn=Ti(this.g);var I=this.g.Ba();const Jn=this.g.Z();if(!(3>Hn)&&(Hn!=3||this.g&&(this.h.h||this.g.oa()||fl(this.g)))){this.J||Hn!=4||I==7||(I==8||0>=Jn?Vr(3):Vr(2)),me(this);var D=this.g.Z();this.X=D;t:if(Z(this)){var U=fl(this.g);x="";var ce=U.length,ye=Ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ft(this),bt(this);var Xe="";break t}this.h.i=new b.TextDecoder}for(I=0;I<ce;I++)this.h.h=!0,x+=this.h.i.decode(U[I],{stream:!(ye&&I==ce-1)});U.length=0,this.h.g+=x,this.C=0,Xe=this.h.g}else Xe=this.g.oa();if(this.o=D==200,Ei(this.i,this.u,this.A,this.l,this.R,Hn,D),this.o){if(this.T&&!this.K){t:{if(this.g){var Yt,jn=this.g;if((Yt=jn.g?jn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fe(Yt)){var Xt=Yt;break t}}Xt=null}if(D=Xt)Yn(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dr(this,D);else{this.o=!1,this.s=3,tn(12),Ft(this),bt(this);break e}}if(this.P){D=!0;let gr;for(;!this.J&&this.C<Xe.length;)if(gr=Ee(this,Xe),gr==ks){Hn==4&&(this.s=4,tn(14),D=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(gr==_i){this.s=4,tn(15),Yn(this.i,this.l,Xe,"[Invalid Chunk]"),D=!1;break}else Yn(this.i,this.l,gr,null),dr(this,gr);if(Z(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Hn!=4||Xe.length!=0||this.h.h||(this.s=1,tn(16),D=!1),this.o=this.o&&D,!D)Yn(this.i,this.l,Xe,"[Invalid Chunked Response]"),Ft(this),bt(this);else if(0<Xe.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+Xe.length),bs(Sn),Sn.M=!0,tn(11))}}else Yn(this.i,this.l,Xe,null),dr(this,Xe);Hn==4&&Ft(this),this.o&&!this.J&&(Hn==4?Tn(this.j,this):(this.o=!1,Ye(this)))}else an(this.g),D==400&&0<Xe.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),Ft(this),bt(this)}}}catch{}finally{}};function Z(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Ee(x,I){var D=x.C,U=I.indexOf(`
`,D);return U==-1?ks:(D=Number(I.substring(D,U)),isNaN(D)?_i:(U+=1,U+D>I.length?ks:(I=I.slice(U,U+D),x.C=U+D,I)))}Fr.prototype.cancel=function(){this.J=!0,Ft(this)};function Ye(x){x.S=Date.now()+x.I,Ct(x,x.I)}function Ct(x,I){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Ir(P(x.ba,x),I)}function me(x){x.B&&(b.clearTimeout(x.B),x.B=null)}Fr.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Ke(this.i,this.A),this.L!=2&&(Vr(),tn(17)),Ft(this),this.s=2,bt(this)):Ct(this,this.S-x)};function bt(x){x.j.G==0||x.J||Tn(x.j,x)}function Ft(x){me(x);var I=x.M;I&&typeof I.ma=="function"&&I.ma(),x.M=null,Le(x.U),x.g&&(I=x.g,x.g=null,I.abort(),I.ma())}function dr(x,I){try{var D=x.j;if(D.G!=0&&(D.g==x||ts(D.h,x))){if(!x.K&&ts(D.h,x)&&D.G==3){try{var U=D.Da.g.parse(I)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ce=U;if(ce[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<x.F)Vs(D),ja(D);else break e;Do(D),tn(18)}}else D.za=ce[1],0<D.za-D.T&&37500>ce[2]&&D.F&&D.v==0&&!D.C&&(D.C=Ir(P(D.Za,D),6e3));if(1>=Bt(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else Hr(D,11)}else if((x.K||D.g==x)&&Vs(D),!fe(I))for(ce=D.Da.g.parse(I),I=0;I<ce.length;I++){let Xt=ce[I];if(D.T=Xt[0],Xt=Xt[1],D.G==2)if(Xt[0]=="c"){D.K=Xt[1],D.ia=Xt[2];const Sn=Xt[3];Sn!=null&&(D.la=Sn,D.j.info("VER="+D.la));const Hn=Xt[4];Hn!=null&&(D.Aa=Hn,D.j.info("SVER="+D.Aa));const Jn=Xt[5];Jn!=null&&typeof Jn=="number"&&0<Jn&&(U=1.5*Jn,D.L=U,D.j.info("backChannelRequestTimeoutMs_="+U)),U=D;const gr=x.g;if(gr){const cr=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cr){var ye=U.h;ye.g||cr.indexOf("spdy")==-1&&cr.indexOf("quic")==-1&&cr.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(ns(ye,ye.h),ye.h=null))}if(U.D){const Mo=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(U.ya=Mo,qe(U.I,U.D,Mo))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-x.F,D.j.info("Handshake RTT: "+D.R+"ms")),U=D;var Xe=x;if(U.qa=ut(U,U.J?U.ia:null,U.W),Xe.K){ni(U.h,Xe);var Yt=Xe,jn=U.L;jn&&(Yt.I=jn),Yt.B&&(me(Yt),Ye(Yt)),U.g=Xe}else gl(U);0<D.i.length&&Tt(D)}else Xt[0]!="stop"&&Xt[0]!="close"||Hr(D,7);else D.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?Hr(D,7):Si(D):Xt[0]!="noop"&&D.l&&D.l.ta(Xt),D.v=0)}}Vr(4)}catch{}}var yc=class{constructor(x,I){this.g=x,this.map=I}};function qt(x){this.l=x||10,b.PerformanceNavigationTiming?(x=b.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(b.chrome&&b.chrome.loadTimes&&b.chrome.loadTimes()&&b.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zt(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Bt(x){return x.h?1:x.g?x.g.size:0}function ts(x,I){return x.h?x.h==I:x.g?x.g.has(I):!1}function ns(x,I){x.g?x.g.add(I):x.h=I}function ni(x,I){x.h&&x.h==I?x.h=null:x.g&&x.g.has(I)&&x.g.delete(I)}qt.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Zt(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let I=x.i;for(const D of x.g.values())I=I.concat(D.D);return I}return ee(x.i)}function Vi(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(_(x)){for(var I=[],D=x.length,U=0;U<D;U++)I.push(x[U]);return I}I=[],D=0;for(U in x)I[D++]=x[U];return I}function wc(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(_(x)||typeof x=="string"){var I=[];x=x.length;for(var D=0;D<x;D++)I.push(D);return I}I=[],D=0;for(const U in x)I[D++]=U;return I}}}function gn(x,I){if(x.forEach&&typeof x.forEach=="function")x.forEach(I,void 0);else if(_(x)||typeof x=="string")Array.prototype.forEach.call(x,I,void 0);else for(var D=wc(x),U=Vi(x),ce=U.length,ye=0;ye<ce;ye++)I.call(void 0,U[ye],D&&D[ye],x)}var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(x,I){if(x){x=x.split("&");for(var D=0;D<x.length;D++){var U=x[D].indexOf("="),ce=null;if(0<=U){var ye=x[D].substring(0,U);ce=x[D].substring(U+1)}else ye=x[D];I(ye,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function ri(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof ri){this.h=x.h,Pn(this,x.j),this.o=x.o,this.g=x.g,ue(this,x.s),this.l=x.l;var I=x.i,D=new Ai;D.i=I.i,I.g&&(D.g=new Map(I.g),D.h=I.h),H(this,D),this.m=x.m}else x&&(I=String(x).match(vi))?(this.h=!1,Pn(this,I[1]||"",!0),this.o=or(I[2]||""),this.g=or(I[3]||"",!0),ue(this,I[4]),this.l=or(I[5]||"",!0),H(this,I[6]||"",!0),this.m=or(I[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}ri.prototype.toString=function(){var x=[],I=this.j;I&&x.push(bi(I,Rr,!0),":");var D=this.g;return(D||I=="file")&&(x.push("//"),(I=this.o)&&x.push(bi(I,Rr,!0),"@"),x.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&x.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&x.push("/"),x.push(bi(D,D.charAt(0)=="/"?mn:ct,!0))),(D=this.i.toString())&&x.push("?",D),(D=this.m)&&x.push("#",bi(D,Ec)),x.join("")};function vt(x){return new ri(x)}function Pn(x,I,D){x.j=D?or(I,!0):I,x.j&&(x.j=x.j.replace(/:$/,""))}function ue(x,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);x.s=I}else x.s=null}function H(x,I,D){I instanceof Ai?(x.i=I,Ci(x.i,x.h)):(D||(I=bi(I,hl)),x.i=new Ai(I,x.h))}function qe(x,I,D){x.i.set(I,D)}function Rn(x){return qe(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function or(x,I){return x?I?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function bi(x,I,D){return typeof x=="string"?(x=encodeURI(x).replace(I,Ro),D&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Ro(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Rr=/[#\/\?@]/g,ct=/[#\?:]/g,mn=/[#\?]/g,hl=/[#\?@]/g,Ec=/#/g;function Ai(x,I){this.h=this.g=null,this.i=x||null,this.j=!!I}function zr(x){x.g||(x.g=new Map,x.h=0,x.i&&Ba(x.i,function(I,D){x.add(decodeURIComponent(I.replace(/\+/g," ")),D)}))}i=Ai.prototype,i.add=function(x,I){zr(this),this.i=null,x=hi(this,x);var D=this.g.get(x);return D||this.g.set(x,D=[]),D.push(I),this.h+=1,this};function Ps(x,I){zr(x),I=hi(x,I),x.g.has(I)&&(x.i=null,x.h-=x.g.get(I).length,x.g.delete(I))}function Es(x,I){return zr(x),I=hi(x,I),x.g.has(I)}i.forEach=function(x,I){zr(this),this.g.forEach(function(D,U){D.forEach(function(ce){x.call(I,ce,U,this)},this)},this)},i.na=function(){zr(this);const x=Array.from(this.g.values()),I=Array.from(this.g.keys()),D=[];for(let U=0;U<I.length;U++){const ce=x[U];for(let ye=0;ye<ce.length;ye++)D.push(I[U])}return D},i.V=function(x){zr(this);let I=[];if(typeof x=="string")Es(this,x)&&(I=I.concat(this.g.get(hi(this,x))));else{x=Array.from(this.g.values());for(let D=0;D<x.length;D++)I=I.concat(x[D])}return I},i.set=function(x,I){return zr(this),this.i=null,x=hi(this,x),Es(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[I]),this.h+=1,this},i.get=function(x,I){return x?(x=this.V(x),0<x.length?String(x[0]):I):I};function _n(x,I,D){Ps(x,I),0<D.length&&(x.i=null,x.g.set(hi(x,I),ee(D)),x.h+=D.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],I=Array.from(this.g.keys());for(var D=0;D<I.length;D++){var U=I[D];const ye=encodeURIComponent(String(U)),Xe=this.V(U);for(U=0;U<Xe.length;U++){var ce=ye;Xe[U]!==""&&(ce+="="+encodeURIComponent(String(Xe[U]))),x.push(ce)}}return this.i=x.join("&")};function hi(x,I){return I=String(I),x.j&&(I=I.toLowerCase()),I}function Ci(x,I){I&&!x.j&&(zr(x),x.i=null,x.g.forEach(function(D,U){var ce=U.toLowerCase();U!=ce&&(Ps(this,U),_n(this,ce,D))},x)),x.j=I}function ft(x,I){const D=new wi;if(b.Image){const U=new Image;U.onload=F(pt,D,"TestLoadImage: loaded",!0,I,U),U.onerror=F(pt,D,"TestLoadImage: error",!1,I,U),U.onabort=F(pt,D,"TestLoadImage: abort",!1,I,U),U.ontimeout=F(pt,D,"TestLoadImage: timeout",!1,I,U),b.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=x}else I(!1)}function ta(x,I){const D=new wi,U=new AbortController,ce=setTimeout(()=>{U.abort(),pt(D,"TestPingServer: timeout",!1,I)},1e4);fetch(x,{signal:U.signal}).then(ye=>{clearTimeout(ce),ye.ok?pt(D,"TestPingServer: ok",!0,I):pt(D,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ce),pt(D,"TestPingServer: error",!1,I)})}function pt(x,I,D,U,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),U(D)}catch{}}function Bn(){this.g=new Pt}function rs(x,I,D){const U=D||"";try{gn(x,function(ce,ye){let Xe=ce;w(ce)&&(Xe=Cn(ce)),I.push(U+ye+"="+encodeURIComponent(Xe))})}catch(ce){throw I.push(U+"type="+encodeURIComponent("_badmap")),ce}}function is(x){this.l=x.Ub||null,this.j=x.eb||!1}Y(is,sr),is.prototype.g=function(){return new ss(this.l,this.j)},is.prototype.i=function(x){return function(){return x}}({});function ss(x,I){en.call(this),this.D=x,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(ss,en),i=ss.prototype,i.open=function(x,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=I,this.readyState=1,ii(this)},i.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(I.body=x),(this.D||b).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,as(this)),this.readyState=0},i.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof b.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fi(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fi(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}i.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var I=x.value?x.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!x.done}))&&(this.response=this.responseText+=I)}x.done?as(this):ii(this),this.readyState==3&&Fi(this)}},i.Ra=function(x){this.g&&(this.response=this.responseText=x,as(this))},i.Qa=function(x){this.g&&(this.response=x,as(this))},i.ga=function(){this.g&&as(this)};function as(x){x.readyState=4,x.l=null,x.j=null,x.v=null,ii(x)}i.setRequestHeader=function(x,I){this.u.append(x,I)},i.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],I=this.h.entries();for(var D=I.next();!D.done;)D=D.value,x.push(D[0]+": "+D[1]),D=I.next();return x.join(`\r
`)};function ii(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function _s(x){let I="";return ke(x,function(D,U){I+=U,I+=":",I+=D,I+=`\r
`}),I}function Fn(x,I,D){e:{for(U in D){var U=!1;break e}U=!0}U||(D=_s(D),typeof x=="string"?D!=null&&encodeURIComponent(String(D)):qe(x,I,D))}function sn(x){en.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(sn,en);var os=/^https?$/i,zi=["POST","PUT"];i=sn.prototype,i.Ha=function(x){this.J=x},i.ea=function(x,I,D,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);I=I?I.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?yi(this.o):yi(ti),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(I,String(x),!0),this.B=!1}catch(ye){_r(this,ye);return}if(x=D||"",D=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ce in U)D.set(ce,U[ce]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ye of U.keys())D.set(ye,U.get(ye));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(D.keys()).find(ye=>ye.toLowerCase()=="content-type"),ce=b.FormData&&x instanceof b.FormData,!(0<=Array.prototype.indexOf.call(zi,I,void 0))||U||ce||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Xe]of D)this.g.setRequestHeader(ye,Xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ia(this),this.u=!0,this.g.send(x),this.u=!1}catch(ye){_r(this,ye)}};function _r(x,I){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=I,x.m=5,na(x),Hi(x)}function na(x){x.A||(x.A=!0,yn(x,"complete"),yn(x,"error"))}i.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,yn(this,"complete"),yn(this,"abort"),Hi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),sn.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ra(this):this.bb())},i.bb=function(){ra(this)};function ra(x){if(x.h&&typeof y<"u"&&(!x.v[1]||Ti(x)!=4||x.Z()!=2)){if(x.u&&Ti(x)==4)Kn(x.Ea,0,x);else if(yn(x,"readystatechange"),Ti(x)==4){x.h=!1;try{const Xe=x.Z();e:switch(Xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var D;if(!(D=I)){var U;if(U=Xe===0){var ce=String(x.D).match(vi)[1]||null;!ce&&b.self&&b.self.location&&(ce=b.self.location.protocol.slice(0,-1)),U=!os.test(ce?ce.toLowerCase():"")}D=U}if(D)yn(x,"complete"),yn(x,"success");else{x.m=6;try{var ye=2<Ti(x)?x.g.statusText:""}catch{ye=""}x.l=ye+" ["+x.Z()+"]",na(x)}}finally{Hi(x)}}}}function Hi(x,I){if(x.g){ia(x);const D=x.g,U=x.v[0]?()=>{}:null;x.g=null,x.v=null,I||yn(x,"ready");try{D.onreadystatechange=U}catch{}}}function ia(x){x.I&&(b.clearTimeout(x.I),x.I=null)}i.isActive=function(){return!!this.g};function Ti(x){return x.g?x.g.readyState:0}i.Z=function(){try{return 2<Ti(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(x){if(this.g){var I=this.g.responseText;return x&&I.indexOf(x)==0&&(I=I.substring(x.length)),Ot(I)}};function fl(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function an(x){const I={};x=(x.g&&2<=Ti(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<x.length;U++){if(fe(x[U]))continue;var D=K(x[U]);const ce=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const ye=I[ce]||[];I[ce]=ye,ye.push(D)}z(I,function(U){return U.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(x,I,D){return D&&D.internalChannelParams&&D.internalChannelParams[x]||I}function vs(x){this.Aa=0,this.i=[],this.j=new wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bs("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bs("baseRetryDelayMs",5e3,x),this.cb=Bs("retryDelaySeedMs",1e4,x),this.Wa=Bs("forwardChannelMaxRetries",2,x),this.wa=Bs("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new qt(x&&x.concurrentRequestLimit),this.Da=new Bn,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=vs.prototype,i.la=8,i.G=1,i.connect=function(x,I,D,U){tn(0),this.W=x,this.H=I||{},D&&U!==void 0&&(this.H.OSID=D,this.H.OAID=U),this.F=this.X,this.I=ut(this,null,this.W),Tt(this)};function Si(x){if(xe(x),x.G==3){var I=x.U++,D=vt(x.I);if(qe(D,"SID",x.K),qe(D,"RID",I),qe(D,"TYPE","terminate"),Us(x,D),I=new Fr(x,x.j,I),I.L=2,I.v=Rn(vt(D)),D=!1,b.navigator&&b.navigator.sendBeacon)try{D=b.navigator.sendBeacon(I.v.toString(),"")}catch{}!D&&b.Image&&(new Image().src=I.v,D=!0),D||(I.g=ml(I.j,null),I.g.ea(I.v)),I.F=Date.now(),Ye(I)}on(x)}function ja(x){x.g&&(bs(x),x.g.cancel(),x.g=null)}function xe(x){ja(x),x.u&&(b.clearTimeout(x.u),x.u=null),Vs(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&b.clearTimeout(x.s),x.s=null)}function Tt(x){if(!zt(x.h)&&!x.s){x.s=!0;var I=x.Ga;Ae||te(),Qe||(Ae(),Qe=!0),lt.add(I,x),x.B=0}}function lr(x,I){return Bt(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=I.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Ir(P(x.Ga,x,I),Fs(x,x.B)),x.B++,!0)}i.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const ce=new Fr(this,this.j,x);let ye=this.o;if(this.S&&(ye?(ye=V(ye),G(ye,this.S)):ye=this.S),this.m!==null||this.O||(ce.H=ye,ye=null),this.P)e:{for(var I=0,D=0;D<this.i.length;D++){t:{var U=this.i[D];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(I+=U,4096<I){I=D;break e}if(I===4096||D===this.i.length-1){I=D+1;break e}}I=1e3}else I=1e3;I=dl(this,ce,I),D=vt(this.I),qe(D,"RID",x),qe(D,"CVER",22),this.D&&qe(D,"X-HTTP-Session-Id",this.D),Us(this,D),ye&&(this.O?I="headers="+encodeURIComponent(String(_s(ye)))+"&"+I:this.m&&Fn(D,this.m,ye)),ns(this.h,ce),this.Ua&&qe(D,"TYPE","init"),this.P?(qe(D,"$req",I),qe(D,"SID","null"),ce.T=!0,dn(ce,D,null)):dn(ce,D,I),this.G=2}}else this.G==3&&(x?js(this,x):this.i.length==0||zt(this.h)||js(this))};function js(x,I){var D;I?D=I.l:D=x.U++;const U=vt(x.I);qe(U,"SID",x.K),qe(U,"RID",D),qe(U,"AID",x.T),Us(x,U),x.m&&x.o&&Fn(U,x.m,x.o),D=new Fr(x,x.j,D,x.B+1),x.m===null&&(D.H=x.o),I&&(x.i=I.D.concat(x.i)),I=dl(x,D,1e3),D.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),ns(x.h,D),dn(D,U,I)}function Us(x,I){x.H&&ke(x.H,function(D,U){qe(I,U,D)}),x.l&&gn({},function(D,U){qe(I,U,D)})}function dl(x,I,D){D=Math.min(x.i.length,D);var U=x.l?P(x.l.Na,x.l,x):null;e:{var ce=x.i;let ye=-1;for(;;){const Xe=["count="+D];ye==-1?0<D?(ye=ce[0].g,Xe.push("ofs="+ye)):ye=0:Xe.push("ofs="+ye);let Yt=!0;for(let jn=0;jn<D;jn++){let Xt=ce[jn].g;const Sn=ce[jn].map;if(Xt-=ye,0>Xt)ye=Math.max(0,ce[jn].g-100),Yt=!1;else try{rs(Sn,Xe,"req"+Xt+"_")}catch{U&&U(Sn)}}if(Yt){U=Xe.join("&");break e}}}return x=x.i.splice(0,D),I.D=x,U}function gl(x){if(!x.g&&!x.u){x.Y=1;var I=x.Fa;Ae||te(),Qe||(Ae(),Qe=!0),lt.add(I,x),x.v=0}}function Do(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Ir(P(x.Fa,x),Fs(x,x.v)),x.v++,!0)}i.Fa=function(){if(this.u=null,zn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Ir(P(this.ab,this),x)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),ja(this),zn(this))};function bs(x){x.A!=null&&(b.clearTimeout(x.A),x.A=null)}function zn(x){x.g=new Fr(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var I=vt(x.qa);qe(I,"RID","rpc"),qe(I,"SID",x.K),qe(I,"AID",x.T),qe(I,"CI",x.F?"0":"1"),!x.F&&x.ja&&qe(I,"TO",x.ja),qe(I,"TYPE","xmlhttp"),Us(x,I),x.m&&x.o&&Fn(I,x.m,x.o),x.L&&(x.g.I=x.L);var D=x.g;x=x.ia,D.L=1,D.v=Rn(vt(I)),D.m=null,D.P=!0,En(D,x)}i.Za=function(){this.C!=null&&(this.C=null,ja(this),Do(this),tn(19))};function Vs(x){x.C!=null&&(b.clearTimeout(x.C),x.C=null)}function Tn(x,I){var D=null;if(x.g==I){Vs(x),bs(x),x.g=null;var U=2}else if(ts(x.h,I))D=I.D,ni(x.h,I),U=1;else return;if(x.G!=0){if(I.o)if(U==1){D=I.m?I.m.length:0,I=Date.now()-I.F;var ce=x.B;U=es(),yn(U,new Pa(U,D)),Tt(x)}else gl(x);else if(ce=I.s,ce==3||ce==0&&0<I.X||!(U==1&&lr(x,I)||U==2&&Do(x)))switch(D&&0<D.length&&(I=x.h,I.i=I.i.concat(D)),ce){case 1:Hr(x,5);break;case 4:Hr(x,10);break;case 3:Hr(x,6);break;default:Hr(x,2)}}}function Fs(x,I){let D=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(D*=2),D*I}function Hr(x,I){if(x.j.info("Error code "+I),I==2){var D=P(x.fb,x),U=x.Xa;const ce=!U;U=new ri(U||"//www.google.com/images/cleardot.gif"),b.location&&b.location.protocol=="http"||Pn(U,"https"),Rn(U),ce?ft(U.toString(),D):ta(U.toString(),D)}else tn(2);x.G=0,x.l&&x.l.sa(I),on(x),xe(x)}i.fb=function(x){x?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function on(x){if(x.G=0,x.ka=[],x.l){const I=Zt(x.h);(I.length!=0||x.i.length!=0)&&(W(x.ka,I),W(x.ka,x.i),x.h.i.length=0,ee(x.i),x.i.length=0),x.l.ra()}}function ut(x,I,D){var U=D instanceof ri?vt(D):new ri(D);if(U.g!="")I&&(U.g=I+"."+U.g),ue(U,U.s);else{var ce=b.location;U=ce.protocol,I=I?I+"."+ce.hostname:ce.hostname,ce=+ce.port;var ye=new ri(null);U&&Pn(ye,U),I&&(ye.g=I),ce&&ue(ye,ce),D&&(ye.l=D),U=ye}return D=x.D,I=x.ya,D&&I&&qe(U,D,I),qe(U,"VER",x.la),Us(x,U),U}function ml(x,I,D){if(I&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=x.Ca&&!x.pa?new sn(new is({eb:D})):new sn(x.pa),I.Ha(x.J),I}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function hn(){}i=hn.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ii(){}Ii.prototype.g=function(x,I){return new $n(x,I)};function $n(x,I){en.call(this),this.g=new vs(I),this.l=x,this.h=I&&I.messageUrlParams||null,x=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(x?x["X-WebChannel-Content-Type"]=I.messageContentType:x={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(x?x["X-WebChannel-Client-Profile"]=I.va:x={"X-WebChannel-Client-Profile":I.va}),this.g.S=x,(x=I&&I.Sb)&&!fe(x)&&(this.g.m=x),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!fe(I)&&(this.g.D=I,x=this.h,x!==null&&I in x&&(x=this.h,I in x&&delete x[I])),this.j=new Ni(this)}Y($n,en),$n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){Si(this.g)},$n.prototype.o=function(x){var I=this.g;if(typeof x=="string"){var D={};D.__data__=x,x=D}else this.u&&(D={},D.__data__=Cn(x),x=D);I.i.push(new yc(I.Ya++,x)),I.G==3&&Tt(I)},$n.prototype.N=function(){this.g.l=null,delete this.j,Si(this.g),delete this.g,$n.aa.N.call(this)};function pl(x){qn.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var I=x.__sm__;if(I){e:{for(const D in I){x=D;break e}x=void 0}(this.i=x)&&(x=this.i,I=I!==null&&x in I?I[x]:void 0),this.data=I}else this.data=x}Y(pl,qn);function fi(){ei.call(this),this.status=1}Y(fi,ei);function Ni(x){this.g=x}Y(Ni,hn),Ni.prototype.ua=function(){yn(this.g,"a")},Ni.prototype.ta=function(x){yn(this.g,new pl(x))},Ni.prototype.sa=function(x){yn(this.g,new fi)},Ni.prototype.ra=function(){yn(this.g,"b")},Ii.prototype.createWebChannel=Ii.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,Gw=function(){return new Ii},Hw=function(){return es()},zw=Ur,p1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,tf=kn,Nn.COMPLETE="complete",Fw=Nn,jr.EventType=Rt,Rt.OPEN="a",Rt.CLOSE="b",Rt.ERROR="c",Rt.MESSAGE="d",en.prototype.listen=en.prototype.K,cu=jr,sn.prototype.listenOnce=sn.prototype.L,sn.prototype.getLastError=sn.prototype.Ka,sn.prototype.getLastErrorCode=sn.prototype.Ba,sn.prototype.getStatus=sn.prototype.Z,sn.prototype.getResponseJson=sn.prototype.Oa,sn.prototype.getResponseText=sn.prototype.oa,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Ha,Vw=sn}).apply(typeof Gh<"u"?Gh:typeof self<"u"?self:typeof window<"u"?window:{});const yx="@firebase/firestore",wx="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Y1("@firebase/firestore");function Hl(){return tl.logLevel}function $e(i,...e){if(tl.logLevel<=Wt.DEBUG){const t=e.map(ag);tl.debug(`Firestore (${dc}): ${i}`,...t)}}function Ma(i,...e){if(tl.logLevel<=Wt.ERROR){const t=e.map(ag);tl.error(`Firestore (${dc}): ${i}`,...t)}}function rc(i,...e){if(tl.logLevel<=Wt.WARN){const t=e.map(ag);tl.warn(`Firestore (${dc}): ${i}`,...t)}}function ag(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(i="Unexpected state"){const e=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: `+i;throw Ma(e),new Error(e)}function fn(i,e){i||At()}function Mt(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends ka{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class g3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class m3{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){fn(this.o===void 0);let a=this.i;const c=_=>this.i!==a?(a=this.i,t(_)):Promise.resolve();let f=new Na;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Na,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const _=f;e.enqueueRetryable(async()=>{await _.promise,await c(this.currentUser)})},b=_=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit(_=>b(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?b(_):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Na)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(fn(typeof a.accessToken=="string"),new qw(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fn(e===null||typeof e=="string"),new li(e)}}class p3{constructor(e,t,a){this.l=e,this.h=t,this.P=a,this.type="FirstParty",this.user=li.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class x3{constructor(e,t,a){this.l=e,this.h=t,this.P=a}getToken(){return Promise.resolve(new p3(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ex{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y3{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Is(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){fn(this.o===void 0);const a=f=>{f.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const y=f.token!==this.R;return this.R=f.token,$e("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>a(f))};const c=f=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.A.getImmediate({optional:!0});f?c(f):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Ex(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fn(typeof t.token=="string"),this.R=t.token,new Ex(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const c=w3(40);for(let f=0;f<c.length;++f)a.length<20&&c[f]<t&&(a+=e.charAt(c[f]%62))}return a}}function Jt(i,e){return i<e?-1:i>e?1:0}function ic(i,e,t){return i.length===e.length&&i.every((a,c)=>t(a,e[c]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=-62135596800,vx=1e6;class Tr{static now(){return Tr.fromMillis(Date.now())}static fromDate(e){return Tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*vx);return new Tr(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new et(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new et(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_x)throw new et(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vx}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-_x;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new Tr(0,0))}static max(){return new Nt(new Tr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="__name__";class Qs{constructor(e,t,a){t===void 0?t=0:t>e.length&&At(),a===void 0?a=e.length-t:a>e.length-t&&At(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Qs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qs?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let c=0;c<a;c++){const f=Qs.compareSegments(e.get(c),t.get(c));if(f!==0)return f}return Math.sign(e.length-t.length)}static compareSegments(e,t){const a=Qs.isNumericId(e),c=Qs.isNumericId(t);return a&&!c?-1:!a&&c?1:a&&c?Qs.extractNumericId(e).compare(Qs.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xo.fromString(e.substring(4,e.length-2))}}class On extends Qs{construct(e,t,a){return new On(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new et(Te.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(c=>c.length>0))}return new On(t)}static emptyPath(){return new On([])}}const E3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends Qs{construct(e,t,a){return new Zr(e,t,a)}static isValidIdentifier(e){return E3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bx}static keyField(){return new Zr([bx])}static fromServerFormat(e){const t=[];let a="",c=0;const f=()=>{if(a.length===0)throw new et(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let y=!1;for(;c<e.length;){const b=e[c];if(b==="\\"){if(c+1===e.length)throw new et(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[c+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new et(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=_,c+=2}else b==="`"?(y=!y,c++):b!=="."||y?(a+=b,c++):(f(),c++)}if(f(),y)throw new et(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(t)}static emptyPath(){return new Zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(On.fromString(e))}static fromName(e){return new dt(On.fromString(e).popFirst(5))}static empty(){return new dt(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&On.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return On.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new On(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=-1;function _3(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,c=Nt.fromTimestamp(a===1e9?new Tr(t+1,0):new Tr(t,a));return new Eo(c,dt.empty(),e)}function v3(i){return new Eo(i.readTime,i.key,vu)}class Eo{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new Eo(Nt.min(),dt.empty(),vu)}static max(){return new Eo(Nt.max(),dt.empty(),vu)}}function b3(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=dt.comparator(i.documentKey,e.documentKey),t!==0?t:Jt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(i){if(i.code!==Te.FAILED_PRECONDITION||i.message!==A3)throw i;$e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((a,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(a,c)},this.catchCallback=f=>{this.wrapFailure(t,f).next(a,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,a)=>{t(e)})}static reject(e){return new Se((t,a)=>{a(e)})}static waitFor(e){return new Se((t,a)=>{let c=0,f=0,y=!1;e.forEach(b=>{++c,b.next(()=>{++f,y&&f===c&&t()},_=>a(_))}),y=!0,f===c&&t()})}static or(e){let t=Se.resolve(!1);for(const a of e)t=t.next(c=>c?Se.resolve(c):a());return t}static forEach(e,t){const a=[];return e.forEach((c,f)=>{a.push(t.call(this,c,f))}),this.waitFor(a)}static mapArray(e,t){return new Se((a,c)=>{const f=e.length,y=new Array(f);let b=0;for(let _=0;_<f;_++){const w=_;t(e[w]).next(S=>{y[w]=S,++b,b===f&&a(y)},S=>c(S))}})}static doWhile(e,t){return new Se((a,c)=>{const f=()=>{e()===!0?t().next(()=>{f()},c):a()};f()})}}function T3(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mc(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.oe(a),this._e=a=>t.writeSequenceNumber(a))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Uf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=-1;function Vf(i){return i==null}function yf(i){return i===0&&1/i==-1/0}function S3(i){return typeof i=="number"&&Number.isInteger(i)&&!yf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="";function I3(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Ax(e)),e=N3(i.get(t),e);return Ax(e)}function N3(i,e){let t=e;const a=i.length;for(let c=0;c<a;c++){const f=i.charAt(c);switch(f){case"\0":t+="";break;case Xw:t+="";break;default:t+=f}}return t}function Ax(i){return i+Xw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Io(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Qw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t){this.comparator=e,this.root=t||Kr.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kr.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const c=this.comparator(e,a.key);if(c===0)return t+a.left.size;c<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,a,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?a(e.key,t):1,t&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kr{constructor(e,t,a,c,f){this.key=e,this.value=t,this.color=a??Kr.RED,this.left=c??Kr.EMPTY,this.right=f??Kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,c,f){return new Kr(e??this.key,t??this.value,a??this.color,c??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let c=this;const f=a(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,t,a),null):f===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,a)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return Kr.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const e=this.left.check();if(e!==this.right.check())throw At();return e+(this.isRed()?0:1)}}Kr.EMPTY=null,Kr.RED=!0,Kr.BLACK=!1;Kr.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(e,t,a,c,f){return this}insert(e,t,a){return new Kr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const c=a.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tx(this.data.getIterator())}getIteratorFrom(e){return new Tx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(this.comparator(c,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sr(this.comparator);return t.data=e,t}}class Tx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.fields=e,e.sort(Zr.comparator)}static empty(){return new $i([])}unionWith(e){let t=new Sr(Zr.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new $i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(t,a)=>t.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(c){try{return atob(c)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new Ww("Invalid base64 string: "+f):f}}(e);return new Jr(t)}static fromUint8Array(e){const t=function(c){let f="";for(let y=0;y<c.length;++y)f+=String.fromCharCode(c[y]);return f}(e);return new Jr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const a=new Uint8Array(t.length);for(let c=0;c<t.length;c++)a[c]=t.charCodeAt(c);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jr.EMPTY_BYTE_STRING=new Jr("");const R3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(i){if(fn(!!i),typeof i=="string"){let e=0;const t=R3.exec(i);if(fn(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:hr(i.seconds),nanos:hr(i.nanos)}}function hr(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function vo(i){return typeof i=="string"?Jr.fromBase64String(i):Jr.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="server_timestamp",Zw="__type__",$w="__previous_value__",Jw="__local_write_time__";function lg(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zw])===null||t===void 0?void 0:t.stringValue)===Kw}function Ff(i){const e=i.mapValue.fields[$w];return lg(e)?Ff(e):e}function bu(i){const e=_o(i.mapValue.fields[Jw].timestampValue);return new Tr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,t,a,c,f,y,b,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=c,this.ssl=f,this.forceLongPolling=y,this.autoDetectLongPolling=b,this.longPollingOptions=_,this.useFetchStreams=w}}const wf="(default)";class Au{constructor(e,t){this.projectId=e,this.database=t||wf}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===wf}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="__type__",M3="__max__",Yh={mapValue:{}},tE="__vector__",Ef="value";function bo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?lg(i)?4:L3(i)?9007199254740991:O3(i)?10:11:At()}function Js(i,e){if(i===e)return!0;const t=bo(i);if(t!==bo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return bu(i).isEqual(bu(e));case 3:return function(c,f){if(typeof c.timestampValue=="string"&&typeof f.timestampValue=="string"&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const y=_o(c.timestampValue),b=_o(f.timestampValue);return y.seconds===b.seconds&&y.nanos===b.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(c,f){return vo(c.bytesValue).isEqual(vo(f.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(c,f){return hr(c.geoPointValue.latitude)===hr(f.geoPointValue.latitude)&&hr(c.geoPointValue.longitude)===hr(f.geoPointValue.longitude)}(i,e);case 2:return function(c,f){if("integerValue"in c&&"integerValue"in f)return hr(c.integerValue)===hr(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const y=hr(c.doubleValue),b=hr(f.doubleValue);return y===b?yf(y)===yf(b):isNaN(y)&&isNaN(b)}return!1}(i,e);case 9:return ic(i.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:case 11:return function(c,f){const y=c.mapValue.fields||{},b=f.mapValue.fields||{};if(Cx(y)!==Cx(b))return!1;for(const _ in y)if(y.hasOwnProperty(_)&&(b[_]===void 0||!Js(y[_],b[_])))return!1;return!0}(i,e);default:return At()}}function Cu(i,e){return(i.values||[]).find(t=>Js(t,e))!==void 0}function sc(i,e){if(i===e)return 0;const t=bo(i),a=bo(e);if(t!==a)return Jt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jt(i.booleanValue,e.booleanValue);case 2:return function(f,y){const b=hr(f.integerValue||f.doubleValue),_=hr(y.integerValue||y.doubleValue);return b<_?-1:b>_?1:b===_?0:isNaN(b)?isNaN(_)?0:-1:1}(i,e);case 3:return Sx(i.timestampValue,e.timestampValue);case 4:return Sx(bu(i),bu(e));case 5:return Jt(i.stringValue,e.stringValue);case 6:return function(f,y){const b=vo(f),_=vo(y);return b.compareTo(_)}(i.bytesValue,e.bytesValue);case 7:return function(f,y){const b=f.split("/"),_=y.split("/");for(let w=0;w<b.length&&w<_.length;w++){const S=Jt(b[w],_[w]);if(S!==0)return S}return Jt(b.length,_.length)}(i.referenceValue,e.referenceValue);case 8:return function(f,y){const b=Jt(hr(f.latitude),hr(y.latitude));return b!==0?b:Jt(hr(f.longitude),hr(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Ix(i.arrayValue,e.arrayValue);case 10:return function(f,y){var b,_,w,S;const R=f.fields||{},P=y.fields||{},F=(b=R[Ef])===null||b===void 0?void 0:b.arrayValue,Y=(_=P[Ef])===null||_===void 0?void 0:_.arrayValue,ee=Jt(((w=F==null?void 0:F.values)===null||w===void 0?void 0:w.length)||0,((S=Y==null?void 0:Y.values)===null||S===void 0?void 0:S.length)||0);return ee!==0?ee:Ix(F,Y)}(i.mapValue,e.mapValue);case 11:return function(f,y){if(f===Yh.mapValue&&y===Yh.mapValue)return 0;if(f===Yh.mapValue)return 1;if(y===Yh.mapValue)return-1;const b=f.fields||{},_=Object.keys(b),w=y.fields||{},S=Object.keys(w);_.sort(),S.sort();for(let R=0;R<_.length&&R<S.length;++R){const P=Jt(_[R],S[R]);if(P!==0)return P;const F=sc(b[_[R]],w[S[R]]);if(F!==0)return F}return Jt(_.length,S.length)}(i.mapValue,e.mapValue);default:throw At()}}function Sx(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Jt(i,e);const t=_o(i),a=_o(e),c=Jt(t.seconds,a.seconds);return c!==0?c:Jt(t.nanos,a.nanos)}function Ix(i,e){const t=i.values||[],a=e.values||[];for(let c=0;c<t.length&&c<a.length;++c){const f=sc(t[c],a[c]);if(f)return f}return Jt(t.length,a.length)}function ac(i){return x1(i)}function x1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const a=_o(t);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return vo(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return dt.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let a="[",c=!0;for(const f of t.values||[])c?c=!1:a+=",",a+=x1(f);return a+"]"}(i.arrayValue):"mapValue"in i?function(t){const a=Object.keys(t.fields||{}).sort();let c="{",f=!0;for(const y of a)f?f=!1:c+=",",c+=`${y}:${x1(t.fields[y])}`;return c+"}"}(i.mapValue):At()}function nf(i){switch(bo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ff(i);return e?16+nf(e):16;case 5:return 2*i.stringValue.length;case 6:return vo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((c,f)=>c+nf(f),0)}(i.arrayValue);case 10:case 11:return function(a){let c=0;return Io(a.fields,(f,y)=>{c+=f.length+nf(y)}),c}(i.mapValue);default:throw At()}}function Nx(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function y1(i){return!!i&&"integerValue"in i}function cg(i){return!!i&&"arrayValue"in i}function Rx(i){return!!i&&"nullValue"in i}function Dx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function rf(i){return!!i&&"mapValue"in i}function O3(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[eE])===null||t===void 0?void 0:t.stringValue)===tE}function pu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Io(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=pu(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function L3(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===M3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(t)}setAll(e){let t=Zr.emptyPath(),a={},c=[];e.forEach((y,b)=>{if(!t.isImmediateParentOf(b)){const _=this.getFieldsMap(t);this.applyChanges(_,a,c),a={},c=[],t=b.popLast()}y?a[b.lastSegment()]=pu(y):c.push(b.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,a,c)}delete(e){const t=this.field(e.popLast());rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let c=t.mapValue.fields[e.get(a)];rf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,a){Io(t,(c,f)=>e[c]=f);for(const c of a)delete e[c]}clone(){return new Li(pu(this.value))}}function nE(i){const e=[];return Io(i.fields,(t,a)=>{const c=new Zr([t]);if(rf(a)){const f=nE(a.mapValue).fields;if(f.length===0)e.push(c);else for(const y of f)e.push(c.child(y))}else e.push(c)}),new $i(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t,a,c,f,y,b){this.key=e,this.documentType=t,this.version=a,this.readTime=c,this.createTime=f,this.data=y,this.documentState=b}static newInvalidDocument(e){return new ci(e,0,Nt.min(),Nt.min(),Nt.min(),Li.empty(),0)}static newFoundDocument(e,t,a,c){return new ci(e,1,t,Nt.min(),a,c,0)}static newNoDocument(e,t){return new ci(e,2,t,Nt.min(),Nt.min(),Li.empty(),0)}static newUnknownDocument(e,t){return new ci(e,3,t,Nt.min(),Nt.min(),Li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ci&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ci(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t){this.position=e,this.inclusive=t}}function Mx(i,e,t){let a=0;for(let c=0;c<i.position.length;c++){const f=e[c],y=i.position[c];if(f.field.isKeyField()?a=dt.comparator(dt.fromName(y.referenceValue),t.key):a=sc(y,t.data.field(f.field)),f.dir==="desc"&&(a*=-1),a!==0)break}return a}function Ox(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Js(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t="asc"){this.field=e,this.dir=t}}function k3(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{}class Er extends rE{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new B3(e,t,a):t==="array-contains"?new V3(e,a):t==="in"?new F3(e,a):t==="not-in"?new z3(e,a):t==="array-contains-any"?new H3(e,a):new Er(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new j3(e,a):new U3(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(sc(t,this.value)):t!==null&&bo(this.value)===bo(t)&&this.matchesComparison(sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return At()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rs extends rE{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Rs(e,t)}matches(e){return iE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function iE(i){return i.op==="and"}function sE(i){return P3(i)&&iE(i)}function P3(i){for(const e of i.filters)if(e instanceof Rs)return!1;return!0}function w1(i){if(i instanceof Er)return i.field.canonicalString()+i.op.toString()+ac(i.value);if(sE(i))return i.filters.map(e=>w1(e)).join(",");{const e=i.filters.map(t=>w1(t)).join(",");return`${i.op}(${e})`}}function aE(i,e){return i instanceof Er?function(a,c){return c instanceof Er&&a.op===c.op&&a.field.isEqual(c.field)&&Js(a.value,c.value)}(i,e):i instanceof Rs?function(a,c){return c instanceof Rs&&a.op===c.op&&a.filters.length===c.filters.length?a.filters.reduce((f,y,b)=>f&&aE(y,c.filters[b]),!0):!1}(i,e):void At()}function oE(i){return i instanceof Er?function(t){return`${t.field.canonicalString()} ${t.op} ${ac(t.value)}`}(i):i instanceof Rs?function(t){return t.op.toString()+" {"+t.getFilters().map(oE).join(" ,")+"}"}(i):"Filter"}class B3 extends Er{constructor(e,t,a){super(e,t,a),this.key=dt.fromName(a.referenceValue)}matches(e){const t=dt.comparator(e.key,this.key);return this.matchesComparison(t)}}class j3 extends Er{constructor(e,t){super(e,"in",t),this.keys=lE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class U3 extends Er{constructor(e,t){super(e,"not-in",t),this.keys=lE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lE(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(a=>dt.fromName(a.referenceValue))}class V3 extends Er{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cg(t)&&Cu(t.arrayValue,this.value)}}class F3 extends Er{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cu(this.value.arrayValue,t)}}class z3 extends Er{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Cu(this.value.arrayValue,t)}}class H3 extends Er{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Cu(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,t=null,a=[],c=[],f=null,y=null,b=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=c,this.limit=f,this.startAt=y,this.endAt=b,this.le=null}}function Lx(i,e=null,t=[],a=[],c=null,f=null,y=null){return new G3(i,e,t,a,c,f,y)}function ug(i){const e=Mt(i);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>w1(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>function(f){return f.field.canonicalString()+f.dir}(a)).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>ac(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>ac(a)).join(",")),e.le=t}return e.le}function hg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!k3(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!aE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ox(i.startAt,e.startAt)&&Ox(i.endAt,e.endAt)}function E1(i){return dt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t=null,a=[],c=[],f=null,y="F",b=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=c,this.limit=f,this.limitType=y,this.startAt=b,this.endAt=_,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function q3(i,e,t,a,c,f,y,b){return new pc(i,e,t,a,c,f,y,b)}function fg(i){return new pc(i)}function kx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function cE(i){return i.collectionGroup!==null}function xu(i){const e=Mt(i);if(e.he===null){e.he=[];const t=new Set;for(const f of e.explicitOrderBy)e.he.push(f),t.add(f.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(y){let b=new Sr(Zr.comparator);return y.filters.forEach(_=>{_.getFlattenedFilters().forEach(w=>{w.isInequality()&&(b=b.add(w.field))})}),b})(e).forEach(f=>{t.has(f.canonicalString())||f.isKeyField()||e.he.push(new vf(f,a))}),t.has(Zr.keyField().canonicalString())||e.he.push(new vf(Zr.keyField(),a))}return e.he}function Ks(i){const e=Mt(i);return e.Pe||(e.Pe=Y3(e,xu(i))),e.Pe}function Y3(i,e){if(i.limitType==="F")return Lx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(c=>{const f=c.dir==="desc"?"asc":"desc";return new vf(c.field,f)});const t=i.endAt?new _f(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new _f(i.startAt.position,i.startAt.inclusive):null;return Lx(i.path,i.collectionGroup,e,i.filters,i.limit,t,a)}}function _1(i,e){const t=i.filters.concat([e]);return new pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function v1(i,e,t){return new pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function zf(i,e){return hg(Ks(i),Ks(e))&&i.limitType===e.limitType}function uE(i){return`${ug(Ks(i))}|lt:${i.limitType}`}function Gl(i){return`Query(target=${function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map(c=>oE(c)).join(", ")}]`),Vf(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map(c=>function(y){return`${y.field.canonicalString()} (${y.dir})`}(c)).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map(c=>ac(c)).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map(c=>ac(c)).join(",")),`Target(${a})`}(Ks(i))}; limitType=${i.limitType})`}function Hf(i,e){return e.isFoundDocument()&&function(a,c){const f=c.key.path;return a.collectionGroup!==null?c.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(f):dt.isDocumentKey(a.path)?a.path.isEqual(f):a.path.isImmediateParentOf(f)}(i,e)&&function(a,c){for(const f of xu(a))if(!f.field.isKeyField()&&c.data.field(f.field)===null)return!1;return!0}(i,e)&&function(a,c){for(const f of a.filters)if(!f.matches(c))return!1;return!0}(i,e)&&function(a,c){return!(a.startAt&&!function(y,b,_){const w=Mx(y,b,_);return y.inclusive?w<=0:w<0}(a.startAt,xu(a),c)||a.endAt&&!function(y,b,_){const w=Mx(y,b,_);return y.inclusive?w>=0:w>0}(a.endAt,xu(a),c))}(i,e)}function X3(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function hE(i){return(e,t)=>{let a=!1;for(const c of xu(i)){const f=Q3(c,e,t);if(f!==0)return f;a=a||c.field.isKeyField()}return 0}}function Q3(i,e,t){const a=i.field.isKeyField()?dt.comparator(e.key,t.key):function(f,y,b){const _=y.data.field(f),w=b.data.field(f);return _!==null&&w!==null?sc(_,w):At()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return At()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[c,f]of a)if(this.equalsFn(c,e))return f}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),c=this.inner[a];if(c===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return a.length===1?delete this.inner[t]:a.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(t,a)=>{for(const[c,f]of a)e(c,f)})}isEmpty(){return Qw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=new Wn(dt.comparator);function Oa(){return W3}const fE=new Wn(dt.comparator);function uu(...i){let e=fE;for(const t of i)e=e.insert(t.key,t);return e}function dE(i){let e=fE;return i.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Zo(){return yu()}function gE(){return yu()}function yu(){return new al(i=>i.toString(),(i,e)=>i.isEqual(e))}const K3=new Wn(dt.comparator),Z3=new Sr(dt.comparator);function Kt(...i){let e=Z3;for(const t of i)e=e.add(t);return e}const $3=new Sr(Jt);function J3(){return $3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function mE(i){return{integerValue:""+i}}function eI(i,e){return S3(e)?mE(e):dg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this._=void 0}}function tI(i,e,t){return i instanceof bf?function(c,f){const y={fields:{[Zw]:{stringValue:Kw},[Jw]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&lg(f)&&(f=Ff(f)),f&&(y.fields[$w]=f),{mapValue:y}}(t,e):i instanceof Tu?xE(i,e):i instanceof Su?yE(i,e):function(c,f){const y=pE(c,f),b=Px(y)+Px(c.Ie);return y1(y)&&y1(c.Ie)?mE(b):dg(c.serializer,b)}(i,e)}function nI(i,e,t){return i instanceof Tu?xE(i,e):i instanceof Su?yE(i,e):t}function pE(i,e){return i instanceof Af?function(a){return y1(a)||function(f){return!!f&&"doubleValue"in f}(a)}(e)?e:{integerValue:0}:null}class bf extends Gf{}class Tu extends Gf{constructor(e){super(),this.elements=e}}function xE(i,e){const t=wE(e);for(const a of i.elements)t.some(c=>Js(c,a))||t.push(a);return{arrayValue:{values:t}}}class Su extends Gf{constructor(e){super(),this.elements=e}}function yE(i,e){let t=wE(e);for(const a of i.elements)t=t.filter(c=>!Js(c,a));return{arrayValue:{values:t}}}class Af extends Gf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Px(i){return hr(i.integerValue||i.doubleValue)}function wE(i){return cg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function rI(i,e){return i.field.isEqual(e.field)&&function(a,c){return a instanceof Tu&&c instanceof Tu||a instanceof Su&&c instanceof Su?ic(a.elements,c.elements,Js):a instanceof Af&&c instanceof Af?Js(a.Ie,c.Ie):a instanceof bf&&c instanceof bf}(i.transform,e.transform)}class iI{constructor(e,t){this.version=e,this.transformResults=t}}class ys{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class qf{}function EE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new gg(i.key,ys.none()):new Bu(i.key,i.data,ys.none());{const t=i.data,a=Li.empty();let c=new Sr(Zr.comparator);for(let f of e.fields)if(!c.has(f)){let y=t.field(f);y===null&&f.length>1&&(f=f.popLast(),y=t.field(f)),y===null?a.delete(f):a.set(f,y),c=c.add(f)}return new No(i.key,a,new $i(c.toArray()),ys.none())}}function sI(i,e,t){i instanceof Bu?function(c,f,y){const b=c.value.clone(),_=jx(c.fieldTransforms,f,y.transformResults);b.setAll(_),f.convertToFoundDocument(y.version,b).setHasCommittedMutations()}(i,e,t):i instanceof No?function(c,f,y){if(!sf(c.precondition,f))return void f.convertToUnknownDocument(y.version);const b=jx(c.fieldTransforms,f,y.transformResults),_=f.data;_.setAll(_E(c)),_.setAll(b),f.convertToFoundDocument(y.version,_).setHasCommittedMutations()}(i,e,t):function(c,f,y){f.convertToNoDocument(y.version).setHasCommittedMutations()}(0,e,t)}function wu(i,e,t,a){return i instanceof Bu?function(f,y,b,_){if(!sf(f.precondition,y))return b;const w=f.value.clone(),S=Ux(f.fieldTransforms,_,y);return w.setAll(S),y.convertToFoundDocument(y.version,w).setHasLocalMutations(),null}(i,e,t,a):i instanceof No?function(f,y,b,_){if(!sf(f.precondition,y))return b;const w=Ux(f.fieldTransforms,_,y),S=y.data;return S.setAll(_E(f)),S.setAll(w),y.convertToFoundDocument(y.version,S).setHasLocalMutations(),b===null?null:b.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(R=>R.field))}(i,e,t,a):function(f,y,b){return sf(f.precondition,y)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):b}(i,e,t)}function aI(i,e){let t=null;for(const a of i.fieldTransforms){const c=e.data.field(a.field),f=pE(a.transform,c||null);f!=null&&(t===null&&(t=Li.empty()),t.set(a.field,f))}return t||null}function Bx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(a,c){return a===void 0&&c===void 0||!(!a||!c)&&ic(a,c,(f,y)=>rI(f,y))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Bu extends qf{constructor(e,t,a,c=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class No extends qf{constructor(e,t,a,c,f=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function _E(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function jx(i,e,t){const a=new Map;fn(i.length===t.length);for(let c=0;c<t.length;c++){const f=i[c],y=f.transform,b=e.data.field(f.field);a.set(f.field,nI(y,b,t[c]))}return a}function Ux(i,e,t){const a=new Map;for(const c of i){const f=c.transform,y=t.data.field(c.field);a.set(c.field,tI(f,y,e))}return a}class gg extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oI extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t,a,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=c}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&sI(f,e,a[c])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=wu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=wu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=gE();return this.mutations.forEach(c=>{const f=e.get(c.key),y=f.overlayedDocument;let b=this.applyToLocalView(y,f.mutatedFields);b=t.has(c.key)?null:b;const _=EE(y,b);_!==null&&a.set(c.key,_),y.isValidDocument()||y.convertToNoDocument(Nt.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(t,a)=>Bx(t,a))&&ic(this.baseMutations,e.baseMutations,(t,a)=>Bx(t,a))}}class mg{constructor(e,t,a,c){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=c}static from(e,t,a){fn(e.mutations.length===a.length);let c=function(){return K3}();const f=e.mutations;for(let y=0;y<f.length;y++)c=c.insert(f[y].key,a[y].version);return new mg(e,t,a,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr,rn;function hI(i){switch(i){case Te.OK:return At();case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return At()}}function vE(i){if(i===void 0)return Ma("GRPC error has no .code"),Te.UNKNOWN;switch(i){case yr.OK:return Te.OK;case yr.CANCELLED:return Te.CANCELLED;case yr.UNKNOWN:return Te.UNKNOWN;case yr.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case yr.INTERNAL:return Te.INTERNAL;case yr.UNAVAILABLE:return Te.UNAVAILABLE;case yr.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case yr.NOT_FOUND:return Te.NOT_FOUND;case yr.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case yr.ABORTED:return Te.ABORTED;case yr.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case yr.DATA_LOSS:return Te.DATA_LOSS;default:return At()}}(rn=yr||(yr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new xo([4294967295,4294967295],0);function Vx(i){const e=fI().encode(i),t=new Uw;return t.update(e),new Uint8Array(t.digest())}function Fx(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new xo([t,a],0),new xo([c,f],0)]}class pg{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new hu(`Invalid padding: ${t}`);if(a<0)throw new hu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new hu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new hu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=xo.fromNumber(this.Ee)}Ae(e,t,a){let c=e.add(t.multiply(xo.fromNumber(a)));return c.compare(dI)===1&&(c=new xo([c.getBits(0),c.getBits(1)],0)),c.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Vx(e),[a,c]=Fx(t);for(let f=0;f<this.hashCount;f++){const y=this.Ae(a,c,f);if(!this.Re(y))return!1}return!0}static create(e,t,a){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),y=new pg(f,c,t);return a.forEach(b=>y.insert(b)),y}insert(e){if(this.Ee===0)return;const t=Vx(e),[a,c]=Fx(t);for(let f=0;f<this.hashCount;f++){const y=this.Ae(a,c,f);this.Ve(y)}}Ve(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,a,c,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const c=new Map;return c.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Yf(Nt.min(),c,new Wn(Jt),Oa(),Kt())}}class ju{constructor(e,t,a,c,f){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new ju(a,t,Kt(),Kt(),Kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,a,c){this.me=e,this.removedTargetIds=t,this.key=a,this.fe=c}}class bE{constructor(e,t){this.targetId=e,this.ge=t}}class AE{constructor(e,t,a=Jr.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=c}}class zx{constructor(){this.pe=0,this.ye=Hx(),this.we=Jr.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Kt(),t=Kt(),a=Kt();return this.ye.forEach((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:a=a.add(c);break;default:At()}}),new ju(this.we,this.Se,e,t,a)}Me(){this.be=!1,this.ye=Hx()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,fn(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class gI{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Oa(),this.$e=Xh(),this.Ke=Xh(),this.Ue=new Wn(Jt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const a=this.He(t);switch(e.state){case 0:this.Je(t)&&a.Ce(e.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(e.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(t);break;case 3:this.Je(t)&&(a.Le(),a.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),a.Ce(e.resumeToken));break;default:At()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((a,c)=>{this.Je(c)&&t(c)})}Ze(e){const t=e.targetId,a=e.ge.count,c=this.Xe(t);if(c){const f=c.target;if(E1(f))if(a===0){const y=new dt(f.path);this.ze(t,y,ci.newNoDocument(y,Nt.min()))}else fn(a===1);else{const y=this.et(t);if(y!==a){const b=this.tt(e),_=b?this.nt(b,e,y):1;if(_!==0){this.Ye(t);const w=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,w)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=t;let y,b;try{y=vo(a).toUint8Array()}catch(_){if(_ instanceof Ww)return rc("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{b=new pg(y,c,f)}catch(_){return rc(_ instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return b.Ee===0?null:b}nt(e,t,a){return t.ge.count===a-this.st(e,t.targetId)?0:2}st(e,t){const a=this.ke.getRemoteKeysForTarget(t);let c=0;return a.forEach(f=>{const y=this.ke.it(),b=`projects/${y.projectId}/databases/${y.database}/documents/${f.path.canonicalString()}`;e.mightContain(b)||(this.ze(t,f,null),c++)}),c}ot(e){const t=new Map;this.qe.forEach((f,y)=>{const b=this.Xe(y);if(b){if(f.current&&E1(b.target)){const _=new dt(b.target.path);this._t(_).has(y)||this.ut(y,_)||this.ze(y,_,ci.newNoDocument(_,e))}f.ve&&(t.set(y,f.Fe()),f.Me())}});let a=Kt();this.Ke.forEach((f,y)=>{let b=!0;y.forEachWhile(_=>{const w=this.Xe(_);return!w||w.purpose==="TargetPurposeLimboResolution"||(b=!1,!1)}),b&&(a=a.add(f))}),this.Qe.forEach((f,y)=>y.setReadTime(e));const c=new Yf(e,t,this.Ue,this.Qe,a);return this.Qe=Oa(),this.$e=Xh(),this.Ke=Xh(),this.Ue=new Wn(Jt),c}Ge(e,t){if(!this.Je(e))return;const a=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,a),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,a){if(!this.Je(e))return;const c=this.He(e);this.ut(e,t)?c.xe(t,1):c.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),a&&(this.Qe=this.Qe.insert(t,a))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new zx,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Sr(Jt),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Sr(Jt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new zx),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Xh(){return new Wn(dt.comparator)}function Hx(){return new Wn(dt.comparator)}const mI={asc:"ASCENDING",desc:"DESCENDING"},pI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xI={and:"AND",or:"OR"};class yI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function b1(i,e){return i.useProto3Json||Vf(e)?e:{value:e}}function Cf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function wI(i,e){return Cf(i,e.toTimestamp())}function Zs(i){return fn(!!i),Nt.fromTimestamp(function(t){const a=_o(t);return new Tr(a.seconds,a.nanos)}(i))}function xg(i,e){return A1(i,e).canonicalString()}function A1(i,e){const t=function(c){return new On(["projects",c.projectId,"databases",c.database])}(i).child("documents");return e===void 0?t:t.child(e)}function TE(i){const e=On.fromString(i);return fn(DE(e)),e}function C1(i,e){return xg(i.databaseId,e.path)}function e1(i,e){const t=TE(e);if(t.get(1)!==i.databaseId.projectId)throw new et(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new et(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new dt(IE(t))}function SE(i,e){return xg(i.databaseId,e)}function EI(i){const e=TE(i);return e.length===4?On.emptyPath():IE(e)}function T1(i){return new On(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function IE(i){return fn(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Gx(i,e,t){return{name:C1(i,e),fields:t.value.mapValue.fields}}function _I(i,e){let t;if("targetChange"in e){e.targetChange;const a=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:At()}(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],f=function(w,S){return w.useProto3Json?(fn(S===void 0||typeof S=="string"),Jr.fromBase64String(S||"")):(fn(S===void 0||S instanceof Buffer||S instanceof Uint8Array),Jr.fromUint8Array(S||new Uint8Array))}(i,e.targetChange.resumeToken),y=e.targetChange.cause,b=y&&function(w){const S=w.code===void 0?Te.UNKNOWN:vE(w.code);return new et(S,w.message||"")}(y);t=new AE(a,c,f,b||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const c=e1(i,a.document.name),f=Zs(a.document.updateTime),y=a.document.createTime?Zs(a.document.createTime):Nt.min(),b=new Li({mapValue:{fields:a.document.fields}}),_=ci.newFoundDocument(c,f,y,b),w=a.targetIds||[],S=a.removedTargetIds||[];t=new af(w,S,_.key,_)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const c=e1(i,a.document),f=a.readTime?Zs(a.readTime):Nt.min(),y=ci.newNoDocument(c,f),b=a.removedTargetIds||[];t=new af([],b,y.key,y)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const c=e1(i,a.document),f=a.removedTargetIds||[];t=new af([],f,c,null)}else{if(!("filter"in e))return At();{e.filter;const a=e.filter;a.targetId;const{count:c=0,unchangedNames:f}=a,y=new uI(c,f),b=a.targetId;t=new bE(b,y)}}return t}function vI(i,e){let t;if(e instanceof Bu)t={update:Gx(i,e.key,e.value)};else if(e instanceof gg)t={delete:C1(i,e.key)};else if(e instanceof No)t={update:Gx(i,e.key,e.data),updateMask:DI(e.fieldMask)};else{if(!(e instanceof oI))return At();t={verify:C1(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(f,y){const b=y.transform;if(b instanceof bf)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof Tu)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof Su)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof Af)return{fieldPath:y.field.canonicalString(),increment:b.Ie};throw At()}(0,a))),e.precondition.isNone||(t.currentDocument=function(c,f){return f.updateTime!==void 0?{updateTime:wI(c,f.updateTime)}:f.exists!==void 0?{exists:f.exists}:At()}(i,e.precondition)),t}function bI(i,e){return i&&i.length>0?(fn(e!==void 0),i.map(t=>function(c,f){let y=c.updateTime?Zs(c.updateTime):Zs(f);return y.isEqual(Nt.min())&&(y=Zs(f)),new iI(y,c.transformResults||[])}(t,e))):[]}function AI(i,e){return{documents:[SE(i,e.path)]}}function CI(i,e){const t={structuredQuery:{}},a=e.path;let c;e.collectionGroup!==null?(c=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=SE(i,c);const f=function(w){if(w.length!==0)return RE(Rs.create(w,"and"))}(e.filters);f&&(t.structuredQuery.where=f);const y=function(w){if(w.length!==0)return w.map(S=>function(P){return{field:ql(P.field),direction:II(P.dir)}}(S))}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const b=b1(i,e.limit);return b!==null&&(t.structuredQuery.limit=b),e.startAt&&(t.structuredQuery.startAt=function(w){return{before:w.inclusive,values:w.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),{ht:t,parent:c}}function TI(i){let e=EI(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let c=null;if(a>0){fn(a===1);const S=t.from[0];S.allDescendants?c=S.collectionId:e=e.child(S.collectionId)}let f=[];t.where&&(f=function(R){const P=NE(R);return P instanceof Rs&&sE(P)?P.getFilters():[P]}(t.where));let y=[];t.orderBy&&(y=function(R){return R.map(P=>function(Y){return new vf(Yl(Y.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Y.direction))}(P))}(t.orderBy));let b=null;t.limit&&(b=function(R){let P;return P=typeof R=="object"?R.value:R,Vf(P)?null:P}(t.limit));let _=null;t.startAt&&(_=function(R){const P=!!R.before,F=R.values||[];return new _f(F,P)}(t.startAt));let w=null;return t.endAt&&(w=function(R){const P=!R.before,F=R.values||[];return new _f(F,P)}(t.endAt)),q3(e,c,y,f,b,"F",_,w)}function SI(i,e){const t=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NE(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Yl(t.unaryFilter.field);return Er.create(a,"==",{doubleValue:NaN});case"IS_NULL":const c=Yl(t.unaryFilter.field);return Er.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Yl(t.unaryFilter.field);return Er.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=Yl(t.unaryFilter.field);return Er.create(y,"!=",{nullValue:"NULL_VALUE"});default:return At()}}(i):i.fieldFilter!==void 0?function(t){return Er.create(Yl(t.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Rs.create(t.compositeFilter.filters.map(a=>NE(a)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return At()}}(t.compositeFilter.op))}(i):At()}function II(i){return mI[i]}function NI(i){return pI[i]}function RI(i){return xI[i]}function ql(i){return{fieldPath:i.canonicalString()}}function Yl(i){return Zr.fromServerFormat(i.fieldPath)}function RE(i){return i instanceof Er?function(t){if(t.op==="=="){if(Dx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(Rx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Dx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(Rx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:NI(t.op),value:t.value}}}(i):i instanceof Rs?function(t){const a=t.getFilters().map(c=>RE(c));return a.length===1?a[0]:{compositeFilter:{op:RI(t.op),filters:a}}}(i):At()}function DI(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function DE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,a,c,f=Nt.min(),y=Nt.min(),b=Jr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=b,this.expectedCount=_}withSequenceNumber(e){return new fo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.Tt=e}}function OI(i){const e=TI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?v1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.Tn=new kI}addToCollectionParentIndex(e,t){return this.Tn.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t){return Se.resolve(null)}getIndexType(e,t){return Se.resolve(0)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,t){return Se.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,t){return Se.resolve(Eo.min())}updateCollectionGroup(e,t,a){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class kI{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t]||new Sr(On.comparator),f=!c.has(a);return this.index[t]=c.add(a),f}has(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t];return c&&c.has(a)}getEntries(e){return(this.index[e]||new Sr(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ME=41943040;class Oi{static withCacheSize(e){return new Oi(e,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi.DEFAULT_COLLECTION_PERCENTILE=10,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oi.DEFAULT=new Oi(ME,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oi.DISABLED=new Oi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new oc(0)}static Un(){return new oc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="LruGarbageCollector",PI=1048576;function Xx([i,e],[t,a]){const c=Jt(i,t);return c===0?Jt(e,a):c}class BI{constructor(e){this.Hn=e,this.buffer=new Sr(Xx),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Xx(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jI{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){$e(Yx,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){mc(t)?$e(Yx,"Ignoring IndexedDB error during garbage collection: ",t):await gc(t)}await this.er(3e5)})}}class UI{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(t===0)return Se.resolve(Uf.ae);const a=new BI(t);return this.tr.forEachTarget(e,c=>a.Zn(c.sequenceNumber)).next(()=>this.tr.rr(e,c=>a.Zn(c))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.tr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(qx)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qx):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let a,c,f,y,b,_,w;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),c=this.params.maximumSequenceNumbersToCollect):c=R,y=Date.now(),this.nthSequenceNumber(e,c))).next(R=>(a=R,b=Date.now(),this.removeTargets(e,a,t))).next(R=>(f=R,_=Date.now(),this.removeOrphanedDocuments(e,a))).next(R=>(w=Date.now(),Hl()<=Wt.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${y-S}ms
	Determined least recently used ${c} in `+(b-y)+`ms
	Removed ${f} targets in `+(_-b)+`ms
	Removed ${R} documents in `+(w-_)+`ms
Total Duration: ${w-S}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:R})))}}function VI(i,e){return new UI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.changes=new al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ci.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?Se.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,t,a,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=c}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(a=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(a!==null&&wu(a.mutation,c,$i.empty(),Tr.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Kt()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Kt()){const c=Zo();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,a).next(f=>{let y=uu();return f.forEach((b,_)=>{y=y.insert(b,_.overlayedDocument)}),y}))}getOverlayedDocuments(e,t){const a=Zo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Kt()))}populateOverlays(e,t,a){const c=[];return a.forEach(f=>{t.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(e,c).next(f=>{f.forEach((y,b)=>{t.set(y,b)})})}computeViews(e,t,a,c){let f=Oa();const y=yu(),b=function(){return yu()}();return t.forEach((_,w)=>{const S=a.get(w.key);c.has(w.key)&&(S===void 0||S.mutation instanceof No)?f=f.insert(w.key,w):S!==void 0?(y.set(w.key,S.mutation.getFieldMask()),wu(S.mutation,w,S.mutation.getFieldMask(),Tr.now())):y.set(w.key,$i.empty())}),this.recalculateAndSaveOverlays(e,f).next(_=>(_.forEach((w,S)=>y.set(w,S)),t.forEach((w,S)=>{var R;return b.set(w,new zI(S,(R=y.get(w))!==null&&R!==void 0?R:null))}),b))}recalculateAndSaveOverlays(e,t){const a=yu();let c=new Wn((y,b)=>y-b),f=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(y=>{for(const b of y)b.keys().forEach(_=>{const w=t.get(_);if(w===null)return;let S=a.get(_)||$i.empty();S=b.applyToLocalView(w,S),a.set(_,S);const R=(c.get(b.batchId)||Kt()).add(_);c=c.insert(b.batchId,R)})}).next(()=>{const y=[],b=c.getReverseIterator();for(;b.hasNext();){const _=b.getNext(),w=_.key,S=_.value,R=gE();S.forEach(P=>{if(!f.has(P)){const F=EE(t.get(P),a.get(P));F!==null&&R.set(P,F),f=f.add(P)}}),y.push(this.documentOverlayCache.saveOverlays(e,w,R))}return Se.waitFor(y)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a,c){return function(y){return dt.isDocumentKey(y.path)&&y.collectionGroup===null&&y.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,c):this.getDocumentsMatchingCollectionQuery(e,t,a,c)}getNextDocuments(e,t,a,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,c).next(f=>{const y=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,c-f.size):Se.resolve(Zo());let b=vu,_=f;return y.next(w=>Se.forEach(w,(S,R)=>(b<R.largestBatchId&&(b=R.largestBatchId),f.get(S)?Se.resolve():this.remoteDocumentCache.getEntry(e,S).next(P=>{_=_.insert(S,P)}))).next(()=>this.populateOverlays(e,w,f)).next(()=>this.computeViews(e,_,w,Kt())).next(S=>({batchId:b,changes:dE(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dt(t)).next(a=>{let c=uu();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,a,c){const f=t.collectionGroup;let y=uu();return this.indexManager.getCollectionParents(e,f).next(b=>Se.forEach(b,_=>{const w=function(R,P){return new pc(P,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(t,_.child(f));return this.getDocumentsMatchingCollectionQuery(e,w,a,c).next(S=>{S.forEach((R,P)=>{y=y.insert(R,P)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,a,c){let f;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(y=>(f=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,f,c))).next(y=>{f.forEach((_,w)=>{const S=w.getKey();y.get(S)===null&&(y=y.insert(S,ci.newInvalidDocument(S)))});let b=uu();return y.forEach((_,w)=>{const S=f.get(_);S!==void 0&&wu(S.mutation,w,$i.empty(),Tr.now()),Hf(t,w)&&(b=b.insert(_,w))}),b})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Se.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(c){return{id:c.id,version:c.version,createTime:Zs(c.createTime)}}(t)),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(c){return{name:c.name,query:OI(c.bundledQuery),readTime:Zs(c.readTime)}}(t)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.overlays=new Wn(dt.comparator),this.Rr=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Zo();return Se.forEach(t,c=>this.getOverlay(e,c).next(f=>{f!==null&&a.set(c,f)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((c,f)=>{this.Et(e,t,f)}),Se.resolve()}removeOverlaysForBatchId(e,t,a){const c=this.Rr.get(a);return c!==void 0&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.Rr.delete(a)),Se.resolve()}getOverlaysForCollection(e,t,a){const c=Zo(),f=t.length+1,y=new dt(t.child("")),b=this.overlays.getIteratorFrom(y);for(;b.hasNext();){const _=b.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===f&&_.largestBatchId>a&&c.set(_.getKey(),_)}return Se.resolve(c)}getOverlaysForCollectionGroup(e,t,a,c){let f=new Wn((w,S)=>w-S);const y=this.overlays.getIterator();for(;y.hasNext();){const w=y.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>a){let S=f.get(w.largestBatchId);S===null&&(S=Zo(),f=f.insert(w.largestBatchId,S)),S.set(w.getKey(),w)}}const b=Zo(),_=f.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,S)=>b.set(w,S)),!(b.size()>=c)););return Se.resolve(b)}Et(e,t,a){const c=this.overlays.get(a.key);if(c!==null){const y=this.Rr.get(c.largestBatchId).delete(a.key);this.Rr.set(c.largestBatchId,y)}this.overlays=this.overlays.insert(a.key,new cI(t,a));let f=this.Rr.get(t);f===void 0&&(f=Kt(),this.Rr.set(t,f)),this.Rr.set(t,f.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.sessionToken=Jr.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.Vr=new Sr(Lr.mr),this.gr=new Sr(Lr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const a=new Lr(e,t);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.wr(new Lr(e,t))}Sr(e,t){e.forEach(a=>this.removeReference(a,t))}br(e){const t=new dt(new On([])),a=new Lr(t,e),c=new Lr(t,e+1),f=[];return this.gr.forEachInRange([a,c],y=>{this.wr(y),f.push(y.key)}),f}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new dt(new On([])),a=new Lr(t,e),c=new Lr(t,e+1);let f=Kt();return this.gr.forEachInRange([a,c],y=>{f=f.add(y.key)}),f}containsKey(e){const t=new Lr(e,0),a=this.Vr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Lr{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return dt.comparator(e.key,t.key)||Jt(e.Cr,t.Cr)}static pr(e,t){return Jt(e.Cr,t.Cr)||dt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Sr(Lr.mr)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,c){const f=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const y=new lI(f,t,a,c);this.mutationQueue.push(y);for(const b of c)this.Mr=this.Mr.add(new Lr(b.key,f)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return Se.resolve(y)}lookupMutationBatch(e,t){return Se.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,c=this.Nr(a),f=c<0?0:c;return Se.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?og:this.Fr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Lr(t,0),c=new Lr(t,Number.POSITIVE_INFINITY),f=[];return this.Mr.forEachInRange([a,c],y=>{const b=this.Or(y.Cr);f.push(b)}),Se.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Sr(Jt);return t.forEach(c=>{const f=new Lr(c,0),y=new Lr(c,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([f,y],b=>{a=a.add(b.Cr)})}),Se.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,c=a.length+1;let f=a;dt.isDocumentKey(f)||(f=f.child(""));const y=new Lr(new dt(f),0);let b=new Sr(Jt);return this.Mr.forEachWhile(_=>{const w=_.key.path;return!!a.isPrefixOf(w)&&(w.length===c&&(b=b.add(_.Cr)),!0)},y),Se.resolve(this.Br(b))}Br(e){const t=[];return e.forEach(a=>{const c=this.Or(a);c!==null&&t.push(c)}),t}removeMutationBatch(e,t){fn(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Se.forEach(t.mutations,c=>{const f=new Lr(c.key,t.batchId);return a=a.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Mr=a})}qn(e){}containsKey(e,t){const a=new Lr(t,0),c=this.Mr.firstAfterOrEqual(a);return Se.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.kr=e,this.docs=function(){return new Wn(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,c=this.docs.get(a),f=c?c.size:0,y=this.kr(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:y}),this.size+=y-f,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return Se.resolve(a?a.document.mutableCopy():ci.newInvalidDocument(t))}getEntries(e,t){let a=Oa();return t.forEach(c=>{const f=this.docs.get(c);a=a.insert(c,f?f.document.mutableCopy():ci.newInvalidDocument(c))}),Se.resolve(a)}getDocumentsMatchingQuery(e,t,a,c){let f=Oa();const y=t.path,b=new dt(y.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(b);for(;_.hasNext();){const{key:w,value:{document:S}}=_.getNext();if(!y.isPrefixOf(w.path))break;w.path.length>y.length+1||b3(v3(S),a)<=0||(c.has(S.key)||Hf(t,S))&&(f=f.insert(S.key,S.mutableCopy()))}return Se.resolve(f)}getAllFromCollectionGroup(e,t,a,c){At()}qr(e,t){return Se.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new WI(this)}getSize(e){return Se.resolve(this.size)}}class WI extends FI{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((a,c)=>{c.isValidDocument()?t.push(this.Ir.addEntry(e,c)):this.Ir.removeEntry(a)}),Se.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.persistence=e,this.Qr=new al(t=>ug(t),hg),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new yg,this.targetCount=0,this.Ur=oc.Kn()}forEachTarget(e,t){return this.Qr.forEach((a,c)=>t(c)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.$r&&(this.$r=t),Se.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new oc(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.zn(t),Se.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,a){let c=0;const f=[];return this.Qr.forEach((y,b)=>{b.sequenceNumber<=t&&a.get(b.targetId)===null&&(this.Qr.delete(y),f.push(this.removeMatchingKeysForTargetId(e,b.targetId)),c++)}),Se.waitFor(f).next(()=>c)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const a=this.Qr.get(t)||null;return Se.resolve(a)}addMatchingKeys(e,t,a){return this.Kr.yr(t,a),Se.resolve()}removeMatchingKeys(e,t,a){this.Kr.Sr(t,a);const c=this.persistence.referenceDelegate,f=[];return c&&t.forEach(y=>{f.push(c.markPotentiallyOrphaned(e,y))}),Se.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const a=this.Kr.vr(t);return Se.resolve(a)}containsKey(e,t){return Se.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Uf(0),this.zr=!1,this.zr=!0,this.jr=new YI,this.referenceDelegate=e(this),this.Hr=new KI(this),this.indexManager=new LI,this.remoteDocumentCache=function(c){return new QI(c)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new MI(t),this.Yr=new GI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Wr[e.toKey()];return a||(a=new XI(t,this.referenceDelegate),this.Wr[e.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,a){$e("MemoryPersistence","Starting transaction:",e);const c=new ZI(this.Gr.next());return this.referenceDelegate.Zr(),a(c).next(f=>this.referenceDelegate.Xr(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}ei(e,t){return Se.or(Object.values(this.Wr).map(a=>()=>a.containsKey(e,t)))}}class ZI extends C3{constructor(e){super(),this.currentSequenceNumber=e}}class wg{constructor(e){this.persistence=e,this.ti=new yg,this.ni=null}static ri(e){return new wg(e)}get ii(){if(this.ni)return this.ni;throw At()}addReference(e,t,a){return this.ti.addReference(a,t),this.ii.delete(a.toString()),Se.resolve()}removeReference(e,t,a){return this.ti.removeReference(a,t),this.ii.add(a.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Se.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(c=>this.ii.add(c.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(f=>this.ii.add(f.toString()))}).next(()=>a.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.ii,a=>{const c=dt.fromPath(a);return this.si(e,c).next(f=>{f||t.removeEntry(c,Nt.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(a=>{a?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Se.or([()=>Se.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Tf{constructor(e,t){this.persistence=e,this.oi=new al(a=>I3(a.path),(a,c)=>a.isEqual(c)),this.garbageCollector=VI(this,t)}static ri(e,t){return new Tf(e,t)}Zr(){}Xr(e){return Se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>t.next(c=>a+c))}sr(e){let t=0;return this.rr(e,a=>{t++}).next(()=>t)}rr(e,t){return Se.forEach(this.oi,(a,c)=>this.ar(e,a,c).next(f=>f?Se.resolve():t(c)))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const c=this.persistence.getRemoteDocumentCache(),f=c.newChangeBuffer();return c.qr(e,y=>this.ar(e,y,t).next(b=>{b||(a++,f.removeEntry(y,Nt.min()))})).next(()=>f.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Se.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),Se.resolve()}removeReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),Se.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Se.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nf(e.data.value)),t}ar(e,t,a){return Se.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.oi.get(t);return Se.resolve(c!==void 0&&c>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t,a,c){this.targetId=e,this.fromCache=t,this.Hi=a,this.Ji=c}static Yi(e,t){let a=Kt(),c=Kt();for(const f of t.docChanges)switch(f.type){case 0:a=a.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new Eg(e,t.fromCache,a,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return KA()?8:T3(ui())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,a,c){const f={result:null};return this.rs(e,t).next(y=>{f.result=y}).next(()=>{if(!f.result)return this.ss(e,t,c,a).next(y=>{f.result=y})}).next(()=>{if(f.result)return;const y=new $I;return this._s(e,t,y).next(b=>{if(f.result=b,this.Xi)return this.us(e,t,y,b.size)})}).next(()=>f.result)}us(e,t,a,c){return a.documentReadCount<this.es?(Hl()<=Wt.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",Gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Se.resolve()):(Hl()<=Wt.DEBUG&&$e("QueryEngine","Query:",Gl(t),"scans",a.documentReadCount,"local documents and returns",c,"documents as results."),a.documentReadCount>this.ts*c?(Hl()<=Wt.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",Gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ks(t))):Se.resolve())}rs(e,t){if(kx(t))return Se.resolve(null);let a=Ks(t);return this.indexManager.getIndexType(e,a).next(c=>c===0?null:(t.limit!==null&&c===1&&(t=v1(t,null,"F"),a=Ks(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(f=>{const y=Kt(...f);return this.ns.getDocuments(e,y).next(b=>this.indexManager.getMinOffset(e,a).next(_=>{const w=this.cs(t,b);return this.ls(t,w,y,_.readTime)?this.rs(e,v1(t,null,"F")):this.hs(e,w,t,_)}))})))}ss(e,t,a,c){return kx(t)||c.isEqual(Nt.min())?Se.resolve(null):this.ns.getDocuments(e,a).next(f=>{const y=this.cs(t,f);return this.ls(t,y,a,c)?Se.resolve(null):(Hl()<=Wt.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Gl(t)),this.hs(e,y,t,_3(c,vu)).next(b=>b))})}cs(e,t){let a=new Sr(hE(e));return t.forEach((c,f)=>{Hf(e,f)&&(a=a.add(f))}),a}ls(e,t,a,c){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const f=e.limitType==="F"?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}_s(e,t,a){return Hl()<=Wt.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Gl(t)),this.ns.getDocumentsMatchingQuery(e,t,Eo.min(),a)}hs(e,t,a,c){return this.ns.getDocumentsMatchingQuery(e,a,c).next(f=>(t.forEach(y=>{f=f.insert(y.key,y)}),f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LocalStore",e4=3e8;class t4{constructor(e,t,a,c){this.persistence=e,this.Ps=t,this.serializer=c,this.Ts=new Wn(Jt),this.Is=new al(f=>ug(f),hg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(a)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function n4(i,e,t,a){return new t4(i,e,t,a)}async function LE(i,e){const t=Mt(i);return await t.persistence.runTransaction("Handle user change","readonly",a=>{let c;return t.mutationQueue.getAllMutationBatches(a).next(f=>(c=f,t.As(e),t.mutationQueue.getAllMutationBatches(a))).next(f=>{const y=[],b=[];let _=Kt();for(const w of c){y.push(w.batchId);for(const S of w.mutations)_=_.add(S.key)}for(const w of f){b.push(w.batchId);for(const S of w.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(a,_).next(w=>({Rs:w,removedBatchIds:y,addedBatchIds:b}))})})}function r4(i,e){const t=Mt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const c=e.batch.keys(),f=t.ds.newChangeBuffer({trackRemovals:!0});return function(b,_,w,S){const R=w.batch,P=R.keys();let F=Se.resolve();return P.forEach(Y=>{F=F.next(()=>S.getEntry(_,Y)).next(ee=>{const W=w.docVersions.get(Y);fn(W!==null),ee.version.compareTo(W)<0&&(R.applyToRemoteDocument(ee,w),ee.isValidDocument()&&(ee.setReadTime(w.commitVersion),S.addEntry(ee)))})}),F.next(()=>b.mutationQueue.removeMutationBatch(_,R))}(t,a,e,f).next(()=>f.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(b){let _=Kt();for(let w=0;w<b.mutationResults.length;++w)b.mutationResults[w].transformResults.length>0&&(_=_.add(b.batch.mutations[w].key));return _}(e))).next(()=>t.localDocuments.getDocuments(a,c))})}function kE(i){const e=Mt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function i4(i,e){const t=Mt(i),a=e.snapshotVersion;let c=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const y=t.ds.newChangeBuffer({trackRemovals:!0});c=t.Ts;const b=[];e.targetChanges.forEach((S,R)=>{const P=c.get(R);if(!P)return;b.push(t.Hr.removeMatchingKeys(f,S.removedDocuments,R).next(()=>t.Hr.addMatchingKeys(f,S.addedDocuments,R)));let F=P.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(R)!==null?F=F.withResumeToken(Jr.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):S.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(S.resumeToken,a)),c=c.insert(R,F),function(ee,W,de){return ee.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=e4?!0:de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0}(P,F,S)&&b.push(t.Hr.updateTargetData(f,F))});let _=Oa(),w=Kt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&b.push(t.persistence.referenceDelegate.updateLimboDocument(f,S))}),b.push(s4(f,y,e.documentUpdates).next(S=>{_=S.Vs,w=S.fs})),!a.isEqual(Nt.min())){const S=t.Hr.getLastRemoteSnapshotVersion(f).next(R=>t.Hr.setTargetsMetadata(f,f.currentSequenceNumber,a));b.push(S)}return Se.waitFor(b).next(()=>y.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,_,w)).next(()=>_)}).then(f=>(t.Ts=c,f))}function s4(i,e,t){let a=Kt(),c=Kt();return t.forEach(f=>a=a.add(f)),e.getEntries(i,a).next(f=>{let y=Oa();return t.forEach((b,_)=>{const w=f.get(b);_.isFoundDocument()!==w.isFoundDocument()&&(c=c.add(b)),_.isNoDocument()&&_.version.isEqual(Nt.min())?(e.removeEntry(b,_.readTime),y=y.insert(b,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||_.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(_),y=y.insert(b,_)):$e(_g,"Ignoring outdated watch update for ",b,". Current version:",w.version," Watch version:",_.version)}),{Vs:y,fs:c}})}function a4(i,e){const t=Mt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=og),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function o4(i,e){const t=Mt(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let c;return t.Hr.getTargetData(a,e).next(f=>f?(c=f,Se.resolve(c)):t.Hr.allocateTargetId(a).next(y=>(c=new fo(e,y,"TargetPurposeListen",a.currentSequenceNumber),t.Hr.addTargetData(a,c).next(()=>c))))}).then(a=>{const c=t.Ts.get(a.targetId);return(c===null||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(a.targetId,a),t.Is.set(e,a.targetId)),a})}async function S1(i,e,t){const a=Mt(i),c=a.Ts.get(e),f=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",f,y=>a.persistence.referenceDelegate.removeTarget(y,c))}catch(y){if(!mc(y))throw y;$e(_g,`Failed to update sequence numbers for target ${e}: ${y}`)}a.Ts=a.Ts.remove(e),a.Is.delete(c.target)}function Qx(i,e,t){const a=Mt(i);let c=Nt.min(),f=Kt();return a.persistence.runTransaction("Execute query","readwrite",y=>function(_,w,S){const R=Mt(_),P=R.Is.get(S);return P!==void 0?Se.resolve(R.Ts.get(P)):R.Hr.getTargetData(w,S)}(a,y,Ks(e)).next(b=>{if(b)return c=b.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(y,b.targetId).next(_=>{f=_})}).next(()=>a.Ps.getDocumentsMatchingQuery(y,e,t?c:Nt.min(),t?f:Kt())).next(b=>(l4(a,X3(e),b),{documents:b,gs:f})))}function l4(i,e,t){let a=i.Es.get(e)||Nt.min();t.forEach((c,f)=>{f.readTime.compareTo(a)>0&&(a=f.readTime)}),i.Es.set(e,a)}class Wx{constructor(){this.activeTargetIds=J3()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c4{constructor(){this.ho=new Wx,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,a){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Wx,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="ConnectivityMonitor";class Zx{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){$e(Kx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){$e(Kx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function I1(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="RestConnection",h4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class f4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${a}/databases/${c}`,this.wo=this.databaseId.database===wf?`project_id=${a}`:`project_id=${a}&database_id=${c}`}So(e,t,a,c,f){const y=I1(),b=this.bo(e,t.toUriEncodedString());$e(t1,`Sending RPC '${e}' ${y}:`,b,a);const _={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(_,c,f),this.vo(e,b,_,a).then(w=>($e(t1,`Received RPC '${e}' ${y}: `,w),w),w=>{throw rc(t1,`RPC '${e}' ${y} failed with error: `,w,"url: ",b,"request:",a),w})}Co(e,t,a,c,f,y){return this.So(e,t,a,c,f)}Do(e,t,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,f)=>e[f]=c),a&&a.headers.forEach((c,f)=>e[f]=c)}bo(e,t){const a=h4[e];return`${this.po}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="WebChannelConnection";class g4 extends f4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,a,c){const f=I1();return new Promise((y,b)=>{const _=new Vw;_.setWithCredentials(!0),_.listenOnce(Fw.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case tf.NO_ERROR:const S=_.getResponseJson();$e(oi,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),y(S);break;case tf.TIMEOUT:$e(oi,`RPC '${e}' ${f} timed out`),b(new et(Te.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const R=_.getStatus();if($e(oi,`RPC '${e}' ${f} failed with status:`,R,"response text:",_.getResponseText()),R>0){let P=_.getResponseJson();Array.isArray(P)&&(P=P[0]);const F=P==null?void 0:P.error;if(F&&F.status&&F.message){const Y=function(W){const de=W.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(de)>=0?de:Te.UNKNOWN}(F.status);b(new et(Y,F.message))}else b(new et(Te.UNKNOWN,"Server responded with status "+_.getStatus()))}else b(new et(Te.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{$e(oi,`RPC '${e}' ${f} completed.`)}});const w=JSON.stringify(c);$e(oi,`RPC '${e}' ${f} sending request:`,c),_.send(t,"POST",w,a,15)})}Wo(e,t,a){const c=I1(),f=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=Gw(),b=Hw(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(_.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Do(_.initMessageHeaders,t,a),_.encodeInitMessageHeaders=!0;const S=f.join("");$e(oi,`Creating RPC '${e}' stream ${c}: ${S}`,_);const R=y.createWebChannel(S,_);let P=!1,F=!1;const Y=new d4({Fo:W=>{F?$e(oi,`Not sending because RPC '${e}' stream ${c} is closed:`,W):(P||($e(oi,`Opening RPC '${e}' stream ${c} transport.`),R.open(),P=!0),$e(oi,`RPC '${e}' stream ${c} sending:`,W),R.send(W))},Mo:()=>R.close()}),ee=(W,de,fe)=>{W.listen(de,ie=>{try{fe(ie)}catch(_e){setTimeout(()=>{throw _e},0)}})};return ee(R,cu.EventType.OPEN,()=>{F||($e(oi,`RPC '${e}' stream ${c} transport opened.`),Y.Qo())}),ee(R,cu.EventType.CLOSE,()=>{F||(F=!0,$e(oi,`RPC '${e}' stream ${c} transport closed`),Y.Ko())}),ee(R,cu.EventType.ERROR,W=>{F||(F=!0,rc(oi,`RPC '${e}' stream ${c} transport errored:`,W),Y.Ko(new et(Te.UNAVAILABLE,"The operation could not be completed")))}),ee(R,cu.EventType.MESSAGE,W=>{var de;if(!F){const fe=W.data[0];fn(!!fe);const ie=fe,_e=(ie==null?void 0:ie.error)||((de=ie[0])===null||de===void 0?void 0:de.error);if(_e){$e(oi,`RPC '${e}' stream ${c} received error:`,_e);const Be=_e.status;let ke=function(k){const G=yr[k];if(G!==void 0)return vE(G)}(Be),z=_e.message;ke===void 0&&(ke=Te.INTERNAL,z="Unknown error status: "+Be+" with message "+_e.message),F=!0,Y.Ko(new et(ke,z)),R.close()}else $e(oi,`RPC '${e}' stream ${c} received:`,fe),Y.Uo(fe)}}),ee(b,zw.STAT_EVENT,W=>{W.stat===p1.PROXY?$e(oi,`RPC '${e}' stream ${c} detected buffering proxy`):W.stat===p1.NOPROXY&&$e(oi,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{Y.$o()},0),Y}}function n1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(i){return new yI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,a=1e3,c=1.5,f=6e4){this.Ti=e,this.timerId=t,this.Go=a,this.zo=c,this.jo=f,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),c=Math.max(0,t-a);c>0&&$e("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,c,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="PersistentStream";class BE{constructor(e,t,a,c,f,y,b,_){this.Ti=e,this.n_=a,this.r_=c,this.connection=f,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=b,this.listener=_,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new PE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Te.RESOURCE_EXHAUSTED?(Ma(t.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,c])=>{this.i_===t&&this.V_(a,c)},a=>{e(()=>{const c=new et(Te.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(c)})})}V_(e,t){const a=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(c=>{a(()=>this.m_(c))}),this.stream.onMessage(c=>{a(()=>++this.__==1?this.g_(c):this.onNext(c))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return $e($x,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():($e($x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m4 extends BE{constructor(e,t,a,c,f,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,c,y),this.serializer=f}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=_I(this.serializer,e),a=function(f){if(!("targetChange"in f))return Nt.min();const y=f.targetChange;return y.targetIds&&y.targetIds.length?Nt.min():y.readTime?Zs(y.readTime):Nt.min()}(e);return this.listener.p_(t,a)}y_(e){const t={};t.database=T1(this.serializer),t.addTarget=function(f,y){let b;const _=y.target;if(b=E1(_)?{documents:AI(f,_)}:{query:CI(f,_).ht},b.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){b.resumeToken=CE(f,y.resumeToken);const w=b1(f,y.expectedCount);w!==null&&(b.expectedCount=w)}else if(y.snapshotVersion.compareTo(Nt.min())>0){b.readTime=Cf(f,y.snapshotVersion.toTimestamp());const w=b1(f,y.expectedCount);w!==null&&(b.expectedCount=w)}return b}(this.serializer,e);const a=SI(this.serializer,e);a&&(t.labels=a),this.I_(t)}w_(e){const t={};t.database=T1(this.serializer),t.removeTarget=e,this.I_(t)}}class p4 extends BE{constructor(e,t,a,c,f,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,c,y),this.serializer=f}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return fn(!!e.streamToken),this.lastStreamToken=e.streamToken,fn(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){fn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=bI(e.writeResults,e.commitTime),a=Zs(e.commitTime);return this.listener.v_(a,t)}C_(){const e={};e.database=T1(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>vI(this.serializer,a))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{}class y4 extends x4{constructor(e,t,a,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=c,this.F_=!1}M_(){if(this.F_)throw new et(Te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,a,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,y])=>this.connection.So(e,A1(t,a),c,f,y)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new et(Te.UNKNOWN,f.toString())})}Co(e,t,a,c,f){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,b])=>this.connection.Co(e,A1(t,a),c,y,b,f)).catch(y=>{throw y.name==="FirebaseError"?(y.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new et(Te.UNKNOWN,y.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class w4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ma(t),this.N_=!1):$e("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class E4{constructor(e,t,a,c,f){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=f,this.z_.To(y=>{a.enqueueAndForget(async()=>{ol(this)&&($e(nl,"Restarting streams for network reachability change."),await async function(_){const w=Mt(_);w.W_.add(4),await Uu(w),w.j_.set("Unknown"),w.W_.delete(4),await Qf(w)}(this))})}),this.j_=new w4(a,c)}}async function Qf(i){if(ol(i))for(const e of i.G_)await e(!0)}async function Uu(i){for(const e of i.G_)await e(!1)}function jE(i,e){const t=Mt(i);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Cg(t)?Ag(t):xc(t).c_()&&bg(t,e))}function vg(i,e){const t=Mt(i),a=xc(t);t.U_.delete(e),a.c_()&&UE(t,e),t.U_.size===0&&(a.c_()?a.P_():ol(t)&&t.j_.set("Unknown"))}function bg(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xc(i).y_(e)}function UE(i,e){i.H_.Ne(e),xc(i).w_(e)}function Ag(i){i.H_=new gI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.U_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),xc(i).start(),i.j_.B_()}function Cg(i){return ol(i)&&!xc(i).u_()&&i.U_.size>0}function ol(i){return Mt(i).W_.size===0}function VE(i){i.H_=void 0}async function _4(i){i.j_.set("Online")}async function v4(i){i.U_.forEach((e,t)=>{bg(i,e)})}async function b4(i,e){VE(i),Cg(i)?(i.j_.q_(e),Ag(i)):i.j_.set("Unknown")}async function A4(i,e,t){if(i.j_.set("Online"),e instanceof AE&&e.state===2&&e.cause)try{await async function(c,f){const y=f.cause;for(const b of f.targetIds)c.U_.has(b)&&(await c.remoteSyncer.rejectListen(b,y),c.U_.delete(b),c.H_.removeTarget(b))}(i,e)}catch(a){$e(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Sf(i,a)}else if(e instanceof af?i.H_.We(e):e instanceof bE?i.H_.Ze(e):i.H_.je(e),!t.isEqual(Nt.min()))try{const a=await kE(i.localStore);t.compareTo(a)>=0&&await function(f,y){const b=f.H_.ot(y);return b.targetChanges.forEach((_,w)=>{if(_.resumeToken.approximateByteSize()>0){const S=f.U_.get(w);S&&f.U_.set(w,S.withResumeToken(_.resumeToken,y))}}),b.targetMismatches.forEach((_,w)=>{const S=f.U_.get(_);if(!S)return;f.U_.set(_,S.withResumeToken(Jr.EMPTY_BYTE_STRING,S.snapshotVersion)),UE(f,_);const R=new fo(S.target,_,w,S.sequenceNumber);bg(f,R)}),f.remoteSyncer.applyRemoteEvent(b)}(i,t)}catch(a){$e(nl,"Failed to raise snapshot:",a),await Sf(i,a)}}async function Sf(i,e,t){if(!mc(e))throw e;i.W_.add(1),await Uu(i),i.j_.set("Offline"),t||(t=()=>kE(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{$e(nl,"Retrying IndexedDB access"),await t(),i.W_.delete(1),await Qf(i)})}function FE(i,e){return e().catch(t=>Sf(i,t,e))}async function Wf(i){const e=Mt(i),t=Ao(e);let a=e.K_.length>0?e.K_[e.K_.length-1].batchId:og;for(;C4(e);)try{const c=await a4(e.localStore,a);if(c===null){e.K_.length===0&&t.P_();break}a=c.batchId,T4(e,c)}catch(c){await Sf(e,c)}zE(e)&&HE(e)}function C4(i){return ol(i)&&i.K_.length<10}function T4(i,e){i.K_.push(e);const t=Ao(i);t.c_()&&t.S_&&t.b_(e.mutations)}function zE(i){return ol(i)&&!Ao(i).u_()&&i.K_.length>0}function HE(i){Ao(i).start()}async function S4(i){Ao(i).C_()}async function I4(i){const e=Ao(i);for(const t of i.K_)e.b_(t.mutations)}async function N4(i,e,t){const a=i.K_.shift(),c=mg.from(a,e,t);await FE(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),await Wf(i)}async function R4(i,e){e&&Ao(i).S_&&await async function(a,c){if(function(y){return hI(y)&&y!==Te.ABORTED}(c.code)){const f=a.K_.shift();Ao(a).h_(),await FE(a,()=>a.remoteSyncer.rejectFailedWrite(f.batchId,c)),await Wf(a)}}(i,e),zE(i)&&HE(i)}async function Jx(i,e){const t=Mt(i);t.asyncQueue.verifyOperationInProgress(),$e(nl,"RemoteStore received new credentials");const a=ol(t);t.W_.add(3),await Uu(t),a&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Qf(t)}async function D4(i,e){const t=Mt(i);e?(t.W_.delete(2),await Qf(t)):e||(t.W_.add(2),await Uu(t),t.j_.set("Unknown"))}function xc(i){return i.J_||(i.J_=function(t,a,c){const f=Mt(t);return f.M_(),new m4(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{xo:_4.bind(null,i),No:v4.bind(null,i),Lo:b4.bind(null,i),p_:A4.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Cg(i)?Ag(i):i.j_.set("Unknown")):(await i.J_.stop(),VE(i))})),i.J_}function Ao(i){return i.Y_||(i.Y_=function(t,a,c){const f=Mt(t);return f.M_(),new p4(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:S4.bind(null,i),Lo:R4.bind(null,i),D_:I4.bind(null,i),v_:N4.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await Wf(i)):(await i.Y_.stop(),i.K_.length>0&&($e(nl,`Stopping write stream with ${i.K_.length} pending writes`),i.K_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,a,c,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=c,this.removalCallback=f,this.deferred=new Na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,c,f){const y=Date.now()+a,b=new Tg(e,t,y,c,f);return b.start(a),b}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sg(i,e){if(Ma("AsyncQueue",`${e}: ${i}`),mc(i))return new et(Te.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{static emptySet(e){return new $l(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||dt.comparator(t.key,a.key):(t,a)=>dt.comparator(t.key,a.key),this.keyedMap=uu(),this.sortedSet=new Wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $l)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new $l;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.Z_=new Wn(dt.comparator)}track(e){const t=e.doc.key,a=this.Z_.get(t);a?e.type!==0&&a.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&a.type!==1?this.Z_=this.Z_.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Z_=this.Z_.remove(t):e.type===1&&a.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):At():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,a)=>{e.push(a)}),e}}class lc{constructor(e,t,a,c,f,y,b,_,w){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=f,this.fromCache=y,this.syncStateChanged=b,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,a,c,f){const y=[];return t.forEach(b=>{y.push({type:0,doc:b})}),new lc(e,t,$l.emptySet(t),y,a,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==a[c].type||!t[c].doc.isEqual(a[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class O4{constructor(){this.queries=ty(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,a){const c=Mt(t),f=c.queries;c.queries=ty(),f.forEach((y,b)=>{for(const _ of b.ta)_.onError(a)})})(this,new et(Te.ABORTED,"Firestore shutting down"))}}function ty(){return new al(i=>uE(i),zf)}async function GE(i,e){const t=Mt(i);let a=3;const c=e.query;let f=t.queries.get(c);f?!f.na()&&e.ra()&&(a=2):(f=new M4,a=e.ra()?0:1);try{switch(a){case 0:f.ea=await t.onListen(c,!0);break;case 1:f.ea=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(y){const b=Sg(y,`Initialization of query '${Gl(e.query)}' failed`);return void e.onError(b)}t.queries.set(c,f),f.ta.push(e),e.sa(t.onlineState),f.ea&&e.oa(f.ea)&&Ig(t)}async function qE(i,e){const t=Mt(i),a=e.query;let c=3;const f=t.queries.get(a);if(f){const y=f.ta.indexOf(e);y>=0&&(f.ta.splice(y,1),f.ta.length===0?c=e.ra()?0:1:!f.na()&&e.ra()&&(c=2))}switch(c){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function L4(i,e){const t=Mt(i);let a=!1;for(const c of e){const f=c.query,y=t.queries.get(f);if(y){for(const b of y.ta)b.oa(c)&&(a=!0);y.ea=c}}a&&Ig(t)}function k4(i,e,t){const a=Mt(i),c=a.queries.get(e);if(c)for(const f of c.ta)f.onError(t);a.queries.delete(e)}function Ig(i){i.ia.forEach(e=>{e.next()})}var N1,ny;(ny=N1||(N1={}))._a="default",ny.Cache="cache";class YE{constructor(e,t,a){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(e){if(!this.options.includeMetadataChanges){const a=[];for(const c of e.docChanges)c.type!==3&&a.push(c);e=new lc(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const a=t!=="Offline";return(!this.options.Ta||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==N1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.key=e}}class QE{constructor(e){this.key=e}}class P4{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Kt(),this.mutatedKeys=Kt(),this.ya=hE(e),this.wa=new $l(this.ya)}get Sa(){return this.fa}ba(e,t){const a=t?t.Da:new ey,c=t?t.wa:this.wa;let f=t?t.mutatedKeys:this.mutatedKeys,y=c,b=!1;const _=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,w=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((S,R)=>{const P=c.get(S),F=Hf(this.query,R)?R:null,Y=!!P&&this.mutatedKeys.has(P.key),ee=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let W=!1;P&&F?P.data.isEqual(F.data)?Y!==ee&&(a.track({type:3,doc:F}),W=!0):this.va(P,F)||(a.track({type:2,doc:F}),W=!0,(_&&this.ya(F,_)>0||w&&this.ya(F,w)<0)&&(b=!0)):!P&&F?(a.track({type:0,doc:F}),W=!0):P&&!F&&(a.track({type:1,doc:P}),W=!0,(_||w)&&(b=!0)),W&&(F?(y=y.add(F),f=ee?f.add(S):f.delete(S)):(y=y.delete(S),f=f.delete(S)))}),this.query.limit!==null)for(;y.size>this.query.limit;){const S=this.query.limitType==="F"?y.last():y.first();y=y.delete(S.key),f=f.delete(S.key),a.track({type:1,doc:S})}return{wa:y,Da:a,ls:b,mutatedKeys:f}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,c){const f=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const y=e.Da.X_();y.sort((S,R)=>function(F,Y){const ee=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return ee(F)-ee(Y)}(S.type,R.type)||this.ya(S.doc,R.doc)),this.Ca(a),c=c!=null&&c;const b=t&&!c?this.Fa():[],_=this.pa.size===0&&this.current&&!c?1:0,w=_!==this.ga;return this.ga=_,y.length!==0||w?{snapshot:new lc(this.query,e.wa,f,y,e.mutatedKeys,_===0,w,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:b}:{Ma:b}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ey,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Kt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const t=[];return e.forEach(a=>{this.pa.has(a)||t.push(new QE(a))}),this.pa.forEach(a=>{e.has(a)||t.push(new XE(a))}),t}Oa(e){this.fa=e.gs,this.pa=Kt();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return lc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ng="SyncEngine";class B4{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class j4{constructor(e){this.key=e,this.Ba=!1}}class U4{constructor(e,t,a,c,f,y){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=y,this.La={},this.ka=new al(b=>uE(b),zf),this.qa=new Map,this.Qa=new Set,this.$a=new Wn(dt.comparator),this.Ka=new Map,this.Ua=new yg,this.Wa={},this.Ga=new Map,this.za=oc.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function V4(i,e,t=!0){const a=e_(i);let c;const f=a.ka.get(e);return f?(a.sharedClientState.addLocalQueryTarget(f.targetId),c=f.view.Na()):c=await WE(a,e,t,!0),c}async function F4(i,e){const t=e_(i);await WE(t,e,!0,!1)}async function WE(i,e,t,a){const c=await o4(i.localStore,Ks(e)),f=c.targetId,y=i.sharedClientState.addLocalQueryTarget(f,t);let b;return a&&(b=await z4(i,e,f,y==="current",c.resumeToken)),i.isPrimaryClient&&t&&jE(i.remoteStore,c),b}async function z4(i,e,t,a,c){i.Ha=(R,P,F)=>async function(ee,W,de,fe){let ie=W.view.ba(de);ie.ls&&(ie=await Qx(ee.localStore,W.query,!1).then(({documents:z})=>W.view.ba(z,ie)));const _e=fe&&fe.targetChanges.get(W.targetId),Be=fe&&fe.targetMismatches.get(W.targetId)!=null,ke=W.view.applyChanges(ie,ee.isPrimaryClient,_e,Be);return iy(ee,W.targetId,ke.Ma),ke.snapshot}(i,R,P,F);const f=await Qx(i.localStore,e,!0),y=new P4(e,f.gs),b=y.ba(f.documents),_=ju.createSynthesizedTargetChangeForCurrentChange(t,a&&i.onlineState!=="Offline",c),w=y.applyChanges(b,i.isPrimaryClient,_);iy(i,t,w.Ma);const S=new B4(e,t,y);return i.ka.set(e,S),i.qa.has(t)?i.qa.get(t).push(e):i.qa.set(t,[e]),w.snapshot}async function H4(i,e,t){const a=Mt(i),c=a.ka.get(e),f=a.qa.get(c.targetId);if(f.length>1)return a.qa.set(c.targetId,f.filter(y=>!zf(y,e))),void a.ka.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(c.targetId),a.sharedClientState.isActiveQueryTarget(c.targetId)||await S1(a.localStore,c.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(c.targetId),t&&vg(a.remoteStore,c.targetId),R1(a,c.targetId)}).catch(gc)):(R1(a,c.targetId),await S1(a.localStore,c.targetId,!0))}async function G4(i,e){const t=Mt(i),a=t.ka.get(e),c=t.qa.get(a.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),vg(t.remoteStore,a.targetId))}async function q4(i,e,t){const a=$4(i);try{const c=await function(y,b){const _=Mt(y),w=Tr.now(),S=b.reduce((F,Y)=>F.add(Y.key),Kt());let R,P;return _.persistence.runTransaction("Locally write mutations","readwrite",F=>{let Y=Oa(),ee=Kt();return _.ds.getEntries(F,S).next(W=>{Y=W,Y.forEach((de,fe)=>{fe.isValidDocument()||(ee=ee.add(de))})}).next(()=>_.localDocuments.getOverlayedDocuments(F,Y)).next(W=>{R=W;const de=[];for(const fe of b){const ie=aI(fe,R.get(fe.key).overlayedDocument);ie!=null&&de.push(new No(fe.key,ie,nE(ie.value.mapValue),ys.exists(!0)))}return _.mutationQueue.addMutationBatch(F,w,de,b)}).next(W=>{P=W;const de=W.applyToLocalDocumentSet(R,ee);return _.documentOverlayCache.saveOverlays(F,W.batchId,de)})}).then(()=>({batchId:P.batchId,changes:dE(R)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(c.batchId),function(y,b,_){let w=y.Wa[y.currentUser.toKey()];w||(w=new Wn(Jt)),w=w.insert(b,_),y.Wa[y.currentUser.toKey()]=w}(a,c.batchId,t),await Vu(a,c.changes),await Wf(a.remoteStore)}catch(c){const f=Sg(c,"Failed to persist write");t.reject(f)}}async function KE(i,e){const t=Mt(i);try{const a=await i4(t.localStore,e);e.targetChanges.forEach((c,f)=>{const y=t.Ka.get(f);y&&(fn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?y.Ba=!0:c.modifiedDocuments.size>0?fn(y.Ba):c.removedDocuments.size>0&&(fn(y.Ba),y.Ba=!1))}),await Vu(t,a,e)}catch(a){await gc(a)}}function ry(i,e,t){const a=Mt(i);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const c=[];a.ka.forEach((f,y)=>{const b=y.view.sa(e);b.snapshot&&c.push(b.snapshot)}),function(y,b){const _=Mt(y);_.onlineState=b;let w=!1;_.queries.forEach((S,R)=>{for(const P of R.ta)P.sa(b)&&(w=!0)}),w&&Ig(_)}(a.eventManager,e),c.length&&a.La.p_(c),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function Y4(i,e,t){const a=Mt(i);a.sharedClientState.updateQueryState(e,"rejected",t);const c=a.Ka.get(e),f=c&&c.key;if(f){let y=new Wn(dt.comparator);y=y.insert(f,ci.newNoDocument(f,Nt.min()));const b=Kt().add(f),_=new Yf(Nt.min(),new Map,new Wn(Jt),y,b);await KE(a,_),a.$a=a.$a.remove(f),a.Ka.delete(e),Rg(a)}else await S1(a.localStore,e,!1).then(()=>R1(a,e,t)).catch(gc)}async function X4(i,e){const t=Mt(i),a=e.batch.batchId;try{const c=await r4(t.localStore,e);$E(t,a,null),ZE(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Vu(t,c)}catch(c){await gc(c)}}async function Q4(i,e,t){const a=Mt(i);try{const c=await function(y,b){const _=Mt(y);return _.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let S;return _.mutationQueue.lookupMutationBatch(w,b).next(R=>(fn(R!==null),S=R.keys(),_.mutationQueue.removeMutationBatch(w,R))).next(()=>_.mutationQueue.performConsistencyCheck(w)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(w,S,b)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,S)).next(()=>_.localDocuments.getDocuments(w,S))})}(a.localStore,e);$E(a,e,t),ZE(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Vu(a,c)}catch(c){await gc(c)}}function ZE(i,e){(i.Ga.get(e)||[]).forEach(t=>{t.resolve()}),i.Ga.delete(e)}function $E(i,e,t){const a=Mt(i);let c=a.Wa[a.currentUser.toKey()];if(c){const f=c.get(e);f&&(t?f.reject(t):f.resolve(),c=c.remove(e)),a.Wa[a.currentUser.toKey()]=c}}function R1(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.qa.get(e))i.ka.delete(a),t&&i.La.Ja(a,t);i.qa.delete(e),i.isPrimaryClient&&i.Ua.br(e).forEach(a=>{i.Ua.containsKey(a)||JE(i,a)})}function JE(i,e){i.Qa.delete(e.path.canonicalString());const t=i.$a.get(e);t!==null&&(vg(i.remoteStore,t),i.$a=i.$a.remove(e),i.Ka.delete(t),Rg(i))}function iy(i,e,t){for(const a of t)a instanceof XE?(i.Ua.addReference(a.key,e),W4(i,a)):a instanceof QE?($e(Ng,"Document no longer in limbo: "+a.key),i.Ua.removeReference(a.key,e),i.Ua.containsKey(a.key)||JE(i,a.key)):At()}function W4(i,e){const t=e.key,a=t.path.canonicalString();i.$a.get(t)||i.Qa.has(a)||($e(Ng,"New document in limbo: "+t),i.Qa.add(a),Rg(i))}function Rg(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const t=new dt(On.fromString(e)),a=i.za.next();i.Ka.set(a,new j4(t)),i.$a=i.$a.insert(t,a),jE(i.remoteStore,new fo(Ks(fg(t.path)),a,"TargetPurposeLimboResolution",Uf.ae))}}async function Vu(i,e,t){const a=Mt(i),c=[],f=[],y=[];a.ka.isEmpty()||(a.ka.forEach((b,_)=>{y.push(a.Ha(_,e,t).then(w=>{var S;if((w||t)&&a.isPrimaryClient){const R=w?!w.fromCache:(S=t==null?void 0:t.targetChanges.get(_.targetId))===null||S===void 0?void 0:S.current;a.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(w){c.push(w);const R=Eg.Yi(_.targetId,w);f.push(R)}}))}),await Promise.all(y),a.La.p_(c),await async function(_,w){const S=Mt(_);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>Se.forEach(w,P=>Se.forEach(P.Hi,F=>S.persistence.referenceDelegate.addReference(R,P.targetId,F)).next(()=>Se.forEach(P.Ji,F=>S.persistence.referenceDelegate.removeReference(R,P.targetId,F)))))}catch(R){if(!mc(R))throw R;$e(_g,"Failed to update sequence numbers: "+R)}for(const R of w){const P=R.targetId;if(!R.fromCache){const F=S.Ts.get(P),Y=F.snapshotVersion,ee=F.withLastLimboFreeSnapshotVersion(Y);S.Ts=S.Ts.insert(P,ee)}}}(a.localStore,f))}async function K4(i,e){const t=Mt(i);if(!t.currentUser.isEqual(e)){$e(Ng,"User change. New user:",e.toKey());const a=await LE(t.localStore,e);t.currentUser=e,function(f,y){f.Ga.forEach(b=>{b.forEach(_=>{_.reject(new et(Te.CANCELLED,y))})}),f.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Vu(t,a.Rs)}}function Z4(i,e){const t=Mt(i),a=t.Ka.get(e);if(a&&a.Ba)return Kt().add(a.key);{let c=Kt();const f=t.qa.get(e);if(!f)return c;for(const y of f){const b=t.ka.get(y);c=c.unionWith(b.view.Sa)}return c}}function e_(i){const e=Mt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=KE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y4.bind(null,e),e.La.p_=L4.bind(null,e.eventManager),e.La.Ja=k4.bind(null,e.eventManager),e}function $4(i){const e=Mt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q4.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return n4(this.persistence,new JI,e.initialUser,this.serializer)}Xa(e){return new OE(wg.ri,this.serializer)}Za(e){return new c4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class J4 extends If{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){fn(this.persistence.referenceDelegate instanceof Tf);const a=this.persistence.referenceDelegate.garbageCollector;return new jI(a,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Oi.withCacheSize(this.cacheSizeBytes):Oi.DEFAULT;return new OE(a=>Tf.ri(a,t),this.serializer)}}class D1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>ry(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=K4.bind(null,this.syncEngine),await D4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new O4}()}createDatastore(e){const t=Xf(e.databaseInfo.databaseId),a=function(f){return new g4(f)}(e.databaseInfo);return function(f,y,b,_){return new y4(f,y,b,_)}(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return function(a,c,f,y,b){return new E4(a,c,f,y,b)}(this.localStore,this.datastore,e.asyncQueue,t=>ry(this.syncEngine,t,0),function(){return Zx.D()?new Zx:new u4}())}createSyncEngine(e,t){return function(c,f,y,b,_,w,S){const R=new U4(c,f,y,b,_,w);return S&&(R.ja=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(c){const f=Mt(c);$e(nl,"RemoteStore shutting down."),f.W_.add(5),await Uu(f),f.z_.shutdown(),f.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}D1.provider={build:()=>new D1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="FirestoreClient";class eN{constructor(e,t,a,c,f){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=c,this.user=li.UNAUTHENTICATED,this.clientId=Yw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(a,async y=>{$e(Co,"Received user=",y.uid),await this.authCredentialListener(y),this.user=y}),this.appCheckCredentials.start(a,y=>($e(Co,"Received new app check token=",y),this.appCheckCredentialListener(y,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Sg(t,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function r1(i,e){i.asyncQueue.verifyOperationInProgress(),$e(Co,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(async c=>{a.isEqual(c)||(await LE(e.localStore,c),a=c)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function sy(i,e){i.asyncQueue.verifyOperationInProgress();const t=await tN(i);$e(Co,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(a=>Jx(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,c)=>Jx(e.remoteStore,c)),i._onlineComponents=e}async function tN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){$e(Co,"Using user provided OfflineComponentProvider");try{await r1(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(c){return c.name==="FirebaseError"?c.code===Te.FAILED_PRECONDITION||c.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(t))throw t;rc("Error using user provided cache. Falling back to memory cache: "+t),await r1(i,new If)}}else $e(Co,"Using default OfflineComponentProvider"),await r1(i,new J4(void 0));return i._offlineComponents}async function n_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?($e(Co,"Using user provided OnlineComponentProvider"),await sy(i,i._uninitializedComponentsProvider._online)):($e(Co,"Using default OnlineComponentProvider"),await sy(i,new D1))),i._onlineComponents}function nN(i){return n_(i).then(e=>e.syncEngine)}async function r_(i){const e=await n_(i),t=e.eventManager;return t.onListen=V4.bind(null,e.syncEngine),t.onUnlisten=H4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=F4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=G4.bind(null,e.syncEngine),t}function rN(i,e,t={}){const a=new Na;return i.asyncQueue.enqueueAndForget(async()=>function(f,y,b,_,w){const S=new t_({next:P=>{S.su(),y.enqueueAndForget(()=>qE(f,R));const F=P.docs.has(b);!F&&P.fromCache?w.reject(new et(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&P.fromCache&&_&&_.source==="server"?w.reject(new et(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(P)},error:P=>w.reject(P)}),R=new YE(fg(b.path),S,{includeMetadataChanges:!0,Ta:!0});return GE(f,R)}(await r_(i),i.asyncQueue,e,t,a)),a.promise}function iN(i,e,t={}){const a=new Na;return i.asyncQueue.enqueueAndForget(async()=>function(f,y,b,_,w){const S=new t_({next:P=>{S.su(),y.enqueueAndForget(()=>qE(f,R)),P.fromCache&&_.source==="server"?w.reject(new et(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(P)},error:P=>w.reject(P)}),R=new YE(b,S,{includeMetadataChanges:!0,Ta:!0});return GE(f,R)}(await r_(i),i.asyncQueue,e,t,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(i,e,t){if(!t)throw new et(Te.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function sN(i,e,t,a){if(e===!0&&a===!0)throw new et(Te.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function oy(i){if(!dt.isDocumentKey(i))throw new et(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ly(i){if(dt.isDocumentKey(i))throw new et(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Kf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":At()}function ws(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new et(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kf(i);throw new et(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="firestore.googleapis.com",cy=!0;class uy{constructor(e){var t,a;if(e.host===void 0){if(e.ssl!==void 0)throw new et(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s_,this.ssl=cy}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:cy;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ME;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PI)throw new et(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i_((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new et(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new et(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new et(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,c){return a.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,t,a,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uy(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new d3;switch(a.type){case"firstParty":return new x3(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new et(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const a=ay.get(t);a&&($e("ComponentProvider","Removing Datastore"),ay.delete(t),a.terminate())}(this),Promise.resolve()}}function aN(i,e,t,a={}){var c;const f=(i=ws(i,Fu))._getSettings(),y=`${e}:${t}`;if(f.host!==s_&&f.host!==y&&rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},f),{host:y,ssl:!1})),a.mockUserToken){let b,_;if(typeof a.mockUserToken=="string")b=a.mockUserToken,_=li.MOCK_USER;else{b=HA(a.mockUserToken,(c=i._app)===null||c===void 0?void 0:c.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new et(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new li(w)}i._authCredentials=new g3(new qw(b,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ll(this.firestore,e,this._query)}}class pi{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pi(this.firestore,e,this._key)}}class yo extends ll{constructor(e,t,a){super(e,t,fg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pi(this.firestore,null,new dt(e))}withConverter(e){return new yo(this.firestore,e,this._path)}}function Pr(i,e,...t){if(i=$r(i),Dg("collection","path",e),i instanceof Fu){const a=On.fromString(e,...t);return ly(a),new yo(i,null,a)}{if(!(i instanceof pi||i instanceof yo))throw new et(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(On.fromString(e,...t));return ly(a),new yo(i.firestore,null,a)}}function hy(i,e){if(i=ws(i,Fu),Dg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new et(Te.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ll(i,null,function(a){return new pc(On.emptyPath(),a)}(e))}function kt(i,e,...t){if(i=$r(i),arguments.length===1&&(e=Yw.newId()),Dg("doc","path",e),i instanceof Fu){const a=On.fromString(e,...t);return oy(a),new pi(i,null,new dt(a))}{if(!(i instanceof pi||i instanceof yo))throw new et(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(On.fromString(e,...t));return oy(a),new pi(i.firestore,i instanceof yo?i.converter:null,new dt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="AsyncQueue";class dy{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new PE(this,"async_queue_retry"),this.Su=()=>{const a=n1();a&&$e(fy,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=e;const t=n1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=n1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Na;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!mc(e))throw e;$e(fy,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(a=>{this.gu=a,this.pu=!1;const c=function(y){let b=y.message||"";return y.stack&&(b=y.stack.includes(y.message)?y.stack:y.message+`
`+y.stack),b}(a);throw Ma("INTERNAL UNHANDLED ERROR: ",c),a}).then(a=>(this.pu=!1,a))));return this.bu=t,t}enqueueAfterDelay(e,t,a){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const c=Tg.createAndSchedule(this,e,t,a,f=>this.Fu(f));return this.fu.push(c),c}Du(){this.gu&&At()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class cl extends Fu{constructor(e,t,a,c){super(e,t,a,c),this.type="firestore",this._queue=new dy,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dy(e),this._firestoreClient=void 0,await e}}}function ul(i,e){const t=typeof i=="object"?i:iw(),a=typeof i=="string"?i:wf,c=Q1(t,"firestore").getImmediate({identifier:a});if(!c._initialized){const f=FA("firestore");f&&aN(c,...f)}return c}function Mg(i){if(i._terminated)throw new et(Te.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||oN(i),i._firestoreClient}function oN(i){var e,t,a;const c=i._freezeSettings(),f=function(b,_,w,S){return new D3(b,_,w,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,i_(S.experimentalLongPollingOptions),S.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,c);i._componentsProvider||!((t=c.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((a=c.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(i._componentsProvider={_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider}),i._firestoreClient=new eN(i._authCredentials,i._appCheckCredentials,i._queue,f,i._componentsProvider&&function(b){const _=b==null?void 0:b._online.build();return{_offline:b==null?void 0:b._offline.build(_),_online:_}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cc(Jr.fromBase64String(e))}catch(t){throw new et(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cc(Jr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new et(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new et(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new et(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,c){if(a.length!==c.length)return!1;for(let f=0;f<a.length;++f)if(a[f]!==c[f])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=/^__.*__$/;class cN{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bu(e,this.data,t,this.fieldTransforms)}}class a_{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new No(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function o_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class Pg{constructor(e,t,a,c,f,y){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=c,f===void 0&&this.Bu(),this.fieldTransforms=f||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Pg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:a,Qu:!1});return c.$u(e),c}Ku(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:a,Qu:!1});return c.Bu(),c}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Nf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(o_(this.Lu)&&lN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class uN{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Xf(e)}ju(e,t,a,c=!1){return new Pg({Lu:e,methodName:t,zu:a,path:Zr.emptyPath(),Qu:!1,Gu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $f(i){const e=i._freezeSettings(),t=Xf(i._databaseId);return new uN(i._databaseId,!!e.ignoreUndefinedProperties,t)}function l_(i,e,t,a,c,f={}){const y=i.ju(f.merge||f.mergeFields?2:0,e,t,c);Bg("Data must be an object, but it was:",y,a);const b=c_(a,y);let _,w;if(f.merge)_=new $i(y.fieldMask),w=y.fieldTransforms;else if(f.mergeFields){const S=[];for(const R of f.mergeFields){const P=M1(e,R,t);if(!y.contains(P))throw new et(Te.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);h_(S,P)||S.push(P)}_=new $i(S),w=y.fieldTransforms.filter(R=>_.covers(R.field))}else _=null,w=y.fieldTransforms;return new cN(new Li(b),_,w)}class Jf extends Og{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jf}}function hN(i,e,t,a){const c=i.ju(1,e,t);Bg("Data must be an object, but it was:",c,a);const f=[],y=Li.empty();Io(a,(_,w)=>{const S=jg(e,_,t);w=$r(w);const R=c.Ku(S);if(w instanceof Jf)f.push(S);else{const P=zu(w,R);P!=null&&(f.push(S),y.set(S,P))}});const b=new $i(f);return new a_(y,b,c.fieldTransforms)}function fN(i,e,t,a,c,f){const y=i.ju(1,e,t),b=[M1(e,a,t)],_=[c];if(f.length%2!=0)throw new et(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<f.length;P+=2)b.push(M1(e,f[P])),_.push(f[P+1]);const w=[],S=Li.empty();for(let P=b.length-1;P>=0;--P)if(!h_(w,b[P])){const F=b[P];let Y=_[P];Y=$r(Y);const ee=y.Ku(F);if(Y instanceof Jf)w.push(F);else{const W=zu(Y,ee);W!=null&&(w.push(F),S.set(F,W))}}const R=new $i(w);return new a_(S,R,y.fieldTransforms)}function dN(i,e,t,a=!1){return zu(t,i.ju(a?4:3,e))}function zu(i,e){if(u_(i=$r(i)))return Bg("Unsupported field value:",e,i),c_(i,e);if(i instanceof Og)return function(a,c){if(!o_(c.Lu))throw c.Wu(`${a._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Wu(`${a._methodName}() is not currently supported inside arrays`);const f=a._toFieldTransform(c);f&&c.fieldTransforms.push(f)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(a,c){const f=[];let y=0;for(const b of a){let _=zu(b,c.Uu(y));_==null&&(_={nullValue:"NULL_VALUE"}),f.push(_),y++}return{arrayValue:{values:f}}}(i,e)}return function(a,c){if((a=$r(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return eI(c.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const f=Tr.fromDate(a);return{timestampValue:Cf(c.serializer,f)}}if(a instanceof Tr){const f=new Tr(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Cf(c.serializer,f)}}if(a instanceof Lg)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof cc)return{bytesValue:CE(c.serializer,a._byteString)};if(a instanceof pi){const f=c.databaseId,y=a.firestore._databaseId;if(!y.isEqual(f))throw c.Wu(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:xg(a.firestore._databaseId||c.databaseId,a._key.path)}}if(a instanceof kg)return function(y,b){return{mapValue:{fields:{[eE]:{stringValue:tE},[Ef]:{arrayValue:{values:y.toArray().map(w=>{if(typeof w!="number")throw b.Wu("VectorValues must only contain numeric values.");return dg(b.serializer,w)})}}}}}}(a,c);throw c.Wu(`Unsupported field value: ${Kf(a)}`)}(i,e)}function c_(i,e){const t={};return Qw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(i,(a,c)=>{const f=zu(c,e.qu(a));f!=null&&(t[a]=f)}),{mapValue:{fields:t}}}function u_(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Tr||i instanceof Lg||i instanceof cc||i instanceof pi||i instanceof Og||i instanceof kg)}function Bg(i,e,t){if(!u_(t)||!function(c){return typeof c=="object"&&c!==null&&(Object.getPrototypeOf(c)===Object.prototype||Object.getPrototypeOf(c)===null)}(t)){const a=Kf(t);throw a==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+a)}}function M1(i,e,t){if((e=$r(e))instanceof Zf)return e._internalPath;if(typeof e=="string")return jg(i,e);throw Nf("Field path arguments must be of type string or ",i,!1,void 0,t)}const gN=new RegExp("[~\\*/\\[\\]]");function jg(i,e,t){if(e.search(gN)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Zf(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Nf(i,e,t,a,c){const f=a&&!a.isEmpty(),y=c!==void 0;let b=`Function ${e}() called with invalid data`;t&&(b+=" (via `toFirestore()`)"),b+=". ";let _="";return(f||y)&&(_+=" (found",f&&(_+=` in field ${a}`),y&&(_+=` in document ${c}`),_+=")"),new et(Te.INVALID_ARGUMENT,b+i+_)}function h_(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,t,a,c,f){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new pi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ug("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mN extends f_{data(){return super.data()}}function Ug(i,e){return typeof e=="string"?jg(i,e):e instanceof Zf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new et(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vg{}class xN extends Vg{}function Iu(i,e,...t){let a=[];e instanceof Vg&&a.push(e),a=a.concat(t),function(f){const y=f.filter(_=>_ instanceof Fg).length,b=f.filter(_=>_ instanceof ed).length;if(y>1||y>0&&b>0)throw new et(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const c of a)i=c._apply(i);return i}class ed extends xN{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new ed(e,t,a)}_apply(e){const t=this._parse(e);return d_(e._query,t),new ll(e.firestore,e.converter,_1(e._query,t))}_parse(e){const t=$f(e.firestore);return function(f,y,b,_,w,S,R){let P;if(w.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new et(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){my(R,S);const Y=[];for(const ee of R)Y.push(gy(_,f,ee));P={arrayValue:{values:Y}}}else P=gy(_,f,R)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||my(R,S),P=dN(b,y,R,S==="in"||S==="not-in");return Er.create(w,S,P)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Nu(i,e,t){const a=e,c=Ug("where",i);return ed._create(c,a,t)}class Fg extends Vg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fg(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return t.length===1?t[0]:Rs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(c,f){let y=c;const b=f.getFlattenedFilters();for(const _ of b)d_(y,_),y=_1(y,_)}(e._query,t),new ll(e.firestore,e.converter,_1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function gy(i,e,t){if(typeof(t=$r(t))=="string"){if(t==="")throw new et(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cE(e)&&t.indexOf("/")!==-1)throw new et(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(On.fromString(t));if(!dt.isDocumentKey(a))throw new et(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Nx(i,new dt(a))}if(t instanceof pi)return Nx(i,t._key);throw new et(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kf(t)}.`)}function my(i,e){if(!Array.isArray(i)||i.length===0)throw new et(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d_(i,e){const t=function(c,f){for(const y of c)for(const b of y.getFlattenedFilters())if(f.indexOf(b.op)>=0)return b.op;return null}(i.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new et(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class yN{convertValue(e,t="none"){switch(bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw At()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Io(e,(c,f)=>{a[c]=this.convertValue(f,t)}),a}convertVectorValue(e){var t,a,c;const f=(c=(a=(t=e.fields)===null||t===void 0?void 0:t[Ef].arrayValue)===null||a===void 0?void 0:a.values)===null||c===void 0?void 0:c.map(y=>hr(y.doubleValue));return new kg(f)}convertGeoPoint(e){return new Lg(hr(e.latitude),hr(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Ff(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){const t=_o(e);return new Tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=On.fromString(e);fn(DE(a));const c=new Au(a.get(1),a.get(3)),f=new dt(a.popFirst(5));return c.isEqual(t)||Ma(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class m_ extends f_{constructor(e,t,a,c,f,y){super(e,t,a,c,y),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Ug("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class of extends m_{data(e={}){return super.data(e)}}class wN{constructor(e,t,a,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new fu(c.hasPendingWrites,c.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new of(this._firestore,this._userDataWriter,a.key,a,new fu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new et(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(c,f){if(c._snapshot.oldDocs.isEmpty()){let y=0;return c._snapshot.docChanges.map(b=>{const _=new of(c._firestore,c._userDataWriter,b.doc.key,b.doc,new fu(c._snapshot.mutatedKeys.has(b.doc.key),c._snapshot.fromCache),c.query.converter);return b.doc,{type:"added",doc:_,oldIndex:-1,newIndex:y++}})}{let y=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(b=>f||b.type!==3).map(b=>{const _=new of(c._firestore,c._userDataWriter,b.doc.key,b.doc,new fu(c._snapshot.mutatedKeys.has(b.doc.key),c._snapshot.fromCache),c.query.converter);let w=-1,S=-1;return b.type!==0&&(w=y.indexOf(b.doc.key),y=y.delete(b.doc.key)),b.type!==1&&(y=y.add(b.doc),S=y.indexOf(b.doc.key)),{type:EN(b.type),doc:_,oldIndex:w,newIndex:S}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function EN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(i){i=ws(i,pi);const e=ws(i.firestore,cl);return rN(Mg(e),i._key).then(t=>vN(e,i,t))}class p_ extends yN{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pi(this.firestore,null,t)}}function Cr(i){i=ws(i,ll);const e=ws(i.firestore,cl),t=Mg(e),a=new p_(e);return pN(i._query),iN(t,i._query).then(c=>new wN(e,a,i,c))}function ki(i,e,t){i=ws(i,pi);const a=ws(i.firestore,cl),c=g_(i.converter,e,t);return td(a,[l_($f(a),"setDoc",i._key,c,i.converter!==null,t).toMutation(i._key,ys.none())])}function Jl(i,e,t,...a){i=ws(i,pi);const c=ws(i.firestore,cl),f=$f(c);let y;return y=typeof(e=$r(e))=="string"||e instanceof Zf?fN(f,"updateDoc",i._key,e,t,a):hN(f,"updateDoc",i._key,e),td(c,[y.toMutation(i._key,ys.exists(!0))])}function du(i){return td(ws(i.firestore,cl),[new gg(i._key,ys.none())])}function _N(i,e){const t=ws(i.firestore,cl),a=kt(i),c=g_(i.converter,e);return td(t,[l_($f(i.firestore),"addDoc",a._key,c,i.converter!==null,{}).toMutation(a._key,ys.exists(!1))]).then(()=>a)}function td(i,e){return function(a,c){const f=new Na;return a.asyncQueue.enqueueAndForget(async()=>q4(await nN(a),c,f)),f.promise}(Mg(i),e)}function vN(i,e,t){const a=t.docs.get(e._key),c=new p_(i);return new m_(i,c,e._key,a,new fu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(c){dc=c})(fc),ec(new Jo("firestore",(a,{instanceIdentifier:c,options:f})=>{const y=a.getProvider("app").getImmediate(),b=new cl(new m3(a.getProvider("auth-internal")),new y3(y,a.getProvider("app-check-internal")),function(w,S){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new et(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(w.options.projectId,S)}(y,c),y);return f=Object.assign({useFetchStreams:t},f),b._setSettings(f),b},"PUBLIC").setMultipleInstances(!0)),po(yx,wx,e),po(yx,wx,"esm2017")})();var bN="firebase",AN="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */po(bN,AN,"app");const CN={apiKey:"AIzaSyC1K4kZk4TwvPBhndVCffuw5P4MqAC_AFM",authDomain:"web2024-9dc04.firebaseapp.com",projectId:"web2024-9dc04",storageBucket:"web2024-9dc04.firebasestorage.app",messagingSenderId:"533756221690",appId:"1:533756221690:web:7553ac87b46090dab99143",measurementId:"G-1EEGB1LPBS"},Ds=rw(CN);So(Ds);function TN(){const[i,e]=J.useState(""),t=ea(),a=So(Ds),c=new ba,f=ul(Ds),y=async()=>{var b,_;try{const S=(await _S(a,c)).user,R=kt(f,"users",S.uid);(await kr(R)).exists()||await ki(R,{name:S.displayName,email:S.email,photo:S.photoURL,classroom:{cid:"",status:2}});const Y=(_=(b=(await kr(R)).data())==null?void 0:b.classroom)==null?void 0:_.status;console.log("User status:",Y),t(Y===1?"/dashboard":Y===2?"/student-dashboard":"/dashboard")}catch(w){console.error(w),e("ไม่สามารถเข้าสู่ระบบด้วย Google ได้: "+w.message)}};return C.jsxs("div",{className:"min-h-screen flex",children:[C.jsx("div",{className:"w-1/2 bg-gradient-to-br from-blue-200 to-blue-500 flex items-center justify-center p-6",children:C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-5xl font-ChakraPetchTH text-white mb-4",children:"ยินดีต้อนรับสู่"}),C.jsx("h2",{className:"text-4xl font-ChakraPetchTH text-white mb-2",children:"ระบบจัดการห้องเรียน"}),C.jsx("h3",{className:"text-3xl font-InterEN text-white",children:"Classroom Management System"})]})}),C.jsx("div",{className:"w-1/2 bg-white flex items-center justify-center p-6",children:C.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-md",children:[C.jsx("h2",{className:"text-3xl font-ChakraPetchTH text-gray-800 mb-8",children:"เข้าสู่ระบบ"}),i&&C.jsx("div",{className:"bg-red-100 border border-red-400 text-red-800 px-4 py-3 rounded mb-6 w-full",children:i}),C.jsxs("button",{onClick:y,className:"w-80 h-16 flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-700 text-xl font-ChakraPetchTH rounded-xl transition duration-300 shadow-lg border-2 border-gray-200 hover:border-blue-500 group mx-auto",children:[C.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-7 h-7"}),C.jsx("span",{className:"group-hover:text-blue-600",children:"เข้าสู่ระบบด้วย Google"})]}),C.jsx("h3",{className:"p-6 text-red-500 font-ChakraPetchTH",children:"ลงทะเบียนครั้งแรกสำหรับอาจารย์ โปรดติดต่อแอดมิน"})]})})]})}const Wr=[];for(let i=0;i<256;++i)Wr.push((i+256).toString(16).slice(1));function SN(i,e=0){return(Wr[i[e+0]]+Wr[i[e+1]]+Wr[i[e+2]]+Wr[i[e+3]]+"-"+Wr[i[e+4]]+Wr[i[e+5]]+"-"+Wr[i[e+6]]+Wr[i[e+7]]+"-"+Wr[i[e+8]]+Wr[i[e+9]]+"-"+Wr[i[e+10]]+Wr[i[e+11]]+Wr[i[e+12]]+Wr[i[e+13]]+Wr[i[e+14]]+Wr[i[e+15]]).toLowerCase()}let i1;const IN=new Uint8Array(16);function NN(){if(!i1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i1=crypto.getRandomValues.bind(crypto)}return i1(IN)}const RN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),py={randomUUID:RN};function x_(i,e,t){var c;if(py.randomUUID&&!i)return py.randomUUID();i=i||{};const a=i.random??((c=i.rng)==null?void 0:c.call(i))??NN();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,SN(a)}var DN=Object.defineProperty,Rf=Object.getOwnPropertySymbols,y_=Object.prototype.hasOwnProperty,w_=Object.prototype.propertyIsEnumerable,xy=(i,e,t)=>e in i?DN(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,O1=(i,e)=>{for(var t in e||(e={}))y_.call(e,t)&&xy(i,t,e[t]);if(Rf)for(var t of Rf(e))w_.call(e,t)&&xy(i,t,e[t]);return i},L1=(i,e)=>{var t={};for(var a in i)y_.call(i,a)&&e.indexOf(a)<0&&(t[a]=i[a]);if(i!=null&&Rf)for(var a of Rf(i))e.indexOf(a)<0&&w_.call(i,a)&&(t[a]=i[a]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var rl;(i=>{const e=class Gt{constructor(_,w,S,R){if(this.version=_,this.errorCorrectionLevel=w,this.modules=[],this.isFunction=[],_<Gt.MIN_VERSION||_>Gt.MAX_VERSION)throw new RangeError("Version value out of range");if(R<-1||R>7)throw new RangeError("Mask value out of range");this.size=_*4+17;let P=[];for(let Y=0;Y<this.size;Y++)P.push(!1);for(let Y=0;Y<this.size;Y++)this.modules.push(P.slice()),this.isFunction.push(P.slice());this.drawFunctionPatterns();const F=this.addEccAndInterleave(S);if(this.drawCodewords(F),R==-1){let Y=1e9;for(let ee=0;ee<8;ee++){this.applyMask(ee),this.drawFormatBits(ee);const W=this.getPenaltyScore();W<Y&&(R=ee,Y=W),this.applyMask(ee)}}c(0<=R&&R<=7),this.mask=R,this.applyMask(R),this.drawFormatBits(R),this.isFunction=[]}static encodeText(_,w){const S=i.QrSegment.makeSegments(_);return Gt.encodeSegments(S,w)}static encodeBinary(_,w){const S=i.QrSegment.makeBytes(_);return Gt.encodeSegments([S],w)}static encodeSegments(_,w,S=1,R=40,P=-1,F=!0){if(!(Gt.MIN_VERSION<=S&&S<=R&&R<=Gt.MAX_VERSION)||P<-1||P>7)throw new RangeError("Invalid value");let Y,ee;for(Y=S;;Y++){const ie=Gt.getNumDataCodewords(Y,w)*8,_e=y.getTotalBits(_,Y);if(_e<=ie){ee=_e;break}if(Y>=R)throw new RangeError("Data too long")}for(const ie of[Gt.Ecc.MEDIUM,Gt.Ecc.QUARTILE,Gt.Ecc.HIGH])F&&ee<=Gt.getNumDataCodewords(Y,ie)*8&&(w=ie);let W=[];for(const ie of _){t(ie.mode.modeBits,4,W),t(ie.numChars,ie.mode.numCharCountBits(Y),W);for(const _e of ie.getData())W.push(_e)}c(W.length==ee);const de=Gt.getNumDataCodewords(Y,w)*8;c(W.length<=de),t(0,Math.min(4,de-W.length),W),t(0,(8-W.length%8)%8,W),c(W.length%8==0);for(let ie=236;W.length<de;ie^=253)t(ie,8,W);let fe=[];for(;fe.length*8<W.length;)fe.push(0);return W.forEach((ie,_e)=>fe[_e>>>3]|=ie<<7-(_e&7)),new Gt(Y,w,fe,P)}getModule(_,w){return 0<=_&&_<this.size&&0<=w&&w<this.size&&this.modules[w][_]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const _=this.getAlignmentPatternPositions(),w=_.length;for(let S=0;S<w;S++)for(let R=0;R<w;R++)S==0&&R==0||S==0&&R==w-1||S==w-1&&R==0||this.drawAlignmentPattern(_[S],_[R]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(_){const w=this.errorCorrectionLevel.formatBits<<3|_;let S=w;for(let P=0;P<10;P++)S=S<<1^(S>>>9)*1335;const R=(w<<10|S)^21522;c(R>>>15==0);for(let P=0;P<=5;P++)this.setFunctionModule(8,P,a(R,P));this.setFunctionModule(8,7,a(R,6)),this.setFunctionModule(8,8,a(R,7)),this.setFunctionModule(7,8,a(R,8));for(let P=9;P<15;P++)this.setFunctionModule(14-P,8,a(R,P));for(let P=0;P<8;P++)this.setFunctionModule(this.size-1-P,8,a(R,P));for(let P=8;P<15;P++)this.setFunctionModule(8,this.size-15+P,a(R,P));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let _=this.version;for(let S=0;S<12;S++)_=_<<1^(_>>>11)*7973;const w=this.version<<12|_;c(w>>>18==0);for(let S=0;S<18;S++){const R=a(w,S),P=this.size-11+S%3,F=Math.floor(S/3);this.setFunctionModule(P,F,R),this.setFunctionModule(F,P,R)}}drawFinderPattern(_,w){for(let S=-4;S<=4;S++)for(let R=-4;R<=4;R++){const P=Math.max(Math.abs(R),Math.abs(S)),F=_+R,Y=w+S;0<=F&&F<this.size&&0<=Y&&Y<this.size&&this.setFunctionModule(F,Y,P!=2&&P!=4)}}drawAlignmentPattern(_,w){for(let S=-2;S<=2;S++)for(let R=-2;R<=2;R++)this.setFunctionModule(_+R,w+S,Math.max(Math.abs(R),Math.abs(S))!=1)}setFunctionModule(_,w,S){this.modules[w][_]=S,this.isFunction[w][_]=!0}addEccAndInterleave(_){const w=this.version,S=this.errorCorrectionLevel;if(_.length!=Gt.getNumDataCodewords(w,S))throw new RangeError("Invalid argument");const R=Gt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][w],P=Gt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][w],F=Math.floor(Gt.getNumRawDataModules(w)/8),Y=R-F%R,ee=Math.floor(F/R);let W=[];const de=Gt.reedSolomonComputeDivisor(P);for(let ie=0,_e=0;ie<R;ie++){let Be=_.slice(_e,_e+ee-P+(ie<Y?0:1));_e+=Be.length;const ke=Gt.reedSolomonComputeRemainder(Be,de);ie<Y&&Be.push(0),W.push(Be.concat(ke))}let fe=[];for(let ie=0;ie<W[0].length;ie++)W.forEach((_e,Be)=>{(ie!=ee-P||Be>=Y)&&fe.push(_e[ie])});return c(fe.length==F),fe}drawCodewords(_){if(_.length!=Math.floor(Gt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let w=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let R=0;R<this.size;R++)for(let P=0;P<2;P++){const F=S-P,ee=(S+1&2)==0?this.size-1-R:R;!this.isFunction[ee][F]&&w<_.length*8&&(this.modules[ee][F]=a(_[w>>>3],7-(w&7)),w++)}}c(w==_.length*8)}applyMask(_){if(_<0||_>7)throw new RangeError("Mask value out of range");for(let w=0;w<this.size;w++)for(let S=0;S<this.size;S++){let R;switch(_){case 0:R=(S+w)%2==0;break;case 1:R=w%2==0;break;case 2:R=S%3==0;break;case 3:R=(S+w)%3==0;break;case 4:R=(Math.floor(S/3)+Math.floor(w/2))%2==0;break;case 5:R=S*w%2+S*w%3==0;break;case 6:R=(S*w%2+S*w%3)%2==0;break;case 7:R=((S+w)%2+S*w%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[w][S]&&R&&(this.modules[w][S]=!this.modules[w][S])}}getPenaltyScore(){let _=0;for(let P=0;P<this.size;P++){let F=!1,Y=0,ee=[0,0,0,0,0,0,0];for(let W=0;W<this.size;W++)this.modules[P][W]==F?(Y++,Y==5?_+=Gt.PENALTY_N1:Y>5&&_++):(this.finderPenaltyAddHistory(Y,ee),F||(_+=this.finderPenaltyCountPatterns(ee)*Gt.PENALTY_N3),F=this.modules[P][W],Y=1);_+=this.finderPenaltyTerminateAndCount(F,Y,ee)*Gt.PENALTY_N3}for(let P=0;P<this.size;P++){let F=!1,Y=0,ee=[0,0,0,0,0,0,0];for(let W=0;W<this.size;W++)this.modules[W][P]==F?(Y++,Y==5?_+=Gt.PENALTY_N1:Y>5&&_++):(this.finderPenaltyAddHistory(Y,ee),F||(_+=this.finderPenaltyCountPatterns(ee)*Gt.PENALTY_N3),F=this.modules[W][P],Y=1);_+=this.finderPenaltyTerminateAndCount(F,Y,ee)*Gt.PENALTY_N3}for(let P=0;P<this.size-1;P++)for(let F=0;F<this.size-1;F++){const Y=this.modules[P][F];Y==this.modules[P][F+1]&&Y==this.modules[P+1][F]&&Y==this.modules[P+1][F+1]&&(_+=Gt.PENALTY_N2)}let w=0;for(const P of this.modules)w=P.reduce((F,Y)=>F+(Y?1:0),w);const S=this.size*this.size,R=Math.ceil(Math.abs(w*20-S*10)/S)-1;return c(0<=R&&R<=9),_+=R*Gt.PENALTY_N4,c(0<=_&&_<=2568888),_}getAlignmentPatternPositions(){if(this.version==1)return[];{const _=Math.floor(this.version/7)+2,w=this.version==32?26:Math.ceil((this.version*4+4)/(_*2-2))*2;let S=[6];for(let R=this.size-7;S.length<_;R-=w)S.splice(1,0,R);return S}}static getNumRawDataModules(_){if(_<Gt.MIN_VERSION||_>Gt.MAX_VERSION)throw new RangeError("Version number out of range");let w=(16*_+128)*_+64;if(_>=2){const S=Math.floor(_/7)+2;w-=(25*S-10)*S-55,_>=7&&(w-=36)}return c(208<=w&&w<=29648),w}static getNumDataCodewords(_,w){return Math.floor(Gt.getNumRawDataModules(_)/8)-Gt.ECC_CODEWORDS_PER_BLOCK[w.ordinal][_]*Gt.NUM_ERROR_CORRECTION_BLOCKS[w.ordinal][_]}static reedSolomonComputeDivisor(_){if(_<1||_>255)throw new RangeError("Degree out of range");let w=[];for(let R=0;R<_-1;R++)w.push(0);w.push(1);let S=1;for(let R=0;R<_;R++){for(let P=0;P<w.length;P++)w[P]=Gt.reedSolomonMultiply(w[P],S),P+1<w.length&&(w[P]^=w[P+1]);S=Gt.reedSolomonMultiply(S,2)}return w}static reedSolomonComputeRemainder(_,w){let S=w.map(R=>0);for(const R of _){const P=R^S.shift();S.push(0),w.forEach((F,Y)=>S[Y]^=Gt.reedSolomonMultiply(F,P))}return S}static reedSolomonMultiply(_,w){if(_>>>8||w>>>8)throw new RangeError("Byte out of range");let S=0;for(let R=7;R>=0;R--)S=S<<1^(S>>>7)*285,S^=(w>>>R&1)*_;return c(S>>>8==0),S}finderPenaltyCountPatterns(_){const w=_[1];c(w<=this.size*3);const S=w>0&&_[2]==w&&_[3]==w*3&&_[4]==w&&_[5]==w;return(S&&_[0]>=w*4&&_[6]>=w?1:0)+(S&&_[6]>=w*4&&_[0]>=w?1:0)}finderPenaltyTerminateAndCount(_,w,S){return _&&(this.finderPenaltyAddHistory(w,S),w=0),w+=this.size,this.finderPenaltyAddHistory(w,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(_,w){w[0]==0&&(_+=this.size),w.pop(),w.unshift(_)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function t(b,_,w){if(_<0||_>31||b>>>_)throw new RangeError("Value out of range");for(let S=_-1;S>=0;S--)w.push(b>>>S&1)}function a(b,_){return(b>>>_&1)!=0}function c(b){if(!b)throw new Error("Assertion error")}const f=class rr{constructor(_,w,S){if(this.mode=_,this.numChars=w,this.bitData=S,w<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(_){let w=[];for(const S of _)t(S,8,w);return new rr(rr.Mode.BYTE,_.length,w)}static makeNumeric(_){if(!rr.isNumeric(_))throw new RangeError("String contains non-numeric characters");let w=[];for(let S=0;S<_.length;){const R=Math.min(_.length-S,3);t(parseInt(_.substring(S,S+R),10),R*3+1,w),S+=R}return new rr(rr.Mode.NUMERIC,_.length,w)}static makeAlphanumeric(_){if(!rr.isAlphanumeric(_))throw new RangeError("String contains unencodable characters in alphanumeric mode");let w=[],S;for(S=0;S+2<=_.length;S+=2){let R=rr.ALPHANUMERIC_CHARSET.indexOf(_.charAt(S))*45;R+=rr.ALPHANUMERIC_CHARSET.indexOf(_.charAt(S+1)),t(R,11,w)}return S<_.length&&t(rr.ALPHANUMERIC_CHARSET.indexOf(_.charAt(S)),6,w),new rr(rr.Mode.ALPHANUMERIC,_.length,w)}static makeSegments(_){return _==""?[]:rr.isNumeric(_)?[rr.makeNumeric(_)]:rr.isAlphanumeric(_)?[rr.makeAlphanumeric(_)]:[rr.makeBytes(rr.toUtf8ByteArray(_))]}static makeEci(_){let w=[];if(_<0)throw new RangeError("ECI assignment value out of range");if(_<128)t(_,8,w);else if(_<16384)t(2,2,w),t(_,14,w);else if(_<1e6)t(6,3,w),t(_,21,w);else throw new RangeError("ECI assignment value out of range");return new rr(rr.Mode.ECI,0,w)}static isNumeric(_){return rr.NUMERIC_REGEX.test(_)}static isAlphanumeric(_){return rr.ALPHANUMERIC_REGEX.test(_)}getData(){return this.bitData.slice()}static getTotalBits(_,w){let S=0;for(const R of _){const P=R.mode.numCharCountBits(w);if(R.numChars>=1<<P)return 1/0;S+=4+P+R.bitData.length}return S}static toUtf8ByteArray(_){_=encodeURI(_);let w=[];for(let S=0;S<_.length;S++)_.charAt(S)!="%"?w.push(_.charCodeAt(S)):(w.push(parseInt(_.substring(S+1,S+3),16)),S+=2);return w}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=f;i.QrSegment=f})(rl||(rl={}));(i=>{(e=>{const t=class{constructor(c,f){this.ordinal=c,this.formatBits=f}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(i.QrCode||(i.QrCode={}))})(rl||(rl={}));(i=>{(e=>{const t=class{constructor(c,f){this.modeBits=c,this.numBitsCharCount=f}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(i.QrSegment||(i.QrSegment={}))})(rl||(rl={}));var Xl=rl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var MN={L:Xl.QrCode.Ecc.LOW,M:Xl.QrCode.Ecc.MEDIUM,Q:Xl.QrCode.Ecc.QUARTILE,H:Xl.QrCode.Ecc.HIGH},E_=128,__="L",v_="#FFFFFF",b_="#000000",A_=!1,C_=1,ON=4,LN=0,kN=.1;function T_(i,e=0){const t=[];return i.forEach(function(a,c){let f=null;a.forEach(function(y,b){if(!y&&f!==null){t.push(`M${f+e} ${c+e}h${b-f}v1H${f+e}z`),f=null;return}if(b===a.length-1){if(!y)return;f===null?t.push(`M${b+e},${c+e} h1v1H${b+e}z`):t.push(`M${f+e},${c+e} h${b+1-f}v1H${f+e}z`);return}y&&f===null&&(f=b)})}),t.join("")}function S_(i,e){return i.slice().map((t,a)=>a<e.y||a>=e.y+e.h?t:t.map((c,f)=>f<e.x||f>=e.x+e.w?c:!1))}function PN(i,e,t,a){if(a==null)return null;const c=i.length+t*2,f=Math.floor(e*kN),y=c/e,b=(a.width||f)*y,_=(a.height||f)*y,w=a.x==null?i.length/2-b/2:a.x*y,S=a.y==null?i.length/2-_/2:a.y*y,R=a.opacity==null?1:a.opacity;let P=null;if(a.excavate){let Y=Math.floor(w),ee=Math.floor(S),W=Math.ceil(b+w-Y),de=Math.ceil(_+S-ee);P={x:Y,y:ee,w:W,h:de}}const F=a.crossOrigin;return{x:w,y:S,h:_,w:b,excavation:P,opacity:R,crossOrigin:F}}function BN(i,e){return e!=null?Math.max(Math.floor(e),0):i?ON:LN}function I_({value:i,level:e,minVersion:t,includeMargin:a,marginSize:c,imageSettings:f,size:y,boostLevel:b}){let _=wr.useMemo(()=>{const Y=(Array.isArray(i)?i:[i]).reduce((ee,W)=>(ee.push(...Xl.QrSegment.makeSegments(W)),ee),[]);return Xl.QrCode.encodeSegments(Y,MN[e],t,void 0,void 0,b)},[i,e,t,b]);const{cells:w,margin:S,numCells:R,calculatedImageSettings:P}=wr.useMemo(()=>{let F=_.getModules();const Y=BN(a,c),ee=F.length+Y*2,W=PN(F,y,Y,f);return{cells:F,margin:Y,numCells:ee,calculatedImageSettings:W}},[_,y,f,a,c]);return{qrcode:_,margin:S,cells:w,numCells:R,calculatedImageSettings:P}}var jN=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),UN=wr.forwardRef(function(e,t){const a=e,{value:c,size:f=E_,level:y=__,bgColor:b=v_,fgColor:_=b_,includeMargin:w=A_,minVersion:S=C_,boostLevel:R,marginSize:P,imageSettings:F}=a,ee=L1(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:W}=ee,de=L1(ee,["style"]),fe=F==null?void 0:F.src,ie=wr.useRef(null),_e=wr.useRef(null),Be=wr.useCallback(Oe=>{ie.current=Oe,typeof t=="function"?t(Oe):t&&(t.current=Oe)},[t]),[ke,z]=wr.useState(!1),{margin:V,cells:k,numCells:G,calculatedImageSettings:K}=I_({value:c,level:y,minVersion:S,boostLevel:R,includeMargin:w,marginSize:P,imageSettings:F,size:f});wr.useEffect(()=>{if(ie.current!=null){const Oe=ie.current,oe=Oe.getContext("2d");if(!oe)return;let Ie=k;const Ae=_e.current,Qe=K!=null&&Ae!==null&&Ae.complete&&Ae.naturalHeight!==0&&Ae.naturalWidth!==0;Qe&&K.excavation!=null&&(Ie=S_(k,K.excavation));const lt=window.devicePixelRatio||1;Oe.height=Oe.width=f*lt;const te=f/G*lt;oe.scale(te,te),oe.fillStyle=b,oe.fillRect(0,0,G,G),oe.fillStyle=_,jN?oe.fill(new Path2D(T_(Ie,V))):k.forEach(function(Ne,Pe){Ne.forEach(function(He,ze){He&&oe.fillRect(ze+V,Pe+V,1,1)})}),K&&(oe.globalAlpha=K.opacity),Qe&&oe.drawImage(Ae,K.x+V,K.y+V,K.w,K.h)}}),wr.useEffect(()=>{z(!1)},[fe]);const $=O1({height:f,width:f},W);let X=null;return fe!=null&&(X=wr.createElement("img",{src:fe,key:fe,style:{display:"none"},onLoad:()=>{z(!0)},ref:_e,crossOrigin:K==null?void 0:K.crossOrigin})),wr.createElement(wr.Fragment,null,wr.createElement("canvas",O1({style:$,height:f,width:f,ref:Be,role:"img"},de)),X)});UN.displayName="QRCodeCanvas";var lf=wr.forwardRef(function(e,t){const a=e,{value:c,size:f=E_,level:y=__,bgColor:b=v_,fgColor:_=b_,includeMargin:w=A_,minVersion:S=C_,boostLevel:R,title:P,marginSize:F,imageSettings:Y}=a,ee=L1(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:W,cells:de,numCells:fe,calculatedImageSettings:ie}=I_({value:c,level:y,minVersion:S,boostLevel:R,includeMargin:w,marginSize:F,imageSettings:Y,size:f});let _e=de,Be=null;Y!=null&&ie!=null&&(ie.excavation!=null&&(_e=S_(de,ie.excavation)),Be=wr.createElement("image",{href:Y.src,height:ie.h,width:ie.w,x:ie.x+W,y:ie.y+W,preserveAspectRatio:"none",opacity:ie.opacity,crossOrigin:ie.crossOrigin}));const ke=T_(_e,W);return wr.createElement("svg",O1({height:f,width:f,viewBox:`0 0 ${fe} ${fe}`,ref:t,role:"img"},ee),!!P&&wr.createElement("title",null,P),wr.createElement("path",{fill:b,d:`M0,0 h${fe}v${fe}H0z`,shapeRendering:"crispEdges"}),wr.createElement("path",{fill:_,d:ke,shapeRendering:"crispEdges"}),Be)});lf.displayName="QRCodeSVG";function VN(){var En;const i=ea(),e=So(),t=ul(Ds),a=e.currentUser,[c,f]=J.useState(null),[y,b]=J.useState([]),[_,w]=J.useState(!1),[S,R]=J.useState(null),[P,F]=J.useState(!1),[Y,ee]=J.useState(""),[W,de]=J.useState(""),[fe,ie]=J.useState(""),[_e,Be]=J.useState(""),[ke,z]=J.useState(!1),[V,k]=J.useState(!1),[G,K]=J.useState(null),[$,X]=J.useState(""),[Oe,oe]=J.useState(""),[Ie,Ae]=J.useState(""),[Qe,lt]=J.useState(""),[te,Ne]=J.useState(""),[Pe,He]=J.useState([]),[ze,yt]=J.useState([]),[Re,Ue]=J.useState(""),[Fe,nt]=J.useState(!1),[tt,gt]=J.useState(!1),[An,xt]=J.useState(!1),[We,Ze]=J.useState([]),[st,at]=J.useState(""),[it,mt]=J.useState(""),[_t,Ge]=J.useState(null),[fr,Br]=J.useState(!1),[It,xi]=J.useState(null),[en,yn]=J.useState(!1),[Ln,Kn]=J.useState(null),[Ls,Pi]=J.useState(!1),[Bi,un]=J.useState(1),[Le,Cn]=J.useState(""),[Ot,Pt]=J.useState("all"),[sr,yi]=J.useState([]),[jr,Rt]=J.useState(""),[qn,ei]=J.useState("asc");J.useEffect(()=>{if(a){const Z=kt(t,"users",a.uid);kr(Z).then(Ee=>{Ee.exists()&&f(Ee.data())}).catch(Ee=>{console.error("Error fetching user profile:",Ee)})}},[a,t]),J.useEffect(()=>{if(a){const Z=Iu(Pr(t,"classroom"),Nu("owner","==",a.uid));Cr(Z).then(Ee=>{const Ye=[];Ee.forEach(Ct=>{Ye.push({id:Ct.id,...Ct.data()})}),b(Ye)}).catch(Ee=>{console.error("Error fetching classrooms:",Ee)})}},[a,t]),J.useEffect(()=>{G&&(async()=>{try{const Ee=Pr(t,"classroom",G.id,"students"),Ye=await Cr(Ee),Ct=[];Ye.forEach(me=>{Ct.push({id:me.id,checked:!1,...me.data()})}),He(Ct)}catch(Ee){console.error("Error fetching students for inline edit:",Ee)}})()},[G,t]),J.useEffect(()=>{(async()=>{try{const Ee=Pr(t,"users"),Ye=Iu(Ee,Nu("classroom.status","==",2)),Ct=await Cr(Ye),me=[];Ct.forEach(bt=>{me.push({id:bt.id,...bt.data()})}),yt(me)}catch(Ee){console.error("Error fetching available users:",Ee)}})()},[t]),J.useEffect(()=>{G&&(async()=>{try{const Ee=Pr(t,"classroom",G.id,"checkin"),Ye=await Cr(Ee),Ct=[];Ye.forEach(me=>{Ct.push({id:me.id,...me.data()})}),Ze(Ct)}catch(Ee){console.error("Error fetching check-in records:",Ee)}})()},[G,t]),J.useEffect(()=>{(async()=>{if(!(!G||!_t))try{const Ee=Pr(t,"classroom",G.id,"checkin",_t.id,"students"),Ct=(await Cr(Ee)).docs.map(bt=>bt.id),me=Pe.map(bt=>Ct.includes(bt.id)?{...bt,checked:!0}:{...bt,checked:!1});He(me)}catch(Ee){console.error("Error loading checked status:",Ee)}})()},[G,_t,t,Pe]);const Ur=async()=>{if(Re){if(Pe.some(Z=>Z.id===Re)){alert("This student is already added.");return}try{const Z=ze.find(Ye=>Ye.id===Re);if(!Z)return;const Ee=kt(t,"classroom",G.id,"students",Z.id);await ki(Ee,{stdid:Z.id,name:Z.name,status:1}),He([...Pe,{id:Z.id,stdid:Z.id,name:Z.name,status:1}]),alert("Student added successfully."),Ue("")}catch(Z){console.error("Error adding student inline:",Z),alert("Failed to add student.")}}},Zn=async()=>{try{await Sw(e),i("/")}catch(Z){console.error("Error signing out:",Z)}},es=Z=>{R(Ee=>Ee===Z?null:Z)},Vn=async Z=>{if(window.confirm("Are you sure you want to delete this classroom?"))try{await du(kt(t,"classroom",Z)),b(Ee=>Ee.filter(Ye=>Ye.id!==Z))}catch(Ee){console.error("Error deleting classroom:",Ee)}},Vr=async Z=>{Z.preventDefault(),z(!0);try{const Ee=x_(),Ye=kt(t,"classroom",Ee);await ki(Ye,{owner:a.uid,info:{code:Y,name:W,photo:_e||"",room:fe}}),b(Ct=>[...Ct,{id:Ee,owner:a.uid,info:{code:Y,name:W,photo:_e,room:fe}}]),ee(""),de(""),ie(""),Be(""),F(!1),V&&k(!1),alert("Classroom created successfully!")}catch(Ee){console.error("Error creating classroom:",Ee),alert("Error creating classroom.")}z(!1)},ji=Z=>{k(!0),K(Z),X(Z.info.code),oe(Z.info.name),Ae(Z.info.photo),lt(Z.info.room),Ne(""),R(null),nt(!1),He([]),Ue("")},tn=async Z=>{Z.preventDefault(),z(!0),Ne("");try{const Ee=kt(t,"classroom",G.id);await Jl(Ee,{"info.code":$,"info.name":Oe,"info.photo":Ie,"info.room":Qe}),b(Ye=>Ye.map(Ct=>Ct.id===G.id?{...Ct,info:{code:$,name:Oe,photo:Ie,room:Qe}}:Ct)),Ne("Classroom updated successfully.")}catch(Ee){console.error("Error updating classroom:",Ee),Ne("Failed to update classroom.")}z(!1)},Pa=async()=>{if(!st||!it){alert("Please provide check-in code and date/time.");return}try{const Ee={id:(await _N(Pr(t,"classroom",G.id,"checkin"),{code:st,date:it,status:Bi})).id,code:st,date:it,status:Bi};Ge(Ee),Ze(Ye=>[...Ye,Ee]),at(""),mt(""),Pi(!0)}catch(Z){console.error("Error creating check-in record:",Z),alert("Failed to create check-in record.")}},Ir=async Z=>{try{const Ee=Pe.find(Ct=>Ct.id===Z);if(!Ee)return;const Ye=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await ki(kt(t,"classroom",G.id,"checkin",_t.id,"students",Z),{stdid:Ee.stdid,name:Ee.name,remark:"",date:Ye}),await ki(kt(t,"classroom",G.id,"checkin",_t.id,"scores",Ee.stdid),{uid:Z,stdid:Ee.stdid,name:Ee.name,remark:"",dates:Ye,score:1,status:1}),He(Ct=>Ct.map(me=>me.id===Z?{...me,checked:!0}:me))}catch(Ee){console.error("Error storing student check-in:",Ee),alert("Failed to check in student.")}},wi=async Z=>{xi(Z),Br(!0);try{const Ee=Pr(t,"classroom",G.id,"checkin",Z.id,"students"),Ct=(await Cr(Ee)).docs.map(me=>me.id);He(me=>me.map(bt=>Ct.includes(bt.id)?{...bt,checked:!0}:{...bt,checked:!1}))}catch(Ee){console.error("Error viewing check-in details:",Ee)}},ar=async()=>{if(!(!G||!It)&&window.confirm("Are you sure you want to delete this check-in record?"))try{await du(kt(t,"classroom",G.id,"checkin",It.id)),Ze(Z=>Z.filter(Ee=>Ee.id!==It.id)),alert("Check-in record deleted successfully."),Br(!1)}catch(Z){console.error("Error deleting check-in record:",Z),alert("Failed to delete check-in record.")}},Ei=Z=>{i(`/create-quiz/${G.id}?checkinId=${Z.id}`)},Yn=async Z=>{try{const Ee=Pe.find(Ye=>Ye.id===Z);if(!Ee)return;await du(kt(t,"classroom",G.id,"checkin",_t.id,"students",Z)),await du(kt(t,"classroom",G.id,"checkin",_t.id,"scores",Ee.stdid)),He(Ye=>Ye.map(Ct=>Ct.id===Z?{...Ct,checked:!1}:Ct))}catch(Ee){console.error("Error undoing student check-in:",Ee),alert("Failed to undo check-in for student.")}},Ke=Z=>{Kn(Z),yn(!0),R(null)},wn=async Z=>{try{const Ee=Pe.find(me=>me.id===Z);if(!Ee)return;const Ye=Ee.status===0?1:0,Ct=kt(t,"classroom",G.id,"students",Z);await Jl(Ct,{status:Ye}),He(me=>me.map(bt=>bt.id===Z?{...bt,status:Ye}:bt))}catch(Ee){console.error("Error toggling student verification:",Ee),alert("เกิดข้อผิดพลาดในการอัปเดตสถานะนักเรียน")}},kn=()=>{!_t||!G||Pi(!0)},Nn=async Z=>{try{let Ee;Z.status===1?Ee=0:Z.status===0?Ee=2:Ee=1;const Ye=kt(t,"classroom",G.id,"checkin",Z.id);await Jl(Ye,{status:Ee}),Ze(me=>me.map(bt=>bt.id===Z.id?{...bt,status:Ee}:bt)),_t&&_t.id===Z.id&&Ge({..._t,status:Ee}),alert(`การเช็คชื่อได้ถูก${Ee===1?"เปิดใช้งาน":Ee===0?"ปิดใช้งาน":"เสร็จสิ้น"}แล้ว`)}catch(Ee){console.error("Error toggling check-in status:",Ee),alert("เกิดข้อผิดพลาดในการเปลี่ยนสถานะการเช็คชื่อ")}},ti=Z=>{yi(Ee=>Ee.includes(Z)?Ee.filter(Ye=>Ye!==Z):[...Ee,Z])},Ui=()=>{sr.length===dn.length?yi([]):yi(dn.map(Z=>Z.id))},Fr=async()=>{try{const Z=t.batch();sr.forEach(Ee=>{const Ye=kt(t,"classroom",G.id,"students",Ee);Z.update(Ye,{status:1})}),await Z.commit(),He(Ee=>Ee.map(Ye=>sr.includes(Ye.id)?{...Ye,status:1}:Ye)),yi([])}catch(Z){console.error("Error verifying students:",Z),alert("Failed to verify students.")}},Nr=async()=>{try{const Z=t.batch();sr.forEach(Ee=>{const Ye=kt(t,"classroom",G.id,"students",Ee);Z.update(Ye,{status:0})}),await Z.commit(),He(Ee=>Ee.map(Ye=>sr.includes(Ye.id)?{...Ye,status:0}:Ye)),yi([])}catch(Z){console.error("Error unverifying students:",Z),alert("Failed to unverify students.")}},_i=Z=>{const Ee=jr===Z&&qn==="asc"?"desc":"asc";Rt(Z),ei(Ee)},dn=(()=>{let Z=Pe;return Le&&(Z=Z.filter(Ee=>Ee.name.toLowerCase().includes(Le.toLowerCase())||Ee.stdid.toLowerCase().includes(Le.toLowerCase()))),Ot!=="all"&&(Z=Z.filter(Ee=>Ot==="verified"?Ee.status===1:Ee.status===0)),jr&&(Z=Z.sort((Ee,Ye)=>Ee[jr]<Ye[jr]?qn==="asc"?-1:1:Ee[jr]>Ye[jr]?qn==="asc"?1:-1:0)),Z})();return C.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[C.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-4xl --font-InterEN mb-8",children:"Classroom Management System"}),C.jsxs("ul",{className:"space-y-4",children:[C.jsx("li",{children:C.jsx("button",{onClick:()=>{k(!1),F(!1),K(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"ห้องเรียนของฉัน"})}),C.jsx("li",{children:C.jsx("button",{onClick:()=>{k(!0),F(!0),K(null)},className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"สร้างห้องเรียน"})})]})]}),C.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-400/30 cursor-pointer group transition-all duration-300 rounded-lg p-2 hover:bg-blue-600/30",onClick:()=>i("/edit-profile"),children:[C.jsxs("div",{className:"relative flex-shrink-0",children:[c&&c.photo?C.jsx("img",{src:c.photo,alt:"Profile",className:"w-12 h-12 rounded-full border-2 border-white shadow-md object-cover group-hover:ring-2 group-hover:ring-blue-300 transition-all"}):C.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center border-2 border-white shadow-md group-hover:bg-blue-800 transition-all",children:C.jsx("span",{className:"text-lg text-white font-medium",children:c!=null&&c.name?c.name.charAt(0).toUpperCase():((En=a==null?void 0:a.email)==null?void 0:En.charAt(0).toUpperCase())||"U"})}),C.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-300 rounded-full p-1 border border-white transform scale-0 group-hover:scale-100 transition-transform duration-200",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-blue-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),C.jsxs("div",{className:"ml-4 min-w-0 max-w-[160px] overflow-hidden",children:[C.jsx("p",{className:"text-white font-InterEN font-bold truncate group-hover:text-blue-200 transition-colors",title:(c==null?void 0:c.name)||(a==null?void 0:a.email)||"User",children:(c==null?void 0:c.name)||(a==null?void 0:a.email)||"User"}),a&&C.jsx("p",{className:"text-blue-200 font-InterEN text-sm truncate group-hover:text-blue-300 transition-colors",title:a.email,children:a.email})]})]})]}),C.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"แดชบอร์ด"}),C.jsx("button",{onClick:()=>w(!0),className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),C.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[C.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["ยินดีต้อนรับสู่ระบบจัดการห้องเรียน Classroom Management System, ",(c==null?void 0:c.name)||(a==null?void 0:a.email)||"User","😊"]}),C.jsx("p",{className:"text-blue-700 font-ChakraPetchTH mb-4",children:"จัดการห้องเรียนของคุณที่มหาวิทยาลัยขอนแก่น"}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:V?G?"แก้ไขห้องเรียน":"สร้างห้องเรียน":"ห้องเรียนของคุณ"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:V?G?C.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h2",{className:"text-xl font-ChakraPetchTH text-blue-900",children:Fe?`แก้ไขรายละเอียดห้องเรียน : ${G.info.name}`:`จัดการนักเรียน : ${G.info.name}`}),C.jsxs("div",{className:"relative",children:[C.jsx("button",{onClick:()=>gt(Z=>!Z),className:"p-2 focus:outline-none",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),tt&&C.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md z-10",children:[C.jsx("button",{onClick:()=>{nt(!0),gt(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"แก้ไขห้องเรียน"}),C.jsx("button",{onClick:()=>{nt(!1),gt(!1)},className:"block w-full font-ChakraPetchTH text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"จัดการนักเรียน"})]})]})]}),Fe?C.jsxs("form",{onSubmit:tn,className:"space-y-6",children:[C.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:$,onChange:Z=>X(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:Oe,onChange:Z=>oe(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:Ie,onChange:Z=>Ae(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),C.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:Qe,onChange:Z=>lt(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),te&&C.jsx("p",{className:"text-green-600 text-center",children:te}),C.jsxs("div",{className:"flex justify-end space-x-4",children:[C.jsx("button",{type:"button",onClick:()=>{K(null),k(!1),F(!1)},className:"px-4 py-2 rounded border border-gray-300 hover:bg-gray-100 transition",children:"ยกเลิก"}),C.jsx("button",{type:"submit",disabled:ke,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:ke?"กำลังอัพเดท...":"บันทึก"})]})]}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"mt-4 p-6 border-2 rounded-xl border-blue-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-blue-100",children:"1️⃣ สถิติและการค้นหานักเรียน"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[C.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 flex items-center",children:[C.jsx("div",{className:"rounded-full bg-blue-500 p-3 mr-3",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm text-gray-500 font-ChakraPetchTH",children:"นักเรียนทั้งหมด"}),C.jsx("p",{className:"text-2xl font-bold text-blue-800",children:Pe.length})]})]}),C.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200 flex items-center",children:[C.jsx("div",{className:"rounded-full bg-green-500 p-3 mr-3",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm text-gray-500 font-ChakraPetchTH",children:"ยืนยันแล้ว"}),C.jsx("p",{className:"text-2xl font-bold text-green-800",children:Pe.filter(Z=>Z.status===1).length})]})]}),C.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200 flex items-center",children:[C.jsx("div",{className:"rounded-full bg-yellow-500 p-3 mr-3",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm text-gray-500 font-ChakraPetchTH",children:"รอการยืนยัน"}),C.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:Pe.filter(Z=>Z.status===0).length})]})]})]}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[C.jsx("div",{className:"w-full md:w-2/3",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"ค้นหาตามชื่อหรือรหัสนักศึกษา...",value:Le||"",onChange:Z=>Cn(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none pl-10"}),C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 absolute left-3 top-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),C.jsx("div",{className:"w-full md:w-1/3",children:C.jsxs("select",{value:Ot,onChange:Z=>Pt(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none",children:[C.jsx("option",{value:"all",children:"ทั้งหมด"}),C.jsx("option",{value:"verified",children:"ยืนยันแล้ว"}),C.jsx("option",{value:"unverified",children:"รอการยืนยัน"})]})})]})]}),C.jsxs("div",{className:"mt-4 p-6 border-2 rounded-xl border-blue-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-blue-100",children:"2️⃣ นักเรียนที่ลงทะเบียน"}),Pe.length>0?C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("input",{type:"checkbox",id:"select-all",checked:sr.length===dn.length&&dn.length>0,onChange:Ui,className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),C.jsx("label",{htmlFor:"select-all",className:"ml-2 text-gray-700 font-ChakraPetchTH",children:"เลือกทั้งหมด"})]}),sr.length>0&&C.jsxs("div",{className:"flex space-x-2",children:[C.jsxs("button",{onClick:Fr,className:"px-3 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition font-ChakraPetchTH",children:["ยืนยันที่เลือก (",sr.length,")"]}),C.jsx("button",{onClick:Nr,className:"px-3 py-2 bg-yellow-500 text-white text-sm rounded hover:bg-yellow-600 transition font-ChakraPetchTH",children:"ยกเลิกการยืนยันที่เลือก"})]})]}),C.jsxs("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:[C.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[C.jsx("thead",{className:"bg-gray-50",children:C.jsxs("tr",{children:[C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:C.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>_i("stdid"),children:["รหัสนักศึกษา",jr==="stdid"&&C.jsx("span",{className:"ml-1",children:qn==="asc"?"▲":"▼"})]})}),C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:C.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>_i("name"),children:["ชื่อ",jr==="name"&&C.jsx("span",{className:"ml-1",children:qn==="asc"?"▲":"▼"})]})}),C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:C.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>_i("status"),children:["สถานะ",jr==="status"&&C.jsx("span",{className:"ml-1",children:qn==="asc"?"▲":"▼"})]})}),C.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-ChakraPetchTH",children:"การปฏิบัติ"})]})}),C.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:dn.map((Z,Ee)=>C.jsxs("tr",{className:Ee%2===0?"bg-white":"bg-gray-50",children:[C.jsx("td",{className:"pl-6 py-4 whitespace-nowrap",children:C.jsx("input",{type:"checkbox",checked:sr.includes(Z.id),onChange:()=>ti(Z.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"})}),C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Z.stdid}),C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Z.name}),C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:C.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Z.status===1?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Z.status===1?"ยืนยันแล้ว":"รอการยืนยัน"})}),C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:C.jsx("button",{onClick:()=>wn(Z.id),className:`px-3 py-1 rounded ${Z.status===1?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:Z.status===1?"ยกเลิกการยืนยัน":"ยืนยันนักเรียน"})})]},Z.id))})]}),dn.length===0&&C.jsx("div",{className:"text-center py-8 text-gray-500 font-ChakraPetchTH",children:"ไม่พบนักเรียนที่ตรงตามเงื่อนไขการค้นหา"})]})]}):C.jsx("p",{className:"text-center text-gray-700 py-4",children:"ยังไม่มีนักเรียนในห้องเรียนนี้"})]}),C.jsxs("div",{className:"mt-4 p-6 border-2 rounded-xl border-blue-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-blue-100",children:"1️⃣ นักเรียนที่ลงทะเบียน"}),Pe.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"สถานะ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"การปฏิบัติ"})]})}),C.jsx("tbody",{children:Pe.map(Z=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:Z.stdid}),C.jsx("td",{className:"border p-2",children:Z.name}),C.jsx("td",{className:"border p-2",children:Z.status===0?"ยังไม่ตรวจสอบ":"ตรวจสอบแล้ว"}),C.jsx("td",{className:"border p-2",children:C.jsx("button",{onClick:()=>wn(Z.id),className:`px-3 py-1 rounded ${Z.status===1?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:Z.status===1?"ยกเลิกการยืนยัน":"ยืนยันนักเรียน"})})]},Z.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนในห้องเรียนนี้"})]}),C.jsxs("div",{className:"mt-6 p-6 border-2 rounded-xl border-green-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-green-100",children:"3️⃣ เพิ่มนักเรียน"}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[C.jsx("div",{className:"w-full md:w-3/4",children:C.jsxs("select",{value:Re,onChange:Z=>Ue(Z.target.value),className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",children:[C.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),ze.map(Z=>C.jsxs("option",{value:Z.id,children:[Z.name," (",Z.email,")"]},Z.id))]})}),C.jsx("div",{className:"w-full md:w-1/4",children:C.jsxs("button",{type:"button",onClick:Ur,className:"w-full bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH flex items-center justify-center",disabled:!Re,children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"เพิ่มนักเรียน"]})})]})]}),C.jsxs("div",{className:"mt-6 p-6 border-2 rounded-xl border-indigo-200 bg-white shadow-sm",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900 border-b pb-2 border-indigo-100",children:"3️⃣ จัดการการเช็คชื่อ"}),C.jsx("div",{className:"mb-4",children:C.jsx("button",{type:"button",onClick:()=>xt(Z=>!Z),className:"w-full font-ChakraPetchTH bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:_t?"แสดงตารางเช็คชื่อ":"สร้างการเช็คชื่อ"})}),An&&!_t&&C.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:C.jsxs("div",{className:"space-y-4",children:[C.jsx("input",{type:"text",placeholder:"รหัสเช็คชื่อ (e.g., ABC123456)",value:st,onChange:Z=>at(Z.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),C.jsx("input",{type:"datetime-local",value:it,onChange:Z=>mt(Z.target.value),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),C.jsxs("select",{value:Bi,onChange:Z=>un(parseInt(Z.target.value)),className:"w-full font-ChakraPetchTH p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 transition",children:[C.jsx("option",{value:1,children:"เปิดใช้งาน"}),C.jsx("option",{value:0,children:"ปิดใช้งาน"})]}),C.jsx("button",{type:"button",onClick:Pa,className:"w-full bg-blue-600 text-white font-ChakraPetchTH px-4 py-2 rounded hover:bg-blue-700 transition",children:"สร้างการเช็คชื่อ"})]})}),An&&_t&&C.jsx("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["Check-in Table (Code: ",_t.code,", Time: ",_t.date,")"]}),Pe.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left",children:"ลำดับ"}),C.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),C.jsx("th",{className:"border p-2 text-left",children:"สถานะ"}),C.jsx("th",{className:"border p-2 text-left",children:"การปฏิบัติ"})]})}),C.jsx("tbody",{children:Pe.map((Z,Ee)=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:Ee+1}),C.jsx("td",{className:"border p-2",children:Z.stdid}),C.jsx("td",{className:"border p-2",children:Z.name}),C.jsx("td",{className:"border p-2",children:Z.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็ค"}),C.jsx("td",{className:"border p-2",children:C.jsx("button",{type:"button",onClick:()=>{Z.checked?Yn(Z.id):Ir(Z.id)},className:`px-3 py-1 rounded ${Z.checked?"bg-yellow-500 hover:bg-yellow-600":"bg-green-600 hover:bg-green-700"} text-white transition`,children:Z.checked?"ยกเลิกเช็คชื่อ":"เช็คชื่อ"})})]},Z.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีนักเรียนในห้องเรียนนี้"}),C.jsx("div",{className:"flex space-x-4 mt-4",children:C.jsx("button",{type:"button",onClick:kn,className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"แสดง QR Code เช็คชื่อ"})})]})}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h4",{className:"text-lg font-ChakraPetchTH mb-3 text-blue-800",children:"บันทึกการเช็คชื่อ"}),We.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสเช็คชื่อ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"วัน/เวลา"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รายละเอียด"})]})}),C.jsx("tbody",{children:We.map((Z,Ee)=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Ee+1}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.code}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.date}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.status===0?C.jsx("span",{className:"text-red-600",children:"ปิดใช้งาน"}):Z.status===1?C.jsx("span",{className:"text-green-600",children:"กำลังใช้งาน"}):C.jsx("span",{className:"text-gray-500",children:"เสร็จสิ้น"})}),C.jsxs("td",{className:"border p-2",children:[C.jsx("button",{type:"button",onClick:()=>wi(Z),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition mr-2",children:"รายละเอียด"}),C.jsx("button",{type:"button",onClick:()=>Nn(Z),className:`font-ChakraPetchTH text-white px-3 py-1 rounded transition mr-2 ${Z.status===1?"bg-red-600 hover:bg-red-700":Z.status===0?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:Z.status===1?"ปิดใช้งาน":Z.status===0?"ตั้งเป็นเสร็จสิ้น":"เปิดใช้งานใหม่"}),C.jsx("button",{type:"button",onClick:()=>Ei(Z),className:"bg-indigo-600 font-ChakraPetchTH text-white px-3 py-1 rounded hover:bg-indigo-700 transition",children:"ควิซ"})]})]},Z.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีบันทึกการเช็คชื่อในห้องเรียนนี้"})]})]})]})]}):P?C.jsx("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50",children:C.jsxs("form",{onSubmit:Vr,className:"space-y-6",children:[C.jsx("input",{type:"text",placeholder:"Subject Code (e.g., SC310001)",value:Y,onChange:Z=>ee(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"text",placeholder:"Subject Name (e.g., Computer Programming)",value:W,onChange:Z=>de(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"text",placeholder:"Classroom Name (e.g., SC5101)",value:fe,onChange:Z=>ie(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition",required:!0}),C.jsx("input",{type:"url",placeholder:"Photo URL (optional)",value:_e,onChange:Z=>Be(Z.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"}),C.jsxs("div",{className:"flex justify-end space-x-4",children:[C.jsx("button",{type:"button",onClick:()=>{F(!1),k(!1)},className:"px-6 py-3 rounded border border-gray-300 hover:bg-gray-100 transition",children:"Cancel"}),C.jsx("button",{type:"submit",disabled:ke,className:"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 transition shadow-md",children:ke?"Creating...":"Create"})]})]})}):C.jsxs("div",{onClick:()=>F(!0),className:"col-span-1 md:col-span-2 relative flex flex-col items-center justify-center border-4 border-dashed border-blue-400 rounded-xl h-60 cursor-pointer hover:bg-blue-100 transition duration-300",children:[C.jsx("span",{className:"text-6xl text-blue-500",children:"+"}),C.jsx("span",{className:"mt-4 text-2xl text-blue-700 font-bold",children:"Create New Classroom"})]}):C.jsx(C.Fragment,{children:y.map(Z=>C.jsxs("div",{className:"relative flex flex-col items-center border border-gray-200 rounded-lg shadow-md bg-white transition transform hover:-translate-y-1 hover:shadow-xl duration-300",children:[C.jsx("button",{onClick:()=>es(Z.id),className:"absolute top-2 right-2 bg-white border border-gray-300 rounded-full p-2 transition duration-200 active:scale-95 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M6 10c0-1.105.672-2 1.5-2S9 8.895 9 10s-.672 2-1.5 2S6 11.105 6 10zm4 0c0-1.105.672-2 1.5-2s1.5.895 1.5 2-.672 2-1.5 2-1.5-.895-1.5-2z"})})}),S===Z.id&&C.jsxs("div",{className:"absolute top-10 right-2 w-36 bg-white shadow-lg rounded py-1 z-20",children:[C.jsx("button",{onClick:()=>ji(Z),className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"จัดการนักเรียน"}),C.jsx("button",{onClick:()=>Ke(Z),className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"สร้าง QR Code"}),C.jsx("button",{onClick:()=>{Vn(Z.id),R(null)},className:"block px-4 py-2 text-sm font-ChakraPetchTH text-gray-700 hover:bg-gray-100 w-full text-left",children:"ลบห้องเรียน"})]}),Z.info.photo?C.jsx("img",{src:Z.info.photo,alt:Z.info.name,className:"w-full h-48 object-cover rounded-t-lg border-b border-gray-200"}):C.jsx("div",{className:"w-full h-48 bg-blue-300 flex items-center justify-center rounded-t-lg border-b border-gray-200",children:C.jsx("span",{className:"text-lg text-white",children:"No Image"})}),C.jsxs("div",{className:"p-4 text-center",children:[C.jsx("p",{className:"font-semibold font-InterEN text-blue-900 text-xl mb-1",children:Z.info.name}),C.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Code : ",Z.info.code]}),C.jsxs("p",{className:"text-blue-700 font-InterEN text-lg",children:["Room : ",Z.info.room]})]})]},Z.id))})})]})]})]}),fr&&It&&C.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-10 z-50",children:C.jsxs("div",{className:"col-span-1 md:col-span-2 relative flex flex-col p-8 border-2 border-dashed border-blue-400 rounded-xl shadow-xl bg-blue-50 w-11/12 md:w-1/2",children:[C.jsx("h3",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:"รายละเอียดการเช็คชื่อ"}),C.jsxs("div",{className:"flex flex-col items-center mb-6",children:[C.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:C.jsx(lf,{id:"detail-checkin-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/student-checkin/${G.id}/${It.id}`,size:150,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),C.jsx("div",{className:"mt-2 mb-2 text-center",children:C.jsxs("p",{className:`font-ChakraPetchTH mt-2 ${It.status===1?"text-green-600":It.status===0?"text-red-600":"text-gray-600"}`,children:["สถานะ: ",It.status===1?"เปิดใช้งาน":It.status===0?"ปิดใช้งาน":"เสร็จสิ้น"]})})]}),C.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["รหัสเช็คชื่อ: ",It.code]}),C.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH mb-2",children:["วัน/เวลา: ",It.date]}),C.jsxs("p",{className:"text-blue-700 font-ChakraPetchTH",children:["จำนวนนักเรียนที่เช็คชื่อ : ",Pe.filter(Z=>Z.checked).length," / ",Pe.length]}),C.jsx("div",{className:"mt-4 overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ลำดับ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"ชื่อ"}),C.jsx("th",{className:"border font-ChakraPetchTH p-2 text-left",children:"สถานะ"})]})}),C.jsx("tbody",{children:Pe.map((Z,Ee)=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Ee+1}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.stdid}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.name}),C.jsx("td",{className:"border font-ChakraPetchTH p-2",children:Z.checked?"เช็คชื่อสำเร็จ":"ยังไม่เช็คชื่อ"})]},Z.id))})]})}),C.jsxs("div",{className:"flex justify-between mt-4",children:[C.jsx("button",{type:"button",onClick:()=>{const Z=document.getElementById("detail-checkin-qr-code"),Ee=document.createElement("canvas"),Ye=Ee.getContext("2d"),Ct=new XMLSerializer().serializeToString(Z),me=new Image;me.onload=()=>{Ee.width=me.width,Ee.height=me.height,Ye.drawImage(me,0,0);const bt=document.createElement("a");bt.download=`checkin-${It.code}.png`,bt.href=Ee.toDataURL("image/png"),bt.click()},me.src=`data:image/svg+xml;base64,${btoa(Ct)}`},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 shadow-xs transition font-ChakraPetchTH",children:"ดาวน์โหลด QR"}),C.jsxs("div",{className:"flex space-x-4",children:[C.jsx("button",{type:"button",onClick:ar,className:"bg-red-600 font-ChakraPetchTH text-white px-4 py-2 rounded hover:bg-red-700 shadow-xs transition",children:"ลบบันทึกการเช็คชื่อ"}),C.jsx("button",{type:"button",onClick:()=>Br(!1),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 shadow-xs transition",children:"ปิด"})]})]})]})}),_&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),C.jsx("div",{className:"mt-2",children:C.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),C.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[C.jsx("button",{type:"button",onClick:()=>{w(!1),Zn()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),C.jsx("button",{type:"button",onClick:()=>w(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]}),en&&Ln&&C.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-50 z-50",children:C.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-xl w-11/12 md:w-96 relative",children:[C.jsx("button",{onClick:()=>yn(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),C.jsx("h3",{className:"text-xl font-ChakraPetchTH text-center mb-4 text-blue-900",children:"QR Code ลงทะเบียนห้องเรียน"}),C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:C.jsx(lf,{id:"classroom-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/register-classroom/${Ln.id}`,size:200,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),C.jsxs("div",{className:"mt-4 text-center",children:[C.jsx("p",{className:"font-ChakraPetchTH text-lg font-bold text-blue-900",children:Ln.info.name}),C.jsxs("p",{className:"font-InterEN text-gray-600",children:["Code: ",Ln.info.code]}),C.jsxs("p",{className:"font-InterEN text-gray-600",children:["Room: ",Ln.info.room]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("button",{onClick:()=>yn(!1),className:"bg-blue-600 text-white px-6 py-2 m-2 rounded-lg hover:bg-blue-700 transition font-ChakraPetchTH",children:"ปิด"}),C.jsx("button",{onClick:()=>{const Z=document.getElementById("classroom-qr-code"),Ee=document.createElement("canvas"),Ye=Ee.getContext("2d"),Ct=new XMLSerializer().serializeToString(Z),me=new Image;me.onload=()=>{Ee.width=me.width,Ee.height=me.height,Ye.drawImage(me,0,0);const bt=document.createElement("a");bt.download=`classroom-${Ln.info.code}.png`,bt.href=Ee.toDataURL("image/png"),bt.click()},me.src=`data:image/svg+xml;base64,${btoa(Ct)}`},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH mr-2",children:"ดาวน์โหลด QR"})]})]})]})}),Ls&&_t&&G&&C.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-600 bg-opacity-50 z-50",children:C.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-xl w-11/12 md:w-96 relative",children:[C.jsx("button",{onClick:()=>Pi(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),C.jsx("h3",{className:"text-xl font-ChakraPetchTH text-center mb-4 text-blue-900",children:"QR Code เช็คชื่อเข้าเรียน"}),C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("div",{className:"p-4 bg-white rounded-lg border-2 border-blue-200 shadow-inner",children:C.jsx(lf,{id:"checkin-qr-code",value:`https://4r3an.github.io/SC310006-Classroom-Management-System/#/student-checkin/${G.id}/${_t.id}`,size:200,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0})}),C.jsxs("div",{className:"mt-4 text-center",children:[C.jsx("p",{className:"font-ChakraPetchTH text-lg font-bold text-blue-900",children:G.info.name}),C.jsxs("p",{className:"font-InterEN text-gray-600",children:["รหัสเช็คชื่อ: ",_t.code]}),C.jsxs("p",{className:"font-InterEN text-gray-600",children:["เวลา: ",_t.date]}),C.jsxs("p",{className:`font-ChakraPetchTH mt-2 ${_t.status===1?"text-green-600":_t.status===0?"text-red-600":"text-gray-600"}`,children:["สถานะ: ",_t.status===1?"เปิดใช้งาน":_t.status===0?"ปิดใช้งาน":"เสร็จสิ้น"]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("button",{onClick:()=>Pi(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition font-ChakraPetchTH mr-2",children:"ปิด"}),C.jsx("button",{onClick:()=>{const Z=document.getElementById("checkin-qr-code"),Ee=document.createElement("canvas"),Ye=Ee.getContext("2d"),Ct=new XMLSerializer().serializeToString(Z),me=new Image;me.onload=()=>{Ee.width=me.width,Ee.height=me.height,Ye.drawImage(me,0,0);const bt=document.createElement("a");bt.download=`checkin-${_t.code}.png`,bt.href=Ee.toDataURL("image/png"),bt.click()},me.src=`data:image/svg+xml;base64,${btoa(Ct)}`},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH",children:"ดาวน์โหลด QR"})]})]})]})})]})}function FN(){const i=So(),e=ul(Ds),t=ea(),[a,c]=J.useState(i.currentUser),[f,y]=J.useState(""),[b,_]=J.useState(""),[w,S]=J.useState(""),[R,P]=J.useState(!1),[F,Y]=J.useState(!1),[ee,W]=J.useState(""),[de,fe]=J.useState(!1);J.useEffect(()=>{(async()=>{if(a)try{const k=kt(e,"users",a.uid),G=await kr(k);if(G.exists()){const K=G.data();y(K.name||""),_(K.photo||""),S(K.photo||""),fe(!1)}}catch(k){console.error("Error loading profile:",k)}})()},[a,e]);const ie=V=>{const k=V.target.value;_(k),P(!1),k.trim()?S(k):S("")},_e=()=>{P(!0)},Be=async V=>{if(V.preventDefault(),!!a){Y(!0),W("");try{await JT(a,{displayName:f,photoURL:b});const k=kt(e,"users",a.uid);await ki(k,{name:f,photo:b,email:a.email,classroom:{status:1}},{merge:!0}),W("อัปเดตโปรไฟล์สำเร็จแล้ว"),fe(!1)}catch(k){console.error("Error updating profile:",k),W("เกิดข้อผิดพลาดในการอัปเดตโปรไฟล์")}Y(!1)}},ke=()=>f?f.split(" ").map(V=>V[0]).join("").toUpperCase().substring(0,2):a!=null&&a.email?a.email[0].toUpperCase():"N/A",z=()=>{if(!(a!=null&&a.uid))return"bg-blue-600";const V=["bg-red-600","bg-blue-600","bg-green-600","bg-yellow-600","bg-purple-600","bg-pink-600","bg-indigo-600","bg-teal-600"],k=a.uid.split("").reduce((G,K)=>G+K.charCodeAt(0),0)%V.length;return V[k]};return a?C.jsxs("div",{className:"relative min-h-screen bg-gray-100 p-8",children:[C.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"absolute top-4 left-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:"ไปที่แดชบอร์ด"}),C.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded-lg shadow-lg",children:[C.jsx("h1",{className:"text-2xl font-bold mb-4",children:"แก้ไขโปรไฟล์"}),C.jsx("div",{className:"flex justify-center mb-6",children:C.jsxs("div",{className:"relative w-32 h-32",children:[w&&!R?C.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden flex items-center justify-center border-2 border-gray-200",children:C.jsx("img",{src:w,alt:"Profile",className:"object-cover w-full h-full",onError:_e})}):C.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center text-white text-2xl ${z()}`,children:ke()}),de&&C.jsx("div",{className:"absolute bottom-0 right-0 bg-white rounded-full p-1 shadow-md",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}),de?C.jsxs("form",{onSubmit:Be,children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),C.jsx("input",{type:"email",value:a.email||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-200 cursor-not-allowed"})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),C.jsx("input",{type:"text",value:f,onChange:V=>y(V.target.value),placeholder:"กรอกชื่อของคุณ",className:"w-full px-3 py-2 border rounded-lg",required:!0})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),C.jsx("input",{type:"text",value:b,onChange:ie,placeholder:"กรอก URL รูปโปรไฟล์",className:"w-full px-3 py-2 border rounded-lg"}),R&&b&&C.jsx("p",{className:"mt-1 text-sm text-red-500",children:"ไม่สามารถโหลดรูปภาพได้ กรุณาตรวจสอบ URL"}),C.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"* ใส่ URL รูปภาพจากอินเทอร์เน็ต เช่น https://example.com/image.jpg"})]}),ee&&C.jsx("div",{className:"mb-4 text-green-500",children:ee}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("button",{type:"submit",disabled:F,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300",children:F?"กำลังบันทึก...":"บันทึกการเปลี่ยนแปลง"}),C.jsx("button",{type:"button",onClick:()=>{fe(!1),W(""),S(b),P(!1)},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-300",children:"ยกเลิก"})]})]}):C.jsxs("div",{children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"อีเมล"}),C.jsx("p",{className:"px-3 py-2 border rounded-lg bg-gray-200",children:a.email})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"ชื่อ"}),C.jsx("p",{className:"px-3 py-2 border rounded-lg",children:f||"ไม่ได้ระบุ"})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",children:"URL รูปโปรไฟล์"}),C.jsx("p",{className:"px-3 py-2 border rounded-lg",children:b})]}),C.jsx("button",{type:"button",onClick:()=>{fe(!0),W("")},className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition duration-300",children:"แก้ไขโปรไฟล์"})]})]})]}):C.jsx("div",{className:"min-h-screen flex items-center justify-center",children:C.jsx("p",{children:"ผู้ใช้ยังไม่ได้เข้าสู่ระบบ."})})}function zN(){const{cid:i}=F1(),e=ea(),t=So(),a=ul(Ds),c=t.currentUser,[f,y]=J.useState(null),[b,_]=J.useState(""),[w,S]=J.useState(""),[R,P]=J.useState(""),[F,Y]=J.useState(""),[ee,W]=J.useState([]),[de,fe]=J.useState([]),[ie,_e]=J.useState(!1),[Be,ke]=J.useState(""),[z,V]=J.useState(""),[k,G]=J.useState([]),[K,$]=J.useState("");J.useEffect(()=>{if(i){const Oe=kt(a,"classroom",i);kr(Oe).then(Ae=>{if(Ae.exists()){const Qe=Ae.data();if(Qe.owner!==c.uid){ke("สิทธิ์ไม่พอ คุณไม่ใช่เจ้าของห้องเรียนนี้.");return}y(Qe),_(Qe.info.code),S(Qe.info.name),P(Qe.info.photo),Y(Qe.info.room)}else ke("ไม่พบห้องเรียน.")}).catch(Ae=>{console.error(Ae),ke("เกิดข้อผิดพลาดในการดึงข้อมูลห้องเรียน.")});const oe=Pr(a,"classroom",i,"students");Cr(oe).then(Ae=>{const Qe=[];Ae.forEach(lt=>{Qe.push({id:lt.id,...lt.data()})}),W(Qe)}).catch(Ae=>console.error("เกิดข้อผิดพลาดในการดึงนักเรียน: ",Ae));const Ie=Pr(a,"classroom",i,"checkin");Cr(Ie).then(Ae=>{const Qe=[];Ae.forEach(lt=>{Qe.push({id:lt.id,...lt.data()})}),fe(Qe)}).catch(Ae=>console.error("เกิดข้อผิดพลาดในการดึงกิจกรรมเช็คอิน: ",Ae))}},[i,c.uid,a]),J.useEffect(()=>{(async()=>{try{const oe=Pr(a,"users"),Ie=Iu(oe,Nu("classroom.status","==",2)),Ae=await Cr(Ie),Qe=[];Ae.forEach(lt=>{Qe.push({id:lt.id,...lt.data()})}),G(Qe)}catch(oe){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลผู้ใช้: ",oe)}})()},[a]);const X=async Oe=>{Oe.preventDefault(),_e(!0),V("");try{const oe=kt(a,"classroom",i);await Jl(oe,{"info.code":b,"info.name":w,"info.photo":R,"info.room":F}),V("แก้ไขห้องเรียนสำเร็จแล้ว.")}catch(oe){console.error("เกิดข้อผิดพลาดในการแก้ไขห้องเรียน: ",oe),V("แก้ไขห้องเรียนไม่สำเร็จ.")}_e(!1)};return Be?C.jsx("div",{className:"p-6 text-red-600 text-center",children:Be}):f?C.jsxs("div",{className:"min-h-screen bg-blue-50 p-6",children:[C.jsxs("div",{className:"flex items-center justify-between mb-8",children:[C.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน: ",f.info.name]}),C.jsx("button",{onClick:()=>e("/dashboard"),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition",children:"กลับไปที่แดชบอร์ด"})]}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"นักเรียนที่ลงทะเบียน"}),ee.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border p-2 text-left",children:"ชื่อ"}),C.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),C.jsx("tbody",{children:ee.map(Oe=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:Oe.stdid}),C.jsx("td",{className:"border p-2",children:Oe.name}),C.jsx("td",{className:"border p-2",children:Oe.status===0?"รออนุมัติ":"ตรวจสอบแล้ว"})]},Oe.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ยังไม่มีนักเรียนที่ลงทะเบียน"})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"เพิ่มนักเรียน"}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"เลือกนักเรียน"}),C.jsxs("select",{value:K,onChange:Oe=>$(Oe.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:[C.jsx("option",{value:"",children:"-- เลือกนักเรียน --"}),k.map(Oe=>C.jsxs("option",{value:Oe.id,children:[Oe.name," (",Oe.email,")"]},Oe.id))]})]}),C.jsx("button",{onClick:async()=>{if(!K)return;const Oe=k.find(oe=>oe.id===K);if(Oe)try{const oe=kt(a,"classroom",i,"students",Oe.id);await ki(oe,{stdid:Oe.id,name:Oe.name,status:1}),W([...ee,{id:Oe.id,stdid:Oe.id,name:Oe.name,status:1}]),V("เพิ่มนักเรียนสำเร็จแล้ว."),$("")}catch(oe){console.error("เกิดข้อผิดพลาดในการเพิ่มนักเรียน: ",oe),V("เพิ่มนักเรียนไม่สำเร็จ.")}},className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"เพิ่มนักเรียน"})]}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"กิจกรรมเช็คอิน"}),de.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left",children:"หมายเลขเช็คอิน"}),C.jsx("th",{className:"border p-2 text-left",children:"รหัส"}),C.jsx("th",{className:"border p-2 text-left",children:"วันที่"}),C.jsx("th",{className:"border p-2 text-left",children:"สถานะ"})]})}),C.jsx("tbody",{children:de.map(Oe=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:Oe.id}),C.jsx("td",{className:"border p-2",children:Oe.code}),C.jsx("td",{className:"border p-2",children:Oe.date}),C.jsx("td",{className:"border p-2",children:Oe.status===0?"ยังไม่เริ่ม":Oe.status===1?"กำลังดำเนินการ":"เสร็จสิ้น"})]},Oe.id))})]})}):C.jsx("p",{className:"text-center text-gray-700",children:"ไม่มีกิจกรรมเช็คอิน"})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[C.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"แก้ไขรายละเอียดห้องเรียน"}),C.jsxs("form",{onSubmit:X,children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"รหัสวิชา"}),C.jsx("input",{type:"text",value:b,onChange:Oe=>_(Oe.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อวิชา"}),C.jsx("input",{type:"text",value:w,onChange:Oe=>S(Oe.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"URL รูปภาพ"}),C.jsx("input",{type:"text",value:R,onChange:Oe=>P(Oe.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-1",children:"ชื่อห้องเรียน"}),C.jsx("input",{type:"text",value:F,onChange:Oe=>Y(Oe.target.value),className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})]}),C.jsx("button",{type:"submit",disabled:ie,className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:ie?"กำลังแก้ไข...":"บันทึกการแก้ไข"}),z&&C.jsx("p",{className:"mt-4 text-green-600 text-center",children:z})]})]})]}):C.jsx("div",{className:"p-6 text-center",children:"กำลังโหลดข้อมูลห้องเรียน..."})}var Je;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Je||(Je={}));var yy=new Map([[Je.QR_CODE,"QR_CODE"],[Je.AZTEC,"AZTEC"],[Je.CODABAR,"CODABAR"],[Je.CODE_39,"CODE_39"],[Je.CODE_93,"CODE_93"],[Je.CODE_128,"CODE_128"],[Je.DATA_MATRIX,"DATA_MATRIX"],[Je.MAXICODE,"MAXICODE"],[Je.ITF,"ITF"],[Je.EAN_13,"EAN_13"],[Je.EAN_8,"EAN_8"],[Je.PDF_417,"PDF_417"],[Je.RSS_14,"RSS_14"],[Je.RSS_EXPANDED,"RSS_EXPANDED"],[Je.UPC_A,"UPC_A"],[Je.UPC_E,"UPC_E"],[Je.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),wy;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(wy||(wy={}));function HN(i){return Object.values(Je).includes(i)}var To;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(To||(To={}));var Ss=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[To.SCAN_TYPE_CAMERA,To.SCAN_TYPE_FILE],i}(),N_=function(){function i(e,t){this.format=e,this.formatName=t}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!yy.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,yy.get(e))},i}(),Ey=function(){function i(){}return i.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i}(),k1;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(k1||(k1={}));var R_=function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:k1.UNKWOWN_ERROR}},i}(),D_=function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i}();function Xs(i){return typeof i>"u"||i===null}function GN(i,e,t){return i>t?t:i<e?e:i}var Ql=function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}(),xn=function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(e){return"Last Match: ".concat(e)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i}(),_y=function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i}(),M_=function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var a=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(c),y=Object.keys(e),b=0,_=y;b<_.length;b++){var w=_[b];if(f.has(w))return t.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},i}(),gu={exports:{}},qN=gu.exports,vy;function YN(){return vy||(vy=1,function(i,e){(function(t,a){a(e)})(qN,function(t){function a(O){return O==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,r){O.__proto__=r}||function(O,r){for(var o in r)r.hasOwnProperty(o)&&(O[o]=r[o])};function f(O,r){c(O,r);function o(){this.constructor=O}O.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}function y(O,r){var o=Object.setPrototypeOf;o?o(O,r):O.__proto__=r}function b(O,r){r===void 0&&(r=O.constructor);var o=Error.captureStackTrace;o&&o(O,r)}var _=function(O){f(r,O);function r(o){var l=this.constructor,h=O.call(this,o)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),y(h,l.prototype),b(h),h}return r}(Error);class w extends _{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}w.kind="Exception";class S extends w{}S.kind="ArgumentException";class R extends w{}R.kind="IllegalArgumentException";class P{constructor(r){if(this.binarizer=r,r===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,o){return this.binarizer.getBlackRow(r,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,o,l,h){const d=this.binarizer.getLuminanceSource().crop(r,o,l,h);return new P(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new P(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new P(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class F extends w{static getChecksumInstance(){return new F}}F.kind="ChecksumException";class Y{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ee{static arraycopy(r,o,l,h,d){for(;d--;)l[h++]=r[o++]}static currentTimeMillis(){return Date.now()}}class W extends w{}W.kind="IndexOutOfBoundsException";class de extends W{constructor(r=void 0,o=void 0){super(o),this.index=r,this.message=o}}de.kind="ArrayIndexOutOfBoundsException";class fe{static fill(r,o){for(let l=0,h=r.length;l<h;l++)r[l]=o}static fillWithin(r,o,l,h){fe.rangeCheck(r.length,o,l);for(let d=o;d<l;d++)r[d]=h}static rangeCheck(r,o,l){if(o>l)throw new R("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new de(o);if(l>r)throw new de(l)}static asList(...r){return r}static create(r,o,l){return Array.from({length:r}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(r,o,l){return Array.from({length:r}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(r,o){if(!r||!o||!r.length||!o.length||r.length!==o.length)return!1;for(let l=0,h=r.length;l<h;l++)if(r[l]!==o[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let o=1;for(const l of r)o=31*o+l;return o}static fillUint8Array(r,o){for(let l=0;l!==r.length;l++)r[l]=o}static copyOf(r,o){return r.slice(0,o)}static copyOfUint8Array(r,o){if(r.length<=o){const l=new Uint8Array(o);return l.set(r),l}return r.slice(0,o)}static copyOfRange(r,o,l){const h=l-o,d=new Int32Array(h);return ee.arraycopy(r,o,d,0,h),d}static binarySearch(r,o,l){l===void 0&&(l=fe.numberComparator);let h=0,d=r.length-1;for(;h<=d;){const m=d+h>>1,p=l(o,r[m]);if(p>0)h=m+1;else if(p<0)d=m-1;else return m}return-h-1}static numberComparator(r,o){return r-o}}class ie{static numberOfTrailingZeros(r){let o;if(r===0)return 32;let l=31;return o=r<<16,o!==0&&(l-=16,r=o),o=r<<8,o!==0&&(l-=8,r=o),o=r<<4,o!==0&&(l-=4,r=o),o=r<<2,o!==0&&(l-=2,r=o),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let o=1;return r>>>16||(o+=16,r<<=16),r>>>24||(o+=8,r<<=8),r>>>28||(o+=4,r<<=4),r>>>30||(o+=2,r<<=2),o-=r>>>31,o}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,o){return Math.trunc(r/o)}static parseInt(r,o=void 0){return parseInt(r,o)}}ie.MIN_VALUE_32_BITS=-2147483648,ie.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _e{constructor(r,o){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,o==null?this.bits=_e.makeArray(r):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const o=_e.makeArray(r);ee.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=l[h]}const p=h*32+ie.numberOfTrailingZeros(d);return p>o?o:p}getNextUnset(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=~l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=~l[h]}const p=h*32+ie.numberOfTrailingZeros(d);return p>o?o:p}setBulk(r,o){this.bits[Math.floor(r/32)]=o}setRange(r,o){if(o<r||r<0||o>this.size)throw new R;if(o===r)return;o--;const l=Math.floor(r/32),h=Math.floor(o/32),d=this.bits;for(let m=l;m<=h;m++){const p=m>l?0:r&31,T=(2<<(m<h?31:o&31))-(1<<p);d[m]|=T}}clear(){const r=this.bits.length,o=this.bits;for(let l=0;l<r;l++)o[l]=0}isRange(r,o,l){if(o<r||r<0||o>this.size)throw new R;if(o===r)return!0;o--;const h=Math.floor(r/32),d=Math.floor(o/32),m=this.bits;for(let p=h;p<=d;p++){const v=p>h?0:r&31,N=(2<<(p<d?31:o&31))-(1<<v)&4294967295;if((m[p]&N)!==(l?N:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,o){if(o<0||o>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const o=r.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new R("Sizes don't match");const o=this.bits;for(let l=0,h=o.length;l<h;l++)o[l]^=r.bits[l]}toBytes(r,o,l,h){for(let d=0;d<h;d++){let m=0;for(let p=0;p<8;p++)this.get(r)&&(m|=1<<7-p),r++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,h=this.bits;for(let d=0;d<l;d++){let m=h[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=r[0]>>>d;for(let p=1;p<l;p++){const v=r[p];m|=v<<32-d,r[p-1]=m,m=v>>>d}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof _e))return!1;const o=r;return this.size===o.size&&fe.equals(this.bits,o.bits)}hashCode(){return 31*this.size+fe.hashCode(this.bits)}toString(){let r="";for(let o=0,l=this.size;o<l;o++)o&7||(r+=" "),r+=this.get(o)?"X":".";return r}clone(){return new _e(this.size,this.bits.slice())}}var Be;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Be||(Be={}));var ke=Be;class z extends w{static getFormatInstance(){return new z}}z.kind="FormatException";var V;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(V||(V={}));class k{constructor(r,o,l,...h){this.valueIdentifier=r,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=h,k.VALUE_IDENTIFIER_TO_ECI.set(r,this),k.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,p=d.length;m!==p;m++){const v=d[m];k.VALUES_TO_ECI.set(v,this)}for(const m of h)k.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new z("incorect value");const o=k.VALUES_TO_ECI.get(r);if(o===void 0)throw new z("incorect value");return o}static getCharacterSetECIByName(r){const o=k.NAME_TO_ECI.get(r);if(o===void 0)throw new z("incorect value");return o}equals(r){if(!(r instanceof k))return!1;const o=r;return this.getName()===o.getName()}}k.VALUE_IDENTIFIER_TO_ECI=new Map,k.VALUES_TO_ECI=new Map,k.NAME_TO_ECI=new Map,k.Cp437=new k(V.Cp437,Int32Array.from([0,2]),"Cp437"),k.ISO8859_1=new k(V.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),k.ISO8859_2=new k(V.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),k.ISO8859_3=new k(V.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),k.ISO8859_4=new k(V.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),k.ISO8859_5=new k(V.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),k.ISO8859_6=new k(V.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),k.ISO8859_7=new k(V.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),k.ISO8859_8=new k(V.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),k.ISO8859_9=new k(V.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),k.ISO8859_10=new k(V.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),k.ISO8859_11=new k(V.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),k.ISO8859_13=new k(V.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),k.ISO8859_14=new k(V.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),k.ISO8859_15=new k(V.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),k.ISO8859_16=new k(V.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),k.SJIS=new k(V.SJIS,20,"SJIS","Shift_JIS"),k.Cp1250=new k(V.Cp1250,21,"Cp1250","windows-1250"),k.Cp1251=new k(V.Cp1251,22,"Cp1251","windows-1251"),k.Cp1252=new k(V.Cp1252,23,"Cp1252","windows-1252"),k.Cp1256=new k(V.Cp1256,24,"Cp1256","windows-1256"),k.UnicodeBigUnmarked=new k(V.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),k.UTF8=new k(V.UTF8,26,"UTF8","UTF-8"),k.ASCII=new k(V.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),k.Big5=new k(V.Big5,28,"Big5"),k.GB18030=new k(V.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),k.EUC_KR=new k(V.EUC_KR,30,"EUC_KR","EUC-KR");class G extends w{}G.kind="UnsupportedOperationException";class K{static decode(r,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!K.isBrowser()&&r==="ISO-8859-1"}static encode(r,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof k?r:k.getCharacterSetECIByName(r)}static decodeFallback(r,o){const l=this.encodingCharacterSet(o);if(K.isDecodeFallbackSupported(l)){let h="";for(let d=0,m=r.length;d<m;d++){let p=r[d].toString(16);p.length<2&&(p="0"+p),h+="%"+p}return decodeURIComponent(h)}if(l.equals(k.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new G(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(k.UTF8)||r.equals(k.ISO8859_1)||r.equals(k.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),h=[];for(let d=0;d<l.length;d++)h.push(l[d].charCodeAt(0));return new Uint8Array(h)}}class ${static castAsNonUtf8Char(r,o=null){const l=o?o.getName():this.ISO88591;return K.decode(new Uint8Array([r]),l)}static guessEncoding(r,o){if(o!=null&&o.get(ke.CHARACTER_SET)!==void 0)return o.get(ke.CHARACTER_SET).toString();const l=r.length;let h=!0,d=!0,m=!0,p=0,v=0,T=0,N=0,L=0,B=0,q=0,ne=0,re=0,he=0,we=0;const je=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Ve=0;Ve<l&&(h||d||m);Ve++){const De=r[Ve]&255;m&&(p>0?De&128?p--:m=!1:De&128&&(De&64?(p++,De&32?(p++,De&16?(p++,De&8?m=!1:N++):T++):v++):m=!1)),h&&(De>127&&De<160?h=!1:De>159&&(De<192||De===215||De===247)&&we++),d&&(L>0?De<64||De===127||De>252?d=!1:L--:De===128||De===160||De>239?d=!1:De>160&&De<224?(B++,ne=0,q++,q>re&&(re=q)):De>127?(L++,q=0,ne++,ne>he&&(he=ne)):(q=0,ne=0))}return m&&p>0&&(m=!1),d&&L>0&&(d=!1),m&&(je||v+T+N>0)?$.UTF8:d&&($.ASSUME_SHIFT_JIS||re>=3||he>=3)?$.SHIFT_JIS:h&&d?re===2&&B===2||we*10>=l?$.SHIFT_JIS:$.ISO88591:h?$.ISO88591:d?$.SHIFT_JIS:m?$.UTF8:$.PLATFORM_DEFAULT_ENCODING}static format(r,...o){let l=-1;function h(m,p,v,T,N,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let B=N?parseInt(N.substr(1)):void 0,q;switch(L){case"s":q=o[l];break;case"c":q=o[l][0];break;case"f":q=parseFloat(o[l]).toFixed(m);break;case"p":q=parseFloat(o[l]).toPrecision(m);break;case"e":q=parseFloat(o[l]).toExponential(m);break;case"x":q=parseInt(o[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(o[l],B||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let ne=parseInt(v),re=v&&v[0]+""=="0"?"0":" ";for(;q.length<ne;)q=p!==void 0?q+re:re+q;return q}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}static getBytes(r,o){return K.encode(r,o)}static getCharCode(r,o=0){return r.charCodeAt(o)}static getCharAt(r){return String.fromCharCode(r)}}$.SHIFT_JIS=k.SJIS.getName(),$.GB2312="GB2312",$.ISO88591=k.ISO8859_1.getName(),$.EUC_JP="EUC_JP",$.UTF8=k.UTF8.getName(),$.PLATFORM_DEFAULT_ENCODING=$.UTF8,$.ASSUME_SHIFT_JIS=!1;class X{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=$.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,o,l){for(let h=o;o<o+l;h++)this.append(r[h]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+1)}substring(r,o){return this.value.substring(r,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+o.length)}}class Oe{constructor(r,o,l,h){if(this.width=r,this.height=o,this.rowSize=l,this.bits=h,o==null&&(o=r),this.height=o,r<1||o<1)throw new R("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const o=r.length,l=r[0].length,h=new Oe(l,o);for(let d=0;d<o;d++){const m=r[d];for(let p=0;p<l;p++)m[p]&&h.set(p,d)}return h}static parseFromString(r,o,l){if(r===null)throw new R("stringRepresentation cannot be null");const h=new Array(r.length);let d=0,m=0,p=-1,v=0,T=0;for(;T<r.length;)if(r.charAt(T)===`
`||r.charAt(T)==="\r"){if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new R("row lengths do not match");m=d,v++}T++}else if(r.substring(T,T+o.length)===o)T+=o.length,h[d]=!0,d++;else if(r.substring(T,T+l.length)===l)T+=l.length,h[d]=!1,d++;else throw new R("illegal character encountered: "+r.substring(T));if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new R("row lengths do not match");v++}const N=new Oe(p,v);for(let L=0;L<d;L++)h[L]&&N.set(Math.floor(L%p),Math.floor(L/p));return N}get(r,o){const l=o*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new R("input matrix dimensions do not match");const o=new _e(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let d=0,m=this.height;d<m;d++){const p=d*l,v=r.getRow(d,o).getBitArray();for(let T=0;T<l;T++)h[p+T]^=v[T]}}clear(){const r=this.bits,o=r.length;for(let l=0;l<o;l++)r[l]=0}setRegion(r,o,l,h){if(o<0||r<0)throw new R("Left and top must be nonnegative");if(h<1||l<1)throw new R("Height and width must be at least 1");const d=r+l,m=o+h;if(m>this.height||d>this.width)throw new R("The region must fit inside the matrix");const p=this.rowSize,v=this.bits;for(let T=o;T<m;T++){const N=T*p;for(let L=r;L<d;L++)v[N+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(r,o){o==null||o.getSize()<this.width?o=new _e(this.width):o.clear();const l=this.rowSize,h=this.bits,d=r*l;for(let m=0;m<l;m++)o.setBulk(m*32,h[d+m]);return o}setRow(r,o){ee.arraycopy(o.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),o=this.getHeight();let l=new _e(r),h=new _e(r);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),h=this.getRow(o-1-d,h),l.reverse(),h.reverse(),this.setRow(d,h),this.setRow(o-1-d,l)}getEnclosingRectangle(){const r=this.width,o=this.height,l=this.rowSize,h=this.bits;let d=r,m=o,p=-1,v=-1;for(let T=0;T<o;T++)for(let N=0;N<l;N++){const L=h[T*l+N];if(L!==0){if(T<m&&(m=T),T>v&&(v=T),N*32<d){let B=0;for(;!(L<<31-B&4294967295);)B++;N*32+B<d&&(d=N*32+B)}if(N*32+31>p){let B=31;for(;!(L>>>B);)B--;N*32+B>p&&(p=N*32+B)}}}return p<d||v<m?null:Int32Array.from([d,m,p-d+1,v-m+1])}getTopLeftOnBit(){const r=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const h=l/r;let d=l%r*32;const m=o[l];let p=0;for(;!(m<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,h])}getBottomRightOnBit(){const r=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/r);let d=Math.floor(l%r)*32;const m=o[l];let p=31;for(;!(m>>>p);)p--;return d+=p,Int32Array.from([d,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Oe))return!1;const o=r;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&fe.equals(this.bits,o.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+fe.hashCode(this.bits),r}toString(r="X ",o="  ",l=`
`){return this.buildToString(r,o,l)}buildToString(r,o,l){let h=new X;for(let d=0,m=this.height;d<m;d++){for(let p=0,v=this.width;p<v;p++)h.append(this.get(p,d)?r:o);h.append(l)}return h.toString()}clone(){return new Oe(this.width,this.height,this.rowSize,this.bits.slice())}}class oe extends w{static getNotFoundInstance(){return new oe}}oe.kind="NotFoundException";class Ie extends Y{constructor(r){super(r),this.luminances=Ie.EMPTY,this.buckets=new Int32Array(Ie.LUMINANCE_BUCKETS)}getBlackRow(r,o){const l=this.getLuminanceSource(),h=l.getWidth();o==null||o.getSize()<h?o=new _e(h):o.clear(),this.initArrays(h);const d=l.getRow(r,this.luminances),m=this.buckets;for(let v=0;v<h;v++)m[(d[v]&255)>>Ie.LUMINANCE_SHIFT]++;const p=Ie.estimateBlackPoint(m);if(h<3)for(let v=0;v<h;v++)(d[v]&255)<p&&o.set(v);else{let v=d[0]&255,T=d[1]&255;for(let N=1;N<h-1;N++){const L=d[N+1]&255;(T*4-v-L)/2<p&&o.set(N),v=T,T=L}}return o}getBlackMatrix(){const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight(),h=new Oe(o,l);this.initArrays(o);const d=this.buckets;for(let v=1;v<5;v++){const T=Math.floor(l*v/5),N=r.getRow(T,this.luminances),L=Math.floor(o*4/5);for(let B=Math.floor(o/5);B<L;B++){const q=N[B]&255;d[q>>Ie.LUMINANCE_SHIFT]++}}const m=Ie.estimateBlackPoint(d),p=r.getMatrix();for(let v=0;v<l;v++){const T=v*o;for(let N=0;N<o;N++)(p[T+N]&255)<m&&h.set(N,v)}return h}createBinarizer(r){return new Ie(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const o=this.buckets;for(let l=0;l<Ie.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(r){const o=r.length;let l=0,h=0,d=0;for(let N=0;N<o;N++)r[N]>d&&(h=N,d=r[N]),r[N]>l&&(l=r[N]);let m=0,p=0;for(let N=0;N<o;N++){const L=N-h,B=r[N]*L*L;B>p&&(m=N,p=B)}if(h>m){const N=h;h=m,m=N}if(m-h<=o/16)throw new oe;let v=m-1,T=-1;for(let N=m-1;N>h;N--){const L=N-h,B=L*L*(m-N)*(l-r[N]);B>T&&(v=N,T=B)}return v<<Ie.LUMINANCE_SHIFT}}Ie.LUMINANCE_BITS=5,Ie.LUMINANCE_SHIFT=8-Ie.LUMINANCE_BITS,Ie.LUMINANCE_BUCKETS=1<<Ie.LUMINANCE_BITS,Ie.EMPTY=Uint8ClampedArray.from([0]);class Ae extends Ie{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight();if(o>=Ae.MINIMUM_DIMENSION&&l>=Ae.MINIMUM_DIMENSION){const h=r.getMatrix();let d=o>>Ae.BLOCK_SIZE_POWER;o&Ae.BLOCK_SIZE_MASK&&d++;let m=l>>Ae.BLOCK_SIZE_POWER;l&Ae.BLOCK_SIZE_MASK&&m++;const p=Ae.calculateBlackPoints(h,d,m,o,l),v=new Oe(o,l);Ae.calculateThresholdForBlock(h,d,m,o,l,p,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Ae(r)}static calculateThresholdForBlock(r,o,l,h,d,m,p){const v=d-Ae.BLOCK_SIZE,T=h-Ae.BLOCK_SIZE;for(let N=0;N<l;N++){let L=N<<Ae.BLOCK_SIZE_POWER;L>v&&(L=v);const B=Ae.cap(N,2,l-3);for(let q=0;q<o;q++){let ne=q<<Ae.BLOCK_SIZE_POWER;ne>T&&(ne=T);const re=Ae.cap(q,2,o-3);let he=0;for(let je=-2;je<=2;je++){const Ve=m[B+je];he+=Ve[re-2]+Ve[re-1]+Ve[re]+Ve[re+1]+Ve[re+2]}const we=he/25;Ae.thresholdBlock(r,ne,L,we,h,p)}}}static cap(r,o,l){return r<o?o:r>l?l:r}static thresholdBlock(r,o,l,h,d,m){for(let p=0,v=l*d+o;p<Ae.BLOCK_SIZE;p++,v+=d)for(let T=0;T<Ae.BLOCK_SIZE;T++)(r[v+T]&255)<=h&&m.set(o+T,l+p)}static calculateBlackPoints(r,o,l,h,d){const m=d-Ae.BLOCK_SIZE,p=h-Ae.BLOCK_SIZE,v=new Array(l);for(let T=0;T<l;T++){v[T]=new Int32Array(o);let N=T<<Ae.BLOCK_SIZE_POWER;N>m&&(N=m);for(let L=0;L<o;L++){let B=L<<Ae.BLOCK_SIZE_POWER;B>p&&(B=p);let q=0,ne=255,re=0;for(let we=0,je=N*h+B;we<Ae.BLOCK_SIZE;we++,je+=h){for(let Ve=0;Ve<Ae.BLOCK_SIZE;Ve++){const De=r[je+Ve]&255;q+=De,De<ne&&(ne=De),De>re&&(re=De)}if(re-ne>Ae.MIN_DYNAMIC_RANGE)for(we++,je+=h;we<Ae.BLOCK_SIZE;we++,je+=h)for(let Ve=0;Ve<Ae.BLOCK_SIZE;Ve++)q+=r[je+Ve]&255}let he=q>>Ae.BLOCK_SIZE_POWER*2;if(re-ne<=Ae.MIN_DYNAMIC_RANGE&&(he=ne/2,T>0&&L>0)){const we=(v[T-1][L]+2*v[T][L-1]+v[T-1][L-1])/4;ne<we&&(he=we)}v[T][L]=he}}return v}}Ae.BLOCK_SIZE_POWER=3,Ae.BLOCK_SIZE=1<<Ae.BLOCK_SIZE_POWER,Ae.BLOCK_SIZE_MASK=Ae.BLOCK_SIZE-1,Ae.MINIMUM_DIMENSION=Ae.BLOCK_SIZE*5,Ae.MIN_DYNAMIC_RANGE=24;class Qe{constructor(r,o){this.width=r,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,o,l,h){throw new G("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new G("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new G("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let o=new X;for(let l=0;l<this.height;l++){const h=this.getRow(l,r);for(let d=0;d<this.width;d++){const m=h[d]&255;let p;m<64?p="#":m<128?p="+":m<192?p=".":p=" ",o.append(p)}o.append(`
`)}return o.toString()}}class lt extends Qe{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,o){const l=this.delegate.getRow(r,o),h=this.getWidth();for(let d=0;d<h;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let h=0;h<o;h++)l[h]=255-(r[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,o,l,h){return new lt(this.delegate.crop(r,o,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new lt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new lt(this.delegate.rotateCounterClockwise45())}}class te extends Qe{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=te.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const o=r.getContext("2d").getImageData(0,0,r.width,r.height);return te.toGrayscaleBuffer(o.data,r.width,r.height)}static toGrayscaleBuffer(r,o,l){const h=new Uint8ClampedArray(o*l);for(let d=0,m=0,p=r.length;d<p;d+=4,m++){let v;if(r[d+3]===0)v=255;else{const N=r[d],L=r[d+1],B=r[d+2];v=306*N+601*L+117*B+512>>10}h[m]=v}return h}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth(),h=r*l;return o===null?o=this.buffer.slice(h,h+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(h,h+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,o,l,h){return super.crop(r,o,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const o=this.getTempCanvasElement(),l=o.getContext("2d"),h=r*te.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(h))*d+Math.abs(Math.sin(h))*m),v=Math.ceil(Math.abs(Math.sin(h))*d+Math.abs(Math.cos(h))*m);return o.width=p,o.height=v,l.translate(p/2,v/2),l.rotate(h),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=te.makeBufferFromCanvasImageData(o),this}invert(){return new lt(this)}}te.DEGREE_TO_RADIANS=Math.PI/180;class Ne{constructor(r,o,l){this.deviceId=r,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Pe=(globalThis||Fh||self||window||void 0)&&(globalThis||Fh||self||window||void 0).__awaiter||function(O,r,o,l){function h(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function p(N){try{T(l.next(N))}catch(L){m(L)}}function v(N){try{T(l.throw(N))}catch(L){m(L)}}function T(N){N.done?d(N.value):h(N.value).then(p,v)}T((l=l.apply(O,r||[])).next())})};class He{constructor(r,o=500,l){this.reader=r,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of r){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,p=l.groupId,v={deviceId:d,label:m,kind:h,groupId:p};o.push(v)}return o})}getVideoInputDevices(){return Pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new Ne(o.deviceId,o.label))})}findDeviceById(r){return Pe(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,o){return Pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,o)})}decodeOnceFromVideoDevice(r,o){return Pe(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,o)})}decodeOnceFromConstraints(r,o){return Pe(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(r,o){return Pe(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,o,l){return Pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,o,l)})}decodeFromVideoDevice(r,o,l){return Pe(this,void 0,void 0,function*(){let h;r?h={deviceId:{exact:r}}:h={facingMode:"environment"};const d={video:h};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(r,o,l){return Pe(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(h,o,l)})}decodeFromStream(r,o,l){return Pe(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(r,o);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,o){return Pe(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((o,l)=>this.playVideoOnLoad(r,()=>o()))}playVideoOnLoad(r,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",o),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,o){const l=document.getElementById(r);if(!l)throw new S(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new S(`element with id '${r}' must be an ${o} element`);return l}decodeFromImage(r,o){if(!r&&!o)throw new S("either imageElement with a src set or an url must be provided");return o&&!r?this.decodeFromImageUrl(o):this.decodeFromImageElement(r)}decodeFromVideo(r,o){if(!r&&!o)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,o,l){if(r===void 0&&o===void 0)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const o=this.prepareImageElement(r);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(r){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(r,o){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const o=this.prepareVideoElement(r);return this.videoElement=o,o}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=r,l}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=r,l}decodeFromVideoUrlContinuously(r,o){if(!r)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,o);return l.src=r,h}_decodeOnLoadImage(r){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(o,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,o){return Pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,o)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let o;return typeof r>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(o=r),o}prepareVideoElement(r){let o;return!r&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(o=r),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(r,o=!0,l=!0){this._stopAsyncDecode=!1;const h=(d,m)=>{if(this._stopAsyncDecode){m(new oe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(r);d(p)}catch(p){const v=o&&p instanceof oe,N=(p instanceof F||p instanceof z)&&l;if(v||N)return setTimeout(h,this._timeBetweenDecodingAttempts,d,m);m(p)}};return new Promise((d,m)=>h(d,m))}decodeContinuously(r,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(r);o(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){o(null,h);const d=h instanceof F||h instanceof z,m=h instanceof oe;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const o=this.createBinaryBitmap(r);return this.decodeBitmap(o)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,o,l){o||(o={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(r,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const o=this.getCaptureCanvas(r),l=new te(o),h=new Ae(l);return new P(h)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const o=this.createCaptureCanvas(r);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,h;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,h=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,h=r.naturalHeight||r.height)),o.style.width=l+"px",o.style.height=h+"px",o.width=l,o.height=h,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,o){try{r.srcObject=o}catch{r.src=URL.createObjectURL(o)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class ze{constructor(r,o,l=o==null?0:8*o.length,h,d,m=ee.currentTimeMillis()){this.text=r,this.rawBytes=o,this.numBits=l,this.resultPoints=h,this.format=d,this.timestamp=m,this.text=r,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=h,this.format=d,this.resultMetadata=null,m==null?this.timestamp=ee.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,o)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const o=this.resultPoints;if(o===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(o.length+r.length);ee.arraycopy(o,0,l,0,o.length),ee.arraycopy(r,0,l,o.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var yt;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(yt||(yt={}));var Re=yt,Ue;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ue||(Ue={}));var Fe=Ue;class nt{constructor(r,o,l,h,d=-1,m=-1){this.rawBytes=r,this.text=o,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class tt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}static addOrSubtract(r,o){return r^o}}class gt{constructor(r,o){if(o.length===0)throw new R;this.field=r;const l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),ee.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(r===1){l=0;for(let m=0,p=o.length;m!==p;m++){const v=o[m];l=tt.addOrSubtract(l,v)}return l}l=o[0];const h=o.length,d=this.field;for(let m=1;m<h;m++)l=tt.addOrSubtract(d.multiply(r,l),o[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let h=new Int32Array(l.length);const d=l.length-o.length;ee.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=tt.addOrSubtract(o[m-d],l[m]);return new gt(this.field,h)}multiply(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1),p=this.field;for(let v=0;v<l;v++){const T=o[v];for(let N=0;N<d;N++)m[v+N]=tt.addOrSubtract(m[v+N],p.multiply(T,h[N]))}return new gt(p,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const o=this.coefficients.length,l=this.field,h=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)h[m]=l.multiply(d[m],r);return new gt(l,h)}multiplyByMonomial(r,o){if(r<0)throw new R;if(o===0)return this.field.getZero();const l=this.coefficients,h=l.length,d=new Int32Array(h+r),m=this.field;for(let p=0;p<h;p++)d[p]=m.multiply(l[p],o);return new gt(m,d)}divide(r){if(!this.field.equals(r.field))throw new R("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new R("Divide by 0");const o=this.field;let l=o.getZero(),h=this;const d=r.getCoefficient(r.getDegree()),m=o.inverse(d);for(;h.getDegree()>=r.getDegree()&&!h.isZero();){const p=h.getDegree()-r.getDegree(),v=o.multiply(h.getCoefficient(h.getDegree()),m),T=r.multiplyByMonomial(p,v),N=o.buildMonomial(p,v);l=l.addOrSubtract(N),h=h.addOrSubtract(T)}return[l,h]}toString(){let r="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),o===0||l!==1){const h=this.field.log(l);h===0?r+="1":h===1?r+="a":(r+="a^",r+=h)}o!==0&&(o===1?r+="x":(r+="x^",r+=o))}}return r}}class An extends w{}An.kind="ArithmeticException";class xt extends tt{constructor(r,o,l){super(),this.primitive=r,this.size=o,this.generatorBase=l;const h=new Int32Array(o);let d=1;for(let p=0;p<o;p++)h[p]=d,d*=2,d>=o&&(d^=r,d&=o-1);this.expTable=h;const m=new Int32Array(o);for(let p=0;p<o-1;p++)m[h[p]]=p;this.logTable=m,this.zero=new gt(this,Int32Array.from([0])),this.one=new gt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new R;if(o===0)return this.zero;const l=new Int32Array(r+1);return l[0]=o,new gt(this,l)}inverse(r){if(r===0)throw new An;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ie.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}xt.AZTEC_DATA_12=new xt(4201,4096,1),xt.AZTEC_DATA_10=new xt(1033,1024,1),xt.AZTEC_DATA_6=new xt(67,64,1),xt.AZTEC_PARAM=new xt(19,16,1),xt.QR_CODE_FIELD_256=new xt(285,256,0),xt.DATA_MATRIX_FIELD_256=new xt(301,256,1),xt.AZTEC_DATA_8=xt.DATA_MATRIX_FIELD_256,xt.MAXICODE_FIELD_64=xt.AZTEC_DATA_6;class We extends w{}We.kind="ReedSolomonException";class Ze extends w{}Ze.kind="IllegalStateException";class st{constructor(r){this.field=r}decode(r,o){const l=this.field,h=new gt(l,r),d=new Int32Array(o);let m=!0;for(let q=0;q<o;q++){const ne=h.evaluateAt(l.exp(q+l.getGeneratorBase()));d[d.length-1-q]=ne,ne!==0&&(m=!1)}if(m)return;const p=new gt(l,d),v=this.runEuclideanAlgorithm(l.buildMonomial(o,1),p,o),T=v[0],N=v[1],L=this.findErrorLocations(T),B=this.findErrorMagnitudes(N,L);for(let q=0;q<L.length;q++){const ne=r.length-1-l.log(L[q]);if(ne<0)throw new We("Bad error location");r[ne]=xt.addOrSubtract(r[ne],B[q])}}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){const q=r;r=o,o=q}const h=this.field;let d=r,m=o,p=h.getZero(),v=h.getOne();for(;m.getDegree()>=(l/2|0);){let q=d,ne=p;if(d=m,p=v,d.isZero())throw new We("r_{i-1} was zero");m=q;let re=h.getZero();const he=d.getCoefficient(d.getDegree()),we=h.inverse(he);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const je=m.getDegree()-d.getDegree(),Ve=h.multiply(m.getCoefficient(m.getDegree()),we);re=re.addOrSubtract(h.buildMonomial(je,Ve)),m=m.addOrSubtract(d.multiplyByMonomial(je,Ve))}if(v=re.multiply(p).addOrSubtract(ne),m.getDegree()>=d.getDegree())throw new Ze("Division algorithm failed to reduce polynomial?")}const T=v.getCoefficient(0);if(T===0)throw new We("sigmaTilde(0) was zero");const N=h.inverse(T),L=v.multiplyScalar(N),B=m.multiplyScalar(N);return[L,B]}findErrorLocations(r){const o=r.getDegree();if(o===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(o);let h=0;const d=this.field;for(let m=1;m<d.getSize()&&h<o;m++)r.evaluateAt(m)===0&&(l[h]=d.inverse(m),h++);if(h!==o)throw new We("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,o){const l=o.length,h=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const p=d.inverse(o[m]);let v=1;for(let T=0;T<l;T++)if(m!==T){const N=d.multiply(o[T],p),L=N&1?N&-2:N|1;v=d.multiply(v,L)}h[m]=d.multiply(r.evaluateAt(p),d.inverse(v)),d.getGeneratorBase()!==0&&(h[m]=d.multiply(h[m],p))}return h}}var at;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(at||(at={}));class it{decode(r){this.ddata=r;let o=r.getBits(),l=this.extractBits(o),h=this.correctBits(l),d=it.convertBoolArrayToByteArray(h),m=it.getEncodedData(h),p=new nt(d,m,null,null);return p.setNumBits(h.length),p}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let o=r.length,l=at.UPPER,h=at.UPPER,d="",m=0;for(;m<o;)if(h===at.BINARY){if(o-m<5)break;let p=it.readCode(r,m,5);if(m+=5,p===0){if(o-m<11)break;p=it.readCode(r,m,11)+31,m+=11}for(let v=0;v<p;v++){if(o-m<8){m=o;break}const T=it.readCode(r,m,8);d+=$.castAsNonUtf8Char(T),m+=8}h=l}else{let p=h===at.DIGIT?4:5;if(o-m<p)break;let v=it.readCode(r,m,p);m+=p;let T=it.getCharacter(h,v);T.startsWith("CTRL_")?(l=h,h=it.getTable(T.charAt(5)),T.charAt(6)==="L"&&(l=h)):(d+=T,h=l)}return d}static getTable(r){switch(r){case"L":return at.LOWER;case"P":return at.PUNCT;case"M":return at.MIXED;case"D":return at.DIGIT;case"B":return at.BINARY;case"U":default:return at.UPPER}}static getCharacter(r,o){switch(r){case at.UPPER:return it.UPPER_TABLE[o];case at.LOWER:return it.LOWER_TABLE[o];case at.MIXED:return it.MIXED_TABLE[o];case at.PUNCT:return it.PUNCT_TABLE[o];case at.DIGIT:return it.DIGIT_TABLE[o];default:throw new Ze("Bad table")}}correctBits(r){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=xt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=xt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=xt.AZTEC_DATA_10):(l=12,o=xt.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),d=r.length/l;if(d<h)throw new z;let m=r.length%l,p=new Int32Array(d);for(let B=0;B<d;B++,m+=l)p[B]=it.readCode(r,m,l);try{new st(o).decode(p,d-h)}catch(B){throw new z(B)}let v=(1<<l)-1,T=0;for(let B=0;B<h;B++){let q=p[B];if(q===0||q===v)throw new z;(q===1||q===v-1)&&T++}let N=new Array(h*l-T),L=0;for(let B=0;B<h;B++){let q=p[B];if(q===1||q===v-1)N.fill(q>1,L,L+l-1),L+=l-1;else for(let ne=l-1;ne>=0;--ne)N[L++]=(q&1<<ne)!==0}return N}extractBits(r){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(o?11:14)+l*4,d=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let p=0;p<d.length;p++)d[p]=p;else{let p=h+1+2*ie.truncDivision(ie.truncDivision(h,2)-1,15),v=h/2,T=ie.truncDivision(p,2);for(let N=0;N<v;N++){let L=N+ie.truncDivision(N,15);d[v-N-1]=T-L-1,d[v+N]=T+L+1}}for(let p=0,v=0;p<l;p++){let T=(l-p)*4+(o?9:12),N=p*2,L=h-1-N;for(let B=0;B<T;B++){let q=B*2;for(let ne=0;ne<2;ne++)m[v+q+ne]=r.get(d[N+ne],d[N+B]),m[v+2*T+q+ne]=r.get(d[N+B],d[L-ne]),m[v+4*T+q+ne]=r.get(d[L-ne],d[L-B]),m[v+6*T+q+ne]=r.get(d[L-B],d[N+ne])}v+=T*8}return m}static readCode(r,o,l){let h=0;for(let d=o;d<o+l;d++)h<<=1,r[d]&&(h|=1);return h}static readByte(r,o){let l=r.length-o;return l>=8?it.readCode(r,o,8):it.readCode(r,o,l)<<8-l}static convertBoolArrayToByteArray(r){let o=new Uint8Array((r.length+7)/8);for(let l=0;l<o.length;l++)o[l]=it.readByte(r,8*l);return o}totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}it.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],it.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],it.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],it.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],it.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class mt{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,o,l,h){const d=r-l,m=o-h;return Math.sqrt(d*d+m*m)}static sum(r){let o=0;for(let l=0,h=r.length;l!==h;l++){const d=r[l];o+=d}return o}}class _t{static floatToIntBits(r){return r}}_t.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ge{constructor(r,o){this.x=r,this.y=o}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Ge){const o=r;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*_t.floatToIntBits(this.x)+_t.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const o=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),h=this.distance(r[0],r[2]);let d,m,p;if(l>=o&&l>=h?(m=r[0],d=r[1],p=r[2]):h>=l&&h>=o?(m=r[1],d=r[0],p=r[2]):(m=r[2],d=r[0],p=r[1]),this.crossProductZ(d,m,p)<0){const v=d;d=p,p=v}r[0]=d,r[1]=m,r[2]=p}static distance(r,o){return mt.distance(r.x,r.y,o.x,o.y)}static crossProductZ(r,o,l){const h=o.x,d=o.y;return(l.x-h)*(r.y-d)-(l.y-d)*(r.x-h)}}class fr{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Br extends fr{constructor(r,o,l,h,d){super(r,o),this.compact=l,this.nbDatablocks=h,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class It{constructor(r,o,l,h){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),o==null&&(o=It.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),h==null&&(h=r.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=h-d,this.downInit=h+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}detect(){let r=this.leftInit,o=this.rightInit,l=this.upInit,h=this.downInit,d=!1,m=!0,p=!1,v=!1,T=!1,N=!1,L=!1;const B=this.width,q=this.height;for(;m;){m=!1;let ne=!0;for(;(ne||!v)&&o<B;)ne=this.containsBlackPoint(l,h,o,!1),ne?(o++,m=!0,v=!0):v||o++;if(o>=B){d=!0;break}let re=!0;for(;(re||!T)&&h<q;)re=this.containsBlackPoint(r,o,h,!0),re?(h++,m=!0,T=!0):T||h++;if(h>=q){d=!0;break}let he=!0;for(;(he||!N)&&r>=0;)he=this.containsBlackPoint(l,h,r,!1),he?(r--,m=!0,N=!0):N||r--;if(r<0){d=!0;break}let we=!0;for(;(we||!L)&&l>=0;)we=this.containsBlackPoint(r,o,l,!0),we?(l--,m=!0,L=!0):L||l--;if(l<0){d=!0;break}m&&(p=!0)}if(!d&&p){const ne=o-r;let re=null;for(let Ve=1;re===null&&Ve<ne;Ve++)re=this.getBlackPointOnSegment(r,h-Ve,r+Ve,h);if(re==null)throw new oe;let he=null;for(let Ve=1;he===null&&Ve<ne;Ve++)he=this.getBlackPointOnSegment(r,l+Ve,r+Ve,l);if(he==null)throw new oe;let we=null;for(let Ve=1;we===null&&Ve<ne;Ve++)we=this.getBlackPointOnSegment(o,l+Ve,o-Ve,l);if(we==null)throw new oe;let je=null;for(let Ve=1;je===null&&Ve<ne;Ve++)je=this.getBlackPointOnSegment(o,h-Ve,o-Ve,h);if(je==null)throw new oe;return this.centerEdges(je,re,we,he)}else throw new oe}getBlackPointOnSegment(r,o,l,h){const d=mt.round(mt.distance(r,o,l,h)),m=(l-r)/d,p=(h-o)/d,v=this.image;for(let T=0;T<d;T++){const N=mt.round(r+T*m),L=mt.round(o+T*p);if(v.get(N,L))return new Ge(N,L)}return null}centerEdges(r,o,l,h){const d=r.getX(),m=r.getY(),p=o.getX(),v=o.getY(),T=l.getX(),N=l.getY(),L=h.getX(),B=h.getY(),q=It.CORR;return d<this.width/2?[new Ge(L-q,B+q),new Ge(p+q,v+q),new Ge(T-q,N-q),new Ge(d+q,m-q)]:[new Ge(L+q,B+q),new Ge(p+q,v-q),new Ge(T-q,N+q),new Ge(d-q,m-q)]}containsBlackPoint(r,o,l,h){const d=this.image;if(h){for(let m=r;m<=o;m++)if(d.get(m,l))return!0}else for(let m=r;m<=o;m++)if(d.get(l,m))return!0;return!1}}It.INIT_SIZE=10,It.CORR=1;class xi{static checkAndNudgePoints(r,o){const l=r.getWidth(),h=r.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const p=Math.floor(o[m]),v=Math.floor(o[m+1]);if(p<-1||p>l||v<-1||v>h)throw new oe;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),v===-1?(o[m+1]=0,d=!0):v===h&&(o[m+1]=h-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const p=Math.floor(o[m]),v=Math.floor(o[m+1]);if(p<-1||p>l||v<-1||v>h)throw new oe;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),v===-1?(o[m+1]=0,d=!0):v===h&&(o[m+1]=h-1,d=!0)}}}class en{constructor(r,o,l,h,d,m,p,v,T){this.a11=r,this.a21=o,this.a31=l,this.a12=h,this.a22=d,this.a32=m,this.a13=p,this.a23=v,this.a33=T}static quadrilateralToQuadrilateral(r,o,l,h,d,m,p,v,T,N,L,B,q,ne,re,he){const we=en.quadrilateralToSquare(r,o,l,h,d,m,p,v);return en.squareToQuadrilateral(T,N,L,B,q,ne,re,he).times(we)}transformPoints(r){const o=r.length,l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,v=this.a23,T=this.a31,N=this.a32,L=this.a33;for(let B=0;B<o;B+=2){const q=r[B],ne=r[B+1],re=d*q+v*ne+L;r[B]=(l*q+m*ne+T)/re,r[B+1]=(h*q+p*ne+N)/re}}transformPointsWithValues(r,o){const l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,v=this.a23,T=this.a31,N=this.a32,L=this.a33,B=r.length;for(let q=0;q<B;q++){const ne=r[q],re=o[q],he=d*ne+v*re+L;r[q]=(l*ne+m*re+T)/he,o[q]=(h*ne+p*re+N)/he}}static squareToQuadrilateral(r,o,l,h,d,m,p,v){const T=r-l+d-p,N=o-h+m-v;if(T===0&&N===0)return new en(l-r,d-l,r,h-o,m-h,o,0,0,1);{const L=l-d,B=p-d,q=h-m,ne=v-m,re=L*ne-B*q,he=(T*ne-B*N)/re,we=(L*N-T*q)/re;return new en(l-r+he*l,p-r+we*p,r,h-o+he*h,v-o+we*v,o,he,we,1)}}static quadrilateralToSquare(r,o,l,h,d,m,p,v){return en.squareToQuadrilateral(r,o,l,h,d,m,p,v).buildAdjoint()}buildAdjoint(){return new en(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new en(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class yn extends xi{sampleGrid(r,o,l,h,d,m,p,v,T,N,L,B,q,ne,re,he,we,je,Ve){const De=en.quadrilateralToQuadrilateral(h,d,m,p,v,T,N,L,B,q,ne,re,he,we,je,Ve);return this.sampleGridWithTransform(r,o,l,De)}sampleGridWithTransform(r,o,l,h){if(o<=0||l<=0)throw new oe;const d=new Oe(o,l),m=new Float32Array(2*o);for(let p=0;p<l;p++){const v=m.length,T=p+.5;for(let N=0;N<v;N+=2)m[N]=N/2+.5,m[N+1]=T;h.transformPoints(m),xi.checkAndNudgePoints(r,m);try{for(let N=0;N<v;N+=2)r.get(Math.floor(m[N]),Math.floor(m[N+1]))&&d.set(N/2,p)}catch{throw new oe}}return d}}class Ln{static setGridSampler(r){Ln.gridSampler=r}static getInstance(){return Ln.gridSampler}}Ln.gridSampler=new yn;class Kn{constructor(r,o){this.x=r,this.y=o}toResultPoint(){return new Ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ls{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Br(h,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new oe;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],o),this.sampleLine(r[1],r[2],o),this.sampleLine(r[2],r[3],o),this.sampleLine(r[3],r[0],o)]);this.shift=this.getRotation(l,o);let h=0;for(let m=0;m<4;m++){let p=l[(this.shift+m)%4];this.compact?(h<<=7,h+=p>>1&127):(h<<=10,h+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,o){let l=0;r.forEach((h,d,m)=>{let p=(h>>o-2<<1)+(h&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(ie.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new oe}getCorrectedParameterData(r,o){let l,h;o?(l=7,h=2):(l=10,h=4);let d=l-h,m=new Int32Array(l);for(let v=l-1;v>=0;--v)m[v]=r&15,r>>=4;try{new st(xt.AZTEC_PARAM).decode(m,d)}catch{throw new oe}let p=0;for(let v=0;v<h;v++)p=(p<<4)+m[v];return p}getBullsEyeCorners(r){let o=r,l=r,h=r,d=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(o,m,1,-1),B=this.getFirstDifferent(l,m,1,1),q=this.getFirstDifferent(h,m,-1,1),ne=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(ne,L)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle(L,B,q,ne))break}o=L,l=B,h=q,d=ne,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;let p=new Ge(o.getX()+.5,o.getY()-.5),v=new Ge(l.getX()+.5,l.getY()+.5),T=new Ge(h.getX()-.5,h.getY()+.5),N=new Ge(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,v,T,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,o,l,h;try{let p=new It(this.image).detect();r=p[0],o=p[1],l=p[2],h=p[3]}catch{let v=this.image.getWidth()/2,T=this.image.getHeight()/2;r=this.getFirstDifferent(new Kn(v+7,T-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Kn(v+7,T+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Kn(v-7,T+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Kn(v-7,T-7),!1,-1,-1).toResultPoint()}let d=mt.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=mt.round((r.getY()+h.getY()+o.getY()+l.getY())/4);try{let p=new It(this.image,15,d,m).detect();r=p[0],o=p[1],l=p[2],h=p[3]}catch{r=this.getFirstDifferent(new Kn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Kn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Kn(d-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Kn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=mt.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=mt.round((r.getY()+h.getY()+o.getY()+l.getY())/4),new Kn(d,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,o,l,h,d){let m=Ln.getInstance(),p=this.getDimension(),v=p/2-this.nbCenterLayers,T=p/2+this.nbCenterLayers;return m.sampleGrid(r,p,p,v,v,T,v,T,T,v,T,o.getX(),o.getY(),l.getX(),l.getY(),h.getX(),h.getY(),d.getX(),d.getY())}sampleLine(r,o,l){let h=0,d=this.distanceResultPoint(r,o),m=d/l,p=r.getX(),v=r.getY(),T=m*(o.getX()-r.getX())/d,N=m*(o.getY()-r.getY())/d;for(let L=0;L<l;L++)this.image.get(mt.round(p+L*T),mt.round(v+L*N))&&(h|=1<<l-L-1);return h}isWhiteOrBlackRectangle(r,o,l,h){let d=3;r=new Kn(r.getX()-d,r.getY()+d),o=new Kn(o.getX()-d,o.getY()-d),l=new Kn(l.getX()+d,l.getY()-d),h=new Kn(h.getX()+d,h.getY()+d);let m=this.getColor(h,r);if(m===0)return!1;let p=this.getColor(r,o);return p!==m||(p=this.getColor(o,l),p!==m)?!1:(p=this.getColor(l,h),p===m)}getColor(r,o){let l=this.distancePoint(r,o),h=(o.getX()-r.getX())/l,d=(o.getY()-r.getY())/l,m=0,p=r.getX(),v=r.getY(),T=this.image.get(r.getX(),r.getY()),N=Math.ceil(l);for(let B=0;B<N;B++)p+=h,v+=d,this.image.get(mt.round(p),mt.round(v))!==T&&m++;let L=m/l;return L>.1&&L<.9?0:L<=.1===T?1:-1}getFirstDifferent(r,o,l,h){let d=r.getX()+l,m=r.getY()+h;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=h;for(d-=l,m-=h;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=h;return m-=h,new Kn(d,m)}expandSquare(r,o,l){let h=l/(2*o),d=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),p=(r[0].getX()+r[2].getX())/2,v=(r[0].getY()+r[2].getY())/2,T=new Ge(p+h*d,v+h*m),N=new Ge(p-h*d,v-h*m);d=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),p=(r[1].getX()+r[3].getX())/2,v=(r[1].getY()+r[3].getY())/2;let L=new Ge(p+h*d,v+h*m),B=new Ge(p-h*d,v-h*m);return[T,L,N,B]}isValid(r,o){return r>=0&&r<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(r){let o=mt.round(r.getX()),l=mt.round(r.getY());return this.isValid(o,l)}distancePoint(r,o){return mt.distance(r.getX(),r.getY(),o.getX(),o.getY())}distanceResultPoint(r,o){return mt.distance(r.getX(),r.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ie.truncDivision(this.nbLayers-4,8)+1)+15}}class Pi{decode(r,o=null){let l=null,h=new Ls(r.getBlackMatrix()),d=null,m=null;try{let N=h.detectMirror(!1);d=N.getPoints(),this.reportFoundResultPoints(o,d),m=new it().decode(N)}catch(N){l=N}if(m==null)try{let N=h.detectMirror(!0);d=N.getPoints(),this.reportFoundResultPoints(o,d),m=new it().decode(N)}catch(N){throw l??N}let p=new ze(m.getText(),m.getRawBytes(),m.getNumBits(),d,Re.AZTEC,ee.currentTimeMillis()),v=m.getByteSegments();v!=null&&p.putMetadata(Fe.BYTE_SEGMENTS,v);let T=m.getECLevel();return T!=null&&p.putMetadata(Fe.ERROR_CORRECTION_LEVEL,T),p}reportFoundResultPoints(r,o){if(r!=null){let l=r.get(ke.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((h,d,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Bi extends He{constructor(r=500){super(new Pi,r)}}class un{decode(r,o){try{return this.doDecode(r,o)}catch{if(o&&o.get(ke.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),m=this.doDecode(d,o),p=m.getResultMetadata();let v=270;p!==null&&p.get(Fe.ORIENTATION)===!0&&(v=v+p.get(Fe.ORIENTATION)%360),m.putMetadata(Fe.ORIENTATION,v);const T=m.getResultPoints();if(T!==null){const N=d.getHeight();for(let L=0;L<T.length;L++)T[L]=new Ge(N-T[L].getY()-1,T[L].getX())}return m}else throw new oe}}reset(){}doDecode(r,o){const l=r.getWidth(),h=r.getHeight();let d=new _e(l);const m=o&&o.get(ke.TRY_HARDER)===!0,p=Math.max(1,h>>(m?8:5));let v;m?v=h:v=15;const T=Math.trunc(h/2);for(let N=0;N<v;N++){const L=Math.trunc((N+1)/2),B=(N&1)===0,q=T+p*(B?L:-L);if(q<0||q>=h)break;try{d=r.getBlackRow(q,d)}catch{continue}for(let ne=0;ne<2;ne++){if(ne===1&&(d.reverse(),o&&o.get(ke.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;o.forEach((he,we)=>re.set(we,he)),re.delete(ke.NEED_RESULT_POINT_CALLBACK),o=re}try{const re=this.decodeRow(q,d,o);if(ne===1){re.putMetadata(Fe.ORIENTATION,180);const he=re.getResultPoints();he!==null&&(he[0]=new Ge(l-he[0].getX()-1,he[0].getY()),he[1]=new Ge(l-he[1].getX()-1,he[1].getY()))}return re}catch{}}}throw new oe}static recordPattern(r,o,l){const h=l.length;for(let T=0;T<h;T++)l[T]=0;const d=r.getSize();if(o>=d)throw new oe;let m=!r.get(o),p=0,v=o;for(;v<d;){if(r.get(v)!==m)l[p]++;else{if(++p===h)break;l[p]=1,m=!m}v++}if(!(p===h||p===h-1&&v===d))throw new oe}static recordPatternInReverse(r,o,l){let h=l.length,d=r.get(o);for(;o>0&&h>=0;)r.get(--o)!==d&&(h--,d=!d);if(h>=0)throw new oe;un.recordPattern(r,o+1,l)}static patternMatchVariance(r,o,l){const h=r.length;let d=0,m=0;for(let T=0;T<h;T++)d+=r[T],m+=o[T];if(d<m)return Number.POSITIVE_INFINITY;const p=d/m;l*=p;let v=0;for(let T=0;T<h;T++){const N=r[T],L=o[T]*p,B=N>L?N-L:L-N;if(B>l)return Number.POSITIVE_INFINITY;v+=B}return v/d}}class Le extends un{static findStartPattern(r){const o=r.getSize(),l=r.getNextSet(0);let h=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,p=!1;const v=6;for(let T=l;T<o;T++)if(r.get(T)!==p)d[h]++;else{if(h===v-1){let N=Le.MAX_AVG_VARIANCE,L=-1;for(let B=Le.CODE_START_A;B<=Le.CODE_START_C;B++){const q=un.patternMatchVariance(d,Le.CODE_PATTERNS[B],Le.MAX_INDIVIDUAL_VARIANCE);q<N&&(N=q,L=B)}if(L>=0&&r.isRange(Math.max(0,m-(T-m)/2),m,!1))return Int32Array.from([m,T,L]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,p=!p}throw new oe}static decodeCode(r,o,l){un.recordPattern(r,l,o);let h=Le.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Le.CODE_PATTERNS.length;m++){const p=Le.CODE_PATTERNS[m],v=this.patternMatchVariance(o,p,Le.MAX_INDIVIDUAL_VARIANCE);v<h&&(h=v,d=m)}if(d>=0)return d;throw new oe}decodeRow(r,o,l){const h=l&&l.get(ke.ASSUME_GS1)===!0,d=Le.findStartPattern(o),m=d[2];let p=0;const v=new Uint8Array(20);v[p++]=m;let T;switch(m){case Le.CODE_START_A:T=Le.CODE_CODE_A;break;case Le.CODE_START_B:T=Le.CODE_CODE_B;break;case Le.CODE_START_C:T=Le.CODE_CODE_C;break;default:throw new z}let N=!1,L=!1,B="",q=d[0],ne=d[1];const re=Int32Array.from([0,0,0,0,0,0]);let he=0,we=0,je=m,Ve=0,De=!0,jt=!1,wt=!1;for(;!N;){const aa=L;switch(L=!1,he=we,we=Le.decodeCode(o,re,ne),v[p++]=we,we!==Le.CODE_STOP&&(De=!0),we!==Le.CODE_STOP&&(Ve++,je+=Ve*we),q=ne,ne+=re.reduce((Gu,Gi)=>Gu+Gi,0),we){case Le.CODE_START_A:case Le.CODE_START_B:case Le.CODE_START_C:throw new z}switch(T){case Le.CODE_CODE_A:if(we<64)wt===jt?B+=String.fromCharCode(32+we):B+=String.fromCharCode(32+we+128),wt=!1;else if(we<96)wt===jt?B+=String.fromCharCode(we-64):B+=String.fromCharCode(we+64),wt=!1;else switch(we!==Le.CODE_STOP&&(De=!1),we){case Le.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_A:!jt&&wt?(jt=!0,wt=!1):jt&&wt?(jt=!1,wt=!1):wt=!0;break;case Le.CODE_SHIFT:L=!0,T=Le.CODE_CODE_B;break;case Le.CODE_CODE_B:T=Le.CODE_CODE_B;break;case Le.CODE_CODE_C:T=Le.CODE_CODE_C;break;case Le.CODE_STOP:N=!0;break}break;case Le.CODE_CODE_B:if(we<96)wt===jt?B+=String.fromCharCode(32+we):B+=String.fromCharCode(32+we+128),wt=!1;else switch(we!==Le.CODE_STOP&&(De=!1),we){case Le.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_B:!jt&&wt?(jt=!0,wt=!1):jt&&wt?(jt=!1,wt=!1):wt=!0;break;case Le.CODE_SHIFT:L=!0,T=Le.CODE_CODE_A;break;case Le.CODE_CODE_A:T=Le.CODE_CODE_A;break;case Le.CODE_CODE_C:T=Le.CODE_CODE_C;break;case Le.CODE_STOP:N=!0;break}break;case Le.CODE_CODE_C:if(we<100)we<10&&(B+="0"),B+=we;else switch(we!==Le.CODE_STOP&&(De=!1),we){case Le.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case Le.CODE_CODE_A:T=Le.CODE_CODE_A;break;case Le.CODE_CODE_B:T=Le.CODE_CODE_B;break;case Le.CODE_STOP:N=!0;break}break}aa&&(T=T===Le.CODE_CODE_A?Le.CODE_CODE_B:Le.CODE_CODE_A)}const Gr=ne-q;if(ne=o.getNextUnset(ne),!o.isRange(ne,Math.min(o.getSize(),ne+(ne-q)/2),!1))throw new oe;if(je-=Ve*he,je%103!==he)throw new F;const Di=B.length;if(Di===0)throw new oe;Di>0&&De&&(T===Le.CODE_CODE_C?B=B.substring(0,Di-2):B=B.substring(0,Di-1));const qr=(d[1]+d[0])/2,pn=q+Gr/2,vr=v.length,di=new Uint8Array(vr);for(let aa=0;aa<vr;aa++)di[aa]=v[aa];const sa=[new Ge(qr,r),new Ge(pn,r)];return new ze(B,di,0,sa,Re.CODE_128,new Date().getTime())}}Le.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Le.MAX_AVG_VARIANCE=.25,Le.MAX_INDIVIDUAL_VARIANCE=.7,Le.CODE_SHIFT=98,Le.CODE_CODE_C=99,Le.CODE_CODE_B=100,Le.CODE_CODE_A=101,Le.CODE_FNC_1=102,Le.CODE_FNC_2=97,Le.CODE_FNC_3=96,Le.CODE_FNC_4_A=101,Le.CODE_FNC_4_B=100,Le.CODE_START_A=103,Le.CODE_START_B=104,Le.CODE_START_C=105,Le.CODE_STOP=106;class Cn extends un{constructor(r=!1,o=!1){super(),this.usingCheckDigit=r,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,o,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let d=Cn.findAsteriskPattern(o,h),m=o.getNextSet(d[1]),p=o.getSize(),v,T;do{Cn.recordPattern(o,m,h);let re=Cn.toNarrowWidePattern(h);if(re<0)throw new oe;v=Cn.patternToChar(re),this.decodeRowResult+=v,T=m;for(let he of h)m+=he;m=o.getNextSet(m)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let re of h)N+=re;let L=m-T-N;if(m!==p&&L*2<N)throw new oe;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,he=0;for(let we=0;we<re;we++)he+=Cn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(we));if(this.decodeRowResult.charAt(re)!==Cn.ALPHABET_STRING.charAt(he%43))throw new F;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new oe;let B;this.extendedMode?B=Cn.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let q=(d[1]+d[0])/2,ne=T+N/2;return new ze(B,null,0,[new Ge(q,r),new Ge(ne,r)],Re.CODE_39,new Date().getTime())}static findAsteriskPattern(r,o){let l=r.getSize(),h=r.getNextSet(0),d=0,m=h,p=!1,v=o.length;for(let T=h;T<l;T++)if(r.get(T)!==p)o[d]++;else{if(d===v-1){if(this.toNarrowWidePattern(o)===Cn.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((T-m)/2)),m,!1))return[m,T];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,p=!p}throw new oe}static toNarrowWidePattern(r){let o=r.length,l=0,h;do{let d=2147483647;for(let v of r)v<d&&v>l&&(d=v);l=d,h=0;let m=0,p=0;for(let v=0;v<o;v++){let T=r[v];T>l&&(p|=1<<o-1-v,h++,m+=T)}if(h===3){for(let v=0;v<o&&h>0;v++){let T=r[v];if(T>l&&(h--,T*2>=m))return-1}return p}}while(h>3);return-1}static patternToChar(r){for(let o=0;o<Cn.CHARACTER_ENCODINGS.length;o++)if(Cn.CHARACTER_ENCODINGS[o]===r)return Cn.ALPHABET_STRING.charAt(o);if(r===Cn.ASTERISK_ENCODING)return"*";throw new oe}static decodeExtended(r){let o=r.length,l="";for(let h=0;h<o;h++){let d=r.charAt(h);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=r.charAt(h+1),p="\0";switch(d){case"+":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)+32);else throw new z;break;case"$":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)-64);else throw new z;break;case"%":if(m>="A"&&m<="E")p=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")p=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")p=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")p="\0";else if(m==="V")p="@";else if(m==="W")p="`";else if(m==="X"||m==="Y"||m==="Z")p="";else throw new z;break;case"/":if(m>="A"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")p=":";else throw new z;break}l+=p,h++}else l+=d}return l}}Cn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Cn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Cn.ASTERISK_ENCODING=148;class Ot extends un{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,o,l){let h=this.decodeStart(o),d=this.decodeEnd(o),m=new X;Ot.decodeMiddle(o,h[1],d[0],m);let p=m.toString(),v=null;l!=null&&(v=l.get(ke.ALLOWED_LENGTHS)),v==null&&(v=Ot.DEFAULT_ALLOWED_LENGTHS);let T=p.length,N=!1,L=0;for(let ne of v){if(T===ne){N=!0;break}ne>L&&(L=ne)}if(!N&&T>L&&(N=!0),!N)throw new z;const B=[new Ge(h[1],r),new Ge(d[0],r)];return new ze(p,null,0,B,Re.ITF,new Date().getTime())}static decodeMiddle(r,o,l,h){let d=new Int32Array(10),m=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),m.fill(0),p.fill(0);o<l;){un.recordPattern(r,o,d);for(let T=0;T<5;T++){let N=2*T;m[T]=d[N],p[T]=d[N+1]}let v=Ot.decodeDigit(m);h.append(v.toString()),v=this.decodeDigit(p),h.append(v.toString()),d.forEach(function(T){o+=T})}}decodeStart(r){let o=Ot.skipWhiteSpace(r),l=Ot.findGuardPattern(r,o,Ot.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let h=o-1;l>0&&h>=0&&!r.get(h);h--)l--;if(l!==0)throw new oe}static skipWhiteSpace(r){const o=r.getSize(),l=r.getNextSet(0);if(l===o)throw new oe;return l}decodeEnd(r){r.reverse();try{let o=Ot.skipWhiteSpace(r),l;try{l=Ot.findGuardPattern(r,o,Ot.END_PATTERN_REVERSED[0])}catch(d){d instanceof oe&&(l=Ot.findGuardPattern(r,o,Ot.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let h=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-h,l}finally{r.reverse()}}static findGuardPattern(r,o,l){let h=l.length,d=new Int32Array(h),m=r.getSize(),p=!1,v=0,T=o;d.fill(0);for(let N=o;N<m;N++)if(r.get(N)!==p)d[v]++;else{if(v===h-1){if(un.patternMatchVariance(d,l,Ot.MAX_INDIVIDUAL_VARIANCE)<Ot.MAX_AVG_VARIANCE)return[T,N];T+=d[0]+d[1],ee.arraycopy(d,2,d,0,v-1),d[v-1]=0,d[v]=0,v--}else v++;d[v]=1,p=!p}throw new oe}static decodeDigit(r){let o=Ot.MAX_AVG_VARIANCE,l=-1,h=Ot.PATTERNS.length;for(let d=0;d<h;d++){let m=Ot.PATTERNS[d],p=un.patternMatchVariance(r,m,Ot.MAX_INDIVIDUAL_VARIANCE);p<o?(o=p,l=d):p===o&&(l=-1)}if(l>=0)return l%10;throw new oe}}Ot.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ot.MAX_AVG_VARIANCE=.38,Ot.MAX_INDIVIDUAL_VARIANCE=.5,Ot.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ot.START_PATTERN=Int32Array.from([1,1,1,1]),Ot.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pt extends un{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let o=!1,l,h=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=Pt.findGuardPattern(r,h,!1,this.START_END_PATTERN,d);let m=l[0];h=l[1];let p=m-(h-m);p>=0&&(o=r.isRange(p,m,!1))}return l}static checkChecksum(r){return Pt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return Pt.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}static decodeEnd(r,o){return Pt.findGuardPattern(r,o,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,o,l,h){return this.findGuardPattern(r,o,l,h,new Int32Array(h.length))}static findGuardPattern(r,o,l,h,d){let m=r.getSize();o=l?r.getNextUnset(o):r.getNextSet(o);let p=0,v=o,T=h.length,N=l;for(let L=o;L<m;L++)if(r.get(L)!==N)d[p]++;else{if(p===T-1){if(un.patternMatchVariance(d,h,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return Int32Array.from([v,L]);v+=d[0]+d[1];let B=d.slice(2,d.length-1);for(let q=0;q<p-1;q++)d[q]=B[q];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,N=!N}throw new oe}static decodeDigit(r,o,l,h){this.recordPattern(r,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,p=h.length;for(let v=0;v<p;v++){let T=h[v],N=un.patternMatchVariance(o,T,Pt.MAX_INDIVIDUAL_VARIANCE);N<d&&(d=N,m=v)}if(m>=0)return m;throw new oe}}Pt.MAX_AVG_VARIANCE=.48,Pt.MAX_INDIVIDUAL_VARIANCE=.7,Pt.START_END_PATTERN=Int32Array.from([1,1,1]),Pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class sr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=sr.parseExtensionString(m),v=[new Ge((l[0]+l[1])/2,r),new Ge(d,r)],T=new ze(m,null,0,v,Re.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&T.putAllMetadata(p),T}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let T=0;T<5&&m<d;T++){let N=Pt.decodeDigit(r,h,m,Pt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<4-T),T!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new oe;let v=this.determineCheckDigit(p);if(sr.extensionChecksum(l.toString())!==v)throw new oe;return m}static extensionChecksum(r){let o=r.length,l=0;for(let h=o-2;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;l*=3;for(let h=o-1;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let o=0;o<10;o++)if(r===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new oe}static parseExtensionString(r){if(r.length!==5)return null;let o=sr.parseExtension5String(r);return o==null?null:new Map([[Fe.SUGGESTED_PRICE,o]])}static parseExtension5String(r){let o;switch(r.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(r.substring(1)),h=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+h+"."+m}}class yi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=yi.parseExtensionString(m),v=[new Ge((l[0]+l[1])/2,r),new Ge(d,r)],T=new ze(m,null,0,v,Re.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&T.putAllMetadata(p),T}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let v=0;v<2&&m<d;v++){let T=Pt.decodeDigit(r,h,m,Pt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let N of h)m+=N;T>=10&&(p|=1<<1-v),v!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new oe;if(parseInt(l.toString())%4!==p)throw new oe;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[Fe.ISSUE_NUMBER,parseInt(r)]])}}class jr{static decodeRow(r,o,l){let h=Pt.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new sr().decodeRow(r,o,h)}catch{return new yi().decodeRow(r,o,h)}}}jr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Rt extends Pt{constructor(){super(),this.decodeRowStringBuffer="",Rt.L_AND_G_PATTERNS=Rt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let o=Rt.L_PATTERNS[r-10],l=new Int32Array(o.length);for(let h=0;h<o.length;h++)l[h]=o[o.length-h-1];Rt.L_AND_G_PATTERNS[r]=l}}decodeRow(r,o,l){let h=Rt.findStartGuardPattern(o),d=l==null?null:l.get(ke.NEED_RESULT_POINT_CALLBACK);if(d!=null){const De=new Ge((h[0]+h[1])/2,r);d.foundPossibleResultPoint(De)}let m=this.decodeMiddle(o,h,this.decodeRowStringBuffer),p=m.rowOffset,v=m.resultString;if(d!=null){const De=new Ge(p,r);d.foundPossibleResultPoint(De)}let T=this.decodeEnd(o,p);if(d!=null){const De=new Ge((T[0]+T[1])/2,r);d.foundPossibleResultPoint(De)}let N=T[1],L=N+(N-T[0]);if(L>=o.getSize()||!o.isRange(N,L,!1))throw new oe;let B=v.toString();if(B.length<8)throw new z;if(!Rt.checkChecksum(B))throw new F;let q=(h[1]+h[0])/2,ne=(T[1]+T[0])/2,re=this.getBarcodeFormat(),he=[new Ge(q,r),new Ge(ne,r)],we=new ze(B,null,0,he,re,new Date().getTime()),je=0;try{let De=jr.decodeRow(r,o,T[1]);we.putMetadata(Fe.UPC_EAN_EXTENSION,De.getText()),we.putAllMetadata(De.getResultMetadata()),we.addResultPoints(De.getResultPoints()),je=De.getText().length}catch{}let Ve=l==null?null:l.get(ke.ALLOWED_EAN_EXTENSIONS);if(Ve!=null){let De=!1;for(let jt in Ve)if(je.toString()===jt){De=!0;break}if(!De)throw new oe}return we}decodeEnd(r,o){return Rt.findGuardPattern(r,o,!1,Rt.START_END_PATTERN,new Int32Array(Rt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Rt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return Rt.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}}class qn extends Rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],p=0;for(let T=0;T<6&&m<d;T++){let N=Rt.decodeDigit(r,h,m,Rt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<5-T)}l=qn.determineFirstDigit(l,p),m=Rt.findGuardPattern(r,m,!0,Rt.MIDDLE_PATTERN,new Int32Array(Rt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&m<d;T++){let N=Rt.decodeDigit(r,h,m,Rt.L_PATTERNS);l+=String.fromCharCode(48+N);for(let L of h)m+=L}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Re.EAN_13}static determineFirstDigit(r,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new oe}}qn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ei extends Rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1];for(let v=0;v<4&&m<d;v++){let T=Rt.decodeDigit(r,h,m,Rt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let N of h)m+=N}m=Rt.findGuardPattern(r,m,!0,Rt.MIDDLE_PATTERN,new Int32Array(Rt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&m<d;v++){let T=Rt.decodeDigit(r,h,m,Rt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let N of h)m+=N}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Re.EAN_8}}class Ur extends Rt{constructor(){super(...arguments),this.ean13Reader=new qn}getBarcodeFormat(){return Re.UPC_A}decode(r,o){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,o,l))}decodeMiddle(r,o,l){return this.ean13Reader.decodeMiddle(r,o,l)}maybeReturnResult(r){let o=r.getText();if(o.charAt(0)==="0"){let l=new ze(o.substring(1),null,null,r.getResultPoints(),Re.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new oe}reset(){this.ean13Reader.reset()}}class Zn extends Rt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters.map(T=>T);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const d=r.getSize();let m=o[1],p=0;for(let T=0;T<6&&m<d;T++){const N=Zn.decodeDigit(r,h,m,Zn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<5-T)}let v=Zn.determineNumSysAndCheckDigit(l,p);return{rowOffset:m,resultString:v}}decodeEnd(r,o){return Zn.findGuardPatternWithoutCounters(r,o,!0,Zn.MIDDLE_END_PATTERN)}checkChecksum(r){return Rt.checkChecksum(Zn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,o){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return d+r+m}throw oe.getNotFoundInstance()}getBarcodeFormat(){return Re.UPC_E}static convertUPCEtoUPCA(r){const o=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new X;l.append(r.charAt(0));let h=o[5];switch(h){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(h),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(h);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Zn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Zn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class es extends un{constructor(r){super();let o=r==null?null:r.get(ke.POSSIBLE_FORMATS),l=[];a(o)?(l.push(new qn),l.push(new Ur),l.push(new ei),l.push(new Zn)):(o.indexOf(Re.EAN_13)>-1&&l.push(new qn),o.indexOf(Re.UPC_A)>-1&&l.push(new Ur),o.indexOf(Re.EAN_8)>-1&&l.push(new ei),o.indexOf(Re.UPC_E)>-1&&l.push(new Zn)),this.readers=l}decodeRow(r,o,l){for(let h of this.readers)try{const d=h.decodeRow(r,o,l),m=d.getBarcodeFormat()===Re.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(ke.POSSIBLE_FORMATS),v=p==null||p.includes(Re.UPC_A);if(m&&v){const T=d.getRawBytes(),N=new ze(d.getText().substring(1),T,T?T.length:null,d.getResultPoints(),Re.UPC_A);return N.putAllMetadata(d.getResultMetadata()),N}return d}catch{}throw new oe}reset(){for(let r of this.readers)r.reset()}}class Vn extends un{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,o){for(let l=0;l<o.length;l++)if(un.patternMatchVariance(r,o[l],Vn.MAX_INDIVIDUAL_VARIANCE)<Vn.MAX_AVG_VARIANCE)return l;throw new oe}static count(r){return mt.sum(new Int32Array(r))}static increment(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]>h&&(h=o[d],l=d);r[l]++}static decrement(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]<h&&(h=o[d],l=d);r[l]--}static isFinderPattern(r){let o=r[0]+r[1],l=o+r[2]+r[3],h=o/l;if(h>=Vn.MIN_FINDER_PATTERN_RATIO&&h<=Vn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let p of r)p>m&&(m=p),p<d&&(d=p);return m<10*d}return!1}}Vn.MAX_AVG_VARIANCE=.2,Vn.MAX_INDIVIDUAL_VARIANCE=.45,Vn.MIN_FINDER_PATTERN_RATIO=9.5/12,Vn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Vr{constructor(r,o){this.value=r,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Vr))return!1;const o=r;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ji{constructor(r,o,l,h,d){this.value=r,this.startEnd=o,this.value=r,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Ge(l,d)),this.resultPoints.push(new Ge(h,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof ji))return!1;const o=r;return this.value===o.value}hashCode(){return this.value}}class tn{constructor(){}static getRSSvalue(r,o,l){let h=0;for(let v of r)h+=v;let d=0,m=0,p=r.length;for(let v=0;v<p-1;v++){let T;for(T=1,m|=1<<v;T<r[v];T++,m&=~(1<<v)){let N=tn.combins(h-T-1,p-v-2);if(l&&m===0&&h-T-(p-v-1)>=p-v-1&&(N-=tn.combins(h-T-(p-v),p-v-2)),p-v-1>1){let L=0;for(let B=h-T-(p-v-2);B>o;B--)L+=tn.combins(h-T-B-1,p-v-3);N-=L*(p-1-v)}else h-T>o&&N--;d+=N}h-=T}return d}static combins(r,o){let l,h;r-o>o?(h=o,l=r-o):(h=r-o,l=o);let d=1,m=1;for(let p=r;p>l;p--)d*=p,m<=h&&(d/=m,m++);for(;m<=h;)d/=m,m++;return d}}class Pa{static buildBitArray(r){let o=r.length*2-1;r[r.length-1].getRightChar()==null&&(o-=1);let l=12*o,h=new _e(l),d=0,p=r[0].getRightChar().getValue();for(let v=11;v>=0;--v)p&1<<v&&h.set(d),d++;for(let v=1;v<r.length;++v){let T=r[v],N=T.getLeftChar().getValue();for(let L=11;L>=0;--L)N&1<<L&&h.set(d),d++;if(T.getRightChar()!=null){let L=T.getRightChar().getValue();for(let B=11;B>=0;--B)L&1<<B&&h.set(d),d++}}return h}}class Ir{constructor(r,o){o?this.decodedInformation=null:(this.finished=r,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wi{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class ar extends wi{constructor(r,o){super(r),this.value=o}getValue(){return this.value}isFNC1(){return this.value===ar.FNC1}}ar.FNC1="$";class Ei extends wi{constructor(r,o,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Yn extends wi{constructor(r,o,l){if(super(r),o<0||o>10||l<0||l>10)throw new z;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Yn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Yn.FNC1}isAnyFNC1(){return this.firstDigit===Yn.FNC1||this.secondDigit===Yn.FNC1}}Yn.FNC1=10;class Ke{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new oe;let o=r.substring(0,2);for(let d of Ke.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(2,d[2],r):Ke.processFixedAI(2,d[1],r);if(r.length<3)throw new oe;let l=r.substring(0,3);for(let d of Ke.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(3,d[2],r):Ke.processFixedAI(3,d[1],r);for(let d of Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,d[2],r):Ke.processFixedAI(4,d[1],r);if(r.length<4)throw new oe;let h=r.substring(0,4);for(let d of Ke.FOUR_DIGIT_DATA_LENGTH)if(d[0]===h)return d[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,d[2],r):Ke.processFixedAI(4,d[1],r);throw new oe}static processFixedAI(r,o,l){if(l.length<r)throw new oe;let h=l.substring(0,r);if(l.length<r+o)throw new oe;let d=l.substring(r,r+o),m=l.substring(r+o),p="("+h+")"+d,v=Ke.parseFieldsInGeneralPurpose(m);return v==null?p:p+v}static processVariableAI(r,o,l){let h=l.substring(0,r),d;l.length<r+o?d=l.length:d=r+o;let m=l.substring(r,d),p=l.substring(d),v="("+h+")"+m,T=Ke.parseFieldsInGeneralPurpose(p);return T==null?v:v+T}}Ke.VARIABLE_LENGTH=[],Ke.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ke.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ke.VARIABLE_LENGTH,20],["22",Ke.VARIABLE_LENGTH,29],["30",Ke.VARIABLE_LENGTH,8],["37",Ke.VARIABLE_LENGTH,8],["90",Ke.VARIABLE_LENGTH,30],["91",Ke.VARIABLE_LENGTH,30],["92",Ke.VARIABLE_LENGTH,30],["93",Ke.VARIABLE_LENGTH,30],["94",Ke.VARIABLE_LENGTH,30],["95",Ke.VARIABLE_LENGTH,30],["96",Ke.VARIABLE_LENGTH,30],["97",Ke.VARIABLE_LENGTH,3],["98",Ke.VARIABLE_LENGTH,30],["99",Ke.VARIABLE_LENGTH,30]],Ke.THREE_DIGIT_DATA_LENGTH=[["240",Ke.VARIABLE_LENGTH,30],["241",Ke.VARIABLE_LENGTH,30],["242",Ke.VARIABLE_LENGTH,6],["250",Ke.VARIABLE_LENGTH,30],["251",Ke.VARIABLE_LENGTH,30],["253",Ke.VARIABLE_LENGTH,17],["254",Ke.VARIABLE_LENGTH,20],["400",Ke.VARIABLE_LENGTH,30],["401",Ke.VARIABLE_LENGTH,30],["402",17],["403",Ke.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ke.VARIABLE_LENGTH,20],["421",Ke.VARIABLE_LENGTH,15],["422",3],["423",Ke.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ke.VARIABLE_LENGTH,15],["391",Ke.VARIABLE_LENGTH,18],["392",Ke.VARIABLE_LENGTH,15],["393",Ke.VARIABLE_LENGTH,18],["703",Ke.VARIABLE_LENGTH,30]],Ke.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ke.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ke.VARIABLE_LENGTH,20],["8003",Ke.VARIABLE_LENGTH,30],["8004",Ke.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ke.VARIABLE_LENGTH,30],["8008",Ke.VARIABLE_LENGTH,12],["8018",18],["8020",Ke.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ke.VARIABLE_LENGTH,70],["8200",Ke.VARIABLE_LENGTH,70]];class wn{constructor(r){this.buffer=new X,this.information=r}decodeAllCodes(r,o){let l=o,h=null;do{let d=this.decodeGeneralPurposeField(l,h),m=Ke.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&r.append(m),d.isRemaining()?h=""+d.getRemainingValue():h=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let o=r;o<r+3;++o)if(this.information.get(o))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Yn(this.information.getSize(),Yn.FNC1,Yn.FNC1):new Yn(this.information.getSize(),d-1,Yn.FNC1)}let o=this.extractNumericValueFromBitArray(r,7),l=(o-8)/11,h=(o-8)%11;return new Yn(r+7,l,h)}extractNumericValueFromBitArray(r,o){return wn.extractNumericValueFromBitArray(this.information,r,o)}static extractNumericValueFromBitArray(r,o,l){let h=0;for(let d=0;d<l;++d)r.get(o+d)&&(h|=1<<l-d-1);return h}decodeGeneralPurposeField(r,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Ei(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Ei(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),r=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),r=o.isFinished()):(o=this.parseNumericBlock(),r=o.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let o;return r.isSecondDigitFNC1()?o=new Ei(this.current.getPosition(),this.buffer.toString()):o=new Ei(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ir(!0,o)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let o=new Ei(this.current.getPosition(),this.buffer.toString());return new Ir(!0,o)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ir(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ei(this.current.getPosition(),this.buffer.toString());return new Ir(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ir(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ei(this.current.getPosition(),this.buffer.toString());return new Ir(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ir(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(r,8);return h>=232&&h<253}decodeIsoIec646(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new ar(r+5,ar.FNC1);if(o>=5&&o<15)return new ar(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new ar(r+7,""+(l+1));if(l>=90&&l<116)return new ar(r+7,""+(l+7));let h=this.extractNumericValueFromBitArray(r,8),d;switch(h){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new z}return new ar(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new ar(r+5,ar.FNC1);if(o>=5&&o<15)return new ar(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new ar(r+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new Ze("Decoding invalid alphanumeric value: "+l)}return new ar(r+6,h)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<5&&o+r<this.information.getSize();++o)if(o===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+o))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let o=r;o<r+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<4&&o+r<this.information.getSize();++o)if(this.information.get(r+o))return!1;return!0}}class kn{constructor(r){this.information=r,this.generalDecoder=new wn(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Nn extends kn{constructor(r){super(r)}encodeCompressedGtin(r,o){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,o,l)}encodeCompressedGtinWithoutAI(r,o,l){for(let h=0;h<4;++h){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*h,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}Nn.appendCheckDigit(r,l)}static appendCheckDigit(r,o){let l=0;for(let h=0;h<13;h++){let d=r.charAt(h+o).charCodeAt(0)-48;l+=h&1?d:3*d}l=10-l%10,l===10&&(l=0),r.append(l)}}Nn.GTIN_SIZE=40;class ti extends Nn{constructor(r){super(r)}parseInformation(){let r=new X;r.append("(01)");let o=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,ti.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(r,ti.HEADER_SIZE+44)}}ti.HEADER_SIZE=4;class Ui extends kn{constructor(r){super(r)}parseInformation(){let r=new X;return this.getGeneralDecoder().decodeAllCodes(r,Ui.HEADER_SIZE)}}Ui.HEADER_SIZE=5;class Fr extends Nn{constructor(r){super(r)}encodeCompressedWeight(r,o,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(r,h);let d=this.checkWeight(h),m=1e5;for(let p=0;p<5;++p)d/m===0&&r.append("0"),m/=10;r.append(d)}}class Nr extends Fr{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Nr.HEADER_SIZE+Fr.GTIN_SIZE+Nr.WEIGHT_SIZE)throw new oe;let r=new X;return this.encodeCompressedGtin(r,Nr.HEADER_SIZE),this.encodeCompressedWeight(r,Nr.HEADER_SIZE+Fr.GTIN_SIZE,Nr.WEIGHT_SIZE),r.toString()}}Nr.HEADER_SIZE=5,Nr.WEIGHT_SIZE=15;class _i extends Nr{constructor(r){super(r)}addWeightCode(r,o){r.append("(3103)")}checkWeight(r){return r}}class ks extends Nr{constructor(r){super(r)}addWeightCode(r,o){o<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class dn extends Nn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<dn.HEADER_SIZE+Nn.GTIN_SIZE)throw new oe;let r=new X;this.encodeCompressedGtin(r,dn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE+Nn.GTIN_SIZE,dn.LAST_DIGIT_SIZE);r.append("(392"),r.append(o),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(dn.HEADER_SIZE+Nn.GTIN_SIZE+dn.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}dn.HEADER_SIZE=8,dn.LAST_DIGIT_SIZE=2;class En extends Nn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<En.HEADER_SIZE+Nn.GTIN_SIZE)throw new oe;let r=new X;this.encodeCompressedGtin(r,En.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(En.HEADER_SIZE+Nn.GTIN_SIZE,En.LAST_DIGIT_SIZE);r.append("(393"),r.append(o),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(En.HEADER_SIZE+Nn.GTIN_SIZE+En.LAST_DIGIT_SIZE,En.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(En.HEADER_SIZE+Nn.GTIN_SIZE+En.LAST_DIGIT_SIZE+En.FIRST_THREE_DIGITS_SIZE,null);return r.append(h.getNewString()),r.toString()}}En.HEADER_SIZE=8,En.LAST_DIGIT_SIZE=2,En.FIRST_THREE_DIGITS_SIZE=10;class Z extends Fr{constructor(r,o,l){super(r),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Z.HEADER_SIZE+Z.GTIN_SIZE+Z.WEIGHT_SIZE+Z.DATE_SIZE)throw new oe;let r=new X;return this.encodeCompressedGtin(r,Z.HEADER_SIZE),this.encodeCompressedWeight(r,Z.HEADER_SIZE+Z.GTIN_SIZE,Z.WEIGHT_SIZE),this.encodeCompressedDate(r,Z.HEADER_SIZE+Z.GTIN_SIZE+Z.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Z.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let h=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),d/10==0&&r.append("0"),r.append(d),h/10==0&&r.append("0"),r.append(h)}addWeightCode(r,o){r.append("("),r.append(this.firstAIdigits),r.append(o/1e5),r.append(")")}checkWeight(r){return r%1e5}}Z.HEADER_SIZE=8,Z.WEIGHT_SIZE=20,Z.DATE_SIZE=16;function Ee(O){try{if(O.get(1))return new ti(O);if(!O.get(2))return new Ui(O);switch(wn.extractNumericValueFromBitArray(O,1,4)){case 4:return new _i(O);case 5:return new ks(O)}switch(wn.extractNumericValueFromBitArray(O,1,5)){case 12:return new dn(O);case 13:return new En(O)}switch(wn.extractNumericValueFromBitArray(O,1,7)){case 56:return new Z(O,"310","11");case 57:return new Z(O,"320","11");case 58:return new Z(O,"310","13");case 59:return new Z(O,"320","13");case 60:return new Z(O,"310","15");case 61:return new Z(O,"320","15");case 62:return new Z(O,"310","17");case 63:return new Z(O,"320","17")}}catch(r){throw console.log(r),new Ze("unknown decoder: "+O)}}class Ye{constructor(r,o,l,h){this.leftchar=r,this.rightchar=o,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,o){return r instanceof Ye?Ye.equalsOrNull(r.leftchar,o.leftchar)&&Ye.equalsOrNull(r.rightchar,o.rightchar)&&Ye.equalsOrNull(r.finderpattern,o.finderpattern):!1}static equalsOrNull(r,o){return r===null?o===null:Ye.equals(r,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ct{constructor(r,o,l){this.pairs=r,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,o){return r instanceof Ct?this.checkEqualitity(r,o)&&r.wasReversed===o.wasReversed:!1}checkEqualitity(r,o){if(!r||!o)return;let l;return r.forEach((h,d)=>{o.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class me extends Vn{constructor(r){super(...arguments),this.pairs=new Array(me.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,o,l){this.pairs.length=0,this.startFromEven=!1;try{return me.constructResult(this.decodeRow2pairs(r,o))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,me.constructResult(this.decodeRow2pairs(r,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,r))}catch(d){if(d instanceof oe){if(!this.pairs.length)throw new oe;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(r,!1),h){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new oe}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),o}checkRows(r,o){for(let l=o;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!me.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(h);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new oe}static isValidSequence(r){for(let o of me.FINDER_PATTERN_SEQUENCES){if(r.length>o.length)continue;let l=!0;for(let h=0;h<r.length;h++)if(r[h].getFinderPattern().getValue()!=o[h]){l=!1;break}if(l)return!0}return!1}storeRow(r,o){let l=0,h=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){d=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}d||h||me.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Ct(this.pairs,r,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,o){for(let l of o)if(l.getPairs().length!==r.length){for(let h of l.getPairs())for(let d of r)if(Ye.equals(h,d))break}}static isPartialRow(r,o){for(let l of o){let h=!0;for(let d of r){let m=!1;for(let p of l.getPairs())if(d.equals(p)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(r){let o=Pa.buildBitArray(r),h=Ee(o).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],m[0],m[1]];return new ze(h,null,null,p,Re.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),o=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let v=this.pairs.get(p);h+=v.getLeftChar().getChecksumPortion(),d++;let T=v.getRightChar();T!=null&&(h+=T.getChecksumPortion(),d++)}return h%=211,211*(d-4)+h==o.getValue()}static getNextSecondBar(r,o){let l;return r.get(o)?(l=r.getNextUnset(o),l=r.getNextSet(l)):(l=r.getNextSet(o),l=r.getNextUnset(l)),l}retrieveNextPair(r,o,l){let h=o.length%2==0;this.startFromEven&&(h=!h);let d,m=!0,p=-1;do this.findNextPair(r,o,p),d=this.parseFoundFinderPattern(r,l,h),d==null?p=me.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let v=this.decodeDataCharacter(r,d,h,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new oe;let T;try{T=this.decodeDataCharacter(r,d,h,!1)}catch(N){T=null,this.verbose&&console.log(N)}return new Ye(v,T,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,o,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let p=o.length%2!=0;this.startFromEven&&(p=!p);let v=!1;for(;m<d&&(v=!r.get(m),!!v);)m++;let T=0,N=m;for(let L=m;L<d;L++)if(r.get(L)!=v)h[T]++;else{if(T==3){if(p&&me.reverseCounters(h),me.isFinderPattern(h)){this.startEnd[0]=N,this.startEnd[1]=L;return}p&&me.reverseCounters(h),N+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,T--}else T++;h[T]=1,v=!v}throw new oe}static reverseCounters(r){let o=r.length;for(let l=0;l<o/2;++l){let h=r[l];r[l]=r[o-l-1],r[o-l-1]=h}}parseFoundFinderPattern(r,o,l){let h,d,m;if(l){let T=this.startEnd[0]-1;for(;T>=0&&!r.get(T);)T--;T++,h=this.startEnd[0]-T,d=T,m=this.startEnd[1]}else d=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let p=this.getDecodeFinderCounters();ee.arraycopy(p,0,p,1,p.length-1),p[0]=h;let v;try{v=this.parseFinderValue(p,me.FINDER_PATTERNS)}catch{return null}return new ji(v,[d,m],d,m,o)}decodeDataCharacter(r,o,l,h){let d=this.getDataCharacterCounters();for(let pn=0;pn<d.length;pn++)d[pn]=0;if(h)me.recordPatternInReverse(r,o.getStartEnd()[0],d);else{me.recordPattern(r,o.getStartEnd()[1],d);for(let pn=0,vr=d.length-1;pn<vr;pn++,vr--){let di=d[pn];d[pn]=d[vr],d[vr]=di}}let m=17,p=mt.sum(new Int32Array(d))/m,v=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(p-v)/v>.3)throw new oe;let T=this.getOddCounts(),N=this.getEvenCounts(),L=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let pn=0;pn<d.length;pn++){let vr=1*d[pn]/p,di=vr+.5;if(di<1){if(vr<.3)throw new oe;di=1}else if(di>8){if(vr>8.7)throw new oe;di=8}let sa=pn/2;pn&1?(N[sa]=di,B[sa]=vr-di):(T[sa]=di,L[sa]=vr-di)}this.adjustOddEvenCounts(m);let q=4*o.getValue()+(l?0:2)+(h?0:1)-1,ne=0,re=0;for(let pn=T.length-1;pn>=0;pn--){if(me.isNotA1left(o,l,h)){let vr=me.WEIGHTS[q][2*pn];re+=T[pn]*vr}ne+=T[pn]}let he=0;for(let pn=N.length-1;pn>=0;pn--)if(me.isNotA1left(o,l,h)){let vr=me.WEIGHTS[q][2*pn+1];he+=N[pn]*vr}let we=re+he;if(ne&1||ne>13||ne<4)throw new oe;let je=(13-ne)/2,Ve=me.SYMBOL_WIDEST[je],De=9-Ve,jt=tn.getRSSvalue(T,Ve,!0),wt=tn.getRSSvalue(N,De,!1),Gr=me.EVEN_TOTAL_SUBSET[je],Di=me.GSUM[je],qr=jt*Gr+wt+Di;return new Vr(qr,we)}static isNotA1left(r,o,l){return!(r.getValue()==0&&o&&l)}adjustOddEvenCounts(r){let o=mt.sum(new Int32Array(this.getOddCounts())),l=mt.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1;o>13?d=!0:o<4&&(h=!0);let m=!1,p=!1;l>13?p=!0:l<4&&(m=!0);let v=o+l-r,T=(o&1)==1,N=(l&1)==0;if(v==1)if(T){if(N)throw new oe;d=!0}else{if(!N)throw new oe;p=!0}else if(v==-1)if(T){if(N)throw new oe;h=!0}else{if(!N)throw new oe;m=!0}else if(v==0){if(T){if(!N)throw new oe;o<l?(h=!0,p=!0):(d=!0,m=!0)}else if(N)throw new oe}else throw new oe;if(h){if(d)throw new oe;me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new oe;me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}me.SYMBOL_WIDEST=[7,5,4,3,1],me.EVEN_TOTAL_SUBSET=[4,20,52,104,204],me.GSUM=[0,348,1388,2948,3988],me.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],me.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],me.FINDER_PAT_A=0,me.FINDER_PAT_B=1,me.FINDER_PAT_C=2,me.FINDER_PAT_D=3,me.FINDER_PAT_E=4,me.FINDER_PAT_F=5,me.FINDER_PATTERN_SEQUENCES=[[me.FINDER_PAT_A,me.FINDER_PAT_A],[me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B],[me.FINDER_PAT_A,me.FINDER_PAT_C,me.FINDER_PAT_B,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_C],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F]],me.MAX_PAIRS=11;class bt extends Vr{constructor(r,o,l){super(r,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ft extends Vn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,o,l){const h=this.decodePair(o,!1,r,l);Ft.addOrTally(this.possibleLeftPairs,h),o.reverse();let d=this.decodePair(o,!0,r,l);Ft.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Ft.checkChecksum(m,p))return Ft.constructResult(m,p)}throw new oe}static addOrTally(r,o){if(o==null)return;let l=!1;for(let h of r)if(h.getValue()===o.getValue()){h.incrementCount(),l=!0;break}l||r.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,o){let l=4537077*r.getValue()+o.getValue(),h=new String(l).toString(),d=new X;for(let T=13-h.length;T>0;T--)d.append("0");d.append(h);let m=0;for(let T=0;T<13;T++){let N=d.charAt(T).charCodeAt(0)-48;m+=T&1?N:3*N}m=10-m%10,m===10&&(m=0),d.append(m.toString());let p=r.getFinderPattern().getResultPoints(),v=o.getFinderPattern().getResultPoints();return new ze(d.toString(),null,0,[p[0],p[1],v[0],v[1]],Re.RSS_14,new Date().getTime())}static checkChecksum(r,o){let l=(r.getChecksumPortion()+16*o.getChecksumPortion())%79,h=9*r.getFinderPattern().getValue()+o.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(r,o,l,h){try{let d=this.findFinderPattern(r,o),m=this.parseFoundFinderPattern(r,l,o,d),p=h==null?null:h.get(ke.NEED_RESULT_POINT_CALLBACK);if(p!=null){let N=(d[0]+d[1])/2;o&&(N=r.getSize()-1-N),p.foundPossibleResultPoint(new Ge(N,l))}let v=this.decodeDataCharacter(r,m,!0),T=this.decodeDataCharacter(r,m,!1);return new bt(1597*v.getValue()+T.getValue(),v.getChecksumPortion()+4*T.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,o,l){let h=this.getDataCharacterCounters();for(let he=0;he<h.length;he++)h[he]=0;if(l)un.recordPatternInReverse(r,o.getStartEnd()[0],h);else{un.recordPattern(r,o.getStartEnd()[1]+1,h);for(let he=0,we=h.length-1;he<we;he++,we--){let je=h[he];h[he]=h[we],h[we]=je}}let d=l?16:15,m=mt.sum(new Int32Array(h))/d,p=this.getOddCounts(),v=this.getEvenCounts(),T=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let he=0;he<h.length;he++){let we=h[he]/m,je=Math.floor(we+.5);je<1?je=1:je>8&&(je=8);let Ve=Math.floor(he/2);he&1?(v[Ve]=je,N[Ve]=we-je):(p[Ve]=je,T[Ve]=we-je)}this.adjustOddEvenCounts(l,d);let L=0,B=0;for(let he=p.length-1;he>=0;he--)B*=9,B+=p[he],L+=p[he];let q=0,ne=0;for(let he=v.length-1;he>=0;he--)q*=9,q+=v[he],ne+=v[he];let re=B+3*q;if(l){if(L&1||L>12||L<4)throw new oe;let he=(12-L)/2,we=Ft.OUTSIDE_ODD_WIDEST[he],je=9-we,Ve=tn.getRSSvalue(p,we,!1),De=tn.getRSSvalue(v,je,!0),jt=Ft.OUTSIDE_EVEN_TOTAL_SUBSET[he],wt=Ft.OUTSIDE_GSUM[he];return new Vr(Ve*jt+De+wt,re)}else{if(ne&1||ne>10||ne<4)throw new oe;let he=(10-ne)/2,we=Ft.INSIDE_ODD_WIDEST[he],je=9-we,Ve=tn.getRSSvalue(p,we,!0),De=tn.getRSSvalue(v,je,!1),jt=Ft.INSIDE_ODD_TOTAL_SUBSET[he],wt=Ft.INSIDE_GSUM[he];return new Vr(De*jt+Ve+wt,re)}}findFinderPattern(r,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=r.getSize(),d=!1,m=0;for(;m<h&&(d=!r.get(m),o!==d);)m++;let p=0,v=m;for(let T=m;T<h;T++)if(r.get(T)!==d)l[p]++;else{if(p===3){if(Vn.isFinderPattern(l))return[v,T];v+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new oe}parseFoundFinderPattern(r,o,l,h){let d=r.get(h[0]),m=h[0]-1;for(;m>=0&&d!==r.get(m);)m--;m++;const p=h[0]-m,v=this.getDecodeFinderCounters(),T=new Int32Array(v.length);ee.arraycopy(v,0,T,1,v.length-1),T[0]=p;const N=this.parseFinderValue(T,Ft.FINDER_PATTERNS);let L=m,B=h[1];return l&&(L=r.getSize()-1-L,B=r.getSize()-1-B),new ji(N,[m,h[1]],L,B,o)}adjustOddEvenCounts(r,o){let l=mt.sum(new Int32Array(this.getOddCounts())),h=mt.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,p=!1,v=!1;r?(l>12?m=!0:l<4&&(d=!0),h>12?v=!0:h<4&&(p=!0)):(l>11?m=!0:l<5&&(d=!0),h>10?v=!0:h<4&&(p=!0));let T=l+h-o,N=(l&1)===(r?1:0),L=(h&1)===1;if(T===1)if(N){if(L)throw new oe;m=!0}else{if(!L)throw new oe;v=!0}else if(T===-1)if(N){if(L)throw new oe;d=!0}else{if(!L)throw new oe;p=!0}else if(T===0){if(N){if(!L)throw new oe;l<h?(d=!0,v=!0):(m=!0,p=!0)}else if(L)throw new oe}else throw new oe;if(d){if(m)throw new oe;Vn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Vn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(v)throw new oe;Vn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&Vn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ft.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ft.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ft.OUTSIDE_GSUM=[0,161,961,2015,2715],Ft.INSIDE_GSUM=[0,336,1036,1516],Ft.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ft.INSIDE_ODD_WIDEST=[2,4,6,8],Ft.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class dr extends un{constructor(r,o){super(),this.readers=[],this.verbose=o===!0;const l=r?r.get(ke.POSSIBLE_FORMATS):null,h=r&&r.get(ke.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Re.EAN_13)||l.includes(Re.UPC_A)||l.includes(Re.EAN_8)||l.includes(Re.UPC_E))&&this.readers.push(new es(r)),l.includes(Re.CODE_39)&&this.readers.push(new Cn(h)),l.includes(Re.CODE_128)&&this.readers.push(new Le),l.includes(Re.ITF)&&this.readers.push(new Ot),l.includes(Re.RSS_14)&&this.readers.push(new Ft),l.includes(Re.RSS_EXPANDED)&&this.readers.push(new me(this.verbose))):(this.readers.push(new es(r)),this.readers.push(new Cn),this.readers.push(new es(r)),this.readers.push(new Le),this.readers.push(new Ot),this.readers.push(new Ft),this.readers.push(new me(this.verbose)))}decodeRow(r,o,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(r,o,l)}catch{}throw new oe}reset(){this.readers.forEach(r=>r.reset())}}class yc extends He{constructor(r=500,o){super(new dr(o),r,o)}}class qt{constructor(r,o,l){this.ecCodewords=r,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class zt{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Bt{constructor(r,o,l,h,d,m){this.versionNumber=r,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=d,this.ecBlocks=m;let p=0;const v=m.getECCodewords(),T=m.getECBlocks();for(let N of T)p+=N.getCount()*(N.getDataCodewords()+v);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,o){if(r&1||o&1)throw new z;for(let l of Bt.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===o)return l;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new Bt(1,10,10,8,8,new qt(5,new zt(1,3))),new Bt(2,12,12,10,10,new qt(7,new zt(1,5))),new Bt(3,14,14,12,12,new qt(10,new zt(1,8))),new Bt(4,16,16,14,14,new qt(12,new zt(1,12))),new Bt(5,18,18,16,16,new qt(14,new zt(1,18))),new Bt(6,20,20,18,18,new qt(18,new zt(1,22))),new Bt(7,22,22,20,20,new qt(20,new zt(1,30))),new Bt(8,24,24,22,22,new qt(24,new zt(1,36))),new Bt(9,26,26,24,24,new qt(28,new zt(1,44))),new Bt(10,32,32,14,14,new qt(36,new zt(1,62))),new Bt(11,36,36,16,16,new qt(42,new zt(1,86))),new Bt(12,40,40,18,18,new qt(48,new zt(1,114))),new Bt(13,44,44,20,20,new qt(56,new zt(1,144))),new Bt(14,48,48,22,22,new qt(68,new zt(1,174))),new Bt(15,52,52,24,24,new qt(42,new zt(2,102))),new Bt(16,64,64,14,14,new qt(56,new zt(2,140))),new Bt(17,72,72,16,16,new qt(36,new zt(4,92))),new Bt(18,80,80,18,18,new qt(48,new zt(4,114))),new Bt(19,88,88,20,20,new qt(56,new zt(4,144))),new Bt(20,96,96,22,22,new qt(68,new zt(4,174))),new Bt(21,104,104,24,24,new qt(56,new zt(6,136))),new Bt(22,120,120,18,18,new qt(68,new zt(6,175))),new Bt(23,132,132,20,20,new qt(62,new zt(8,163))),new Bt(24,144,144,22,22,new qt(62,new zt(8,156),new zt(2,155))),new Bt(25,8,18,6,16,new qt(7,new zt(1,5))),new Bt(26,8,32,6,14,new qt(11,new zt(1,10))),new Bt(27,12,26,10,24,new qt(14,new zt(1,16))),new Bt(28,12,36,10,16,new qt(18,new zt(1,22))),new Bt(29,16,36,14,16,new qt(24,new zt(1,32))),new Bt(30,16,48,14,22,new qt(28,new zt(1,49)))]}}Bt.VERSIONS=Bt.buildVersions();class ts{constructor(r){const o=r.getHeight();if(o<8||o>144||o&1)throw new z;this.version=ts.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Oe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const o=r.getHeight(),l=r.getWidth();return Bt.getVersionForDimensions(o,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,h=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let p=!1,v=!1,T=!1,N=!1;do if(l===d&&h===0&&!p)r[o++]=this.readCorner1(d,m)&255,l-=2,h+=2,p=!0;else if(l===d-2&&h===0&&m&3&&!v)r[o++]=this.readCorner2(d,m)&255,l-=2,h+=2,v=!0;else if(l===d+4&&h===2&&!(m&7)&&!T)r[o++]=this.readCorner3(d,m)&255,l-=2,h+=2,T=!0;else if(l===d-2&&h===0&&(m&7)===4&&!N)r[o++]=this.readCorner4(d,m)&255,l-=2,h+=2,N=!0;else{do l<d&&h>=0&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l+=2,h-=2;while(l<d&&h>=0);l+=3,h+=1}while(l<d||h<m);if(o!==this.version.getTotalCodewords())throw new z;return r}readModule(r,o,l,h){return r<0&&(r+=l,o+=4-(l+4&7)),o<0&&(o+=h,r+=4-(h+4&7)),this.readMappingMatrix.set(o,r),this.mappingBitMatrix.get(o,r)}readUtah(r,o,l,h){let d=0;return this.readModule(r-2,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-2,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o,l,h)&&(d|=1),d<<=1,this.readModule(r,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r,o,l,h)&&(d|=1),d}readCorner1(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,1,r,o)&&(l|=1),l<<=1,this.readModule(r-1,2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}readCorner2(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-4,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner3(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-3,r,o)&&(l|=1),l<<=1,this.readModule(1,o-2,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner4(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}extractDataRegion(r){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==o)throw new R("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/h|0,p=l/d|0,v=m*h,T=p*d,N=new Oe(T,v);for(let L=0;L<m;++L){const B=L*h;for(let q=0;q<p;++q){const ne=q*d;for(let re=0;re<h;++re){const he=L*(h+2)+1+re,we=B+re;for(let je=0;je<d;++je){const Ve=q*(d+2)+1+je;if(r.get(Ve,he)){const De=ne+je;N.set(De,we)}}}}}return N}}class ns{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o){const l=o.getECBlocks();let h=0;const d=l.getECBlocks();for(let re of d)h+=re.getCount();const m=new Array(h);let p=0;for(let re of d)for(let he=0;he<re.getCount();he++){const we=re.getDataCodewords(),je=l.getECCodewords()+we;m[p++]=new ns(we,new Uint8Array(je))}const T=m[0].codewords.length-l.getECCodewords(),N=T-1;let L=0;for(let re=0;re<N;re++)for(let he=0;he<p;he++)m[he].codewords[re]=r[L++];const B=o.getVersionNumber()===24,q=B?8:p;for(let re=0;re<q;re++)m[re].codewords[T-1]=r[L++];const ne=m[0].codewords.length;for(let re=T;re<ne;re++)for(let he=0;he<p;he++){const we=B?(he+8)%p:he,je=B&&we>7?re-1:re;m[we].codewords[je]=r[L++]}if(L!==r.length)throw new R;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ni{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new R(""+r);let o=0,l=this.bitOffset,h=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,p=r<m?r:m,v=m-p,T=255>>8-p<<v;o=(d[h]&T)>>v,r-=p,l+=p,l===8&&(l=0,h++)}if(r>0){for(;r>=8;)o=o<<8|d[h]&255,h++,r-=8;if(r>0){const m=8-r,p=255>>m<<m;o=o<<r|(d[h]&p)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=h,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Zt;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(Zt||(Zt={}));class Vi{static decode(r){const o=new ni(r),l=new X,h=new X,d=new Array;let m=Zt.ASCII_ENCODE;do if(m===Zt.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,h);else{switch(m){case Zt.C40_ENCODE:this.decodeC40Segment(o,l);break;case Zt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Zt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Zt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Zt.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new z}m=Zt.ASCII_ENCODE}while(m!==Zt.PAD_ENCODE&&o.available()>0);return h.length()>0&&l.append(h.toString()),new nt(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,o,l){let h=!1;do{let d=r.readBits(8);if(d===0)throw new z;if(d<=128)return h&&(d+=128),o.append(String.fromCharCode(d-1)),Zt.ASCII_ENCODE;if(d===129)return Zt.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return Zt.C40_ENCODE;case 231:return Zt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Zt.ANSIX12_ENCODE;case 239:return Zt.TEXT_ENCODE;case 240:return Zt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new z;break}}while(r.available()>0);return Zt.ASCII_ENCODE}static decodeC40Segment(r,o){let l=!1;const h=[];let d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const v=h[p];switch(d){case 0:if(v<3)d=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else throw new z;break;case 1:l?(o.append(String.fromCharCode(v+128)),l=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else switch(v){case 27:o.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:l?(o.append(String.fromCharCode(v+224)),l=!1):o.append(String.fromCharCode(v+96)),d=0;break;default:throw new z}}}while(r.available()>0)}static decodeTextSegment(r,o){let l=!1,h=[],d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let p=0;p<3;p++){const v=h[p];switch(d){case 0:if(v<3)d=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else throw new z;break;case 1:l?(o.append(String.fromCharCode(v+128)),l=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T)}else switch(v){case 27:o.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[v];l?(o.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):o.append(T),d=0}else throw new z;break;default:throw new z}}}while(r.available()>0)}static decodeAnsiX12Segment(r,o){const l=[];do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new z;break}}}while(r.available()>0)}static parseTwoBytes(r,o,l){let h=(r<<8)+o-1,d=Math.floor(h/1600);l[0]=d,h-=d*1600,d=Math.floor(h/40),l[1]=d,l[2]=h-d*40}static decodeEdifactSegment(r,o){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let h=r.readBits(6);if(h===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}h&32||(h|=64),o.append(String.fromCharCode(h))}}while(r.available()>0)}static decodeBase256Segment(r,o,l){let h=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),h++);let m;if(d===0?m=r.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(r.readBits(8),h++),m<0)throw new z;const p=new Uint8Array(m);for(let v=0;v<m;v++){if(r.available()<8)throw new z;p[v]=this.unrandomize255State(r.readBits(8),h++)}l.push(p);try{o.append(K.decode(p,$.ISO88591))}catch(v){throw new Ze("Platform does not support required encoding: "+v.message)}}static unrandomize255State(r,o){const l=149*o%255+1,h=r-l;return h>=0?h:h+256}}Vi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Vi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Vi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Vi.TEXT_SHIFT2_SET_CHARS=Vi.C40_SHIFT2_SET_CHARS,Vi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class wc{constructor(){this.rsDecoder=new st(xt.DATA_MATRIX_FIELD_256)}decode(r){const o=new ts(r),l=o.getVersion(),h=o.readCodewords(),d=ns.getDataBlocks(h,l);let m=0;for(let T of d)m+=T.getNumDataCodewords();const p=new Uint8Array(m),v=d.length;for(let T=0;T<v;T++){const N=d[T],L=N.getCodewords(),B=N.getNumDataCodewords();this.correctErrors(L,B);for(let q=0;q<B;q++)p[q*v+T]=L[q]}return Vi.decode(p)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new F}for(let h=0;h<o;h++)r[h]=l[h]}}class gn{constructor(r){this.image=r,this.rectangleDetector=new It(this.image)}detect(){const r=this.rectangleDetector.detect();let o=this.detectSolid1(r);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new oe;o=this.shiftToModuleCenter(o);const l=o[0],h=o[1],d=o[2],m=o[3];let p=this.transitionsBetween(l,m)+1,v=this.transitionsBetween(d,m)+1;(p&1)===1&&(p+=1),(v&1)===1&&(v+=1),4*p<7*v&&4*v<7*p&&(p=v=Math.max(p,v));let T=gn.sampleGrid(this.image,l,h,d,m,p,v);return new fr(T,[l,h,d,m])}static shiftPoint(r,o,l){let h=(o.getX()-r.getX())/(l+1),d=(o.getY()-r.getY())/(l+1);return new Ge(r.getX()+h,r.getY()+d)}static moveAway(r,o,l){let h=r.getX(),d=r.getY();return h<o?h-=1:h+=1,d<l?d-=1:d+=1,new Ge(h,d)}detectSolid1(r){let o=r[0],l=r[1],h=r[3],d=r[2],m=this.transitionsBetween(o,l),p=this.transitionsBetween(l,h),v=this.transitionsBetween(h,d),T=this.transitionsBetween(d,o),N=m,L=[d,o,l,h];return N>p&&(N=p,L[0]=o,L[1]=l,L[2]=h,L[3]=d),N>v&&(N=v,L[0]=l,L[1]=h,L[2]=d,L[3]=o),N>T&&(L[0]=h,L[1]=d,L[2]=o,L[3]=l),L}detectSolid2(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),p=gn.shiftPoint(l,h,(m+1)*4),v=gn.shiftPoint(h,l,(m+1)*4),T=this.transitionsBetween(p,o),N=this.transitionsBetween(v,d);return T<N?(r[0]=o,r[1]=l,r[2]=h,r[3]=d):(r[0]=l,r[1]=h,r[2]=d,r[3]=o),r}correctTopRight(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),p=this.transitionsBetween(l,d),v=gn.shiftPoint(o,l,(p+1)*4),T=gn.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(v,d),p=this.transitionsBetween(T,d);let N=new Ge(d.getX()+(h.getX()-l.getX())/(m+1),d.getY()+(h.getY()-l.getY())/(m+1)),L=new Ge(d.getX()+(o.getX()-l.getX())/(p+1),d.getY()+(o.getY()-l.getY())/(p+1));if(!this.isValid(N))return this.isValid(L)?L:null;if(!this.isValid(L))return N;let B=this.transitionsBetween(v,N)+this.transitionsBetween(T,N),q=this.transitionsBetween(v,L)+this.transitionsBetween(T,L);return B>q?N:L}shiftToModuleCenter(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d)+1,p=this.transitionsBetween(h,d)+1,v=gn.shiftPoint(o,l,p*4),T=gn.shiftPoint(h,l,m*4);m=this.transitionsBetween(v,d)+1,p=this.transitionsBetween(T,d)+1,(m&1)===1&&(m+=1),(p&1)===1&&(p+=1);let N=(o.getX()+l.getX()+h.getX()+d.getX())/4,L=(o.getY()+l.getY()+h.getY()+d.getY())/4;o=gn.moveAway(o,N,L),l=gn.moveAway(l,N,L),h=gn.moveAway(h,N,L),d=gn.moveAway(d,N,L);let B,q;return v=gn.shiftPoint(o,l,p*4),v=gn.shiftPoint(v,d,m*4),B=gn.shiftPoint(l,o,p*4),B=gn.shiftPoint(B,h,m*4),T=gn.shiftPoint(h,d,p*4),T=gn.shiftPoint(T,l,m*4),q=gn.shiftPoint(d,h,p*4),q=gn.shiftPoint(q,o,m*4),[v,B,T,q]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,o,l,h,d,m,p){return Ln.getInstance().sampleGrid(r,m,p,.5,.5,m-.5,.5,m-.5,p-.5,.5,p-.5,o.getX(),o.getY(),d.getX(),d.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(r,o){let l=Math.trunc(r.getX()),h=Math.trunc(r.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),p=Math.abs(m-h)>Math.abs(d-l);if(p){let re=l;l=h,h=re,re=d,d=m,m=re}let v=Math.abs(d-l),T=Math.abs(m-h),N=-v/2,L=h<m?1:-1,B=l<d?1:-1,q=0,ne=this.image.get(p?h:l,p?l:h);for(let re=l,he=h;re!==d;re+=B){let we=this.image.get(p?he:re,p?re:he);if(we!==ne&&(q++,ne=we),N+=T,N>0){if(he===m)break;he+=L,N-=v}}return q}}class vi{constructor(){this.decoder=new wc}decode(r,o=null){let l,h;if(o!=null&&o.has(ke.PURE_BARCODE)){const T=vi.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(T),h=vi.NO_POINTS}else{const T=new gn(r.getBlackMatrix()).detect();l=this.decoder.decode(T.getBits()),h=T.getPoints()}const d=l.getRawBytes(),m=new ze(l.getText(),d,8*d.length,h,Re.DATA_MATRIX,ee.currentTimeMillis()),p=l.getByteSegments();p!=null&&m.putMetadata(Fe.BYTE_SEGMENTS,p);const v=l.getECLevel();return v!=null&&m.putMetadata(Fe.ERROR_CORRECTION_LEVEL,v),m}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o==null||l==null)throw new oe;const h=this.moduleSize(o,r);let d=o[1];const m=l[1];let p=o[0];const T=(l[0]-p+1)/h,N=(m-d+1)/h;if(T<=0||N<=0)throw new oe;const L=h/2;d+=L,p+=L;const B=new Oe(T,N);for(let q=0;q<N;q++){const ne=d+q*h;for(let re=0;re<T;re++)r.get(p+re*h,ne)&&B.set(re,q)}return B}static moduleSize(r,o){const l=o.getWidth();let h=r[0];const d=r[1];for(;h<l&&o.get(h,d);)h++;if(h===l)throw new oe;const m=h-r[0];if(m===0)throw new oe;return m}}vi.NO_POINTS=[];class Ba extends He{constructor(r=500){super(new vi,r)}}var ri;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(ri||(ri={}));class vt{constructor(r,o,l){this.value=r,this.stringValue=o,this.bits=l,vt.FOR_BITS.set(l,this),vt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return vt.L;case"M":return vt.M;case"Q":return vt.Q;case"H":return vt.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof vt))return!1;const o=r;return this.value===o.value}static forBits(r){if(r<0||r>=vt.FOR_BITS.size)throw new R;return vt.FOR_BITS.get(r)}}vt.FOR_BITS=new Map,vt.FOR_VALUE=new Map,vt.L=new vt(ri.L,"L",1),vt.M=new vt(ri.M,"M",0),vt.Q=new vt(ri.Q,"Q",3),vt.H=new vt(ri.H,"H",2);class Pn{constructor(r){this.errorCorrectionLevel=vt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,o){return ie.bitCount(r^o)}static decodeFormatInformation(r,o){const l=Pn.doDecodeFormatInformation(r,o);return l!==null?l:Pn.doDecodeFormatInformation(r^Pn.FORMAT_INFO_MASK_QR,o^Pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,o){let l=Number.MAX_SAFE_INTEGER,h=0;for(const d of Pn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===r||m===o)return new Pn(d[1]);let p=Pn.numBitsDiffering(r,m);p<l&&(h=d[1],l=p),r!==o&&(p=Pn.numBitsDiffering(o,m),p<l&&(h=d[1],l=p))}return l<=3?new Pn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Pn))return!1;const o=r;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Pn.FORMAT_INFO_MASK_QR=21522,Pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(r,...o){this.ecCodewordsPerBlock=r,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const o=this.ecBlocks;for(const l of o)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qe{constructor(r,o,...l){this.versionNumber=r,this.alignmentPatternCenters=o,this.ecBlocks=l;let h=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const p of m)h+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new z;try{return this.getVersionForNumber((r-17)/4)}catch{throw new z}}static getVersionForNumber(r){if(r<1||r>40)throw new R;return qe.VERSIONS[r-1]}static decodeVersionInformation(r){let o=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<qe.VERSION_DECODE_INFO.length;h++){const d=qe.VERSION_DECODE_INFO[h];if(d===r)return qe.getVersionForNumber(h+7);const m=Pn.numBitsDiffering(r,d);m<o&&(l=h+7,o=m)}return o<=3?qe.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),o=new Oe(r);o.setRegion(0,0,9,9),o.setRegion(r-8,0,8,9),o.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const d=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,r-17),o.setRegion(9,6,r-17,1),this.versionNumber>6&&(o.setRegion(r-11,0,3,6),o.setRegion(0,r-11,6,3)),o}toString(){return""+this.versionNumber}}qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),qe.VERSIONS=[new qe(1,new Int32Array(0),new ue(7,new H(1,19)),new ue(10,new H(1,16)),new ue(13,new H(1,13)),new ue(17,new H(1,9))),new qe(2,Int32Array.from([6,18]),new ue(10,new H(1,34)),new ue(16,new H(1,28)),new ue(22,new H(1,22)),new ue(28,new H(1,16))),new qe(3,Int32Array.from([6,22]),new ue(15,new H(1,55)),new ue(26,new H(1,44)),new ue(18,new H(2,17)),new ue(22,new H(2,13))),new qe(4,Int32Array.from([6,26]),new ue(20,new H(1,80)),new ue(18,new H(2,32)),new ue(26,new H(2,24)),new ue(16,new H(4,9))),new qe(5,Int32Array.from([6,30]),new ue(26,new H(1,108)),new ue(24,new H(2,43)),new ue(18,new H(2,15),new H(2,16)),new ue(22,new H(2,11),new H(2,12))),new qe(6,Int32Array.from([6,34]),new ue(18,new H(2,68)),new ue(16,new H(4,27)),new ue(24,new H(4,19)),new ue(28,new H(4,15))),new qe(7,Int32Array.from([6,22,38]),new ue(20,new H(2,78)),new ue(18,new H(4,31)),new ue(18,new H(2,14),new H(4,15)),new ue(26,new H(4,13),new H(1,14))),new qe(8,Int32Array.from([6,24,42]),new ue(24,new H(2,97)),new ue(22,new H(2,38),new H(2,39)),new ue(22,new H(4,18),new H(2,19)),new ue(26,new H(4,14),new H(2,15))),new qe(9,Int32Array.from([6,26,46]),new ue(30,new H(2,116)),new ue(22,new H(3,36),new H(2,37)),new ue(20,new H(4,16),new H(4,17)),new ue(24,new H(4,12),new H(4,13))),new qe(10,Int32Array.from([6,28,50]),new ue(18,new H(2,68),new H(2,69)),new ue(26,new H(4,43),new H(1,44)),new ue(24,new H(6,19),new H(2,20)),new ue(28,new H(6,15),new H(2,16))),new qe(11,Int32Array.from([6,30,54]),new ue(20,new H(4,81)),new ue(30,new H(1,50),new H(4,51)),new ue(28,new H(4,22),new H(4,23)),new ue(24,new H(3,12),new H(8,13))),new qe(12,Int32Array.from([6,32,58]),new ue(24,new H(2,92),new H(2,93)),new ue(22,new H(6,36),new H(2,37)),new ue(26,new H(4,20),new H(6,21)),new ue(28,new H(7,14),new H(4,15))),new qe(13,Int32Array.from([6,34,62]),new ue(26,new H(4,107)),new ue(22,new H(8,37),new H(1,38)),new ue(24,new H(8,20),new H(4,21)),new ue(22,new H(12,11),new H(4,12))),new qe(14,Int32Array.from([6,26,46,66]),new ue(30,new H(3,115),new H(1,116)),new ue(24,new H(4,40),new H(5,41)),new ue(20,new H(11,16),new H(5,17)),new ue(24,new H(11,12),new H(5,13))),new qe(15,Int32Array.from([6,26,48,70]),new ue(22,new H(5,87),new H(1,88)),new ue(24,new H(5,41),new H(5,42)),new ue(30,new H(5,24),new H(7,25)),new ue(24,new H(11,12),new H(7,13))),new qe(16,Int32Array.from([6,26,50,74]),new ue(24,new H(5,98),new H(1,99)),new ue(28,new H(7,45),new H(3,46)),new ue(24,new H(15,19),new H(2,20)),new ue(30,new H(3,15),new H(13,16))),new qe(17,Int32Array.from([6,30,54,78]),new ue(28,new H(1,107),new H(5,108)),new ue(28,new H(10,46),new H(1,47)),new ue(28,new H(1,22),new H(15,23)),new ue(28,new H(2,14),new H(17,15))),new qe(18,Int32Array.from([6,30,56,82]),new ue(30,new H(5,120),new H(1,121)),new ue(26,new H(9,43),new H(4,44)),new ue(28,new H(17,22),new H(1,23)),new ue(28,new H(2,14),new H(19,15))),new qe(19,Int32Array.from([6,30,58,86]),new ue(28,new H(3,113),new H(4,114)),new ue(26,new H(3,44),new H(11,45)),new ue(26,new H(17,21),new H(4,22)),new ue(26,new H(9,13),new H(16,14))),new qe(20,Int32Array.from([6,34,62,90]),new ue(28,new H(3,107),new H(5,108)),new ue(26,new H(3,41),new H(13,42)),new ue(30,new H(15,24),new H(5,25)),new ue(28,new H(15,15),new H(10,16))),new qe(21,Int32Array.from([6,28,50,72,94]),new ue(28,new H(4,116),new H(4,117)),new ue(26,new H(17,42)),new ue(28,new H(17,22),new H(6,23)),new ue(30,new H(19,16),new H(6,17))),new qe(22,Int32Array.from([6,26,50,74,98]),new ue(28,new H(2,111),new H(7,112)),new ue(28,new H(17,46)),new ue(30,new H(7,24),new H(16,25)),new ue(24,new H(34,13))),new qe(23,Int32Array.from([6,30,54,78,102]),new ue(30,new H(4,121),new H(5,122)),new ue(28,new H(4,47),new H(14,48)),new ue(30,new H(11,24),new H(14,25)),new ue(30,new H(16,15),new H(14,16))),new qe(24,Int32Array.from([6,28,54,80,106]),new ue(30,new H(6,117),new H(4,118)),new ue(28,new H(6,45),new H(14,46)),new ue(30,new H(11,24),new H(16,25)),new ue(30,new H(30,16),new H(2,17))),new qe(25,Int32Array.from([6,32,58,84,110]),new ue(26,new H(8,106),new H(4,107)),new ue(28,new H(8,47),new H(13,48)),new ue(30,new H(7,24),new H(22,25)),new ue(30,new H(22,15),new H(13,16))),new qe(26,Int32Array.from([6,30,58,86,114]),new ue(28,new H(10,114),new H(2,115)),new ue(28,new H(19,46),new H(4,47)),new ue(28,new H(28,22),new H(6,23)),new ue(30,new H(33,16),new H(4,17))),new qe(27,Int32Array.from([6,34,62,90,118]),new ue(30,new H(8,122),new H(4,123)),new ue(28,new H(22,45),new H(3,46)),new ue(30,new H(8,23),new H(26,24)),new ue(30,new H(12,15),new H(28,16))),new qe(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new H(3,117),new H(10,118)),new ue(28,new H(3,45),new H(23,46)),new ue(30,new H(4,24),new H(31,25)),new ue(30,new H(11,15),new H(31,16))),new qe(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new H(7,116),new H(7,117)),new ue(28,new H(21,45),new H(7,46)),new ue(30,new H(1,23),new H(37,24)),new ue(30,new H(19,15),new H(26,16))),new qe(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new H(5,115),new H(10,116)),new ue(28,new H(19,47),new H(10,48)),new ue(30,new H(15,24),new H(25,25)),new ue(30,new H(23,15),new H(25,16))),new qe(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new H(13,115),new H(3,116)),new ue(28,new H(2,46),new H(29,47)),new ue(30,new H(42,24),new H(1,25)),new ue(30,new H(23,15),new H(28,16))),new qe(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new H(17,115)),new ue(28,new H(10,46),new H(23,47)),new ue(30,new H(10,24),new H(35,25)),new ue(30,new H(19,15),new H(35,16))),new qe(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new H(17,115),new H(1,116)),new ue(28,new H(14,46),new H(21,47)),new ue(30,new H(29,24),new H(19,25)),new ue(30,new H(11,15),new H(46,16))),new qe(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new H(13,115),new H(6,116)),new ue(28,new H(14,46),new H(23,47)),new ue(30,new H(44,24),new H(7,25)),new ue(30,new H(59,16),new H(1,17))),new qe(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new H(12,121),new H(7,122)),new ue(28,new H(12,47),new H(26,48)),new ue(30,new H(39,24),new H(14,25)),new ue(30,new H(22,15),new H(41,16))),new qe(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new H(6,121),new H(14,122)),new ue(28,new H(6,47),new H(34,48)),new ue(30,new H(46,24),new H(10,25)),new ue(30,new H(2,15),new H(64,16))),new qe(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new H(17,122),new H(4,123)),new ue(28,new H(29,46),new H(14,47)),new ue(30,new H(49,24),new H(10,25)),new ue(30,new H(24,15),new H(46,16))),new qe(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new H(4,122),new H(18,123)),new ue(28,new H(13,46),new H(32,47)),new ue(30,new H(48,24),new H(14,25)),new ue(30,new H(42,15),new H(32,16))),new qe(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new H(20,117),new H(4,118)),new ue(28,new H(40,47),new H(7,48)),new ue(30,new H(43,24),new H(22,25)),new ue(30,new H(10,15),new H(67,16))),new qe(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new H(19,118),new H(6,119)),new ue(28,new H(18,47),new H(31,48)),new ue(30,new H(34,24),new H(34,25)),new ue(30,new H(20,15),new H(61,16)))];var Rn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class or{constructor(r,o){this.value=r,this.isMasked=o}unmaskBitMatrix(r,o){for(let l=0;l<o;l++)for(let h=0;h<o;h++)this.isMasked(l,h)&&r.flip(h,l)}}or.values=new Map([[Rn.DATA_MASK_000,new or(Rn.DATA_MASK_000,(O,r)=>(O+r&1)===0)],[Rn.DATA_MASK_001,new or(Rn.DATA_MASK_001,(O,r)=>(O&1)===0)],[Rn.DATA_MASK_010,new or(Rn.DATA_MASK_010,(O,r)=>r%3===0)],[Rn.DATA_MASK_011,new or(Rn.DATA_MASK_011,(O,r)=>(O+r)%3===0)],[Rn.DATA_MASK_100,new or(Rn.DATA_MASK_100,(O,r)=>(Math.floor(O/2)+Math.floor(r/3)&1)===0)],[Rn.DATA_MASK_101,new or(Rn.DATA_MASK_101,(O,r)=>O*r%6===0)],[Rn.DATA_MASK_110,new or(Rn.DATA_MASK_110,(O,r)=>O*r%6<3)],[Rn.DATA_MASK_111,new or(Rn.DATA_MASK_111,(O,r)=>(O+r+O*r%3&1)===0)]]);class bi{constructor(r){const o=r.getHeight();if(o<21||(o&3)!==1)throw new z;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const o=this.bitMatrix.getHeight();let l=0;const h=o-7;for(let d=o-1;d>=h;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Pn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),o=Math.floor((r-17)/4);if(o<=6)return qe.getVersionForNumber(o);let l=0;const h=r-11;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(p,m,l);let d=qe.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let p=r-9;p>=h;p--)l=this.copyBit(m,p,l);if(d=qe.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new z}copyBit(r,o,l){return(this.isMirror?this.bitMatrix.get(o,r):this.bitMatrix.get(r,o))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),o=this.readVersion(),l=or.values.get(r.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const d=o.buildFunctionPattern();let m=!0;const p=new Uint8Array(o.getTotalCodewords());let v=0,T=0,N=0;for(let L=h-1;L>0;L-=2){L===6&&L--;for(let B=0;B<h;B++){const q=m?h-1-B:B;for(let ne=0;ne<2;ne++)d.get(L-ne,q)||(N++,T<<=1,this.bitMatrix.get(L-ne,q)&&(T|=1),N===8&&(p[v++]=T,N=0,T=0))}m=!m}if(v!==o.getTotalCodewords())throw new z;return p}remask(){if(this.parsedFormatInfo===null)return;const r=or.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let o=0,l=r.getWidth();o<l;o++)for(let h=o+1,d=r.getHeight();h<d;h++)r.get(o,h)!==r.get(h,o)&&(r.flip(h,o),r.flip(o,h))}}class Ro{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o,l){if(r.length!==o.getTotalCodewords())throw new R;const h=o.getECBlocksForLevel(l);let d=0;const m=h.getECBlocks();for(const ne of m)d+=ne.getCount();const p=new Array(d);let v=0;for(const ne of m)for(let re=0;re<ne.getCount();re++){const he=ne.getDataCodewords(),we=h.getECCodewordsPerBlock()+he;p[v++]=new Ro(he,new Uint8Array(we))}const T=p[0].codewords.length;let N=p.length-1;for(;N>=0&&p[N].codewords.length!==T;)N--;N++;const L=T-h.getECCodewordsPerBlock();let B=0;for(let ne=0;ne<L;ne++)for(let re=0;re<v;re++)p[re].codewords[ne]=r[B++];for(let ne=N;ne<v;ne++)p[ne].codewords[L]=r[B++];const q=p[0].codewords.length;for(let ne=L;ne<q;ne++)for(let re=0;re<v;re++){const he=re<N?ne:ne+1;p[re].codewords[he]=r[B++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Rr;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(Rr||(Rr={}));class ct{constructor(r,o,l,h){this.value=r,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=h,ct.FOR_BITS.set(h,this),ct.FOR_VALUE.set(r,this)}static forBits(r){const o=ct.FOR_BITS.get(r);if(o===void 0)throw new R;return o}getCharacterCountBits(r){const o=r.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof ct))return!1;const o=r;return this.value===o.value}toString(){return this.stringValue}}ct.FOR_BITS=new Map,ct.FOR_VALUE=new Map,ct.TERMINATOR=new ct(Rr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ct.NUMERIC=new ct(Rr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ct.ALPHANUMERIC=new ct(Rr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ct.STRUCTURED_APPEND=new ct(Rr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ct.BYTE=new ct(Rr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ct.ECI=new ct(Rr.ECI,"ECI",Int32Array.from([0,0,0]),7),ct.KANJI=new ct(Rr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ct.FNC1_FIRST_POSITION=new ct(Rr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ct.FNC1_SECOND_POSITION=new ct(Rr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ct.HANZI=new ct(Rr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class mn{static decode(r,o,l,h){const d=new ni(r);let m=new X;const p=new Array;let v=-1,T=-1;try{let N=null,L=!1,B;do{if(d.available()<4)B=ct.TERMINATOR;else{const q=d.readBits(4);B=ct.forBits(q)}switch(B){case ct.TERMINATOR:break;case ct.FNC1_FIRST_POSITION:case ct.FNC1_SECOND_POSITION:L=!0;break;case ct.STRUCTURED_APPEND:if(d.available()<16)throw new z;v=d.readBits(8),T=d.readBits(8);break;case ct.ECI:const q=mn.parseECIValue(d);if(N=k.getCharacterSetECIByValue(q),N===null)throw new z;break;case ct.HANZI:const ne=d.readBits(4),re=d.readBits(B.getCharacterCountBits(o));ne===mn.GB2312_SUBSET&&mn.decodeHanziSegment(d,m,re);break;default:const he=d.readBits(B.getCharacterCountBits(o));switch(B){case ct.NUMERIC:mn.decodeNumericSegment(d,m,he);break;case ct.ALPHANUMERIC:mn.decodeAlphanumericSegment(d,m,he,L);break;case ct.BYTE:mn.decodeByteSegment(d,m,he,N,p,h);break;case ct.KANJI:mn.decodeKanjiSegment(d,m,he);break;default:throw new z}break}}while(B!==ct.TERMINATOR)}catch{throw new z}return new nt(r,m.toString(),p.length===0?null:p,l===null?null:l.toString(),v,T)}static decodeHanziSegment(r,o,l){if(l*13>r.available())throw new z;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/96<<8&4294967295|m%96;p<959?p+=41377:p+=42657,h[d]=p>>8&255,h[d+1]=p&255,d+=2,l--}try{o.append(K.decode(h,$.GB2312))}catch(m){throw new z(m)}}static decodeKanjiSegment(r,o,l){if(l*13>r.available())throw new z;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let p=m/192<<8&4294967295|m%192;p<7936?p+=33088:p+=49472,h[d]=p>>8,h[d+1]=p,d+=2,l--}try{o.append(K.decode(h,$.SHIFT_JIS))}catch(m){throw new z(m)}}static decodeByteSegment(r,o,l,h,d,m){if(8*l>r.available())throw new z;const p=new Uint8Array(l);for(let T=0;T<l;T++)p[T]=r.readBits(8);let v;h===null?v=$.guessEncoding(p,m):v=h.getName();try{o.append(K.decode(p,v))}catch(T){throw new z(T)}d.push(p)}static toAlphaNumericChar(r){if(r>=mn.ALPHANUMERIC_CHARS.length)throw new z;return mn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,o,l,h){const d=o.length();for(;l>1;){if(r.available()<11)throw new z;const m=r.readBits(11);o.append(mn.toAlphaNumericChar(Math.floor(m/45))),o.append(mn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new z;o.append(mn.toAlphaNumericChar(r.readBits(6)))}if(h)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(r,o,l){for(;l>=3;){if(r.available()<10)throw new z;const h=r.readBits(10);if(h>=1e3)throw new z;o.append(mn.toAlphaNumericChar(Math.floor(h/100))),o.append(mn.toAlphaNumericChar(Math.floor(h/10)%10)),o.append(mn.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(r.available()<7)throw new z;const h=r.readBits(7);if(h>=100)throw new z;o.append(mn.toAlphaNumericChar(Math.floor(h/10))),o.append(mn.toAlphaNumericChar(h%10))}else if(l===1){if(r.available()<4)throw new z;const h=r.readBits(4);if(h>=10)throw new z;o.append(mn.toAlphaNumericChar(h))}}static parseECIValue(r){const o=r.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const l=r.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=r.readBits(16);return(o&31)<<16&4294967295|l}throw new z}}mn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",mn.GB2312_SUBSET=1;class hl{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const o=r[0];r[0]=r[2],r[2]=o}}class Ec{constructor(){this.rsDecoder=new st(xt.QR_CODE_FIELD_256)}decodeBooleanArray(r,o){return this.decodeBitMatrix(Oe.parseFromBooleanArray(r),o)}decodeBitMatrix(r,o){const l=new bi(r);let h=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){h=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new hl(!0)),d}catch(d){throw h!==null?h:d}}decodeBitMatrixParser(r,o){const l=r.readVersion(),h=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),m=Ro.getDataBlocks(d,l,h);let p=0;for(const N of m)p+=N.getNumDataCodewords();const v=new Uint8Array(p);let T=0;for(const N of m){const L=N.getCodewords(),B=N.getNumDataCodewords();this.correctErrors(L,B);for(let q=0;q<B;q++)v[T++]=L[q]}return mn.decode(v,l,h,o)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new F}for(let h=0;h<o;h++)r[h]=l[h]}}class Ai extends Ge{constructor(r,o,l){super(r,o),this.estimatedModuleSize=l}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=(this.getX()+o)/2,d=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new Ai(h,d,m)}}class zr{constructor(r,o,l,h,d,m,p){this.image=r,this.startX=o,this.startY=l,this.width=h,this.height=d,this.moduleSize=m,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,o=this.height,l=this.width,h=r+l,d=this.startY+o/2,m=new Int32Array(3),p=this.image;for(let v=0;v<o;v++){const T=d+(v&1?-Math.floor((v+1)/2):Math.floor((v+1)/2));m[0]=0,m[1]=0,m[2]=0;let N=r;for(;N<h&&!p.get(N,T);)N++;let L=0;for(;N<h;){if(p.get(N,T))if(L===1)m[1]++;else if(L===2){if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,T,N);if(B!==null)return B}m[0]=m[2],m[1]=1,m[2]=0,L=1}else m[++L]++;else L===1&&L++,m[L]++;N++}if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,T,h);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe}static centerFromEnd(r,o){return o-r[2]-r[1]/2}foundPatternCross(r){const o=this.moduleSize,l=o/2;for(let h=0;h<3;h++)if(Math.abs(o-r[h])>=l)return!1;return!0}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let v=r;for(;v>=0&&d.get(o,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&!d.get(o,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=r+1;v<m&&d.get(o,v)&&p[1]<=l;)p[1]++,v++;if(v===m||p[1]>l)return NaN;for(;v<m&&!d.get(o,v)&&p[2]<=l;)p[2]++,v++;if(p[2]>l)return NaN;const T=p[0]+p[1]+p[2];return 5*Math.abs(T-h)>=2*h?NaN:this.foundPatternCross(p)?zr.centerFromEnd(p,v):NaN}handlePossibleCenter(r,o,l){const h=r[0]+r[1]+r[2],d=zr.centerFromEnd(r,l),m=this.crossCheckVertical(o,d,2*r[1],h);if(!isNaN(m)){const p=(r[0]+r[1]+r[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(p,m,d))return T.combineEstimate(m,d,p);const v=new Ai(d,m,p);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class Ps extends Ge{constructor(r,o,l,h){super(r,o),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=this.count+1,d=(this.count*this.getX()+o)/h,m=(this.count*this.getY()+r)/h,p=(this.count*this.estimatedModuleSize+l)/h;return new Ps(d,m,p,h)}}class Es{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class _n{constructor(r,o){this.image=r,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const o=r!=null&&r.get(ke.TRY_HARDER)!==void 0,l=r!=null&&r.get(ke.PURE_BARCODE)!==void 0,h=this.image,d=h.getHeight(),m=h.getWidth();let p=Math.floor(3*d/(4*_n.MAX_MODULES));(p<_n.MIN_SKIP||o)&&(p=_n.MIN_SKIP);let v=!1;const T=new Int32Array(5);for(let L=p-1;L<d&&!v;L+=p){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let B=0;for(let q=0;q<m;q++)if(h.get(q,L))(B&1)===1&&B++,T[B]++;else if(B&1)T[B]++;else if(B===4)if(_n.foundPatternCross(T)){if(this.handlePossibleCenter(T,L,q,l)===!0)if(p=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>T[2]&&(L+=re-T[2]-p,q=m-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,B=3;continue}B=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,B=3;else T[++B]++;_n.foundPatternCross(T)&&this.handlePossibleCenter(T,L,m,l)===!0&&(p=T[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return Ge.orderBestPatterns(N),new Es(N)}static centerFromEnd(r,o){return o-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let o=0;for(let d=0;d<5;d++){const m=r[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,h=l/2;return Math.abs(l-r[0])<h&&Math.abs(l-r[1])<h&&Math.abs(3*l-r[2])<3*h&&Math.abs(l-r[3])<h&&Math.abs(l-r[4])<h}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,o,l,h){const d=this.getCrossCheckStateCount();let m=0;const p=this.image;for(;r>=m&&o>=m&&p.get(o-m,r-m);)d[2]++,m++;if(r<m||o<m)return!1;for(;r>=m&&o>=m&&!p.get(o-m,r-m)&&d[1]<=l;)d[1]++,m++;if(r<m||o<m||d[1]>l)return!1;for(;r>=m&&o>=m&&p.get(o-m,r-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const v=p.getHeight(),T=p.getWidth();for(m=1;r+m<v&&o+m<T&&p.get(o+m,r+m);)d[2]++,m++;if(r+m>=v||o+m>=T)return!1;for(;r+m<v&&o+m<T&&!p.get(o+m,r+m)&&d[3]<l;)d[3]++,m++;if(r+m>=v||o+m>=T||d[3]>=l)return!1;for(;r+m<v&&o+m<T&&p.get(o+m,r+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const N=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(N-h)<2*h&&_n.foundPatternCross(d)}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),p=this.getCrossCheckStateCount();let v=r;for(;v>=0&&d.get(o,v);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(o,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&d.get(o,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=r+1;v<m&&d.get(o,v);)p[2]++,v++;if(v===m)return NaN;for(;v<m&&!d.get(o,v)&&p[3]<l;)p[3]++,v++;if(v===m||p[3]>=l)return NaN;for(;v<m&&d.get(o,v)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const T=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(T-h)>=2*h?NaN:_n.foundPatternCross(p)?_n.centerFromEnd(p,v):NaN}crossCheckHorizontal(r,o,l,h){const d=this.image,m=d.getWidth(),p=this.getCrossCheckStateCount();let v=r;for(;v>=0&&d.get(v,o);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(v,o)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&d.get(v,o)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=r+1;v<m&&d.get(v,o);)p[2]++,v++;if(v===m)return NaN;for(;v<m&&!d.get(v,o)&&p[3]<l;)p[3]++,v++;if(v===m||p[3]>=l)return NaN;for(;v<m&&d.get(v,o)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const T=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(T-h)>=h?NaN:_n.foundPatternCross(p)?_n.centerFromEnd(p,v):NaN}handlePossibleCenter(r,o,l,h){const d=r[0]+r[1]+r[2]+r[3]+r[4];let m=_n.centerFromEnd(r,l),p=this.crossCheckVertical(o,Math.floor(m),r[2],d);if(!isNaN(p)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(p),r[2],d),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(p),Math.floor(m),r[2],d)))){const v=d/7;let T=!1;const N=this.possibleCenters;for(let L=0,B=N.length;L<B;L++){const q=N[L];if(q.aboutEquals(v,p,m)){N[L]=q.combineEstimate(p,m,v),T=!0;break}}if(!T){const L=new Ps(m,p,v);N.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=_n.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=_n.CENTER_QUORUM&&(r++,o+=m.getEstimatedModuleSize());if(r<3)return!1;const h=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-h);return d<=.05*o}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new oe;const o=this.possibleCenters;let l;if(r>3){let h=0,d=0;for(const v of this.possibleCenters){const T=v.getEstimatedModuleSize();h+=T,d+=T*T}l=h/r;let m=Math.sqrt(d/r-l*l);o.sort((v,T)=>{const N=Math.abs(T.getEstimatedModuleSize()-l),L=Math.abs(v.getEstimatedModuleSize()-l);return N<L?-1:N>L?1:0});const p=Math.max(.2*l,m);for(let v=0;v<o.length&&o.length>3;v++){const T=o[v];Math.abs(T.getEstimatedModuleSize()-l)>p&&(o.splice(v,1),v--)}}if(o.length>3){let h=0;for(const d of o)h+=d.getEstimatedModuleSize();l=h/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const p=Math.abs(m.getEstimatedModuleSize()-l),v=Math.abs(d.getEstimatedModuleSize()-l);return p<v?1:p>v?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}_n.CENTER_QUORUM=2,_n.MIN_SKIP=3,_n.MAX_MODULES=57;class hi{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(ke.NEED_RESULT_POINT_CALLBACK);const l=new _n(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const o=r.getTopLeft(),l=r.getTopRight(),h=r.getBottomLeft(),d=this.calculateModuleSize(o,l,h);if(d<1)throw new oe("No pattern found in proccess finder.");const m=hi.computeDimension(o,l,h,d),p=qe.getProvisionalVersionForDimension(m),v=p.getDimensionForVersion()-7;let T=null;if(p.getAlignmentPatternCenters().length>0){const q=l.getX()-o.getX()+h.getX(),ne=l.getY()-o.getY()+h.getY(),re=1-3/v,he=Math.floor(o.getX()+re*(q-o.getX())),we=Math.floor(o.getY()+re*(ne-o.getY()));for(let je=4;je<=16;je<<=1)try{T=this.findAlignmentInRegion(d,he,we,je);break}catch(Ve){if(!(Ve instanceof oe))throw Ve}}const N=hi.createTransform(o,l,h,T,m),L=hi.sampleGrid(this.image,N,m);let B;return T===null?B=[h,o,l]:B=[h,o,l,T],new fr(L,B)}static createTransform(r,o,l,h,d){const m=d-3.5;let p,v,T,N;return h!==null?(p=h.getX(),v=h.getY(),T=m-3,N=T):(p=o.getX()-r.getX()+l.getX(),v=o.getY()-r.getY()+l.getY(),T=m,N=m),en.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,T,N,3.5,m,r.getX(),r.getY(),o.getX(),o.getY(),p,v,l.getX(),l.getY())}static sampleGrid(r,o,l){return Ln.getInstance().sampleGridWithTransform(r,l,l,o)}static computeDimension(r,o,l,h){const d=mt.round(Ge.distance(r,o)/h),m=mt.round(Ge.distance(r,l)/h);let p=Math.floor((d+m)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new oe("Dimensions could be not found.")}return p}calculateModuleSize(r,o,l){return(this.calculateModuleSizeOneWay(r,o)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(o.getX()),Math.floor(o.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(r,o,l,h){let d=this.sizeOfBlackWhiteBlackRun(r,o,l,h),m=1,p=r-(l-r);p<0?(m=r/(r-p),p=0):p>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(p-r),p=this.image.getWidth()-1);let v=Math.floor(o-(h-o)*m);return m=1,v<0?(m=o/(o-v),v=0):v>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(v-o),v=this.image.getHeight()-1),p=Math.floor(r+(p-r)*m),d+=this.sizeOfBlackWhiteBlackRun(r,o,p,v),d-1}sizeOfBlackWhiteBlackRun(r,o,l,h){const d=Math.abs(h-o)>Math.abs(l-r);if(d){let q=r;r=o,o=q,q=l,l=h,h=q}const m=Math.abs(l-r),p=Math.abs(h-o);let v=-m/2;const T=r<l?1:-1,N=o<h?1:-1;let L=0;const B=l+T;for(let q=r,ne=o;q!==B;q+=T){const re=d?ne:q,he=d?q:ne;if(L===1===this.image.get(re,he)){if(L===2)return mt.distance(q,ne,r,o);L++}if(v+=p,v>0){if(ne===h)break;ne+=N,v-=m}}return L===2?mt.distance(l+T,h,r,o):NaN}findAlignmentInRegion(r,o,l,h){const d=Math.floor(h*r),m=Math.max(0,o-d),p=Math.min(this.image.getWidth()-1,o+d);if(p-m<r*3)throw new oe("Alignment top exceeds estimated module size.");const v=Math.max(0,l-d),T=Math.min(this.image.getHeight()-1,l+d);if(T-v<r*3)throw new oe("Alignment bottom exceeds estimated module size.");return new zr(this.image,m,v,p-m,T-v,r,this.resultPointCallback).find()}}class Ci{constructor(){this.decoder=new Ec}getDecoder(){return this.decoder}decode(r,o){let l,h;if(o!=null&&o.get(ke.PURE_BARCODE)!==void 0){const v=Ci.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(v,o),h=Ci.NO_POINTS}else{const v=new hi(r.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(v.getBits(),o),h=v.getPoints()}l.getOther()instanceof hl&&l.getOther().applyMirroredCorrection(h);const d=new ze(l.getText(),l.getRawBytes(),void 0,h,Re.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(Fe.BYTE_SEGMENTS,m);const p=l.getECLevel();return p!==null&&d.putMetadata(Fe.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(Fe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Fe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o===null||l===null)throw new oe;const h=this.moduleSize(o,r);let d=o[1],m=l[1],p=o[0],v=l[0];if(p>=v||d>=m)throw new oe;if(m-d!==v-p&&(v=p+(m-d),v>=r.getWidth()))throw new oe;const T=Math.round((v-p+1)/h),N=Math.round((m-d+1)/h);if(T<=0||N<=0)throw new oe;if(N!==T)throw new oe;const L=Math.floor(h/2);d+=L,p+=L;const B=p+Math.floor((T-1)*h)-v;if(B>0){if(B>L)throw new oe;p-=B}const q=d+Math.floor((N-1)*h)-m;if(q>0){if(q>L)throw new oe;d-=q}const ne=new Oe(T,N);for(let re=0;re<N;re++){const he=d+Math.floor(re*h);for(let we=0;we<T;we++)r.get(p+Math.floor(we*h),he)&&ne.set(we,re)}return ne}static moduleSize(r,o){const l=o.getHeight(),h=o.getWidth();let d=r[0],m=r[1],p=!0,v=0;for(;d<h&&m<l;){if(p!==o.get(d,m)){if(++v===5)break;p=!p}d++,m++}if(d===h||m===l)throw new oe;return(d-r[0])/7}}Ci.NO_POINTS=new Array;class ft{PDF417Common(){}static getBitCountSum(r){return mt.sum(r)}static toIntArray(r){if(r==null||!r.length)return ft.EMPTY_INT_ARRAY;const o=new Int32Array(r.length);let l=0;for(const h of r)o[l++]=h;return o}static getCodeword(r){const o=fe.binarySearch(ft.SYMBOL_TABLE,r&262143);return o<0?-1:(ft.CODEWORD_TABLE[o]-1)%ft.NUMBER_OF_CODEWORDS}}ft.NUMBER_OF_CODEWORDS=929,ft.MAX_CODEWORDS_IN_BARCODE=ft.NUMBER_OF_CODEWORDS-1,ft.MIN_ROWS_IN_BARCODE=3,ft.MAX_ROWS_IN_BARCODE=90,ft.MODULES_IN_CODEWORD=17,ft.MODULES_IN_STOP_PATTERN=18,ft.BARS_IN_MODULE=8,ft.EMPTY_INT_ARRAY=new Int32Array([]),ft.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ft.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ta{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class pt{static detectMultiple(r,o,l){let h=r.getBlackMatrix(),d=pt.detect(l,h);return d.length||(h=h.clone(),h.rotate180(),d=pt.detect(l,h)),new ta(h,d)}static detect(r,o){const l=new Array;let h=0,d=0,m=!1;for(;h<o.getHeight();){const p=pt.findVertices(o,h,d);if(p[0]==null&&p[3]==null){if(!m)break;m=!1,d=0;for(const v of l)v[1]!=null&&(h=Math.trunc(Math.max(h,v[1].getY()))),v[3]!=null&&(h=Math.max(h,Math.trunc(v[3].getY())));h+=pt.ROW_STEP;continue}if(m=!0,l.push(p),!r)break;p[2]!=null?(d=Math.trunc(p[2].getX()),h=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),h=Math.trunc(p[4].getY()))}return l}static findVertices(r,o,l){const h=r.getHeight(),d=r.getWidth(),m=new Array(8);return pt.copyToResult(m,pt.findRowsWithPattern(r,h,d,o,l,pt.START_PATTERN),pt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),pt.copyToResult(m,pt.findRowsWithPattern(r,h,d,o,l,pt.STOP_PATTERN),pt.INDEXES_STOP_PATTERN),m}static copyToResult(r,o,l){for(let h=0;h<l.length;h++)r[l[h]]=o[h]}static findRowsWithPattern(r,o,l,h,d,m){const p=new Array(4);let v=!1;const T=new Int32Array(m.length);for(;h<o;h+=pt.ROW_STEP){let L=pt.findGuardPattern(r,d,h,l,!1,m,T);if(L!=null){for(;h>0;){const B=pt.findGuardPattern(r,d,--h,l,!1,m,T);if(B!=null)L=B;else{h++;break}}p[0]=new Ge(L[0],h),p[1]=new Ge(L[1],h),v=!0;break}}let N=h+1;if(v){let L=0,B=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;N<o;N++){const q=pt.findGuardPattern(r,B[0],N,l,!1,m,T);if(q!=null&&Math.abs(B[0]-q[0])<pt.MAX_PATTERN_DRIFT&&Math.abs(B[1]-q[1])<pt.MAX_PATTERN_DRIFT)B=q,L=0;else{if(L>pt.SKIPPED_ROW_COUNT_MAX)break;L++}}N-=L+1,p[2]=new Ge(B[0],N),p[3]=new Ge(B[1],N)}return N-h<pt.BARCODE_MIN_HEIGHT&&fe.fill(p,null),p}static findGuardPattern(r,o,l,h,d,m,p){fe.fillWithin(p,0,p.length,0);let v=o,T=0;for(;r.get(v,l)&&v>0&&T++<pt.MAX_PIXEL_DRIFT;)v--;let N=v,L=0,B=m.length;for(let q=d;N<h;N++)if(r.get(N,l)!==q)p[L]++;else{if(L===B-1){if(pt.patternMatchVariance(p,m,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return new Int32Array([v,N]);v+=p[0]+p[1],ee.arraycopy(p,2,p,0,L-1),p[L-1]=0,p[L]=0,L--}else L++;p[L]=1,q=!q}return L===B-1&&pt.patternMatchVariance(p,m,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE?new Int32Array([v,N-1]):null}static patternMatchVariance(r,o,l){let h=r.length,d=0,m=0;for(let T=0;T<h;T++)d+=r[T],m+=o[T];if(d<m)return 1/0;let p=d/m;l*=p;let v=0;for(let T=0;T<h;T++){let N=r[T],L=o[T]*p,B=N>L?N-L:L-N;if(B>l)return 1/0;v+=B}return v/d}}pt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),pt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),pt.MAX_AVG_VARIANCE=.42,pt.MAX_INDIVIDUAL_VARIANCE=.8,pt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),pt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),pt.MAX_PIXEL_DRIFT=3,pt.MAX_PATTERN_DRIFT=5,pt.SKIPPED_ROW_COUNT_MAX=25,pt.ROW_STEP=5,pt.BARCODE_MIN_HEIGHT=10;class Bn{constructor(r,o){if(o.length===0)throw new R;this.field=r;let l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),ee.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let h=0;for(let d of this.coefficients)h=this.field.add(h,d);return h}let o=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)o=this.field.add(this.field.multiply(r,o),this.coefficients[h]);return o}add(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let h=new Int32Array(l.length),d=l.length-o.length;ee.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=this.field.add(o[m-d],l[m]);return new Bn(this.field,h)}subtract(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Bn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Bn(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1);for(let p=0;p<l;p++){let v=o[p];for(let T=0;T<d;T++)m[p+T]=this.field.add(m[p+T],this.field.multiply(v,h[T]))}return new Bn(this.field,m)}negative(){let r=this.coefficients.length,o=new Int32Array(r);for(let l=0;l<r;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new Bn(this.field,o)}multiplyScalar(r){if(r===0)return new Bn(this.field,new Int32Array([0]));if(r===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let h=0;h<o;h++)l[h]=this.field.multiply(this.coefficients[h],r);return new Bn(this.field,l)}multiplyByMonomial(r,o){if(r<0)throw new R;if(o===0)return new Bn(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+r);for(let d=0;d<l;d++)h[d]=this.field.multiply(this.coefficients[d],o);return new Bn(this.field,h)}toString(){let r=new X;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(o===0||l!==1)&&r.append(l),o!==0&&(o===1?r.append("x"):(r.append("x^"),r.append(o))))}return r.toString()}}class rs{add(r,o){return(r+o)%this.modulus}subtract(r,o){return(this.modulus+r-o)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new R;return this.logTable[r]}inverse(r){if(r===0)throw new An;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class is extends rs{constructor(r,o){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let h=0;h<r;h++)this.expTable[h]=l,l=l*o%r;for(let h=0;h<r-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new Bn(this,new Int32Array([0])),this.one=new Bn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new R;if(o===0)return this.zero;let l=new Int32Array(r+1);return l[0]=o,new Bn(this,l)}}is.PDF417_GF=new is(ft.NUMBER_OF_CODEWORDS,3);class ss{constructor(){this.field=is.PDF417_GF}decode(r,o,l){let h=new Bn(this.field,r),d=new Int32Array(o),m=!1;for(let ne=o;ne>0;ne--){let re=h.evaluateAt(this.field.exp(ne));d[o-ne]=re,re!==0&&(m=!0)}if(!m)return 0;let p=this.field.getOne();if(l!=null)for(const ne of l){let re=this.field.exp(r.length-1-ne),he=new Bn(this.field,new Int32Array([this.field.subtract(0,re),1]));p=p.multiply(he)}let v=new Bn(this.field,d),T=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),v,o),N=T[0],L=T[1],B=this.findErrorLocations(N),q=this.findErrorMagnitudes(L,N,B);for(let ne=0;ne<B.length;ne++){let re=r.length-1-this.field.log(B[ne]);if(re<0)throw F.getChecksumInstance();r[re]=this.field.subtract(r[re],q[ne])}return B.length}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){let B=r;r=o,o=B}let h=r,d=o,m=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let B=h,q=m;if(h=d,m=p,h.isZero())throw F.getChecksumInstance();d=B;let ne=this.field.getZero(),re=h.getCoefficient(h.getDegree()),he=this.field.inverse(re);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){let we=d.getDegree()-h.getDegree(),je=this.field.multiply(d.getCoefficient(d.getDegree()),he);ne=ne.add(this.field.buildMonomial(we,je)),d=d.subtract(h.multiplyByMonomial(we,je))}p=ne.multiply(m).subtract(q).negative()}let v=p.getCoefficient(0);if(v===0)throw F.getChecksumInstance();let T=this.field.inverse(v),N=p.multiply(T),L=d.multiply(T);return[N,L]}findErrorLocations(r){let o=r.getDegree(),l=new Int32Array(o),h=0;for(let d=1;d<this.field.getSize()&&h<o;d++)r.evaluateAt(d)===0&&(l[h]=this.field.inverse(d),h++);if(h!==o)throw F.getChecksumInstance();return l}findErrorMagnitudes(r,o,l){let h=o.getDegree(),d=new Int32Array(h);for(let T=1;T<=h;T++)d[h-T]=this.field.multiply(T,o.getCoefficient(T));let m=new Bn(this.field,d),p=l.length,v=new Int32Array(p);for(let T=0;T<p;T++){let N=this.field.inverse(l[T]),L=this.field.subtract(0,r.evaluateAt(N)),B=this.field.inverse(m.evaluateAt(N));v[T]=this.field.multiply(L,B)}return v}}class Fi{constructor(r,o,l,h,d){r instanceof Fi?this.constructor_2(r):this.constructor_1(r,o,l,h,d)}constructor_1(r,o,l,h,d){const m=o==null||l==null,p=h==null||d==null;if(m&&p)throw new oe;m?(o=new Ge(0,h.getY()),l=new Ge(0,d.getY())):p&&(h=new Ge(r.getWidth()-1,o.getY()),d=new Ge(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=o,this.bottomLeft=l,this.topRight=h,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,o){return r==null?o:o==null?r:new Fi(r.image,r.topLeft,r.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(r,o,l){let h=this.topLeft,d=this.bottomLeft,m=this.topRight,p=this.bottomRight;if(r>0){let v=l?this.topLeft:this.topRight,T=Math.trunc(v.getY()-r);T<0&&(T=0);let N=new Ge(v.getX(),T);l?h=N:m=N}if(o>0){let v=l?this.bottomLeft:this.bottomRight,T=Math.trunc(v.getY()+o);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let N=new Ge(v.getX(),T);l?d=N:p=N}return new Fi(this.image,h,d,m,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class as{constructor(r,o,l,h){this.columnCount=r,this.errorCorrectionLevel=h,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ii{constructor(){this.buffer=""}static form(r,o){let l=-1;function h(m,p,v,T,N,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let B=N?parseInt(N.substr(1)):void 0,q;switch(L){case"s":q=o[l];break;case"c":q=o[l][0];break;case"f":q=parseFloat(o[l]).toFixed(m);break;case"p":q=parseFloat(o[l]).toPrecision(m);break;case"e":q=parseFloat(o[l]).toExponential(m);break;case"x":q=parseInt(o[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(o[l],B||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let ne=parseInt(v),re=v&&v[0]+""=="0"?"0":" ";for(;q.length<ne;)q=p!==void 0?q+re:re+q;return q}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}format(r,...o){this.buffer+=ii.form(r,o)}toString(){return this.buffer}}class _s{constructor(r){this.boundingBox=new Fi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let o=this.getCodeword(r);if(o!=null)return o;for(let l=1;l<_s.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(r)-l;if(h>=0&&(o=this.codewords[h],o!=null)||(h=this.imageRowToCodewordIndex(r)+l,h<this.codewords.length&&(o=this.codewords[h],o!=null)))return o}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,o){this.codewords[this.imageRowToCodewordIndex(r)]=o}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new ii;let o=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return r.toString()}}_s.MAX_NEARBY_DISTANCE=5;class Fn{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let o=this.values.get(r);o==null&&(o=0),o++,this.values.set(r,o)}getValue(){let r=-1,o=new Array;for(const[l,h]of this.values.entries()){const d={getKey:()=>l,getValue:()=>h};d.getValue()>r?(r=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===r&&o.push(d.getKey())}return ft.toIntArray(o)}getConfidence(r){return this.values.get(r)}}class sn extends _s{constructor(r,o){super(r),this._isLeft=o}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,r);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),v=-1,T=1,N=0;for(let L=m;L<p;L++){if(o[L]==null)continue;let B=o[L],q=B.getRowNumber()-v;if(q===0)N++;else if(q===1)T=Math.max(T,N),N=1,v=B.getRowNumber();else if(q<0||B.getRowNumber()>=r.getRowCount()||q>L)o[L]=null;else{let ne;T>2?ne=(T-2)*q:ne=q;let re=ne>=L;for(let he=1;he<=ne&&!re;he++)re=o[L-he]!=null;re?o[L]=null:(v=B.getRowNumber(),N=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let o=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=o.length)continue;o[h]++}return o}adjustIncompleteIndicatorColumnRowNumbers(r){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),h=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.getCodewords(),v=-1;for(let T=d;T<m;T++){if(p[T]==null)continue;let N=p[T];N.setRowNumberAsRowIndicatorColumn();let L=N.getRowNumber()-v;L===0||(L===1?v=N.getRowNumber():N.getRowNumber()>=r.getRowCount()?p[T]=null:v=N.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),o=new Fn,l=new Fn,h=new Fn,d=new Fn;for(let p of r){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let v=p.getValue()%30,T=p.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:l.setValue(v*3+1);break;case 1:d.setValue(v/3),h.setValue(v%3);break;case 2:o.setValue(v+1);break}}if(o.getValue().length===0||l.getValue().length===0||h.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<ft.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>ft.MAX_ROWS_IN_BARCODE)return null;let m=new as(o.getValue()[0],l.getValue()[0],h.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,o){for(let l=0;l<r.length;l++){let h=r[l];if(r[l]==null)continue;let d=h.getValue()%30,m=h.getRowNumber();if(m>o.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==o.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class os{constructor(r,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=ft.MAX_CODEWORDS_IN_BARCODE,o;do o=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(o,h,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&o[l]!=null&&r[l].getRowNumber()===o[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let d=this.detectionResultColumns[h].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=os.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=os.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),o=0):++o),o}adjustRowNumbers(r,o,l){if(!this.detectionResultColumns[r-1])return;let h=l[o],d=this.detectionResultColumns[r-1].getCodewords(),m=d;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let p=new Array(14);p[2]=d[o],p[3]=m[o],o>0&&(p[0]=l[o-1],p[4]=d[o-1],p[5]=m[o-1]),o>1&&(p[8]=l[o-2],p[10]=d[o-2],p[11]=m[o-2]),o<l.length-1&&(p[1]=l[o+1],p[6]=d[o+1],p[7]=m[o+1]),o<l.length-2&&(p[9]=l[o+2],p[12]=d[o+2],p[13]=m[o+2]);for(let v of p)if(os.adjustRowNumber(h,v))return}static adjustRowNumber(r,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===r.getBucket()?(r.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,o){this.detectionResultColumns[r]=o}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new ii;for(let l=0;l<r.getCodewords().length;l++){o.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[h].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class zi{constructor(r,o,l,h){this.rowNumber=zi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==zi.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}zi.BARCODE_ROW_UNKNOWN=-1;class _r{static initialize(){for(let r=0;r<ft.SYMBOL_TABLE.length;r++){let o=ft.SYMBOL_TABLE[r],l=o&1;for(let h=0;h<ft.BARS_IN_MODULE;h++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,_r.RATIOS_TABLE[r]||(_r.RATIOS_TABLE[r]=new Array(ft.BARS_IN_MODULE)),_r.RATIOS_TABLE[r][ft.BARS_IN_MODULE-h-1]=Math.fround(d/ft.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let o=_r.getDecodedCodewordValue(_r.sampleBitCounts(r));return o!==-1?o:_r.getClosestDecodedValue(r)}static sampleBitCounts(r){let o=mt.sum(r),l=new Int32Array(ft.BARS_IN_MODULE),h=0,d=0;for(let m=0;m<ft.MODULES_IN_CODEWORD;m++){let p=o/(2*ft.MODULES_IN_CODEWORD)+m*o/ft.MODULES_IN_CODEWORD;d+r[h]<=p&&(d+=r[h],h++),l[h]++}return l}static getDecodedCodewordValue(r){let o=_r.getBitValue(r);return ft.getCodeword(o)===-1?-1:o}static getBitValue(r){let o=0;for(let l=0;l<r.length;l++)for(let h=0;h<r[l];h++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(r){let o=mt.sum(r),l=new Array(ft.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/o);let h=_t.MAX_VALUE,d=-1;this.bSymbolTableReady||_r.initialize();for(let m=0;m<_r.RATIOS_TABLE.length;m++){let p=0,v=_r.RATIOS_TABLE[m];for(let T=0;T<ft.BARS_IN_MODULE;T++){let N=Math.fround(v[T]-l[T]);if(p+=Math.fround(N*N),p>=h)break}p<h&&(h=p,d=ft.SYMBOL_TABLE[m])}return d}}_r.bSymbolTableReady=!1,_r.RATIOS_TABLE=new Array(ft.SYMBOL_TABLE.length).map(O=>new Array(ft.BARS_IN_MODULE));class na{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class ra{static parseLong(r,o=void 0){return parseInt(r,o)}}class Hi extends w{}Hi.kind="NullPointerException";class ia{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,o,l){if(r==null)throw new Hi;if(o<0||o>r.length||l<0||o+l>r.length||o+l<0)throw new W;if(l===0)return;for(let h=0;h<l;h++)this.write(r[o+h])}flush(){}close(){}}class Ti extends w{}class fl extends ia{constructor(r=32){if(super(),this.count=0,r<0)throw new R("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Ti;l=ie.MAX_VALUE}this.buf=fe.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,o,l){if(o<0||o>r.length||l<0||o+l-r.length>0)throw new W;this.ensureCapacity(this.count+l),ee.arraycopy(r,o,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return fe.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var an;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(an||(an={}));function Bs(){if(typeof window<"u")return window.BigInt||null;if(typeof Fh<"u")return Fh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let vs;function Si(O){if(typeof vs>"u"&&(vs=Bs()),vs===null)throw new Error("BigInt is not supported!");return vs(O)}function ja(){let O=[];O[0]=Si(1);let r=Si(900);O[1]=r;for(let o=2;o<16;o++)O[o]=O[o-1]*r;return O}class xe{static decode(r,o){let l=new X(""),h=k.ISO8859_1;l.enableDecoding(h);let d=1,m=r[d++],p=new na;for(;d<r[0];){switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:d=xe.textCompaction(r,d,l);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:d=xe.byteCompaction(m,r,h,d,l);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:d=xe.numericCompaction(r,d,l);break;case xe.ECI_CHARSET:k.getCharacterSetECIByValue(r[d++]);break;case xe.ECI_GENERAL_PURPOSE:d+=2;break;case xe.ECI_USER_DEFINED:d++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=xe.decodeMacroBlock(r,d,p);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new z;default:d--,d=xe.textCompaction(r,d,l);break}if(d<r.length)m=r[d++];else throw z.getFormatInstance()}if(l.length()===0)throw z.getFormatInstance();let v=new nt(null,l.toString(),null,o);return v.setOther(p),v}static decodeMacroBlock(r,o,l){if(o+xe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw z.getFormatInstance();let h=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<xe.NUMBER_OF_SEQUENCE_CODEWORDS;p++,o++)h[p]=r[o];l.setSegmentIndex(ie.parseInt(xe.decodeBase900toBase10(h,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new X;o=xe.textCompaction(r,o,d),l.setFileId(d.toString());let m=-1;for(r[o]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<r[0];)switch(r[o]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,r[o]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new X;o=xe.textCompaction(r,o+1,p),l.setFileName(p.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new X;o=xe.textCompaction(r,o+1,v),l.setSender(v.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new X;o=xe.textCompaction(r,o+1,T),l.setAddressee(T.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new X;o=xe.numericCompaction(r,o+1,N),l.setSegmentCount(ie.parseInt(N.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new X;o=xe.numericCompaction(r,o+1,L),l.setTimestamp(ra.parseLong(L.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new X;o=xe.numericCompaction(r,o+1,B),l.setChecksum(ie.parseInt(B.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new X;o=xe.numericCompaction(r,o+1,q),l.setFileSize(ra.parseLong(q.toString()));break;default:throw z.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(m!==-1){let p=o-m;l.isLastSegment()&&p--,l.setOptionalData(fe.copyOfRange(r,m,m+p))}return o}static textCompaction(r,o,l){let h=new Int32Array((r[0]-o)*2),d=new Int32Array((r[0]-o)*2),m=0,p=!1;for(;o<r[0]&&!p;){let v=r[o++];if(v<xe.TEXT_COMPACTION_MODE_LATCH)h[m]=v/30,h[m+1]=v%30,m+=2;else switch(v){case xe.TEXT_COMPACTION_MODE_LATCH:h[m++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,p=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=r[o++],d[m]=v,m++;break}}return xe.decodeTextCompaction(h,d,m,l),o}static decodeTextCompaction(r,o,l,h){let d=an.ALPHA,m=an.ALPHA,p=0;for(;p<l;){let v=r[p],T="";switch(d){case an.ALPHA:if(v<26)T=String.fromCharCode(65+v);else switch(v){case 26:T=" ";break;case xe.LL:d=an.LOWER;break;case xe.ML:d=an.MIXED;break;case xe.PS:m=d,d=an.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=an.ALPHA;break}break;case an.LOWER:if(v<26)T=String.fromCharCode(97+v);else switch(v){case 26:T=" ";break;case xe.AS:m=d,d=an.ALPHA_SHIFT;break;case xe.ML:d=an.MIXED;break;case xe.PS:m=d,d=an.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=an.ALPHA;break}break;case an.MIXED:if(v<xe.PL)T=xe.MIXED_CHARS[v];else switch(v){case xe.PL:d=an.PUNCT;break;case 26:T=" ";break;case xe.LL:d=an.LOWER;break;case xe.AL:d=an.ALPHA;break;case xe.PS:m=d,d=an.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=an.ALPHA;break}break;case an.PUNCT:if(v<xe.PAL)T=xe.PUNCT_CHARS[v];else switch(v){case xe.PAL:d=an.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=an.ALPHA;break}break;case an.ALPHA_SHIFT:if(d=m,v<26)T=String.fromCharCode(65+v);else switch(v){case 26:T=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:d=an.ALPHA;break}break;case an.PUNCT_SHIFT:if(d=m,v<xe.PAL)T=xe.PUNCT_CHARS[v];else switch(v){case xe.PAL:d=an.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=an.ALPHA;break}break}T!==""&&h.append(T),p++}}static byteCompaction(r,o,l,h,d){let m=new fl,p=0,v=0,T=!1;switch(r){case xe.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),L=o[h++];for(;h<o[0]&&!T;)switch(N[p++]=L,v=900*v+L,L=o[h++],L){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,T=!0;break;default:if(p%5===0&&p>0){for(let B=0;B<6;++B)m.write(Number(Si(v)>>Si(8*(5-B))));v=0,p=0}break}h===o[0]&&L<xe.TEXT_COMPACTION_MODE_LATCH&&(N[p++]=L);for(let B=0;B<p;B++)m.write(N[B]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<o[0]&&!T;){let B=o[h++];if(B<xe.TEXT_COMPACTION_MODE_LATCH)p++,v=900*v+B;else switch(B){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,T=!0;break}if(p%5===0&&p>0){for(let q=0;q<6;++q)m.write(Number(Si(v)>>Si(8*(5-q))));v=0,p=0}}break}return d.append(K.decode(m.toByteArray(),l)),h}static numericCompaction(r,o,l){let h=0,d=!1,m=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;o<r[0]&&!d;){let p=r[o++];if(o===r[0]&&(d=!0),p<xe.TEXT_COMPACTION_MODE_LATCH)m[h]=p,h++;else switch(p){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(h%xe.MAX_NUMERIC_CODEWORDS===0||p===xe.NUMERIC_COMPACTION_MODE_LATCH||d)&&h>0&&(l.append(xe.decodeBase900toBase10(m,h)),h=0)}return o}static decodeBase900toBase10(r,o){let l=Si(0);for(let d=0;d<o;d++)l+=xe.EXP900[o-d-1]*Si(r[d]);let h=l.toString();if(h.charAt(0)!=="1")throw new z;return h.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=Bs()?ja():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Tt{constructor(){}static decode(r,o,l,h,d,m,p){let v=new Fi(r,o,l,h,d),T=null,N=null,L;for(let ne=!0;;ne=!1){if(o!=null&&(T=Tt.getRowIndicatorColumn(r,v,o,!0,m,p)),h!=null&&(N=Tt.getRowIndicatorColumn(r,v,h,!1,m,p)),L=Tt.merge(T,N),L==null)throw oe.getNotFoundInstance();let re=L.getBoundingBox();if(ne&&re!=null&&(re.getMinY()<v.getMinY()||re.getMaxY()>v.getMaxY()))v=re;else break}L.setBoundingBox(v);let B=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,T),L.setDetectionResultColumn(B,N);let q=T!=null;for(let ne=1;ne<=B;ne++){let re=q?ne:B-ne;if(L.getDetectionResultColumn(re)!==void 0)continue;let he;re===0||re===B?he=new sn(v,re===0):he=new _s(v),L.setDetectionResultColumn(re,he);let we=-1,je=we;for(let Ve=v.getMinY();Ve<=v.getMaxY();Ve++){if(we=Tt.getStartColumn(L,re,Ve,q),we<0||we>v.getMaxX()){if(je===-1)continue;we=je}let De=Tt.detectCodeword(r,v.getMinX(),v.getMaxX(),q,we,Ve,m,p);De!=null&&(he.setCodeword(Ve,De),je=we,m=Math.min(m,De.getWidth()),p=Math.max(p,De.getWidth()))}}return Tt.createDecoderResult(L)}static merge(r,o){if(r==null&&o==null)return null;let l=Tt.getBarcodeMetadata(r,o);if(l==null)return null;let h=Fi.merge(Tt.adjustBoundingBox(r),Tt.adjustBoundingBox(o));return new os(l,h)}static adjustBoundingBox(r){if(r==null)return null;let o=r.getRowHeights();if(o==null)return null;let l=Tt.getMax(o),h=0;for(let p of o)if(h+=l-p,p>0)break;let d=r.getCodewords();for(let p=0;h>0&&d[p]==null;p++)h--;let m=0;for(let p=o.length-1;p>=0&&(m+=l-o[p],!(o[p]>0));p--);for(let p=d.length-1;m>0&&d[p]==null;p--)m--;return r.getBoundingBox().addMissingRows(h,m,r.isLeft())}static getMax(r){let o=-1;for(let l of r)o=Math.max(o,l);return o}static getBarcodeMetadata(r,o){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let h;return o==null||(h=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(r,o,l,h,d,m){let p=new sn(o,h);for(let v=0;v<2;v++){let T=v===0?1:-1,N=Math.trunc(Math.trunc(l.getX()));for(let L=Math.trunc(Math.trunc(l.getY()));L<=o.getMaxY()&&L>=o.getMinY();L+=T){let B=Tt.detectCodeword(r,0,r.getWidth(),h,N,L,d,m);B!=null&&(p.setCodeword(L,B),h?N=B.getStartX():N=B.getEndX())}}return p}static adjustCodewordCount(r,o){let l=o[0][1],h=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Tt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(h.length===0){if(d<1||d>ft.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();l.setValue(d)}else h[0]!==d&&l.setValue(d)}static createDecoderResult(r){let o=Tt.createBarcodeMatrix(r);Tt.adjustCodewordCount(r,o);let l=new Array,h=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],m=new Array;for(let v=0;v<r.getBarcodeRowCount();v++)for(let T=0;T<r.getBarcodeColumnCount();T++){let N=o[v][T+1].getValue(),L=v*r.getBarcodeColumnCount()+T;N.length===0?l.push(L):N.length===1?h[L]=N[0]:(m.push(L),d.push(N))}let p=new Array(d.length);for(let v=0;v<p.length;v++)p[v]=d[v];return Tt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),h,ft.toIntArray(l),ft.toIntArray(m),p)}static createDecoderResultFromAmbiguousValues(r,o,l,h,d){let m=new Int32Array(h.length),p=100;for(;p-- >0;){for(let v=0;v<m.length;v++)o[h[v]]=d[v][m[v]];try{return Tt.decodeCodewords(o,r,l)}catch(v){if(!(v instanceof F))throw v}if(m.length===0)throw F.getChecksumInstance();for(let v=0;v<m.length;v++)if(m[v]<d[v].length-1){m[v]++;break}else if(m[v]=0,v===m.length-1)throw F.getChecksumInstance()}throw F.getChecksumInstance()}static createBarcodeMatrix(r){let o=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let h=0;h<o.length;h++)for(let d=0;d<o[h].length;d++)o[h][d]=new Fn;let l=0;for(let h of r.getDetectionResultColumns()){if(h!=null){for(let d of h.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(r,o){return o>=0&&o<=r.getBarcodeColumnCount()+1}static getStartColumn(r,o,l,h){let d=h?1:-1,m=null;if(Tt.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(Tt.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let p=0;for(;Tt.isValidBarcodeColumn(r,o-d);){o-=d;for(let v of r.getDetectionResultColumn(o).getCodewords())if(v!=null)return(h?v.getEndX():v.getStartX())+d*p*(v.getEndX()-v.getStartX());p++}return h?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,o,l,h,d,m,p,v){d=Tt.adjustCodewordStartColumn(r,o,l,h,d,m);let T=Tt.getModuleBitCount(r,o,l,h,d,m);if(T==null)return null;let N,L=mt.sum(T);if(h)N=d+L;else{for(let ne=0;ne<T.length/2;ne++){let re=T[ne];T[ne]=T[T.length-1-ne],T[T.length-1-ne]=re}N=d,d=N-L}if(!Tt.checkCodewordSkew(L,p,v))return null;let B=_r.getDecodedValue(T),q=ft.getCodeword(B);return q===-1?null:new zi(d,N,Tt.getCodewordBucketNumber(B),q)}static getModuleBitCount(r,o,l,h,d,m){let p=d,v=new Int32Array(8),T=0,N=h?1:-1,L=h;for(;(h?p<l:p>=o)&&T<v.length;)r.get(p,m)===L?(v[T]++,p+=N):(T++,L=!L);return T===v.length||p===(h?l:o)&&T===v.length-1?v:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,o,l,h,d,m){let p=d,v=h?-1:1;for(let T=0;T<2;T++){for(;(h?p>=o:p<l)&&h===r.get(p,m);){if(Math.abs(d-p)>Tt.CODEWORD_SKEW_SIZE)return d;p+=v}v=-v,h=!h}return p}static checkCodewordSkew(r,o,l){return o-Tt.CODEWORD_SKEW_SIZE<=r&&r<=l+Tt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,o,l){if(r.length===0)throw z.getFormatInstance();let h=1<<o+1,d=Tt.correctErrors(r,l,h);Tt.verifyCodewordCount(r,h);let m=xe.decode(r,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(r,o,l){if(o!=null&&o.length>l/2+Tt.MAX_ERRORS||l<0||l>Tt.MAX_EC_CODEWORDS)throw F.getChecksumInstance();return Tt.errorCorrection.decode(r,l,o)}static verifyCodewordCount(r,o){if(r.length<4)throw z.getFormatInstance();let l=r[0];if(l>r.length)throw z.getFormatInstance();if(l===0)if(o<r.length)r[0]=r.length-o;else throw z.getFormatInstance()}static getBitCountForCodeword(r){let o=new Int32Array(8),l=0,h=o.length-1;for(;!((r&1)!==l&&(l=r&1,h--,h<0));)o[h]++,r>>=1;return o}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Tt.getCodewordBucketNumber(Tt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let o=new ii;for(let l=0;l<r.length;l++){o.format("Row %2d: ",l);for(let h=0;h<r[l].length;h++){let d=r[l][h];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}Tt.CODEWORD_SKEW_SIZE=2,Tt.MAX_ERRORS=3,Tt.MAX_EC_CODEWORDS=512,Tt.errorCorrection=new ss;class lr{decode(r,o=null){let l=lr.decode(r,o,!1);if(l==null||l.length===0||l[0]==null)throw oe.getNotFoundInstance();return l[0]}decodeMultiple(r,o=null){try{return lr.decode(r,o,!0)}catch(l){throw l instanceof z||l instanceof F?oe.getNotFoundInstance():l}}static decode(r,o,l){const h=new Array,d=pt.detectMultiple(r,o,l);for(const m of d.getPoints()){const p=Tt.decode(d.getBits(),m[4],m[5],m[6],m[7],lr.getMinCodewordWidth(m),lr.getMaxCodewordWidth(m)),v=new ze(p.getText(),p.getRawBytes(),void 0,m,Re.PDF_417);v.putMetadata(Fe.ERROR_CORRECTION_LEVEL,p.getECLevel());const T=p.getOther();T!=null&&v.putMetadata(Fe.PDF417_EXTRA_METADATA,T),h.push(v)}return h.map(m=>m)}static getMaxWidth(r,o){return r==null||o==null?0:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMinWidth(r,o){return r==null||o==null?ie.MAX_VALUE:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(lr.getMaxWidth(r[0],r[4]),lr.getMaxWidth(r[6],r[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.max(lr.getMaxWidth(r[1],r[5]),lr.getMaxWidth(r[7],r[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(lr.getMinWidth(r[0],r[4]),lr.getMinWidth(r[6],r[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.min(lr.getMinWidth(r[1],r[5]),lr.getMinWidth(r[7],r[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}reset(){}}class js extends w{}js.kind="ReaderException";class Us{constructor(r,o){this.verbose=r===!0,o&&this.setHints(o)}decode(r,o){return o&&this.setHints(o),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const o=!a(r)&&r.get(ke.TRY_HARDER)===!0,l=a(r)?null:r.get(ke.POSSIBLE_FORMATS),h=new Array;if(!a(l)){const d=l.some(m=>m===Re.UPC_A||m===Re.UPC_E||m===Re.EAN_13||m===Re.EAN_8||m===Re.CODABAR||m===Re.CODE_39||m===Re.CODE_93||m===Re.CODE_128||m===Re.ITF||m===Re.RSS_14||m===Re.RSS_EXPANDED);d&&!o&&h.push(new dr(r,this.verbose)),l.includes(Re.QR_CODE)&&h.push(new Ci),l.includes(Re.DATA_MATRIX)&&h.push(new vi),l.includes(Re.AZTEC)&&h.push(new Pi),l.includes(Re.PDF_417)&&h.push(new lr),d&&o&&h.push(new dr(r,this.verbose))}h.length===0&&(o||h.push(new dr(r,this.verbose)),h.push(new Ci),h.push(new vi),h.push(new Pi),h.push(new lr),o&&h.push(new dr(r,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new js("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(r,this.hints)}catch(l){if(l instanceof js)continue}throw new oe("No MultiFormat Readers were able to detect the code.")}}class dl extends He{constructor(r=null,o=500){const l=new Us;l.setHints(r),super(l,o)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class gl extends He{constructor(r=500){super(new lr,r)}}class Do extends He{constructor(r=500){super(new Ci,r)}}var bs;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(bs||(bs={}));var zn=bs;class Vs{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new gt(r,Int32Array.from([1])))}buildGenerator(r){const o=this.cachedGenerators;if(r>=o.length){let l=o[o.length-1];const h=this.field;for(let d=o.length;d<=r;d++){const m=l.multiply(new gt(h,Int32Array.from([1,h.exp(d-1+h.getGeneratorBase())])));o.push(m),l=m}}return o[r]}encode(r,o){if(o===0)throw new R("No error correction bytes");const l=r.length-o;if(l<=0)throw new R("No data bytes provided");const h=this.buildGenerator(o),d=new Int32Array(l);ee.arraycopy(r,0,d,0,l);let m=new gt(this.field,d);m=m.multiplyByMonomial(o,1);const v=m.divide(h)[1].getCoefficients(),T=o-v.length;for(let N=0;N<T;N++)r[l+N]=0;ee.arraycopy(v,0,r,l+T,v.length)}}class Tn{constructor(){}static applyMaskPenaltyRule1(r){return Tn.applyMaskPenaltyRule1Internal(r,!0)+Tn.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d-1;m++){const p=l[m];for(let v=0;v<h-1;v++){const T=p[v];T===p[v+1]&&T===l[m+1][v]&&T===l[m+1][v+1]&&o++}}return Tn.N2*o}static applyMaskPenaltyRule3(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d;m++)for(let p=0;p<h;p++){const v=l[m];p+6<h&&v[p]===1&&v[p+1]===0&&v[p+2]===1&&v[p+3]===1&&v[p+4]===1&&v[p+5]===0&&v[p+6]===1&&(Tn.isWhiteHorizontal(v,p-4,p)||Tn.isWhiteHorizontal(v,p+7,p+11))&&o++,m+6<d&&l[m][p]===1&&l[m+1][p]===0&&l[m+2][p]===1&&l[m+3][p]===1&&l[m+4][p]===1&&l[m+5][p]===0&&l[m+6][p]===1&&(Tn.isWhiteVertical(l,p,m-4,m)||Tn.isWhiteVertical(l,p,m+7,m+11))&&o++}return o*Tn.N3}static isWhiteHorizontal(r,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let h=o;h<l;h++)if(r[h]===1)return!1;return!0}static isWhiteVertical(r,o,l,h){l=Math.max(l,0),h=Math.min(h,r.length);for(let d=l;d<h;d++)if(r[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let v=0;v<d;v++){const T=l[v];for(let N=0;N<h;N++)T[N]===1&&o++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*Tn.N4}static getDataMaskBit(r,o,l){let h,d;switch(r){case 0:h=l+o&1;break;case 1:h=l&1;break;case 2:h=o%3;break;case 3:h=(l+o)%3;break;case 4:h=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,h=(d&1)+d%3;break;case 6:d=l*o,h=(d&1)+d%3&1;break;case 7:d=l*o,h=d%3+(l+o&1)&1;break;default:throw new R("Invalid mask pattern: "+r)}return h===0}static applyMaskPenaltyRule1Internal(r,o){let l=0;const h=o?r.getHeight():r.getWidth(),d=o?r.getWidth():r.getHeight(),m=r.getArray();for(let p=0;p<h;p++){let v=0,T=-1;for(let N=0;N<d;N++){const L=o?m[p][N]:m[N][p];L===T?v++:(v>=5&&(l+=Tn.N1+(v-5)),v=1,T=L)}v>=5&&(l+=Tn.N1+(v-5))}return l}}Tn.N1=3,Tn.N2=3,Tn.N3=40,Tn.N4=10;class Fs{constructor(r,o){this.width=r,this.height=o;const l=new Array(o);for(let h=0;h!==o;h++)l[h]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,o){return this.bytes[o][r]}getArray(){return this.bytes}setNumber(r,o,l){this.bytes[o][r]=l}setBoolean(r,o,l){this.bytes[o][r]=l?1:0}clear(r){for(const o of this.bytes)fe.fill(o,r)}equals(r){if(!(r instanceof Fs))return!1;const o=r;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,h=this.height;l<h;++l){const d=this.bytes[l],m=o.bytes[l];for(let p=0,v=this.width;p<v;++p)if(d[p]!==m[p])return!1}return!0}toString(){const r=new X;for(let o=0,l=this.height;o<l;++o){const h=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(h[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Hr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new X;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Hr.NUM_MASK_PATTERNS}}Hr.NUM_MASK_PATTERNS=8;class on extends w{}on.kind="WriterException";class ut{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,o,l,h,d){ut.clearMatrix(d),ut.embedBasicPatterns(l,d),ut.embedTypeInfo(o,h,d),ut.maybeEmbedVersionInfo(l,d),ut.embedDataBits(r,h,d)}static embedBasicPatterns(r,o){ut.embedPositionDetectionPatternsAndSeparators(o),ut.embedDarkDotAtLeftBottomCorner(o),ut.maybeEmbedPositionAdjustmentPatterns(r,o),ut.embedTimingPatterns(o)}static embedTypeInfo(r,o,l){const h=new _e;ut.makeTypeInfoBits(r,o,h);for(let d=0,m=h.getSize();d<m;++d){const p=h.get(h.getSize()-1-d),v=ut.TYPE_INFO_COORDINATES[d],T=v[0],N=v[1];if(l.setBoolean(T,N,p),d<8){const L=l.getWidth()-d-1;l.setBoolean(L,8,p)}else{const B=l.getHeight()-7+(d-8);l.setBoolean(8,B,p)}}}static maybeEmbedVersionInfo(r,o){if(r.getVersionNumber()<7)return;const l=new _e;ut.makeVersionInfoBits(r,l);let h=6*3-1;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const p=l.get(h);h--,o.setBoolean(d,o.getHeight()-11+m,p),o.setBoolean(o.getHeight()-11+m,d,p)}}static embedDataBits(r,o,l){let h=0,d=-1,m=l.getWidth()-1,p=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);p>=0&&p<l.getHeight();){for(let v=0;v<2;++v){const T=m-v;if(!ut.isEmpty(l.get(T,p)))continue;let N;h<r.getSize()?(N=r.get(h),++h):N=!1,o!==255&&Tn.getDataMaskBit(o,T,p)&&(N=!N),l.setBoolean(T,p,N)}p+=d}d=-d,p+=d,m-=2}if(h!==r.getSize())throw new on("Not all bits consumed: "+h+"/"+r.getSize())}static findMSBSet(r){return 32-ie.numberOfLeadingZeros(r)}static calculateBCHCode(r,o){if(o===0)throw new R("0 polynomial");const l=ut.findMSBSet(o);for(r<<=l-1;ut.findMSBSet(r)>=l;)r^=o<<ut.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,o,l){if(!Hr.isValidMaskPattern(o))throw new on("Invalid mask pattern");const h=r.getBits()<<3|o;l.appendBits(h,5);const d=ut.calculateBCHCode(h,ut.TYPE_INFO_POLY);l.appendBits(d,10);const m=new _e;if(m.appendBits(ut.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new on("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,o){o.appendBits(r.getVersionNumber(),6);const l=ut.calculateBCHCode(r.getVersionNumber(),ut.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new on("should not happen but we got: "+o.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let o=8;o<r.getWidth()-8;++o){const l=(o+1)%2;ut.isEmpty(r.get(o,6))&&r.setNumber(o,6,l),ut.isEmpty(r.get(6,o))&&r.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new on;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,o,l){for(let h=0;h<8;++h){if(!ut.isEmpty(l.get(r+h,o)))throw new on;l.setNumber(r+h,o,0)}}static embedVerticalSeparationPattern(r,o,l){for(let h=0;h<7;++h){if(!ut.isEmpty(l.get(r,o+h)))throw new on;l.setNumber(r,o+h,0)}}static embedPositionAdjustmentPattern(r,o,l){for(let h=0;h<5;++h){const d=ut.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPattern(r,o,l){for(let h=0;h<7;++h){const d=ut.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPatternsAndSeparators(r){const o=ut.POSITION_DETECTION_PATTERN[0].length;ut.embedPositionDetectionPattern(0,0,r),ut.embedPositionDetectionPattern(r.getWidth()-o,0,r),ut.embedPositionDetectionPattern(0,r.getWidth()-o,r);const l=8;ut.embedHorizontalSeparationPattern(0,l-1,r),ut.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),ut.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const h=7;ut.embedVerticalSeparationPattern(h,0,r),ut.embedVerticalSeparationPattern(r.getHeight()-h-1,0,r),ut.embedVerticalSeparationPattern(h,r.getHeight()-h,r)}static maybeEmbedPositionAdjustmentPatterns(r,o){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,h=ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=h.length;d!==m;d++){const p=h[d];if(p>=0)for(let v=0;v!==m;v++){const T=h[v];T>=0&&ut.isEmpty(o.get(T,p))&&ut.embedPositionAdjustmentPattern(T-2,p-2,o)}}}}ut.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ut.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ut.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ut.VERSION_INFO_POLY=7973,ut.TYPE_INFO_POLY=1335,ut.TYPE_INFO_MASK_PATTERN=21522;class ml{constructor(r,o){this.dataBytes=r,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class hn{constructor(){}static calculateMaskPenalty(r){return Tn.applyMaskPenaltyRule1(r)+Tn.applyMaskPenaltyRule2(r)+Tn.applyMaskPenaltyRule3(r)+Tn.applyMaskPenaltyRule4(r)}static encode(r,o,l=null){let h=hn.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(zn.CHARACTER_SET)!==void 0;d&&(h=l.get(zn.CHARACTER_SET).toString());const m=this.chooseMode(r,h),p=new _e;if(m===ct.BYTE&&(d||hn.DEFAULT_BYTE_MODE_ENCODING!==h)){const Ve=k.getCharacterSetECIByName(h);Ve!==void 0&&this.appendECI(Ve,p)}this.appendModeInfo(m,p);const v=new _e;this.appendBytes(r,m,v,h);let T;if(l!==null&&l.get(zn.QR_VERSION)!==void 0){const Ve=Number.parseInt(l.get(zn.QR_VERSION).toString(),10);T=qe.getVersionForNumber(Ve);const De=this.calculateBitsNeeded(m,p,v,T);if(!this.willFit(De,T,o))throw new on("Data too big for requested version")}else T=this.recommendVersion(o,m,p,v);const N=new _e;N.appendBitArray(p);const L=m===ct.BYTE?v.getSizeInBytes():r.length;this.appendLengthInfo(L,T,m,N),N.appendBitArray(v);const B=T.getECBlocksForLevel(o),q=T.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(q,N);const ne=this.interleaveWithECBytes(N,T.getTotalCodewords(),q,B.getNumBlocks()),re=new Hr;re.setECLevel(o),re.setMode(m),re.setVersion(T);const he=T.getDimensionForVersion(),we=new Fs(he,he),je=this.chooseMaskPattern(ne,o,T,we);return re.setMaskPattern(je),ut.buildMatrix(ne,o,T,je,we),re.setMatrix(we),re}static recommendVersion(r,o,l,h){const d=this.calculateBitsNeeded(o,l,h,qe.getVersionForNumber(1)),m=this.chooseVersion(d,r),p=this.calculateBitsNeeded(o,l,h,m);return this.chooseVersion(p,r)}static calculateBitsNeeded(r,o,l,h){return o.getSize()+r.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(r){return r<hn.ALPHANUMERIC_TABLE.length?hn.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,o=null){if(k.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(r))return ct.KANJI;let l=!1,h=!1;for(let d=0,m=r.length;d<m;++d){const p=r.charAt(d);if(hn.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)h=!0;else return ct.BYTE}return h?ct.ALPHANUMERIC:l?ct.NUMERIC:ct.BYTE}static isOnlyDoubleByteKanji(r){let o;try{o=K.encode(r,k.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const d=o[h]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,o,l,h){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let p=0;p<Hr.NUM_MASK_PATTERNS;p++){ut.buildMatrix(r,o,l,p,h);let v=this.calculateMaskPenalty(h);v<d&&(d=v,m=p)}return m}static chooseVersion(r,o){for(let l=1;l<=40;l++){const h=qe.getVersionForNumber(l);if(hn.willFit(r,h,o))return h}throw new on("Data too big")}static willFit(r,o,l){const h=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),p=h-m,v=(r+7)/8;return p>=v}static terminateBits(r,o){const l=r*8;if(o.getSize()>l)throw new on("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const h=o.getSize()&7;if(h>0)for(let m=h;m<8;m++)o.appendBit(!1);const d=r-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits(m&1?17:236,8);if(o.getSize()!==l)throw new on("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,o,l,h,d,m){if(h>=l)throw new on("Block ID too large");const p=r%l,v=l-p,T=Math.floor(r/l),N=T+1,L=Math.floor(o/l),B=L+1,q=T-L,ne=N-B;if(q!==ne)throw new on("EC bytes mismatch");if(l!==v+p)throw new on("RS blocks mismatch");if(r!==(L+q)*v+(B+ne)*p)throw new on("Total bytes mismatch");h<v?(d[0]=L,m[0]=q):(d[0]=B,m[0]=ne)}static interleaveWithECBytes(r,o,l,h){if(r.getSizeInBytes()!==l)throw new on("Number of bits and data bytes does not match");let d=0,m=0,p=0;const v=new Array;for(let N=0;N<h;++N){const L=new Int32Array(1),B=new Int32Array(1);hn.getNumDataBytesAndNumECBytesForBlockID(o,l,h,N,L,B);const q=L[0],ne=new Uint8Array(q);r.toBytes(8*d,ne,0,q);const re=hn.generateECBytes(ne,B[0]);v.push(new ml(ne,re)),m=Math.max(m,q),p=Math.max(p,re.length),d+=L[0]}if(l!==d)throw new on("Data bytes does not match offset");const T=new _e;for(let N=0;N<m;++N)for(const L of v){const B=L.getDataBytes();N<B.length&&T.appendBits(B[N],8)}for(let N=0;N<p;++N)for(const L of v){const B=L.getErrorCorrectionBytes();N<B.length&&T.appendBits(B[N],8)}if(o!==T.getSizeInBytes())throw new on("Interleaving error: "+o+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(r,o){const l=r.length,h=new Int32Array(l+o);for(let m=0;m<l;m++)h[m]=r[m]&255;new Vs(xt.QR_CODE_FIELD_256).encode(h,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=h[l+m];return d}static appendModeInfo(r,o){o.appendBits(r.getBits(),4)}static appendLengthInfo(r,o,l,h){const d=l.getCharacterCountBits(o);if(r>=1<<d)throw new on(r+" is bigger than "+((1<<d)-1));h.appendBits(r,d)}static appendBytes(r,o,l,h){switch(o){case ct.NUMERIC:hn.appendNumericBytes(r,l);break;case ct.ALPHANUMERIC:hn.appendAlphanumericBytes(r,l);break;case ct.BYTE:hn.append8BitBytes(r,l,h);break;case ct.KANJI:hn.appendKanjiBytes(r,l);break;default:throw new on("Invalid mode: "+o)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const o=hn.getDigit(r);return o>=0&&o<=9}static appendNumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=hn.getDigit(r.charAt(h));if(h+2<l){const m=hn.getDigit(r.charAt(h+1)),p=hn.getDigit(r.charAt(h+2));o.appendBits(d*100+m*10+p,10),h+=3}else if(h+1<l){const m=hn.getDigit(r.charAt(h+1));o.appendBits(d*10+m,7),h+=2}else o.appendBits(d,4),h++}}static appendAlphanumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=hn.getAlphanumericCode(r.charCodeAt(h));if(d===-1)throw new on;if(h+1<l){const m=hn.getAlphanumericCode(r.charCodeAt(h+1));if(m===-1)throw new on;o.appendBits(d*45+m,11),h+=2}else o.appendBits(d,6),h++}}static append8BitBytes(r,o,l){let h;try{h=K.encode(r,l)}catch(d){throw new on(d)}for(let d=0,m=h.length;d!==m;d++){const p=h[d];o.appendBits(p,8)}}static appendKanjiBytes(r,o){let l;try{l=K.encode(r,k.SJIS)}catch(d){throw new on(d)}const h=l.length;for(let d=0;d<h;d+=2){const m=l[d]&255,p=l[d+1]&255,v=m<<8&4294967295|p;let T=-1;if(v>=33088&&v<=40956?T=v-33088:v>=57408&&v<=60351&&(T=v-49472),T===-1)throw new on("Invalid byte sequence");const N=(T>>8)*192+(T&255);o.appendBits(N,13)}}static appendECI(r,o){o.appendBits(ct.ECI.getBits(),4),o.appendBits(r.getValue(),8)}}hn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),hn.DEFAULT_BYTE_MODE_ENCODING=k.UTF8.getName();class Ii{write(r,o,l,h=null){if(r.length===0)throw new R("Found empty contents");if(o<0||l<0)throw new R("Requested dimensions are too small: "+o+"x"+l);let d=vt.L,m=Ii.QUIET_ZONE_SIZE;h!==null&&(h.get(zn.ERROR_CORRECTION)!==void 0&&(d=vt.fromString(h.get(zn.ERROR_CORRECTION).toString())),h.get(zn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(zn.MARGIN).toString(),10)));const p=hn.encode(r,d,h);return this.renderResult(p,o,l,m)}writeToDom(r,o,l,h,d=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(o,l,h,d);r&&r.appendChild(m)}renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new Ze;const m=d.getWidth(),p=d.getHeight(),v=m+h*2,T=p+h*2,N=Math.max(o,v),L=Math.max(l,T),B=Math.min(Math.floor(N/v),Math.floor(L/T)),q=Math.floor((N-m*B)/2),ne=Math.floor((L-p*B)/2),re=this.createSVGElement(N,L);for(let he=0,we=ne;he<p;he++,we+=B)for(let je=0,Ve=q;je<m;je++,Ve+=B)if(d.get(je,he)===1){const De=this.createSvgRectElement(Ve,we,B,B);re.appendChild(De)}return re}createSVGElement(r,o){const l=document.createElementNS(Ii.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(r,o,l,h){const d=document.createElementNS(Ii.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",h.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Ii.QUIET_ZONE_SIZE=4,Ii.SVG_NS="http://www.w3.org/2000/svg";class $n{encode(r,o,l,h,d){if(r.length===0)throw new R("Found empty contents");if(o!==Re.QR_CODE)throw new R("Can only encode QR_CODE, but got "+o);if(l<0||h<0)throw new R(`Requested dimensions are too small: ${l}x${h}`);let m=vt.L,p=$n.QUIET_ZONE_SIZE;d!==null&&(d.get(zn.ERROR_CORRECTION)!==void 0&&(m=vt.fromString(d.get(zn.ERROR_CORRECTION).toString())),d.get(zn.MARGIN)!==void 0&&(p=Number.parseInt(d.get(zn.MARGIN).toString(),10)));const v=hn.encode(r,m,d);return $n.renderResult(v,l,h,p)}static renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new Ze;const m=d.getWidth(),p=d.getHeight(),v=m+h*2,T=p+h*2,N=Math.max(o,v),L=Math.max(l,T),B=Math.min(Math.floor(N/v),Math.floor(L/T)),q=Math.floor((N-m*B)/2),ne=Math.floor((L-p*B)/2),re=new Oe(N,L);for(let he=0,we=ne;he<p;he++,we+=B)for(let je=0,Ve=q;je<m;je++,Ve+=B)d.get(je,he)===1&&re.setRegion(Ve,we,B,B);return re}}$n.QUIET_ZONE_SIZE=4;class pl{encode(r,o,l,h,d){let m;switch(o){case Re.QR_CODE:m=new $n;break;default:throw new R("No encoder available for format "+o)}return m.encode(r,o,l,h,d)}}class fi extends Qe{constructor(r,o,l,h,d,m,p,v){if(super(m,p),this.yuvData=r,this.dataWidth=o,this.dataHeight=l,this.left=h,this.top=d,h+m>o||d+p>l)throw new R("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(m,p)}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return ee.arraycopy(this.yuvData,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ee.arraycopy(this.yuvData,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*r;ee.arraycopy(this.yuvData,d,h,p,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new fi(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+o,l,h,!1)}renderThumbnail(){const r=this.getWidth()/fi.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/fi.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*o),h=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const p=m*r;for(let v=0;v<r;v++){const T=h[d+v*fi.THUMBNAIL_SCALE_FACTOR]&255;l[p+v]=4278190080|T*65793}d+=this.dataWidth*fi.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/fi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/fi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,o){const l=this.yuvData;for(let h=0,d=this.top*this.dataWidth+this.left;h<o;h++,d+=this.dataWidth){const m=d+r/2;for(let p=d,v=d+r-1;p<m;p++,v--){const T=l[p];l[p]=l[v],l[v]=T}}}invert(){return new lt(this)}}fi.THUMBNAIL_SCALE_FACTOR=2;class Ni extends Qe{constructor(r,o,l,h,d,m,p){if(super(o,l),this.dataWidth=h,this.dataHeight=d,this.left=m,this.top=p,r.BYTES_PER_ELEMENT===4){const v=o*l,T=new Uint8ClampedArray(v);for(let N=0;N<v;N++){const L=r[N],B=L>>16&255,q=L>>7&510,ne=L&255;T[N]=(B+q+ne)/4&255}this.luminances=T}else this.luminances=r;if(h===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(r,o){if(r<0||r>=this.getHeight())throw new R("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return ee.arraycopy(this.luminances,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ee.arraycopy(this.luminances,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*r;ee.arraycopy(this.luminances,d,h,p,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new Ni(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+r,this.top+o)}invert(){return new lt(this)}}class x extends k{static forName(r){return this.getCharacterSetECIByName(r)}}class I{}I.ISO_8859_1=k.ISO8859_1;class D{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class U{static singletonList(r){return[r]}static min(r,o){return r.sort(o)[0]}}class ce{constructor(r){this.previous=r}getPrevious(){return this.previous}}class ye extends ce{constructor(r,o,l){super(r),this.value=o,this.bitCount=l}appendTo(r,o){r.appendBits(this.value,this.bitCount)}add(r,o){return new ye(this,r,o)}addBinaryShift(r,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ye(this,r,o)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+ie.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Xe extends ye{constructor(r,o,l){super(r,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(r,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(r,o){return new Xe(this,r,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Yt(O,r,o){return new Xe(O,r,o)}function jn(O,r,o){return new ye(O,r,o)}const Xt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Sn=0,Hn=1,Jn=2,gr=3,cr=4,Mo=new ye(null,0,0),Ua=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Hu(O){for(let r of O)fe.fill(r,-1);return O[Sn][cr]=0,O[Hn][cr]=0,O[Hn][Sn]=28,O[gr][cr]=0,O[Jn][cr]=0,O[Jn][Sn]=15,O}const _c=Hu(fe.createInt32Array(6,6));class Ri{constructor(r,o,l,h){this.token=r,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,o){let l=this.bitCount,h=this.token;if(r!==this.mode){let m=Ua[this.mode][r];h=jn(h,m&65535,m>>16),l+=m>>16}let d=r===Jn?4:5;return h=jn(h,o,d),new Ri(h,r,0,l+d)}shiftAndAppend(r,o){let l=this.token,h=this.mode===Jn?4:5;return l=jn(l,_c[this.mode][r],h),l=jn(l,o,5),new Ri(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(r){let o=this.token,l=this.mode,h=this.bitCount;if(this.mode===cr||this.mode===Jn){let p=Ua[l][Sn];o=jn(o,p&65535,p>>16),h+=p>>16,l=Sn}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Ri(o,l,this.binaryShiftByteCount+1,h+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=Yt(o,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ri(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let o=this.bitCount+(Ua[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?o+=Ri.calculateBinaryShiftCost(r)-Ri.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(o+=10),o<=r.bitCount}toBitArray(r){let o=[];for(let h=this.endBinaryShift(r.length).token;h!==null;h=h.getPrevious())o.unshift(h);let l=new _e;for(const h of o)h.appendTo(l,r);return l}toString(){return $.format("%s bits=%d bytes=%d",Xt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Ri.INITIAL_STATE=new Ri(Mo,Sn,0,0);function vc(O){const r=$.getCharCode(" "),o=$.getCharCode("."),l=$.getCharCode(",");O[Sn][r]=1;const h=$.getCharCode("Z"),d=$.getCharCode("A");for(let B=d;B<=h;B++)O[Sn][B]=B-d+2;O[Hn][r]=1;const m=$.getCharCode("z"),p=$.getCharCode("a");for(let B=p;B<=m;B++)O[Hn][B]=B-p+2;O[Jn][r]=1;const v=$.getCharCode("9"),T=$.getCharCode("0");for(let B=T;B<=v;B++)O[Jn][B]=B-T+2;O[Jn][l]=12,O[Jn][o]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<N.length;B++)O[gr][$.getCharCode(N[B])]=B;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<L.length;B++)$.getCharCode(L[B])>0&&(O[cr][$.getCharCode(L[B])]=B);return O}const xl=vc(fe.createInt32Array(5,256));class Va{constructor(r){this.text=r}encode(){const r=$.getCharCode(" "),o=$.getCharCode(`
`);let l=U.singletonList(Ri.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case $.getCharCode("\r"):m=p===o?2:0;break;case $.getCharCode("."):m=p===r?3:0;break;case $.getCharCode(","):m=p===r?4:0;break;case $.getCharCode(":"):m=p===r?5:0;break;default:m=0}m>0?(l=Va.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return U.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,o){const l=[];for(let h of r)this.updateStateForChar(h,o,l);return Va.simplifyStates(l)}updateStateForChar(r,o,l){let h=this.text[o]&255,d=xl[r.getMode()][h]>0,m=null;for(let p=0;p<=cr;p++){let v=xl[p][h];if(v>0){if(m==null&&(m=r.endBinaryShift(o)),!d||p===r.getMode()||p===Jn){const T=m.latchAndAppend(p,v);l.push(T)}if(!d&&_c[r.getMode()][p]>=0){const T=m.shiftAndAppend(p,v);l.push(T)}}}if(r.getBinaryShiftByteCount()>0||xl[r.getMode()][h]===0){let p=r.addBinaryShiftChar(o);l.push(p)}}static updateStateListForPair(r,o,l){const h=[];for(let d of r)this.updateStateForPair(d,o,l,h);return this.simplifyStates(h)}static updateStateForPair(r,o,l,h){let d=r.endBinaryShift(o);if(h.push(d.latchAndAppend(cr,l)),r.getMode()!==cr&&h.push(d.shiftAndAppend(cr,l)),l===3||l===4){let m=d.latchAndAppend(Jn,16-l).latchAndAppend(Jn,1);h.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(o).addBinaryShiftChar(o+1);h.push(m)}}static simplifyStates(r){let o=[];for(const l of r){let h=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}h&&o.push(l)}return o}}class Qt{constructor(){}static encodeBytes(r){return Qt.encode(r,Qt.DEFAULT_EC_PERCENT,Qt.DEFAULT_AZTEC_LAYERS)}static encode(r,o,l){let h=new Va(r).encode(),d=ie.truncDivision(h.getSize()*o,100)+11,m=h.getSize()+d,p,v,T,N,L;if(l!==Qt.DEFAULT_AZTEC_LAYERS){if(p=l<0,v=Math.abs(l),v>(p?Qt.MAX_NB_BITS_COMPACT:Qt.MAX_NB_BITS))throw new R($.format("Illegal value %s for layers",l));T=Qt.totalBitsInLayer(v,p),N=Qt.WORD_SIZE[v];let De=T-T%N;if(L=Qt.stuffBits(h,N),L.getSize()+d>De)throw new R("Data to large for user specified layer");if(p&&L.getSize()>N*64)throw new R("Data to large for user specified layer")}else{N=0,L=null;for(let De=0;;De++){if(De>Qt.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(p=De<=3,v=p?De+1:De,T=Qt.totalBitsInLayer(v,p),m>T)continue;(L==null||N!==Qt.WORD_SIZE[v])&&(N=Qt.WORD_SIZE[v],L=Qt.stuffBits(h,N));let jt=T-T%N;if(!(p&&L.getSize()>N*64)&&L.getSize()+d<=jt)break}}let B=Qt.generateCheckWords(L,T,N),q=L.getSize()/N,ne=Qt.generateModeMessage(p,v,q),re=(p?11:14)+v*4,he=new Int32Array(re),we;if(p){we=re;for(let De=0;De<he.length;De++)he[De]=De}else{we=re+1+2*ie.truncDivision(ie.truncDivision(re,2)-1,15);let De=ie.truncDivision(re,2),jt=ie.truncDivision(we,2);for(let wt=0;wt<De;wt++){let Gr=wt+ie.truncDivision(wt,15);he[De-wt-1]=jt-Gr-1,he[De+wt]=jt+Gr+1}}let je=new Oe(we);for(let De=0,jt=0;De<v;De++){let wt=(v-De)*4+(p?9:12);for(let Gr=0;Gr<wt;Gr++){let Di=Gr*2;for(let qr=0;qr<2;qr++)B.get(jt+Di+qr)&&je.set(he[De*2+qr],he[De*2+Gr]),B.get(jt+wt*2+Di+qr)&&je.set(he[De*2+Gr],he[re-1-De*2-qr]),B.get(jt+wt*4+Di+qr)&&je.set(he[re-1-De*2-qr],he[re-1-De*2-Gr]),B.get(jt+wt*6+Di+qr)&&je.set(he[re-1-De*2-Gr],he[De*2+qr])}jt+=wt*8}if(Qt.drawModeMessage(je,p,we,ne),p)Qt.drawBullsEye(je,ie.truncDivision(we,2),5);else{Qt.drawBullsEye(je,ie.truncDivision(we,2),7);for(let De=0,jt=0;De<ie.truncDivision(re,2)-1;De+=15,jt+=16)for(let wt=ie.truncDivision(we,2)&1;wt<we;wt+=2)je.set(ie.truncDivision(we,2)-jt,wt),je.set(ie.truncDivision(we,2)+jt,wt),je.set(wt,ie.truncDivision(we,2)-jt),je.set(wt,ie.truncDivision(we,2)+jt)}let Ve=new D;return Ve.setCompact(p),Ve.setSize(we),Ve.setLayers(v),Ve.setCodeWords(q),Ve.setMatrix(je),Ve}static drawBullsEye(r,o,l){for(let h=0;h<l;h+=2)for(let d=o-h;d<=o+h;d++)r.set(d,o-h),r.set(d,o+h),r.set(o-h,d),r.set(o+h,d);r.set(o-l,o-l),r.set(o-l+1,o-l),r.set(o-l,o-l+1),r.set(o+l,o-l),r.set(o+l,o-l+1),r.set(o+l,o+l-1)}static generateModeMessage(r,o,l){let h=new _e;return r?(h.appendBits(o-1,2),h.appendBits(l-1,6),h=Qt.generateCheckWords(h,28,4)):(h.appendBits(o-1,5),h.appendBits(l-1,11),h=Qt.generateCheckWords(h,40,4)),h}static drawModeMessage(r,o,l,h){let d=ie.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let p=d-3+m;h.get(m)&&r.set(p,d-5),h.get(m+7)&&r.set(d+5,p),h.get(20-m)&&r.set(p,d+5),h.get(27-m)&&r.set(d-5,p)}else for(let m=0;m<10;m++){let p=d-5+m+ie.truncDivision(m,5);h.get(m)&&r.set(p,d-7),h.get(m+10)&&r.set(d+7,p),h.get(29-m)&&r.set(p,d+7),h.get(39-m)&&r.set(d-7,p)}}static generateCheckWords(r,o,l){let h=r.getSize()/l,d=new Vs(Qt.getGF(l)),m=ie.truncDivision(o,l),p=Qt.bitsToWords(r,l,m);d.encode(p,m-h);let v=o%l,T=new _e;T.appendBits(0,v);for(const N of Array.from(p))T.appendBits(N,l);return T}static bitsToWords(r,o,l){let h=new Int32Array(l),d,m;for(d=0,m=r.getSize()/o;d<m;d++){let p=0;for(let v=0;v<o;v++)p|=r.get(d*o+v)?1<<o-v-1:0;h[d]=p}return h}static getGF(r){switch(r){case 4:return xt.AZTEC_PARAM;case 6:return xt.AZTEC_DATA_6;case 8:return xt.AZTEC_DATA_8;case 10:return xt.AZTEC_DATA_10;case 12:return xt.AZTEC_DATA_12;default:throw new R("Unsupported word size "+r)}}static stuffBits(r,o){let l=new _e,h=r.getSize(),d=(1<<o)-2;for(let m=0;m<h;m+=o){let p=0;for(let v=0;v<o;v++)(m+v>=h||r.get(m+v))&&(p|=1<<o-1-v);(p&d)===d?(l.appendBits(p&d,o),m--):p&d?l.appendBits(p,o):(l.appendBits(p|1,o),m--)}return l}static totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}Qt.DEFAULT_EC_PERCENT=33,Qt.DEFAULT_AZTEC_LAYERS=0,Qt.MAX_NB_BITS=32,Qt.MAX_NB_BITS_COMPACT=4,Qt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class yl{encode(r,o,l,h){return this.encodeWithHints(r,o,l,h,null)}encodeWithHints(r,o,l,h,d){let m=I.ISO_8859_1,p=Qt.DEFAULT_EC_PERCENT,v=Qt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(zn.CHARACTER_SET)&&(m=x.forName(d.get(zn.CHARACTER_SET).toString())),d.has(zn.ERROR_CORRECTION)&&(p=ie.parseInt(d.get(zn.ERROR_CORRECTION).toString())),d.has(zn.AZTEC_LAYERS)&&(v=ie.parseInt(d.get(zn.AZTEC_LAYERS).toString()))),yl.encodeLayers(r,o,l,h,m,p,v)}static encodeLayers(r,o,l,h,d,m,p){if(o!==Re.AZTEC)throw new R("Can only encode AZTEC, but got "+o);let v=Qt.encode($.getBytes(r,d),m,p);return yl.renderResult(v,l,h)}static renderResult(r,o,l){let h=r.getMatrix();if(h==null)throw new Ze;let d=h.getWidth(),m=h.getHeight(),p=Math.max(o,d),v=Math.max(l,m),T=Math.min(p/d,v/m),N=(p-d*T)/2,L=(v-m*T)/2,B=new Oe(p,v);for(let q=0,ne=L;q<m;q++,ne+=T)for(let re=0,he=N;re<d;re++,he+=T)h.get(re,q)&&B.setRegion(he,ne,T,T);return B}}t.AbstractExpandedDecoder=kn,t.ArgumentException=S,t.ArithmeticException=An,t.AztecCode=D,t.AztecCodeReader=Pi,t.AztecCodeWriter=yl,t.AztecDecoder=it,t.AztecDetector=Ls,t.AztecDetectorResult=Br,t.AztecEncoder=Qt,t.AztecHighLevelEncoder=Va,t.AztecPoint=Kn,t.BarcodeFormat=Re,t.Binarizer=Y,t.BinaryBitmap=P,t.BitArray=_e,t.BitMatrix=Oe,t.BitSource=ni,t.BrowserAztecCodeReader=Bi,t.BrowserBarcodeReader=yc,t.BrowserCodeReader=He,t.BrowserDatamatrixCodeReader=Ba,t.BrowserMultiFormatReader=dl,t.BrowserPDF417Reader=gl,t.BrowserQRCodeReader=Do,t.BrowserQRCodeSvgWriter=Ii,t.CharacterSetECI=k,t.ChecksumException=F,t.Code128Reader=Le,t.Code39Reader=Cn,t.DataMatrixDecodedBitStreamParser=Vi,t.DataMatrixReader=vi,t.DecodeHintType=ke,t.DecoderResult=nt,t.DefaultGridSampler=yn,t.DetectorResult=fr,t.EAN13Reader=qn,t.EncodeHintType=zn,t.Exception=w,t.FormatException=z,t.GenericGF=xt,t.GenericGFPoly=gt,t.GlobalHistogramBinarizer=Ie,t.GridSampler=xi,t.GridSamplerInstance=Ln,t.HTMLCanvasElementLuminanceSource=te,t.HybridBinarizer=Ae,t.ITFReader=Ot,t.IllegalArgumentException=R,t.IllegalStateException=Ze,t.InvertedLuminanceSource=lt,t.LuminanceSource=Qe,t.MathUtils=mt,t.MultiFormatOneDReader=dr,t.MultiFormatReader=Us,t.MultiFormatWriter=pl,t.NotFoundException=oe,t.OneDReader=un,t.PDF417DecodedBitStreamParser=xe,t.PDF417DecoderErrorCorrection=ss,t.PDF417Reader=lr,t.PDF417ResultMetadata=na,t.PerspectiveTransform=en,t.PlanarYUVLuminanceSource=fi,t.QRCodeByteMatrix=Fs,t.QRCodeDataMask=or,t.QRCodeDecodedBitStreamParser=mn,t.QRCodeDecoderErrorCorrectionLevel=vt,t.QRCodeDecoderFormatInformation=Pn,t.QRCodeEncoder=hn,t.QRCodeEncoderQRCode=Hr,t.QRCodeMaskUtil=Tn,t.QRCodeMatrixUtil=ut,t.QRCodeMode=ct,t.QRCodeReader=Ci,t.QRCodeVersion=qe,t.QRCodeWriter=$n,t.RGBLuminanceSource=Ni,t.RSS14Reader=Ft,t.RSSExpandedReader=me,t.ReaderException=js,t.ReedSolomonDecoder=st,t.ReedSolomonEncoder=Vs,t.ReedSolomonException=We,t.Result=ze,t.ResultMetadataType=Fe,t.ResultPoint=Ge,t.StringUtils=$,t.UnsupportedOperationException=G,t.VideoInputDevice=Ne,t.WhiteRectangleDetector=It,t.WriterException=on,t.ZXingArrays=fe,t.ZXingCharset=x,t.ZXingInteger=ie,t.ZXingStandardCharsets=I,t.ZXingStringBuilder=X,t.ZXingStringEncoding=K,t.ZXingSystem=ee,t.createAbstractExpandedDecoder=Ee,Object.defineProperty(t,"__esModule",{value:!0})})}(gu,gu.exports)),gu.exports}var Un=YN();const XN=P1(Un),QN=Kv({__proto__:null,default:XN},[Un]);var by=function(){function i(e,t,a){if(this.formatMap=new Map([[Je.QR_CODE,Un.BarcodeFormat.QR_CODE],[Je.AZTEC,Un.BarcodeFormat.AZTEC],[Je.CODABAR,Un.BarcodeFormat.CODABAR],[Je.CODE_39,Un.BarcodeFormat.CODE_39],[Je.CODE_93,Un.BarcodeFormat.CODE_93],[Je.CODE_128,Un.BarcodeFormat.CODE_128],[Je.DATA_MATRIX,Un.BarcodeFormat.DATA_MATRIX],[Je.MAXICODE,Un.BarcodeFormat.MAXICODE],[Je.ITF,Un.BarcodeFormat.ITF],[Je.EAN_13,Un.BarcodeFormat.EAN_13],[Je.EAN_8,Un.BarcodeFormat.EAN_8],[Je.PDF_417,Un.BarcodeFormat.PDF_417],[Je.RSS_14,Un.BarcodeFormat.RSS_14],[Je.RSS_EXPANDED,Un.BarcodeFormat.RSS_EXPANDED],[Je.UPC_A,Un.BarcodeFormat.UPC_A],[Je.UPC_E,Un.BarcodeFormat.UPC_E],[Je.UPC_EAN_EXTENSION,Un.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!QN)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=a;var c=this.createZXingFormats(e),f=new Map;f.set(Un.DecodeHintType.POSSIBLE_FORMATS,c),f.set(Un.DecodeHintType.TRY_HARDER,!1),this.hints=f}return i.prototype.decodeAsync=function(e){var t=this;return new Promise(function(a,c){try{a(t.decode(e))}catch(f){c(f)}})},i.prototype.decode=function(e){var t=new Un.MultiFormatReader(this.verbose,this.hints),a=new Un.HTMLCanvasElementLuminanceSource(e),c=new Un.BinaryBitmap(new Un.HybridBinarizer(a)),f=t.decode(c);return{text:f.text,format:N_.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,c){e.set(t,a)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var t=[],a=0,c=e;a<c.length;a++){var f=c[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return t},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}(),WN=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function _(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,_)}w((a=a.apply(i,e||[])).next())})},KN=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return _([w,S])}}function _(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Ay=function(){function i(e,t,a){if(this.formatMap=new Map([[Je.QR_CODE,"qr_code"],[Je.AZTEC,"aztec"],[Je.CODABAR,"codabar"],[Je.CODE_39,"code_39"],[Je.CODE_93,"code_93"],[Je.CODE_128,"code_128"],[Je.DATA_MATRIX,"data_matrix"],[Je.ITF,"itf"],[Je.EAN_13,"ean_13"],[Je.EAN_8,"ean_8"],[Je.PDF_417,"pdf417"],[Je.UPC_A,"upc_a"],[Je.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=a;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return WN(this,void 0,void 0,function(){var t,a;return KN(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(t),[2,{text:a.rawValue,format:N_.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var t=null,a=0,c=0,f=e;c<f.length;c++){var y=f[c],b=y.boundingBox.width*y.boundingBox.height;b>a&&(a=b,t=y)}if(!t)throw"No largest barcode found";return t},i.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],a=0,c=e;a<c.length;a++){var f=c[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,c){e.set(t,a)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}(),Cy=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function _(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,_)}w((a=a.apply(i,e||[])).next())})},Ty=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return _([w,S])}}function _(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},ZN=function(){function i(e,t,a,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,t&&Ay.isSupported()?(this.primaryDecoder=new Ay(e,a,c),this.secondaryDecoder=new by(e,a,c)):this.primaryDecoder=new by(e,a,c)}return i.prototype.decodeAsync=function(e){return Cy(this,void 0,void 0,function(){var t;return Ty(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return Cy(this,void 0,void 0,function(){var t,a;return Ty(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(a=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw a;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,a=this.executionResults;t<a.length;t++){var c=a[t];e+=c}var f=e/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}(),zg=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),Df=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function _(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,_)}w((a=a.apply(i,e||[])).next())})},Mf=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return _([w,S])}}function _(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},O_=function(){function i(e,t){this.name=e,this.track=t}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var t={};t[this.name]=e;var a={advanced:[t]};return this.track.applyConstraints(a)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},i}(),$N=function(i){zg(e,i);function e(t,a){return i.call(this,t,a)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var a={};a[this.name]=t;var c={advanced:[a]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),a=t[this.name];return{min:a.min,max:a.max,step:a.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(O_),JN=function(i){zg(e,i);function e(t){return i.call(this,"zoom",t)||this}return e}($N),eR=function(i){zg(e,i);function e(t){return i.call(this,"torch",t)||this}return e}(O_),tR=function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new JN(this.track)},i.prototype.torchFeature=function(){return new eR(this.track)},i}(),nR=function(){function i(e,t,a){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var a=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(a,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,t,a,c){return Df(this,void 0,void 0,function(){var f,y;return Mf(this,function(b){switch(b.label){case 0:return f=new i(e,t,c),a.aspectRatio?(y={aspectRatio:a.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:b.sent(),b.label=2;case 2:return f.setupSurface(),[2,f]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var t=this,a=function(){setTimeout(e,200),t.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return Df(this,void 0,void 0,function(){return Mf(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,a){var c=e.mediaStream.getVideoTracks(),f=c.length,y=0;e.mediaStream.getVideoTracks().forEach(function(b){e.mediaStream.removeTrack(b),b.stop(),++y,y>=f&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},i.prototype.getCapabilities=function(){return new tR(this.getFirstTrackOrFail())},i}(),rR=function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,t,a){return Df(this,void 0,void 0,function(){return Mf(this,function(c){return[2,nR.create(e,this.mediaStream,t,a)]})})},i.create=function(e){return Df(this,void 0,void 0,function(){var t,a;return Mf(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return a=c.sent(),[2,new i(a)]}})})},i}(),Sy=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function _(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,_)}w((a=a.apply(i,e||[])).next())})},Iy=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return _([w,S])}}function _(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},iR=function(){function i(){}return i.failIfNotSupported=function(){return Sy(this,void 0,void 0,function(){return Iy(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return Sy(this,void 0,void 0,function(){return Iy(this,function(t){return[2,rR.create(e)]})})},i}(),sR=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function _(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,_)}w((a=a.apply(i,e||[])).next())})},aR=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return _([w,S])}}function _(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},oR=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=Ql.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=Ql.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return sR(this,void 0,void 0,function(){var e,t,a,c,f,y,b;return aR(this,function(_){switch(_.label){case 0:return e=function(w){for(var S=w.getVideoTracks(),R=0,P=S;R<P.length;R++){var F=P[R];F.enabled=!1,F.stop(),w.removeTrack(F)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=_.sent(),c=[],f=0,y=a;f<y.length;f++)b=y[f],b.kind==="videoinput"&&c.push({id:b.deviceId,label:b.label});return e(t),[2,c]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var a=function(f){for(var y=[],b=0,_=f;b<_.length;b++){var w=_[b];w.kind==="video"&&y.push({id:w.id,label:w.label})}e(y)},c=MediaStreamTrack;c.getSources(a)})},i}(),ir;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(ir||(ir={}));var lR=function(){function i(){this.state=ir.NOT_STARTED,this.onGoingTransactionNewState=ir.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===ir.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ir.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===ir.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ir.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ir.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case ir.UNKNOWN:throw"Transition from unknown is not allowed";case ir.NOT_STARTED:this.failIfNewStateIs(e,[ir.PAUSED]);break;case ir.SCANNING:break;case ir.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,t){for(var a=0,c=t;a<c.length;a++){var f=c[a];if(e===f)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i}(),cR=function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===ir.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==ir.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ir.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===ir.PAUSED},i}(),uR=function(){function i(){}return i.create=function(){return new cR(new lR)},i}(),hR=function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),Wi=function(i){hR(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Ss),fR=function(){function i(e,t){this.logger=t,this.fps=Wi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Wi.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?M_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!Xs(this.qrbox)},i.create=function(e,t){return new i(e,t)},i}(),Ny=function(){function i(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var a;typeof t=="boolean"?this.verbose=t===!0:t&&(a=t,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new D_(this.verbose),this.qrcode=new ZN(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=uR.create()}return i.prototype.start=function(e,t,a,c){var f=this;if(!e)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;c?y=c:y=this.verbose?this.logger.log:function(){};var b=fR.create(t,this.logger);this.clearElement();var _=!1;b.videoConstraints&&(b.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=_,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Wi.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var R=this,P=this.stateManagerProxy.startTransition(ir.SCANNING);return new Promise(function(F,Y){var ee=w?b.videoConstraints:R.createVideoConstraints(e);if(!ee){P.cancel(),Y("videoConstraints should be defined");return}var W={};(!w||b.aspectRatio)&&(W.aspectRatio=b.aspectRatio);var de={onRenderSurfaceReady:function(fe,ie){R.setupUi(fe,ie,b),R.isScanning=!0,R.foreverScan(b,a,y)}};iR.failIfNotSupported().then(function(fe){fe.create(ee).then(function(ie){return ie.render(f.element,W,de).then(function(_e){R.renderedCamera=_e,P.execute(),F(null)}).catch(function(_e){P.cancel(),Y(_e)})}).catch(function(ie){P.cancel(),Y(Ql.errorGettingUserMedia(ie))})}).catch(function(fe){P.cancel(),Y(Ql.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ir.PAUSED),this.showPausedState(),(Xs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(ir.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(ir.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(e.element){var f=document.getElementById(Wi.SHADED_REGION_ELEMENT_ID);f&&e.element.removeChild(f)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),a(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(a){return a.decodedText})},i.prototype.scanFileV2=function(e,t){var a=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Xs(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,f){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(e);var y=new Image;y.onload=function(){var b=y.width,_=y.height,w=document.getElementById(a.elementId),S=w.clientWidth?w.clientWidth:Wi.DEFAULT_WIDTH,R=Math.max(w.clientHeight?w.clientHeight:_,Wi.FILE_SCAN_MIN_HEIGHT),P=a.computeCanvasDrawConfig(b,_,S,R);if(t){var F=a.createCanvasElement(S,R,"qr-canvas-visible");F.style.display="inline-block",w.appendChild(F);var Y=F.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=S,Y.canvas.height=R,Y.drawImage(y,0,0,b,_,P.x,P.y,P.width,P.height)}var ee=Wi.FILE_SCAN_HIDDEN_CANVAS_PADDING,W=Math.max(y.width,P.width),de=Math.max(y.height,P.height),fe=W+2*ee,ie=de+2*ee,_e=a.createCanvasElement(fe,ie);w.appendChild(_e);var Be=_e.getContext("2d");if(!Be)throw"Unable to get 2d context from canvas";Be.canvas.width=fe,Be.canvas.height=ie,Be.drawImage(y,0,0,b,_,ee,ee,W,de);try{a.qrcode.decodeRobustlyAsync(_e).then(function(ke){c(Ey.createFromQrcodeResult(ke))}).catch(f)}catch(ke){f("QR code parse error, error = ".concat(ke))}},y.onerror=f,y.onabort=f,y.onstalled=f,y.onsuspend=f,y.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return oR.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!M_.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var t=[Je.QR_CODE,Je.AZTEC,Je.CODABAR,Je.CODE_39,Je.CODE_93,Je.CODE_128,Je.DATA_MATRIX,Je.MAXICODE,Je.ITF,Je.EAN_13,Je.EAN_8,Je.PDF_417,Je.RSS_14,Je.RSS_EXPANDED,Je.UPC_A,Je.UPC_E,Je.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],c=0,f=e.formatsToSupport;c<f.length;c++){var y=f[c];HN(y)?a.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Xs(e))return!0;if(!Xs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Xs(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Xs(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,t,a){var c=this,f=a.qrbox;this.validateQrboxConfig(f);var y=this.toQrdimensions(e,t,f),b=function(w){if(w<Wi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Wi.MIN_QR_BOX_SIZE,"px.")},_=function(w){return w>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};b(y.width),b(y.height),y.width=_(y.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,t,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return a},i.prototype.setupUi=function(e,t,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,a);var c=Xs(a.qrbox)?{width:e,height:t}:a.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(e,t,c);f.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=a.isShadedBoxEnabled()&&f.height<=t,b={x:0,y:0,width:e,height:t},_=y?this.getShadedRegionBounds(e,t,f):b,w=this.createCanvasElement(_.width,_.height),S={willReadFrequently:!0},R=w.getContext("2d",S);R.canvas.width=_.width,R.canvas.height=_.height,this.element.append(w),y&&this.possiblyInsertShadingElement(this.element,e,t,f),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=R,this.canvasElement=w},i.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Ql.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},i.prototype.scanContext=function(e,t){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,Ey.createFromQrcodeResult(c)),a.possiblyUpdateShaders(!0),!0}).catch(function(c){a.possiblyUpdateShaders(!1);var f=Ql.codeParseError(c);return t(f,R_.createFrom(f)),!1})},i.prototype.foreverScan=function(e,t,a){var c=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),y=f.videoWidth/f.clientWidth,b=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*y,w=this.qrRegion.height*b,S=this.qrRegion.x*y,R=this.qrRegion.y*b;this.context.drawImage(f,S,R,_,w,0,0,this.qrRegion.width,this.qrRegion.height);var P=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,a)},c.getTimeoutFps(e.fps))};this.scanContext(t,a).then(function(F){!F&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,a).finally(function(){P()})):P()}).catch(function(F){c.logger.logError("Error happend while scanning context",F),P()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",a="deviceId",c={user:!0,environment:!0},f="exact",y=function(Y){if(Y in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Y,"'")},b=Object.keys(e);if(b.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(b.length," keys");var _=Object.keys(e)[0];if(_!==t&&_!==a)throw"Only '".concat(t,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(_===t){var w=e.facingMode;if(typeof w=="string"){if(y(w))return{facingMode:w}}else if(typeof w=="object")if(f in w){if(y(w["".concat(f)]))return{facingMode:{exact:w["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var S=typeof w;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var R=e.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(f in R)return{deviceId:{exact:R["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var P=typeof R;throw"Invalid type of 'deviceId' = ".concat(P)}}}var F=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(F)},i.prototype.computeCanvasDrawConfig=function(e,t,a,c){if(e<=a&&t<=c){var f=(a-e)/2,y=(c-t)/2;return{x:f,y,width:e,height:t}}else{var b=e,_=t;return e>a&&(t=a/e*t,e=a),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(b,"X").concat(_)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,a,c)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Wi.BORDER_SHADER_MATCH_COLOR:Wi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,t,a){var c=e,f=t,y=document.createElement("canvas");return y.style.width="".concat(c,"px"),y.style.height="".concat(f,"px"),y.style.display="none",y.id=Xs(a)?"qr-canvas":a,y},i.prototype.getShadedRegionBounds=function(e,t,a){if(a.width>e||a.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-a.width)/2,y:(t-a.height)/2,width:a.width,height:a.height}},i.prototype.possiblyInsertShadingElement=function(e,t,a,c){if(!(t-c.width<1||a-c.height<1)){var f=document.createElement("div");f.style.position="absolute";var y=(t-c.width)/2,b=(a-c.height)/2;if(f.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(Wi.SHADED_REGION_ELEMENT_ID),t-c.width<11||a-c.height<11)this.hasBorderShaders=!1;else{var _=5,w=40;this.insertShaderBorders(f,w,_,-_,null,0,!0),this.insertShaderBorders(f,w,_,-_,null,0,!1),this.insertShaderBorders(f,w,_,null,-_,0,!0),this.insertShaderBorders(f,w,_,null,-_,0,!1),this.insertShaderBorders(f,_,w+_,-_,null,-_,!0),this.insertShaderBorders(f,_,w+_,null,-_,-_,!0),this.insertShaderBorders(f,_,w+_,-_,null,-_,!1),this.insertShaderBorders(f,_,w+_,null,-_,-_,!1),this.hasBorderShaders=!0}e.append(f)}},i.prototype.insertShaderBorders=function(e,t,a,c,f,y,b){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=Wi.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(t,"px"),_.style.height="".concat(a,"px"),c!==null&&(_.style.top="".concat(c,"px")),f!==null&&(_.style.bottom="".concat(f,"px")),b?_.style.left="".concat(y,"px"):_.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),e.appendChild(_)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i}(),Hg="data:image/svg+xml;base64,",dR=Hg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",gR=Hg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Ry=Hg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",mR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Dy=function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i}(),pR=function(){function i(){this.data=Dy.createDefault();var e=localStorage.getItem(i.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},i.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=Dy.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i}(),xR=function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=_y.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var a=document.createElement("br"),c=document.createElement("br");this.infoDiv.appendChild(a),this.infoDiv.appendChild(c);var f=document.createElement("a");f.innerText=_y.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),e.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i}(),yR=function(){function i(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Ry,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(a){return t.onHoverIn()},this.infoIcon.onmouseout=function(a){return t.onHoverOut()},this.infoIcon.onclick=function(a){return t.onClick()},e.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=mR,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Ry,this.infoIcon.style.opacity="0.6")},i}(),wR=function(){function i(){var e=this;this.infoDiv=new xR,this.infoIcon=new yR(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return i.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},i}(),ER=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function _(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,_)}w((a=a.apply(i,e||[])).next())})},_R=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return _([w,S])}}function _(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},My=function(){function i(){}return i.hasPermissions=function(){return ER(this,void 0,void 0,function(){var e,t,a,c;return _R(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=f.sent(),t=0,a=e;t<a.length;t++)if(c=a[t],c.kind==="videoinput"&&c.label)return[2,!0];return[2,!1]}})})},i}(),lo=function(){function i(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var a=t[e];if(i.isCameraScanType(a))return!0}return!1},i.isCameraScanType=function(e){return e===To.SCAN_TYPE_CAMERA},i.isFileScanType=function(e){return e===To.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Ss.DEFAULT_SUPPORTED_SCAN_TYPE;var t=Ss.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var a=0,c=e;a<c.length;a++){var f=c[a];if(!Ss.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return e},i}(),Zi=function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i}(),Sa=function(){function i(){}return i.createElement=function(e,t){var a=document.createElement(e);return a.id=t,a.classList.add(Zi.ALL_ELEMENT_CLASS),e==="button"&&a.setAttribute("type","button"),a},i}(),L_=function(i,e,t,a){function c(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function b(S){try{w(a.next(S))}catch(R){y(R)}}function _(S){try{w(a.throw(S))}catch(R){y(R)}}function w(S){S.done?f(S.value):c(S.value).then(b,_)}w((a=a.apply(i,e||[])).next())})},k_=function(i,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,y;return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(w){return function(S){return _([w,S])}}function _(w){if(a)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(t=0)),t;)try{if(a=1,c&&(f=w[0]&2?c.return:w[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,w[1])).done)return f;switch(c=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,c=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){t.label=w[1];break}if(w[0]===6&&t.label<f[1]){t.label=f[1],f=w;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(w);break}f[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(i,t)}catch(S){w=[6,S],c=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Oy=function(){function i(e,t,a){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=a}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return L_(this,void 0,void 0,function(){var e,t;return k_(this,function(a){switch(a.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return a.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=a.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?xn.torchOffButton():xn.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},i.prototype.propagateFailure=function(e,t){var a=e?xn.torchOnFailedMessage():xn.torchOffFailedMessage();t&&(a+="; Error = "+t),this.onTorchActionFailureCallback(a)},i.prototype.reset=function(){this.isTorchOn=!1},i}(),vR=function(){function i(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Sa.createElement("button",Zi.TORCH_BUTTON_ID),this.torchController=new Oy(e,this,t)}return i.prototype.render=function(e,t){var a=this;this.torchButton.innerText=xn.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var c=this;this.torchButton.addEventListener("click",function(f){return L_(a,void 0,void 0,function(){return k_(this,function(y){switch(y.label){case 0:return[4,c.torchController.flipState()];case 1:return y.sent(),c.torchController.isTorchEnabled()?(c.torchButton.classList.remove(Zi.TORCH_BUTTON_CLASS_TORCH_OFF),c.torchButton.classList.add(Zi.TORCH_BUTTON_CLASS_TORCH_ON)):(c.torchButton.classList.remove(Zi.TORCH_BUTTON_CLASS_TORCH_ON),c.torchButton.classList.add(Zi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(e){this.torchController=new Oy(e,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(e){this.torchButton.innerText=e},i.prototype.reset=function(){this.torchButton.innerText=xn.torchOnButton(),this.torchController.reset()},i.create=function(e,t,a,c){var f=new i(t,c);return f.render(e,a),f},i}(),bR=function(){function i(e,t,a){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var c=document.createElement("label");c.setAttribute("for",this.getFileScanInputId()),c.style.display="inline-block",this.fileBasedScanRegion.appendChild(c),this.fileSelectionButton=Sa.createElement("button",Zi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(b){c.click()}),c.append(this.fileSelectionButton),this.fileScanInput=Sa.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",c.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(b){if(!(b==null||b.target==null)){var _=b.target;if(!(_.files&&_.files.length===0)){var w=_.files,S=w[0],R=S.name;f.setImageNameToButton(R),a(S)}}});var y=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(y),this.fileBasedScanRegion.addEventListener("dragenter",function(b){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(b){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(b){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(b){b.stopPropagation(),b.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var _=b.dataTransfer;if(_){var w=_.files;if(!w||w.length===0)return;for(var S=!1,R=0;R<w.length;++R){var P=w.item(R);if(P){var F=/image.*/;if(P.type.match(F)){S=!0;var Y=P.name;f.setImageNameToButton(Y),a(P),y.innerText=xn.dragAndDropMessage();break}}}S||(y.innerText=xn.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=xn.dragAndDropMessage(),e.style.fontWeight="400",e},i.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var a=e.substring(0,8),c=e.length,f=e.substring(c-8,c);e="".concat(a,"....").concat(f)}var y=xn.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=y},i.prototype.setInitialValueToButton=function(){var e=xn.fileSelectionChooseImage()+" - "+xn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(e,t,a){var c=new i(e,t,a);return c},i}(),AR=function(){function i(e){this.selectElement=Sa.createElement("select",Zi.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return i.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var a=this.cameras.length;if(a===0)throw new Error("No cameras found");if(a===1)t.style.display="none";else{var c=xn.selectCamera();t.innerText="".concat(c," (").concat(this.cameras.length,")  ")}for(var f=1,y=0,b=this.cameras;y<b.length;y++){var _=b[y],w=_.id,S=_.label==null?w:_.label;(!S||S==="")&&(S=[xn.anonymousCameraPrefix(),f++].join(" "));var R=document.createElement("option");R.value=w,R.innerText=S,this.options.push(R),this.selectElement.appendChild(R)}t.appendChild(this.selectElement),e.appendChild(t)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(e){for(var t=0,a=this.options;t<a.length;t++){var c=a[t];if(c.value===e)return!0}return!1},i.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(e,t){var a=new i(t);return a.render(e),a},i}(),CR=function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Sa.createElement("input",Zi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var a=xn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.rangeText.style.marginRight="10px";var c=this;this.rangeInput.addEventListener("input",function(){return c.onValueChange()}),this.rangeInput.addEventListener("change",function(){return c.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var e=xn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(e,t,a,c){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=c.toString(),this.rangeInput.value=a.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(e,t){var a=new i;return a.render(e,t),a},i}(),Ki;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ki||(Ki={}));function TR(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function SR(i,e){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:e}}var Ly=function(){function i(e,t,a){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=a===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new lo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new D_(this.verbose),this.persistedDataManager=new pR,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(e,t){var a=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,y){if(e)e(f,y);else{if(a.lastMatchFound===f)return;a.lastMatchFound=f,a.setHeaderMessage(xn.lastMatch(f),Ki.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,y){t&&t(f,y)};var c=document.getElementById(this.elementId);if(!c)throw"HTML Element with id=".concat(this.elementId," not found");c.innerHTML="",this.createBasicLayout(c),this.html5Qrcode=new Ny(this.getScanRegionId(),SR(this.config,this.verbose))},i.prototype.pause=function(e){(Xs(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var e=this,t=function(){var a=document.getElementById(e.elementId);a&&(a.innerHTML="",e.resetBasicLayout(a))};return this.html5Qrcode?new Promise(function(a,c){if(!e.html5Qrcode){a();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(f){if(!e.html5Qrcode){a();return}e.html5Qrcode.clear(),t(),a()}).catch(function(f){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",f),c(f)}):(e.html5Qrcode.clear(),t(),a())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Ss.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Ss.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Ss.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Ss.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Ss.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ss.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ss.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),a=this.getScanRegionId();t.id=a,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),lo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var c=document.createElement("div"),f=this.getDashboardId();c.id=f,c.style.width="100%",e.appendChild(c),this.setupInitialDashboard(c)},i.prototype.resetBasicLayout=function(e){e.style.border="none"},i.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var a=new wR;a.renderInto(t);var c=document.createElement("div");c.id=this.getHeaderMessageContainerId(),c.style.display="none",c.style.textAlign="center",c.style.fontSize="14px",c.style.padding="2px 10px",c.style.margin="4px",c.style.borderTop="1px solid #f6f6f6",t.appendChild(c)},i.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},i.prototype.createCameraListUi=function(e,t,a){var c=this;c.showHideScanTypeSwapLink(!1),c.setHeaderMessage(xn.cameraPermissionRequesting());var f=function(){a||c.createPermissionButton(e,t)};Ny.getCameras().then(function(y){c.persistedDataManager.setHasPermission(!0),c.showHideScanTypeSwapLink(!0),c.resetHeaderMessage(),y&&y.length>0?(e.removeChild(t),c.renderCameraSelection(y)):(c.setHeaderMessage(xn.noCameraFound(),Ki.STATUS_WARNING),f())}).catch(function(y){c.persistedDataManager.setHasPermission(!1),a?a.disabled=!1:f(),c.setHeaderMessage(y,Ki.STATUS_WARNING),c.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(e,t){var a=this,c=Sa.createElement("button",this.getCameraPermissionButtonId());c.innerText=xn.cameraPermissionTitle(),c.addEventListener("click",function(){c.disabled=!0,a.createCameraListUi(e,t,c)}),t.appendChild(c)},i.prototype.createPermissionsUi=function(e,t){var a=this;if(lo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){My.hasPermissions().then(function(c){c?a.createCameraListUi(e,t):(a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t))}).catch(function(c){a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},i.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var a=document.createElement("div");a.id=this.getDashboardSectionCameraScanRegionId(),a.style.display=lo.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(a);var c=document.createElement("div");c.style.textAlign="center",a.appendChild(c),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(a,c),this.renderFileScanUi(t)},i.prototype.renderFileScanUi=function(e){var t=lo.isFileScanType(this.currentScanType),a=this,c=function(f){if(!a.html5Qrcode)throw"html5Qrcode not defined";lo.isFileScanType(a.currentScanType)&&(a.setHeaderMessage(xn.loadingImage()),a.html5Qrcode.scanFileV2(f,!0).then(function(y){a.resetHeaderMessage(),a.qrCodeSuccessCallback(y.decodedText,y)}).catch(function(y){a.setHeaderMessage(y,Ki.STATUS_WARNING),a.qrCodeErrorCallback(y,R_.createFrom(y))}))};this.fileSelectionUi=bR.create(e,t,c)},i.prototype.renderCameraSelection=function(e){var t=this,a=this,c=document.getElementById(this.getDashboardSectionCameraScanRegionId());c.style.textAlign="center";var f=CR.create(c,!1),y=function(ee){var W=ee.zoomFeature();if(W.isSupported()){f.setOnCameraZoomValueChangeCallback(function(fe){W.apply(fe)});var de=1;t.config.defaultZoomValueIfSupported&&(de=t.config.defaultZoomValueIfSupported),de=GN(de,W.min(),W.max()),f.setValues(W.min(),W.max(),de,W.step()),f.show()}},b=AR.create(c,e),_=document.createElement("span"),w=Sa.createElement("button",Zi.CAMERA_START_BUTTON_ID);w.innerText=xn.scanButtonStartScanningText(),_.appendChild(w);var S=Sa.createElement("button",Zi.CAMERA_STOP_BUTTON_ID);S.innerText=xn.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,_.appendChild(S);var R,P=function(ee){if(!ee.torchFeature().isSupported()){R&&R.hide();return}R?R.updateTorchCapability(ee.torchFeature()):R=vR.create(_,ee.torchFeature(),{display:"none",marginLeft:"5px"},function(W){a.setHeaderMessage(W,Ki.STATUS_WARNING)}),R.show()};c.appendChild(_);var F=function(ee){ee||(w.style.display="none"),w.innerText=xn.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,ee&&(w.style.display="inline-block")};if(w.addEventListener("click",function(ee){w.innerText=xn.scanButtonScanningStarting(),b.disable(),w.disabled=!0,w.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!1),a.resetHeaderMessage();var W=b.getValue();a.persistedDataManager.setLastUsedCameraId(W),a.html5Qrcode.start(W,TR(a.config),a.qrCodeSuccessCallback,a.qrCodeErrorCallback).then(function(de){S.disabled=!1,S.style.display="inline-block",F(!1);var fe=a.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&P(fe),t.config.showZoomSliderIfSupported===!0&&y(fe)}).catch(function(de){a.showHideScanTypeSwapLink(!0),b.enable(),F(!0),a.setHeaderMessage(de,Ki.STATUS_WARNING)})}),b.hasSingleItem()&&w.click(),S.addEventListener("click",function(ee){if(!a.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,a.html5Qrcode.stop().then(function(W){t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!0),b.enable(),w.disabled=!1,S.style.display="none",w.style.display="inline-block",R&&(R.reset(),R.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),a.insertCameraScanImageToScanRegion()}).catch(function(W){S.disabled=!1,a.setHeaderMessage(W,Ki.STATUS_WARNING)})}),a.persistedDataManager.getLastUsedCameraId()){var Y=a.persistedDataManager.getLastUsedCameraId();b.hasValue(Y)?(b.setValue(Y),w.click()):a.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var e=this,t=xn.textIfCameraScanSelected(),a=xn.textIfFileScanSelected(),c=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var y=Sa.createElement("span",this.getDashboardSectionSwapLinkId());y.style.textDecoration="underline",y.style.cursor="pointer",y.innerText=lo.isCameraScanType(this.currentScanType)?t:a,y.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,lo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),y.innerText=a,e.currentScanType=To.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),y.innerText=t,e.currentScanType=To.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),f.appendChild(y),c.appendChild(f)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){My.hasPermissions().then(function(a){if(a){var c=document.getElementById(t.getCameraPermissionButtonId());if(!c)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";c.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(a){t.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},i.prototype.setHeaderMessage=function(e,t){t||(t=Ki.STATUS_DEFAULT);var a=this.getHeaderMessageDiv();switch(a.innerText=e,a.style.display="block",t){case Ki.STATUS_SUCCESS:a.style.background="rgba(106, 175, 80, 0.26)",a.style.color="#477735";break;case Ki.STATUS_WARNING:a.style.background="rgba(203, 36, 49, 0.14)",a.style.color="#cb2431";break;case Ki.STATUS_DEFAULT:default:a.style.background="rgba(0, 0, 0, 0)",a.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=dR,this.cameraScanImage.alt=xn.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=gR,this.fileScanImage.alt=xn.fileScanAltText()},i.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return Zi.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return Zi.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i}();function IR(){var Fe,nt,tt,gt,An,xt;const i=So(Ds),e=ul(Ds),t=i.currentUser,a=ea();J.useEffect(()=>{console.log("Current user:",t),console.log("User is authenticated:",!!t)},[t]);const[c,f]=J.useState([]),[y,b]=J.useState(null),[_,w]=J.useState(!0),[S,R]=J.useState(null),[P,F]=J.useState([]),[Y,ee]=J.useState({}),[W,de]=J.useState(!1),[fe,ie]=J.useState(!1),[_e,Be]=J.useState(""),[ke,z]=J.useState({type:"",text:""}),V=J.useRef(null),[k,G]=J.useState(!1),[K,$]=J.useState({type:"",text:""}),[X,Oe]=J.useState(!1),oe=J.useRef(null),[Ie,Ae]=J.useState([]);J.useEffect(()=>{if(!t){a("/");return}const We=async()=>{try{const st=kt(e,"users",t.uid),at=await kr(st);at.exists()&&b(at.data())}catch(st){console.error("Error loading user profile:",st)}},Ze=async()=>{try{w(!0);const st=Iu(hy(e,"students"),Nu("stdid","==",t.uid)),at=await Cr(st),it=[];at.forEach(Ge=>{const fr=Ge.ref.parent.parent;fr&&it.push(kr(fr))});const _t=(await Promise.all(it)).map(Ge=>({id:Ge.id,...Ge.data()})).filter(Ge=>Ge.info&&Ge.info.name);f(_t)}catch(st){console.error("Error loading classrooms:",st)}finally{w(!1)}};We(),Ze()},[t,e,a]);const Qe=async()=>{try{await i.signOut(),a("/")}catch(We){console.error("Error signing out:",We)}},lt=async We=>{w(!0);try{R(We),ee({}),await te(We.id);const Ze=await Cr(Pr(e,"classroom",We.id,"checkin"));let st=[];for(const at of Ze.docs){const it=at.data(),mt=Pr(e,"classroom",We.id,"checkin",at.id,"question");(await Cr(mt)).forEach(Ge=>{const fr=Ge.data();fr.question_show&&st.push({checkinId:at.id,checkinCode:it.code||"-",questionDocId:Ge.id,...fr})})}st.sort((at,it)=>(at.question_no||0)-(it.question_no||0)),F(st)}catch(Ze){console.error("Error loading quiz:",Ze)}finally{w(!1)}},te=async We=>{try{const Ze=await Cr(Pr(e,"classroom",We,"checkin"));let st=[];for(const at of Ze.docs){const it=at.data(),mt=kt(e,"classroom",We,"checkin",at.id,"students",t.uid),_t=await kr(mt);if(_t.exists()){const Ge=_t.data();st.push({id:at.id,code:it.code,date:it.date,checkinTime:Ge.date,status:it.status})}}st.sort((at,it)=>new Date(it.date)-new Date(at.date)),Ae(st)}catch(Ze){console.error("Error fetching check-in history:",Ze)}},Ne=()=>{R(null),F([]),ee({})},Pe=(We,Ze)=>{ee(st=>({...st,[We]:Ze}))},He=async We=>{const Ze=Y[We.questionDocId]||"";if(!Ze.trim()){alert("Please enter an answer or select a choice");return}try{const st=kt(e,"classroom",S.id,"checkin",We.checkinId,"answers",String(We.question_no));await ki(st,{text:We.question_text},{merge:!0});const at=kt(st,"students",t.uid),it=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await ki(at,{time:it,answer:Ze}),alert("Answer submitted!")}catch(st){console.error("Error submitting answer:",st),alert("Failed to submit answer.")}},ze=async We=>{if(We.preventDefault(),!_e.trim()){z({type:"error",text:"กรุณาใส่รหัสห้องเรียน"});return}try{const Ze=kt(e,"classroom",_e);if(!(await kr(Ze)).exists()){z({type:"error",text:"ไม่พบห้องเรียนที่ระบุ กรุณาตรวจสอบรหัสอีกครั้ง"});return}const at=kt(e,"classroom",_e,"students",t.uid);if((await kr(at)).exists()){z({type:"error",text:"คุณได้ลงทะเบียนในห้องเรียนนี้แล้ว"});return}await ki(at,{stdid:t.uid,name:(y==null?void 0:y.name)||t.email,status:0}),z({type:"success",text:"ลงทะเบียนสำเร็จ! รอการยืนยันจากอาจารย์"});const mt=Iu(hy(e,"students"),Nu("stdid","==",t.uid)),_t=await Cr(mt),Ge=[];_t.forEach(It=>{const xi=It.ref.parent.parent;xi&&Ge.push(kr(xi))});const Br=(await Promise.all(Ge)).map(It=>({id:It.id,...It.data()}));f(Br),setTimeout(()=>{ie(!1),Be(""),z({type:"",text:""})},2e3)}catch(Ze){console.error("Error registering for classroom:",Ze),z({type:"error",text:"เกิดข้อผิดพลาดในการลงทะเบียน โปรดลองอีกครั้ง"})}},yt=We=>{try{const Ze=/\/register-classroom\/([^/?\s]+)/,st=We.match(Ze);if(st&&st[1]){const at=st[1];Be(at),ze({preventDefault:()=>{}})}else z({type:"error",text:"รูปแบบ QR Code ไม่ถูกต้อง"})}catch(Ze){console.error("Error processing QR code:",Ze),z({type:"error",text:"ไม่สามารถประมวลผล QR Code ได้"})}},Re=async We=>{try{Oe(!0);const Ze=/\/student-checkin\/([^/?\s]+)\/([^/?\s]+)/,st=We.match(Ze);if(!st||!st[1]||!st[2]){$({type:"error",text:"QR Code ไม่ถูกต้องสำหรับการเช็คชื่อ"});return}const at=st[1],it=st[2];if(S&&S.id!==at){$({type:"error",text:"QR Code นี้ไม่ตรงกับห้องเรียนที่คุณเลือก"});return}const mt=kt(e,"classroom",at,"students",t.uid),_t=await kr(mt);if(!_t.exists()){$({type:"error",text:"คุณไม่ได้ลงทะเบียนในห้องเรียนนี้"});return}const Ge=kt(e,"classroom",at,"checkin",it),fr=await kr(Ge);if(!fr.exists()){$({type:"error",text:"ไม่พบรายการเช็คชื่อ หรือการเช็คชื่อถูกยกเลิก"});return}const Br=fr.data();if(Br.status===0){$({type:"error",text:"การเช็คชื่อนี้ถูกปิดใช้งานชั่วคราว กรุณาติดต่ออาจารย์"});return}if(Br.status===2){$({type:"error",text:"การเช็คชื่อนี้ได้สิ้นสุดแล้ว"});return}const It=kt(e,"classroom",at,"checkin",it,"students",t.uid);if((await kr(It)).exists()){$({type:"info",text:"คุณได้เช็คชื่อในคาบเรียนนี้แล้ว"});return}const en=_t.data(),yn=new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});await ki(It,{stdid:t.uid,name:(y==null?void 0:y.name)||t.email,remark:"",date:yn}),await ki(kt(e,"classroom",at,"checkin",it,"scores",t.uid),{uid:t.uid,stdid:t.uid,name:(y==null?void 0:y.name)||t.email,remark:"",dates:yn,score:1,status:1}),$({type:"success",text:"เช็คชื่อสำเร็จ! 🎉"}),setTimeout(()=>{G(!1),$({type:"",text:""})},3e3)}catch(Ze){console.error("Error processing check-in QR code:",Ze),$({type:"error",text:"เกิดข้อผิดพลาดในการเช็คชื่อ โปรดลองใหม่อีกครั้ง"})}finally{Oe(!1)}},Ue=We=>{$({type:"",text:""}),G(!0)};return J.useEffect(()=>{if(fe&&!V.current){const We=new Ly("qr-reader",{fps:10,qrbox:250},!1);return We.render(Ze=>{yt(Ze),We.clear()},Ze=>{}),V.current=We,()=>{V.current&&(V.current.clear(),V.current=null)}}},[fe]),J.useEffect(()=>{if(k&&!oe.current){const We=new Ly("checkin-qr-reader",{fps:10,qrbox:250},!1);return We.render(Ze=>{Re(Ze),We.clear()},Ze=>{}),oe.current=We,()=>{oe.current&&(oe.current.clear(),oe.current=null)}}},[k]),J.useEffect(()=>{console.log("Loading state:",_),console.log("Selected classroom:",S)},[_,S]),t?C.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[C.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-3xl font-bold mb-6",children:"Student Classroom"}),C.jsx("div",{className:"mb-4",children:S?C.jsx("button",{onClick:Ne,className:"hover:text-blue-300 transition",children:"กลับสู่รายการห้องเรียน"}):C.jsx("button",{onClick:()=>a("/student-dashboard"),className:"hover:text-blue-300 transition",children:"ห้องเรียนของฉัน"})})]}),C.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700",children:[y&&y.photo?C.jsx("img",{src:y.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):C.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:C.jsx("span",{className:"text-lg text-white",children:"N/A"})}),C.jsxs("div",{children:[C.jsx("p",{className:"font-bold",children:(y==null?void 0:y.name)||t.email}),C.jsx("p",{className:"text-sm",children:"Status : Student"})]})]})]}),C.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S?C.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["ห้องเรียน : ",((Fe=S.info)==null?void 0:Fe.name)||"Unknown"]}):C.jsx("h1",{className:"text-3xl font-bold text-blue-900",children:"ห้องเรียนของฉัน"}),C.jsx("button",{onClick:()=>de(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"ออกจากระบบ"})]}),_&&C.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"Loading..."}),!_&&!S&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"mb-6",children:C.jsx("button",{onClick:()=>ie(!0),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH text-lg shadow-md",children:"ลงทะเบียนห้องเรียนใหม่"})}),c.length===0?C.jsxs("div",{className:"text-center",children:[C.jsx("p",{className:"text-gray-600 mb-4",children:"คุณยังไม่ได้อยู่ในห้องเรียนใด ๆ"}),C.jsx("button",{onClick:()=>ie(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-ChakraPetchTH text-lg shadow-md mx-auto",children:"ลงทะเบียนห้องเรียนใหม่"})]}):C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(We=>{const Ze=We.info||{};return C.jsxs("div",{className:"border rounded-lg shadow-md p-4 bg-white hover:shadow-xl transition cursor-pointer",onClick:()=>lt(We),children:[Ze.photo?C.jsx("img",{src:Ze.photo,alt:Ze.name,className:"w-full h-40 object-cover rounded-md mb-4"}):C.jsx("div",{className:"w-full h-40 bg-blue-300 flex items-center justify-center rounded-md mb-4",children:C.jsx("span",{className:"text-white",children:"No Image"})}),C.jsx("h2",{className:"text-xl font-bold text-blue-900",children:Ze.name}),C.jsxs("p",{className:"text-blue-700 text-lg",children:["Code : ",Ze.code]}),C.jsxs("p",{className:"text-blue-700 text-lg",children:["Room : ",Ze.room]})]},We.id)})})]}),!_&&S&&C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500",children:[C.jsx("div",{className:"flex justify-between items-center",children:C.jsxs("h2",{className:"text-2xl font-bold text-blue-900 font-ChakraPetchTH",children:[C.jsx("span",{className:"inline-block mr-2",children:"📚"}),"ข้อมูลห้องเรียน"]})}),C.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsxs("p",{className:"text-gray-700 mb-2",children:[C.jsx("span",{className:"font-bold",children:"รหัสวิชา:"})," ",((nt=S.info)==null?void 0:nt.code)||"N/A"]}),C.jsxs("p",{className:"text-gray-700 mb-2",children:[C.jsx("span",{className:"font-bold",children:"ชื่อวิชา:"})," ",((tt=S.info)==null?void 0:tt.name)||"N/A"]}),C.jsxs("p",{className:"text-gray-700 mb-2",children:[C.jsx("span",{className:"font-bold",children:"ห้องเรียน:"})," ",((gt=S.info)==null?void 0:gt.room)||"N/A"]})]}),((An=S.info)==null?void 0:An.photo)&&C.jsx("div",{className:"flex justify-center",children:C.jsx("img",{src:S.info.photo,alt:S.info.name,className:"w-full max-w-xs rounded-md object-cover"})})]})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsxs("h2",{className:"text-2xl font-bold text-blue-900 font-ChakraPetchTH",children:[C.jsx("span",{className:"inline-block mr-2",children:"✅"}),"การเช็คชื่อเข้าเรียน"]}),C.jsxs("button",{onClick:()=>Ue(),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH shadow-md flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"เช็คชื่อเข้าเรียน"]})]}),C.jsxs("div",{className:"mt-3",children:[C.jsxs("p",{className:"text-gray-600 bg-blue-50 p-4 rounded-lg border border-blue-100 mb-4",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 inline-block mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"กดปุ่มเช็คชื่อเพื่อสแกน QR Code ที่อาจารย์แสดง เพื่อบันทึกการเข้าเรียนของคุณ"]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("h3",{className:"text-lg font-ChakraPetchTH font-semibold text-blue-800 mb-2",children:"ประวัติการเช็คชื่อของคุณ"}),Ie.length>0?C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border-collapse",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-green-50",children:[C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"ลำดับ"}),C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"รหัสการเช็คชื่อ"}),C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"วันที่เช็คชื่อ"}),C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"เช็คชื่อเมื่อ"}),C.jsx("th",{className:"border border-green-200 px-4 py-2 text-left font-ChakraPetchTH",children:"สถานะ"})]})}),C.jsx("tbody",{children:Ie.map((We,Ze)=>C.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:Ze+1}),C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:We.code}),C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:We.date}),C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:We.checkinTime}),C.jsx("td",{className:"border border-green-200 px-4 py-2 font-ChakraPetchTH",children:We.status===1?C.jsxs("span",{className:"text-green-600 flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"เปิดใช้งาน"]}):We.status===0?C.jsxs("span",{className:"text-red-600 flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"ปิดใช้งาน"]}):C.jsxs("span",{className:"text-gray-600 flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"เสร็จสิ้น"]})})]},We.id))})]})}):C.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),C.jsx("p",{className:"text-gray-600 font-ChakraPetchTH",children:"คุณยังไม่มีประวัติการเช็คชื่อในห้องเรียนนี้"})]})]})]})]}),C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-indigo-500",children:[C.jsxs("h2",{className:"text-2xl font-bold text-blue-900 font-ChakraPetchTH mb-4",children:[C.jsx("span",{className:"inline-block mr-2",children:"📝"}),"แบบทดสอบ (Quiz)"]}),P.length===0?C.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),C.jsx("p",{className:"text-gray-600 font-ChakraPetchTH",children:"ยังไม่มีควิซในขณะนี้"}),C.jsx("p",{className:"text-gray-500 text-sm font-ChakraPetchTH mt-1",children:"อาจารย์จะเพิ่มควิซเมื่อต้องการให้คุณตอบคำถาม"})]}):C.jsx("div",{className:"space-y-6",children:P.map(We=>{const Ze=Y[We.questionDocId]||"";return C.jsxs("div",{className:"border-2 border-indigo-100 p-6 rounded-lg hover:bg-indigo-50 transition bg-white",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsxs("h3",{className:"font-semibold text-lg text-indigo-900 font-ChakraPetchTH",children:["คำถาม #",We.question_no]}),C.jsxs("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm",children:["รหัสเช็คชื่อ: ",We.checkinCode||"-"]})]}),C.jsx("p",{className:"font-medium mb-4 text-gray-800 font-ChakraPetchTH",children:We.question_text}),We.question_type==="objective"&&Array.isArray(We.choices)&&We.choices.length>0?C.jsx("div",{className:"flex flex-col space-y-3 mb-4 bg-white p-4 rounded-lg border border-indigo-100",children:We.choices.map((st,at)=>C.jsxs("label",{className:"flex items-center space-x-3 p-2 rounded hover:bg-indigo-50 cursor-pointer",children:[C.jsx("input",{type:"radio",name:`q_${We.questionDocId}`,value:st,checked:Ze===st,onChange:it=>Pe(We.questionDocId,it.target.value),className:"h-5 w-5 text-indigo-600"}),C.jsx("span",{className:"font-ChakraPetchTH",children:st})]},at))}):C.jsx("textarea",{placeholder:"พิมพ์คำตอบของคุณที่นี่...",className:"w-full p-3 border border-indigo-200 rounded-lg focus:ring focus:ring-indigo-200 focus:outline-none mb-4",rows:"3",value:Ze,onChange:st=>Pe(We.questionDocId,st.target.value)}),C.jsxs("button",{onClick:()=>He(We),className:"bg-indigo-600 text-white px-5 py-2 rounded-lg hover:bg-indigo-700 transition font-ChakraPetchTH flex items-center",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"ส่งคำตอบ"]})]},We.questionDocId)})})]})]}),W&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),C.jsx("div",{className:"mt-2",children:C.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),C.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[C.jsx("button",{type:"button",onClick:()=>{de(!1),Qe()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),C.jsx("button",{type:"button",onClick:()=>de(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]}),fe&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ลงทะเบียนห้องเรียน"}),C.jsxs("div",{className:"mt-2",children:[C.jsxs("form",{onSubmit:ze,children:[C.jsx("input",{type:"text",placeholder:"รหัสห้องเรียน",className:"w-full p-2 border rounded mb-2",value:_e,onChange:We=>Be(We.target.value)}),C.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"ลงทะเบียน"})]}),ke.text&&C.jsx("p",{className:`mt-2 text-sm ${ke.type==="error"?"text-red-600":"text-green-600"}`,children:ke.text}),C.jsxs("div",{className:"mt-4",children:[C.jsx("h4",{className:"text-md font-ChakraPetchTH mb-2",children:"หรือสแกน QR Code"}),C.jsx("div",{id:"qr-reader",className:"w-full rounded overflow-hidden",style:{maxWidth:"100%"}})]})]})]})]})}),C.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:C.jsx("button",{type:"button",onClick:()=>ie(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})})]})})})]}),k&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsxs("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:["เช็คชื่อเข้าเรียน",S&&C.jsx("span",{className:"text-blue-600 ml-2",children:(xt=S.info)==null?void 0:xt.name})]}),C.jsxs("div",{className:"mt-2",children:[C.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"กรุณาสแกน QR Code ที่อาจารย์แสดงเพื่อเช็คชื่อเข้าเรียน"}),K.text&&C.jsx("div",{className:`p-3 rounded mb-4 ${K.type==="error"?"bg-red-100 text-red-700":K.type==="success"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:C.jsx("p",{className:"text-sm font-ChakraPetchTH",children:K.text})}),C.jsx("div",{id:"checkin-qr-reader",className:"w-full rounded overflow-hidden",style:{maxWidth:"100%"}})]})]})]})}),C.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:C.jsx("button",{type:"button",onClick:()=>G(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ปิด"})})]})})})]})]})]}):null}function NR(){const i=ea(),e=So(),t=ul(Ds),{classroomId:a}=F1(),[c]=IA(),f=c.get("checkinId")||"",[y,b]=J.useState(null),[_,w]=J.useState([]),[S,R]=J.useState(""),[P,F]=J.useState(""),[Y,ee]=J.useState(!1),[W,de]=J.useState("subjective"),[fe,ie]=J.useState([""]),[_e,Be]=J.useState(null),[ke,z]=J.useState(null),[V,k]=J.useState([]),[G,K]=J.useState(!1),[$,X]=J.useState(!1),Oe=e.currentUser;J.useEffect(()=>{async function Ue(){if(Oe){const Fe=kt(t,"users",Oe.uid),nt=await kr(Fe);nt.exists()&&b(nt.data())}}Ue()},[Oe,t]),J.useEffect(()=>{async function Ue(){if(!(!a||!f))try{const Fe=Pr(t,"classroom",a,"checkin",f,"question"),nt=await Cr(Fe),tt=[];nt.forEach(gt=>{tt.push({id:gt.id,...gt.data()})}),tt.sort((gt,An)=>gt.question_no-An.question_no),w(tt)}catch(Fe){console.error("Error loading questions:",Fe)}}Ue()},[t,a,f]);const oe=async()=>{if(!a||!f){alert("ไม่พบ classroomId หรือ checkinId");return}if(!S||!P){alert("กรุณากรอกหมายเลขและข้อความคำถาม");return}try{const Ue=_e||x_(),Fe=kt(t,"classroom",a,"checkin",f,"question",Ue);await ki(Fe,{question_no:parseInt(S,10),question_text:P,question_show:Y,question_type:W,choices:W==="objective"?fe.filter(gt=>gt.trim()!==""):[]}),alert(_e?"แก้ไขคำถามสำเร็จ":"สร้างคำถามสำเร็จ"),R(""),F(""),ee(!1),de("subjective"),ie([""]),Be(null);const nt=await Cr(Pr(t,"classroom",a,"checkin",f,"question")),tt=[];nt.forEach(gt=>{tt.push({id:gt.id,...gt.data()})}),tt.sort((gt,An)=>gt.question_no-An.question_no),w(tt)}catch(Ue){console.error("Error saving question:",Ue),alert("เกิดข้อผิดพลาดในการบันทึกคำถาม")}},Ie=Ue=>{Be(Ue.id),R(Ue.question_no),F(Ue.question_text),ee(Ue.question_show),de(Ue.question_type||"subjective"),Ue.choices&&Array.isArray(Ue.choices)?ie(Ue.choices):ie([""])},Ae=async Ue=>{if(window.confirm("คุณแน่ใจหรือไม่ที่จะลบคำถามนี้?"))try{await du(kt(t,"classroom",a,"checkin",f,"question",Ue)),alert("ลบคำถามสำเร็จ"),w(Fe=>Fe.filter(nt=>nt.id!==Ue))}catch(Fe){console.error("Error deleting question:",Fe),alert("ไม่สามารถลบคำถามได้")}},Qe=async Ue=>{try{const Fe=kt(t,"classroom",a,"checkin",f,"question",Ue.id);await Jl(Fe,{question_show:!Ue.question_show}),w(nt=>nt.map(tt=>tt.id===Ue.id?{...tt,question_show:!Ue.question_show}:tt))}catch(Fe){console.error("Error toggling question_show:",Fe)}},lt=()=>{ie(Ue=>[...Ue,""])},te=(Ue,Fe)=>{ie(nt=>{const tt=[...nt];return tt[Ue]=Fe,tt})},Ne=Ue=>{ie(Fe=>{const nt=[...Fe];return nt.splice(Ue,1),nt})},Pe=async Ue=>{if(!a||!f){alert("ไม่พบ classroomId หรือ checkinId");return}const Fe=String(Ue.question_no);z(Ue),k([]),K(!0);try{const nt=kt(t,"classroom",a,"checkin",f,"answers",Fe);await ki(nt,{text:Ue.question_text},{merge:!0});const tt=Pr(nt,"students"),gt=await Cr(tt),An=[];for(const xt of gt.docs){const We=xt.data(),Ze=xt.id,st=kt(t,"classroom",a,"checkin",f,"students",Ze),at=await kr(st);let it="(ไม่มีชื่อ)";at.exists()&&(it=at.data().name||"(ไม่มีชื่อ)"),An.push({studentDocId:Ze,name:it,...We})}k(An)}catch(nt){console.error("Error loading student answers:",nt),alert("ไม่สามารถโหลดคำตอบนักเรียนได้")}finally{K(!1)}},He=()=>{z(null),k([])},ze=(Ue,Fe)=>{k(nt=>{const tt=[...nt];return tt[Ue]={...tt[Ue],score:Fe},tt})},yt=async Ue=>{if(!ke)return;const Fe=V[Ue],nt=String(ke.question_no);if(Fe.score==null||Fe.score===""){alert("กรุณากรอกคะแนนให้ถูกต้อง");return}try{const tt=kt(t,"classroom",a,"checkin",f,"answers",nt),gt=kt(tt,"students",Fe.studentDocId);await Jl(gt,{score:Number(Fe.score)}),alert(`บันทึกคะแนนสำเร็จสำหรับนักเรียน: ${Fe.studentDocId}`)}catch(tt){console.error("Error saving score:",tt),alert("ไม่สามารถบันทึกคะแนนได้")}},Re=async()=>{try{await Sw(e),i("/")}catch(Ue){console.error("Error signing out:",Ue)}};return C.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[C.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-4xl font-ChakraPetchTH mb-8",children:"สร้างควิซ"}),C.jsx("ul",{className:"space-y-4",children:C.jsx("li",{children:C.jsx("button",{onClick:()=>i("/dashboard"),className:"hover:text-blue-300 transition font-ChakraPetchTH",children:"กลับไปแดชบอร์ด"})})})]}),C.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",onClick:()=>i("/edit-profile"),children:[y&&y.photo?C.jsx("img",{src:y.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):C.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:C.jsx("span",{className:"text-lg text-white",children:"N/A"})}),C.jsxs("div",{children:[C.jsx("p",{className:"font-bold font-ChakraPetchTH",children:(y==null?void 0:y.name)||(Oe==null?void 0:Oe.email)||"User"}),Oe&&C.jsx("p",{className:"text-blue-200 text-sm font-ChakraPetchTH",children:Oe.email})]})]})]}),C.jsxs("main",{className:"flex-1 bg-blue-50 p-8 animate-fadeIn overflow-y-auto relative",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsx("h1",{className:"text-3xl font-ChakraPetchTH text-blue-900",children:"สร้าง/จัดการควิซ"}),C.jsx("button",{onClick:()=>X(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition font-ChakraPetchTH",children:"ออกจากระบบ"})]}),C.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[C.jsxs("h2",{className:"text-xl font-ChakraPetchTH mb-4 text-blue-900",children:["รหัสห้องเรียน: ",a||"N/A"," | รหัสเช็คอิน: ",f||"N/A"]}),C.jsxs("div",{className:"mb-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[C.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-4 text-blue-900",children:_e?`แก้ไขคำถาม (ID: ${_e})`:"สร้างคำถามใหม่"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"หมายเลขคำถาม"}),C.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:S,onChange:Ue=>R(Ue.target.value)})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"แสดงคำถาม?"}),C.jsx("input",{type:"checkbox",checked:Y,onChange:Ue=>ee(Ue.target.checked),className:"h-5 w-5 text-blue-600"})]})]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ประเภทคำถาม"}),C.jsxs("select",{className:"p-2 border rounded",value:W,onChange:Ue=>de(Ue.target.value),children:[C.jsx("option",{value:"subjective",children:"อัตนัย"}),C.jsx("option",{value:"objective",children:"ปรนัย"})]})]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ข้อความคำถาม"}),C.jsx("textarea",{className:"w-full p-2 border rounded",rows:2,value:P,onChange:Ue=>F(Ue.target.value)})]}),W==="objective"&&C.jsxs("div",{className:"mt-4",children:[C.jsx("label",{className:"block text-blue-700 mb-1 font-ChakraPetchTH",children:"ตัวเลือก"}),fe.map((Ue,Fe)=>C.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[C.jsx("input",{type:"text",className:"flex-1 p-2 border rounded",value:Ue,onChange:nt=>te(Fe,nt.target.value),placeholder:`ตัวเลือกที่ ${Fe+1}`}),fe.length>1&&C.jsx("button",{onClick:()=>Ne(Fe),className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition",children:"X"})]},Fe)),C.jsx("button",{onClick:lt,className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH",children:"เพิ่มตัวเลือก"})]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("button",{onClick:oe,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition font-ChakraPetchTH mr-2",children:_e?"อัปเดตคำถาม":"บันทึกคำถาม"}),_e&&C.jsx("button",{onClick:()=>{Be(null),R(""),F(""),ee(!1),de("subjective"),ie([""])},className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH",children:"ยกเลิก"})]})]}),C.jsx("h3",{className:"text-lg font-ChakraPetchTH mb-2 text-blue-900",children:"รายการคำถาม"}),_.length===0?C.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำถาม"}):C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ลำดับ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ข้อความคำถาม"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ประเภท"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"แสดง?"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"การดำเนินการ"})]})}),C.jsx("tbody",{children:_.map(Ue=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:Ue.question_no}),C.jsx("td",{className:"border p-2",children:Ue.question_text}),C.jsx("td",{className:"border p-2",children:Ue.question_type==="objective"?"ปรนัย":"อัตนัย"}),C.jsx("td",{className:"border p-2",children:Ue.question_show?"ใช่":"ไม่ใช่"}),C.jsxs("td",{className:"border p-2",children:[C.jsx("button",{onClick:()=>Ie(Ue),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition font-ChakraPetchTH mr-2",children:"แก้ไข"}),C.jsx("button",{onClick:()=>Qe(Ue),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition font-ChakraPetchTH mr-2",children:"สลับแสดง"}),C.jsx("button",{onClick:()=>Ae(Ue.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition font-ChakraPetchTH mr-2",children:"ลบ"}),C.jsx("button",{onClick:()=>Pe(Ue),className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition font-ChakraPetchTH",children:"ให้คะแนน"})]})]},Ue.id))})]})}),ke&&C.jsxs("div",{className:"mt-8 border p-4 rounded-md bg-blue-50 shadow-md",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsxs("h3",{className:"text-lg font-ChakraPetchTH",children:["คำตอบนักเรียนสำหรับคำถามที่ #",ke.question_no]}),C.jsx("button",{onClick:He,className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition font-ChakraPetchTH",children:"ปิด"})]}),G?C.jsx("p",{className:"font-ChakraPetchTH",children:"กำลังโหลดคำตอบ..."}):V.length===0?C.jsx("p",{className:"font-ChakraPetchTH",children:"ไม่พบคำตอบนักเรียน"}):C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-blue-100",children:[C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"รหัสนักเรียน"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ชื่อ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คำตอบ"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"เวลา"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"คะแนน"}),C.jsx("th",{className:"border p-2 text-left font-ChakraPetchTH",children:"ดำเนินการ"})]})}),C.jsx("tbody",{children:V.map((Ue,Fe)=>C.jsxs("tr",{className:"hover:bg-blue-50",children:[C.jsx("td",{className:"border p-2",children:Ue.studentDocId}),C.jsx("td",{className:"border p-2",children:Ue.name}),C.jsx("td",{className:"border p-2",children:Ue.answer||"-"}),C.jsx("td",{className:"border p-2",children:Ue.time||"-"}),C.jsx("td",{className:"border p-2",children:C.jsx("input",{type:"number",className:"w-20 p-1 border rounded",value:Ue.score||"",onChange:nt=>ze(Fe,nt.target.value)})}),C.jsx("td",{className:"border p-2",children:C.jsx("button",{onClick:()=>yt(Fe),className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition font-ChakraPetchTH",children:"บันทึก"})})]},Ue.studentDocId))})]})})]})]})]}),$&&C.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[C.jsx("div",{className:"fixed inset-0 bg-gray-500/75 transition-opacity","aria-hidden":"true"}),C.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:C.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[C.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:C.jsxs("div",{className:"sm:flex sm:items-start",children:[C.jsx("div",{className:"mx-auto flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:C.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),C.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[C.jsx("h3",{className:"text-base font-semibold text-gray-900",id:"modal-title",children:"ยืนยันการออกจากระบบ"}),C.jsx("div",{className:"mt-2",children:C.jsx("p",{className:"text-sm text-gray-500",children:"คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?"})})]})]})}),C.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[C.jsx("button",{type:"button",onClick:()=>{X(!1),Re()},className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-red-500 sm:ml-3 sm:w-auto",children:"ใช่, ออกจากระบบ"}),C.jsx("button",{type:"button",onClick:()=>X(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 shadow-xs ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"ยกเลิก"})]})]})})})]})]})}function RR(){const i=ul(Ds),e=So(Ds),t=e.currentUser,a=ea(),{classroomId:c}=F1(),[f,y]=J.useState(null),[b,_]=J.useState(null),[w,S]=J.useState([]),[R,P]=J.useState(!0);J.useEffect(()=>{if(!t){a("/");return}(async()=>{try{const ee=kt(i,"users",t.uid),W=await kr(ee);W.exists()&&y(W.data());const de=kt(i,"classroom",c),fe=await kr(de);fe.exists()&&_(fe.data().info||{});const ie=Pr(i,"classroom",c,"checkin"),_e=await Cr(ie);let Be=[];for(const ke of _e.docs){const z=ke.id,V=Pr(i,"classroom",c,"checkin",z,"question");(await Cr(V)).forEach(G=>{const K=G.data();K.question_show===!0&&Be.push({checkinId:z,id:G.id,question_no:K.question_no,question_text:K.question_text,question_show:K.question_show})})}Be.sort((ke,z)=>ke.question_no-z.question_no),S(Be)}catch(ee){console.error("Error loading data for student detail:",ee)}finally{P(!1)}})()},[i,t,a,c]);const F=async()=>{try{await e.signOut(),a("/")}catch(Y){console.error("Error signing out:",Y)}};return t?R?C.jsx("div",{children:"Loading..."}):C.jsxs("div",{className:"flex h-screen bg-blue-50 overflow-hidden",children:[C.jsxs("aside",{className:"w-64 bg-blue-500 text-white p-6 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-2xl mb-6",children:"Student Classroom"}),C.jsx("button",{onClick:()=>a("/student-dashboard"),className:"hover:text-blue-300 transition",children:"Back to My Classes"})]}),C.jsxs("div",{className:"flex items-center pt-6 border-t border-blue-700 cursor-pointer",children:[f&&f.photo?C.jsx("img",{src:f.photo,alt:"Profile",className:"w-12 h-12 rounded-full mr-4"}):C.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mr-4",children:C.jsx("span",{className:"text-lg text-white",children:"N/A"})}),C.jsxs("div",{children:[C.jsx("p",{className:"font-bold",children:(f==null?void 0:f.name)||t.email}),C.jsx("p",{className:"text-sm",children:"Status: Student"})]})]})]}),C.jsxs("main",{className:"flex-1 bg-blue-50 p-8 overflow-y-auto relative",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsxs("h1",{className:"text-3xl",children:[(b==null?void 0:b.name)||"Unknown"," - Quiz"]}),C.jsx("button",{onClick:F,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Sign Out"})]}),C.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[C.jsx("h2",{className:"text-xl font-bold mb-4",children:"Questions (ที่ question_show = true)"}),w.length===0?C.jsx("p",{children:"No questions yet."}):C.jsx("ul",{className:"space-y-2",children:w.map(Y=>C.jsxs("li",{className:"border p-2 rounded hover:bg-blue-50",children:[C.jsxs("span",{className:"font-semibold",children:["Question #",Y.question_no,":"]})," ",Y.question_text,C.jsxs("span",{className:"ml-4 italic text-sm text-gray-500",children:["(Checkin: ",Y.checkinId,")"]})]},`${Y.checkinId}-${Y.id}`))})]})]})]}):null}function DR(){return C.jsx(bA,{children:C.jsxs($b,{children:[C.jsx(va,{path:"/",element:C.jsx(TN,{})}),C.jsx(va,{path:"/dashboard",element:C.jsx(VN,{})}),C.jsx(va,{path:"/student-dashboard",element:C.jsx(IR,{})}),C.jsx(va,{path:"/edit-profile",element:C.jsx(FN,{})}),C.jsx(va,{path:"/edit-classroom/:cid",element:C.jsx(zN,{})}),C.jsx(va,{path:"/create-quiz/:classroomId",element:C.jsx(NR,{})}),C.jsx(va,{path:"/student-classroom/:classroomId",element:C.jsx(RR,{})}),C.jsx(va,{path:"*",element:C.jsx(Kb,{to:"/",replace:!0})})]})})}ob.createRoot(document.getElementById("root")).render(C.jsx(wr.StrictMode,{children:C.jsx(DR,{})}));
